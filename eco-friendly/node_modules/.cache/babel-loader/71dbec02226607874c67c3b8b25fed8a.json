{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t, unwrap as i } from \"../../../../core/maybe.js\";\nimport s from \"../../../../core/PooledArray.js\";\nimport { isAbortError as n } from \"../../../../core/promiseUtils.js\";\nimport { l as r } from \"../../../../chunks/vec3.js\";\nimport { b as o } from \"../../../../chunks/vec4f64.js\";\nimport { LodMetric as a, NodeBase as d, Node as l, ElevationRange as h, NodeFilterImpact as u, NodeIMModificationImpact as c, NodeTraversalState as g } from \"./I3SNode.js\";\nimport { addWraparound as m, invalidateMbs as _, invalidateObb as f } from \"./I3SUtil.js\";\nimport { clone as v } from \"../../support/orientedBoundingBox.js\";\n\nclass b {\n  constructor(e, t, i, s, n) {\n    this.childOffset = e, this.childCount = t, this.visibilityCache = i, this.ref = s, this.node = n, this.useAsHole = 0, this.filterImpact = u.NotChecked;\n  }\n\n}\n\nclass p {\n  constructor(e, t, i, n, r, o, d, l, h, u, c, g, m, _) {\n    this.streamDataController = i, this.viewportQueries = n, this.logger = r, this.holeFilling = o, this._isLoaded = d, this._isReloading = l, this._isSelected = h, this._enable = u, this._needsUpdate = c, this._canRequest = g, this._computeVisibilityObb = m, this._computeNodeFiltering = _, this._dirty = !0, this._nodePages = [], this.nodeCount = 0, this.nodesPerPage = 0, this.rootIndex = 0, this.lodMetric = a.None, this._lodConversion = e => e, this.urlPrefix = \"\", this._loading = new Set(), this._failedNodes = new Set(), this._failedPages = new Set(), this._indexMissing = 1, this._maxUnloadedPrio = Number.NEGATIVE_INFINITY, this._maxProcessingPrio = Number.POSITIVE_INFINITY, this._nodeTraversalState = new Map(), this._version = I(0), this._visibilityCacheVersion = I(0), this._maxLevel = 1, this._featureEstimate = {\n      estimate: 0,\n      leavesReached: !1\n    }, this._unloadedMemoryEstimate = 0, this._missing = new s({\n      deallocator: null\n    }), this._prefetch = new s({\n      deallocator: null\n    }), this._updates = new N(this._missing), this._imModificationUncategorized = new s({\n      deallocator: null\n    }), this.ignoreServiceObb = !1, this.progressiveLoadPenalty = 0, this._pageQueue = [], this.needNodeElevationRange = !1, this.layerHasModifications = !1, this._layerHasFilter = !1, this.logLayer = e, e.serviceUpdateTimeStamp && e.serviceUpdateTimeStamp.lastUpdate && (this.lastUpdate = `${e.serviceUpdateTimeStamp.lastUpdate}`), this._maxLodLevel = this.viewportQueries ? this.viewportQueries.maxLodLevel : 1, this._init(t);\n  }\n\n  _init(e) {\n    if (\"page\" === e.type) {\n      switch (this.urlPrefix = e.urlPrefix, this.nodesPerPage = e.pageSize, this.rootIndex = e.rootIndex, e.lodMetric) {\n        case \"maxScreenThreshold\":\n          this.lodMetric = a.MaxScreenThreshold;\n          break;\n\n        case \"maxScreenThresholdSQ\":\n          this.lodMetric = a.MaxScreenThreshold, this._lodConversion = V;\n      }\n\n      this._addPage(S(this.rootIndex, this.nodesPerPage), e.rootPage), this._updateParentsAndLevel();\n    } else if (\"node\" === e.type) {\n      this.urlPrefix = e.urlPrefix, this._nodePages.push({\n        nodes: [],\n        children: [],\n        parents: []\n      }), this._makeRefNode(new d(e.rootNode.id, null), -1);\n\n      const t = this._validateNode(e.rootNode.id, e.rootNode);\n\n      t && this._addNode(t, 0);\n    }\n  }\n\n  _loadPage(e) {\n    this._loading.add(e);\n\n    const t = this.urlPrefix + e;\n    this.streamDataController.request(t, \"json\").then(t => {\n      this._pageQueue.push({\n        pageIndex: e,\n        page: t\n      });\n    }).catch(t => {\n      this._loading.delete(e), n(t) || (this._failedPages.add(e), this.logger.error(\"#loadPage()\", this.logLayer, `Error when loading page ${e}`, t));\n    });\n  }\n\n  _addQueuedPages(e) {\n    for (; this._pageQueue.length > 0 && !e.done;) {\n      const {\n        pageIndex: t,\n        page: i\n      } = this._pageQueue.shift();\n\n      this._addPage(t, i), this._loading.delete(t), e.madeProgress();\n    }\n\n    this._updateParentsAndLevel();\n  }\n\n  _addPage(e, t) {\n    for (let r = this._nodePages.length; r < e; r++) this._nodePages[r] = null;\n\n    const i = [],\n          s = [],\n          n = t.nodes.map((t, n) => {\n      const a = i.length,\n            d = t.children ? t.children.length : 0;\n      s.push(-1);\n\n      for (let e = 0; e < d; e++) i.push(t.children[e]);\n\n      const h = `${t.index}`,\n            u = v(t.obb),\n            c = o([u.center[0], u.center[1], u.center[2], r(u.halfSize)]),\n            g = t.mesh && t.mesh.attribute,\n            m = t.mesh && t.mesh.geometry,\n            _ = t.mesh && t.mesh.material,\n            f = {\n        hasSharedResource: !1,\n        hasFeatureData: !!m,\n        attributes: g && null != g.resource ? `${g.resource}` : null,\n        geometry: m && null != m.resource ? `${m.resource}` : null,\n        texture: _ && null != _.resource ? `${_.resource}` : null,\n        geometryDefinition: m ? m.definition : -1,\n        materialDefinition: _ ? _.definition : -1\n      },\n            p = new l(h, e * this.nodesPerPage + n, c, d, 0, f, this.lastUpdate, this.lodMetric, this._lodConversion(t.lodThreshold), m ? m.featureCount : null);\n\n      return p.serviceObb = u, p.visibilityObb = this._computeVisibilityObb(p), p.vertexCount = m ? m.vertexCount : 0, new b(a, d, x(this._visibilityCacheVersion), null, p);\n    });\n    this._nodePages[e] = {\n      nodes: n,\n      children: i,\n      parents: s\n    }, this.nodeCount += n.length;\n  }\n\n  _updateParentsAndLevel() {\n    const t = new Array(),\n          i = (i, s, n) => {\n      const r = this._getPage(i);\n\n      if (e(r)) {\n        const o = L(i, this.nodesPerPage);\n        r.parents[o] = s;\n        const a = r.nodes[o].node;\n        e(a) && (a.level = n, t.push(i));\n      }\n    };\n\n    for (i(this.rootIndex, -1, 0); t.length;) {\n      const s = t.pop(),\n            n = this.getNode(s);\n      if (e(n)) for (let e = 0; e < n.childCount; e++) {\n        i(this.getChildIndex(n.index, e), s, n.level + 1), this._maxLevel = Math.max(this._maxLevel, n.level + 1);\n      }\n    }\n  }\n\n  _getPage(e) {\n    return this._nodePages[S(e, this.nodesPerPage)];\n  }\n\n  _getNodeInternal(e) {\n    const i = this._getPage(e);\n\n    return t(i) ? null : i.nodes[L(e, this.nodesPerPage)];\n  }\n\n  _addNode(t, s) {\n    null != t.children && this.populateChildren(s, t.children);\n    const n = this.getParent(s),\n          r = e(n) ? n.level + 1 : 0;\n    this._maxLevel = Math.max(this._maxLevel, t.children ? r + 1 : r);\n    const {\n      lodMetric: a,\n      maxError: d\n    } = E(t.lodSelection),\n          h = i(this._getNodeInternal(s));\n    return h.node = new l(t.id, s, o(t.mbs), h.childCount, r, t.resources, t.version, a, d, t.numFeatures), t.obb && (h.node.serviceObb = v(t.obb)), h.node.visibilityObb = this._computeVisibilityObb(h.node), e(h.ref) && (null == h.ref.mbs && (h.ref.mbs = t.mbs), h.node.renderMbs = h.ref.renderMbs, h.node.serviceObbInRenderSR = h.ref.serviceObbInRenderSR, h.ref.visibilityObb = h.node.visibilityObb), h.node;\n  }\n\n  _makeRefNode(e, t) {\n    const i = this._nodePages[0],\n          s = i.nodes.length;\n    return i.nodes.push(new b(0, 0, x(this._visibilityCacheVersion), e, null)), this.nodeCount++, i.parents.push(t), _(e.renderMbs), f(e.serviceObbInRenderSR), s;\n  }\n\n  populateChildren(e, t) {\n    const s = i(this._getNodeInternal(e)),\n          n = i(this._getPage(e));\n    s.childOffset = n.children.length, s.childCount = t.length;\n\n    for (let i = 0; i < t.length; i++) {\n      const s = this._makeRefNode(t[i], e);\n\n      n.children.push(s);\n    }\n  }\n\n  getNode(t) {\n    const i = this._getNodeInternal(t);\n\n    return e(i) ? i.node : null;\n  }\n\n  getIndexById(t) {\n    let i;\n    return this._forAllNodes((s, n) => {\n      (e(s.node) && s.node.id === t || e(s.ref) && s.ref.id === t) && (i = n);\n    }), i;\n  }\n\n  getNodeById(e) {\n    const t = this.getIndexById(e);\n    return t >= 0 ? this.getNode(t) : null;\n  }\n\n  getChildIndex(e, i) {\n    const s = this._getPage(e);\n\n    if (t(s)) return -1;\n    const n = s.nodes[L(e, this.nodesPerPage)];\n    return s.children[n.childOffset + i];\n  }\n\n  getParentIndex(t) {\n    const i = this._getPage(t);\n\n    return e(i) ? i.parents[L(t, this.nodesPerPage)] : -1;\n  }\n\n  getParent(e) {\n    return (e = this.getParentIndex(e)) >= 0 ? this.getNode(e) : null;\n  }\n\n  isLeaf(t) {\n    const i = this._getNodeInternal(t);\n\n    return e(i) && 0 === i.childCount;\n  }\n\n  get rootNode() {\n    return this.getNode(this.rootIndex);\n  }\n\n  get size() {\n    return this.nodeCount;\n  }\n\n  removeAllGeometryObbs() {\n    this._forAllNodes(t => {\n      e(t.node) && (t.node.geometryObb = null);\n    });\n  }\n\n  invalidateVisibilityCache() {\n    this._visibilityCacheVersion = I(this._visibilityCacheVersion);\n  }\n\n  invalidateNodeVisibilityCache(t) {\n    const i = this._getNodeInternal(t);\n\n    e(i) && this.invalidateNodeVisibilityCacheInternal(i);\n  }\n\n  invalidateNodeVisibilityCacheInternal(e) {\n    e.visibilityCache = x(this._visibilityCacheVersion);\n  }\n\n  invalidateBoundingVolumeCache(t) {\n    const i = this._getNodeInternal(t);\n\n    e(i) && (P(i), this.invalidateNodeVisibilityCacheInternal(i));\n  }\n\n  updateElevationChanged(i) {\n    const s = this._getNodeInternal(i);\n\n    if (t(s)) return;\n    if (!this.needNodeElevationRange) return void this.invalidateBoundingVolumeCache(i);\n    const n = e(s.node) ? s.node : s.ref;\n    if (t(n)) return;\n    const r = n.elevationRange;\n    t(r) || (r.valid = !1);\n  }\n\n  invalidateGeometryVisibility(t) {\n    const i = this._getNodeInternal(t);\n\n    e(i) && e(i.node) && (i.node.geometryObb = null, _(i.node.renderMbs), f(i.node.serviceObbInRenderSR));\n  }\n\n  invalidateVisibilityObbs() {\n    t(this.rootNode) || this.traverse(this.rootNode, e => (e.visibilityObb = this._computeVisibilityObb(e), e.geometryObb = null, !0));\n  }\n\n  _updateElevationRange(i) {\n    const s = this._getNodeInternal(i);\n\n    if (t(s)) return null;\n    const n = e(s.node) ? s.node : s.ref;\n    if (t(n)) return null;\n    const r = n.elevationRange;\n    if (e(r) && r.valid) return r;\n    const o = new h();\n    let a = !1;\n\n    for (let e = 0; e < s.childCount; e++) {\n      const s = this._updateElevationRange(this.getChildIndex(i, e));\n\n      t(s) ? a = !0 : (o.min = Math.min(o.min, s.min), o.max = Math.max(o.max, s.max));\n    }\n\n    if (0 === s.childCount || a && e(s.node) && s.node.resources.geometry) {\n      const t = this.viewportQueries.getElevationRange(n);\n      e(t) && (o.min = Math.min(o.min, t.min), o.max = Math.max(o.max, t.max));\n    }\n\n    return e(r) && r.min === o.min && r.max === o.max ? (r.valid = !0, r) : (o.valid = !0, n.elevationRange = o, this.invalidateBoundingVolumeCache(i), o);\n  }\n\n  isNodeVisible(i) {\n    const s = this._getNodeInternal(i);\n\n    if (t(s) || e(s.ref) && !s.ref.mbs) return !0;\n\n    if (this.needNodeElevationRange && this._updateElevationRange(i), !w(s.visibilityCache, this._visibilityCacheVersion)) {\n      const i = s.node,\n            n = e(i) && (t(s.ref) || e(i.visibilityObb)) ? i : e(s.ref) ? s.ref : null;\n\n      if (this._layerHasFilter && this._computeNodeFiltering && (e(i) || e(s.ref)) && s.filterImpact === u.NotChecked) {\n        const t = e(i) ? i.mbs : e(s.ref) ? s.ref.mbs : null;\n        s.filterImpact = null != t ? this._computeNodeFiltering(t) : u.Unmodified;\n      }\n\n      const r = e(i) && s.filterImpact === u.Culled,\n            o = !(e(i) && i.imModificationImpact === c.Culled) && (!n || this.viewportQueries.isNodeVisible(n)) && !r;\n      return s.visibilityCache = C(o, this._visibilityCacheVersion), o;\n    }\n\n    return M(s.visibilityCache);\n  }\n\n  isGeometryVisible(t) {\n    if (!this.isNodeVisible(t)) return !1;\n\n    const i = this._getNodeInternal(t);\n\n    return !(e(i) && e(i.node) && e(i.node.geometryObb) && (!this.layerHasModifications || i.node.imModificationImpact !== c.NotChecked)) || this.viewportQueries.isGeometryVisible(i.node);\n  }\n\n  _traverseCoverage(s, n, r, o, a) {\n    const d = this._getPage(s);\n\n    if (t(d) || 0 === n.childCount) return;\n    const l = n.childOffset + n.childCount,\n          h = new Array();\n\n    for (let t = n.childOffset; t < l; ++t) {\n      const i = d.children[t],\n            s = this._getNodeInternal(i);\n\n      e(s) && e(s.node) && this.isGeometryVisible(i) && h.push(s);\n    }\n\n    o /= h.length;\n\n    for (const e of h) {\n      const t = i(e.node).index;\n      this._isLoaded(t) || this._isReloading(t) ? (a.delta = Math.max(a.delta, r), a.coverage += o) : this._traverseCoverage(t, e, r + 1, o, a);\n    }\n  }\n\n  useNodeAsHole(e) {\n    if (\"off\" === this.holeFilling) return !1;\n\n    const i = this._getNodeInternal(e);\n\n    if (t(i)) return !1;\n    if (\"always\" === this.holeFilling) return !0;\n    if (w(i.useAsHole, this._version)) return M(i.useAsHole);\n    const s = {\n      delta: 0,\n      coverage: 0\n    };\n\n    this._traverseCoverage(e, i, 0, 1, s);\n\n    const n = s.delta * s.coverage <= .5;\n    return i.useAsHole = C(n, this._version), n;\n  }\n\n  get maxLevel() {\n    return this._maxLevel;\n  }\n\n  get dirty() {\n    return this._dirty;\n  }\n\n  destroy() {\n    this._updates.add.prune(), this._updates.update.prune();\n  }\n\n  requestUpdate() {\n    this._dirty = !0, this._indexMissing = 1, this._version = I(this._version);\n  }\n\n  imModificationsChanged(t) {\n    this.layerHasModifications = t, this._forAllNodes(({\n      node: t\n    }) => {\n      e(t) && (t.imModificationImpact = c.NotChecked, t.visibilityObb = this._computeVisibilityObb(t), t.hasModifications && this.invalidateGeometryVisibility(t.index));\n    }), this.invalidateVisibilityCache();\n  }\n\n  layerFilterChanged(t) {\n    this._layerHasFilter = t, this._forAllNodes(t => {\n      if (e(t)) {\n        t.filterImpact = u.NotChecked;\n        const i = t.node;\n        e(i) && this.invalidateNodeVisibilityCache(i.index);\n      }\n    }), this.invalidateVisibilityCache();\n  }\n\n  update(s, n, r) {\n    if (!this._dirty) return;\n    this._pageQueue.length > 0 && this._addQueuedPages(n), this._maxUnloadedPrio = Number.NEGATIVE_INFINITY, this._maxProcessingPrio = Number.NEGATIVE_INFINITY, this._missing.clear(), this._prefetch.clear(), this._updates.reset(s), y.clear();\n    let o = !0;\n    const a = new O(),\n          d = new O(),\n          l = this._imModificationUncategorized;\n    l.clear();\n\n    const h = new Set(),\n          u = (u, g, m) => {\n      if (t(g)) {\n        let e = this._entryPriority(u);\n\n        e === 1 / 0 && (e = this._entryPriority(m));\n        const t = S(u, this.nodesPerPage);\n        return y.set(t, Math.max(e, y.get(t) || 0)), this._loading.has(t) || this._failedPages.has(t) || this._missing.push(t), void (this._maxProcessingPrio = Math.max(this._maxProcessingPrio, e));\n      }\n\n      const _ = g.node;\n\n      if (this._updateNodeFeatureEstimate(_, d), t(_)) {\n        const e = this._entryPriority(u);\n\n        return this._loading.has(u) || this._failedNodes.has(u) || (this._missing.push(u), y.set(u, e)), void (this._maxProcessingPrio = Math.max(this._maxProcessingPrio, e));\n      }\n\n      const f = i(this._getPage(u));\n      if (0 === this._missing.length && 0 === this.nodesPerPage) for (let t = 0; t < g.childCount; t++) {\n        const i = f.children[g.childOffset + t],\n              s = this._getNodeInternal(i);\n\n        !e(s) || s.node || this._loading.has(i) || this._failedNodes.has(i) || (y.set(i, this._entryPriority(i)), this._prefetch.push(i));\n      }\n      if (_.failed || !_.resources.hasFeatureData) return void (o && g.childCount > 0 && this._isSelected(_) && (o = !1));\n\n      if (h.add(_.id), this._isLoaded(u)) {\n        if (a.known += _.memory, ++a.knownNodes, this._isSelected(_) ? g.childCount > 0 && (o = !1) : (a.unremoved += _.memory, o = !1), this._needsUpdate(_)) {\n          const e = this._entryPriority(u);\n\n          y.set(u, e), this._maxProcessingPrio = Math.max(this._maxProcessingPrio, e), this._updates.update.push(u);\n        }\n\n        return;\n      }\n\n      if (_.memory && (a.known += _.memory, ++a.knownNodes), !this._isSelected(_)) return void (this._isReloading(u) && this._updates.remove.push(u));\n      if (g.childCount > 0 && (o = !1), _.memory ? (a.missing += _.memory, a.known += _.memory, ++a.knownNodes) : ++a.missingNodes, s.includes(_.index)) return this._maxProcessingPrio = Math.max(this._maxProcessingPrio, this._entryPriority(u)), void (this._updates.cancel = this._updates.cancel.filter(e => e !== _.index));\n      if (!n.done && this._enable(_)) return void n.madeProgress();\n\n      const v = this._entryPriority(u);\n\n      y.set(u, v), this._maxProcessingPrio = Math.max(this._maxProcessingPrio, v), this._updates.add.push(u), this.layerHasModifications && r && e(_) && _.imModificationImpact === c.NotChecked && l.push(u);\n    };\n\n    this.traverseVisible(u);\n    const g = this._updates.add;\n    g.length > 0 && this.layerHasModifications && (l.length > 0 && r(l), g.filterInPlace(e => {\n      const i = this._getNodeInternal(e),\n            s = t(i) || t(i.node) || i.node.imModificationImpact !== c.Culled;\n\n      return s || this.invalidateNodeVisibilityCache(e), s;\n    })), this._unloadedMemoryEstimate = a.missing - a.unremoved, a.knownNodes > 3 && a.missingNodes > 0 && (this._unloadedMemoryEstimate += a.known / a.knownNodes * a.missingNodes), this._unloadedMemoryEstimate = .8 * Math.max(0, this._unloadedMemoryEstimate), this._featureEstimate.estimate = this._computeFeatureEstimate(d), this._featureEstimate.leavesReached = o, this._missing.sort((e, t) => e - t), this._missing.filterInPlace((e, t) => t < 1 || this._missing.data[t - 1] !== e), this._missing.sort((e, t) => y.get(e) - y.get(t)), this._missing.length > 0 && (this._maxUnloadedPrio = y.get(this._missing.back()), this._prefetch.clear()), this._updates.add.filterInPlace(e => y.get(e) >= this._maxUnloadedPrio).sort((e, t) => y.get(e) - y.get(t)), this._updates.update.sort((e, t) => y.get(e) - y.get(t)), this._indexMissing = this._loading.size + this._missing.length, this._dirty = this._indexMissing > 0, y.clear();\n  }\n\n  checkFeatureTarget(e, t) {\n    const i = this.viewportQueries.updateScreenSpaceErrorBias(t);\n    let s = t,\n        n = t,\n        r = i,\n        o = 10;\n\n    for (; o--;) {\n      const i = new O();\n\n      this._updateFeatureEstimate(s, i);\n\n      if (this._computeFeatureEstimate(i) <= e) {\n        if (s >= t || i.missingNodes > 0 || 0 === o) break;\n        r = s, s = .5 * (s + n);\n      } else n = s, s = .5 * (s + r);\n    }\n\n    return this._version = I(this._version), this.viewportQueries.updateScreenSpaceErrorBias(i), Math.min(t, s);\n  }\n\n  _updateFeatureEstimate(t, i) {\n    this._version = I(this._version), this.viewportQueries.updateScreenSpaceErrorBias(t), this.traverseVisible((t, s) => this._updateNodeFeatureEstimate(e(s) && s.node, i));\n  }\n\n  _updateNodeFeatureEstimate(i, s) {\n    if (!(t(i) || i.failed || t(i.numFeatures))) return this._isLoaded(i.index) ? (s.known += i.numFeatures, ++s.knownNodes, void (this._isSelected(i) || (s.unremoved += i.numFeatures))) : void (this._isSelected(i) && (e(i.numFeatures) ? (s.missing += i.numFeatures, s.known += i.numFeatures, ++s.knownNodes) : ++s.missingNodes));\n  }\n\n  _computeFeatureEstimate(e) {\n    let t = e.known - e.unremoved;\n    return e.knownNodes > 3 && e.missingNodes > 0 && (t += e.known / e.knownNodes * e.missingNodes), Math.max(0, t);\n  }\n\n  load() {\n    return this._load(this._missing);\n  }\n\n  prefetch() {\n    return this._prefetch.sort((e, t) => y.get(e) - y.get(t)), this._load(this._prefetch);\n  }\n\n  _load(e) {\n    if (0 === e.length || !this._canRequest()) return !1;\n\n    for (; e.length > 0 && this._canRequest();) 0 === this.nodesPerPage ? this._loadNode(e.pop()) : this._loadPage(e.pop());\n\n    return !0;\n  }\n\n  isLoading() {\n    return this._indexMissing > 0;\n  }\n\n  getIndexLoading() {\n    return this._loading.size;\n  }\n\n  getIndexMissing() {\n    return this._indexMissing;\n  }\n\n  getUnloadedMemoryEstimate() {\n    return this._unloadedMemoryEstimate;\n  }\n\n  get updates() {\n    return this._updates;\n  }\n\n  get featureEstimate() {\n    return this._featureEstimate;\n  }\n\n  nodeTraversalState(e) {\n    if (t(e)) return null;\n\n    let i = this._nodeTraversalState.get(e.index);\n\n    if (i && w(i.version, this._version)) return i;\n    const s = this.viewportQueries.getLodLevel(e),\n          n = this.viewportQueries.hasLOD(e);\n    let r = !0;\n\n    if (n) {\n      const t = this.getParentIndex(e.index);\n\n      if (t >= 0) {\n        const e = this._nodeTraversalState.get(t);\n\n        r = e && s > e.lodLevel;\n      } else r = s > 0;\n    } else r = 0 === e.childCount;\n\n    return i ? (i.lodLevel = s, i.isChosen = r, i.version = C(!0, this._version), i) : (i = new g(n, r, s, C(!0, this._version)), this._nodeTraversalState.set(e.index, i), i);\n  }\n\n  _loadNode(e) {\n    this._loading.add(e);\n\n    const s = i(this._getNodeInternal(e)).ref;\n    if (t(s)) return void this._failedNodes.add(e);\n\n    const r = s.id,\n          o = this.urlPrefix + r,\n          a = () => {\n      this._loading.delete(e), 0 === this._missing.length && 0 === this._loading.size && this.requestUpdate();\n    };\n\n    this.streamDataController.request(o, \"json\").then(t => {\n      a();\n\n      const i = this._validateNode(r, t);\n\n      if (null == i) return;\n      i.obb && this.invalidateNodeVisibilityCache(e);\n\n      const s = this._addNode(i, e);\n\n      this.nodeTraversalState(s);\n    }, t => {\n      a(), n(t) || (this.logger.error(\"#loadNode()\", this.logLayer, \"Error loading node: \" + o), this._failedNodes.add(e));\n    });\n  }\n\n  _validateNode(e, t) {\n    if (null == t || \"object\" != typeof t || t.id !== e) return this.logger.error(\"#validateNode()\", this.logLayer, `Invalid node. Wrong type or wrong id \"${e}\"`), null;\n    if (!Array.isArray(t.mbs)) return this.logger.error(\"#validateNode()\", this.logLayer, `Invalid bounding volume on node ${e}.`), null;\n    t.sharedResource && \"./shared\" !== t.sharedResource.href && \"./shared/\" !== t.sharedResource.href && this.logger.warn(\"#validateNode()\", this.logLayer, `Invalid shared resource href on node \"${e}\"`), null == t.geometryData || Array.isArray(t.geometryData) && 1 === t.geometryData.length && \"./geometries/0\" === t.geometryData[0].href || this.logger.warn(\"#validateNode()\", this.logLayer, `Invalid geometry data on node \"${e}\"`), null == t.attributeData || Array.isArray(t.attributeData) && !t.attributeData.some((e, t) => e.href !== `./attributes/f_${t}/0`) || this.logger.warn(\"#validateNode()\", this.logLayer, `Invalid attribute data on node \"${e}\"`), t.featureData && t.featureData.length > 1 && this.logger.warn(\"#validateNode()\", this.logLayer, `Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);\n\n    const i = t.hasOwnProperty(\"obb\") && !this.ignoreServiceObb ? t.obb : null,\n          s = t.featureData && 1 === t.featureData.length && t.featureData[0].featureRange ? t.featureData[0].featureRange[1] - t.featureData[0].featureRange[0] + 1 : null,\n          n = t => {\n      if (null == t) return null;\n\n      const i = t => this.logger.error(\"#validateNode()\", this.logLayer, `Invalid node reference on node ${e}: ${t}`);\n\n      if (\"number\" == typeof t.id) i(`id ${t.id} is a number instead of a string.`);else if (\"string\" != typeof t.id || !Array.isArray(t.mbs)) return i(\"Missing or invalid id.\"), null;\n      if (!Array.isArray(t.mbs)) return i(`Invalid bounding volume on reference ${t.id}.`), null;\n      t.href && t.href !== \"../\" + t.id && this.logger.error(\"#validateNode()\", this.logLayer, `Invalid node href on node \"${e}\"`);\n      const s = t.hasOwnProperty(\"obb\") && !this.ignoreServiceObb ? t.obb : null,\n            n = new d(`${t.id}`, t.mbs);\n      return n.serviceObb = s, n.visibilityObb = this._computeVisibilityObb(n), n;\n    },\n          r = Array.isArray(t.children) ? t.children.map(n).filter(e => null != e) : null;\n\n    return {\n      id: e,\n      mbs: t.mbs,\n      obb: i,\n      children: r,\n      resources: {\n        hasFeatureData: t.featureData && t.featureData.length > 0,\n        hasSharedResource: null != t.sharedResource,\n        attributes: t.attributeData ? e : null,\n        texture: t.textureData && t.textureData.length > 0 ? e : null,\n        geometry: null != t.geometryData ? e : null\n      },\n      version: \"string\" == typeof t.version ? t.version : null,\n      lodSelection: Array.isArray(t.lodSelection) ? t.lodSelection : null,\n      numFeatures: s\n    };\n  }\n\n  resetFailedNodes() {\n    this._failedNodes.clear(), this._failedPages.clear(), this._forAllNodes(t => {\n      e(t.node) && (t.node.failed = !1);\n    });\n  }\n\n  _entryPriority(i) {\n    const s = this._getNodeInternal(i),\n          n = this.getParentIndex(i);\n\n    if (t(s) || n < 0 && null == s.node) return n < 0 ? 1 / 0 : this._entryPriority(n);\n    let r = 0;\n\n    if (s.node && n >= 0) {\n      const e = this._nodeTraversalState.get(n);\n\n      null != e && (r = e.lodLevel);\n    }\n\n    let o = this.progressiveLoadPenalty;\n\n    for (let e = i; e >= 0; e = this.getParentIndex(e)) if (this._isLoaded(e)) {\n      o = 0;\n      break;\n    }\n\n    const a = e(s.ref) ? this.viewportQueries.distToPOI(s.ref) : e(s.node) ? this.viewportQueries.distToPOI(s.node) : 0;\n    return -a - r * (a + this.progressiveLoadPenalty) + o;\n  }\n\n  traverseVisible(e) {\n    const i = this._getNodeInternal(this.rootIndex);\n\n    t(i) ? e(this.rootIndex, null, null) : this._traverseVisible(this.rootIndex, -1, i, e);\n  }\n\n  _traverseVisible(t, s, n, r) {\n    if (n.node && 0 === n.childCount) return void (this.isGeometryVisible(t) && r(t, n, s));\n    if (!this.isNodeVisible(t)) return;\n    if (r(t, n, s), null == n.node) return;\n    const o = this.nodeTraversalState(n.node);\n    if (o.nodeHasLOD && o.lodLevel === this._maxLodLevel) return;\n    const a = i(this._getPage(t));\n\n    for (let i = 0; i < n.childCount; i++) {\n      const s = a.children[n.childOffset + i],\n            o = this._getNodeInternal(s);\n\n      e(o) ? this._traverseVisible(s, t, o, r) : r(s, null, t);\n    }\n  }\n\n  traverse(e, t) {\n    t(e) && this.traverseChildren(e, t);\n  }\n\n  traverseChildren(t, i) {\n    const s = t.index,\n          n = this._getNodeInternal(s);\n\n    e(n) && this._traverseChildren(s, n, i);\n  }\n\n  _traverseChildren(i, s, n) {\n    const r = this._getPage(i);\n\n    if (t(r)) return;\n    const o = s.childOffset + s.childCount;\n\n    for (let t = s.childOffset; t < o; ++t) {\n      const i = r.children[t],\n            s = this._getNodeInternal(i);\n\n      e(s) && e(s.node) && n(s.node) && this._traverseChildren(i, s, n);\n    }\n  }\n\n  updateChildrenLoaded(t, i) {\n    let s = this.getNode(t);\n\n    for (; e(s);) s.childrenLoaded += i, s = this.getParent(s.index);\n  }\n\n  checkChildrenLoadedInvariant() {\n    if (t(this.rootNode)) return !0;\n\n    const e = [],\n          i = t => {\n      let s = this._isLoaded(t.index) || this._isReloading(t.index) ? 1 : 0;\n      return this.traverseChildren(t, e => (s += i(e), !1)), t.childrenLoaded !== s && e.push(t.index), s;\n    };\n\n    return i(this.rootNode), e.length && this.logger.error(\"childrenLoaded invariant broken at following nodes: \" + e.join(\",\")), e.length > 0;\n  }\n\n  updateStats(e) {\n    if (this._updates.add.length > 0 && (e.nodes += \" + \" + this._updates.add.length), (this._indexMissing || this._prefetch.length > 0) && (e.index += \" + \" + this._indexMissing || this._prefetch.length), e.prio = this._maxProcessingPrio, this._featureEstimate.estimate) {\n      const t = this._featureEstimate.estimate - e.features;\n      t > 0 ? e.features += \" + \" + t : t < 0 && (e.features += \" - \" + -t);\n    }\n  }\n\n  getPriority() {\n    return Math.max(this._maxProcessingPrio, this._maxUnloadedPrio);\n  }\n\n  updateElevationInfo(t, i) {\n    this.needNodeElevationRange = i && t && (\"relative-to-ground\" === t.mode || \"on-the-ground\" === t.mode), this._forAllNodes(t => {\n      P(t), e(t.node) && (t.node.elevationRange = null), e(t.ref) && (t.ref.elevationRange = null);\n    }), this.viewportQueries.updateElevationInfo(t);\n  }\n\n  _forAllNodes(e) {\n    for (let t = 0; t < this._nodePages.length; t++) {\n      const i = this._nodePages[t];\n\n      if (i) {\n        const s = t * this.nodesPerPage;\n\n        for (let t = 0; t < i.nodes.length; t++) e(i.nodes[t], s + t);\n      }\n    }\n  }\n\n  get test() {\n    return {\n      addNode: (e, t) => this._addNode(e, t)\n    };\n  }\n\n}\n\nconst y = new Map();\n\nclass N {\n  constructor(e) {\n    this.missing = e, this.update = new s({\n      deallocator: null\n    }), this.add = new s({\n      deallocator: null\n    }), this.remove = new s({\n      deallocator: null\n    }), this.cancel = [];\n  }\n\n  reset(e) {\n    this.add.clear(), this.update.clear(), this.cancel = e;\n  }\n\n}\n\nfunction P(t) {\n  e(t.node) && (_(t.node.renderMbs), f(t.node.serviceObbInRenderSR)), e(t.ref) && (_(t.ref.renderMbs), f(t.ref.serviceObbInRenderSR));\n}\n\nfunction x(e) {\n  return m(e, -2);\n}\n\nfunction I(e) {\n  return m(e, 2);\n}\n\nfunction C(e, t) {\n  return t + (e ? 1 : 0);\n}\n\nfunction w(e, t) {\n  return (-2 & e) === t;\n}\n\nfunction M(e) {\n  return 1 == (1 & e);\n}\n\nfunction S(e, t) {\n  return 0 === t ? 0 : e / t | 0;\n}\n\nfunction L(e, t) {\n  return 0 === t ? e : e % t;\n}\n\nconst R = [[\"maxScreenThreshold\", a.MaxScreenThreshold], [\"screenSpaceRelative\", a.ScreenSpaceRelative], [\"removedFeatureDiameter\", a.RemovedFeatureDiameter], [\"distanceRangeFromDefaultCamera\", a.DistanceRangeFromDefaultCamera]];\n\nfunction E(e) {\n  if (e) for (let t = 0; t < e.length; t++) for (const i of R) if (i[0] === e[t].metricType) return {\n    lodMetric: i[1],\n    maxError: e[t].maxError\n  };\n  return {\n    lodMetric: a.None,\n    maxError: 0\n  };\n}\n\nclass O {\n  constructor() {\n    this.known = 0, this.knownNodes = 0, this.missing = 0, this.missingNodes = 0, this.unremoved = 0;\n  }\n\n}\n\nfunction V(e) {\n  return Math.sqrt(e * (4 / Math.PI));\n}\n\nexport { p as I3SIndex, E as selectErrorMetric };","map":{"version":3,"names":["isSome","e","isNone","t","unwrap","i","s","isAbortError","n","l","r","b","o","LodMetric","a","NodeBase","d","Node","ElevationRange","h","NodeFilterImpact","u","NodeIMModificationImpact","c","NodeTraversalState","g","addWraparound","m","invalidateMbs","_","invalidateObb","f","clone","v","constructor","childOffset","childCount","visibilityCache","ref","node","useAsHole","filterImpact","NotChecked","p","streamDataController","viewportQueries","logger","holeFilling","_isLoaded","_isReloading","_isSelected","_enable","_needsUpdate","_canRequest","_computeVisibilityObb","_computeNodeFiltering","_dirty","_nodePages","nodeCount","nodesPerPage","rootIndex","lodMetric","None","_lodConversion","urlPrefix","_loading","Set","_failedNodes","_failedPages","_indexMissing","_maxUnloadedPrio","Number","NEGATIVE_INFINITY","_maxProcessingPrio","POSITIVE_INFINITY","_nodeTraversalState","Map","_version","I","_visibilityCacheVersion","_maxLevel","_featureEstimate","estimate","leavesReached","_unloadedMemoryEstimate","_missing","deallocator","_prefetch","_updates","N","_imModificationUncategorized","ignoreServiceObb","progressiveLoadPenalty","_pageQueue","needNodeElevationRange","layerHasModifications","_layerHasFilter","logLayer","serviceUpdateTimeStamp","lastUpdate","_maxLodLevel","maxLodLevel","_init","type","pageSize","MaxScreenThreshold","V","_addPage","S","rootPage","_updateParentsAndLevel","push","nodes","children","parents","_makeRefNode","rootNode","id","_validateNode","_addNode","_loadPage","add","request","then","pageIndex","page","catch","delete","error","_addQueuedPages","length","done","shift","madeProgress","map","index","obb","center","halfSize","mesh","attribute","geometry","material","hasSharedResource","hasFeatureData","attributes","resource","texture","geometryDefinition","definition","materialDefinition","lodThreshold","featureCount","serviceObb","visibilityObb","vertexCount","x","Array","_getPage","L","level","pop","getNode","getChildIndex","Math","max","_getNodeInternal","populateChildren","getParent","maxError","E","lodSelection","mbs","resources","version","numFeatures","renderMbs","serviceObbInRenderSR","getIndexById","_forAllNodes","getNodeById","getParentIndex","isLeaf","size","removeAllGeometryObbs","geometryObb","invalidateVisibilityCache","invalidateNodeVisibilityCache","invalidateNodeVisibilityCacheInternal","invalidateBoundingVolumeCache","P","updateElevationChanged","elevationRange","valid","invalidateGeometryVisibility","invalidateVisibilityObbs","traverse","_updateElevationRange","min","getElevationRange","isNodeVisible","w","Unmodified","Culled","imModificationImpact","C","M","isGeometryVisible","_traverseCoverage","delta","coverage","useNodeAsHole","maxLevel","dirty","destroy","prune","update","requestUpdate","imModificationsChanged","hasModifications","layerFilterChanged","clear","reset","y","O","_entryPriority","set","get","has","_updateNodeFeatureEstimate","failed","known","memory","knownNodes","unremoved","remove","missing","missingNodes","includes","cancel","filter","traverseVisible","filterInPlace","_computeFeatureEstimate","sort","data","back","checkFeatureTarget","updateScreenSpaceErrorBias","_updateFeatureEstimate","load","_load","prefetch","_loadNode","isLoading","getIndexLoading","getIndexMissing","getUnloadedMemoryEstimate","updates","featureEstimate","nodeTraversalState","getLodLevel","hasLOD","lodLevel","isChosen","isArray","sharedResource","href","warn","geometryData","attributeData","some","featureData","hasOwnProperty","featureRange","textureData","resetFailedNodes","distToPOI","_traverseVisible","nodeHasLOD","traverseChildren","_traverseChildren","updateChildrenLoaded","childrenLoaded","checkChildrenLoadedInvariant","join","updateStats","prio","features","getPriority","updateElevationInfo","mode","test","addNode","R","ScreenSpaceRelative","RemovedFeatureDiameter","DistanceRangeFromDefaultCamera","metricType","sqrt","PI","I3SIndex","selectErrorMetric"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,unwrap as i}from\"../../../../core/maybe.js\";import s from\"../../../../core/PooledArray.js\";import{isAbortError as n}from\"../../../../core/promiseUtils.js\";import{l as r}from\"../../../../chunks/vec3.js\";import{b as o}from\"../../../../chunks/vec4f64.js\";import{LodMetric as a,NodeBase as d,Node as l,ElevationRange as h,NodeFilterImpact as u,NodeIMModificationImpact as c,NodeTraversalState as g}from\"./I3SNode.js\";import{addWraparound as m,invalidateMbs as _,invalidateObb as f}from\"./I3SUtil.js\";import{clone as v}from\"../../support/orientedBoundingBox.js\";class b{constructor(e,t,i,s,n){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=s,this.node=n,this.useAsHole=0,this.filterImpact=u.NotChecked}}class p{constructor(e,t,i,n,r,o,d,l,h,u,c,g,m,_){this.streamDataController=i,this.viewportQueries=n,this.logger=r,this.holeFilling=o,this._isLoaded=d,this._isReloading=l,this._isSelected=h,this._enable=u,this._needsUpdate=c,this._canRequest=g,this._computeVisibilityObb=m,this._computeNodeFiltering=_,this._dirty=!0,this._nodePages=[],this.nodeCount=0,this.nodesPerPage=0,this.rootIndex=0,this.lodMetric=a.None,this._lodConversion=e=>e,this.urlPrefix=\"\",this._loading=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._nodeTraversalState=new Map,this._version=I(0),this._visibilityCacheVersion=I(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missing=new s({deallocator:null}),this._prefetch=new s({deallocator:null}),this._updates=new N(this._missing),this._imModificationUncategorized=new s({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=[],this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this.logLayer=e,e.serviceUpdateTimeStamp&&e.serviceUpdateTimeStamp.lastUpdate&&(this.lastUpdate=`${e.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this.viewportQueries?this.viewportQueries.maxLodLevel:1,this._init(t)}_init(e){if(\"page\"===e.type){switch(this.urlPrefix=e.urlPrefix,this.nodesPerPage=e.pageSize,this.rootIndex=e.rootIndex,e.lodMetric){case\"maxScreenThreshold\":this.lodMetric=a.MaxScreenThreshold;break;case\"maxScreenThresholdSQ\":this.lodMetric=a.MaxScreenThreshold,this._lodConversion=V}this._addPage(S(this.rootIndex,this.nodesPerPage),e.rootPage),this._updateParentsAndLevel()}else if(\"node\"===e.type){this.urlPrefix=e.urlPrefix,this._nodePages.push({nodes:[],children:[],parents:[]}),this._makeRefNode(new d(e.rootNode.id,null),-1);const t=this._validateNode(e.rootNode.id,e.rootNode);t&&this._addNode(t,0)}}_loadPage(e){this._loading.add(e);const t=this.urlPrefix+e;this.streamDataController.request(t,\"json\").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((t=>{this._loading.delete(e),n(t)||(this._failedPages.add(e),this.logger.error(\"#loadPage()\",this.logLayer,`Error when loading page ${e}`,t))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loading.delete(t),e.madeProgress()}this._updateParentsAndLevel()}_addPage(e,t){for(let r=this._nodePages.length;r<e;r++)this._nodePages[r]=null;const i=[],s=[],n=t.nodes.map(((t,n)=>{const a=i.length,d=t.children?t.children.length:0;s.push(-1);for(let e=0;e<d;e++)i.push(t.children[e]);const h=`${t.index}`,u=v(t.obb),c=o([u.center[0],u.center[1],u.center[2],r(u.halfSize)]),g=t.mesh&&t.mesh.attribute,m=t.mesh&&t.mesh.geometry,_=t.mesh&&t.mesh.material,f={hasSharedResource:!1,hasFeatureData:!!m,attributes:g&&null!=g.resource?`${g.resource}`:null,geometry:m&&null!=m.resource?`${m.resource}`:null,texture:_&&null!=_.resource?`${_.resource}`:null,geometryDefinition:m?m.definition:-1,materialDefinition:_?_.definition:-1},p=new l(h,e*this.nodesPerPage+n,c,d,0,f,this.lastUpdate,this.lodMetric,this._lodConversion(t.lodThreshold),m?m.featureCount:null);return p.serviceObb=u,p.visibilityObb=this._computeVisibilityObb(p),p.vertexCount=m?m.vertexCount:0,new b(a,d,x(this._visibilityCacheVersion),null,p)}));this._nodePages[e]={nodes:n,children:i,parents:s},this.nodeCount+=n.length}_updateParentsAndLevel(){const t=new Array,i=(i,s,n)=>{const r=this._getPage(i);if(e(r)){const o=L(i,this.nodesPerPage);r.parents[o]=s;const a=r.nodes[o].node;e(a)&&(a.level=n,t.push(i))}};for(i(this.rootIndex,-1,0);t.length;){const s=t.pop(),n=this.getNode(s);if(e(n))for(let e=0;e<n.childCount;e++){i(this.getChildIndex(n.index,e),s,n.level+1),this._maxLevel=Math.max(this._maxLevel,n.level+1)}}}_getPage(e){return this._nodePages[S(e,this.nodesPerPage)]}_getNodeInternal(e){const i=this._getPage(e);return t(i)?null:i.nodes[L(e,this.nodesPerPage)]}_addNode(t,s){null!=t.children&&this.populateChildren(s,t.children);const n=this.getParent(s),r=e(n)?n.level+1:0;this._maxLevel=Math.max(this._maxLevel,t.children?r+1:r);const{lodMetric:a,maxError:d}=E(t.lodSelection),h=i(this._getNodeInternal(s));return h.node=new l(t.id,s,o(t.mbs),h.childCount,r,t.resources,t.version,a,d,t.numFeatures),t.obb&&(h.node.serviceObb=v(t.obb)),h.node.visibilityObb=this._computeVisibilityObb(h.node),e(h.ref)&&(null==h.ref.mbs&&(h.ref.mbs=t.mbs),h.node.renderMbs=h.ref.renderMbs,h.node.serviceObbInRenderSR=h.ref.serviceObbInRenderSR,h.ref.visibilityObb=h.node.visibilityObb),h.node}_makeRefNode(e,t){const i=this._nodePages[0],s=i.nodes.length;return i.nodes.push(new b(0,0,x(this._visibilityCacheVersion),e,null)),this.nodeCount++,i.parents.push(t),_(e.renderMbs),f(e.serviceObbInRenderSR),s}populateChildren(e,t){const s=i(this._getNodeInternal(e)),n=i(this._getPage(e));s.childOffset=n.children.length,s.childCount=t.length;for(let i=0;i<t.length;i++){const s=this._makeRefNode(t[i],e);n.children.push(s)}}getNode(t){const i=this._getNodeInternal(t);return e(i)?i.node:null}getIndexById(t){let i;return this._forAllNodes(((s,n)=>{(e(s.node)&&s.node.id===t||e(s.ref)&&s.ref.id===t)&&(i=n)})),i}getNodeById(e){const t=this.getIndexById(e);return t>=0?this.getNode(t):null}getChildIndex(e,i){const s=this._getPage(e);if(t(s))return-1;const n=s.nodes[L(e,this.nodesPerPage)];return s.children[n.childOffset+i]}getParentIndex(t){const i=this._getPage(t);return e(i)?i.parents[L(t,this.nodesPerPage)]:-1}getParent(e){return(e=this.getParentIndex(e))>=0?this.getNode(e):null}isLeaf(t){const i=this._getNodeInternal(t);return e(i)&&0===i.childCount}get rootNode(){return this.getNode(this.rootIndex)}get size(){return this.nodeCount}removeAllGeometryObbs(){this._forAllNodes((t=>{e(t.node)&&(t.node.geometryObb=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=I(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(t){const i=this._getNodeInternal(t);e(i)&&this.invalidateNodeVisibilityCacheInternal(i)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=x(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(t){const i=this._getNodeInternal(t);e(i)&&(P(i),this.invalidateNodeVisibilityCacheInternal(i))}updateElevationChanged(i){const s=this._getNodeInternal(i);if(t(s))return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(i);const n=e(s.node)?s.node:s.ref;if(t(n))return;const r=n.elevationRange;t(r)||(r.valid=!1)}invalidateGeometryVisibility(t){const i=this._getNodeInternal(t);e(i)&&e(i.node)&&(i.node.geometryObb=null,_(i.node.renderMbs),f(i.node.serviceObbInRenderSR))}invalidateVisibilityObbs(){t(this.rootNode)||this.traverse(this.rootNode,(e=>(e.visibilityObb=this._computeVisibilityObb(e),e.geometryObb=null,!0)))}_updateElevationRange(i){const s=this._getNodeInternal(i);if(t(s))return null;const n=e(s.node)?s.node:s.ref;if(t(n))return null;const r=n.elevationRange;if(e(r)&&r.valid)return r;const o=new h;let a=!1;for(let e=0;e<s.childCount;e++){const s=this._updateElevationRange(this.getChildIndex(i,e));t(s)?a=!0:(o.min=Math.min(o.min,s.min),o.max=Math.max(o.max,s.max))}if(0===s.childCount||a&&e(s.node)&&s.node.resources.geometry){const t=this.viewportQueries.getElevationRange(n);e(t)&&(o.min=Math.min(o.min,t.min),o.max=Math.max(o.max,t.max))}return e(r)&&r.min===o.min&&r.max===o.max?(r.valid=!0,r):(o.valid=!0,n.elevationRange=o,this.invalidateBoundingVolumeCache(i),o)}isNodeVisible(i){const s=this._getNodeInternal(i);if(t(s)||e(s.ref)&&!s.ref.mbs)return!0;if(this.needNodeElevationRange&&this._updateElevationRange(i),!w(s.visibilityCache,this._visibilityCacheVersion)){const i=s.node,n=e(i)&&(t(s.ref)||e(i.visibilityObb))?i:e(s.ref)?s.ref:null;if(this._layerHasFilter&&this._computeNodeFiltering&&(e(i)||e(s.ref))&&s.filterImpact===u.NotChecked){const t=e(i)?i.mbs:e(s.ref)?s.ref.mbs:null;s.filterImpact=null!=t?this._computeNodeFiltering(t):u.Unmodified}const r=e(i)&&s.filterImpact===u.Culled,o=!(e(i)&&i.imModificationImpact===c.Culled)&&(!n||this.viewportQueries.isNodeVisible(n))&&!r;return s.visibilityCache=C(o,this._visibilityCacheVersion),o}return M(s.visibilityCache)}isGeometryVisible(t){if(!this.isNodeVisible(t))return!1;const i=this._getNodeInternal(t);return!(e(i)&&e(i.node)&&e(i.node.geometryObb)&&(!this.layerHasModifications||i.node.imModificationImpact!==c.NotChecked))||this.viewportQueries.isGeometryVisible(i.node)}_traverseCoverage(s,n,r,o,a){const d=this._getPage(s);if(t(d)||0===n.childCount)return;const l=n.childOffset+n.childCount,h=new Array;for(let t=n.childOffset;t<l;++t){const i=d.children[t],s=this._getNodeInternal(i);e(s)&&e(s.node)&&this.isGeometryVisible(i)&&h.push(s)}o/=h.length;for(const e of h){const t=i(e.node).index;this._isLoaded(t)||this._isReloading(t)?(a.delta=Math.max(a.delta,r),a.coverage+=o):this._traverseCoverage(t,e,r+1,o,a)}}useNodeAsHole(e){if(\"off\"===this.holeFilling)return!1;const i=this._getNodeInternal(e);if(t(i))return!1;if(\"always\"===this.holeFilling)return!0;if(w(i.useAsHole,this._version))return M(i.useAsHole);const s={delta:0,coverage:0};this._traverseCoverage(e,i,0,1,s);const n=s.delta*s.coverage<=.5;return i.useAsHole=C(n,this._version),n}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=I(this._version)}imModificationsChanged(t){this.layerHasModifications=t,this._forAllNodes((({node:t})=>{e(t)&&(t.imModificationImpact=c.NotChecked,t.visibilityObb=this._computeVisibilityObb(t),t.hasModifications&&this.invalidateGeometryVisibility(t.index))})),this.invalidateVisibilityCache()}layerFilterChanged(t){this._layerHasFilter=t,this._forAllNodes((t=>{if(e(t)){t.filterImpact=u.NotChecked;const i=t.node;e(i)&&this.invalidateNodeVisibilityCache(i.index)}})),this.invalidateVisibilityCache()}update(s,n,r){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(n),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missing.clear(),this._prefetch.clear(),this._updates.reset(s),y.clear();let o=!0;const a=new O,d=new O,l=this._imModificationUncategorized;l.clear();const h=new Set,u=(u,g,m)=>{if(t(g)){let e=this._entryPriority(u);e===1/0&&(e=this._entryPriority(m));const t=S(u,this.nodesPerPage);return y.set(t,Math.max(e,y.get(t)||0)),this._loading.has(t)||this._failedPages.has(t)||this._missing.push(t),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const _=g.node;if(this._updateNodeFeatureEstimate(_,d),t(_)){const e=this._entryPriority(u);return this._loading.has(u)||this._failedNodes.has(u)||(this._missing.push(u),y.set(u,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const f=i(this._getPage(u));if(0===this._missing.length&&0===this.nodesPerPage)for(let t=0;t<g.childCount;t++){const i=f.children[g.childOffset+t],s=this._getNodeInternal(i);!e(s)||s.node||this._loading.has(i)||this._failedNodes.has(i)||(y.set(i,this._entryPriority(i)),this._prefetch.push(i))}if(_.failed||!_.resources.hasFeatureData)return void(o&&g.childCount>0&&this._isSelected(_)&&(o=!1));if(h.add(_.id),this._isLoaded(u)){if(a.known+=_.memory,++a.knownNodes,this._isSelected(_)?g.childCount>0&&(o=!1):(a.unremoved+=_.memory,o=!1),this._needsUpdate(_)){const e=this._entryPriority(u);y.set(u,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(u)}return}if(_.memory&&(a.known+=_.memory,++a.knownNodes),!this._isSelected(_))return void(this._isReloading(u)&&this._updates.remove.push(u));if(g.childCount>0&&(o=!1),_.memory?(a.missing+=_.memory,a.known+=_.memory,++a.knownNodes):++a.missingNodes,s.includes(_.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(u)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==_.index)));if(!n.done&&this._enable(_))return void n.madeProgress();const v=this._entryPriority(u);y.set(u,v),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,v),this._updates.add.push(u),this.layerHasModifications&&r&&e(_)&&_.imModificationImpact===c.NotChecked&&l.push(u)};this.traverseVisible(u);const g=this._updates.add;g.length>0&&this.layerHasModifications&&(l.length>0&&r(l),g.filterInPlace((e=>{const i=this._getNodeInternal(e),s=t(i)||t(i.node)||i.node.imModificationImpact!==c.Culled;return s||this.invalidateNodeVisibilityCache(e),s}))),this._unloadedMemoryEstimate=a.missing-a.unremoved,a.knownNodes>3&&a.missingNodes>0&&(this._unloadedMemoryEstimate+=a.known/a.knownNodes*a.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(d),this._featureEstimate.leavesReached=o,this._missing.sort(((e,t)=>e-t)),this._missing.filterInPlace(((e,t)=>t<1||this._missing.data[t-1]!==e)),this._missing.sort(((e,t)=>y.get(e)-y.get(t))),this._missing.length>0&&(this._maxUnloadedPrio=y.get(this._missing.back()),this._prefetch.clear()),this._updates.add.filterInPlace((e=>y.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>y.get(e)-y.get(t))),this._updates.update.sort(((e,t)=>y.get(e)-y.get(t))),this._indexMissing=this._loading.size+this._missing.length,this._dirty=this._indexMissing>0,y.clear()}checkFeatureTarget(e,t){const i=this.viewportQueries.updateScreenSpaceErrorBias(t);let s=t,n=t,r=i,o=10;for(;o--;){const i=new O;this._updateFeatureEstimate(s,i);if(this._computeFeatureEstimate(i)<=e){if(s>=t||i.missingNodes>0||0===o)break;r=s,s=.5*(s+n)}else n=s,s=.5*(s+r)}return this._version=I(this._version),this.viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,s)}_updateFeatureEstimate(t,i){this._version=I(this._version),this.viewportQueries.updateScreenSpaceErrorBias(t),this.traverseVisible(((t,s)=>this._updateNodeFeatureEstimate(e(s)&&s.node,i)))}_updateNodeFeatureEstimate(i,s){if(!(t(i)||i.failed||t(i.numFeatures)))return this._isLoaded(i.index)?(s.known+=i.numFeatures,++s.knownNodes,void(this._isSelected(i)||(s.unremoved+=i.numFeatures))):void(this._isSelected(i)&&(e(i.numFeatures)?(s.missing+=i.numFeatures,s.known+=i.numFeatures,++s.knownNodes):++s.missingNodes))}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missing)}prefetch(){return this._prefetch.sort(((e,t)=>y.get(e)-y.get(t))),this._load(this._prefetch)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();)0===this.nodesPerPage?this._loadNode(e.pop()):this._loadPage(e.pop());return!0}isLoading(){return this._indexMissing>0}getIndexLoading(){return this._loading.size}getIndexMissing(){return this._indexMissing}getUnloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}nodeTraversalState(e){if(t(e))return null;let i=this._nodeTraversalState.get(e.index);if(i&&w(i.version,this._version))return i;const s=this.viewportQueries.getLodLevel(e),n=this.viewportQueries.hasLOD(e);let r=!0;if(n){const t=this.getParentIndex(e.index);if(t>=0){const e=this._nodeTraversalState.get(t);r=e&&s>e.lodLevel}else r=s>0}else r=0===e.childCount;return i?(i.lodLevel=s,i.isChosen=r,i.version=C(!0,this._version),i):(i=new g(n,r,s,C(!0,this._version)),this._nodeTraversalState.set(e.index,i),i)}_loadNode(e){this._loading.add(e);const s=i(this._getNodeInternal(e)).ref;if(t(s))return void this._failedNodes.add(e);const r=s.id,o=this.urlPrefix+r,a=()=>{this._loading.delete(e),0===this._missing.length&&0===this._loading.size&&this.requestUpdate()};this.streamDataController.request(o,\"json\").then((t=>{a();const i=this._validateNode(r,t);if(null==i)return;i.obb&&this.invalidateNodeVisibilityCache(e);const s=this._addNode(i,e);this.nodeTraversalState(s)}),(t=>{a(),n(t)||(this.logger.error(\"#loadNode()\",this.logLayer,\"Error loading node: \"+o),this._failedNodes.add(e))}))}_validateNode(e,t){if(null==t||\"object\"!=typeof t||t.id!==e)return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node. Wrong type or wrong id \"${e}\"`),null;if(!Array.isArray(t.mbs))return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&\"./shared\"!==t.sharedResource.href&&\"./shared/\"!==t.sharedResource.href&&this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid shared resource href on node \"${e}\"`),null==t.geometryData||Array.isArray(t.geometryData)&&1===t.geometryData.length&&\"./geometries/0\"===t.geometryData[0].href||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid geometry data on node \"${e}\"`),null==t.attributeData||Array.isArray(t.attributeData)&&!t.attributeData.some(((e,t)=>e.href!==`./attributes/f_${t}/0`))||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid attribute data on node \"${e}\"`),t.featureData&&t.featureData.length>1&&this.logger.warn(\"#validateNode()\",this.logLayer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const i=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,s=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:null,n=t=>{if(null==t)return null;const i=t=>this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node reference on node ${e}: ${t}`);if(\"number\"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if(\"string\"!=typeof t.id||!Array.isArray(t.mbs))return i(\"Missing or invalid id.\"),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!==\"../\"+t.id&&this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node href on node \"${e}\"`);const s=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,n=new d(`${t.id}`,t.mbs);return n.serviceObb=s,n.visibilityObb=this._computeVisibilityObb(n),n},r=Array.isArray(t.children)?t.children.map(n).filter((e=>null!=e)):null;return{id:e,mbs:t.mbs,obb:i,children:r,resources:{hasFeatureData:t.featureData&&t.featureData.length>0,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:null,texture:t.textureData&&t.textureData.length>0?e:null,geometry:null!=t.geometryData?e:null},version:\"string\"==typeof t.version?t.version:null,lodSelection:Array.isArray(t.lodSelection)?t.lodSelection:null,numFeatures:s}}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((t=>{e(t.node)&&(t.node.failed=!1)}))}_entryPriority(i){const s=this._getNodeInternal(i),n=this.getParentIndex(i);if(t(s)||n<0&&null==s.node)return n<0?1/0:this._entryPriority(n);let r=0;if(s.node&&n>=0){const e=this._nodeTraversalState.get(n);null!=e&&(r=e.lodLevel)}let o=this.progressiveLoadPenalty;for(let e=i;e>=0;e=this.getParentIndex(e))if(this._isLoaded(e)){o=0;break}const a=e(s.ref)?this.viewportQueries.distToPOI(s.ref):e(s.node)?this.viewportQueries.distToPOI(s.node):0;return-a-r*(a+this.progressiveLoadPenalty)+o}traverseVisible(e){const i=this._getNodeInternal(this.rootIndex);t(i)?e(this.rootIndex,null,null):this._traverseVisible(this.rootIndex,-1,i,e)}_traverseVisible(t,s,n,r){if(n.node&&0===n.childCount)return void(this.isGeometryVisible(t)&&r(t,n,s));if(!this.isNodeVisible(t))return;if(r(t,n,s),null==n.node)return;const o=this.nodeTraversalState(n.node);if(o.nodeHasLOD&&o.lodLevel===this._maxLodLevel)return;const a=i(this._getPage(t));for(let i=0;i<n.childCount;i++){const s=a.children[n.childOffset+i],o=this._getNodeInternal(s);e(o)?this._traverseVisible(s,t,o,r):r(s,null,t)}}traverse(e,t){t(e)&&this.traverseChildren(e,t)}traverseChildren(t,i){const s=t.index,n=this._getNodeInternal(s);e(n)&&this._traverseChildren(s,n,i)}_traverseChildren(i,s,n){const r=this._getPage(i);if(t(r))return;const o=s.childOffset+s.childCount;for(let t=s.childOffset;t<o;++t){const i=r.children[t],s=this._getNodeInternal(i);e(s)&&e(s.node)&&n(s.node)&&this._traverseChildren(i,s,n)}}updateChildrenLoaded(t,i){let s=this.getNode(t);for(;e(s);)s.childrenLoaded+=i,s=this.getParent(s.index)}checkChildrenLoadedInvariant(){if(t(this.rootNode))return!0;const e=[],i=t=>{let s=this._isLoaded(t.index)||this._isReloading(t.index)?1:0;return this.traverseChildren(t,(e=>(s+=i(e),!1))),t.childrenLoaded!==s&&e.push(t.index),s};return i(this.rootNode),e.length&&this.logger.error(\"childrenLoaded invariant broken at following nodes: \"+e.join(\",\")),e.length>0}updateStats(e){if(this._updates.add.length>0&&(e.nodes+=\" + \"+this._updates.add.length),(this._indexMissing||this._prefetch.length>0)&&(e.index+=\" + \"+this._indexMissing||this._prefetch.length),e.prio=this._maxProcessingPrio,this._featureEstimate.estimate){const t=this._featureEstimate.estimate-e.features;t>0?e.features+=\" + \"+t:t<0&&(e.features+=\" - \"+-t)}}getPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}updateElevationInfo(t,i){this.needNodeElevationRange=i&&t&&(\"relative-to-ground\"===t.mode||\"on-the-ground\"===t.mode),this._forAllNodes((t=>{P(t),e(t.node)&&(t.node.elevationRange=null),e(t.ref)&&(t.ref.elevationRange=null)})),this.viewportQueries.updateElevationInfo(t)}_forAllNodes(e){for(let t=0;t<this._nodePages.length;t++){const i=this._nodePages[t];if(i){const s=t*this.nodesPerPage;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],s+t)}}}get test(){return{addNode:(e,t)=>this._addNode(e,t)}}}const y=new Map;class N{constructor(e){this.missing=e,this.update=new s({deallocator:null}),this.add=new s({deallocator:null}),this.remove=new s({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function P(t){e(t.node)&&(_(t.node.renderMbs),f(t.node.serviceObbInRenderSR)),e(t.ref)&&(_(t.ref.renderMbs),f(t.ref.serviceObbInRenderSR))}function x(e){return m(e,-2)}function I(e){return m(e,2)}function C(e,t){return t+(e?1:0)}function w(e,t){return(-2&e)===t}function M(e){return 1==(1&e)}function S(e,t){return 0===t?0:e/t|0}function L(e,t){return 0===t?e:e%t}const R=[[\"maxScreenThreshold\",a.MaxScreenThreshold],[\"screenSpaceRelative\",a.ScreenSpaceRelative],[\"removedFeatureDiameter\",a.RemovedFeatureDiameter],[\"distanceRangeFromDefaultCamera\",a.DistanceRangeFromDefaultCamera]];function E(e){if(e)for(let t=0;t<e.length;t++)for(const i of R)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:a.None,maxError:0}}class O{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function V(e){return Math.sqrt(e*(4/Math.PI))}export{p as I3SIndex,E as selectErrorMetric};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}