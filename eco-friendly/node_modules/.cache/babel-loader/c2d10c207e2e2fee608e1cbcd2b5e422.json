{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { f as e } from \"../../../../../../chunks/vec3f32.js\";\nimport { VertexTextureCoordinates as s } from \"../attributes/VertexTextureCoordinates.glsl.js\";\nimport { textureSize as o } from \"../util/WebGL2Utils.js\";\nimport { Float3DrawUniform as t } from \"../../shaderModules/Float3DrawUniform.js\";\nimport { Float3PassUniform as r } from \"../../shaderModules/Float3PassUniform.js\";\nimport { glsl as a } from \"../../shaderModules/interfaces.js\";\nimport { createTexture2DDrawSizeUniforms as i } from \"../../shaderModules/Texture2DDrawUniform.js\";\nimport { createTexture2DPassSizeUniforms as c } from \"../../shaderModules/Texture2DPassUniform.js\";\nimport { TextureSizeUniformType as u } from \"../../shaderModules/TextureSizeUniformType.js\";\nimport { BindType as n } from \"../../shaderTechnique/BindType.js\";\nimport { GLTextureMaterialBindParameters as l } from \"../../../lib/GLTextureMaterial.js\";\nconst m = e(0, .6, .2);\nvar d;\n!function (e) {\n  e[e.Disabled = 0] = \"Disabled\", e[e.Normal = 1] = \"Normal\", e[e.Schematic = 2] = \"Schematic\", e[e.Water = 3] = \"Water\", e[e.WaterOnIntegratedMesh = 4] = \"WaterOnIntegratedMesh\", e[e.COUNT = 5] = \"COUNT\";\n}(d || (d = {}));\n\nclass p extends l {}\n\nfunction x(e, l) {\n  const m = e.fragment,\n        p = l.hasMetallicRoughnessTexture || l.hasEmissionTexture || l.hasOcclusionTexture;\n  if (l.pbrMode === d.Normal && p && e.include(s, l), l.pbrMode !== d.Schematic) {\n    if (l.pbrMode !== d.Disabled) {\n      if (l.pbrMode === d.Normal) {\n        m.code.add(a`vec3 mrr;\nvec3 emission;\nfloat occlusion;`);\n        const e = l.supportsTextureAtlas ? l.hasWebGL2Context ? u.None : u.Size : u.None,\n              s = l.pbrTextureBindType;\n        l.hasMetallicRoughnessTexture && (m.uniforms.add(s === n.Pass ? c(\"texMetallicRoughness\", e => e.textureMetallicRoughness, e) : i(\"texMetallicRoughness\", e => e.textureMetallicRoughness, e)), m.code.add(a`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)), l.hasEmissionTexture && (m.uniforms.add(s === n.Pass ? c(\"texEmission\", e => e.textureEmissive, e) : i(\"texEmission\", e => e.textureEmissive, e)), m.code.add(a`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)), l.hasOcclusionTexture ? (m.uniforms.add(s === n.Pass ? c(\"texOcclusion\", e => e.textureOcclusion, e) : i(\"texOcclusion\", e => e.textureOcclusion, e)), m.code.add(a`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)) : m.code.add(a`float getBakedOcclusion() { return 1.0; }`), m.uniforms.add(s === n.Pass ? [new r(\"emissionFactor\", e => e.emissiveFactor), new r(\"mrrFactors\", e => e.mrrFactors)] : [new t(\"emissionFactor\", e => e.emissiveFactor), new t(\"mrrFactors\", e => e.mrrFactors)]), m.code.add(a`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${p ? a`vtc.uv = vuv0;` : \"\"}\n      ${l.hasMetallicRoughnessTextureTransform ? a`vtc.uv = metallicRoughnessUV;` : \"\"}\n      ${l.hasMetallicRoughnessTexture ? l.supportsTextureAtlas ? a`\n                vtc.size = ${o(l, \"texMetallicRoughness\")};\n                applyMetallnessAndRoughness(vtc);` : a`applyMetallnessAndRoughness(vtc);` : \"\"}\n      ${l.hasEmissiveTextureTransform ? a`vtc.uv = emissiveUV;` : \"\"}\n      ${l.hasEmissionTexture ? l.supportsTextureAtlas ? a`\n                vtc.size = ${o(l, \"texEmission\")};\n                applyEmission(vtc);` : a`applyEmission(vtc);` : \"\"}\n      ${l.hasOcclusionTextureTransform ? a`vtc.uv = occlusionUV;` : \"\"}\n      ${l.hasOcclusionTexture ? l.supportsTextureAtlas ? a`\n                vtc.size = ${o(l, \"texOcclusion\")};\n                applyOcclusion(vtc);` : a`applyOcclusion(vtc);` : \"\"}\n    }\n  `);\n      }\n    } else m.code.add(a`float getBakedOcclusion() { return 1.0; }`);\n  } else m.code.add(a`vec3 mrr = vec3(0.0, 0.6, 0.2);\nvec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`);\n}\n\nexport { p as PBRBindParameters, d as PBRMode, m as PBRSchematicMRRValues, x as PhysicallyBasedRenderingParameters };","map":{"version":3,"names":["f","e","VertexTextureCoordinates","s","textureSize","o","Float3DrawUniform","t","Float3PassUniform","r","glsl","a","createTexture2DDrawSizeUniforms","i","createTexture2DPassSizeUniforms","c","TextureSizeUniformType","u","BindType","n","GLTextureMaterialBindParameters","l","m","d","Disabled","Normal","Schematic","Water","WaterOnIntegratedMesh","COUNT","p","x","fragment","hasMetallicRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","pbrMode","include","code","add","supportsTextureAtlas","hasWebGL2Context","None","Size","pbrTextureBindType","uniforms","Pass","textureMetallicRoughness","textureEmissive","textureOcclusion","emissiveFactor","mrrFactors","hasMetallicRoughnessTextureTransform","hasEmissiveTextureTransform","hasOcclusionTextureTransform","PBRBindParameters","PBRMode","PBRSchematicMRRValues","PhysicallyBasedRenderingParameters"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{textureSize as o}from\"../util/WebGL2Utils.js\";import{Float3DrawUniform as t}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as r}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";import{createTexture2DDrawSizeUniforms as i}from\"../../shaderModules/Texture2DDrawUniform.js\";import{createTexture2DPassSizeUniforms as c}from\"../../shaderModules/Texture2DPassUniform.js\";import{TextureSizeUniformType as u}from\"../../shaderModules/TextureSizeUniformType.js\";import{BindType as n}from\"../../shaderTechnique/BindType.js\";import{GLTextureMaterialBindParameters as l}from\"../../../lib/GLTextureMaterial.js\";const m=e(0,.6,.2);var d;!function(e){e[e.Disabled=0]=\"Disabled\",e[e.Normal=1]=\"Normal\",e[e.Schematic=2]=\"Schematic\",e[e.Water=3]=\"Water\",e[e.WaterOnIntegratedMesh=4]=\"WaterOnIntegratedMesh\",e[e.COUNT=5]=\"COUNT\"}(d||(d={}));class p extends l{}function x(e,l){const m=e.fragment,p=l.hasMetallicRoughnessTexture||l.hasEmissionTexture||l.hasOcclusionTexture;if(l.pbrMode===d.Normal&&p&&e.include(s,l),l.pbrMode!==d.Schematic)if(l.pbrMode!==d.Disabled){if(l.pbrMode===d.Normal){m.code.add(a`vec3 mrr;\nvec3 emission;\nfloat occlusion;`);const e=l.supportsTextureAtlas?l.hasWebGL2Context?u.None:u.Size:u.None,s=l.pbrTextureBindType;l.hasMetallicRoughnessTexture&&(m.uniforms.add(s===n.Pass?c(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness),e):i(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness),e)),m.code.add(a`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),l.hasEmissionTexture&&(m.uniforms.add(s===n.Pass?c(\"texEmission\",(e=>e.textureEmissive),e):i(\"texEmission\",(e=>e.textureEmissive),e)),m.code.add(a`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),l.hasOcclusionTexture?(m.uniforms.add(s===n.Pass?c(\"texOcclusion\",(e=>e.textureOcclusion),e):i(\"texOcclusion\",(e=>e.textureOcclusion),e)),m.code.add(a`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):m.code.add(a`float getBakedOcclusion() { return 1.0; }`),m.uniforms.add(s===n.Pass?[new r(\"emissionFactor\",(e=>e.emissiveFactor)),new r(\"mrrFactors\",(e=>e.mrrFactors))]:[new t(\"emissionFactor\",(e=>e.emissiveFactor)),new t(\"mrrFactors\",(e=>e.mrrFactors))]),m.code.add(a`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${p?a`vtc.uv = vuv0;`:\"\"}\n      ${l.hasMetallicRoughnessTextureTransform?a`vtc.uv = metallicRoughnessUV;`:\"\"}\n      ${l.hasMetallicRoughnessTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texMetallicRoughness\")};\n                applyMetallnessAndRoughness(vtc);`:a`applyMetallnessAndRoughness(vtc);`:\"\"}\n      ${l.hasEmissiveTextureTransform?a`vtc.uv = emissiveUV;`:\"\"}\n      ${l.hasEmissionTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texEmission\")};\n                applyEmission(vtc);`:a`applyEmission(vtc);`:\"\"}\n      ${l.hasOcclusionTextureTransform?a`vtc.uv = occlusionUV;`:\"\"}\n      ${l.hasOcclusionTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texOcclusion\")};\n                applyOcclusion(vtc);`:a`applyOcclusion(vtc);`:\"\"}\n    }\n  `)}}else m.code.add(a`float getBakedOcclusion() { return 1.0; }`);else m.code.add(a`vec3 mrr = vec3(0.0, 0.6, 0.2);\nvec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}export{p as PBRBindParameters,d as PBRMode,m as PBRSchematicMRRValues,x as PhysicallyBasedRenderingParameters};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}