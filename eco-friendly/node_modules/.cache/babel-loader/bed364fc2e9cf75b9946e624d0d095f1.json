{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isSome as e, isNone as o } from \"../../../core/maybe.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as r } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"./BaseRasterFunction.js\";\nimport { createRemapLUT as u, lookupPixels as i, remap as p } from \"./pixelUtils.js\";\nimport a from \"./RemapFunctionArguments.js\";\nlet l = class extends n {\n  constructor() {\n    super(...arguments), this.functionName = \"Remap\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"], this.lookup = null;\n  }\n\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n          {\n      pixelType: o\n    } = t;\n    this.outputPixelType = this._getOutputPixelType(o), t.pixelType = this.outputPixelType, t.colormap = null, t.histograms = null;\n    const {\n      statistics: s\n    } = t,\n          {\n      allowUnmatched: r,\n      outputValues: n\n    } = this.functionArguments;\n\n    if (e(s) && s.length && !r) {\n      let t = n[0],\n          e = t;\n\n      for (let o = 0; o < n.length; o++) t = t > n[o] ? n[o] : t, e = e > n[o] ? e : n[o];\n\n      for (let o = 0; o < s.length; o++) s[o] = { ...s[o],\n        min: t,\n        max: e\n      };\n    }\n\n    return this.rasterInfo = t, this.lookup = r ? null : u(o, this.functionArguments.inputRanges, n), {\n      success: !0\n    };\n  }\n\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (o(e)) return null;\n    const {\n      lookup: s,\n      outputPixelType: r\n    } = this;\n    if (s) return i(e, {\n      lut: [s.lut],\n      offset: s.offset,\n      outputPixelType: r\n    });\n    const {\n      inputRanges: n,\n      outputValues: u,\n      noDataRanges: a,\n      allowUnmatched: l\n    } = this.functionArguments;\n    return p(e, {\n      inputRanges: n,\n      outputValues: u,\n      noDataRanges: a,\n      allowUnmatched: l,\n      outputPixelType: r\n    });\n  }\n\n};\nt([s({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], l.prototype, \"functionName\", void 0), t([s({\n  type: a,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], l.prototype, \"functionArguments\", void 0), t([s()], l.prototype, \"rasterArgumentNames\", void 0), t([s({\n  json: {\n    write: !0\n  }\n})], l.prototype, \"lookup\", void 0), l = t([r(\"esri.layers.support.rasterFunctions.RemapFunction\")], l);\nconst c = l;\nexport { c as default };","map":{"version":3,"names":["_","t","isSome","e","isNone","o","property","s","subclass","r","n","createRemapLUT","u","lookupPixels","i","remap","p","a","l","constructor","arguments","functionName","functionArguments","rasterArgumentNames","lookup","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","colormap","histograms","statistics","allowUnmatched","outputValues","length","min","max","rasterInfo","inputRanges","success","_processPixels","pixelBlocks","lut","offset","noDataRanges","json","write","name","prototype","type","c","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/RemapFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isSome as e,isNone as o}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"./BaseRasterFunction.js\";import{createRemapLUT as u,lookupPixels as i,remap as p}from\"./pixelUtils.js\";import a from\"./RemapFunctionArguments.js\";let l=class extends n{constructor(){super(...arguments),this.functionName=\"Remap\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"],this.lookup=null}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:o}=t;this.outputPixelType=this._getOutputPixelType(o),t.pixelType=this.outputPixelType,t.colormap=null,t.histograms=null;const{statistics:s}=t,{allowUnmatched:r,outputValues:n}=this.functionArguments;if(e(s)&&s.length&&!r){let t=n[0],e=t;for(let o=0;o<n.length;o++)t=t>n[o]?n[o]:t,e=e>n[o]?e:n[o];for(let o=0;o<s.length;o++)s[o]={...s[o],min:t,max:e}}return this.rasterInfo=t,this.lookup=r?null:u(o,this.functionArguments.inputRanges,n),{success:!0}}_processPixels(t){const e=t.pixelBlocks?.[0];if(o(e))return null;const{lookup:s,outputPixelType:r}=this;if(s)return i(e,{lut:[s.lut],offset:s.offset,outputPixelType:r});const{inputRanges:n,outputValues:u,noDataRanges:a,allowUnmatched:l}=this.functionArguments;return p(e,{inputRanges:n,outputValues:u,noDataRanges:a,allowUnmatched:l,outputPixelType:r})}};t([s({json:{write:!0,name:\"rasterFunction\"}})],l.prototype,\"functionName\",void 0),t([s({type:a,json:{write:!0,name:\"rasterFunctionArguments\"}})],l.prototype,\"functionArguments\",void 0),t([s()],l.prototype,\"rasterArgumentNames\",void 0),t([s({json:{write:!0}})],l.prototype,\"lookup\",void 0),l=t([r(\"esri.layers.support.rasterFunctions.RemapFunction\")],l);const c=l;export{c as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,wBAAnC;AAA4D,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAOC,CAAP,MAAa,yBAAb;AAAuC,SAAOC,cAAc,IAAIC,CAAzB,EAA2BC,YAAY,IAAIC,CAA3C,EAA6CC,KAAK,IAAIC,CAAtD,QAA4D,iBAA5D;AAA8E,OAAOC,CAAP,MAAa,6BAAb;AAA2C,IAAIC,CAAC,GAAC,cAAcR,CAAd,CAAe;EAACS,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,YAAL,GAAkB,OAAtC,EAA8C,KAAKC,iBAAL,GAAuB,IAArE,EAA0E,KAAKC,mBAAL,GAAyB,CAAC,QAAD,CAAnG,EAA8G,KAAKC,MAAL,GAAY,IAA1H;EAA+H;;EAAAC,kBAAkB,GAAE;IAAC,MAAMxB,CAAC,GAAC,KAAKyB,iBAAL,CAAuB,CAAvB,EAA0BC,KAA1B,EAAR;IAAA,MAA0C;MAACC,SAAS,EAACvB;IAAX,IAAcJ,CAAxD;IAA0D,KAAK4B,eAAL,GAAqB,KAAKC,mBAAL,CAAyBzB,CAAzB,CAArB,EAAiDJ,CAAC,CAAC2B,SAAF,GAAY,KAAKC,eAAlE,EAAkF5B,CAAC,CAAC8B,QAAF,GAAW,IAA7F,EAAkG9B,CAAC,CAAC+B,UAAF,GAAa,IAA/G;IAAoH,MAAK;MAACC,UAAU,EAAC1B;IAAZ,IAAeN,CAApB;IAAA,MAAsB;MAACiC,cAAc,EAACzB,CAAhB;MAAkB0B,YAAY,EAACzB;IAA/B,IAAkC,KAAKY,iBAA7D;;IAA+E,IAAGnB,CAAC,CAACI,CAAD,CAAD,IAAMA,CAAC,CAAC6B,MAAR,IAAgB,CAAC3B,CAApB,EAAsB;MAAC,IAAIR,CAAC,GAACS,CAAC,CAAC,CAAD,CAAP;MAAA,IAAWP,CAAC,GAACF,CAAb;;MAAe,KAAI,IAAII,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACK,CAAC,CAAC0B,MAAhB,EAAuB/B,CAAC,EAAxB,EAA2BJ,CAAC,GAACA,CAAC,GAACS,CAAC,CAACL,CAAD,CAAH,GAAOK,CAAC,CAACL,CAAD,CAAR,GAAYJ,CAAd,EAAgBE,CAAC,GAACA,CAAC,GAACO,CAAC,CAACL,CAAD,CAAH,GAAOF,CAAP,GAASO,CAAC,CAACL,CAAD,CAA5B;;MAAgC,KAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAAC6B,MAAhB,EAAuB/B,CAAC,EAAxB,EAA2BE,CAAC,CAACF,CAAD,CAAD,GAAK,EAAC,GAAGE,CAAC,CAACF,CAAD,CAAL;QAASgC,GAAG,EAACpC,CAAb;QAAeqC,GAAG,EAACnC;MAAnB,CAAL;IAA2B;;IAAA,OAAO,KAAKoC,UAAL,GAAgBtC,CAAhB,EAAkB,KAAKuB,MAAL,GAAYf,CAAC,GAAC,IAAD,GAAMG,CAAC,CAACP,CAAD,EAAG,KAAKiB,iBAAL,CAAuBkB,WAA1B,EAAsC9B,CAAtC,CAAtC,EAA+E;MAAC+B,OAAO,EAAC,CAAC;IAAV,CAAtF;EAAmG;;EAAAC,cAAc,CAACzC,CAAD,EAAG;IAAC,MAAME,CAAC,GAACF,CAAC,CAAC0C,WAAF,GAAgB,CAAhB,CAAR;IAA2B,IAAGtC,CAAC,CAACF,CAAD,CAAJ,EAAQ,OAAO,IAAP;IAAY,MAAK;MAACqB,MAAM,EAACjB,CAAR;MAAUsB,eAAe,EAACpB;IAA1B,IAA6B,IAAlC;IAAuC,IAAGF,CAAH,EAAK,OAAOO,CAAC,CAACX,CAAD,EAAG;MAACyC,GAAG,EAAC,CAACrC,CAAC,CAACqC,GAAH,CAAL;MAAaC,MAAM,EAACtC,CAAC,CAACsC,MAAtB;MAA6BhB,eAAe,EAACpB;IAA7C,CAAH,CAAR;IAA4D,MAAK;MAAC+B,WAAW,EAAC9B,CAAb;MAAeyB,YAAY,EAACvB,CAA5B;MAA8BkC,YAAY,EAAC7B,CAA3C;MAA6CiB,cAAc,EAAChB;IAA5D,IAA+D,KAAKI,iBAAzE;IAA2F,OAAON,CAAC,CAACb,CAAD,EAAG;MAACqC,WAAW,EAAC9B,CAAb;MAAeyB,YAAY,EAACvB,CAA5B;MAA8BkC,YAAY,EAAC7B,CAA3C;MAA6CiB,cAAc,EAAChB,CAA5D;MAA8DW,eAAe,EAACpB;IAA9E,CAAH,CAAR;EAA6F;;AAA3/B,CAArB;AAAkhCR,CAAC,CAAC,CAACM,CAAC,CAAC;EAACwC,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC,CAAR;IAAUC,IAAI,EAAC;EAAf;AAAN,CAAD,CAAF,CAAD,EAA8C/B,CAAC,CAACgC,SAAhD,EAA0D,cAA1D,EAAyE,KAAK,CAA9E,CAAD,EAAkFjD,CAAC,CAAC,CAACM,CAAC,CAAC;EAAC4C,IAAI,EAAClC,CAAN;EAAQ8B,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC,CAAR;IAAUC,IAAI,EAAC;EAAf;AAAb,CAAD,CAAF,CAAD,EAA8D/B,CAAC,CAACgC,SAAhE,EAA0E,mBAA1E,EAA8F,KAAK,CAAnG,CAAnF,EAAyLjD,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAOW,CAAC,CAACgC,SAAT,EAAmB,qBAAnB,EAAyC,KAAK,CAA9C,CAA1L,EAA2OjD,CAAC,CAAC,CAACM,CAAC,CAAC;EAACwC,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC;EAAR;AAAN,CAAD,CAAF,CAAD,EAAwB9B,CAAC,CAACgC,SAA1B,EAAoC,QAApC,EAA6C,KAAK,CAAlD,CAA5O,EAAiShC,CAAC,GAACjB,CAAC,CAAC,CAACQ,CAAC,CAAC,mDAAD,CAAF,CAAD,EAA0DS,CAA1D,CAApS;AAAiW,MAAMkC,CAAC,GAAClC,CAAR;AAAU,SAAOkC,CAAC,IAAIC,OAAZ"},"metadata":{},"sourceType":"module"}