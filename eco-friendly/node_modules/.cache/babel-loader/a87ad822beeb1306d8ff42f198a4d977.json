{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { extentContainsPoint as r, extentContainsMultipoint as t } from \"../../../geometry/support/contains.js\";\nimport { getExtentIntersector as i } from \"../../../geometry/support/intersects.js\";\nimport { isPolygon as s, isExtent as o, getJsonType as n } from \"../../../geometry/support/jsonUtils.js\";\nimport { isValid as l } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { polygonContainsPoint as a, polygonContainsMultipoint as p } from \"../contains.js\";\nimport { convertFromPolygon as u } from \"../featureConversionUtils.js\";\nimport m from \"../OptimizedGeometry.js\";\nimport { checkProjectionSupport as y } from \"./projectionSupport.js\";\nimport { getGeometry as f } from \"./utils.js\";\nconst c = \"feature-store:unsupported-query\",\n      R = {\n  esriSpatialRelIntersects: \"intersects\",\n  esriSpatialRelContains: \"contains\",\n  esriSpatialRelCrosses: \"crosses\",\n  esriSpatialRelDisjoint: \"disjoint\",\n  esriSpatialRelEnvelopeIntersects: \"intersects\",\n  esriSpatialRelIndexIntersects: null,\n  esriSpatialRelOverlaps: \"overlaps\",\n  esriSpatialRelTouches: \"touches\",\n  esriSpatialRelWithin: \"within\",\n  esriSpatialRelRelation: null\n},\n      S = {\n  spatialRelationship: {\n    esriSpatialRelIntersects: !0,\n    esriSpatialRelContains: !0,\n    esriSpatialRelWithin: !0,\n    esriSpatialRelCrosses: !0,\n    esriSpatialRelDisjoint: !0,\n    esriSpatialRelTouches: !0,\n    esriSpatialRelOverlaps: !0,\n    esriSpatialRelEnvelopeIntersects: !0,\n    esriSpatialRelIndexIntersects: !1,\n    esriSpatialRelRelation: !1\n  },\n  queryGeometry: {\n    esriGeometryPoint: !0,\n    esriGeometryMultipoint: !0,\n    esriGeometryPolyline: !0,\n    esriGeometryPolygon: !0,\n    esriGeometryEnvelope: !0\n  },\n  layerGeometry: {\n    esriGeometryPoint: !0,\n    esriGeometryMultipoint: !0,\n    esriGeometryPolyline: !0,\n    esriGeometryPolygon: !0,\n    esriGeometryEnvelope: !1\n  }\n};\n\nfunction G(e) {\n  return null != e && !0 === S.spatialRelationship[e];\n}\n\nfunction g(e) {\n  return null != e && !0 === S.queryGeometry[n(e)];\n}\n\nfunction j(e) {\n  return null != e && !0 === S.layerGeometry[e];\n}\n\nfunction h() {\n  return import(\"../../../geometry/geometryEngineJSON.js\");\n}\n\nfunction v(e, n, l, y, c) {\n  if (s(n) && \"esriGeometryPoint\" === l && (\"esriSpatialRelIntersects\" === e || \"esriSpatialRelContains\" === e)) {\n    const e = u(new m(), n, !1, !1);\n    return Promise.resolve(r => a(e, !1, !1, r));\n  }\n\n  if (s(n) && \"esriGeometryMultipoint\" === l) {\n    const r = u(new m(), n, !1, !1);\n    if (\"esriSpatialRelContains\" === e) return Promise.resolve(e => p(r, !1, !1, e, y, c));\n  }\n\n  if (o(n) && \"esriGeometryPoint\" === l && (\"esriSpatialRelIntersects\" === e || \"esriSpatialRelContains\" === e)) return Promise.resolve(e => r(n, f(l, y, c, e)));\n  if (o(n) && \"esriGeometryMultipoint\" === l && \"esriSpatialRelContains\" === e) return Promise.resolve(e => t(n, f(l, y, c, e)));\n\n  if (o(n) && \"esriSpatialRelIntersects\" === e) {\n    const e = i(l);\n    return Promise.resolve(r => e(n, f(l, y, c, r)));\n  }\n\n  return h().then(r => {\n    const t = r[R[e]].bind(null, n.spatialReference, n);\n    return e => t(f(l, y, c, e));\n  });\n}\n\nasync function P(r, t, i) {\n  const {\n    spatialRel: s,\n    geometry: o\n  } = r;\n\n  if (o) {\n    if (!G(s)) throw new e(c, \"Unsupported query spatial relationship\", {\n      query: r\n    });\n\n    if (l(o.spatialReference) && l(i)) {\n      if (!g(o)) throw new e(c, \"Unsupported query geometry type\", {\n        query: r\n      });\n      if (!j(t)) throw new e(c, \"Unsupported layer geometry type\", {\n        query: r\n      });\n      if (r.outSR) return y(r.geometry && r.geometry.spatialReference, r.outSR);\n    }\n  }\n}\n\nfunction I(e) {\n  if (o(e)) return !0;\n\n  if (s(e)) {\n    for (const r of e.rings) {\n      if (5 !== r.length) return !1;\n      if (r[0][0] !== r[1][0] || r[0][0] !== r[4][0] || r[2][0] !== r[3][0] || r[0][1] !== r[3][1] || r[0][1] !== r[4][1] || r[1][1] !== r[2][1]) return !1;\n    }\n\n    return !0;\n  }\n\n  return !1;\n}\n\nexport { I as canQueryWithRBush, P as checkSpatialQuerySupport, v as getSpatialQueryOperator };","map":{"version":3,"names":["e","extentContainsPoint","r","extentContainsMultipoint","t","getExtentIntersector","i","isPolygon","s","isExtent","o","getJsonType","n","isValid","l","polygonContainsPoint","a","polygonContainsMultipoint","p","convertFromPolygon","u","m","checkProjectionSupport","y","getGeometry","f","c","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","S","spatialRelationship","queryGeometry","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","layerGeometry","G","g","j","h","v","Promise","resolve","then","bind","spatialReference","P","spatialRel","geometry","query","outSR","I","rings","length","canQueryWithRBush","checkSpatialQuerySupport","getSpatialQueryOperator"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as u}from\"../featureConversionUtils.js\";import m from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return null!=e&&!0===S.spatialRelationship[e]}function g(e){return null!=e&&!0===S.queryGeometry[n(e)]}function j(e){return null!=e&&!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=u(new m,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=u(new m,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}