{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as s } from \"../../../core/maybe.js\";\nimport { initializeProjection as t, projectMany as e } from \"../../../geometry/projection.js\";\nimport { jsonAdapter as n } from \"../../../geometry/geometryAdapters/json.js\";\nimport { isValid as r, equals as i, isWebMercator as o } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { lngLatToXY as a, xyToLngLat as m, canProject as u } from \"../../../geometry/support/webMercatorUtils.js\";\nconst l = [0, 0];\n\nfunction h(s, t) {\n  if (!t) return null;\n\n  if (\"x\" in t) {\n    const e = {\n      x: 0,\n      y: 0\n    };\n    return [e.x, e.y] = s(t.x, t.y, l), null != t.z && (e.z = t.z), null != t.m && (e.m = t.m), e;\n  }\n\n  if (\"xmin\" in t) {\n    const e = {\n      xmin: 0,\n      ymin: 0,\n      xmax: 0,\n      ymax: 0\n    };\n    return [e.xmin, e.ymin] = s(t.xmin, t.ymin, l), [e.xmax, e.ymax] = s(t.xmax, t.ymax, l), t.hasZ && (e.zmin = t.zmin, e.zmax = t.zmax, e.hasZ = !0), t.hasM && (e.mmin = t.mmin, e.mmax = t.mmax, e.hasM = !0), e;\n  }\n\n  return \"rings\" in t ? {\n    rings: c(t.rings, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : \"paths\" in t ? {\n    paths: c(t.paths, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : \"points\" in t ? {\n    points: p(t.points, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : null;\n}\n\nfunction c(s, t) {\n  const e = [];\n\n  for (const n of s) e.push(p(n, t));\n\n  return e;\n}\n\nfunction p(s, t) {\n  const e = [];\n\n  for (const n of s) {\n    const s = t(n[0], n[1], [0, 0]);\n    e.push(s), n.length > 2 && s.push(n[2]), n.length > 3 && s.push(n[3]);\n  }\n\n  return e;\n}\n\nasync function f(e, n) {\n  if (!e || !n) return;\n  const r = Array.isArray(e) ? e.map(t => s(t.geometry) ? t.geometry.spatialReference : null).filter(s) : [e];\n  await t(r.map(s => ({\n    source: s,\n    dest: n\n  })));\n}\n\nconst x = h.bind(null, a),\n      y = h.bind(null, m);\n\nfunction g(s, t, a, m) {\n  if (!s) return s;\n  if (a || (a = t, t = s.spatialReference), !r(t) || !r(a) || i(t, a)) return s;\n\n  if (u(t, a)) {\n    const t = o(a) ? x(s) : y(s);\n    return t.spatialReference = a, t;\n  }\n\n  return e(n, [s], t, a, null, m)[0];\n}\n\nclass _ {\n  constructor() {\n    this._jobs = [], this._timer = null, this._process = this._process.bind(this);\n  }\n\n  async push(s, t, e) {\n    if (!s || !s.length || !t || !e || i(t, e)) return s;\n    const n = {\n      geometries: s,\n      inSpatialReference: t,\n      outSpatialReference: e,\n      resolve: null\n    };\n    return this._jobs.push(n), new Promise(s => {\n      n.resolve = s, null === this._timer && (this._timer = setTimeout(this._process, 10));\n    });\n  }\n\n  _process() {\n    this._timer = null;\n\n    const s = this._jobs.shift();\n\n    if (!s) return;\n    const {\n      geometries: t,\n      inSpatialReference: r,\n      outSpatialReference: i,\n      resolve: a\n    } = s;\n    u(r, i) ? o(i) ? a(t.map(x)) : a(t.map(y)) : a(e(n, t, r, i, null, null)), this._jobs.length > 0 && (this._timer = setTimeout(this._process, 10));\n  }\n\n}\n\nconst j = new _();\n\nfunction M(s, t, e) {\n  return j.push(s, t, e);\n}\n\nexport { f as checkProjectionSupport, g as project, M as projectMany };","map":{"version":3,"names":["isSome","s","initializeProjection","t","projectMany","e","jsonAdapter","n","isValid","r","equals","i","isWebMercator","o","lngLatToXY","a","xyToLngLat","m","canProject","u","l","h","x","y","z","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","rings","c","paths","points","p","push","length","f","Array","isArray","map","geometry","spatialReference","filter","source","dest","bind","g","_","constructor","_jobs","_timer","_process","geometries","inSpatialReference","outSpatialReference","resolve","Promise","setTimeout","shift","j","M","checkProjectionSupport","project"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as s}from\"../../../core/maybe.js\";import{initializeProjection as t,projectMany as e}from\"../../../geometry/projection.js\";import{jsonAdapter as n}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as r,equals as i,isWebMercator as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as a,xyToLngLat as m,canProject as u}from\"../../../geometry/support/webMercatorUtils.js\";const l=[0,0];function h(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,l),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,l),[e.xmax,e.ymax]=s(t.xmax,t.ymax,l),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:c(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:c(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:p(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function c(s,t){const e=[];for(const n of s)e.push(p(n,t));return e}function p(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function f(e,n){if(!e||!n)return;const r=Array.isArray(e)?e.map((t=>s(t.geometry)?t.geometry.spatialReference:null)).filter(s):[e];await t(r.map((s=>({source:s,dest:n}))))}const x=h.bind(null,a),y=h.bind(null,m);function g(s,t,a,m){if(!s)return s;if(a||(a=t,t=s.spatialReference),!r(t)||!r(a)||i(t,a))return s;if(u(t,a)){const t=o(a)?x(s):y(s);return t.spatialReference=a,t}return e(n,[s],t,a,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,e){if(!s||!s.length||!t||!e||i(t,e))return s;const n={geometries:s,inSpatialReference:t,outSpatialReference:e,resolve:null};return this._jobs.push(n),new Promise((s=>{n.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:a}=s;u(r,i)?o(i)?a(t.map(x)):a(t.map(y)):a(e(n,t,r,i,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const j=new _;function M(s,t,e){return j.push(s,t,e)}export{f as checkProjectionSupport,g as project,M as projectMany};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}