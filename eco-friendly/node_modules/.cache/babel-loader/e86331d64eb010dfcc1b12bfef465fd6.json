{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../core/maybe.js\";\nimport { LayerBlendMode as o } from \"../views/3d/webgl-engine/core/shaderLibrary/output/BlendOptions.js\";\nimport { BackgroundGrid as r } from \"../views/3d/webgl-engine/core/shaderLibrary/terrain/BackgroundGrid.glsl.js\";\nimport { TileComposite as a } from \"../views/3d/webgl-engine/core/shaderLibrary/terrain/TileComposite.glsl.js\";\nimport { BlendModes as i } from \"../views/3d/webgl-engine/core/shaderLibrary/util/BlendModes.glsl.js\";\nimport { Float3PassUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";\nimport { FloatPassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { glsl as l } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as d } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as s } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nvar c, g;\n\nfunction m(m) {\n  const u = new d(),\n        p = m.output === c.GridOnly,\n        b = m.output === c.GridComposite,\n        f = b || p,\n        y = m.output === c.ColorOnly,\n        C = m.output === c.ColorComposite,\n        O = C || y,\n        v = b || C;\n  if (u.include(a), O && u.fragment.uniforms.add(new t(\"backgroundColor\", e => e.backgroundColor)), m.baseOpacityMode !== g.One && u.fragment.uniforms.add(new n(\"baseOpacity\", e => e.baseOpacity)), f && (u.extensions.add(\"GL_OES_standard_derivatives\"), u.fragment.include(r)), p || y) return u.fragment.code.add(l`\n    void main() {\n      gl_FragColor = ${y ? l`vec4(backgroundColor, 1.0)` : l`gridColor(uv)`};\n    }\n  `), u;\n  const w = m.blendMode !== o.Normal,\n        x = m.baseOpacityMode === g.OnBaseLayer,\n        L = m.baseOpacityMode === g.OnBackground || m.baseOpacityMode === g.OnBaseLayer,\n        T = m.premultipliedSource;\n  return u.fragment.uniforms.add(new s(\"tex\", e => e.texture)), u.fragment.uniforms.add(new n(\"opacity\", e => e.opacity)), (w || x || T) && (u.fragment.uniforms.add(new s(\"fboColor\", e => e.fboTexture)), u.fragment.uniforms.add(new n(\"tileSize\", o => e(o.fboTexture) ? o.fboTexture.descriptor.width : 1))), u.fragment.include(i, m), u.fragment.code.add(l`\n    void main() {\n      ${v || x || T ? l`\n      vec4 bgColor = ${C ? l`vec4(backgroundColor, 1.0)` : b ? l`gridColor(uv)` : l`texture2D(fboColor, gl_FragCoord.xy / tileSize)`};\n      ${L ? l`bgColor *= baseOpacity;` : \"\"}` : \"\"}\n      vec4 colorLayer = texture2D(tex, uv);\n      ${w ? l`\n          vec4 fboTex = ${v ? l`bgColor;` : l`texture2D(fboColor, gl_FragCoord.xy / tileSize) ${x ? \" * baseOpacity\" : \"\"};`}\n          vec3 Cb = fboTex.a == 0.0 ? fboTex.rgb : vec3(fboTex.rgb * fboTex.a);\n          gl_FragColor = applyBlendMode(colorLayer.rgb, colorLayer.a * opacity, Cb, fboTex.a);` : l`\n          vec4 pmColorLayer = vec4(colorLayer.xyz, 1.0);\n          float composeAlpha = colorLayer.a * opacity;\n          gl_FragColor = ${T ? l`bgColor * (1.0 - composeAlpha) + colorLayer * opacity;` : v || x ? l`mix(bgColor, pmColorLayer, composeAlpha);` : l`pmColorLayer * composeAlpha;`}`}\n    }\n  `), u;\n}\n\n!function (e) {\n  e[e.Composite = 0] = \"Composite\", e[e.ColorOnly = 1] = \"ColorOnly\", e[e.GridOnly = 2] = \"GridOnly\", e[e.ColorComposite = 3] = \"ColorComposite\", e[e.GridComposite = 4] = \"GridComposite\", e[e.COUNT = 5] = \"COUNT\";\n}(c || (c = {})), function (e) {\n  e[e.One = 0] = \"One\", e[e.OnBackground = 1] = \"OnBackground\", e[e.OnBaseLayer = 2] = \"OnBaseLayer\", e[e.COUNT = 3] = \"COUNT\";\n}(g || (g = {}));\nconst u = Object.freeze(Object.defineProperty({\n  __proto__: null,\n\n  get BlendLayersOutput() {\n    return c;\n  },\n\n  get BaseOpacityMode() {\n    return g;\n  },\n\n  build: m\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { c as B, g as a, u as b, m as c };","map":{"version":3,"names":["isSome","e","LayerBlendMode","o","BackgroundGrid","r","TileComposite","a","BlendModes","i","Float3PassUniform","t","FloatPassUniform","n","glsl","l","ShaderBuilder","d","Texture2DPassUniform","s","c","g","m","u","p","output","GridOnly","b","GridComposite","f","y","ColorOnly","C","ColorComposite","O","v","include","fragment","uniforms","add","backgroundColor","baseOpacityMode","One","baseOpacity","extensions","code","w","blendMode","Normal","x","OnBaseLayer","L","OnBackground","T","premultipliedSource","texture","opacity","fboTexture","descriptor","width","Composite","COUNT","Object","freeze","defineProperty","__proto__","BlendLayersOutput","BaseOpacityMode","build","Symbol","toStringTag","value","B"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/chunks/BlendLayers.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../core/maybe.js\";import{LayerBlendMode as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/BlendOptions.js\";import{BackgroundGrid as r}from\"../views/3d/webgl-engine/core/shaderLibrary/terrain/BackgroundGrid.glsl.js\";import{TileComposite as a}from\"../views/3d/webgl-engine/core/shaderLibrary/terrain/TileComposite.glsl.js\";import{BlendModes as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/BlendModes.glsl.js\";import{Float3PassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";var c,g;function m(m){const u=new d,p=m.output===c.GridOnly,b=m.output===c.GridComposite,f=b||p,y=m.output===c.ColorOnly,C=m.output===c.ColorComposite,O=C||y,v=b||C;if(u.include(a),O&&u.fragment.uniforms.add(new t(\"backgroundColor\",(e=>e.backgroundColor))),m.baseOpacityMode!==g.One&&u.fragment.uniforms.add(new n(\"baseOpacity\",(e=>e.baseOpacity))),f&&(u.extensions.add(\"GL_OES_standard_derivatives\"),u.fragment.include(r)),p||y)return u.fragment.code.add(l`\n    void main() {\n      gl_FragColor = ${y?l`vec4(backgroundColor, 1.0)`:l`gridColor(uv)`};\n    }\n  `),u;const w=m.blendMode!==o.Normal,x=m.baseOpacityMode===g.OnBaseLayer,L=m.baseOpacityMode===g.OnBackground||m.baseOpacityMode===g.OnBaseLayer,T=m.premultipliedSource;return u.fragment.uniforms.add(new s(\"tex\",(e=>e.texture))),u.fragment.uniforms.add(new n(\"opacity\",(e=>e.opacity))),(w||x||T)&&(u.fragment.uniforms.add(new s(\"fboColor\",(e=>e.fboTexture))),u.fragment.uniforms.add(new n(\"tileSize\",(o=>e(o.fboTexture)?o.fboTexture.descriptor.width:1)))),u.fragment.include(i,m),u.fragment.code.add(l`\n    void main() {\n      ${v||x||T?l`\n      vec4 bgColor = ${C?l`vec4(backgroundColor, 1.0)`:b?l`gridColor(uv)`:l`texture2D(fboColor, gl_FragCoord.xy / tileSize)`};\n      ${L?l`bgColor *= baseOpacity;`:\"\"}`:\"\"}\n      vec4 colorLayer = texture2D(tex, uv);\n      ${w?l`\n          vec4 fboTex = ${v?l`bgColor;`:l`texture2D(fboColor, gl_FragCoord.xy / tileSize) ${x?\" * baseOpacity\":\"\"};`}\n          vec3 Cb = fboTex.a == 0.0 ? fboTex.rgb : vec3(fboTex.rgb * fboTex.a);\n          gl_FragColor = applyBlendMode(colorLayer.rgb, colorLayer.a * opacity, Cb, fboTex.a);`:l`\n          vec4 pmColorLayer = vec4(colorLayer.xyz, 1.0);\n          float composeAlpha = colorLayer.a * opacity;\n          gl_FragColor = ${T?l`bgColor * (1.0 - composeAlpha) + colorLayer * opacity;`:v||x?l`mix(bgColor, pmColorLayer, composeAlpha);`:l`pmColorLayer * composeAlpha;`}`}\n    }\n  `),u}!function(e){e[e.Composite=0]=\"Composite\",e[e.ColorOnly=1]=\"ColorOnly\",e[e.GridOnly=2]=\"GridOnly\",e[e.ColorComposite=3]=\"ColorComposite\",e[e.GridComposite=4]=\"GridComposite\",e[e.COUNT=5]=\"COUNT\"}(c||(c={})),function(e){e[e.One=0]=\"One\",e[e.OnBackground=1]=\"OnBackground\",e[e.OnBaseLayer=2]=\"OnBaseLayer\",e[e.COUNT=3]=\"COUNT\"}(g||(g={}));const u=Object.freeze(Object.defineProperty({__proto__:null,get BlendLayersOutput(){return c},get BaseOpacityMode(){return g},build:m},Symbol.toStringTag,{value:\"Module\"}));export{c as B,g as a,u as b,m as c};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}