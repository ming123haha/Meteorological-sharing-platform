{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/has.js\";\nimport { createResolver as t } from \"../../../../../../core/promiseUtils.js\";\nimport { brushes as i } from \"../../../../engine/brushes.js\";\nimport { FeatureContainer as s } from \"../../../../engine/FeatureContainer.js\";\nimport { WGLDrawPhase as r } from \"../../../../engine/webgl/enums.js\";\nconst a = e(\"featurelayer-order-by-server-enabled\");\n\nclass n extends s {\n  constructor(e, t, i, s) {\n    super(e), this._pointToCallbacks = [], this._layer = i, this._layerView = t, this._onUpdate = s;\n  }\n\n  renderChildren(e) {\n    if (this.attributeView.update(), this.hasAnimation) {\n      e.painter.effects.integrate.draw(e, e.attributeView);\n    }\n\n    super.renderChildren(e);\n  }\n\n  hasEmptyAttributeView() {\n    return this.attributeView.isEmpty();\n  }\n\n  isUpdating() {\n    return this.attributeView.isUpdating();\n  }\n\n  hitTest(e) {\n    const i = t();\n    return this._pointToCallbacks.push({\n      point: e,\n      resolver: i\n    }), this.requestRender(), i.promise;\n  }\n\n  onTileData(e, t) {\n    const i = a && \"orderBy\" in this._layer && this._layer.orderBy,\n          s = i?.length && !i[0].valueExpression && i[0].field,\n          r = i && this._layerView.orderByFields === s;\n    e.patch(t, r), this.contains(e) || this.addChild(e), this.requestRender();\n  }\n\n  onTileError(e) {\n    this.contains(e) || this.addChild(e);\n  }\n\n  updateTransitionProperties(e, t) {\n    super.updateTransitionProperties(e, t), this._layerView.featureEffectView.transitionStep(e, t), this._layerView.featureEffectView.transitioning && this.requestRender();\n  }\n\n  doRender(e) {\n    const {\n      minScale: t,\n      maxScale: i\n    } = this._layer,\n          s = e.state.scale;\n    s <= (t || 1 / 0) && s >= i && super.doRender(e);\n  }\n\n  onAttributeStoreUpdate() {\n    this.hasLabels && this._layerView.view.labelManager.requestUpdate(), this._onUpdate();\n  }\n\n  get hasAnimation() {\n    return this.hasLabels;\n  }\n\n  setStencilReference(e) {\n    const {\n      rendererSchema: t\n    } = e.rendererInfo;\n\n    if (\"dot-density\" === t.type && t.dotSize > 1) {\n      const e = 1;\n\n      for (const t of this.children) t.stencilRef = t.key.level + e;\n    } else super.setStencilReference(e);\n  }\n\n  get hasLabels() {\n    if (\"sublayers\" in this._layer) return this._layer.sublayers.some(e => e.labelingInfo && e.labelingInfo.length && e.labelsVisible);\n    const e = this._layer.featureReduction,\n          t = e && \"labelingInfo\" in e && e.labelsVisible && e.labelingInfo && e.labelingInfo.length;\n    return this._layer.labelingInfo && this._layer.labelingInfo.length && this._layer.labelsVisible || !!t;\n  }\n\n  prepareRenderPasses(e) {\n    const t = e.registerRenderPass({\n      name: \"label\",\n      brushes: [i.label],\n      target: () => this.hasLabels ? this.children : null,\n      drawPhase: r.LABEL | r.LABEL_ALPHA\n    }),\n          s = e.registerRenderPass({\n      name: \"geometry\",\n      brushes: [i.fill, i.dotDensity, i.line, i.marker, i.heatmap, i.pieChart, i.text],\n      target: () => this.children,\n      enableDefaultDraw: () => !this._layerView.featureEffectView.hasEffects,\n      effects: [{\n        apply: e.effects.outsideEffect,\n        enable: () => this._layerView.featureEffectView.hasEffects,\n        args: () => this._layerView.featureEffectView.excludedEffects\n      }, {\n        apply: e.effects.insideEffect,\n        enable: () => this._layerView.featureEffectView.hasEffects,\n        args: () => this._layerView.featureEffectView.includedEffects\n      }, {\n        apply: e.effects.hittest,\n        enable: () => !!this._pointToCallbacks.length,\n        args: () => this._pointToCallbacks\n      }]\n    }),\n          a = e.registerRenderPass({\n      name: \"highlight\",\n      brushes: [i.fill, i.dotDensity, i.line, i.marker, i.pieChart, i.text],\n      target: () => this.children,\n      drawPhase: r.HIGHLIGHT,\n      enableDefaultDraw: () => !1,\n      effects: [{\n        apply: e.effects.highlight,\n        enable: () => !!this._layerView.hasHighlight()\n      }]\n    });\n    return [...super.prepareRenderPasses(e), s, a, t];\n  }\n\n}\n\nexport { n as WGLFeatureView };","map":{"version":3,"names":["e","createResolver","t","brushes","i","FeatureContainer","s","WGLDrawPhase","r","a","n","constructor","_pointToCallbacks","_layer","_layerView","_onUpdate","renderChildren","attributeView","update","hasAnimation","painter","effects","integrate","draw","hasEmptyAttributeView","isEmpty","isUpdating","hitTest","push","point","resolver","requestRender","promise","onTileData","orderBy","length","valueExpression","field","orderByFields","patch","contains","addChild","onTileError","updateTransitionProperties","featureEffectView","transitionStep","transitioning","doRender","minScale","maxScale","state","scale","onAttributeStoreUpdate","hasLabels","view","labelManager","requestUpdate","setStencilReference","rendererSchema","rendererInfo","type","dotSize","children","stencilRef","key","level","sublayers","some","labelingInfo","labelsVisible","featureReduction","prepareRenderPasses","registerRenderPass","name","label","target","drawPhase","LABEL","LABEL_ALPHA","fill","dotDensity","line","marker","heatmap","pieChart","text","enableDefaultDraw","hasEffects","apply","outsideEffect","enable","args","excludedEffects","insideEffect","includedEffects","hittest","HIGHLIGHT","highlight","hasHighlight","WGLFeatureView"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{createResolver as t}from\"../../../../../../core/promiseUtils.js\";import{brushes as i}from\"../../../../engine/brushes.js\";import{FeatureContainer as s}from\"../../../../engine/FeatureContainer.js\";import{WGLDrawPhase as r}from\"../../../../engine/webgl/enums.js\";const a=e(\"featurelayer-order-by-server-enabled\");class n extends s{constructor(e,t,i,s){super(e),this._pointToCallbacks=[],this._layer=i,this._layerView=t,this._onUpdate=s}renderChildren(e){if(this.attributeView.update(),this.hasAnimation){e.painter.effects.integrate.draw(e,e.attributeView)}super.renderChildren(e)}hasEmptyAttributeView(){return this.attributeView.isEmpty()}isUpdating(){return this.attributeView.isUpdating()}hitTest(e){const i=t();return this._pointToCallbacks.push({point:e,resolver:i}),this.requestRender(),i.promise}onTileData(e,t){const i=a&&\"orderBy\"in this._layer&&this._layer.orderBy,s=i?.length&&!i[0].valueExpression&&i[0].field,r=i&&this._layerView.orderByFields===s;e.patch(t,r),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){this.contains(e)||this.addChild(e)}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._layerView.featureEffectView.transitionStep(e,t),this._layerView.featureEffectView.transitioning&&this.requestRender()}doRender(e){const{minScale:t,maxScale:i}=this._layer,s=e.state.scale;s<=(t||1/0)&&s>=i&&super.doRender(e)}onAttributeStoreUpdate(){this.hasLabels&&this._layerView.view.labelManager.requestUpdate(),this._onUpdate()}get hasAnimation(){return this.hasLabels}setStencilReference(e){const{rendererSchema:t}=e.rendererInfo;if(\"dot-density\"===t.type&&t.dotSize>1){const e=1;for(const t of this.children)t.stencilRef=t.key.level+e}else super.setStencilReference(e)}get hasLabels(){if(\"sublayers\"in this._layer)return this._layer.sublayers.some((e=>e.labelingInfo&&e.labelingInfo.length&&e.labelsVisible));const e=this._layer.featureReduction,t=e&&\"labelingInfo\"in e&&e.labelsVisible&&e.labelingInfo&&e.labelingInfo.length;return this._layer.labelingInfo&&this._layer.labelingInfo.length&&this._layer.labelsVisible||!!t}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"label\",brushes:[i.label],target:()=>this.hasLabels?this.children:null,drawPhase:r.LABEL|r.LABEL_ALPHA}),s=e.registerRenderPass({name:\"geometry\",brushes:[i.fill,i.dotDensity,i.line,i.marker,i.heatmap,i.pieChart,i.text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.featureEffectView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.excludedEffects},{apply:e.effects.insideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.includedEffects},{apply:e.effects.hittest,enable:()=>!!this._pointToCallbacks.length,args:()=>this._pointToCallbacks}]}),a=e.registerRenderPass({name:\"highlight\",brushes:[i.fill,i.dotDensity,i.line,i.marker,i.pieChart,i.text],target:()=>this.children,drawPhase:r.HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:e.effects.highlight,enable:()=>!!this._layerView.hasHighlight()}]});return[...super.prepareRenderPasses(e),s,a,t]}}export{n as WGLFeatureView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}