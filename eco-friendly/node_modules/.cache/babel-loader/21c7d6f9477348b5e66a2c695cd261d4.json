{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../core/HandleOwner.js\";\nimport \"../../../../core/has.js\";\nimport { watch as r } from \"../../../../core/reactiveUtils.js\";\nimport { property as s } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { equals as i } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport l from \"../../../../layers/support/TileInfo.js\";\nimport { loadProcessorModule as n } from \"./processors.js\";\nimport a from \"./controllers/FeatureController2D.js\";\nimport c from \"./support/TileStore.js\";\nimport { UpdateToken as p } from \"./support/UpdateToken.js\";\nimport h from \"../../tiling/TileInfoView.js\";\nlet d = class extends t {\n  constructor() {\n    super(...arguments), this.controller = null, this.processor = null, this.remoteClient = null, this.tileStore = null, this.service = null, this.viewState = null, this._paused = !1, this._pendingTileUpdates = [];\n  }\n\n  initialize() {\n    this.handles.add(r(() => this.updating, e => {\n      this.remoteClient.invoke(\"setUpdating\", e).catch(e => {});\n    }));\n  }\n\n  destroy() {\n    this.stop(), this.controller?.destroy(), this.processor?.destroy(), this.controller = this.processor = this.tileStore = this.remoteClient = null;\n  }\n\n  get updating() {\n    return !this.controller || this.controller.updating;\n  }\n\n  stop() {\n    this._paused = !0, Array.isArray(this.service?.source) && (this.service.source.forEach(e => e.close()), this.service.source.length = 0), this.tileStore?.updateTiles({\n      added: [],\n      removed: this.tileStore.tiles.map(e => e.id)\n    }), this.tileStore?.destroy(), this.tileStore = null, this._pendingTileUpdates.length = 0;\n  }\n\n  async startup({\n    service: e,\n    config: t,\n    tileInfo: r,\n    tiles: s\n  }) {\n    if (this._paused = !0, Array.isArray(this.service?.source) && (this.service.source.forEach(e => e.close()), this.service.source.length = 0), this.service = e, !this.tileStore || !i(this.tileStore.tileScheme.spatialReference, r.spatialReference)) {\n      const e = new h(l.fromJSON(r));\n      s.added.length = s.removed.length = 0, this.tileStore?.updateTiles({\n        added: [],\n        removed: this.tileStore.tiles.map(e => e.id)\n      }), this.tileStore?.destroy(), this.tileStore = new c(e), this._pendingTileUpdates.length = 0;\n    }\n\n    for (await this._createProcessorAndController(t), await this.update({\n      config: t\n    }), this.controller.resume(), this.tileStore.clear(), this.tileStore.updateTiles(s), this._paused = !1; this._pendingTileUpdates.length;) this.tileStore.updateTiles(this._pendingTileUpdates.pop());\n  }\n\n  async updateTiles(e) {\n    this._paused ? this._pendingTileUpdates.push(e) : this.tileStore.updateTiles(e);\n  }\n\n  async update({\n    config: e\n  }) {\n    const t = p.empty();\n    return await Promise.all([this.processor.update(t, e), this.controller.update(t, e)]), t.toJSON();\n  }\n\n  async applyUpdate(e) {\n    return this.controller.applyUpdate(p.create(e));\n  }\n\n  async _createProcessorAndController(e) {\n    await Promise.all([this._handleControllerConfig(e), this._handleProcessorConfig(e)]), this.controller.processor = this.processor;\n  }\n\n  async _handleControllerConfig(e) {\n    return this._createController(this.service, e);\n  }\n\n  async _handleProcessorConfig(e) {\n    return this._createProcessor(this.service, e);\n  }\n\n  async _createController(e, t) {\n    this.controller && this.controller.destroy();\n    const {\n      tileStore: r,\n      remoteClient: s\n    } = this,\n          o = new a({\n      service: e,\n      tileStore: r,\n      remoteClient: s\n    });\n    return this.controller = o, o;\n  }\n\n  async _createProcessor(e, t) {\n    const r = t.schema.processors[0].type,\n          s = (await n(r)).default,\n          {\n      remoteClient: o,\n      tileStore: i\n    } = this,\n          l = new s({\n      service: e,\n      config: t,\n      tileStore: i,\n      remoteClient: o\n    });\n    return this.processor && this.processor.destroy(), this.processor = l, l;\n  }\n\n};\ne([s()], d.prototype, \"controller\", void 0), e([s()], d.prototype, \"processor\", void 0), e([s()], d.prototype, \"updating\", null), e([s()], d.prototype, \"viewState\", void 0), d = e([o(\"esri.views.2d.layers.features.Pipeline\")], d);\nconst u = d;\nexport { u as default };","map":{"version":3,"names":["_","e","HandleOwner","t","watch","r","property","s","subclass","o","equals","i","l","loadProcessorModule","n","a","c","UpdateToken","p","h","d","constructor","arguments","controller","processor","remoteClient","tileStore","service","viewState","_paused","_pendingTileUpdates","initialize","handles","add","updating","invoke","catch","destroy","stop","Array","isArray","source","forEach","close","length","updateTiles","added","removed","tiles","map","id","startup","config","tileInfo","tileScheme","spatialReference","fromJSON","_createProcessorAndController","update","resume","clear","pop","push","empty","Promise","all","toJSON","applyUpdate","create","_handleControllerConfig","_handleProcessorConfig","_createController","_createProcessor","schema","processors","type","default","prototype","u"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/Pipeline.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../core/HandleOwner.js\";import\"../../../../core/has.js\";import{watch as r}from\"../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{equals as i}from\"../../../../geometry/support/spatialReferenceUtils.js\";import l from\"../../../../layers/support/TileInfo.js\";import{loadProcessorModule as n}from\"./processors.js\";import a from\"./controllers/FeatureController2D.js\";import c from\"./support/TileStore.js\";import{UpdateToken as p}from\"./support/UpdateToken.js\";import h from\"../../tiling/TileInfoView.js\";let d=class extends t{constructor(){super(...arguments),this.controller=null,this.processor=null,this.remoteClient=null,this.tileStore=null,this.service=null,this.viewState=null,this._paused=!1,this._pendingTileUpdates=[]}initialize(){this.handles.add(r((()=>this.updating),(e=>{this.remoteClient.invoke(\"setUpdating\",e).catch((e=>{}))})))}destroy(){this.stop(),this.controller?.destroy(),this.processor?.destroy(),this.controller=this.processor=this.tileStore=this.remoteClient=null}get updating(){return!this.controller||this.controller.updating}stop(){this._paused=!0,Array.isArray(this.service?.source)&&(this.service.source.forEach((e=>e.close())),this.service.source.length=0),this.tileStore?.updateTiles({added:[],removed:this.tileStore.tiles.map((e=>e.id))}),this.tileStore?.destroy(),this.tileStore=null,this._pendingTileUpdates.length=0}async startup({service:e,config:t,tileInfo:r,tiles:s}){if(this._paused=!0,Array.isArray(this.service?.source)&&(this.service.source.forEach((e=>e.close())),this.service.source.length=0),this.service=e,!this.tileStore||!i(this.tileStore.tileScheme.spatialReference,r.spatialReference)){const e=new h(l.fromJSON(r));s.added.length=s.removed.length=0,this.tileStore?.updateTiles({added:[],removed:this.tileStore.tiles.map((e=>e.id))}),this.tileStore?.destroy(),this.tileStore=new c(e),this._pendingTileUpdates.length=0}for(await this._createProcessorAndController(t),await this.update({config:t}),this.controller.resume(),this.tileStore.clear(),this.tileStore.updateTiles(s),this._paused=!1;this._pendingTileUpdates.length;)this.tileStore.updateTiles(this._pendingTileUpdates.pop())}async updateTiles(e){this._paused?this._pendingTileUpdates.push(e):this.tileStore.updateTiles(e)}async update({config:e}){const t=p.empty();return await Promise.all([this.processor.update(t,e),this.controller.update(t,e)]),t.toJSON()}async applyUpdate(e){return this.controller.applyUpdate(p.create(e))}async _createProcessorAndController(e){await Promise.all([this._handleControllerConfig(e),this._handleProcessorConfig(e)]),this.controller.processor=this.processor}async _handleControllerConfig(e){return this._createController(this.service,e)}async _handleProcessorConfig(e){return this._createProcessor(this.service,e)}async _createController(e,t){this.controller&&this.controller.destroy();const{tileStore:r,remoteClient:s}=this,o=new a({service:e,tileStore:r,remoteClient:s});return this.controller=o,o}async _createProcessor(e,t){const r=t.schema.processors[0].type,s=(await n(r)).default,{remoteClient:o,tileStore:i}=this,l=new s({service:e,config:t,tileStore:i,remoteClient:o});return this.processor&&this.processor.destroy(),this.processor=l,l}};e([s()],d.prototype,\"controller\",void 0),e([s()],d.prototype,\"processor\",void 0),e([s()],d.prototype,\"updating\",null),e([s()],d.prototype,\"viewState\",void 0),d=e([o(\"esri.views.2d.layers.features.Pipeline\")],d);const u=d;export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}