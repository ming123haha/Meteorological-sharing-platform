{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { isNone as r, isSome as i } from \"../../../core/maybe.js\";\nimport { whenOnce as s } from \"../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { updatingProgress as o, updatingProgressValue as n } from \"../support/updatingProperties.js\";\nimport { checkIfTileInfoSupportedForView as p } from \"../terrain/terrainUtils.js\";\n\nconst c = c => {\n  let m = class extends c {\n    get imageFormatIsOpaque() {\n      return !1;\n    }\n\n    get fullExtent() {\n      return this.layer.fullExtent;\n    }\n\n    get isOpaque() {\n      return this.fullOpacity >= 1 && this.imageFormatIsOpaque;\n    }\n\n    get dataLevelRange() {\n      const e = this.tileInfo.lods,\n            t = e[0].scale,\n            r = e[e.length - 1].scale;\n      return this.levelRangeFromScaleRange(t, r);\n    }\n\n    get displayLevelRange() {\n      const e = this.tileInfo.lods,\n            t = this.layer.minScale || e[0].scale,\n            r = this.layer.maxScale || e[e.length - 1].scale,\n            i = this.levelRangeFromScaleRange(t, r);\n      return this.layer.maxScale && i.maxLevel++, i;\n    }\n\n    getTileUrl(e, t, r) {\n      return this.layer.getTileUrl(e, t, r);\n    }\n\n    _addTilingSchemeMatchPromise() {\n      if (r(this.fullExtent)) return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\", \"This layer doesn't define a fullExtent.\")));\n\n      const e = this._getTileInfoSupportError(this.tileInfo, this.fullExtent);\n\n      if (i(e)) return this.addResolvingPromise(Promise.reject(e));\n      const a = s(() => this.view?.basemapTerrain?.tilingSchemeLocked).then(() => {\n        const e = this.view.basemapTerrain.tilingScheme,\n              t = this._getTileInfoCompatibilityError(this.tileInfo, e);\n\n        if (t) throw t;\n      });\n      this.addResolvingPromise(a);\n    }\n\n    _getTileInfoSupportError(e, r) {\n      const i = p(e, r, this.view.spatialReference, this.view.state.viewingMode);\n\n      if (i) {\n        const e = {\n          layer: this.layer,\n          error: i\n        };\n        let r;\n\n        switch (i.name) {\n          case \"tilingscheme:spatial-reference-mismatch\":\n          case \"tilingscheme:global-unsupported-spatial-reference\":\n          case \"tilingscheme:local-unsupported-spatial-reference\":\n            r = new t(\"layerview:spatial-reference-incompatible\", \"The spatial reference of this layer does not meet the requirements of the view\", e);\n            break;\n\n          default:\n            r = new t(\"layerview:tiling-scheme-unsupported\", \"The tiling scheme of this layer is not supported by SceneView\", e);\n        }\n\n        return r;\n      }\n\n      return null;\n    }\n\n    _getTileInfoCompatibilityError(e, r) {\n      return r.compatibleWith(e) ? null : new t(\"layerview:tiling-scheme-incompatible\", \"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\");\n    }\n\n    levelRangeFromScaleRange(e, t) {\n      const r = {\n        minLevel: 0,\n        maxLevel: 1 / 0\n      },\n            i = this.view && this.view.basemapTerrain && this.view.basemapTerrain.tilingScheme;\n      if (!i) return r;\n\n      const s = i.levels[0],\n            a = e => {\n        const t = Math.log(s.scale / e) / Math.LN2;\n        return .5 - Math.abs(.5 - t % 1) < 1e-9 ? Math.round(t) : Math.ceil(t);\n      };\n\n      return null != e && e > 0 && (r.minLevel = Math.max(0, a(e))), null != t && t > 0 && (r.maxLevel = Math.max(0, a(t))), r;\n    }\n\n    isUpdating() {\n      return !!(this.view && this.view.basemapTerrain && this.view.basemapTerrain.updating);\n    }\n\n  };\n  return e([a({\n    readOnly: !0\n  })], m.prototype, \"imageFormatIsOpaque\", null), e([a({\n    readOnly: !0\n  })], m.prototype, \"updating\", void 0), e([a(o)], m.prototype, \"updatingProgress\", void 0), e([a(n)], m.prototype, \"updatingProgressValue\", void 0), e([a()], m.prototype, \"fullExtent\", null), e([a({\n    readOnly: !0\n  })], m.prototype, \"isOpaque\", null), e([a({\n    readOnly: !0\n  })], m.prototype, \"dataLevelRange\", null), e([a({\n    readOnly: !0\n  })], m.prototype, \"displayLevelRange\", null), e([a()], m.prototype, \"layer\", void 0), e([a()], m.prototype, \"tileInfo\", void 0), m = e([l(\"esri.views.3d.layers.TiledLayerView3D\")], m), m;\n};\n\nexport { c as TiledLayerView3D };","map":{"version":3,"names":["_","e","t","isNone","r","isSome","i","whenOnce","s","property","a","subclass","l","updatingProgress","o","updatingProgressValue","n","checkIfTileInfoSupportedForView","p","c","m","imageFormatIsOpaque","fullExtent","layer","isOpaque","fullOpacity","dataLevelRange","tileInfo","lods","scale","length","levelRangeFromScaleRange","displayLevelRange","minScale","maxScale","maxLevel","getTileUrl","_addTilingSchemeMatchPromise","addResolvingPromise","Promise","reject","_getTileInfoSupportError","view","basemapTerrain","tilingSchemeLocked","then","tilingScheme","_getTileInfoCompatibilityError","spatialReference","state","viewingMode","error","name","compatibleWith","minLevel","levels","Math","log","LN2","abs","round","ceil","max","isUpdating","updating","readOnly","prototype","TiledLayerView3D"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/TiledLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{isNone as r,isSome as i}from\"../../../core/maybe.js\";import{whenOnce as s}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{updatingProgress as o,updatingProgressValue as n}from\"../support/updatingProperties.js\";import{checkIfTileInfoSupportedForView as p}from\"../terrain/terrainUtils.js\";const c=c=>{let m=class extends c{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)}get displayLevelRange(){const e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,r=this.layer.maxScale||e[e.length-1].scale,i=this.levelRangeFromScaleRange(t,r);return this.layer.maxScale&&i.maxLevel++,i}getTileUrl(e,t,r){return this.layer.getTileUrl(e,t,r)}_addTilingSchemeMatchPromise(){if(r(this.fullExtent))return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\",\"This layer doesn't define a fullExtent.\")));const e=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if(i(e))return this.addResolvingPromise(Promise.reject(e));const a=s((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this.view.basemapTerrain.tilingScheme,t=this._getTileInfoCompatibilityError(this.tileInfo,e);if(t)throw t}));this.addResolvingPromise(a)}_getTileInfoSupportError(e,r){const i=p(e,r,this.view.spatialReference,this.view.state.viewingMode);if(i){const e={layer:this.layer,error:i};let r;switch(i.name){case\"tilingscheme:spatial-reference-mismatch\":case\"tilingscheme:global-unsupported-spatial-reference\":case\"tilingscheme:local-unsupported-spatial-reference\":r=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",e);break;default:r=new t(\"layerview:tiling-scheme-unsupported\",\"The tiling scheme of this layer is not supported by SceneView\",e)}return r}return null}_getTileInfoCompatibilityError(e,r){return r.compatibleWith(e)?null:new t(\"layerview:tiling-scheme-incompatible\",\"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\")}levelRangeFromScaleRange(e,t){const r={minLevel:0,maxLevel:1/0},i=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!i)return r;const s=i.levels[0],a=e=>{const t=Math.log(s.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(r.minLevel=Math.max(0,a(e))),null!=t&&t>0&&(r.maxLevel=Math.max(0,a(t))),r}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return e([a({readOnly:!0})],m.prototype,\"imageFormatIsOpaque\",null),e([a({readOnly:!0})],m.prototype,\"updating\",void 0),e([a(o)],m.prototype,\"updatingProgress\",void 0),e([a(n)],m.prototype,\"updatingProgressValue\",void 0),e([a()],m.prototype,\"fullExtent\",null),e([a({readOnly:!0})],m.prototype,\"isOpaque\",null),e([a({readOnly:!0})],m.prototype,\"dataLevelRange\",null),e([a({readOnly:!0})],m.prototype,\"displayLevelRange\",null),e([a()],m.prototype,\"layer\",void 0),e([a()],m.prototype,\"tileInfo\",void 0),m=e([l(\"esri.views.3d.layers.TiledLayerView3D\")],m),m};export{c as TiledLayerView3D};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,wBAAnC;AAA4D,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,gCAAzB;AAA0D,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,sBAAN;AAA6B,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,qBAAqB,IAAIC,CAAtD,QAA4D,kCAA5D;AAA+F,SAAOC,+BAA+B,IAAIC,CAA1C,QAAgD,4BAAhD;;AAA6E,MAAMC,CAAC,GAACA,CAAC,IAAE;EAAC,IAAIC,CAAC,GAAC,cAAcD,CAAd,CAAe;IAAwB,IAAnBE,mBAAmB,GAAE;MAAC,OAAM,CAAC,CAAP;IAAS;;IAAc,IAAVC,UAAU,GAAE;MAAC,OAAO,KAAKC,KAAL,CAAWD,UAAlB;IAA6B;;IAAY,IAARE,QAAQ,GAAE;MAAC,OAAO,KAAKC,WAAL,IAAkB,CAAlB,IAAqB,KAAKJ,mBAAjC;IAAqD;;IAAkB,IAAdK,cAAc,GAAE;MAAC,MAAMzB,CAAC,GAAC,KAAK0B,QAAL,CAAcC,IAAtB;MAAA,MAA2B1B,CAAC,GAACD,CAAC,CAAC,CAAD,CAAD,CAAK4B,KAAlC;MAAA,MAAwCzB,CAAC,GAACH,CAAC,CAACA,CAAC,CAAC6B,MAAF,GAAS,CAAV,CAAD,CAAcD,KAAxD;MAA8D,OAAO,KAAKE,wBAAL,CAA8B7B,CAA9B,EAAgCE,CAAhC,CAAP;IAA0C;;IAAqB,IAAjB4B,iBAAiB,GAAE;MAAC,MAAM/B,CAAC,GAAC,KAAK0B,QAAL,CAAcC,IAAtB;MAAA,MAA2B1B,CAAC,GAAC,KAAKqB,KAAL,CAAWU,QAAX,IAAqBhC,CAAC,CAAC,CAAD,CAAD,CAAK4B,KAAvD;MAAA,MAA6DzB,CAAC,GAAC,KAAKmB,KAAL,CAAWW,QAAX,IAAqBjC,CAAC,CAACA,CAAC,CAAC6B,MAAF,GAAS,CAAV,CAAD,CAAcD,KAAlG;MAAA,MAAwGvB,CAAC,GAAC,KAAKyB,wBAAL,CAA8B7B,CAA9B,EAAgCE,CAAhC,CAA1G;MAA6I,OAAO,KAAKmB,KAAL,CAAWW,QAAX,IAAqB5B,CAAC,CAAC6B,QAAF,EAArB,EAAkC7B,CAAzC;IAA2C;;IAAA8B,UAAU,CAACnC,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;MAAC,OAAO,KAAKmB,KAAL,CAAWa,UAAX,CAAsBnC,CAAtB,EAAwBC,CAAxB,EAA0BE,CAA1B,CAAP;IAAoC;;IAAAiC,4BAA4B,GAAE;MAAC,IAAGjC,CAAC,CAAC,KAAKkB,UAAN,CAAJ,EAAsB,OAAO,KAAKgB,mBAAL,CAAyBC,OAAO,CAACC,MAAR,CAAe,IAAItC,CAAJ,CAAM,iCAAN,EAAwC,yCAAxC,CAAf,CAAzB,CAAP;;MAAoI,MAAMD,CAAC,GAAC,KAAKwC,wBAAL,CAA8B,KAAKd,QAAnC,EAA4C,KAAKL,UAAjD,CAAR;;MAAqE,IAAGhB,CAAC,CAACL,CAAD,CAAJ,EAAQ,OAAO,KAAKqC,mBAAL,CAAyBC,OAAO,CAACC,MAAR,CAAevC,CAAf,CAAzB,CAAP;MAAmD,MAAMS,CAAC,GAACF,CAAC,CAAE,MAAI,KAAKkC,IAAL,EAAWC,cAAX,EAA2BC,kBAAjC,CAAD,CAAuDC,IAAvD,CAA6D,MAAI;QAAC,MAAM5C,CAAC,GAAC,KAAKyC,IAAL,CAAUC,cAAV,CAAyBG,YAAjC;QAAA,MAA8C5C,CAAC,GAAC,KAAK6C,8BAAL,CAAoC,KAAKpB,QAAzC,EAAkD1B,CAAlD,CAAhD;;QAAqG,IAAGC,CAAH,EAAK,MAAMA,CAAN;MAAQ,CAApL,CAAR;MAA+L,KAAKoC,mBAAL,CAAyB5B,CAAzB;IAA4B;;IAAA+B,wBAAwB,CAACxC,CAAD,EAAGG,CAAH,EAAK;MAAC,MAAME,CAAC,GAACY,CAAC,CAACjB,CAAD,EAAGG,CAAH,EAAK,KAAKsC,IAAL,CAAUM,gBAAf,EAAgC,KAAKN,IAAL,CAAUO,KAAV,CAAgBC,WAAhD,CAAT;;MAAsE,IAAG5C,CAAH,EAAK;QAAC,MAAML,CAAC,GAAC;UAACsB,KAAK,EAAC,KAAKA,KAAZ;UAAkB4B,KAAK,EAAC7C;QAAxB,CAAR;QAAmC,IAAIF,CAAJ;;QAAM,QAAOE,CAAC,CAAC8C,IAAT;UAAe,KAAI,yCAAJ;UAA8C,KAAI,mDAAJ;UAAwD,KAAI,kDAAJ;YAAuDhD,CAAC,GAAC,IAAIF,CAAJ,CAAM,0CAAN,EAAiD,gFAAjD,EAAkID,CAAlI,CAAF;YAAuI;;UAAM;YAAQG,CAAC,GAAC,IAAIF,CAAJ,CAAM,qCAAN,EAA4C,+DAA5C,EAA4GD,CAA5G,CAAF;QAAjU;;QAAkb,OAAOG,CAAP;MAAS;;MAAA,OAAO,IAAP;IAAY;;IAAA2C,8BAA8B,CAAC9C,CAAD,EAAGG,CAAH,EAAK;MAAC,OAAOA,CAAC,CAACiD,cAAF,CAAiBpD,CAAjB,IAAoB,IAApB,GAAyB,IAAIC,CAAJ,CAAM,sCAAN,EAA6C,uFAA7C,CAAhC;IAAsK;;IAAA6B,wBAAwB,CAAC9B,CAAD,EAAGC,CAAH,EAAK;MAAC,MAAME,CAAC,GAAC;QAACkD,QAAQ,EAAC,CAAV;QAAYnB,QAAQ,EAAC,IAAE;MAAvB,CAAR;MAAA,MAAkC7B,CAAC,GAAC,KAAKoC,IAAL,IAAW,KAAKA,IAAL,CAAUC,cAArB,IAAqC,KAAKD,IAAL,CAAUC,cAAV,CAAyBG,YAAlG;MAA+G,IAAG,CAACxC,CAAJ,EAAM,OAAOF,CAAP;;MAAS,MAAMI,CAAC,GAACF,CAAC,CAACiD,MAAF,CAAS,CAAT,CAAR;MAAA,MAAoB7C,CAAC,GAACT,CAAC,IAAE;QAAC,MAAMC,CAAC,GAACsD,IAAI,CAACC,GAAL,CAASjD,CAAC,CAACqB,KAAF,GAAQ5B,CAAjB,IAAoBuD,IAAI,CAACE,GAAjC;QAAqC,OAAM,KAAGF,IAAI,CAACG,GAAL,CAAS,KAAGzD,CAAC,GAAC,CAAd,CAAH,GAAoB,IAApB,GAAyBsD,IAAI,CAACI,KAAL,CAAW1D,CAAX,CAAzB,GAAuCsD,IAAI,CAACK,IAAL,CAAU3D,CAAV,CAA7C;MAA0D,CAAzH;;MAA0H,OAAO,QAAMD,CAAN,IAASA,CAAC,GAAC,CAAX,KAAeG,CAAC,CAACkD,QAAF,GAAWE,IAAI,CAACM,GAAL,CAAS,CAAT,EAAWpD,CAAC,CAACT,CAAD,CAAZ,CAA1B,GAA4C,QAAMC,CAAN,IAASA,CAAC,GAAC,CAAX,KAAeE,CAAC,CAAC+B,QAAF,GAAWqB,IAAI,CAACM,GAAL,CAAS,CAAT,EAAWpD,CAAC,CAACR,CAAD,CAAZ,CAA1B,CAA5C,EAAwFE,CAA/F;IAAiG;;IAAA2D,UAAU,GAAE;MAAC,OAAM,CAAC,EAAE,KAAKrB,IAAL,IAAW,KAAKA,IAAL,CAAUC,cAArB,IAAqC,KAAKD,IAAL,CAAUC,cAAV,CAAyBqB,QAAhE,CAAP;IAAiF;;EAAtyE,CAArB;EAA6zE,OAAO/D,CAAC,CAAC,CAACS,CAAC,CAAC;IAACuD,QAAQ,EAAC,CAAC;EAAX,CAAD,CAAF,CAAD,EAAoB7C,CAAC,CAAC8C,SAAtB,EAAgC,qBAAhC,EAAsD,IAAtD,CAAD,EAA6DjE,CAAC,CAAC,CAACS,CAAC,CAAC;IAACuD,QAAQ,EAAC,CAAC;EAAX,CAAD,CAAF,CAAD,EAAoB7C,CAAC,CAAC8C,SAAtB,EAAgC,UAAhC,EAA2C,KAAK,CAAhD,CAA9D,EAAiHjE,CAAC,CAAC,CAACS,CAAC,CAACI,CAAD,CAAF,CAAD,EAAQM,CAAC,CAAC8C,SAAV,EAAoB,kBAApB,EAAuC,KAAK,CAA5C,CAAlH,EAAiKjE,CAAC,CAAC,CAACS,CAAC,CAACM,CAAD,CAAF,CAAD,EAAQI,CAAC,CAAC8C,SAAV,EAAoB,uBAApB,EAA4C,KAAK,CAAjD,CAAlK,EAAsNjE,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAOU,CAAC,CAAC8C,SAAT,EAAmB,YAAnB,EAAgC,IAAhC,CAAvN,EAA6PjE,CAAC,CAAC,CAACS,CAAC,CAAC;IAACuD,QAAQ,EAAC,CAAC;EAAX,CAAD,CAAF,CAAD,EAAoB7C,CAAC,CAAC8C,SAAtB,EAAgC,UAAhC,EAA2C,IAA3C,CAA9P,EAA+SjE,CAAC,CAAC,CAACS,CAAC,CAAC;IAACuD,QAAQ,EAAC,CAAC;EAAX,CAAD,CAAF,CAAD,EAAoB7C,CAAC,CAAC8C,SAAtB,EAAgC,gBAAhC,EAAiD,IAAjD,CAAhT,EAAuWjE,CAAC,CAAC,CAACS,CAAC,CAAC;IAACuD,QAAQ,EAAC,CAAC;EAAX,CAAD,CAAF,CAAD,EAAoB7C,CAAC,CAAC8C,SAAtB,EAAgC,mBAAhC,EAAoD,IAApD,CAAxW,EAAkajE,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAOU,CAAC,CAAC8C,SAAT,EAAmB,OAAnB,EAA2B,KAAK,CAAhC,CAAna,EAAscjE,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAOU,CAAC,CAAC8C,SAAT,EAAmB,UAAnB,EAA8B,KAAK,CAAnC,CAAvc,EAA6e9C,CAAC,GAACnB,CAAC,CAAC,CAACW,CAAC,CAAC,uCAAD,CAAF,CAAD,EAA8CQ,CAA9C,CAAhf,EAAiiBA,CAAxiB;AAA0iB,CAAn3F;;AAAo3F,SAAOD,CAAC,IAAIgD,gBAAZ"},"metadata":{},"sourceType":"module"}