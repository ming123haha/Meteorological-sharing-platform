{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { Cyclical as r, cyclicalPI as s } from \"../../../core/Cyclical.js\";\nimport i from \"../../../core/Handles.js\";\nimport a from \"../../../core/has.js\";\nimport { clamp as n, deg2rad as o } from \"../../../core/mathUtils.js\";\nimport { isSome as l, isNone as h, unwrap as c } from \"../../../core/maybe.js\";\nimport { watch as d, sync as u } from \"../../../core/reactiveUtils.js\";\nimport { addFrameTask as p } from \"../../../core/scheduling.js\";\nimport { Milliseconds as _ } from \"../../../core/time.js\";\nimport { property as m } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as y } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { g } from \"../../../chunks/vec2.js\";\nimport { a as f, b as v, x as R, c as T, i as O } from \"../../../chunks/vec3.js\";\nimport { c as w } from \"../../../chunks/vec3f64.js\";\nimport { t as D, b as x, a as S } from \"../../../chunks/vec4.js\";\nimport { c as E, f as P } from \"../../../chunks/vec4f64.js\";\nimport { projectVectorToVector as U } from \"../../../geometry/projection.js\";\nimport { getReferenceEllipsoid as M } from \"../../../geometry/projectionEllipsoid.js\";\nimport { create as C, width as j, copy as I, center as N, intersection as b, height as A, contains as G, intersects as H, offset as L } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { create as k, wrap as V } from \"../../../geometry/support/ray.js\";\nimport { j as B, k as F, t as q } from \"../../../chunks/sphere.js\";\nimport { angleAroundAxis as W } from \"../../../geometry/support/vector.js\";\nimport { y2lat as z } from \"../../../geometry/support/webMercatorUtils.js\";\nimport { viewAngle as Y } from \"../state/utils/viewUtils.js\";\nimport X from \"../support/debugFlags.js\";\nimport { PointGraphics as K } from \"../support/debugUtils.js\";\nimport { OverlayIndex as Z } from \"./interfaces.js\";\nimport { computeOverlayResolution as J } from \"./Overlay.js\";\nimport { OverlayRenderer as Q } from \"./OverlayRenderer.js\";\nimport { RenderRequestType as $, ValidationState as ee } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport { newIntersector as te } from \"../webgl-engine/lib/Intersector.js\";\nimport { fromValues as re } from \"../webgl-engine/lib/LocalOriginFactory.js\";\nimport { SortedRenderGeometryRenderer as se } from \"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";\nimport { removeLoadedShaderModules as ie } from \"../webgl-engine/parts/requireUtils.js\";\nimport { TaskPriority as ae } from \"../../support/Scheduler.js\";\nconst ne = [[-.1, -2, 3.9, 2], [-.1, -3.9, 3.9, .1], [-2, -3.9, 2, .1], [-3.9, -3.9, .1, .1], [-3.9, -2, .1, 2], [-3.9, -.1, .1, 3.9], [-2, -.1, 2, 3.9], [-.1, -.1, 3.9, 3.9]];\nlet oe,\n    le = class extends t {\n  constructor(e) {\n    super(e), this._handles = new i(), this._spatialReference = null, this._renderSR = null, this._overlaySREqualsRenderSR = !0, this._drapeSources = new Set(), this._drapeTargets = new Set(), this._placementDirty = !1, this._contentUpdated = !1, this._drawTexturesDirty = !1, this._drawTexturesAnimateDirty = !1, this._hasUnusedRenderTargets = !1, this._longitudeCyclical = null, this._latestOriginId = 0, this._maxResolution = a(\"esri-mobile\") ? 2048 : 4096, this._animationTimeLast = 0;\n  }\n\n  get running() {\n    return this._placementDirty && (this._drapeSources.size > 0 || this.view.graphics.length > 0 || X.OVERLAY_DRAW_DEBUG_TEXTURE) && !!this._spatialReference && !this.suspended && this.surface.ready;\n  }\n\n  get _isSpherical() {\n    return this.view.state.isGlobal;\n  }\n\n  get _worldToPCSRatio() {\n    return l(this._spatialReference) && this._spatialReference.isGeographic && !this.view.state.isLocal ? M(this._spatialReference).metersPerDegree : 1;\n  }\n\n  get view() {\n    return this.surface.view;\n  }\n\n  get updating() {\n    return this.running || this.renderer.updating || this._contentUpdated;\n  }\n\n  get hasHighlights() {\n    return this.renderer.hasHighlights;\n  }\n\n  get rendersOccluded() {\n    return this.renderer.rendersOccluded;\n  }\n\n  initialize() {\n    const e = this.view;\n    this.renderer = new Q({\n      view: e,\n      worldToPCSRatio: this._worldToPCSRatio,\n      spatialReference: this._spatialReference\n    }), this._groundIntersector = te(this.view.state.viewingMode), this._groundIntersector.options.backfacesTerrain = !0, this._groundIntersector.options.invisibleTerrain = !0, this._groundIntersector.options.hud = !1, this._handles.add([this.renderer.events.on(\"has-highlights\", () => {\n      this.setDrawTexturesDirty(), this.notifyChange(\"hasHighlights\");\n    }), this.renderer.events.on(\"has-water\", t => e._stage?.renderView.setRenderParameters({\n      hasOverlayWater: t\n    })), this.renderer.events.on(\"renders-occluded\", () => {\n      this.setDrawTexturesDirty(), this.notifyChange(\"rendersOccluded\");\n    }), this.renderer.events.on(\"content-changed\", () => this.setDrawTexturesDirty()), this.renderer.events.on(\"textures-disposed\", () => this.updateOverlayResult()), d(() => [e.pointsOfInterest?.renderPointOfView, e.pointsOfInterest?.centerOnSurfaceFrequent?.location], () => this.setPlacementDirty()), d(() => e.state?.pixelRatio, () => this.setPlacementDirty(), u), this.surface.on(\"elevation-change\", () => this.setPlacementDirty()), e.on(\"resize\", () => this.setPlacementDirty()), p({\n      preRender: e => {\n        this._contentUpdated = !1, this.renderer.processSyncDrapeSources(), this.renderer.hasOverlays && (this._dispatchAnimationUpdate(e), this._drawOverlayTextures(this.renderer.overlays, $.UPDATE)), this._hasUnusedRenderTargets && this._collectUnusedRenderTargetMemory();\n      }\n    }), e.resourceController.scheduler.registerTask(ae.OVERLAY, this), e._stage.renderView.events.on(\"force-camera-for-screenshot\", e => {\n      this._updateOverlays(e, $.BACKGROUND), this.renderer.hasOverlays && this._drawOverlayTextures(this.renderer.overlays, $.BACKGROUND, e);\n    })]);\n  }\n\n  destroy() {\n    this.renderer.dispose(), this._handles && (this._handles.destroy(), this._handles = null), l(oe) && (oe.hide(), oe = null);\n  }\n\n  get hasOverlays() {\n    return this.renderer.hasOverlays;\n  }\n\n  setSpatialReference(e) {\n    this._spatialReference = e, this.renderer.spatialReference = e, this._longitudeCyclical = null;\n    const t = this.view.renderSpatialReference;\n    l(e) && l(t) ? (this._renderSR = t, this._overlaySREqualsRenderSR = e.equals(this._renderSR), this._isSpherical && (this._longitudeCyclical = e.isWebMercator ? new r(-20037508.342787, 20037508.342787) : new r(-180, 180), this.renderer.longitudeCyclical = this._longitudeCyclical), this.renderer && (this.renderer.worldToPCSRatio = this._worldToPCSRatio)) : this.renderer.disposeOverlays();\n  }\n\n  get gpuMemoryUsage() {\n    return this.renderer.gpuMemoryUsage;\n  }\n\n  registerDrapeSource(e, t, r) {\n    this._drapeSources.add(e), this.renderer.ensureOverlays(this._drapeTargets, this._drapeSources);\n    const s = this.renderer.createDrapeSourceRenderer(e, t, r);\n    return this._updateDrapeSourceExtent(e), this._setContentDirty(), this.notifyChange(\"running\"), s;\n  }\n\n  registerGeometryDrapeSource(e) {\n    return this.registerDrapeSource(e, se);\n  }\n\n  _updateDrapeSourceExtent(e) {\n    2 === this.renderer.overlays.length && l(e.setDrapingExtent) && l(this._spatialReference) && e.setDrapingExtent(this.renderer.overlays, this._spatialReference);\n  }\n\n  unregisterDrapeSource(e) {\n    this._drapeSources.has(e) && (this._drapeSources.delete(e), this.renderer.removeDrapeSourceRenderer(e), this.renderer.ensureDrapeSources(this._drapeSources), this._setContentDirty(), this.notifyChange(\"running\"));\n  }\n\n  registerDrapeTarget(e) {\n    this._drapeTargets.add(e), this.renderer.ensureOverlays(this._drapeTargets, this._drapeSources);\n  }\n\n  updateOverlayResult() {\n    this.view._stage?.renderView.setRenderParameters({\n      overlays: this.renderer.overlays\n    });\n  }\n\n  unregisterDrapeTarget(e) {\n    this._drapeTargets.delete(e), this.renderer.ensureDrapeTargets(this._drapeTargets);\n  }\n\n  _setContentDirty() {\n    this.setPlacementDirty(), this.setDrawTexturesDirty();\n  }\n\n  setPlacementDirty() {\n    this._placementDirty = !0;\n  }\n\n  runTask() {\n    this._updateOverlays(this.view.state.camera, $.UPDATE);\n  }\n\n  _updateOverlays(e, t) {\n    if (!this._spatialReference) return;\n    const r = J(e.fullWidth, e.fullHeight, this._maxResolution);\n\n    this._computeOverlayExtents(e, r, ue);\n\n    const s = j(ue.inner) / j(ue.outer);\n    this.renderer.ensureOverlays(this._drapeTargets, this._drapeSources);\n\n    const i = this._updateOverlay(Z.INNER, ue.inner, r, 1 * ue.pixelRatioAdjustment, ue.mapUnitsPerPixel),\n          a = this._updateOverlay(Z.OUTER, ue.outer, r, s * ue.pixelRatioAdjustment, ue.mapUnitsPerPixel);\n\n    i !== ye.EXTENT && a !== ye.EXTENT || (this._drapeSources.forEach(e => this._updateDrapeSourceExtent(e)), this.surface.updateTileOverlayParams(t)), i === ye.NONE && a === ye.NONE || this.setDrawTexturesDirty(), this._placementDirty = !1;\n  }\n\n  _updateOverlay(e, t, r, s, i) {\n    if (0 === this.renderer.overlays.length) return ye.NONE;\n    const a = this.renderer.overlays[e],\n          n = a.mapUnitsPerPixel;\n    if (a.mapUnitsPerPixel = i, a.pixelRatio = s, he(t, a.extent) && r === a.resolution) return n === i ? ye.NONE : ye.RERENDER_ONLY;\n    I(a.extent, t), a.resolution = r;\n    const o = N(a.extent);\n    return a.renderLocalOrigin = re(o[0], o[1], 0, \"OV_\" + this._latestOriginId++), ye.EXTENT;\n  }\n\n  setTileParameters(e) {\n    const t = e.renderData.overlay;\n\n    if (this.renderer.overlays.length > 0) {\n      const r = this.renderer.overlays[Z.INNER],\n            s = this.renderer.overlays[Z.OUTER],\n            i = b(e.extent, this.surface.extent, pe);\n      this._rectInsideRect(r.extent, i) || this._rectanglesOverlap(i, r.extent) || this._rectanglesOverlap(i, s.extent) ? (this._setTileOverlayData(i, Z.INNER, t), this._setTileOverlayData(i, Z.OUTER, t)) : (this._clearTileOverlayData(Z.INNER, t), this._clearTileOverlayData(Z.OUTER, t));\n    } else this._clearTileOverlayData(Z.INNER, t), this._clearTileOverlayData(Z.OUTER, t);\n  }\n\n  overlayPixelSizeInMapUnits(e) {\n    if (0 === this.renderer.overlays.length) return 0;\n    const t = this.renderer.overlays[Z.INNER],\n          r = this.renderer.overlays[Z.OUTER],\n          s = this._pointIsInExtent(e, t.extent) ? t : r;\n    return (s.extent[2] - s.extent[0]) / s.resolution;\n  }\n\n  _setTileOverlayData(e, t, r) {\n    if (0 === this.renderer.overlays.length) return;\n    const s = this.renderer.overlays[t].extent,\n          i = j(s),\n          a = A(s);\n    let n = e[0];\n\n    if (this._longitudeCyclical) {\n      n = this._longitudeCyclical.minimalMonotonic(s[0], n);\n\n      const t = this._longitudeCyclical.minimalMonotonic(s[0], e[2]);\n\n      n > t && (n = t - (e[2] - e[0]));\n    }\n\n    r.setScale(t, j(e) / i, A(e) / a), r.setOffset(t, (n - s[0]) / i, (e[1] - s[1]) / a);\n  }\n\n  _clearTileOverlayData(e, t) {\n    t.setScale(e, -1, -1), t.setOffset(e, -1, -1);\n  }\n\n  async reloadShaders() {\n    ie(), await this.renderer.reloadShaders(), this.setDrawTexturesDirty(), this.runTask();\n  }\n\n  _dispatchAnimationUpdate(e) {\n    const t = _(e.time - this._animationTimeLast);\n\n    (t >= this.surface.view._stage.renderView.animationTimestep || l(this.forcedAnimationTime) || this._drawTexturesDirty || this._drawTexturesAnimateDirty) && (this.renderer.updateAnimation({\n      dt: t,\n      forcedTime: this.forcedAnimationTime,\n      camera: this.view.state.camera\n    }) && (this._drawTexturesAnimateDirty = !0), this._animationTimeLast = e.time);\n  }\n\n  setDrawTexturesDirty() {\n    this.renderer.hasOverlays ? (this._contentUpdated = !0, this._drawTexturesDirty = !0) : this.setPlacementDirty();\n  }\n\n  _intersectGroundFromView(e, t, r, s) {\n    const i = this.view.sceneIntersectionHelper.getCenterRayWithSubpixelOffset(e, me, t, r);\n    if (h(i)) return !1;\n    const a = i.origin,\n          n = f(de, i.origin, i.direction);\n    return this._groundIntersector.reset(a, n, e), this._groundIntersector.intersect([], null), this.view.basemapTerrain.intersect(this._groundIntersector, null, a, n), this._groundIntersector.results.min.getIntersectionPoint(s);\n  }\n\n  _findHorizonBasedPointOfInterest(e, t) {\n    let r = .5;\n    const i = .55,\n          a = this.view.renderCoordsHelper.getAltitude(e.eye),\n          o = this.view.pointsOfInterest.centerOnSurfaceFrequent,\n          l = 1e-5,\n          h = n(o.estimatedSurfaceAltitude, e.aboveGround ? -1 / 0 : a + l, e.aboveGround ? a - l : 1 / 0),\n          c = e.aboveGround;\n\n    if (\"global\" === this.view.viewingMode) {\n      const t = de;\n      B(F(q, M(this.view.spatialReference).radius + h), V(e.eye, e.viewForward), t), v(t, t, e.eye);\n      const a = s.normalize(W(e.viewForward, t, e.viewRight)) / e.fovY + .5,\n            n = a <= 0 || a >= 1 ? .5 : i;\n      r = c ? n * a : a + n * (1 - a);\n    } else {\n      const t = .5 * Math.PI - Math.acos(-e.viewForward[2]),\n            s = Math.tan(t),\n            a = P(0, s, 1, 0),\n            o = D(a, a, e.projectionMatrix)[1],\n            l = n(.5 + .5 * o, 0, 1);\n      r = 1 === l || 0 === l ? .5 : c ? l * i : 1 - (1 - l) * i;\n    }\n\n    return !!this._intersectGroundFromView(e, .5, r, t) && R(t, e.eye) < o.distance * o.distance;\n  }\n\n  _computeOverlayExtents(e, t, r) {\n    const s = this.view.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,\n          i = w();\n    this._findHorizonBasedPointOfInterest(e, i) || T(i, s);\n    const a = Math.max(.1, O(e.eye, i)),\n          n = Y(this.view.renderCoordsHelper, s, e.eye),\n          d = Math.PI / 2 - Math.abs(n - Math.PI / 2);\n    X.OVERLAY_SHOW_CENTER ? (h(oe) && (oe = new K(this.view.graphics, \"red\")), oe.show(i, this._renderSR)) : l(oe) && oe.hide(), this._overlaySREqualsRenderSR || U(i, this._renderSR, i, this._spatialReference);\n\n    const u = this.surface.extent,\n          p = !this._isSpherical && l(this._spatialReference) && this._spatialReference.isGeographic,\n          _ = p && l(this._spatialReference) ? 1 / M(this._spatialReference).metersPerDegree : 1,\n          m = e.perRenderPixelRatio * a * _;\n\n    r.mapUnitsPerPixel = m / this._worldToPCSRatio;\n    let y = t * m / 2,\n        f = !1,\n        v = p ? 90 : 1 / 0;\n    this._isSpherical && l(u) && l(this._spatialReference) && (this._spatialReference.isWebMercator ? (y /= Math.cos(z(i[1])), v = u[3]) : (f = !0, y /= M(this._spatialReference).metersPerDegree, v = 90), y >= v && (y = v, i[1] = 0, this._spatialReference.isWebMercator && (i[0] = 0)));\n    let R = 1;\n    f && (R = 1 / Math.max(.2, Math.cos(Math.abs(o(i[1])))), y * R > 180 && (R = 180 / y), r.mapUnitsPerPixel *= R);\n    const D = Math.log(2) / 12;\n    y = Math.exp(Math.round(Math.log(y) / D) * D);\n    const E = y * R,\n          P = 32,\n          C = .5 * t / (P * E),\n          N = .5 * t / (P * y);\n    i[0] = Math.round(i[0] * C) / C, i[1] = Math.round(i[1] * N) / N;\n    const A = r.inner;\n    A[0] = i[0] - E, A[1] = i[1] - y, A[2] = i[0] + E, A[3] = i[1] + y, this._isSpherical && this._shiftExtentToFitBounds(A, 1 / 0, v);\n    const H = r.outer;\n    if (6 * E > j(u)) I(H, c(u));else if (d <= .25 * Math.PI) H[0] = A[0] - E, H[1] = A[1] - y, H[2] = A[2] + E, H[3] = A[3] + y;else {\n      U(e.eye, this._renderSR, de, this._spatialReference), g(ce, i, de);\n      let t = -Math.atan2(ce[1], ce[0]) + .125 * Math.PI;\n      t < 0 && (t += 2 * Math.PI);\n      const r = Math.floor(t / (.25 * Math.PI));\n      x(ce, ne[r], 2 * y), ce[0] *= R, ce[2] *= R, S(H, A, ce);\n    }\n    if (this._isSpherical) H[0] = this._longitudeCyclical.clamp(H[0]), H[2] = this._longitudeCyclical.clamp(H[2]), H[1] = Math.max(H[1], -v), H[3] = Math.min(H[3], v);else {\n      const e = b(A, u, pe),\n            t = b(H, u, _e);\n      G(e, t) && (H[2] = H[0], H[3] = H[1]);\n    }\n    const L = Math.abs(A[2] - A[0]) / t;\n    r.mapUnitsPerPixel = Math.max(r.mapUnitsPerPixel, L), r.pixelRatioAdjustment = r.mapUnitsPerPixel / L;\n  }\n\n  _drawOverlayTextures(e, t, r = this.view.state.camera) {\n    if (0 === e.length || !this._drawTexturesDirty && !this._drawTexturesAnimateDirty) return;\n    const s = this._drawTexturesDirty;\n    this._drawTexturesDirty = !1, this._drawTexturesAnimateDirty = !1;\n\n    const i = this._drawOverlay(e[Z.INNER], r),\n          a = this._drawOverlay(e[Z.OUTER], r);\n\n    i !== ee.CHANGED && a !== ee.CHANGED || this.surface.updateTileOverlayParams($.UPDATE), this._collectUnusedRenderTargetMemory(), this.updateOverlayResult(), s ? (this.surface.requestRender(t), t === $.UPDATE && this.surface.requestUpdate()) : this.surface.requestRender($.BACKGROUND);\n  }\n\n  _drawOverlay(e, t) {\n    return this._longitudeCyclical ? e.setupGeometryViewsCyclical(this._longitudeCyclical) : e.setupGeometryViewsDirect(), e.draw(this.renderer, t.pixelRatio);\n  }\n\n  _collectUnusedRenderTargetMemory() {\n    if (this._hasUnusedRenderTargets = !1, this.renderer.hasOverlays) {\n      const e = performance.now();\n      this._hasUnusedRenderTargets = this.renderer.collectUnusedRenderTargetMemory(e);\n    }\n  }\n\n  _rectanglesOverlap(e, t) {\n    return !h(e) && (this._longitudeCyclical ? (this._longitudeCyclical.contains(t[0], t[2], e[0]) || this._longitudeCyclical.contains(t[0], t[2], e[2]) || this._longitudeCyclical.contains(e[0], e[2], t[0])) && !(e[1] > t[3] || e[3] < t[1]) : H(e, t));\n  }\n\n  _rectInsideRect(e, t) {\n    return !h(t) && (this._longitudeCyclical ? this._longitudeCyclical.contains(e[0], e[2], t[0]) && this._longitudeCyclical.contains(e[0], e[2], t[2]) && t[1] > e[1] && t[3] < e[3] : G(e, t));\n  }\n\n  _pointIsInExtent(e, t) {\n    if (this._longitudeCyclical) return this._longitudeCyclical.contains(t[0], t[2], e.x) && e.y >= t[1] && e.y <= t[3];\n    const r = e.x,\n          s = e.y;\n    return r > t[0] && r < t[2] && s > t[1] && s < t[3];\n  }\n\n  _shiftExtentToFitBounds(e, t, r) {\n    let s = 0,\n        i = 0;\n    e[0] < -t ? s = e[0] + t : e[2] > t && (s = t - e[2]), e[1] < -r ? i = e[1] + r : e[3] > r && (i = r - e[3]), L(e, s, i);\n  }\n\n  get test() {\n    return {\n      renderer: this.renderer,\n      update: () => this.runTask()\n    };\n  }\n\n};\n\nfunction he(e, t) {\n  const r = 1e-5,\n        s = X.TESTS_DISABLE_OPTIMIZATIONS ? 0 : r * Math.max(e[2] - e[0], e[3] - e[1], t[2] - t[0], t[3] - t[1]);\n  return Math.abs(t[0] - e[0]) <= s && Math.abs(t[1] - e[1]) <= s && Math.abs(t[2] - e[2]) <= s && Math.abs(t[3] - e[3]) <= s;\n}\n\ne([m()], le.prototype, \"_spatialReference\", void 0), e([m({\n  readOnly: !0\n})], le.prototype, \"running\", null), e([m()], le.prototype, \"_placementDirty\", void 0), e([m()], le.prototype, \"_contentUpdated\", void 0), e([m()], le.prototype, \"_isSpherical\", null), e([m()], le.prototype, \"_worldToPCSRatio\", null), e([m()], le.prototype, \"renderer\", void 0), e([m({\n  constructOnly: !0\n})], le.prototype, \"surface\", void 0), e([m({\n  readOnly: !0,\n  aliasOf: \"surface.suspended\"\n})], le.prototype, \"suspended\", void 0), e([m({\n  readOnly: !0\n})], le.prototype, \"updating\", null), e([m({\n  type: Boolean\n})], le.prototype, \"hasHighlights\", null), e([m({\n  type: Boolean\n})], le.prototype, \"rendersOccluded\", null), le = e([y(\"esri.views.3d.terrain.OverlayManager\")], le);\n\nconst ce = E(),\n      de = w(),\n      ue = {\n  inner: C(),\n  outer: C(),\n  mapUnitsPerPixel: 0,\n  pixelRatioAdjustment: 1\n},\n      pe = C(),\n      _e = C(),\n      me = k();\n\nvar ye;\n!function (e) {\n  e[e.NONE = 0] = \"NONE\", e[e.EXTENT = 1] = \"EXTENT\", e[e.RERENDER_ONLY = 2] = \"RERENDER_ONLY\";\n}(ye || (ye = {}));\nexport { le as OverlayManager };","map":{"version":3,"names":["_","e","t","Cyclical","r","cyclicalPI","s","i","a","clamp","n","deg2rad","o","isSome","l","isNone","h","unwrap","c","watch","d","sync","u","addFrameTask","p","Milliseconds","property","m","subclass","y","g","f","b","v","x","R","T","O","w","D","S","E","P","projectVectorToVector","U","getReferenceEllipsoid","M","create","C","width","j","copy","I","center","N","intersection","height","A","contains","G","intersects","H","offset","L","k","wrap","V","B","F","q","angleAroundAxis","W","y2lat","z","viewAngle","Y","X","PointGraphics","K","OverlayIndex","Z","computeOverlayResolution","J","OverlayRenderer","Q","RenderRequestType","$","ValidationState","ee","newIntersector","te","fromValues","re","SortedRenderGeometryRenderer","se","removeLoadedShaderModules","ie","TaskPriority","ae","ne","oe","le","constructor","_handles","_spatialReference","_renderSR","_overlaySREqualsRenderSR","_drapeSources","Set","_drapeTargets","_placementDirty","_contentUpdated","_drawTexturesDirty","_drawTexturesAnimateDirty","_hasUnusedRenderTargets","_longitudeCyclical","_latestOriginId","_maxResolution","_animationTimeLast","running","size","view","graphics","length","OVERLAY_DRAW_DEBUG_TEXTURE","suspended","surface","ready","_isSpherical","state","isGlobal","_worldToPCSRatio","isGeographic","isLocal","metersPerDegree","updating","renderer","hasHighlights","rendersOccluded","initialize","worldToPCSRatio","spatialReference","_groundIntersector","viewingMode","options","backfacesTerrain","invisibleTerrain","hud","add","events","on","setDrawTexturesDirty","notifyChange","_stage","renderView","setRenderParameters","hasOverlayWater","updateOverlayResult","pointsOfInterest","renderPointOfView","centerOnSurfaceFrequent","location","setPlacementDirty","pixelRatio","preRender","processSyncDrapeSources","hasOverlays","_dispatchAnimationUpdate","_drawOverlayTextures","overlays","UPDATE","_collectUnusedRenderTargetMemory","resourceController","scheduler","registerTask","OVERLAY","_updateOverlays","BACKGROUND","destroy","dispose","hide","setSpatialReference","renderSpatialReference","equals","isWebMercator","longitudeCyclical","disposeOverlays","gpuMemoryUsage","registerDrapeSource","ensureOverlays","createDrapeSourceRenderer","_updateDrapeSourceExtent","_setContentDirty","registerGeometryDrapeSource","setDrapingExtent","unregisterDrapeSource","has","delete","removeDrapeSourceRenderer","ensureDrapeSources","registerDrapeTarget","unregisterDrapeTarget","ensureDrapeTargets","runTask","camera","fullWidth","fullHeight","_computeOverlayExtents","ue","inner","outer","_updateOverlay","INNER","pixelRatioAdjustment","mapUnitsPerPixel","OUTER","ye","EXTENT","forEach","updateTileOverlayParams","NONE","he","extent","resolution","RERENDER_ONLY","renderLocalOrigin","setTileParameters","renderData","overlay","pe","_rectInsideRect","_rectanglesOverlap","_setTileOverlayData","_clearTileOverlayData","overlayPixelSizeInMapUnits","_pointIsInExtent","minimalMonotonic","setScale","setOffset","reloadShaders","time","animationTimestep","forcedAnimationTime","updateAnimation","dt","forcedTime","_intersectGroundFromView","sceneIntersectionHelper","getCenterRayWithSubpixelOffset","me","origin","de","direction","reset","intersect","basemapTerrain","results","min","getIntersectionPoint","_findHorizonBasedPointOfInterest","renderCoordsHelper","getAltitude","eye","estimatedSurfaceAltitude","aboveGround","radius","viewForward","normalize","viewRight","fovY","Math","PI","acos","tan","projectionMatrix","distance","renderLocation","max","abs","OVERLAY_SHOW_CENTER","show","perRenderPixelRatio","cos","log","exp","round","_shiftExtentToFitBounds","ce","atan2","floor","_e","_drawOverlay","CHANGED","requestRender","requestUpdate","setupGeometryViewsCyclical","setupGeometryViewsDirect","draw","performance","now","collectUnusedRenderTargetMemory","test","update","TESTS_DISABLE_OPTIMIZATIONS","prototype","readOnly","constructOnly","aliasOf","type","Boolean","OverlayManager"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/OverlayManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{Cyclical as r,cyclicalPI as s}from\"../../../core/Cyclical.js\";import i from\"../../../core/Handles.js\";import a from\"../../../core/has.js\";import{clamp as n,deg2rad as o}from\"../../../core/mathUtils.js\";import{isSome as l,isNone as h,unwrap as c}from\"../../../core/maybe.js\";import{watch as d,sync as u}from\"../../../core/reactiveUtils.js\";import{addFrameTask as p}from\"../../../core/scheduling.js\";import{Milliseconds as _}from\"../../../core/time.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import{g}from\"../../../chunks/vec2.js\";import{a as f,b as v,x as R,c as T,i as O}from\"../../../chunks/vec3.js\";import{c as w}from\"../../../chunks/vec3f64.js\";import{t as D,b as x,a as S}from\"../../../chunks/vec4.js\";import{c as E,f as P}from\"../../../chunks/vec4f64.js\";import{projectVectorToVector as U}from\"../../../geometry/projection.js\";import{getReferenceEllipsoid as M}from\"../../../geometry/projectionEllipsoid.js\";import{create as C,width as j,copy as I,center as N,intersection as b,height as A,contains as G,intersects as H,offset as L}from\"../../../geometry/support/aaBoundingRect.js\";import{create as k,wrap as V}from\"../../../geometry/support/ray.js\";import{j as B,k as F,t as q}from\"../../../chunks/sphere.js\";import{angleAroundAxis as W}from\"../../../geometry/support/vector.js\";import{y2lat as z}from\"../../../geometry/support/webMercatorUtils.js\";import{viewAngle as Y}from\"../state/utils/viewUtils.js\";import X from\"../support/debugFlags.js\";import{PointGraphics as K}from\"../support/debugUtils.js\";import{OverlayIndex as Z}from\"./interfaces.js\";import{computeOverlayResolution as J}from\"./Overlay.js\";import{OverlayRenderer as Q}from\"./OverlayRenderer.js\";import{RenderRequestType as $,ValidationState as ee}from\"../webgl-engine/lib/basicInterfaces.js\";import{newIntersector as te}from\"../webgl-engine/lib/Intersector.js\";import{fromValues as re}from\"../webgl-engine/lib/LocalOriginFactory.js\";import{SortedRenderGeometryRenderer as se}from\"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";import{removeLoadedShaderModules as ie}from\"../webgl-engine/parts/requireUtils.js\";import{TaskPriority as ae}from\"../../support/Scheduler.js\";const ne=[[-.1,-2,3.9,2],[-.1,-3.9,3.9,.1],[-2,-3.9,2,.1],[-3.9,-3.9,.1,.1],[-3.9,-2,.1,2],[-3.9,-.1,.1,3.9],[-2,-.1,2,3.9],[-.1,-.1,3.9,3.9]];let oe,le=class extends t{constructor(e){super(e),this._handles=new i,this._spatialReference=null,this._renderSR=null,this._overlaySREqualsRenderSR=!0,this._drapeSources=new Set,this._drapeTargets=new Set,this._placementDirty=!1,this._contentUpdated=!1,this._drawTexturesDirty=!1,this._drawTexturesAnimateDirty=!1,this._hasUnusedRenderTargets=!1,this._longitudeCyclical=null,this._latestOriginId=0,this._maxResolution=a(\"esri-mobile\")?2048:4096,this._animationTimeLast=0}get running(){return this._placementDirty&&(this._drapeSources.size>0||this.view.graphics.length>0||X.OVERLAY_DRAW_DEBUG_TEXTURE)&&!!this._spatialReference&&!this.suspended&&this.surface.ready}get _isSpherical(){return this.view.state.isGlobal}get _worldToPCSRatio(){return l(this._spatialReference)&&this._spatialReference.isGeographic&&!this.view.state.isLocal?M(this._spatialReference).metersPerDegree:1}get view(){return this.surface.view}get updating(){return this.running||this.renderer.updating||this._contentUpdated}get hasHighlights(){return this.renderer.hasHighlights}get rendersOccluded(){return this.renderer.rendersOccluded}initialize(){const e=this.view;this.renderer=new Q({view:e,worldToPCSRatio:this._worldToPCSRatio,spatialReference:this._spatialReference}),this._groundIntersector=te(this.view.state.viewingMode),this._groundIntersector.options.backfacesTerrain=!0,this._groundIntersector.options.invisibleTerrain=!0,this._groundIntersector.options.hud=!1,this._handles.add([this.renderer.events.on(\"has-highlights\",(()=>{this.setDrawTexturesDirty(),this.notifyChange(\"hasHighlights\")})),this.renderer.events.on(\"has-water\",(t=>e._stage?.renderView.setRenderParameters({hasOverlayWater:t}))),this.renderer.events.on(\"renders-occluded\",(()=>{this.setDrawTexturesDirty(),this.notifyChange(\"rendersOccluded\")})),this.renderer.events.on(\"content-changed\",(()=>this.setDrawTexturesDirty())),this.renderer.events.on(\"textures-disposed\",(()=>this.updateOverlayResult())),d((()=>[e.pointsOfInterest?.renderPointOfView,e.pointsOfInterest?.centerOnSurfaceFrequent?.location]),(()=>this.setPlacementDirty())),d((()=>e.state?.pixelRatio),(()=>this.setPlacementDirty()),u),this.surface.on(\"elevation-change\",(()=>this.setPlacementDirty())),e.on(\"resize\",(()=>this.setPlacementDirty())),p({preRender:e=>{this._contentUpdated=!1,this.renderer.processSyncDrapeSources(),this.renderer.hasOverlays&&(this._dispatchAnimationUpdate(e),this._drawOverlayTextures(this.renderer.overlays,$.UPDATE)),this._hasUnusedRenderTargets&&this._collectUnusedRenderTargetMemory()}}),e.resourceController.scheduler.registerTask(ae.OVERLAY,this),e._stage.renderView.events.on(\"force-camera-for-screenshot\",(e=>{this._updateOverlays(e,$.BACKGROUND),this.renderer.hasOverlays&&this._drawOverlayTextures(this.renderer.overlays,$.BACKGROUND,e)}))])}destroy(){this.renderer.dispose(),this._handles&&(this._handles.destroy(),this._handles=null),l(oe)&&(oe.hide(),oe=null)}get hasOverlays(){return this.renderer.hasOverlays}setSpatialReference(e){this._spatialReference=e,this.renderer.spatialReference=e,this._longitudeCyclical=null;const t=this.view.renderSpatialReference;l(e)&&l(t)?(this._renderSR=t,this._overlaySREqualsRenderSR=e.equals(this._renderSR),this._isSpherical&&(this._longitudeCyclical=e.isWebMercator?new r(-20037508.342787,20037508.342787):new r(-180,180),this.renderer.longitudeCyclical=this._longitudeCyclical),this.renderer&&(this.renderer.worldToPCSRatio=this._worldToPCSRatio)):this.renderer.disposeOverlays()}get gpuMemoryUsage(){return this.renderer.gpuMemoryUsage}registerDrapeSource(e,t,r){this._drapeSources.add(e),this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources);const s=this.renderer.createDrapeSourceRenderer(e,t,r);return this._updateDrapeSourceExtent(e),this._setContentDirty(),this.notifyChange(\"running\"),s}registerGeometryDrapeSource(e){return this.registerDrapeSource(e,se)}_updateDrapeSourceExtent(e){2===this.renderer.overlays.length&&l(e.setDrapingExtent)&&l(this._spatialReference)&&e.setDrapingExtent(this.renderer.overlays,this._spatialReference)}unregisterDrapeSource(e){this._drapeSources.has(e)&&(this._drapeSources.delete(e),this.renderer.removeDrapeSourceRenderer(e),this.renderer.ensureDrapeSources(this._drapeSources),this._setContentDirty(),this.notifyChange(\"running\"))}registerDrapeTarget(e){this._drapeTargets.add(e),this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources)}updateOverlayResult(){this.view._stage?.renderView.setRenderParameters({overlays:this.renderer.overlays})}unregisterDrapeTarget(e){this._drapeTargets.delete(e),this.renderer.ensureDrapeTargets(this._drapeTargets)}_setContentDirty(){this.setPlacementDirty(),this.setDrawTexturesDirty()}setPlacementDirty(){this._placementDirty=!0}runTask(){this._updateOverlays(this.view.state.camera,$.UPDATE)}_updateOverlays(e,t){if(!this._spatialReference)return;const r=J(e.fullWidth,e.fullHeight,this._maxResolution);this._computeOverlayExtents(e,r,ue);const s=j(ue.inner)/j(ue.outer);this.renderer.ensureOverlays(this._drapeTargets,this._drapeSources);const i=this._updateOverlay(Z.INNER,ue.inner,r,1*ue.pixelRatioAdjustment,ue.mapUnitsPerPixel),a=this._updateOverlay(Z.OUTER,ue.outer,r,s*ue.pixelRatioAdjustment,ue.mapUnitsPerPixel);i!==ye.EXTENT&&a!==ye.EXTENT||(this._drapeSources.forEach((e=>this._updateDrapeSourceExtent(e))),this.surface.updateTileOverlayParams(t)),i===ye.NONE&&a===ye.NONE||this.setDrawTexturesDirty(),this._placementDirty=!1}_updateOverlay(e,t,r,s,i){if(0===this.renderer.overlays.length)return ye.NONE;const a=this.renderer.overlays[e],n=a.mapUnitsPerPixel;if(a.mapUnitsPerPixel=i,a.pixelRatio=s,he(t,a.extent)&&r===a.resolution)return n===i?ye.NONE:ye.RERENDER_ONLY;I(a.extent,t),a.resolution=r;const o=N(a.extent);return a.renderLocalOrigin=re(o[0],o[1],0,\"OV_\"+this._latestOriginId++),ye.EXTENT}setTileParameters(e){const t=e.renderData.overlay;if(this.renderer.overlays.length>0){const r=this.renderer.overlays[Z.INNER],s=this.renderer.overlays[Z.OUTER],i=b(e.extent,this.surface.extent,pe);this._rectInsideRect(r.extent,i)||this._rectanglesOverlap(i,r.extent)||this._rectanglesOverlap(i,s.extent)?(this._setTileOverlayData(i,Z.INNER,t),this._setTileOverlayData(i,Z.OUTER,t)):(this._clearTileOverlayData(Z.INNER,t),this._clearTileOverlayData(Z.OUTER,t))}else this._clearTileOverlayData(Z.INNER,t),this._clearTileOverlayData(Z.OUTER,t)}overlayPixelSizeInMapUnits(e){if(0===this.renderer.overlays.length)return 0;const t=this.renderer.overlays[Z.INNER],r=this.renderer.overlays[Z.OUTER],s=this._pointIsInExtent(e,t.extent)?t:r;return(s.extent[2]-s.extent[0])/s.resolution}_setTileOverlayData(e,t,r){if(0===this.renderer.overlays.length)return;const s=this.renderer.overlays[t].extent,i=j(s),a=A(s);let n=e[0];if(this._longitudeCyclical){n=this._longitudeCyclical.minimalMonotonic(s[0],n);const t=this._longitudeCyclical.minimalMonotonic(s[0],e[2]);n>t&&(n=t-(e[2]-e[0]))}r.setScale(t,j(e)/i,A(e)/a),r.setOffset(t,(n-s[0])/i,(e[1]-s[1])/a)}_clearTileOverlayData(e,t){t.setScale(e,-1,-1),t.setOffset(e,-1,-1)}async reloadShaders(){ie(),await this.renderer.reloadShaders(),this.setDrawTexturesDirty(),this.runTask()}_dispatchAnimationUpdate(e){const t=_(e.time-this._animationTimeLast);(t>=this.surface.view._stage.renderView.animationTimestep||l(this.forcedAnimationTime)||this._drawTexturesDirty||this._drawTexturesAnimateDirty)&&(this.renderer.updateAnimation({dt:t,forcedTime:this.forcedAnimationTime,camera:this.view.state.camera})&&(this._drawTexturesAnimateDirty=!0),this._animationTimeLast=e.time)}setDrawTexturesDirty(){this.renderer.hasOverlays?(this._contentUpdated=!0,this._drawTexturesDirty=!0):this.setPlacementDirty()}_intersectGroundFromView(e,t,r,s){const i=this.view.sceneIntersectionHelper.getCenterRayWithSubpixelOffset(e,me,t,r);if(h(i))return!1;const a=i.origin,n=f(de,i.origin,i.direction);return this._groundIntersector.reset(a,n,e),this._groundIntersector.intersect([],null),this.view.basemapTerrain.intersect(this._groundIntersector,null,a,n),this._groundIntersector.results.min.getIntersectionPoint(s)}_findHorizonBasedPointOfInterest(e,t){let r=.5;const i=.55,a=this.view.renderCoordsHelper.getAltitude(e.eye),o=this.view.pointsOfInterest.centerOnSurfaceFrequent,l=1e-5,h=n(o.estimatedSurfaceAltitude,e.aboveGround?-1/0:a+l,e.aboveGround?a-l:1/0),c=e.aboveGround;if(\"global\"===this.view.viewingMode){const t=de;B(F(q,M(this.view.spatialReference).radius+h),V(e.eye,e.viewForward),t),v(t,t,e.eye);const a=s.normalize(W(e.viewForward,t,e.viewRight))/e.fovY+.5,n=a<=0||a>=1?.5:i;r=c?n*a:a+n*(1-a)}else{const t=.5*Math.PI-Math.acos(-e.viewForward[2]),s=Math.tan(t),a=P(0,s,1,0),o=D(a,a,e.projectionMatrix)[1],l=n(.5+.5*o,0,1);r=1===l||0===l?.5:c?l*i:1-(1-l)*i}return!!this._intersectGroundFromView(e,.5,r,t)&&R(t,e.eye)<o.distance*o.distance}_computeOverlayExtents(e,t,r){const s=this.view.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,i=w();this._findHorizonBasedPointOfInterest(e,i)||T(i,s);const a=Math.max(.1,O(e.eye,i)),n=Y(this.view.renderCoordsHelper,s,e.eye),d=Math.PI/2-Math.abs(n-Math.PI/2);X.OVERLAY_SHOW_CENTER?(h(oe)&&(oe=new K(this.view.graphics,\"red\")),oe.show(i,this._renderSR)):l(oe)&&oe.hide(),this._overlaySREqualsRenderSR||U(i,this._renderSR,i,this._spatialReference);const u=this.surface.extent,p=!this._isSpherical&&l(this._spatialReference)&&this._spatialReference.isGeographic,_=p&&l(this._spatialReference)?1/M(this._spatialReference).metersPerDegree:1,m=e.perRenderPixelRatio*a*_;r.mapUnitsPerPixel=m/this._worldToPCSRatio;let y=t*m/2,f=!1,v=p?90:1/0;this._isSpherical&&l(u)&&l(this._spatialReference)&&(this._spatialReference.isWebMercator?(y/=Math.cos(z(i[1])),v=u[3]):(f=!0,y/=M(this._spatialReference).metersPerDegree,v=90),y>=v&&(y=v,i[1]=0,this._spatialReference.isWebMercator&&(i[0]=0)));let R=1;f&&(R=1/Math.max(.2,Math.cos(Math.abs(o(i[1])))),y*R>180&&(R=180/y),r.mapUnitsPerPixel*=R);const D=Math.log(2)/12;y=Math.exp(Math.round(Math.log(y)/D)*D);const E=y*R,P=32,C=.5*t/(P*E),N=.5*t/(P*y);i[0]=Math.round(i[0]*C)/C,i[1]=Math.round(i[1]*N)/N;const A=r.inner;A[0]=i[0]-E,A[1]=i[1]-y,A[2]=i[0]+E,A[3]=i[1]+y,this._isSpherical&&this._shiftExtentToFitBounds(A,1/0,v);const H=r.outer;if(6*E>j(u))I(H,c(u));else if(d<=.25*Math.PI)H[0]=A[0]-E,H[1]=A[1]-y,H[2]=A[2]+E,H[3]=A[3]+y;else{U(e.eye,this._renderSR,de,this._spatialReference),g(ce,i,de);let t=-Math.atan2(ce[1],ce[0])+.125*Math.PI;t<0&&(t+=2*Math.PI);const r=Math.floor(t/(.25*Math.PI));x(ce,ne[r],2*y),ce[0]*=R,ce[2]*=R,S(H,A,ce)}if(this._isSpherical)H[0]=this._longitudeCyclical.clamp(H[0]),H[2]=this._longitudeCyclical.clamp(H[2]),H[1]=Math.max(H[1],-v),H[3]=Math.min(H[3],v);else{const e=b(A,u,pe),t=b(H,u,_e);G(e,t)&&(H[2]=H[0],H[3]=H[1])}const L=Math.abs(A[2]-A[0])/t;r.mapUnitsPerPixel=Math.max(r.mapUnitsPerPixel,L),r.pixelRatioAdjustment=r.mapUnitsPerPixel/L}_drawOverlayTextures(e,t,r=this.view.state.camera){if(0===e.length||!this._drawTexturesDirty&&!this._drawTexturesAnimateDirty)return;const s=this._drawTexturesDirty;this._drawTexturesDirty=!1,this._drawTexturesAnimateDirty=!1;const i=this._drawOverlay(e[Z.INNER],r),a=this._drawOverlay(e[Z.OUTER],r);i!==ee.CHANGED&&a!==ee.CHANGED||this.surface.updateTileOverlayParams($.UPDATE),this._collectUnusedRenderTargetMemory(),this.updateOverlayResult(),s?(this.surface.requestRender(t),t===$.UPDATE&&this.surface.requestUpdate()):this.surface.requestRender($.BACKGROUND)}_drawOverlay(e,t){return this._longitudeCyclical?e.setupGeometryViewsCyclical(this._longitudeCyclical):e.setupGeometryViewsDirect(),e.draw(this.renderer,t.pixelRatio)}_collectUnusedRenderTargetMemory(){if(this._hasUnusedRenderTargets=!1,this.renderer.hasOverlays){const e=performance.now();this._hasUnusedRenderTargets=this.renderer.collectUnusedRenderTargetMemory(e)}}_rectanglesOverlap(e,t){return!h(e)&&(this._longitudeCyclical?(this._longitudeCyclical.contains(t[0],t[2],e[0])||this._longitudeCyclical.contains(t[0],t[2],e[2])||this._longitudeCyclical.contains(e[0],e[2],t[0]))&&!(e[1]>t[3]||e[3]<t[1]):H(e,t))}_rectInsideRect(e,t){return!h(t)&&(this._longitudeCyclical?this._longitudeCyclical.contains(e[0],e[2],t[0])&&this._longitudeCyclical.contains(e[0],e[2],t[2])&&t[1]>e[1]&&t[3]<e[3]:G(e,t))}_pointIsInExtent(e,t){if(this._longitudeCyclical)return this._longitudeCyclical.contains(t[0],t[2],e.x)&&e.y>=t[1]&&e.y<=t[3];const r=e.x,s=e.y;return r>t[0]&&r<t[2]&&s>t[1]&&s<t[3]}_shiftExtentToFitBounds(e,t,r){let s=0,i=0;e[0]<-t?s=e[0]+t:e[2]>t&&(s=t-e[2]),e[1]<-r?i=e[1]+r:e[3]>r&&(i=r-e[3]),L(e,s,i)}get test(){return{renderer:this.renderer,update:()=>this.runTask()}}};function he(e,t){const r=1e-5,s=X.TESTS_DISABLE_OPTIMIZATIONS?0:r*Math.max(e[2]-e[0],e[3]-e[1],t[2]-t[0],t[3]-t[1]);return Math.abs(t[0]-e[0])<=s&&Math.abs(t[1]-e[1])<=s&&Math.abs(t[2]-e[2])<=s&&Math.abs(t[3]-e[3])<=s}e([m()],le.prototype,\"_spatialReference\",void 0),e([m({readOnly:!0})],le.prototype,\"running\",null),e([m()],le.prototype,\"_placementDirty\",void 0),e([m()],le.prototype,\"_contentUpdated\",void 0),e([m()],le.prototype,\"_isSpherical\",null),e([m()],le.prototype,\"_worldToPCSRatio\",null),e([m()],le.prototype,\"renderer\",void 0),e([m({constructOnly:!0})],le.prototype,\"surface\",void 0),e([m({readOnly:!0,aliasOf:\"surface.suspended\"})],le.prototype,\"suspended\",void 0),e([m({readOnly:!0})],le.prototype,\"updating\",null),e([m({type:Boolean})],le.prototype,\"hasHighlights\",null),e([m({type:Boolean})],le.prototype,\"rendersOccluded\",null),le=e([y(\"esri.views.3d.terrain.OverlayManager\")],le);const ce=E(),de=w(),ue={inner:C(),outer:C(),mapUnitsPerPixel:0,pixelRatioAdjustment:1},pe=C(),_e=C(),me=k();var ye;!function(e){e[e.NONE=0]=\"NONE\",e[e.EXTENT=1]=\"EXTENT\",e[e.RERENDER_ONLY=2]=\"RERENDER_ONLY\"}(ye||(ye={}));export{le as OverlayManager};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,2BAAb;AAAyC,SAAOC,QAAQ,IAAIC,CAAnB,EAAqBC,UAAU,IAAIC,CAAnC,QAAyC,2BAAzC;AAAqE,OAAOC,CAAP,MAAa,0BAAb;AAAwC,OAAOC,CAAP,MAAa,sBAAb;AAAoC,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,OAAO,IAAIC,CAA7B,QAAmC,4BAAnC;AAAgE,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,EAA+BC,MAAM,IAAIC,CAAzC,QAA+C,wBAA/C;AAAwE,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,IAAI,IAAIC,CAA1B,QAAgC,gCAAhC;AAAiE,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,6BAA7B;AAA2D,SAAOC,YAAY,IAAIzB,CAAvB,QAA6B,uBAA7B;AAAqD,SAAO0B,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,SAAOC,CAAP,QAAa,yBAAb;AAAuC,SAAOtB,CAAC,IAAIuB,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,EAA4BjB,CAAC,IAAIkB,CAAjC,EAAmC7B,CAAC,IAAI8B,CAAxC,QAA8C,yBAA9C;AAAwE,SAAOnB,CAAC,IAAIoB,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOpC,CAAC,IAAIqC,CAAZ,EAAcP,CAAC,IAAIE,CAAnB,EAAqB1B,CAAC,IAAIgC,CAA1B,QAAgC,yBAAhC;AAA0D,SAAOtB,CAAC,IAAIuB,CAAZ,EAAcV,CAAC,IAAIW,CAAnB,QAAyB,4BAAzB;AAAsD,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,iCAAtC;AAAwE,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,0CAAtC;AAAiF,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,KAAK,IAAIC,CAA5B,EAA8BC,IAAI,IAAIC,CAAtC,EAAwCC,MAAM,IAAIC,CAAlD,EAAoDC,YAAY,IAAIvB,CAApE,EAAsEwB,MAAM,IAAIC,CAAhF,EAAkFC,QAAQ,IAAIC,CAA9F,EAAgGC,UAAU,IAAIC,CAA9G,EAAgHC,MAAM,IAAIC,CAA1H,QAAgI,6CAAhI;AAA8K,SAAOhB,MAAM,IAAIiB,CAAjB,EAAmBC,IAAI,IAAIC,CAA3B,QAAiC,kCAAjC;AAAoE,SAAOhB,CAAC,IAAIiB,CAAZ,EAAcH,CAAC,IAAII,CAAnB,EAAqBlE,CAAC,IAAImE,CAA1B,QAAgC,2BAAhC;AAA4D,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,qCAAhC;AAAsE,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,+CAAtB;AAAsE,SAAOC,SAAS,IAAIC,CAApB,QAA0B,6BAA1B;AAAwD,OAAOC,CAAP,MAAa,0BAAb;AAAwC,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,0BAA9B;AAAyD,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,iBAA7B;AAA+C,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,cAAzC;AAAwD,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,sBAAhC;AAAuD,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,eAAe,IAAIC,EAAjD,QAAwD,wCAAxD;AAAiG,SAAOC,cAAc,IAAIC,EAAzB,QAAgC,oCAAhC;AAAqE,SAAOC,UAAU,IAAIC,EAArB,QAA4B,2CAA5B;AAAwE,SAAOC,4BAA4B,IAAIC,EAAvC,QAA8C,qDAA9C;AAAoG,SAAOC,yBAAyB,IAAIC,EAApC,QAA2C,uCAA3C;AAAmF,SAAOC,YAAY,IAAIC,EAAvB,QAA8B,4BAA9B;AAA2D,MAAMC,EAAE,GAAC,CAAC,CAAC,CAAC,EAAF,EAAK,CAAC,CAAN,EAAQ,GAAR,EAAY,CAAZ,CAAD,EAAgB,CAAC,CAAC,EAAF,EAAK,CAAC,GAAN,EAAU,GAAV,EAAc,EAAd,CAAhB,EAAkC,CAAC,CAAC,CAAF,EAAI,CAAC,GAAL,EAAS,CAAT,EAAW,EAAX,CAAlC,EAAiD,CAAC,CAAC,GAAF,EAAM,CAAC,GAAP,EAAW,EAAX,EAAc,EAAd,CAAjD,EAAmE,CAAC,CAAC,GAAF,EAAM,CAAC,CAAP,EAAS,EAAT,EAAY,CAAZ,CAAnE,EAAkF,CAAC,CAAC,GAAF,EAAM,CAAC,EAAP,EAAU,EAAV,EAAa,GAAb,CAAlF,EAAoG,CAAC,CAAC,CAAF,EAAI,CAAC,EAAL,EAAQ,CAAR,EAAU,GAAV,CAApG,EAAmH,CAAC,CAAC,EAAF,EAAK,CAAC,EAAN,EAAS,GAAT,EAAa,GAAb,CAAnH,CAAT;AAA+I,IAAIC,EAAJ;AAAA,IAAOC,EAAE,GAAC,cAAcnG,CAAd,CAAe;EAACoG,WAAW,CAACrG,CAAD,EAAG;IAAC,MAAMA,CAAN,GAAS,KAAKsG,QAAL,GAAc,IAAIhG,CAAJ,EAAvB,EAA6B,KAAKiG,iBAAL,GAAuB,IAApD,EAAyD,KAAKC,SAAL,GAAe,IAAxE,EAA6E,KAAKC,wBAAL,GAA8B,CAAC,CAA5G,EAA8G,KAAKC,aAAL,GAAmB,IAAIC,GAAJ,EAAjI,EAAyI,KAAKC,aAAL,GAAmB,IAAID,GAAJ,EAA5J,EAAoK,KAAKE,eAAL,GAAqB,CAAC,CAA1L,EAA4L,KAAKC,eAAL,GAAqB,CAAC,CAAlN,EAAoN,KAAKC,kBAAL,GAAwB,CAAC,CAA7O,EAA+O,KAAKC,yBAAL,GAA+B,CAAC,CAA/Q,EAAiR,KAAKC,uBAAL,GAA6B,CAAC,CAA/S,EAAiT,KAAKC,kBAAL,GAAwB,IAAzU,EAA8U,KAAKC,eAAL,GAAqB,CAAnW,EAAqW,KAAKC,cAAL,GAAoB7G,CAAC,CAAC,aAAD,CAAD,GAAiB,IAAjB,GAAsB,IAA/Y,EAAoZ,KAAK8G,kBAAL,GAAwB,CAA5a;EAA8a;;EAAW,IAAPC,OAAO,GAAE;IAAC,OAAO,KAAKT,eAAL,KAAuB,KAAKH,aAAL,CAAmBa,IAAnB,GAAwB,CAAxB,IAA2B,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,MAAnB,GAA0B,CAArD,IAAwD/C,CAAC,CAACgD,0BAAjF,KAA8G,CAAC,CAAC,KAAKpB,iBAArH,IAAwI,CAAC,KAAKqB,SAA9I,IAAyJ,KAAKC,OAAL,CAAaC,KAA7K;EAAmL;;EAAgB,IAAZC,YAAY,GAAE;IAAC,OAAO,KAAKP,IAAL,CAAUQ,KAAV,CAAgBC,QAAvB;EAAgC;;EAAoB,IAAhBC,gBAAgB,GAAE;IAAC,OAAOrH,CAAC,CAAC,KAAK0F,iBAAN,CAAD,IAA2B,KAAKA,iBAAL,CAAuB4B,YAAlD,IAAgE,CAAC,KAAKX,IAAL,CAAUQ,KAAV,CAAgBI,OAAjF,GAAyFvF,CAAC,CAAC,KAAK0D,iBAAN,CAAD,CAA0B8B,eAAnH,GAAmI,CAA1I;EAA4I;;EAAQ,IAAJb,IAAI,GAAE;IAAC,OAAO,KAAKK,OAAL,CAAaL,IAApB;EAAyB;;EAAY,IAARc,QAAQ,GAAE;IAAC,OAAO,KAAKhB,OAAL,IAAc,KAAKiB,QAAL,CAAcD,QAA5B,IAAsC,KAAKxB,eAAlD;EAAkE;;EAAiB,IAAb0B,aAAa,GAAE;IAAC,OAAO,KAAKD,QAAL,CAAcC,aAArB;EAAmC;;EAAmB,IAAfC,eAAe,GAAE;IAAC,OAAO,KAAKF,QAAL,CAAcE,eAArB;EAAqC;;EAAAC,UAAU,GAAE;IAAC,MAAM1I,CAAC,GAAC,KAAKwH,IAAb;IAAkB,KAAKe,QAAL,GAAc,IAAIpD,CAAJ,CAAM;MAACqC,IAAI,EAACxH,CAAN;MAAQ2I,eAAe,EAAC,KAAKT,gBAA7B;MAA8CU,gBAAgB,EAAC,KAAKrC;IAApE,CAAN,CAAd,EAA4G,KAAKsC,kBAAL,GAAwBpD,EAAE,CAAC,KAAK+B,IAAL,CAAUQ,KAAV,CAAgBc,WAAjB,CAAtI,EAAoK,KAAKD,kBAAL,CAAwBE,OAAxB,CAAgCC,gBAAhC,GAAiD,CAAC,CAAtN,EAAwN,KAAKH,kBAAL,CAAwBE,OAAxB,CAAgCE,gBAAhC,GAAiD,CAAC,CAA1Q,EAA4Q,KAAKJ,kBAAL,CAAwBE,OAAxB,CAAgCG,GAAhC,GAAoC,CAAC,CAAjT,EAAmT,KAAK5C,QAAL,CAAc6C,GAAd,CAAkB,CAAC,KAAKZ,QAAL,CAAca,MAAd,CAAqBC,EAArB,CAAwB,gBAAxB,EAA0C,MAAI;MAAC,KAAKC,oBAAL,IAA4B,KAAKC,YAAL,CAAkB,eAAlB,CAA5B;IAA+D,CAA9G,CAAD,EAAkH,KAAKhB,QAAL,CAAca,MAAd,CAAqBC,EAArB,CAAwB,WAAxB,EAAqCpJ,CAAC,IAAED,CAAC,CAACwJ,MAAF,EAAUC,UAAV,CAAqBC,mBAArB,CAAyC;MAACC,eAAe,EAAC1J;IAAjB,CAAzC,CAAxC,CAAlH,EAA0N,KAAKsI,QAAL,CAAca,MAAd,CAAqBC,EAArB,CAAwB,kBAAxB,EAA4C,MAAI;MAAC,KAAKC,oBAAL,IAA4B,KAAKC,YAAL,CAAkB,iBAAlB,CAA5B;IAAiE,CAAlH,CAA1N,EAA+U,KAAKhB,QAAL,CAAca,MAAd,CAAqBC,EAArB,CAAwB,iBAAxB,EAA2C,MAAI,KAAKC,oBAAL,EAA/C,CAA/U,EAA4Z,KAAKf,QAAL,CAAca,MAAd,CAAqBC,EAArB,CAAwB,mBAAxB,EAA6C,MAAI,KAAKO,mBAAL,EAAjD,CAA5Z,EAA0ezI,CAAC,CAAE,MAAI,CAACnB,CAAC,CAAC6J,gBAAF,EAAoBC,iBAArB,EAAuC9J,CAAC,CAAC6J,gBAAF,EAAoBE,uBAApB,EAA6CC,QAApF,CAAN,EAAsG,MAAI,KAAKC,iBAAL,EAA1G,CAA3e,EAAgnB9I,CAAC,CAAE,MAAInB,CAAC,CAACgI,KAAF,EAASkC,UAAf,EAA4B,MAAI,KAAKD,iBAAL,EAAhC,EAA0D5I,CAA1D,CAAjnB,EAA8qB,KAAKwG,OAAL,CAAawB,EAAb,CAAgB,kBAAhB,EAAoC,MAAI,KAAKY,iBAAL,EAAxC,CAA9qB,EAAivBjK,CAAC,CAACqJ,EAAF,CAAK,QAAL,EAAe,MAAI,KAAKY,iBAAL,EAAnB,CAAjvB,EAA+xB1I,CAAC,CAAC;MAAC4I,SAAS,EAACnK,CAAC,IAAE;QAAC,KAAK8G,eAAL,GAAqB,CAAC,CAAtB,EAAwB,KAAKyB,QAAL,CAAc6B,uBAAd,EAAxB,EAAgE,KAAK7B,QAAL,CAAc8B,WAAd,KAA4B,KAAKC,wBAAL,CAA8BtK,CAA9B,GAAiC,KAAKuK,oBAAL,CAA0B,KAAKhC,QAAL,CAAciC,QAAxC,EAAiDnF,CAAC,CAACoF,MAAnD,CAA7D,CAAhE,EAAyL,KAAKxD,uBAAL,IAA8B,KAAKyD,gCAAL,EAAvN;MAA+P;IAA9Q,CAAD,CAAhyB,EAAkjC1K,CAAC,CAAC2K,kBAAF,CAAqBC,SAArB,CAA+BC,YAA/B,CAA4C5E,EAAE,CAAC6E,OAA/C,EAAuD,IAAvD,CAAljC,EAA+mC9K,CAAC,CAACwJ,MAAF,CAASC,UAAT,CAAoBL,MAApB,CAA2BC,EAA3B,CAA8B,6BAA9B,EAA6DrJ,CAAC,IAAE;MAAC,KAAK+K,eAAL,CAAqB/K,CAArB,EAAuBqF,CAAC,CAAC2F,UAAzB,GAAqC,KAAKzC,QAAL,CAAc8B,WAAd,IAA2B,KAAKE,oBAAL,CAA0B,KAAKhC,QAAL,CAAciC,QAAxC,EAAiDnF,CAAC,CAAC2F,UAAnD,EAA8DhL,CAA9D,CAAhE;IAAiI,CAAlM,CAA/mC,CAAlB,CAAnT;EAA2nD;;EAAAiL,OAAO,GAAE;IAAC,KAAK1C,QAAL,CAAc2C,OAAd,IAAwB,KAAK5E,QAAL,KAAgB,KAAKA,QAAL,CAAc2E,OAAd,IAAwB,KAAK3E,QAAL,GAAc,IAAtD,CAAxB,EAAoFzF,CAAC,CAACsF,EAAD,CAAD,KAAQA,EAAE,CAACgF,IAAH,IAAUhF,EAAE,GAAC,IAArB,CAApF;EAA+G;;EAAe,IAAXkE,WAAW,GAAE;IAAC,OAAO,KAAK9B,QAAL,CAAc8B,WAArB;EAAiC;;EAAAe,mBAAmB,CAACpL,CAAD,EAAG;IAAC,KAAKuG,iBAAL,GAAuBvG,CAAvB,EAAyB,KAAKuI,QAAL,CAAcK,gBAAd,GAA+B5I,CAAxD,EAA0D,KAAKkH,kBAAL,GAAwB,IAAlF;IAAuF,MAAMjH,CAAC,GAAC,KAAKuH,IAAL,CAAU6D,sBAAlB;IAAyCxK,CAAC,CAACb,CAAD,CAAD,IAAMa,CAAC,CAACZ,CAAD,CAAP,IAAY,KAAKuG,SAAL,GAAevG,CAAf,EAAiB,KAAKwG,wBAAL,GAA8BzG,CAAC,CAACsL,MAAF,CAAS,KAAK9E,SAAd,CAA/C,EAAwE,KAAKuB,YAAL,KAAoB,KAAKb,kBAAL,GAAwBlH,CAAC,CAACuL,aAAF,GAAgB,IAAIpL,CAAJ,CAAM,CAAC,eAAP,EAAuB,eAAvB,CAAhB,GAAwD,IAAIA,CAAJ,CAAM,CAAC,GAAP,EAAW,GAAX,CAAhF,EAAgG,KAAKoI,QAAL,CAAciD,iBAAd,GAAgC,KAAKtE,kBAAzJ,CAAxE,EAAqP,KAAKqB,QAAL,KAAgB,KAAKA,QAAL,CAAcI,eAAd,GAA8B,KAAKT,gBAAnD,CAAjQ,IAAuU,KAAKK,QAAL,CAAckD,eAAd,EAAvU;EAAuW;;EAAkB,IAAdC,cAAc,GAAE;IAAC,OAAO,KAAKnD,QAAL,CAAcmD,cAArB;EAAoC;;EAAAC,mBAAmB,CAAC3L,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAKuG,aAAL,CAAmByC,GAAnB,CAAuBnJ,CAAvB,GAA0B,KAAKuI,QAAL,CAAcqD,cAAd,CAA6B,KAAKhF,aAAlC,EAAgD,KAAKF,aAArD,CAA1B;IAA8F,MAAMrG,CAAC,GAAC,KAAKkI,QAAL,CAAcsD,yBAAd,CAAwC7L,CAAxC,EAA0CC,CAA1C,EAA4CE,CAA5C,CAAR;IAAuD,OAAO,KAAK2L,wBAAL,CAA8B9L,CAA9B,GAAiC,KAAK+L,gBAAL,EAAjC,EAAyD,KAAKxC,YAAL,CAAkB,SAAlB,CAAzD,EAAsFlJ,CAA7F;EAA+F;;EAAA2L,2BAA2B,CAAChM,CAAD,EAAG;IAAC,OAAO,KAAK2L,mBAAL,CAAyB3L,CAAzB,EAA2B6F,EAA3B,CAAP;EAAsC;;EAAAiG,wBAAwB,CAAC9L,CAAD,EAAG;IAAC,MAAI,KAAKuI,QAAL,CAAciC,QAAd,CAAuB9C,MAA3B,IAAmC7G,CAAC,CAACb,CAAC,CAACiM,gBAAH,CAApC,IAA0DpL,CAAC,CAAC,KAAK0F,iBAAN,CAA3D,IAAqFvG,CAAC,CAACiM,gBAAF,CAAmB,KAAK1D,QAAL,CAAciC,QAAjC,EAA0C,KAAKjE,iBAA/C,CAArF;EAAuJ;;EAAA2F,qBAAqB,CAAClM,CAAD,EAAG;IAAC,KAAK0G,aAAL,CAAmByF,GAAnB,CAAuBnM,CAAvB,MAA4B,KAAK0G,aAAL,CAAmB0F,MAAnB,CAA0BpM,CAA1B,GAA6B,KAAKuI,QAAL,CAAc8D,yBAAd,CAAwCrM,CAAxC,CAA7B,EAAwE,KAAKuI,QAAL,CAAc+D,kBAAd,CAAiC,KAAK5F,aAAtC,CAAxE,EAA6H,KAAKqF,gBAAL,EAA7H,EAAqJ,KAAKxC,YAAL,CAAkB,SAAlB,CAAjL;EAA+M;;EAAAgD,mBAAmB,CAACvM,CAAD,EAAG;IAAC,KAAK4G,aAAL,CAAmBuC,GAAnB,CAAuBnJ,CAAvB,GAA0B,KAAKuI,QAAL,CAAcqD,cAAd,CAA6B,KAAKhF,aAAlC,EAAgD,KAAKF,aAArD,CAA1B;EAA8F;;EAAAkD,mBAAmB,GAAE;IAAC,KAAKpC,IAAL,CAAUgC,MAAV,EAAkBC,UAAlB,CAA6BC,mBAA7B,CAAiD;MAACc,QAAQ,EAAC,KAAKjC,QAAL,CAAciC;IAAxB,CAAjD;EAAoF;;EAAAgC,qBAAqB,CAACxM,CAAD,EAAG;IAAC,KAAK4G,aAAL,CAAmBwF,MAAnB,CAA0BpM,CAA1B,GAA6B,KAAKuI,QAAL,CAAckE,kBAAd,CAAiC,KAAK7F,aAAtC,CAA7B;EAAkF;;EAAAmF,gBAAgB,GAAE;IAAC,KAAK9B,iBAAL,IAAyB,KAAKX,oBAAL,EAAzB;EAAqD;;EAAAW,iBAAiB,GAAE;IAAC,KAAKpD,eAAL,GAAqB,CAAC,CAAtB;EAAwB;;EAAA6F,OAAO,GAAE;IAAC,KAAK3B,eAAL,CAAqB,KAAKvD,IAAL,CAAUQ,KAAV,CAAgB2E,MAArC,EAA4CtH,CAAC,CAACoF,MAA9C;EAAsD;;EAAAM,eAAe,CAAC/K,CAAD,EAAGC,CAAH,EAAK;IAAC,IAAG,CAAC,KAAKsG,iBAAT,EAA2B;IAAO,MAAMpG,CAAC,GAAC8E,CAAC,CAACjF,CAAC,CAAC4M,SAAH,EAAa5M,CAAC,CAAC6M,UAAf,EAA0B,KAAKzF,cAA/B,CAAT;;IAAwD,KAAK0F,sBAAL,CAA4B9M,CAA5B,EAA8BG,CAA9B,EAAgC4M,EAAhC;;IAAoC,MAAM1M,CAAC,GAAC4C,CAAC,CAAC8J,EAAE,CAACC,KAAJ,CAAD,GAAY/J,CAAC,CAAC8J,EAAE,CAACE,KAAJ,CAArB;IAAgC,KAAK1E,QAAL,CAAcqD,cAAd,CAA6B,KAAKhF,aAAlC,EAAgD,KAAKF,aAArD;;IAAoE,MAAMpG,CAAC,GAAC,KAAK4M,cAAL,CAAoBnI,CAAC,CAACoI,KAAtB,EAA4BJ,EAAE,CAACC,KAA/B,EAAqC7M,CAArC,EAAuC,IAAE4M,EAAE,CAACK,oBAA5C,EAAiEL,EAAE,CAACM,gBAApE,CAAR;IAAA,MAA8F9M,CAAC,GAAC,KAAK2M,cAAL,CAAoBnI,CAAC,CAACuI,KAAtB,EAA4BP,EAAE,CAACE,KAA/B,EAAqC9M,CAArC,EAAuCE,CAAC,GAAC0M,EAAE,CAACK,oBAA5C,EAAiEL,EAAE,CAACM,gBAApE,CAAhG;;IAAsL/M,CAAC,KAAGiN,EAAE,CAACC,MAAP,IAAejN,CAAC,KAAGgN,EAAE,CAACC,MAAtB,KAA+B,KAAK9G,aAAL,CAAmB+G,OAAnB,CAA4BzN,CAAC,IAAE,KAAK8L,wBAAL,CAA8B9L,CAA9B,CAA/B,GAAkE,KAAK6H,OAAL,CAAa6F,uBAAb,CAAqCzN,CAArC,CAAjG,GAA0IK,CAAC,KAAGiN,EAAE,CAACI,IAAP,IAAapN,CAAC,KAAGgN,EAAE,CAACI,IAApB,IAA0B,KAAKrE,oBAAL,EAApK,EAAgM,KAAKzC,eAAL,GAAqB,CAAC,CAAtN;EAAwN;;EAAAqG,cAAc,CAAClN,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASC,CAAT,EAAW;IAAC,IAAG,MAAI,KAAKiI,QAAL,CAAciC,QAAd,CAAuB9C,MAA9B,EAAqC,OAAO6F,EAAE,CAACI,IAAV;IAAe,MAAMpN,CAAC,GAAC,KAAKgI,QAAL,CAAciC,QAAd,CAAuBxK,CAAvB,CAAR;IAAA,MAAkCS,CAAC,GAACF,CAAC,CAAC8M,gBAAtC;IAAuD,IAAG9M,CAAC,CAAC8M,gBAAF,GAAmB/M,CAAnB,EAAqBC,CAAC,CAAC2J,UAAF,GAAa7J,CAAlC,EAAoCuN,EAAE,CAAC3N,CAAD,EAAGM,CAAC,CAACsN,MAAL,CAAF,IAAgB1N,CAAC,KAAGI,CAAC,CAACuN,UAA7D,EAAwE,OAAOrN,CAAC,KAAGH,CAAJ,GAAMiN,EAAE,CAACI,IAAT,GAAcJ,EAAE,CAACQ,aAAxB;IAAsC5K,CAAC,CAAC5C,CAAC,CAACsN,MAAH,EAAU5N,CAAV,CAAD,EAAcM,CAAC,CAACuN,UAAF,GAAa3N,CAA3B;IAA6B,MAAMQ,CAAC,GAAC0C,CAAC,CAAC9C,CAAC,CAACsN,MAAH,CAAT;IAAoB,OAAOtN,CAAC,CAACyN,iBAAF,GAAoBrI,EAAE,CAAChF,CAAC,CAAC,CAAD,CAAF,EAAMA,CAAC,CAAC,CAAD,CAAP,EAAW,CAAX,EAAa,QAAM,KAAKwG,eAAL,EAAnB,CAAtB,EAAiEoG,EAAE,CAACC,MAA3E;EAAkF;;EAAAS,iBAAiB,CAACjO,CAAD,EAAG;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACkO,UAAF,CAAaC,OAArB;;IAA6B,IAAG,KAAK5F,QAAL,CAAciC,QAAd,CAAuB9C,MAAvB,GAA8B,CAAjC,EAAmC;MAAC,MAAMvH,CAAC,GAAC,KAAKoI,QAAL,CAAciC,QAAd,CAAuBzF,CAAC,CAACoI,KAAzB,CAAR;MAAA,MAAwC9M,CAAC,GAAC,KAAKkI,QAAL,CAAciC,QAAd,CAAuBzF,CAAC,CAACuI,KAAzB,CAA1C;MAAA,MAA0EhN,CAAC,GAACyB,CAAC,CAAC/B,CAAC,CAAC6N,MAAH,EAAU,KAAKhG,OAAL,CAAagG,MAAvB,EAA8BO,EAA9B,CAA7E;MAA+G,KAAKC,eAAL,CAAqBlO,CAAC,CAAC0N,MAAvB,EAA8BvN,CAA9B,KAAkC,KAAKgO,kBAAL,CAAwBhO,CAAxB,EAA0BH,CAAC,CAAC0N,MAA5B,CAAlC,IAAuE,KAAKS,kBAAL,CAAwBhO,CAAxB,EAA0BD,CAAC,CAACwN,MAA5B,CAAvE,IAA4G,KAAKU,mBAAL,CAAyBjO,CAAzB,EAA2ByE,CAAC,CAACoI,KAA7B,EAAmClN,CAAnC,GAAsC,KAAKsO,mBAAL,CAAyBjO,CAAzB,EAA2ByE,CAAC,CAACuI,KAA7B,EAAmCrN,CAAnC,CAAlJ,KAA0L,KAAKuO,qBAAL,CAA2BzJ,CAAC,CAACoI,KAA7B,EAAmClN,CAAnC,GAAsC,KAAKuO,qBAAL,CAA2BzJ,CAAC,CAACuI,KAA7B,EAAmCrN,CAAnC,CAAhO;IAAuQ,CAA1Z,MAA+Z,KAAKuO,qBAAL,CAA2BzJ,CAAC,CAACoI,KAA7B,EAAmClN,CAAnC,GAAsC,KAAKuO,qBAAL,CAA2BzJ,CAAC,CAACuI,KAA7B,EAAmCrN,CAAnC,CAAtC;EAA4E;;EAAAwO,0BAA0B,CAACzO,CAAD,EAAG;IAAC,IAAG,MAAI,KAAKuI,QAAL,CAAciC,QAAd,CAAuB9C,MAA9B,EAAqC,OAAO,CAAP;IAAS,MAAMzH,CAAC,GAAC,KAAKsI,QAAL,CAAciC,QAAd,CAAuBzF,CAAC,CAACoI,KAAzB,CAAR;IAAA,MAAwChN,CAAC,GAAC,KAAKoI,QAAL,CAAciC,QAAd,CAAuBzF,CAAC,CAACuI,KAAzB,CAA1C;IAAA,MAA0EjN,CAAC,GAAC,KAAKqO,gBAAL,CAAsB1O,CAAtB,EAAwBC,CAAC,CAAC4N,MAA1B,IAAkC5N,CAAlC,GAAoCE,CAAhH;IAAkH,OAAM,CAACE,CAAC,CAACwN,MAAF,CAAS,CAAT,IAAYxN,CAAC,CAACwN,MAAF,CAAS,CAAT,CAAb,IAA0BxN,CAAC,CAACyN,UAAlC;EAA6C;;EAAAS,mBAAmB,CAACvO,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAG,MAAI,KAAKoI,QAAL,CAAciC,QAAd,CAAuB9C,MAA9B,EAAqC;IAAO,MAAMrH,CAAC,GAAC,KAAKkI,QAAL,CAAciC,QAAd,CAAuBvK,CAAvB,EAA0B4N,MAAlC;IAAA,MAAyCvN,CAAC,GAAC2C,CAAC,CAAC5C,CAAD,CAA5C;IAAA,MAAgDE,CAAC,GAACiD,CAAC,CAACnD,CAAD,CAAnD;IAAuD,IAAII,CAAC,GAACT,CAAC,CAAC,CAAD,CAAP;;IAAW,IAAG,KAAKkH,kBAAR,EAA2B;MAACzG,CAAC,GAAC,KAAKyG,kBAAL,CAAwByH,gBAAxB,CAAyCtO,CAAC,CAAC,CAAD,CAA1C,EAA8CI,CAA9C,CAAF;;MAAmD,MAAMR,CAAC,GAAC,KAAKiH,kBAAL,CAAwByH,gBAAxB,CAAyCtO,CAAC,CAAC,CAAD,CAA1C,EAA8CL,CAAC,CAAC,CAAD,CAA/C,CAAR;;MAA4DS,CAAC,GAACR,CAAF,KAAMQ,CAAC,GAACR,CAAC,IAAED,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAR,CAAT;IAAuB;;IAAAG,CAAC,CAACyO,QAAF,CAAW3O,CAAX,EAAagD,CAAC,CAACjD,CAAD,CAAD,GAAKM,CAAlB,EAAoBkD,CAAC,CAACxD,CAAD,CAAD,GAAKO,CAAzB,GAA4BJ,CAAC,CAAC0O,SAAF,CAAY5O,CAAZ,EAAc,CAACQ,CAAC,GAACJ,CAAC,CAAC,CAAD,CAAJ,IAASC,CAAvB,EAAyB,CAACN,CAAC,CAAC,CAAD,CAAD,GAAKK,CAAC,CAAC,CAAD,CAAP,IAAYE,CAArC,CAA5B;EAAoE;;EAAAiO,qBAAqB,CAACxO,CAAD,EAAGC,CAAH,EAAK;IAACA,CAAC,CAAC2O,QAAF,CAAW5O,CAAX,EAAa,CAAC,CAAd,EAAgB,CAAC,CAAjB,GAAoBC,CAAC,CAAC4O,SAAF,CAAY7O,CAAZ,EAAc,CAAC,CAAf,EAAiB,CAAC,CAAlB,CAApB;EAAyC;;EAAmB,MAAb8O,aAAa,GAAE;IAAC/I,EAAE,IAAG,MAAM,KAAKwC,QAAL,CAAcuG,aAAd,EAAT,EAAuC,KAAKxF,oBAAL,EAAvC,EAAmE,KAAKoD,OAAL,EAArE;EAAoF;;EAAApC,wBAAwB,CAACtK,CAAD,EAAG;IAAC,MAAMC,CAAC,GAACF,CAAC,CAACC,CAAC,CAAC+O,IAAF,GAAO,KAAK1H,kBAAb,CAAT;;IAA0C,CAACpH,CAAC,IAAE,KAAK4H,OAAL,CAAaL,IAAb,CAAkBgC,MAAlB,CAAyBC,UAAzB,CAAoCuF,iBAAvC,IAA0DnO,CAAC,CAAC,KAAKoO,mBAAN,CAA3D,IAAuF,KAAKlI,kBAA5F,IAAgH,KAAKC,yBAAtH,MAAmJ,KAAKuB,QAAL,CAAc2G,eAAd,CAA8B;MAACC,EAAE,EAAClP,CAAJ;MAAMmP,UAAU,EAAC,KAAKH,mBAAtB;MAA0CtC,MAAM,EAAC,KAAKnF,IAAL,CAAUQ,KAAV,CAAgB2E;IAAjE,CAA9B,MAA0G,KAAK3F,yBAAL,GAA+B,CAAC,CAA1I,GAA6I,KAAKK,kBAAL,GAAwBrH,CAAC,CAAC+O,IAA1T;EAAgU;;EAAAzF,oBAAoB,GAAE;IAAC,KAAKf,QAAL,CAAc8B,WAAd,IAA2B,KAAKvD,eAAL,GAAqB,CAAC,CAAtB,EAAwB,KAAKC,kBAAL,GAAwB,CAAC,CAA5E,IAA+E,KAAKkD,iBAAL,EAA/E;EAAwG;;EAAAoF,wBAAwB,CAACrP,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;IAAC,MAAMC,CAAC,GAAC,KAAKkH,IAAL,CAAU8H,uBAAV,CAAkCC,8BAAlC,CAAiEvP,CAAjE,EAAmEwP,EAAnE,EAAsEvP,CAAtE,EAAwEE,CAAxE,CAAR;IAAmF,IAAGY,CAAC,CAACT,CAAD,CAAJ,EAAQ,OAAM,CAAC,CAAP;IAAS,MAAMC,CAAC,GAACD,CAAC,CAACmP,MAAV;IAAA,MAAiBhP,CAAC,GAACqB,CAAC,CAAC4N,EAAD,EAAIpP,CAAC,CAACmP,MAAN,EAAanP,CAAC,CAACqP,SAAf,CAApB;IAA8C,OAAO,KAAK9G,kBAAL,CAAwB+G,KAAxB,CAA8BrP,CAA9B,EAAgCE,CAAhC,EAAkCT,CAAlC,GAAqC,KAAK6I,kBAAL,CAAwBgH,SAAxB,CAAkC,EAAlC,EAAqC,IAArC,CAArC,EAAgF,KAAKrI,IAAL,CAAUsI,cAAV,CAAyBD,SAAzB,CAAmC,KAAKhH,kBAAxC,EAA2D,IAA3D,EAAgEtI,CAAhE,EAAkEE,CAAlE,CAAhF,EAAqJ,KAAKoI,kBAAL,CAAwBkH,OAAxB,CAAgCC,GAAhC,CAAoCC,oBAApC,CAAyD5P,CAAzD,CAA5J;EAAwN;;EAAA6P,gCAAgC,CAAClQ,CAAD,EAAGC,CAAH,EAAK;IAAC,IAAIE,CAAC,GAAC,EAAN;IAAS,MAAMG,CAAC,GAAC,GAAR;IAAA,MAAYC,CAAC,GAAC,KAAKiH,IAAL,CAAU2I,kBAAV,CAA6BC,WAA7B,CAAyCpQ,CAAC,CAACqQ,GAA3C,CAAd;IAAA,MAA8D1P,CAAC,GAAC,KAAK6G,IAAL,CAAUqC,gBAAV,CAA2BE,uBAA3F;IAAA,MAAmHlJ,CAAC,GAAC,IAArH;IAAA,MAA0HE,CAAC,GAACN,CAAC,CAACE,CAAC,CAAC2P,wBAAH,EAA4BtQ,CAAC,CAACuQ,WAAF,GAAc,CAAC,CAAD,GAAG,CAAjB,GAAmBhQ,CAAC,GAACM,CAAjD,EAAmDb,CAAC,CAACuQ,WAAF,GAAchQ,CAAC,GAACM,CAAhB,GAAkB,IAAE,CAAvE,CAA7H;IAAA,MAAuMI,CAAC,GAACjB,CAAC,CAACuQ,WAA3M;;IAAuN,IAAG,aAAW,KAAK/I,IAAL,CAAUsB,WAAxB,EAAoC;MAAC,MAAM7I,CAAC,GAACyP,EAAR;MAAWxL,CAAC,CAACC,CAAC,CAACC,CAAD,EAAGvB,CAAC,CAAC,KAAK2E,IAAL,CAAUoB,gBAAX,CAAD,CAA8B4H,MAA9B,GAAqCzP,CAAxC,CAAF,EAA6CkD,CAAC,CAACjE,CAAC,CAACqQ,GAAH,EAAOrQ,CAAC,CAACyQ,WAAT,CAA9C,EAAoExQ,CAApE,CAAD,EAAwE+B,CAAC,CAAC/B,CAAD,EAAGA,CAAH,EAAKD,CAAC,CAACqQ,GAAP,CAAzE;MAAqF,MAAM9P,CAAC,GAACF,CAAC,CAACqQ,SAAF,CAAYpM,CAAC,CAACtE,CAAC,CAACyQ,WAAH,EAAexQ,CAAf,EAAiBD,CAAC,CAAC2Q,SAAnB,CAAb,IAA4C3Q,CAAC,CAAC4Q,IAA9C,GAAmD,EAA3D;MAAA,MAA8DnQ,CAAC,GAACF,CAAC,IAAE,CAAH,IAAMA,CAAC,IAAE,CAAT,GAAW,EAAX,GAAcD,CAA9E;MAAgFH,CAAC,GAACc,CAAC,GAACR,CAAC,GAACF,CAAH,GAAKA,CAAC,GAACE,CAAC,IAAE,IAAEF,CAAJ,CAAX;IAAkB,CAAvO,MAA2O;MAAC,MAAMN,CAAC,GAAC,KAAG4Q,IAAI,CAACC,EAAR,GAAWD,IAAI,CAACE,IAAL,CAAU,CAAC/Q,CAAC,CAACyQ,WAAF,CAAc,CAAd,CAAX,CAAnB;MAAA,MAAgDpQ,CAAC,GAACwQ,IAAI,CAACG,GAAL,CAAS/Q,CAAT,CAAlD;MAAA,MAA8DM,CAAC,GAACkC,CAAC,CAAC,CAAD,EAAGpC,CAAH,EAAK,CAAL,EAAO,CAAP,CAAjE;MAAA,MAA2EM,CAAC,GAAC2B,CAAC,CAAC/B,CAAD,EAAGA,CAAH,EAAKP,CAAC,CAACiR,gBAAP,CAAD,CAA0B,CAA1B,CAA7E;MAAA,MAA0GpQ,CAAC,GAACJ,CAAC,CAAC,KAAG,KAAGE,CAAP,EAAS,CAAT,EAAW,CAAX,CAA7G;MAA2HR,CAAC,GAAC,MAAIU,CAAJ,IAAO,MAAIA,CAAX,GAAa,EAAb,GAAgBI,CAAC,GAACJ,CAAC,GAACP,CAAH,GAAK,IAAE,CAAC,IAAEO,CAAH,IAAMP,CAAhC;IAAkC;;IAAA,OAAM,CAAC,CAAC,KAAK+O,wBAAL,CAA8BrP,CAA9B,EAAgC,EAAhC,EAAmCG,CAAnC,EAAqCF,CAArC,CAAF,IAA2CiC,CAAC,CAACjC,CAAD,EAAGD,CAAC,CAACqQ,GAAL,CAAD,GAAW1P,CAAC,CAACuQ,QAAF,GAAWvQ,CAAC,CAACuQ,QAAzE;EAAkF;;EAAApE,sBAAsB,CAAC9M,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAME,CAAC,GAAC,KAAKmH,IAAL,CAAUqC,gBAAV,CAA2BE,uBAA3B,CAAmDoH,cAA3D;IAAA,MAA0E7Q,CAAC,GAAC+B,CAAC,EAA7E;IAAgF,KAAK6N,gCAAL,CAAsClQ,CAAtC,EAAwCM,CAAxC,KAA4C6B,CAAC,CAAC7B,CAAD,EAAGD,CAAH,CAA7C;IAAmD,MAAME,CAAC,GAACsQ,IAAI,CAACO,GAAL,CAAS,EAAT,EAAYhP,CAAC,CAACpC,CAAC,CAACqQ,GAAH,EAAO/P,CAAP,CAAb,CAAR;IAAA,MAAgCG,CAAC,GAACiE,CAAC,CAAC,KAAK8C,IAAL,CAAU2I,kBAAX,EAA8B9P,CAA9B,EAAgCL,CAAC,CAACqQ,GAAlC,CAAnC;IAAA,MAA0ElP,CAAC,GAAC0P,IAAI,CAACC,EAAL,GAAQ,CAAR,GAAUD,IAAI,CAACQ,GAAL,CAAS5Q,CAAC,GAACoQ,IAAI,CAACC,EAAL,GAAQ,CAAnB,CAAtF;IAA4GnM,CAAC,CAAC2M,mBAAF,IAAuBvQ,CAAC,CAACoF,EAAD,CAAD,KAAQA,EAAE,GAAC,IAAItB,CAAJ,CAAM,KAAK2C,IAAL,CAAUC,QAAhB,EAAyB,KAAzB,CAAX,GAA4CtB,EAAE,CAACoL,IAAH,CAAQjR,CAAR,EAAU,KAAKkG,SAAf,CAAnE,IAA8F3F,CAAC,CAACsF,EAAD,CAAD,IAAOA,EAAE,CAACgF,IAAH,EAArG,EAA+G,KAAK1E,wBAAL,IAA+B9D,CAAC,CAACrC,CAAD,EAAG,KAAKkG,SAAR,EAAkBlG,CAAlB,EAAoB,KAAKiG,iBAAzB,CAA/I;;IAA2L,MAAMlF,CAAC,GAAC,KAAKwG,OAAL,CAAagG,MAArB;IAAA,MAA4BtM,CAAC,GAAC,CAAC,KAAKwG,YAAN,IAAoBlH,CAAC,CAAC,KAAK0F,iBAAN,CAArB,IAA+C,KAAKA,iBAAL,CAAuB4B,YAApG;IAAA,MAAiHpI,CAAC,GAACwB,CAAC,IAAEV,CAAC,CAAC,KAAK0F,iBAAN,CAAJ,GAA6B,IAAE1D,CAAC,CAAC,KAAK0D,iBAAN,CAAD,CAA0B8B,eAAzD,GAAyE,CAA5L;IAAA,MAA8L3G,CAAC,GAAC1B,CAAC,CAACwR,mBAAF,GAAsBjR,CAAtB,GAAwBR,CAAxN;;IAA0NI,CAAC,CAACkN,gBAAF,GAAmB3L,CAAC,GAAC,KAAKwG,gBAA1B;IAA2C,IAAItG,CAAC,GAAC3B,CAAC,GAACyB,CAAF,GAAI,CAAV;IAAA,IAAYI,CAAC,GAAC,CAAC,CAAf;IAAA,IAAiBE,CAAC,GAACT,CAAC,GAAC,EAAD,GAAI,IAAE,CAA1B;IAA4B,KAAKwG,YAAL,IAAmBlH,CAAC,CAACQ,CAAD,CAApB,IAAyBR,CAAC,CAAC,KAAK0F,iBAAN,CAA1B,KAAqD,KAAKA,iBAAL,CAAuBgF,aAAvB,IAAsC3J,CAAC,IAAEiP,IAAI,CAACY,GAAL,CAASjN,CAAC,CAAClE,CAAC,CAAC,CAAD,CAAF,CAAV,CAAH,EAAqB0B,CAAC,GAACX,CAAC,CAAC,CAAD,CAA9D,KAAoES,CAAC,GAAC,CAAC,CAAH,EAAKF,CAAC,IAAEiB,CAAC,CAAC,KAAK0D,iBAAN,CAAD,CAA0B8B,eAAlC,EAAkDrG,CAAC,GAAC,EAAxH,GAA4HJ,CAAC,IAAEI,CAAH,KAAOJ,CAAC,GAACI,CAAF,EAAI1B,CAAC,CAAC,CAAD,CAAD,GAAK,CAAT,EAAW,KAAKiG,iBAAL,CAAuBgF,aAAvB,KAAuCjL,CAAC,CAAC,CAAD,CAAD,GAAK,CAA5C,CAAlB,CAAjL;IAAoP,IAAI4B,CAAC,GAAC,CAAN;IAAQJ,CAAC,KAAGI,CAAC,GAAC,IAAE2O,IAAI,CAACO,GAAL,CAAS,EAAT,EAAYP,IAAI,CAACY,GAAL,CAASZ,IAAI,CAACQ,GAAL,CAAS1Q,CAAC,CAACL,CAAC,CAAC,CAAD,CAAF,CAAV,CAAT,CAAZ,CAAJ,EAA6CsB,CAAC,GAACM,CAAF,GAAI,GAAJ,KAAUA,CAAC,GAAC,MAAIN,CAAhB,CAA7C,EAAgEzB,CAAC,CAACkN,gBAAF,IAAoBnL,CAAvF,CAAD;IAA2F,MAAMI,CAAC,GAACuO,IAAI,CAACa,GAAL,CAAS,CAAT,IAAY,EAApB;IAAuB9P,CAAC,GAACiP,IAAI,CAACc,GAAL,CAASd,IAAI,CAACe,KAAL,CAAWf,IAAI,CAACa,GAAL,CAAS9P,CAAT,IAAYU,CAAvB,IAA0BA,CAAnC,CAAF;IAAwC,MAAME,CAAC,GAACZ,CAAC,GAACM,CAAV;IAAA,MAAYO,CAAC,GAAC,EAAd;IAAA,MAAiBM,CAAC,GAAC,KAAG9C,CAAH,IAAMwC,CAAC,GAACD,CAAR,CAAnB;IAAA,MAA8Ba,CAAC,GAAC,KAAGpD,CAAH,IAAMwC,CAAC,GAACb,CAAR,CAAhC;IAA2CtB,CAAC,CAAC,CAAD,CAAD,GAAKuQ,IAAI,CAACe,KAAL,CAAWtR,CAAC,CAAC,CAAD,CAAD,GAAKyC,CAAhB,IAAmBA,CAAxB,EAA0BzC,CAAC,CAAC,CAAD,CAAD,GAAKuQ,IAAI,CAACe,KAAL,CAAWtR,CAAC,CAAC,CAAD,CAAD,GAAK+C,CAAhB,IAAmBA,CAAlD;IAAoD,MAAMG,CAAC,GAACrD,CAAC,CAAC6M,KAAV;IAAgBxJ,CAAC,CAAC,CAAD,CAAD,GAAKlD,CAAC,CAAC,CAAD,CAAD,GAAKkC,CAAV,EAAYgB,CAAC,CAAC,CAAD,CAAD,GAAKlD,CAAC,CAAC,CAAD,CAAD,GAAKsB,CAAtB,EAAwB4B,CAAC,CAAC,CAAD,CAAD,GAAKlD,CAAC,CAAC,CAAD,CAAD,GAAKkC,CAAlC,EAAoCgB,CAAC,CAAC,CAAD,CAAD,GAAKlD,CAAC,CAAC,CAAD,CAAD,GAAKsB,CAA9C,EAAgD,KAAKmG,YAAL,IAAmB,KAAK8J,uBAAL,CAA6BrO,CAA7B,EAA+B,IAAE,CAAjC,EAAmCxB,CAAnC,CAAnE;IAAyG,MAAM4B,CAAC,GAACzD,CAAC,CAAC8M,KAAV;IAAgB,IAAG,IAAEzK,CAAF,GAAIS,CAAC,CAAC5B,CAAD,CAAR,EAAY8B,CAAC,CAACS,CAAD,EAAG3C,CAAC,CAACI,CAAD,CAAJ,CAAD,CAAZ,KAA2B,IAAGF,CAAC,IAAE,MAAI0P,IAAI,CAACC,EAAf,EAAkBlN,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAC,CAAC,CAAD,CAAD,GAAKhB,CAAV,EAAYoB,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAC,CAAC,CAAD,CAAD,GAAK5B,CAAtB,EAAwBgC,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAC,CAAC,CAAD,CAAD,GAAKhB,CAAlC,EAAoCoB,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAC,CAAC,CAAD,CAAD,GAAK5B,CAA9C,CAAlB,KAAsE;MAACe,CAAC,CAAC3C,CAAC,CAACqQ,GAAH,EAAO,KAAK7J,SAAZ,EAAsBkJ,EAAtB,EAAyB,KAAKnJ,iBAA9B,CAAD,EAAkD1E,CAAC,CAACiQ,EAAD,EAAIxR,CAAJ,EAAMoP,EAAN,CAAnD;MAA6D,IAAIzP,CAAC,GAAC,CAAC4Q,IAAI,CAACkB,KAAL,CAAWD,EAAE,CAAC,CAAD,CAAb,EAAiBA,EAAE,CAAC,CAAD,CAAnB,CAAD,GAAyB,OAAKjB,IAAI,CAACC,EAAzC;MAA4C7Q,CAAC,GAAC,CAAF,KAAMA,CAAC,IAAE,IAAE4Q,IAAI,CAACC,EAAhB;MAAoB,MAAM3Q,CAAC,GAAC0Q,IAAI,CAACmB,KAAL,CAAW/R,CAAC,IAAE,MAAI4Q,IAAI,CAACC,EAAX,CAAZ,CAAR;MAAoC7O,CAAC,CAAC6P,EAAD,EAAI5L,EAAE,CAAC/F,CAAD,CAAN,EAAU,IAAEyB,CAAZ,CAAD,EAAgBkQ,EAAE,CAAC,CAAD,CAAF,IAAO5P,CAAvB,EAAyB4P,EAAE,CAAC,CAAD,CAAF,IAAO5P,CAAhC,EAAkCK,CAAC,CAACqB,CAAD,EAAGJ,CAAH,EAAKsO,EAAL,CAAnC;IAA4C;IAAA,IAAG,KAAK/J,YAAR,EAAqBnE,CAAC,CAAC,CAAD,CAAD,GAAK,KAAKsD,kBAAL,CAAwB1G,KAAxB,CAA8BoD,CAAC,CAAC,CAAD,CAA/B,CAAL,EAAyCA,CAAC,CAAC,CAAD,CAAD,GAAK,KAAKsD,kBAAL,CAAwB1G,KAAxB,CAA8BoD,CAAC,CAAC,CAAD,CAA/B,CAA9C,EAAkFA,CAAC,CAAC,CAAD,CAAD,GAAKiN,IAAI,CAACO,GAAL,CAASxN,CAAC,CAAC,CAAD,CAAV,EAAc,CAAC5B,CAAf,CAAvF,EAAyG4B,CAAC,CAAC,CAAD,CAAD,GAAKiN,IAAI,CAACb,GAAL,CAASpM,CAAC,CAAC,CAAD,CAAV,EAAc5B,CAAd,CAA9G,CAArB,KAAwJ;MAAC,MAAMhC,CAAC,GAAC+B,CAAC,CAACyB,CAAD,EAAGnC,CAAH,EAAK+M,EAAL,CAAT;MAAA,MAAkBnO,CAAC,GAAC8B,CAAC,CAAC6B,CAAD,EAAGvC,CAAH,EAAK4Q,EAAL,CAArB;MAA8BvO,CAAC,CAAC1D,CAAD,EAAGC,CAAH,CAAD,KAAS2D,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,EAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAzB;IAA8B;IAAA,MAAME,CAAC,GAAC+M,IAAI,CAACQ,GAAL,CAAS7N,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAf,IAAoBvD,CAA5B;IAA8BE,CAAC,CAACkN,gBAAF,GAAmBwD,IAAI,CAACO,GAAL,CAASjR,CAAC,CAACkN,gBAAX,EAA4BvJ,CAA5B,CAAnB,EAAkD3D,CAAC,CAACiN,oBAAF,GAAuBjN,CAAC,CAACkN,gBAAF,GAAmBvJ,CAA5F;EAA8F;;EAAAyG,oBAAoB,CAACvK,CAAD,EAAGC,CAAH,EAAKE,CAAC,GAAC,KAAKqH,IAAL,CAAUQ,KAAV,CAAgB2E,MAAvB,EAA8B;IAAC,IAAG,MAAI3M,CAAC,CAAC0H,MAAN,IAAc,CAAC,KAAKX,kBAAN,IAA0B,CAAC,KAAKC,yBAAjD,EAA2E;IAAO,MAAM3G,CAAC,GAAC,KAAK0G,kBAAb;IAAgC,KAAKA,kBAAL,GAAwB,CAAC,CAAzB,EAA2B,KAAKC,yBAAL,GAA+B,CAAC,CAA3D;;IAA6D,MAAM1G,CAAC,GAAC,KAAK4R,YAAL,CAAkBlS,CAAC,CAAC+E,CAAC,CAACoI,KAAH,CAAnB,EAA6BhN,CAA7B,CAAR;IAAA,MAAwCI,CAAC,GAAC,KAAK2R,YAAL,CAAkBlS,CAAC,CAAC+E,CAAC,CAACuI,KAAH,CAAnB,EAA6BnN,CAA7B,CAA1C;;IAA0EG,CAAC,KAAGiF,EAAE,CAAC4M,OAAP,IAAgB5R,CAAC,KAAGgF,EAAE,CAAC4M,OAAvB,IAAgC,KAAKtK,OAAL,CAAa6F,uBAAb,CAAqCrI,CAAC,CAACoF,MAAvC,CAAhC,EAA+E,KAAKC,gCAAL,EAA/E,EAAuH,KAAKd,mBAAL,EAAvH,EAAkJvJ,CAAC,IAAE,KAAKwH,OAAL,CAAauK,aAAb,CAA2BnS,CAA3B,GAA8BA,CAAC,KAAGoF,CAAC,CAACoF,MAAN,IAAc,KAAK5C,OAAL,CAAawK,aAAb,EAA9C,IAA4E,KAAKxK,OAAL,CAAauK,aAAb,CAA2B/M,CAAC,CAAC2F,UAA7B,CAA/N;EAAwQ;;EAAAkH,YAAY,CAAClS,CAAD,EAAGC,CAAH,EAAK;IAAC,OAAO,KAAKiH,kBAAL,GAAwBlH,CAAC,CAACsS,0BAAF,CAA6B,KAAKpL,kBAAlC,CAAxB,GAA8ElH,CAAC,CAACuS,wBAAF,EAA9E,EAA2GvS,CAAC,CAACwS,IAAF,CAAO,KAAKjK,QAAZ,EAAqBtI,CAAC,CAACiK,UAAvB,CAAlH;EAAqJ;;EAAAQ,gCAAgC,GAAE;IAAC,IAAG,KAAKzD,uBAAL,GAA6B,CAAC,CAA9B,EAAgC,KAAKsB,QAAL,CAAc8B,WAAjD,EAA6D;MAAC,MAAMrK,CAAC,GAACyS,WAAW,CAACC,GAAZ,EAAR;MAA0B,KAAKzL,uBAAL,GAA6B,KAAKsB,QAAL,CAAcoK,+BAAd,CAA8C3S,CAA9C,CAA7B;IAA8E;EAAC;;EAAAsO,kBAAkB,CAACtO,CAAD,EAAGC,CAAH,EAAK;IAAC,OAAM,CAACc,CAAC,CAACf,CAAD,CAAF,KAAQ,KAAKkH,kBAAL,GAAwB,CAAC,KAAKA,kBAAL,CAAwBzD,QAAxB,CAAiCxD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CD,CAAC,CAAC,CAAD,CAA5C,KAAkD,KAAKkH,kBAAL,CAAwBzD,QAAxB,CAAiCxD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CD,CAAC,CAAC,CAAD,CAA5C,CAAlD,IAAoG,KAAKkH,kBAAL,CAAwBzD,QAAxB,CAAiCzD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CC,CAAC,CAAC,CAAD,CAA5C,CAArG,KAAwJ,EAAED,CAAC,CAAC,CAAD,CAAD,GAAKC,CAAC,CAAC,CAAD,CAAN,IAAWD,CAAC,CAAC,CAAD,CAAD,GAAKC,CAAC,CAAC,CAAD,CAAnB,CAAhL,GAAwM2D,CAAC,CAAC5D,CAAD,EAAGC,CAAH,CAAjN,CAAN;EAA8N;;EAAAoO,eAAe,CAACrO,CAAD,EAAGC,CAAH,EAAK;IAAC,OAAM,CAACc,CAAC,CAACd,CAAD,CAAF,KAAQ,KAAKiH,kBAAL,GAAwB,KAAKA,kBAAL,CAAwBzD,QAAxB,CAAiCzD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CC,CAAC,CAAC,CAAD,CAA5C,KAAkD,KAAKiH,kBAAL,CAAwBzD,QAAxB,CAAiCzD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CC,CAAC,CAAC,CAAD,CAA5C,CAAlD,IAAoGA,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAA1G,IAA+GC,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAA7I,GAAiJ0D,CAAC,CAAC1D,CAAD,EAAGC,CAAH,CAA1J,CAAN;EAAuK;;EAAAyO,gBAAgB,CAAC1O,CAAD,EAAGC,CAAH,EAAK;IAAC,IAAG,KAAKiH,kBAAR,EAA2B,OAAO,KAAKA,kBAAL,CAAwBzD,QAAxB,CAAiCxD,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CD,CAAC,CAACiC,CAA7C,KAAiDjC,CAAC,CAAC4B,CAAF,IAAK3B,CAAC,CAAC,CAAD,CAAvD,IAA4DD,CAAC,CAAC4B,CAAF,IAAK3B,CAAC,CAAC,CAAD,CAAzE;IAA6E,MAAME,CAAC,GAACH,CAAC,CAACiC,CAAV;IAAA,MAAY5B,CAAC,GAACL,CAAC,CAAC4B,CAAhB;IAAkB,OAAOzB,CAAC,GAACF,CAAC,CAAC,CAAD,CAAH,IAAQE,CAAC,GAACF,CAAC,CAAC,CAAD,CAAX,IAAgBI,CAAC,GAACJ,CAAC,CAAC,CAAD,CAAnB,IAAwBI,CAAC,GAACJ,CAAC,CAAC,CAAD,CAAlC;EAAsC;;EAAA4R,uBAAuB,CAAC7R,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAIE,CAAC,GAAC,CAAN;IAAA,IAAQC,CAAC,GAAC,CAAV;IAAYN,CAAC,CAAC,CAAD,CAAD,GAAK,CAACC,CAAN,GAAQI,CAAC,GAACL,CAAC,CAAC,CAAD,CAAD,GAAKC,CAAf,GAAiBD,CAAC,CAAC,CAAD,CAAD,GAAKC,CAAL,KAASI,CAAC,GAACJ,CAAC,GAACD,CAAC,CAAC,CAAD,CAAd,CAAjB,EAAoCA,CAAC,CAAC,CAAD,CAAD,GAAK,CAACG,CAAN,GAAQG,CAAC,GAACN,CAAC,CAAC,CAAD,CAAD,GAAKG,CAAf,GAAiBH,CAAC,CAAC,CAAD,CAAD,GAAKG,CAAL,KAASG,CAAC,GAACH,CAAC,GAACH,CAAC,CAAC,CAAD,CAAd,CAArD,EAAwE8D,CAAC,CAAC9D,CAAD,EAAGK,CAAH,EAAKC,CAAL,CAAzE;EAAiF;;EAAQ,IAAJsS,IAAI,GAAE;IAAC,OAAM;MAACrK,QAAQ,EAAC,KAAKA,QAAf;MAAwBsK,MAAM,EAAC,MAAI,KAAKnG,OAAL;IAAnC,CAAN;EAAyD;;AAA5uY,CAAzB;;AAAuwY,SAASkB,EAAT,CAAY5N,CAAZ,EAAcC,CAAd,EAAgB;EAAC,MAAME,CAAC,GAAC,IAAR;EAAA,MAAaE,CAAC,GAACsE,CAAC,CAACmO,2BAAF,GAA8B,CAA9B,GAAgC3S,CAAC,GAAC0Q,IAAI,CAACO,GAAL,CAASpR,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAf,EAAmBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAzB,EAA6BC,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAnC,EAAuCA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAA7C,CAAjD;EAAmG,OAAO4Q,IAAI,CAACQ,GAAL,CAASpR,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAAf,KAAqBK,CAArB,IAAwBwQ,IAAI,CAACQ,GAAL,CAASpR,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAAf,KAAqBK,CAA7C,IAAgDwQ,IAAI,CAACQ,GAAL,CAASpR,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAAf,KAAqBK,CAArE,IAAwEwQ,IAAI,CAACQ,GAAL,CAASpR,CAAC,CAAC,CAAD,CAAD,GAAKD,CAAC,CAAC,CAAD,CAAf,KAAqBK,CAApG;AAAsG;;AAAAL,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,mBAApB,EAAwC,KAAK,CAA7C,CAAD,EAAiD/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACsR,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB5M,EAAE,CAAC2M,SAAvB,EAAiC,SAAjC,EAA2C,IAA3C,CAAlD,EAAmG/S,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,iBAApB,EAAsC,KAAK,CAA3C,CAApG,EAAkJ/S,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,iBAApB,EAAsC,KAAK,CAA3C,CAAnJ,EAAiM/S,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,cAApB,EAAmC,IAAnC,CAAlM,EAA2O/S,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,kBAApB,EAAuC,IAAvC,CAA5O,EAAyR/S,CAAC,CAAC,CAAC0B,CAAC,EAAF,CAAD,EAAO0E,EAAE,CAAC2M,SAAV,EAAoB,UAApB,EAA+B,KAAK,CAApC,CAA1R,EAAiU/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACuR,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB7M,EAAE,CAAC2M,SAA5B,EAAsC,SAAtC,EAAgD,KAAK,CAArD,CAAlU,EAA0X/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACsR,QAAQ,EAAC,CAAC,CAAX;EAAaE,OAAO,EAAC;AAArB,CAAD,CAAF,CAAD,EAAgD9M,EAAE,CAAC2M,SAAnD,EAA6D,WAA7D,EAAyE,KAAK,CAA9E,CAA3X,EAA4c/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACsR,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB5M,EAAE,CAAC2M,SAAvB,EAAiC,UAAjC,EAA4C,IAA5C,CAA7c,EAA+f/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACyR,IAAI,EAACC;AAAN,CAAD,CAAF,CAAD,EAAqBhN,EAAE,CAAC2M,SAAxB,EAAkC,eAAlC,EAAkD,IAAlD,CAAhgB,EAAwjB/S,CAAC,CAAC,CAAC0B,CAAC,CAAC;EAACyR,IAAI,EAACC;AAAN,CAAD,CAAF,CAAD,EAAqBhN,EAAE,CAAC2M,SAAxB,EAAkC,iBAAlC,EAAoD,IAApD,CAAzjB,EAAmnB3M,EAAE,GAACpG,CAAC,CAAC,CAAC4B,CAAC,CAAC,sCAAD,CAAF,CAAD,EAA6CwE,EAA7C,CAAvnB;;AAAwqB,MAAM0L,EAAE,GAACtP,CAAC,EAAV;AAAA,MAAakN,EAAE,GAACrN,CAAC,EAAjB;AAAA,MAAoB0K,EAAE,GAAC;EAACC,KAAK,EAACjK,CAAC,EAAR;EAAWkK,KAAK,EAAClK,CAAC,EAAlB;EAAqBsK,gBAAgB,EAAC,CAAtC;EAAwCD,oBAAoB,EAAC;AAA7D,CAAvB;AAAA,MAAuFgB,EAAE,GAACrL,CAAC,EAA3F;AAAA,MAA8FkP,EAAE,GAAClP,CAAC,EAAlG;AAAA,MAAqGyM,EAAE,GAACzL,CAAC,EAAzG;;AAA4G,IAAIwJ,EAAJ;AAAO,CAAC,UAASvN,CAAT,EAAW;EAACA,CAAC,CAACA,CAAC,CAAC2N,IAAF,GAAO,CAAR,CAAD,GAAY,MAAZ,EAAmB3N,CAAC,CAACA,CAAC,CAACwN,MAAF,GAAS,CAAV,CAAD,GAAc,QAAjC,EAA0CxN,CAAC,CAACA,CAAC,CAAC+N,aAAF,GAAgB,CAAjB,CAAD,GAAqB,eAA/D;AAA+E,CAA3F,CAA4FR,EAAE,KAAGA,EAAE,GAAC,EAAN,CAA9F,CAAD;AAA0G,SAAOnH,EAAE,IAAIiN,cAAb"},"metadata":{},"sourceType":"module"}