{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { clock as t } from \"../../../core/clock.js\";\nimport { InputHandler as e } from \"../InputHandler.js\";\nimport { DefaultParameters as i } from \"./SingleAndDoubleClick.js\";\nimport { getPointerId as o, manhattanDistance as a } from \"./support.js\";\n\nclass m extends e {\n  constructor(e = i.maximumDoubleClickDelay, o = i.maximumDoubleClickDistance, a = i.maximumDoubleTouchDelay, m = i.maximumDoubleTouchDistance, n = t) {\n    super(!1), this._maximumDoubleClickDelay = e, this._maximumDoubleClickDistance = o, this._maximumDoubleTouchDelay = a, this._maximumDoubleTouchDistance = m, this._clock = n, this._pointerState = new Map(), this._immediateDoubleClick = this.registerOutgoing(\"immediate-double-click\"), this.registerIncoming(\"pointer-down\", this._handlePointerDown.bind(this)), this.registerIncoming(\"pointer-up\", this._handlePointerUp.bind(this));\n  }\n\n  onUninstall() {\n    this._pointerState.forEach(t => {\n      t.immediateDoubleClick && t.immediateDoubleClick.timeoutHandle.remove();\n    }), super.onUninstall();\n  }\n\n  _handlePointerDown(t) {\n    const e = t.data,\n          i = o(e);\n\n    if (!this._pointerState.has(i)) {\n      const t = {\n        downButton: e.native.button,\n        immediateDoubleClick: null\n      };\n      this._pointerState.set(i, t), this.startCapturingPointer(e.native);\n    }\n  }\n\n  _handlePointerUp(t) {\n    const e = t.data,\n          i = o(e),\n          m = this._pointerState.get(i);\n\n    if (m && m.downButton === e.native.button) {\n      const i = m.immediateDoubleClick;\n\n      if (i) {\n        i.timeoutHandle.remove();\n        const o = \"touch\" === t.data.native.pointerType ? this._maximumDoubleTouchDistance : this._maximumDoubleClickDistance;\n        a(i, t.data) > o ? this._startImmediateDoubleClick(t, m) : (this._immediateDoubleClick.emit(t.data, void 0, i.modifiers), this._removeState(e));\n      } else this._startImmediateDoubleClick(t, m);\n    }\n  }\n\n  _startImmediateDoubleClick(t, e) {\n    const i = \"touch\" === t.data.native.pointerType ? this._maximumDoubleTouchDelay : this._maximumDoubleClickDelay;\n    e.immediateDoubleClick = {\n      x: t.data.x,\n      y: t.data.y,\n      modifiers: t.modifiers,\n      timeoutHandle: this._clock.setTimeout(() => this._removeState(t.data), i)\n    };\n  }\n\n  _removeState(t) {\n    const e = o(t);\n    this._pointerState.delete(e), this.stopCapturingPointer(t.native), this.refreshHasPendingInputs();\n  }\n\n}\n\nexport { m as ImmediateDoubleClick };","map":{"version":3,"names":["clock","t","InputHandler","e","DefaultParameters","i","getPointerId","o","manhattanDistance","a","m","constructor","maximumDoubleClickDelay","maximumDoubleClickDistance","maximumDoubleTouchDelay","maximumDoubleTouchDistance","n","_maximumDoubleClickDelay","_maximumDoubleClickDistance","_maximumDoubleTouchDelay","_maximumDoubleTouchDistance","_clock","_pointerState","Map","_immediateDoubleClick","registerOutgoing","registerIncoming","_handlePointerDown","bind","_handlePointerUp","onUninstall","forEach","immediateDoubleClick","timeoutHandle","remove","data","has","downButton","native","button","set","startCapturingPointer","get","pointerType","_startImmediateDoubleClick","emit","modifiers","_removeState","x","y","setTimeout","delete","stopCapturingPointer","refreshHasPendingInputs","ImmediateDoubleClick"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/input/recognizers/ImmediateDoubleClick.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{clock as t}from\"../../../core/clock.js\";import{InputHandler as e}from\"../InputHandler.js\";import{DefaultParameters as i}from\"./SingleAndDoubleClick.js\";import{getPointerId as o,manhattanDistance as a}from\"./support.js\";class m extends e{constructor(e=i.maximumDoubleClickDelay,o=i.maximumDoubleClickDistance,a=i.maximumDoubleTouchDelay,m=i.maximumDoubleTouchDistance,n=t){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=o,this._maximumDoubleTouchDelay=a,this._maximumDoubleTouchDistance=m,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing(\"immediate-double-click\"),this.registerIncoming(\"pointer-down\",this._handlePointerDown.bind(this)),this.registerIncoming(\"pointer-up\",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=o(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native)}}_handlePointerUp(t){const e=t.data,i=o(e),m=this._pointerState.get(i);if(m&&m.downButton===e.native.button){const i=m.immediateDoubleClick;if(i){i.timeoutHandle.remove();const o=\"touch\"===t.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;a(i,t.data)>o?this._startImmediateDoubleClick(t,m):(this._immediateDoubleClick.emit(t.data,void 0,i.modifiers),this._removeState(e))}else this._startImmediateDoubleClick(t,m)}}_startImmediateDoubleClick(t,e){const i=\"touch\"===t.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_removeState(t){const e=o(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}export{m as ImmediateDoubleClick};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}