{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { s as t } from \"../../../chunks/vec2.js\";\nimport { a as r } from \"../../../chunks/vec2f64.js\";\nimport { defaults as o } from \"./Settings.js\";\nimport { SnappingAlgorithm as i } from \"./SnappingAlgorithm.js\";\nimport { squareDistance as s } from \"./snappingUtils.js\";\nimport { ParallelLineSnappingCandidate as n } from \"./candidates/ParallelLineSnappingCandidate.js\";\nimport { anyMapPointToScreenPoint as l } from \"../support/viewUtils.js\";\nimport { projectPointToLine as a } from \"../../support/geometry2dUtils.js\";\n\nclass c extends i {\n  constructor() {\n    super(...arguments), this._tmpProjection = r();\n  }\n\n  snapNewVertex(e, t) {\n    const r = t.editGeometryOperations.data.components[0],\n          o = r.edges.length,\n          i = r.vertices.length,\n          s = [];\n    if (o < 2) return s;\n    const n = l(e, t.coordinateHelper, t.elevationInfo, this.view),\n          a = r.vertices[i - 1],\n          c = r.vertices[0],\n          h = r.edges[o - 1];\n    let p = h;\n\n    do {\n      this.edgeExceedsShortLineThreshold(p, t) && (this._checkEdgeForParalleLines(p, a.pos, e, n, t, s), this._checkEdgeForParalleLines(p, c.pos, e, n, t, s)), p = p.leftVertex.leftEdge;\n    } while (p && p !== h);\n\n    return s;\n  }\n\n  snapExistingVertex(t, r) {\n    const o = [],\n          i = e(r.vertexHandle),\n          s = i.component;\n    if (s.edges.length < 3) return o;\n    const n = l(t, r.coordinateHelper, r.elevationInfo, this.view),\n          a = i.leftEdge,\n          c = i.rightEdge,\n          h = s.vertices[0],\n          p = s.vertices.length,\n          d = s.vertices[p - 1],\n          g = s.edges[0];\n    let m = g;\n\n    do {\n      m !== a && m !== c && this.edgeExceedsShortLineThreshold(m, r) && (a && this._checkEdgeForParalleLines(m, a.leftVertex.pos, t, n, r, o), c && this._checkEdgeForParalleLines(m, c.rightVertex.pos, t, n, r, o), i === h ? this._checkEdgeForParalleLines(m, d.pos, t, n, r, o) : i === d && this._checkEdgeForParalleLines(m, h.pos, t, n, r, o)), m = m.rightVertex.rightEdge;\n    } while (m && m !== g);\n\n    return o;\n  }\n\n  _checkEdgeForParalleLines(e, r, i, c, h, p) {\n    const d = e.leftVertex.pos,\n          g = e.rightVertex.pos;\n    if (a(this._tmpProjection, r, d, g), t(this._tmpProjection, r) < o.parallelLineThreshold) return;\n    a(this._tmpProjection, i, d, g, r);\n    const {\n      coordinateHelper: m,\n      elevationInfo: f,\n      pointer: v\n    } = h,\n          P = m.fromXYZ(this._tmpProjection, m.getZ(i, 0));\n\n    if (s(c, l(P, m, f, this.view)) < this.squaredProximityTreshold(v)) {\n      if (this._parallelToPreviousCandidate(e, p)) return;\n      p.push(new n({\n        coordinateHelper: m,\n        referenceLine: e,\n        lineStart: r,\n        targetPoint: P,\n        elevationInfo: f\n      }));\n    }\n  }\n\n  _parallelToPreviousCandidate(e, r) {\n    const i = e.leftVertex.pos,\n          s = e.rightVertex.pos;\n\n    for (const n of r) if (a(this._tmpProjection, s, n.constraint.start, n.constraint.end, i), t(this._tmpProjection, s) < o.parallelLineThreshold) return n.addReferenceLine(e), !0;\n\n    return !1;\n  }\n\n}\n\nexport { c as ParallelLineSnapper };","map":{"version":3,"names":["unwrap","e","s","t","a","r","defaults","o","SnappingAlgorithm","i","squareDistance","ParallelLineSnappingCandidate","n","anyMapPointToScreenPoint","l","projectPointToLine","c","constructor","arguments","_tmpProjection","snapNewVertex","editGeometryOperations","data","components","edges","length","vertices","coordinateHelper","elevationInfo","view","h","p","edgeExceedsShortLineThreshold","_checkEdgeForParalleLines","pos","leftVertex","leftEdge","snapExistingVertex","vertexHandle","component","rightEdge","d","g","m","rightVertex","parallelLineThreshold","f","pointer","v","P","fromXYZ","getZ","squaredProximityTreshold","_parallelToPreviousCandidate","push","referenceLine","lineStart","targetPoint","constraint","start","end","addReferenceLine","ParallelLineSnapper"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{s as t}from\"../../../chunks/vec2.js\";import{a as r}from\"../../../chunks/vec2f64.js\";import{defaults as o}from\"./Settings.js\";import{SnappingAlgorithm as i}from\"./SnappingAlgorithm.js\";import{squareDistance as s}from\"./snappingUtils.js\";import{ParallelLineSnappingCandidate as n}from\"./candidates/ParallelLineSnappingCandidate.js\";import{anyMapPointToScreenPoint as l}from\"../support/viewUtils.js\";import{projectPointToLine as a}from\"../../support/geometry2dUtils.js\";class c extends i{constructor(){super(...arguments),this._tmpProjection=r()}snapNewVertex(e,t){const r=t.editGeometryOperations.data.components[0],o=r.edges.length,i=r.vertices.length,s=[];if(o<2)return s;const n=l(e,t.coordinateHelper,t.elevationInfo,this.view),a=r.vertices[i-1],c=r.vertices[0],h=r.edges[o-1];let p=h;do{this.edgeExceedsShortLineThreshold(p,t)&&(this._checkEdgeForParalleLines(p,a.pos,e,n,t,s),this._checkEdgeForParalleLines(p,c.pos,e,n,t,s)),p=p.leftVertex.leftEdge}while(p&&p!==h);return s}snapExistingVertex(t,r){const o=[],i=e(r.vertexHandle),s=i.component;if(s.edges.length<3)return o;const n=l(t,r.coordinateHelper,r.elevationInfo,this.view),a=i.leftEdge,c=i.rightEdge,h=s.vertices[0],p=s.vertices.length,d=s.vertices[p-1],g=s.edges[0];let m=g;do{m!==a&&m!==c&&this.edgeExceedsShortLineThreshold(m,r)&&(a&&this._checkEdgeForParalleLines(m,a.leftVertex.pos,t,n,r,o),c&&this._checkEdgeForParalleLines(m,c.rightVertex.pos,t,n,r,o),i===h?this._checkEdgeForParalleLines(m,d.pos,t,n,r,o):i===d&&this._checkEdgeForParalleLines(m,h.pos,t,n,r,o)),m=m.rightVertex.rightEdge}while(m&&m!==g);return o}_checkEdgeForParalleLines(e,r,i,c,h,p){const d=e.leftVertex.pos,g=e.rightVertex.pos;if(a(this._tmpProjection,r,d,g),t(this._tmpProjection,r)<o.parallelLineThreshold)return;a(this._tmpProjection,i,d,g,r);const{coordinateHelper:m,elevationInfo:f,pointer:v}=h,P=m.fromXYZ(this._tmpProjection,m.getZ(i,0));if(s(c,l(P,m,f,this.view))<this.squaredProximityTreshold(v)){if(this._parallelToPreviousCandidate(e,p))return;p.push(new n({coordinateHelper:m,referenceLine:e,lineStart:r,targetPoint:P,elevationInfo:f}))}}_parallelToPreviousCandidate(e,r){const i=e.leftVertex.pos,s=e.rightVertex.pos;for(const n of r)if(a(this._tmpProjection,s,n.constraint.start,n.constraint.end,i),t(this._tmpProjection,s)<o.parallelLineThreshold)return n.addReferenceLine(e),!0;return!1}}export{c as ParallelLineSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}