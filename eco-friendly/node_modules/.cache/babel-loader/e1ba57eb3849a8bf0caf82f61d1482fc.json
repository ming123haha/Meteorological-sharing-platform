{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Graphic.js\";\nimport { d as o } from \"../../../chunks/languageUtils.js\";\nimport r from \"../../../core/Accessor.js\";\nimport { HandleOwnerMixin as n } from \"../../../core/HandleOwner.js\";\nimport { watch as s, initial as i } from \"../../../core/reactiveUtils.js\";\nimport { throttle as l } from \"../../../core/throttle.js\";\nimport { property as p } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport \"../../../popup/content/AttachmentsContent.js\";\nimport \"../../../popup/content/Content.js\";\nimport \"../../../popup/content/CustomContent.js\";\nimport \"../../../popup/content/ExpressionContent.js\";\nimport c from \"../../../popup/content/FieldsContent.js\";\nimport m from \"../../../popup/content/MediaContent.js\";\nimport d from \"../../../popup/content/TextContent.js\";\nimport h from \"../../../popup/ElementExpressionInfo.js\";\nimport u from \"../FeatureContent/FeatureContentViewModel.js\";\nimport f from \"../FeatureFields/FeatureFieldsViewModel.js\";\nimport _ from \"../FeatureMedia/FeatureMediaViewModel.js\";\nimport { loadArcadeUtils as y, createCompiledExpression as w } from \"../support/arcadeFeatureUtils.js\";\nconst j = 1;\nlet v = class extends n(r) {\n  constructor(e) {\n    super(e), this._abortController = null, this.expressionInfo = null, this.graphic = null, this.contentElement = null, this.contentElementViewModel = null, this.interceptor = null, this.view = null, this._cancelQuery = () => {\n      const {\n        _abortController: e\n      } = this;\n      e && e.abort(), this._abortController = null;\n    }, this._createVM = () => {\n      const e = this.contentElement?.type;\n      this.contentElementViewModel?.destroy();\n      const t = \"fields\" === e ? new f() : \"media\" === e ? new _() : \"text\" === e ? new u() : null;\n\n      this._set(\"contentElementViewModel\", t);\n    }, this._compile = async () => {\n      this._cancelQuery();\n\n      const e = new AbortController();\n      this._abortController = e, await this._compileExpression(), this._abortController === e && (this._abortController = null);\n    }, this._compileThrottled = l(this._compile, j, this), this._compileExpression = async () => {\n      const {\n        expressionInfo: e,\n        graphic: t,\n        interceptor: r,\n        spatialReference: n,\n        map: s,\n        view: i,\n        _abortController: l\n      } = this;\n      if (!(e && t && n && s)) return void this._set(\"contentElement\", null);\n      const p = await y();\n      if (l !== this._abortController) return;\n      const a = await w({\n        arcadeUtils: p,\n        expressionInfo: e,\n        graphic: t,\n        interceptor: r,\n        map: s,\n        spatialReference: n,\n        view: i\n      });\n      if (!a || \"esri.arcade.Dictionary\" !== a.declaredClass) return void this._set(\"contentElement\", null);\n      const h = await o(a, l.signal),\n            u = h?.type,\n            f = \"media\" === u ? m.fromJSON(h) : \"text\" === u ? d.fromJSON(h) : \"fields\" === u ? c.fromJSON(h) : null;\n\n      this._set(\"contentElement\", f);\n    }, this.handles.add([s(() => [this.expressionInfo, this.graphic, this.map, this.spatialReference, this.view], () => this._compileThrottled(), i), s(() => [this.contentElement], () => this._createVM(), i)]);\n  }\n\n  destroy() {\n    this._cancelQuery(), this.contentElementViewModel?.destroy(), this._set(\"contentElementViewModel\", null), this._set(\"contentElement\", null);\n  }\n\n  get spatialReference() {\n    return this.view?.spatialReference || null;\n  }\n\n  set spatialReference(e) {\n    void 0 !== e ? this._override(\"spatialReference\", e) : this._clearOverride(\"spatialReference\");\n  }\n\n  get state() {\n    const {\n      _abortController: e,\n      contentElement: t,\n      contentElementViewModel: o\n    } = this;\n    return e ? \"loading\" : t || o ? \"ready\" : \"disabled\";\n  }\n\n  get map() {\n    return this.view?.map || null;\n  }\n\n  set map(e) {\n    void 0 !== e ? this._override(\"map\", e) : this._clearOverride(\"map\");\n  }\n\n};\ne([p()], v.prototype, \"_abortController\", void 0), e([p({\n  type: h\n})], v.prototype, \"expressionInfo\", void 0), e([p({\n  type: t\n})], v.prototype, \"graphic\", void 0), e([p({\n  readOnly: !0\n})], v.prototype, \"contentElement\", void 0), e([p({\n  readOnly: !0\n})], v.prototype, \"contentElementViewModel\", void 0), e([p()], v.prototype, \"interceptor\", void 0), e([p()], v.prototype, \"spatialReference\", null), e([p({\n  readOnly: !0\n})], v.prototype, \"state\", null), e([p()], v.prototype, \"map\", null), e([p()], v.prototype, \"view\", void 0), v = e([a(\"esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel\")], v);\nconst E = v;\nexport { E as default };","map":{"version":3,"names":["_","e","t","d","o","r","HandleOwnerMixin","n","watch","s","initial","i","throttle","l","property","p","subclass","a","c","m","h","u","f","loadArcadeUtils","y","createCompiledExpression","w","j","v","constructor","_abortController","expressionInfo","graphic","contentElement","contentElementViewModel","interceptor","view","_cancelQuery","abort","_createVM","type","destroy","_set","_compile","AbortController","_compileExpression","_compileThrottled","spatialReference","map","arcadeUtils","declaredClass","signal","fromJSON","handles","add","_override","_clearOverride","state","prototype","readOnly","E","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/Feature/FeatureExpression/FeatureExpressionViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{d as o}from\"../../../chunks/languageUtils.js\";import r from\"../../../core/Accessor.js\";import{HandleOwnerMixin as n}from\"../../../core/HandleOwner.js\";import{watch as s,initial as i}from\"../../../core/reactiveUtils.js\";import{throttle as l}from\"../../../core/throttle.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../popup/content/AttachmentsContent.js\";import\"../../../popup/content/Content.js\";import\"../../../popup/content/CustomContent.js\";import\"../../../popup/content/ExpressionContent.js\";import c from\"../../../popup/content/FieldsContent.js\";import m from\"../../../popup/content/MediaContent.js\";import d from\"../../../popup/content/TextContent.js\";import h from\"../../../popup/ElementExpressionInfo.js\";import u from\"../FeatureContent/FeatureContentViewModel.js\";import f from\"../FeatureFields/FeatureFieldsViewModel.js\";import _ from\"../FeatureMedia/FeatureMediaViewModel.js\";import{loadArcadeUtils as y,createCompiledExpression as w}from\"../support/arcadeFeatureUtils.js\";const j=1;let v=class extends(n(r)){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:e}=this;e&&e.abort(),this._abortController=null},this._createVM=()=>{const e=this.contentElement?.type;this.contentElementViewModel?.destroy();const t=\"fields\"===e?new f:\"media\"===e?new _:\"text\"===e?new u:null;this._set(\"contentElementViewModel\",t)},this._compile=async()=>{this._cancelQuery();const e=new AbortController;this._abortController=e,await this._compileExpression(),this._abortController===e&&(this._abortController=null)},this._compileThrottled=l(this._compile,j,this),this._compileExpression=async()=>{const{expressionInfo:e,graphic:t,interceptor:r,spatialReference:n,map:s,view:i,_abortController:l}=this;if(!(e&&t&&n&&s))return void this._set(\"contentElement\",null);const p=await y();if(l!==this._abortController)return;const a=await w({arcadeUtils:p,expressionInfo:e,graphic:t,interceptor:r,map:s,spatialReference:n,view:i});if(!a||\"esri.arcade.Dictionary\"!==a.declaredClass)return void this._set(\"contentElement\",null);const h=await o(a,l.signal),u=h?.type,f=\"media\"===u?m.fromJSON(h):\"text\"===u?d.fromJSON(h):\"fields\"===u?c.fromJSON(h):null;this._set(\"contentElement\",f)},this.handles.add([s((()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view]),(()=>this._compileThrottled()),i),s((()=>[this.contentElement]),(()=>this._createVM()),i)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set(\"contentElementViewModel\",null),this._set(\"contentElement\",null)}get spatialReference(){return this.view?.spatialReference||null}set spatialReference(e){void 0!==e?this._override(\"spatialReference\",e):this._clearOverride(\"spatialReference\")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:o}=this;return e?\"loading\":t||o?\"ready\":\"disabled\"}get map(){return this.view?.map||null}set map(e){void 0!==e?this._override(\"map\",e):this._clearOverride(\"map\")}};e([p()],v.prototype,\"_abortController\",void 0),e([p({type:h})],v.prototype,\"expressionInfo\",void 0),e([p({type:t})],v.prototype,\"graphic\",void 0),e([p({readOnly:!0})],v.prototype,\"contentElement\",void 0),e([p({readOnly:!0})],v.prototype,\"contentElementViewModel\",void 0),e([p()],v.prototype,\"interceptor\",void 0),e([p()],v.prototype,\"spatialReference\",null),e([p({readOnly:!0})],v.prototype,\"state\",null),e([p()],v.prototype,\"map\",null),e([p()],v.prototype,\"view\",void 0),v=e([a(\"esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel\")],v);const E=v;export{E as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}