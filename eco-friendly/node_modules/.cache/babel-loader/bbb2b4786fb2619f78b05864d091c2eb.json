{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\n\nclass t {\n  filter(t, n) {\n    return n;\n  }\n\n  notifyElevationSourceChange() {}\n\n}\n\nclass n {\n  filter(t, n) {\n    const {\n      point: r,\n      distance: c\n    } = t,\n          {\n      z: i\n    } = r;\n    if (!(null != i)) return n;\n    if (0 === n.length) return n;\n\n    const o = s(c),\n          u = this._updateCandidatesTo3D(n, r, o).filter(e);\n\n    return u.sort(a), u;\n  }\n\n  _updateCandidatesTo3D(t, n, e) {\n    for (const r of t) switch (r.type) {\n      case \"edge\":\n        c(r, n, e);\n        continue;\n\n      case \"vertex\":\n        o(r, n, e);\n        continue;\n    }\n\n    return t;\n  }\n\n}\n\nfunction e(t) {\n  return t.distance <= 1;\n}\n\nfunction r(e = !1) {\n  return e ? new n() : new t();\n}\n\nfunction c(t, n, {\n  x: e,\n  y: r,\n  z: c\n}) {\n  const {\n    start: o,\n    end: s,\n    target: a\n  } = t;\n  t.draped || i(a, n, o, s);\n  const u = (n.x - a.x) / e,\n        d = (n.y - a.y) / r,\n        f = (n.z - a.z) / c;\n  t.distance = Math.sqrt(u * u + d * d + f * f);\n}\n\nfunction i(t, n, e, r) {\n  const c = r.x - e.x,\n        i = r.y - e.y,\n        o = r.z - e.z,\n        s = c * c + i * i + o * o,\n        a = (n.x - e.x) * c + (n.y - e.y) * i + o * (n.z - e.z),\n        u = Math.min(1, Math.max(0, a / s)),\n        d = e.x + c * u,\n        f = e.y + i * u,\n        x = e.z + o * u;\n  t.x = d, t.y = f, t.z = x;\n}\n\nfunction o(t, n, {\n  x: e,\n  y: r,\n  z: c\n}) {\n  const {\n    target: i\n  } = t,\n        o = (n.x - i.x) / e,\n        s = (n.y - i.y) / r,\n        a = (n.z - i.z) / c,\n        u = Math.sqrt(o * o + s * s + a * a);\n  t.distance = u;\n}\n\nfunction s(t) {\n  return \"number\" == typeof t ? {\n    x: t,\n    y: t,\n    z: t\n  } : t;\n}\n\nfunction a(t, n) {\n  return t.distance - n.distance;\n}\n\nexport { r as getSnappingCandidateElevationFilter };","map":{"version":3,"names":["t","filter","n","notifyElevationSourceChange","point","r","distance","c","z","i","length","o","s","u","_updateCandidatesTo3D","e","sort","a","type","x","y","start","end","target","draped","d","f","Math","sqrt","min","max","getSnappingCandidateElevationFilter"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";class t{filter(t,n){return n}notifyElevationSourceChange(){}}class n{filter(t,n){const{point:r,distance:c}=t,{z:i}=r;if(!(null!=i))return n;if(0===n.length)return n;const o=s(c),u=this._updateCandidatesTo3D(n,r,o).filter(e);return u.sort(a),u}_updateCandidatesTo3D(t,n,e){for(const r of t)switch(r.type){case\"edge\":c(r,n,e);continue;case\"vertex\":o(r,n,e);continue}return t}}function e(t){return t.distance<=1}function r(e=!1){return e?new n:new t}function c(t,n,{x:e,y:r,z:c}){const{start:o,end:s,target:a}=t;t.draped||i(a,n,o,s);const u=(n.x-a.x)/e,d=(n.y-a.y)/r,f=(n.z-a.z)/c;t.distance=Math.sqrt(u*u+d*d+f*f)}function i(t,n,e,r){const c=r.x-e.x,i=r.y-e.y,o=r.z-e.z,s=c*c+i*i+o*o,a=(n.x-e.x)*c+(n.y-e.y)*i+o*(n.z-e.z),u=Math.min(1,Math.max(0,a/s)),d=e.x+c*u,f=e.y+i*u,x=e.z+o*u;t.x=d,t.y=f,t.z=x}function o(t,n,{x:e,y:r,z:c}){const{target:i}=t,o=(n.x-i.x)/e,s=(n.y-i.y)/r,a=(n.z-i.z)/c,u=Math.sqrt(o*o+s*s+a*a);t.distance=u}function s(t){return\"number\"==typeof t?{x:t,y:t,z:t}:t}function a(t,n){return t.distance-n.distance}export{r as getSnappingCandidateElevationFilter};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}