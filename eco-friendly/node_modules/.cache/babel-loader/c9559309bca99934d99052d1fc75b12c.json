{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport r from \"../../../../../core/has.js\";\nimport t from \"../../../../../core/Logger.js\";\nimport { toPt as o } from \"../../../../../core/screenUtils.js\";\nimport { getWebGLCapabilities as s } from \"../../../../webgl/capabilities.js\";\n\nconst l = 8,\n      a = l - 2,\n      n = t.getLogger(\"esri.views.2d.layers.features.support.rendererUtils\"),\n      i = e => {\n  if (!(\"visualVariables\" in e) || !e.visualVariables || !e.visualVariables.length) return e;\n  const r = e.clone(),\n        t = r.visualVariables.map(e => p(e) ? c(e) : e);\n  return r.visualVariables = t, r;\n};\n\nfunction u(e) {\n  return e.map(e => p(e) ? c(e.clone()) : e);\n}\n\nfunction p(e) {\n  return (\"size\" === e.type || \"color\" === e.type || \"opacity\" === e.type) && null != e.stops;\n}\n\nfunction c(e) {\n  return e.stops = g(e.type, e.stops), e;\n}\n\nfunction f(e, r, t) {\n  return (1 - t) * e + t * r;\n}\n\nfunction b(e, r) {\n  const [t, ...s] = r,\n        l = s.pop(),\n        n = s[0].value,\n        i = s[s.length - 1].value,\n        u = (i - n) / a,\n        p = [];\n\n  for (let a = n; a < i; a += u) {\n    let t = 0;\n\n    for (; a >= s[t].value;) t++;\n\n    const l = s[t],\n          n = r[t - 1],\n          i = a - n.value,\n          u = l.value === n.value ? 1 : i / (l.value - n.value);\n\n    if (\"color\" === e) {\n      const e = s[t],\n            o = r[t - 1],\n            l = e.color.clone();\n      l.r = f(o.color.r, l.r, u), l.g = f(o.color.g, l.g, u), l.b = f(o.color.b, l.b, u), l.a = f(o.color.a, l.a, u), p.push({\n        value: a,\n        color: l,\n        label: e.label\n      });\n    } else if (\"size\" === e) {\n      const e = s[t],\n            l = r[t - 1],\n            n = o(e.size),\n            i = f(o(l.size), n, u);\n      p.push({\n        value: a,\n        size: i,\n        label: e.label\n      });\n    } else {\n      const e = s[t],\n            o = f(r[t - 1].opacity, e.opacity, u);\n      p.push({\n        value: a,\n        opacity: o,\n        label: e.label\n      });\n    }\n  }\n\n  return [t, ...p, l];\n}\n\nfunction m(e) {\n  const [r, ...t] = e,\n        o = t.pop();\n\n  for (; t.length > a;) {\n    let e = 0,\n        r = 0;\n\n    for (let o = 1; o < t.length; o++) {\n      const s = t[o - 1],\n            l = t[o],\n            a = Math.abs(l.value - s.value);\n      a > r && (r = a, e = o);\n    }\n\n    t.splice(e, 1);\n  }\n\n  return [r, ...t, o];\n}\n\nfunction g(e, r) {\n  return r.length <= l ? r : (n.warn(`Found ${r.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`), r.length > 2 * l ? b(e, r) : m(r));\n}\n\nfunction h() {\n  if (r(\"heatmap-force-raster\")) return \"raster\";\n  const {\n    supportsTextureFloat: e,\n    supportsTextureHalfFloat: t,\n    supportsColorBufferFloat: o,\n    supportsColorBufferFloatBlend: l,\n    supportsColorBufferHalfFloat: a\n  } = s(\"2d\");\n  return e && o && l || t && a ? \"symbol\" : r(\"heatmap-allow-raster-fallback\") ? \"raster\" : \"none\";\n}\n\nfunction v(t) {\n  if (!t) return !0;\n\n  switch (t.type) {\n    case \"dot-density\":\n      if (!s(\"2d\").supportsTextureFloat) return n.error(new e(\"webgl-missing-extension\", \"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")), !1;\n      break;\n\n    case \"heatmap\":\n      {\n        const t = h();\n\n        if (\"none\" === t || \"raster\" === t && !r(\"heatmap-force-raster\")) {\n          const r = s(\"2d\"),\n                o = [\"supportsTextureFloat\", \"supportsTextureHalfFloat\", \"supportsColorBufferFloat\", \"supportsColorBufferFloatBlend\", \"supportsColorBufferHalfFloat\"].filter(e => !r[e]).join(\", \");\n          if (\"none\" === t) return n.errorOnce(new e(\"webgl-missing-extension\", `Missing WebGL${r.type} requirements for Heatmap: ${o}`)), !1;\n          \"raster\" === t && n.warnOnce(`Missing WebGL${r.type} requirements for accelerated Heatmap: ${o}. Feature support may be limited.`);\n        }\n\n        break;\n      }\n  }\n\n  return !0;\n}\n\nexport { h as getSupportedHeatmapRenderer, v as isRendererSupported, i as simplifyVVRenderer, u as simplifyVisualVariables };","map":{"version":3,"names":["e","r","t","toPt","o","getWebGLCapabilities","s","l","a","n","getLogger","i","visualVariables","length","clone","map","p","c","u","type","stops","g","f","b","pop","value","color","push","label","size","opacity","m","Math","abs","splice","warn","h","supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat","v","error","filter","join","errorOnce","warnOnce","getSupportedHeatmapRenderer","isRendererSupported","simplifyVVRenderer","simplifyVisualVariables"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{toPt as o}from\"../../../../../core/screenUtils.js\";import{getWebGLCapabilities as s}from\"../../../../webgl/capabilities.js\";const l=8,a=l-2,n=t.getLogger(\"esri.views.2d.layers.features.support.rendererUtils\"),i=e=>{if(!(\"visualVariables\"in e)||!e.visualVariables||!e.visualVariables.length)return e;const r=e.clone(),t=r.visualVariables.map((e=>p(e)?c(e):e));return r.visualVariables=t,r};function u(e){return e.map((e=>p(e)?c(e.clone()):e))}function p(e){return(\"size\"===e.type||\"color\"===e.type||\"opacity\"===e.type)&&null!=e.stops}function c(e){return e.stops=g(e.type,e.stops),e}function f(e,r,t){return(1-t)*e+t*r}function b(e,r){const[t,...s]=r,l=s.pop(),n=s[0].value,i=s[s.length-1].value,u=(i-n)/a,p=[];for(let a=n;a<i;a+=u){let t=0;for(;a>=s[t].value;)t++;const l=s[t],n=r[t-1],i=a-n.value,u=l.value===n.value?1:i/(l.value-n.value);if(\"color\"===e){const e=s[t],o=r[t-1],l=e.color.clone();l.r=f(o.color.r,l.r,u),l.g=f(o.color.g,l.g,u),l.b=f(o.color.b,l.b,u),l.a=f(o.color.a,l.a,u),p.push({value:a,color:l,label:e.label})}else if(\"size\"===e){const e=s[t],l=r[t-1],n=o(e.size),i=f(o(l.size),n,u);p.push({value:a,size:i,label:e.label})}else{const e=s[t],o=f(r[t-1].opacity,e.opacity,u);p.push({value:a,opacity:o,label:e.label})}}return[t,...p,l]}function m(e){const[r,...t]=e,o=t.pop();for(;t.length>a;){let e=0,r=0;for(let o=1;o<t.length;o++){const s=t[o-1],l=t[o],a=Math.abs(l.value-s.value);a>r&&(r=a,e=o)}t.splice(e,1)}return[r,...t,o]}function g(e,r){return r.length<=l?r:(n.warn(`Found ${r.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`),r.length>2*l?b(e,r):m(r))}function h(){if(r(\"heatmap-force-raster\"))return\"raster\";const{supportsTextureFloat:e,supportsTextureHalfFloat:t,supportsColorBufferFloat:o,supportsColorBufferFloatBlend:l,supportsColorBufferHalfFloat:a}=s(\"2d\");return e&&o&&l||t&&a?\"symbol\":r(\"heatmap-allow-raster-fallback\")?\"raster\":\"none\"}function v(t){if(!t)return!0;switch(t.type){case\"dot-density\":if(!s(\"2d\").supportsTextureFloat)return n.error(new e(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1;break;case\"heatmap\":{const t=h();if(\"none\"===t||\"raster\"===t&&!r(\"heatmap-force-raster\")){const r=s(\"2d\"),o=[\"supportsTextureFloat\",\"supportsTextureHalfFloat\",\"supportsColorBufferFloat\",\"supportsColorBufferFloatBlend\",\"supportsColorBufferHalfFloat\"].filter((e=>!r[e])).join(\", \");if(\"none\"===t)return n.errorOnce(new e(\"webgl-missing-extension\",`Missing WebGL${r.type} requirements for Heatmap: ${o}`)),!1;\"raster\"===t&&n.warnOnce(`Missing WebGL${r.type} requirements for accelerated Heatmap: ${o}. Feature support may be limited.`)}break}}return!0}export{h as getSupportedHeatmapRenderer,v as isRendererSupported,i as simplifyVVRenderer,u as simplifyVisualVariables};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}