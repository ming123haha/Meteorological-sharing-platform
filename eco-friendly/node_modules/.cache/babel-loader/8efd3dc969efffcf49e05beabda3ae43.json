{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../request.js\";\nimport { remove as t, splitIntoChunks as s } from \"../../../../core/arrayUtils.js\";\nimport { resultOrAbort as i, result as r } from \"../../../../core/asyncUtils.js\";\nimport { estimateStringByteSize as a, estimateNumberByteSize as n } from \"../../../../core/byteSizeEstimations.js\";\nimport o from \"../../../../core/Logger.js\";\nimport { isNone as c, unwrap as d, get as h, isSome as l } from \"../../../../core/maybe.js\";\nimport { whenOrAbort as m } from \"../../../../core/promiseUtils.js\";\nimport { formatNumber as u } from \"../../../../intl/number.js\";\nimport { getMaximumQuerySize as g, queryAllJSON as b } from \"../../../../layers/support/featureQueryAll.js\";\nconst p = o.getLogger(\"esri.views.3d.layers.i3s.I3SAttributeOverrides\");\n\nclass f {\n  constructor(e, t) {\n    this.layer = e, this.warnMaximumChangedObjectsExceeded = !1, this.changedObjectIds = new Set(), this.pendingFetchAbortController = new AbortController(), this.interactiveEditingSessions = null, this._maximumNumberOfEditOVerrides = j, this.memCache = t.newCache(`${e.uid}-attribute-overrides`), this.pendingFetchChangedObjectIds = this._fetchChangedObjectIds(this.pendingFetchAbortController.signal), this.pendingFetchChangedObjectIds.then(() => this.pendingFetchAbortController = null);\n  }\n\n  destroy() {\n    this.layer = null, this.memCache.destroy(), this.memCache = null, this.pendingFetchAbortController && (this.pendingFetchAbortController.abort(), this.pendingFetchAbortController = null), this.pendingFetchChangedObjectIds = null;\n  }\n\n  createInteractiveEditSession(e) {\n    this.changedObjectIds.add(e), c(this.interactiveEditingSessions) && (this.interactiveEditingSessions = []);\n    const s = this.interactiveEditingSessions,\n          i = new y(e, {\n      rollback: () => {\n        t(s, i), 0 === s.length && (this.interactiveEditingSessions = null);\n      },\n      commit: t => {\n        for (const [s, i] of t) this.updateValue(e, s, i);\n      }\n    });\n    return s.unshift(i), i;\n  }\n\n  async apply(e, t, s) {\n    if (c(t)) return;\n    const {\n      loadedAttributes: i,\n      attributeData: r\n    } = t;\n    if (c(i) || 0 === i.length || c(r)) return;\n    if (await m(this.pendingFetchChangedObjectIds, s), 0 === this.changedObjectIds.size) return;\n\n    const a = {\n      loadedAttributes: i,\n      attributeData: r\n    },\n          n = this._getOverridesFromCache(e, a, this.changedObjectIds),\n          {\n      objectIds: o,\n      fieldNames: d\n    } = n,\n          h = await this._queryOverridesFromAssociatedLayer(o, d, s);\n\n    c(h) || this._processOverridesFromAssociatedLayer(e, h, d, a);\n  }\n\n  updateValue(e, t, s) {\n    this.changedObjectIds.add(e), this._cacheValue(e, t, s);\n  }\n\n  _cacheValue(e, t, s) {\n    this.memCache.put(this._getCacheKey(e, t), s, this._memCacheValueSize(s));\n  }\n\n  _getOverridesFromCache(e, {\n    loadedAttributes: t,\n    attributeData: s\n  }, i) {\n    const r = new Set(),\n          a = new Array();\n\n    for (const o of t) a[o.index] = s[o.name];\n\n    const n = new Set();\n\n    for (let o = 0; o < e.length; o++) {\n      const s = e[o];\n      if (i.has(s)) for (const e of t) {\n        const t = this._fromCache(s, e.index);\n\n        void 0 === t ? (r.add(s), n.add(e.name)) : a[e.index][o] = t;\n      }\n    }\n\n    return {\n      objectIds: Array.from(r),\n      fieldNames: Array.from(n)\n    };\n  }\n\n  _fromCache(e, t) {\n    const s = this._fromInteractiveEditingSession(e, t);\n\n    if (void 0 !== s) return s;\n\n    const i = this._getCacheKey(e, t);\n\n    return this.memCache.get(i);\n  }\n\n  _fromInteractiveEditingSession(e, t) {\n    if (!c(this.interactiveEditingSessions)) for (const s of this.interactiveEditingSessions) {\n      if (s.objectId !== e) continue;\n      const i = s.get(t);\n      if (void 0 !== i) return i;\n    }\n  }\n\n  _getCacheKey(e, t) {\n    return `${e}-${t}`;\n  }\n\n  async _queryOverridesFromAssociatedLayer(e, t, r) {\n    if (0 === e.length || 0 === t.length) return null;\n    e = e.sort((e, t) => e - t), this.warnMaximumChangedObjectsExceeded && (this.warnMaximumChangedObjectsExceeded = !1, this._logMaximumObjectsExceededWarning());\n    const a = d(this.layer.associatedLayer),\n          n = a.createQuery();\n    n.where = \"1=1\", n.returnGeometry = !1, n.outFields = [a.objectIdField, ...t], n.cacheHint = !0, n.objectIds = e;\n    const o = g(a),\n          c = e.length > o ? s(e, o).map(e => {\n      const t = n.clone();\n      return t.objectIds = e, i(b(a, t, {\n        signal: r\n      }));\n    }) : [i(b(a, n, {\n      signal: r\n    }))];\n    return (await Promise.all(c)).reduce((e, t) => e.concat(t.ok ? t.value.features : []), []);\n  }\n\n  _logMaximumObjectsExceededWarning() {\n    let e = `The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${u(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;\n    const t = this.layer.portalItem;\n    t && t.loaded ? e += ` (${t.portal.url}/home/item.html?id=${t.id}#settings)` : e += ` (${this.layer.parsedUrl.path})`, p.warn(\"#queryOverrides()\", this.layer.title, `${e}.`);\n  }\n\n  _processOverridesFromAssociatedLayer(e, t, s, {\n    loadedAttributes: i,\n    attributeData: r\n  }) {\n    const a = d(this.layer.associatedLayer).objectIdField,\n          n = s.map(e => r[e]),\n          o = new Map(i.map(e => [e.name, e.index])),\n          c = s.map(e => o.get(e)),\n          h = new Map(Array.from(e, (e, t) => [e, t]));\n\n    for (const d of t) {\n      const e = d.attributes[a];\n\n      for (let t = 0; t < s.length; t++) {\n        const i = c[t],\n              r = h.get(e),\n              a = d.attributes[s[t]];\n        n[t][r] = a, this._cacheValue(e, i, a);\n      }\n    }\n  }\n\n  _memCacheValueSize(e) {\n    return \"string\" == typeof e ? a(e) : n();\n  }\n\n  async _fetchChangedObjectIds(t) {\n    const s = this.layer;\n    if (await s.load({\n      signal: t\n    }), this.changedObjectIds.clear(), c(s.associatedLayer) || !s.associatedLayer.capabilities?.operations?.supportsChangeTracking) return;\n\n    const i = this._getFetchChangedObjectIdsServerGen();\n\n    if (c(i)) return null;\n    const a = s.associatedLayer.layerId,\n          n = await r(e(`${s.associatedLayer.url}/extractChanges`, {\n      method: \"post\",\n      query: {\n        f: \"json\",\n        returnIdsOnly: !0,\n        layers: `${a}`,\n        returnUpdates: !0,\n        returnDeletes: !1,\n        returnInserts: !1,\n        layerServerGens: JSON.stringify([{\n          id: a,\n          serverGen: i\n        }])\n      },\n      timeout: C,\n      signal: t\n    })),\n          o = n.ok && n.value.data?.edits ? h(n.value.data.edits[0], \"objectIds\", \"updates\") : null;\n\n    if (l(o)) {\n      const e = Math.min(this._maximumNumberOfEditOVerrides, o.length);\n      e < o.length && (this.warnMaximumChangedObjectsExceeded = !0);\n      const t = o.sort((e, t) => e - t);\n\n      for (let s = 0; s < e; s++) this.changedObjectIds.add(t[s]);\n    }\n  }\n\n  _getFetchChangedObjectIdsServerGen() {\n    const e = this.layer;\n    if (l(e.serviceUpdateTimeStamp) && l(e.serviceUpdateTimeStamp.lastUpdate)) return e.serviceUpdateTimeStamp.lastUpdate;\n    const t = e.associatedLayer;\n    return l(t) && l(t.serverGens) && l(t.serverGens.minServerGen) ? t.serverGens.minServerGen : null;\n  }\n\n  get test() {\n    const e = Array.from(this.changedObjectIds),\n          t = this.pendingFetchChangedObjectIds,\n          s = this;\n    return {\n      changedObjectIds: e,\n      pendingFetchChangedObjectIds: t,\n\n      get maximumNumberOfEditOVerrides() {\n        return s._maximumNumberOfEditOVerrides;\n      },\n\n      set maximumNumberOfEditOVerrides(e) {\n        s._maximumNumberOfEditOVerrides = e;\n      }\n\n    };\n  }\n\n}\n\nclass y {\n  constructor(e, t) {\n    this.objectId = e, this.options = t, this.updates = new Map(), this.state = O.ACTIVE;\n  }\n\n  get(e) {\n    return this.updates.get(e);\n  }\n\n  set(e, t) {\n    this.isActive && this.updates.set(e, t);\n  }\n\n  rollback() {\n    this.isActive && (this.state = O.ROLLED_BACK, this.options.rollback());\n  }\n\n  commit() {\n    this.isActive && (this.state = O.COMMITTED, this.options.commit(this.updates), this.updates.clear());\n  }\n\n  get isActive() {\n    return this.state === O.ACTIVE;\n  }\n\n}\n\nvar O;\n!function (e) {\n  e[e.ACTIVE = 0] = \"ACTIVE\", e[e.COMMITTED = 1] = \"COMMITTED\", e[e.ROLLED_BACK = 2] = \"ROLLED_BACK\";\n}(O || (O = {}));\nconst C = 1e4,\n      j = 5e4;\nexport { f as I3SAttributeOverrides };","map":{"version":3,"names":["e","remove","t","splitIntoChunks","s","resultOrAbort","i","result","r","estimateStringByteSize","a","estimateNumberByteSize","n","o","isNone","c","unwrap","d","get","h","isSome","l","whenOrAbort","m","formatNumber","u","getMaximumQuerySize","g","queryAllJSON","b","p","getLogger","f","constructor","layer","warnMaximumChangedObjectsExceeded","changedObjectIds","Set","pendingFetchAbortController","AbortController","interactiveEditingSessions","_maximumNumberOfEditOVerrides","j","memCache","newCache","uid","pendingFetchChangedObjectIds","_fetchChangedObjectIds","signal","then","destroy","abort","createInteractiveEditSession","add","y","rollback","length","commit","updateValue","unshift","apply","loadedAttributes","attributeData","size","_getOverridesFromCache","objectIds","fieldNames","_queryOverridesFromAssociatedLayer","_processOverridesFromAssociatedLayer","_cacheValue","put","_getCacheKey","_memCacheValueSize","Array","index","name","has","_fromCache","from","_fromInteractiveEditingSession","objectId","sort","_logMaximumObjectsExceededWarning","associatedLayer","createQuery","where","returnGeometry","outFields","objectIdField","cacheHint","map","clone","Promise","all","reduce","concat","ok","value","features","portalItem","loaded","portal","url","id","parsedUrl","path","warn","title","Map","attributes","load","clear","capabilities","operations","supportsChangeTracking","_getFetchChangedObjectIdsServerGen","layerId","method","query","returnIdsOnly","layers","returnUpdates","returnDeletes","returnInserts","layerServerGens","JSON","stringify","serverGen","timeout","C","data","edits","Math","min","serviceUpdateTimeStamp","lastUpdate","serverGens","minServerGen","test","maximumNumberOfEditOVerrides","options","updates","state","O","ACTIVE","set","isActive","ROLLED_BACK","COMMITTED","I3SAttributeOverrides"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/i3s/I3SAttributeOverrides.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{remove as t,splitIntoChunks as s}from\"../../../../core/arrayUtils.js\";import{resultOrAbort as i,result as r}from\"../../../../core/asyncUtils.js\";import{estimateStringByteSize as a,estimateNumberByteSize as n}from\"../../../../core/byteSizeEstimations.js\";import o from\"../../../../core/Logger.js\";import{isNone as c,unwrap as d,get as h,isSome as l}from\"../../../../core/maybe.js\";import{whenOrAbort as m}from\"../../../../core/promiseUtils.js\";import{formatNumber as u}from\"../../../../intl/number.js\";import{getMaximumQuerySize as g,queryAllJSON as b}from\"../../../../layers/support/featureQueryAll.js\";const p=o.getLogger(\"esri.views.3d.layers.i3s.I3SAttributeOverrides\");class f{constructor(e,t){this.layer=e,this.warnMaximumChangedObjectsExceeded=!1,this.changedObjectIds=new Set,this.pendingFetchAbortController=new AbortController,this.interactiveEditingSessions=null,this._maximumNumberOfEditOVerrides=j,this.memCache=t.newCache(`${e.uid}-attribute-overrides`),this.pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this.pendingFetchAbortController.signal),this.pendingFetchChangedObjectIds.then((()=>this.pendingFetchAbortController=null))}destroy(){this.layer=null,this.memCache.destroy(),this.memCache=null,this.pendingFetchAbortController&&(this.pendingFetchAbortController.abort(),this.pendingFetchAbortController=null),this.pendingFetchChangedObjectIds=null}createInteractiveEditSession(e){this.changedObjectIds.add(e),c(this.interactiveEditingSessions)&&(this.interactiveEditingSessions=[]);const s=this.interactiveEditingSessions,i=new y(e,{rollback:()=>{t(s,i),0===s.length&&(this.interactiveEditingSessions=null)},commit:t=>{for(const[s,i]of t)this.updateValue(e,s,i)}});return s.unshift(i),i}async apply(e,t,s){if(c(t))return;const{loadedAttributes:i,attributeData:r}=t;if(c(i)||0===i.length||c(r))return;if(await m(this.pendingFetchChangedObjectIds,s),0===this.changedObjectIds.size)return;const a={loadedAttributes:i,attributeData:r},n=this._getOverridesFromCache(e,a,this.changedObjectIds),{objectIds:o,fieldNames:d}=n,h=await this._queryOverridesFromAssociatedLayer(o,d,s);c(h)||this._processOverridesFromAssociatedLayer(e,h,d,a)}updateValue(e,t,s){this.changedObjectIds.add(e),this._cacheValue(e,t,s)}_cacheValue(e,t,s){this.memCache.put(this._getCacheKey(e,t),s,this._memCacheValueSize(s))}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:s},i){const r=new Set,a=new Array;for(const o of t)a[o.index]=s[o.name];const n=new Set;for(let o=0;o<e.length;o++){const s=e[o];if(i.has(s))for(const e of t){const t=this._fromCache(s,e.index);void 0===t?(r.add(s),n.add(e.name)):a[e.index][o]=t}}return{objectIds:Array.from(r),fieldNames:Array.from(n)}}_fromCache(e,t){const s=this._fromInteractiveEditingSession(e,t);if(void 0!==s)return s;const i=this._getCacheKey(e,t);return this.memCache.get(i)}_fromInteractiveEditingSession(e,t){if(!c(this.interactiveEditingSessions))for(const s of this.interactiveEditingSessions){if(s.objectId!==e)continue;const i=s.get(t);if(void 0!==i)return i}}_getCacheKey(e,t){return`${e}-${t}`}async _queryOverridesFromAssociatedLayer(e,t,r){if(0===e.length||0===t.length)return null;e=e.sort(((e,t)=>e-t)),this.warnMaximumChangedObjectsExceeded&&(this.warnMaximumChangedObjectsExceeded=!1,this._logMaximumObjectsExceededWarning());const a=d(this.layer.associatedLayer),n=a.createQuery();n.where=\"1=1\",n.returnGeometry=!1,n.outFields=[a.objectIdField,...t],n.cacheHint=!0,n.objectIds=e;const o=g(a),c=e.length>o?s(e,o).map((e=>{const t=n.clone();return t.objectIds=e,i(b(a,t,{signal:r}))})):[i(b(a,n,{signal:r}))];return(await Promise.all(c)).reduce(((e,t)=>e.concat(t.ok?t.value.features:[])),[])}_logMaximumObjectsExceededWarning(){let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${u(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,p.warn(\"#queryOverrides()\",this.layer.title,`${e}.`)}_processOverridesFromAssociatedLayer(e,t,s,{loadedAttributes:i,attributeData:r}){const a=d(this.layer.associatedLayer).objectIdField,n=s.map((e=>r[e])),o=new Map(i.map((e=>[e.name,e.index]))),c=s.map((e=>o.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const d of t){const e=d.attributes[a];for(let t=0;t<s.length;t++){const i=c[t],r=h.get(e),a=d.attributes[s[t]];n[t][r]=a,this._cacheValue(e,i,a)}}}_memCacheValueSize(e){return\"string\"==typeof e?a(e):n()}async _fetchChangedObjectIds(t){const s=this.layer;if(await s.load({signal:t}),this.changedObjectIds.clear(),c(s.associatedLayer)||!s.associatedLayer.capabilities?.operations?.supportsChangeTracking)return;const i=this._getFetchChangedObjectIdsServerGen();if(c(i))return null;const a=s.associatedLayer.layerId,n=await r(e(`${s.associatedLayer.url}/extractChanges`,{method:\"post\",query:{f:\"json\",returnIdsOnly:!0,layers:`${a}`,returnUpdates:!0,returnDeletes:!1,returnInserts:!1,layerServerGens:JSON.stringify([{id:a,serverGen:i}])},timeout:C,signal:t})),o=n.ok&&n.value.data?.edits?h(n.value.data.edits[0],\"objectIds\",\"updates\"):null;if(l(o)){const e=Math.min(this._maximumNumberOfEditOVerrides,o.length);e<o.length&&(this.warnMaximumChangedObjectsExceeded=!0);const t=o.sort(((e,t)=>e-t));for(let s=0;s<e;s++)this.changedObjectIds.add(t[s])}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(l(e.serviceUpdateTimeStamp)&&l(e.serviceUpdateTimeStamp.lastUpdate))return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return l(t)&&l(t.serverGens)&&l(t.serverGens.minServerGen)?t.serverGens.minServerGen:null}get test(){const e=Array.from(this.changedObjectIds),t=this.pendingFetchChangedObjectIds,s=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return s._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){s._maximumNumberOfEditOVerrides=e}}}}class y{constructor(e,t){this.objectId=e,this.options=t,this.updates=new Map,this.state=O.ACTIVE}get(e){return this.updates.get(e)}set(e,t){this.isActive&&this.updates.set(e,t)}rollback(){this.isActive&&(this.state=O.ROLLED_BACK,this.options.rollback())}commit(){this.isActive&&(this.state=O.COMMITTED,this.options.commit(this.updates),this.updates.clear())}get isActive(){return this.state===O.ACTIVE}}var O;!function(e){e[e.ACTIVE=0]=\"ACTIVE\",e[e.COMMITTED=1]=\"COMMITTED\",e[e.ROLLED_BACK=2]=\"ROLLED_BACK\"}(O||(O={}));const C=1e4,j=5e4;export{f as I3SAttributeOverrides};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,wBAAb;AAAsC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,eAAe,IAAIC,CAAtC,QAA4C,gCAA5C;AAA6E,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,MAAM,IAAIC,CAApC,QAA0C,gCAA1C;AAA2E,SAAOC,sBAAsB,IAAIC,CAAjC,EAAmCC,sBAAsB,IAAIC,CAA7D,QAAmE,yCAAnE;AAA6G,OAAOC,CAAP,MAAa,4BAAb;AAA0C,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,EAA+BC,GAAG,IAAIC,CAAtC,EAAwCC,MAAM,IAAIC,CAAlD,QAAwD,2BAAxD;AAAoF,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,kCAA5B;AAA+D,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,4BAA7B;AAA0D,SAAOC,mBAAmB,IAAIC,CAA9B,EAAgCC,YAAY,IAAIC,CAAhD,QAAsD,+CAAtD;AAAsG,MAAMC,CAAC,GAACjB,CAAC,CAACkB,SAAF,CAAY,gDAAZ,CAAR;;AAAsE,MAAMC,CAAN,CAAO;EAACC,WAAW,CAACjC,CAAD,EAAGE,CAAH,EAAK;IAAC,KAAKgC,KAAL,GAAWlC,CAAX,EAAa,KAAKmC,iCAAL,GAAuC,CAAC,CAArD,EAAuD,KAAKC,gBAAL,GAAsB,IAAIC,GAAJ,EAA7E,EAAqF,KAAKC,2BAAL,GAAiC,IAAIC,eAAJ,EAAtH,EAA0I,KAAKC,0BAAL,GAAgC,IAA1K,EAA+K,KAAKC,6BAAL,GAAmCC,CAAlN,EAAoN,KAAKC,QAAL,GAAczC,CAAC,CAAC0C,QAAF,CAAY,GAAE5C,CAAC,CAAC6C,GAAI,sBAApB,CAAlO,EAA6Q,KAAKC,4BAAL,GAAkC,KAAKC,sBAAL,CAA4B,KAAKT,2BAAL,CAAiCU,MAA7D,CAA/S,EAAoX,KAAKF,4BAAL,CAAkCG,IAAlC,CAAwC,MAAI,KAAKX,2BAAL,GAAiC,IAA7E,CAApX;EAAwc;;EAAAY,OAAO,GAAE;IAAC,KAAKhB,KAAL,GAAW,IAAX,EAAgB,KAAKS,QAAL,CAAcO,OAAd,EAAhB,EAAwC,KAAKP,QAAL,GAAc,IAAtD,EAA2D,KAAKL,2BAAL,KAAmC,KAAKA,2BAAL,CAAiCa,KAAjC,IAAyC,KAAKb,2BAAL,GAAiC,IAA7G,CAA3D,EAA8K,KAAKQ,4BAAL,GAAkC,IAAhN;EAAqN;;EAAAM,4BAA4B,CAACpD,CAAD,EAAG;IAAC,KAAKoC,gBAAL,CAAsBiB,GAAtB,CAA0BrD,CAA1B,GAA6Be,CAAC,CAAC,KAAKyB,0BAAN,CAAD,KAAqC,KAAKA,0BAAL,GAAgC,EAArE,CAA7B;IAAsG,MAAMpC,CAAC,GAAC,KAAKoC,0BAAb;IAAA,MAAwClC,CAAC,GAAC,IAAIgD,CAAJ,CAAMtD,CAAN,EAAQ;MAACuD,QAAQ,EAAC,MAAI;QAACrD,CAAC,CAACE,CAAD,EAAGE,CAAH,CAAD,EAAO,MAAIF,CAAC,CAACoD,MAAN,KAAe,KAAKhB,0BAAL,GAAgC,IAA/C,CAAP;MAA4D,CAA3E;MAA4EiB,MAAM,EAACvD,CAAC,IAAE;QAAC,KAAI,MAAK,CAACE,CAAD,EAAGE,CAAH,CAAT,IAAiBJ,CAAjB,EAAmB,KAAKwD,WAAL,CAAiB1D,CAAjB,EAAmBI,CAAnB,EAAqBE,CAArB;MAAwB;IAAlI,CAAR,CAA1C;IAAuL,OAAOF,CAAC,CAACuD,OAAF,CAAUrD,CAAV,GAAaA,CAApB;EAAsB;;EAAW,MAALsD,KAAK,CAAC5D,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAGW,CAAC,CAACb,CAAD,CAAJ,EAAQ;IAAO,MAAK;MAAC2D,gBAAgB,EAACvD,CAAlB;MAAoBwD,aAAa,EAACtD;IAAlC,IAAqCN,CAA1C;IAA4C,IAAGa,CAAC,CAACT,CAAD,CAAD,IAAM,MAAIA,CAAC,CAACkD,MAAZ,IAAoBzC,CAAC,CAACP,CAAD,CAAxB,EAA4B;IAAO,IAAG,MAAMe,CAAC,CAAC,KAAKuB,4BAAN,EAAmC1C,CAAnC,CAAP,EAA6C,MAAI,KAAKgC,gBAAL,CAAsB2B,IAA1E,EAA+E;;IAAO,MAAMrD,CAAC,GAAC;MAACmD,gBAAgB,EAACvD,CAAlB;MAAoBwD,aAAa,EAACtD;IAAlC,CAAR;IAAA,MAA6CI,CAAC,GAAC,KAAKoD,sBAAL,CAA4BhE,CAA5B,EAA8BU,CAA9B,EAAgC,KAAK0B,gBAArC,CAA/C;IAAA,MAAsG;MAAC6B,SAAS,EAACpD,CAAX;MAAaqD,UAAU,EAACjD;IAAxB,IAA2BL,CAAjI;IAAA,MAAmIO,CAAC,GAAC,MAAM,KAAKgD,kCAAL,CAAwCtD,CAAxC,EAA0CI,CAA1C,EAA4Cb,CAA5C,CAA3I;;IAA0LW,CAAC,CAACI,CAAD,CAAD,IAAM,KAAKiD,oCAAL,CAA0CpE,CAA1C,EAA4CmB,CAA5C,EAA8CF,CAA9C,EAAgDP,CAAhD,CAAN;EAAyD;;EAAAgD,WAAW,CAAC1D,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAKgC,gBAAL,CAAsBiB,GAAtB,CAA0BrD,CAA1B,GAA6B,KAAKqE,WAAL,CAAiBrE,CAAjB,EAAmBE,CAAnB,EAAqBE,CAArB,CAA7B;EAAqD;;EAAAiE,WAAW,CAACrE,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAKuC,QAAL,CAAc2B,GAAd,CAAkB,KAAKC,YAAL,CAAkBvE,CAAlB,EAAoBE,CAApB,CAAlB,EAAyCE,CAAzC,EAA2C,KAAKoE,kBAAL,CAAwBpE,CAAxB,CAA3C;EAAuE;;EAAA4D,sBAAsB,CAAChE,CAAD,EAAG;IAAC6D,gBAAgB,EAAC3D,CAAlB;IAAoB4D,aAAa,EAAC1D;EAAlC,CAAH,EAAwCE,CAAxC,EAA0C;IAAC,MAAME,CAAC,GAAC,IAAI6B,GAAJ,EAAR;IAAA,MAAgB3B,CAAC,GAAC,IAAI+D,KAAJ,EAAlB;;IAA4B,KAAI,MAAM5D,CAAV,IAAeX,CAAf,EAAiBQ,CAAC,CAACG,CAAC,CAAC6D,KAAH,CAAD,GAAWtE,CAAC,CAACS,CAAC,CAAC8D,IAAH,CAAZ;;IAAqB,MAAM/D,CAAC,GAAC,IAAIyB,GAAJ,EAAR;;IAAgB,KAAI,IAAIxB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACb,CAAC,CAACwD,MAAhB,EAAuB3C,CAAC,EAAxB,EAA2B;MAAC,MAAMT,CAAC,GAACJ,CAAC,CAACa,CAAD,CAAT;MAAa,IAAGP,CAAC,CAACsE,GAAF,CAAMxE,CAAN,CAAH,EAAY,KAAI,MAAMJ,CAAV,IAAeE,CAAf,EAAiB;QAAC,MAAMA,CAAC,GAAC,KAAK2E,UAAL,CAAgBzE,CAAhB,EAAkBJ,CAAC,CAAC0E,KAApB,CAAR;;QAAmC,KAAK,CAAL,KAASxE,CAAT,IAAYM,CAAC,CAAC6C,GAAF,CAAMjD,CAAN,GAASQ,CAAC,CAACyC,GAAF,CAAMrD,CAAC,CAAC2E,IAAR,CAArB,IAAoCjE,CAAC,CAACV,CAAC,CAAC0E,KAAH,CAAD,CAAW7D,CAAX,IAAcX,CAAlD;MAAoD;IAAC;;IAAA,OAAM;MAAC+D,SAAS,EAACQ,KAAK,CAACK,IAAN,CAAWtE,CAAX,CAAX;MAAyB0D,UAAU,EAACO,KAAK,CAACK,IAAN,CAAWlE,CAAX;IAApC,CAAN;EAAyD;;EAAAiE,UAAU,CAAC7E,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAME,CAAC,GAAC,KAAK2E,8BAAL,CAAoC/E,CAApC,EAAsCE,CAAtC,CAAR;;IAAiD,IAAG,KAAK,CAAL,KAASE,CAAZ,EAAc,OAAOA,CAAP;;IAAS,MAAME,CAAC,GAAC,KAAKiE,YAAL,CAAkBvE,CAAlB,EAAoBE,CAApB,CAAR;;IAA+B,OAAO,KAAKyC,QAAL,CAAczB,GAAd,CAAkBZ,CAAlB,CAAP;EAA4B;;EAAAyE,8BAA8B,CAAC/E,CAAD,EAAGE,CAAH,EAAK;IAAC,IAAG,CAACa,CAAC,CAAC,KAAKyB,0BAAN,CAAL,EAAuC,KAAI,MAAMpC,CAAV,IAAe,KAAKoC,0BAApB,EAA+C;MAAC,IAAGpC,CAAC,CAAC4E,QAAF,KAAahF,CAAhB,EAAkB;MAAS,MAAMM,CAAC,GAACF,CAAC,CAACc,GAAF,CAAMhB,CAAN,CAAR;MAAiB,IAAG,KAAK,CAAL,KAASI,CAAZ,EAAc,OAAOA,CAAP;IAAS;EAAC;;EAAAiE,YAAY,CAACvE,CAAD,EAAGE,CAAH,EAAK;IAAC,OAAO,GAAEF,CAAE,IAAGE,CAAE,EAAhB;EAAkB;;EAAwC,MAAlCiE,kCAAkC,CAACnE,CAAD,EAAGE,CAAH,EAAKM,CAAL,EAAO;IAAC,IAAG,MAAIR,CAAC,CAACwD,MAAN,IAAc,MAAItD,CAAC,CAACsD,MAAvB,EAA8B,OAAO,IAAP;IAAYxD,CAAC,GAACA,CAAC,CAACiF,IAAF,CAAQ,CAACjF,CAAD,EAAGE,CAAH,KAAOF,CAAC,GAACE,CAAjB,CAAF,EAAuB,KAAKiC,iCAAL,KAAyC,KAAKA,iCAAL,GAAuC,CAAC,CAAxC,EAA0C,KAAK+C,iCAAL,EAAnF,CAAvB;IAAoJ,MAAMxE,CAAC,GAACO,CAAC,CAAC,KAAKiB,KAAL,CAAWiD,eAAZ,CAAT;IAAA,MAAsCvE,CAAC,GAACF,CAAC,CAAC0E,WAAF,EAAxC;IAAwDxE,CAAC,CAACyE,KAAF,GAAQ,KAAR,EAAczE,CAAC,CAAC0E,cAAF,GAAiB,CAAC,CAAhC,EAAkC1E,CAAC,CAAC2E,SAAF,GAAY,CAAC7E,CAAC,CAAC8E,aAAH,EAAiB,GAAGtF,CAApB,CAA9C,EAAqEU,CAAC,CAAC6E,SAAF,GAAY,CAAC,CAAlF,EAAoF7E,CAAC,CAACqD,SAAF,GAAYjE,CAAhG;IAAkG,MAAMa,CAAC,GAACc,CAAC,CAACjB,CAAD,CAAT;IAAA,MAAaK,CAAC,GAACf,CAAC,CAACwD,MAAF,GAAS3C,CAAT,GAAWT,CAAC,CAACJ,CAAD,EAAGa,CAAH,CAAD,CAAO6E,GAAP,CAAY1F,CAAC,IAAE;MAAC,MAAME,CAAC,GAACU,CAAC,CAAC+E,KAAF,EAAR;MAAkB,OAAOzF,CAAC,CAAC+D,SAAF,GAAYjE,CAAZ,EAAcM,CAAC,CAACuB,CAAC,CAACnB,CAAD,EAAGR,CAAH,EAAK;QAAC8C,MAAM,EAACxC;MAAR,CAAL,CAAF,CAAtB;IAA0C,CAA5E,CAAX,GAA0F,CAACF,CAAC,CAACuB,CAAC,CAACnB,CAAD,EAAGE,CAAH,EAAK;MAACoC,MAAM,EAACxC;IAAR,CAAL,CAAF,CAAF,CAAzG;IAAgI,OAAM,CAAC,MAAMoF,OAAO,CAACC,GAAR,CAAY9E,CAAZ,CAAP,EAAuB+E,MAAvB,CAA+B,CAAC9F,CAAD,EAAGE,CAAH,KAAOF,CAAC,CAAC+F,MAAF,CAAS7F,CAAC,CAAC8F,EAAF,GAAK9F,CAAC,CAAC+F,KAAF,CAAQC,QAAb,GAAsB,EAA/B,CAAtC,EAA0E,EAA1E,CAAN;EAAoF;;EAAAhB,iCAAiC,GAAE;IAAC,IAAIlF,CAAC,GAAE,+JAA8JyB,CAAC,CAAC,KAAKgB,6BAAN,CAAqC,wDAA3M;IAAmQ,MAAMvC,CAAC,GAAC,KAAKgC,KAAL,CAAWiE,UAAnB;IAA8BjG,CAAC,IAAEA,CAAC,CAACkG,MAAL,GAAYpG,CAAC,IAAG,KAAIE,CAAC,CAACmG,MAAF,CAASC,GAAI,sBAAqBpG,CAAC,CAACqG,EAAG,YAA3D,GAAuEvG,CAAC,IAAG,KAAI,KAAKkC,KAAL,CAAWsE,SAAX,CAAqBC,IAAK,GAAzG,EAA4G3E,CAAC,CAAC4E,IAAF,CAAO,mBAAP,EAA2B,KAAKxE,KAAL,CAAWyE,KAAtC,EAA6C,GAAE3G,CAAE,GAAjD,CAA5G;EAAiK;;EAAAoE,oCAAoC,CAACpE,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAACyD,gBAAgB,EAACvD,CAAlB;IAAoBwD,aAAa,EAACtD;EAAlC,CAAP,EAA4C;IAAC,MAAME,CAAC,GAACO,CAAC,CAAC,KAAKiB,KAAL,CAAWiD,eAAZ,CAAD,CAA8BK,aAAtC;IAAA,MAAoD5E,CAAC,GAACR,CAAC,CAACsF,GAAF,CAAO1F,CAAC,IAAEQ,CAAC,CAACR,CAAD,CAAX,CAAtD;IAAA,MAAuEa,CAAC,GAAC,IAAI+F,GAAJ,CAAQtG,CAAC,CAACoF,GAAF,CAAO1F,CAAC,IAAE,CAACA,CAAC,CAAC2E,IAAH,EAAQ3E,CAAC,CAAC0E,KAAV,CAAV,CAAR,CAAzE;IAAA,MAA+G3D,CAAC,GAACX,CAAC,CAACsF,GAAF,CAAO1F,CAAC,IAAEa,CAAC,CAACK,GAAF,CAAMlB,CAAN,CAAV,CAAjH;IAAA,MAAsImB,CAAC,GAAC,IAAIyF,GAAJ,CAAQnC,KAAK,CAACK,IAAN,CAAW9E,CAAX,EAAc,CAACA,CAAD,EAAGE,CAAH,KAAO,CAACF,CAAD,EAAGE,CAAH,CAArB,CAAR,CAAxI;;IAA8K,KAAI,MAAMe,CAAV,IAAef,CAAf,EAAiB;MAAC,MAAMF,CAAC,GAACiB,CAAC,CAAC4F,UAAF,CAAanG,CAAb,CAAR;;MAAwB,KAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAACoD,MAAhB,EAAuBtD,CAAC,EAAxB,EAA2B;QAAC,MAAMI,CAAC,GAACS,CAAC,CAACb,CAAD,CAAT;QAAA,MAAaM,CAAC,GAACW,CAAC,CAACD,GAAF,CAAMlB,CAAN,CAAf;QAAA,MAAwBU,CAAC,GAACO,CAAC,CAAC4F,UAAF,CAAazG,CAAC,CAACF,CAAD,CAAd,CAA1B;QAA6CU,CAAC,CAACV,CAAD,CAAD,CAAKM,CAAL,IAAQE,CAAR,EAAU,KAAK2D,WAAL,CAAiBrE,CAAjB,EAAmBM,CAAnB,EAAqBI,CAArB,CAAV;MAAkC;IAAC;EAAC;;EAAA8D,kBAAkB,CAACxE,CAAD,EAAG;IAAC,OAAM,YAAU,OAAOA,CAAjB,GAAmBU,CAAC,CAACV,CAAD,CAApB,GAAwBY,CAAC,EAA/B;EAAkC;;EAA4B,MAAtBmC,sBAAsB,CAAC7C,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAK8B,KAAb;IAAmB,IAAG,MAAM9B,CAAC,CAAC0G,IAAF,CAAO;MAAC9D,MAAM,EAAC9C;IAAR,CAAP,CAAN,EAAyB,KAAKkC,gBAAL,CAAsB2E,KAAtB,EAAzB,EAAuDhG,CAAC,CAACX,CAAC,CAAC+E,eAAH,CAAD,IAAsB,CAAC/E,CAAC,CAAC+E,eAAF,CAAkB6B,YAAlB,EAAgCC,UAAhC,EAA4CC,sBAA7H,EAAoJ;;IAAO,MAAM5G,CAAC,GAAC,KAAK6G,kCAAL,EAAR;;IAAkD,IAAGpG,CAAC,CAACT,CAAD,CAAJ,EAAQ,OAAO,IAAP;IAAY,MAAMI,CAAC,GAACN,CAAC,CAAC+E,eAAF,CAAkBiC,OAA1B;IAAA,MAAkCxG,CAAC,GAAC,MAAMJ,CAAC,CAACR,CAAC,CAAE,GAAEI,CAAC,CAAC+E,eAAF,CAAkBmB,GAAI,iBAA1B,EAA2C;MAACe,MAAM,EAAC,MAAR;MAAeC,KAAK,EAAC;QAACtF,CAAC,EAAC,MAAH;QAAUuF,aAAa,EAAC,CAAC,CAAzB;QAA2BC,MAAM,EAAE,GAAE9G,CAAE,EAAvC;QAAyC+G,aAAa,EAAC,CAAC,CAAxD;QAA0DC,aAAa,EAAC,CAAC,CAAzE;QAA2EC,aAAa,EAAC,CAAC,CAA1F;QAA4FC,eAAe,EAACC,IAAI,CAACC,SAAL,CAAe,CAAC;UAACvB,EAAE,EAAC7F,CAAJ;UAAMqH,SAAS,EAACzH;QAAhB,CAAD,CAAf;MAA5G,CAArB;MAAuK0H,OAAO,EAACC,CAA/K;MAAiLjF,MAAM,EAAC9C;IAAxL,CAA3C,CAAF,CAA3C;IAAA,MAAqRW,CAAC,GAACD,CAAC,CAACoF,EAAF,IAAMpF,CAAC,CAACqF,KAAF,CAAQiC,IAAR,EAAcC,KAApB,GAA0BhH,CAAC,CAACP,CAAC,CAACqF,KAAF,CAAQiC,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAD,EAAuB,WAAvB,EAAmC,SAAnC,CAA3B,GAAyE,IAAhW;;IAAqW,IAAG9G,CAAC,CAACR,CAAD,CAAJ,EAAQ;MAAC,MAAMb,CAAC,GAACoI,IAAI,CAACC,GAAL,CAAS,KAAK5F,6BAAd,EAA4C5B,CAAC,CAAC2C,MAA9C,CAAR;MAA8DxD,CAAC,GAACa,CAAC,CAAC2C,MAAJ,KAAa,KAAKrB,iCAAL,GAAuC,CAAC,CAArD;MAAwD,MAAMjC,CAAC,GAACW,CAAC,CAACoE,IAAF,CAAQ,CAACjF,CAAD,EAAGE,CAAH,KAAOF,CAAC,GAACE,CAAjB,CAAR;;MAA6B,KAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAd,EAAgBI,CAAC,EAAjB,EAAoB,KAAKgC,gBAAL,CAAsBiB,GAAtB,CAA0BnD,CAAC,CAACE,CAAD,CAA3B;IAAgC;EAAC;;EAAA+G,kCAAkC,GAAE;IAAC,MAAMnH,CAAC,GAAC,KAAKkC,KAAb;IAAmB,IAAGb,CAAC,CAACrB,CAAC,CAACsI,sBAAH,CAAD,IAA6BjH,CAAC,CAACrB,CAAC,CAACsI,sBAAF,CAAyBC,UAA1B,CAAjC,EAAuE,OAAOvI,CAAC,CAACsI,sBAAF,CAAyBC,UAAhC;IAA2C,MAAMrI,CAAC,GAACF,CAAC,CAACmF,eAAV;IAA0B,OAAO9D,CAAC,CAACnB,CAAD,CAAD,IAAMmB,CAAC,CAACnB,CAAC,CAACsI,UAAH,CAAP,IAAuBnH,CAAC,CAACnB,CAAC,CAACsI,UAAF,CAAaC,YAAd,CAAxB,GAAoDvI,CAAC,CAACsI,UAAF,CAAaC,YAAjE,GAA8E,IAArF;EAA0F;;EAAQ,IAAJC,IAAI,GAAE;IAAC,MAAM1I,CAAC,GAACyE,KAAK,CAACK,IAAN,CAAW,KAAK1C,gBAAhB,CAAR;IAAA,MAA0ClC,CAAC,GAAC,KAAK4C,4BAAjD;IAAA,MAA8E1C,CAAC,GAAC,IAAhF;IAAqF,OAAM;MAACgC,gBAAgB,EAACpC,CAAlB;MAAoB8C,4BAA4B,EAAC5C,CAAjD;;MAAmD,IAAIyI,4BAAJ,GAAkC;QAAC,OAAOvI,CAAC,CAACqC,6BAAT;MAAuC,CAA7H;;MAA8H,IAAIkG,4BAAJ,CAAiC3I,CAAjC,EAAmC;QAACI,CAAC,CAACqC,6BAAF,GAAgCzC,CAAhC;MAAkC;;IAApM,CAAN;EAA4M;;AAA7uK;;AAA8uK,MAAMsD,CAAN,CAAO;EAACrB,WAAW,CAACjC,CAAD,EAAGE,CAAH,EAAK;IAAC,KAAK8E,QAAL,GAAchF,CAAd,EAAgB,KAAK4I,OAAL,GAAa1I,CAA7B,EAA+B,KAAK2I,OAAL,GAAa,IAAIjC,GAAJ,EAA5C,EAAoD,KAAKkC,KAAL,GAAWC,CAAC,CAACC,MAAjE;EAAwE;;EAAA9H,GAAG,CAAClB,CAAD,EAAG;IAAC,OAAO,KAAK6I,OAAL,CAAa3H,GAAb,CAAiBlB,CAAjB,CAAP;EAA2B;;EAAAiJ,GAAG,CAACjJ,CAAD,EAAGE,CAAH,EAAK;IAAC,KAAKgJ,QAAL,IAAe,KAAKL,OAAL,CAAaI,GAAb,CAAiBjJ,CAAjB,EAAmBE,CAAnB,CAAf;EAAqC;;EAAAqD,QAAQ,GAAE;IAAC,KAAK2F,QAAL,KAAgB,KAAKJ,KAAL,GAAWC,CAAC,CAACI,WAAb,EAAyB,KAAKP,OAAL,CAAarF,QAAb,EAAzC;EAAkE;;EAAAE,MAAM,GAAE;IAAC,KAAKyF,QAAL,KAAgB,KAAKJ,KAAL,GAAWC,CAAC,CAACK,SAAb,EAAuB,KAAKR,OAAL,CAAanF,MAAb,CAAoB,KAAKoF,OAAzB,CAAvB,EAAyD,KAAKA,OAAL,CAAa9B,KAAb,EAAzE;EAA+F;;EAAY,IAARmC,QAAQ,GAAE;IAAC,OAAO,KAAKJ,KAAL,KAAaC,CAAC,CAACC,MAAtB;EAA6B;;AAA3Y;;AAA4Y,IAAID,CAAJ;AAAM,CAAC,UAAS/I,CAAT,EAAW;EAACA,CAAC,CAACA,CAAC,CAACgJ,MAAF,GAAS,CAAV,CAAD,GAAc,QAAd,EAAuBhJ,CAAC,CAACA,CAAC,CAACoJ,SAAF,GAAY,CAAb,CAAD,GAAiB,WAAxC,EAAoDpJ,CAAC,CAACA,CAAC,CAACmJ,WAAF,GAAc,CAAf,CAAD,GAAmB,aAAvE;AAAqF,CAAjG,CAAkGJ,CAAC,KAAGA,CAAC,GAAC,EAAL,CAAnG,CAAD;AAA8G,MAAMd,CAAC,GAAC,GAAR;AAAA,MAAYvF,CAAC,GAAC,GAAd;AAAkB,SAAOV,CAAC,IAAIqH,qBAAZ"},"metadata":{},"sourceType":"module"}