{"ast":null,"code":"import \"core-js/modules/es.regexp.flags.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../Graphic.js\";\nimport s from \"../../../request.js\";\nimport a from \"../../../TimeExtent.js\";\nimport r from \"../../../core/Error.js\";\nimport has from \"../../../core/has.js\";\nimport { JSONMap as o } from \"../../../core/jsonMap.js\";\nimport i from \"../../../core/Loadable.js\";\nimport { isSome as n, isNone as u, unwrap as l } from \"../../../core/maybe.js\";\nimport { setDeepValue as d } from \"../../../core/object.js\";\nimport { debounce as c } from \"../../../core/promiseUtils.js\";\nimport { join as p, dataComponents as h } from \"../../../core/urlUtils.js\";\nimport { property as y } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as m } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport f from \"../../../geometry/Extent.js\";\nimport { fromJSON as g } from \"../../../geometry/support/jsonUtils.js\";\nimport { AssetMapEditFlags as R } from \"../assetEditingSupport.js\";\nimport { createDrawingInfo as F } from \"./support/clientSideDefaults.js\";\nimport b from \"./support/QueryTask.js\";\nimport { isHostedAgolService as I } from \"../../support/arcgisLayerUrl.js\";\nimport { unapplyEditsZUnitScaling as q } from \"../../../rest/query/operations/editsZScale.js\";\nimport { processAttachmentQueryResult as _ } from \"../../../rest/query/operations/queryAttachments.js\";\nimport w from \"../../../geometry/SpatialReference.js\";\nconst O = new o({\n  originalAndCurrentFeatures: \"original-and-current-features\",\n  none: \"none\"\n});\n\nasync function E(e) {\n  if (\"string\" == typeof e) {\n    const t = h(e);\n    return t || {\n      data: e\n    };\n  }\n\n  return new Promise((t, s) => {\n    const a = new FileReader();\n    a.readAsDataURL(e), a.onload = () => t(h(a.result)), a.onerror = e => s(e);\n  });\n}\n\nconst S = new Set([\"Feature Layer\", \"Table\"]),\n      j = new o({\n  Started: \"published\",\n  Publishing: \"publishing\",\n  Stopped: \"unavailable\"\n});\nlet T = class extends i {\n  constructor() {\n    super(...arguments), this.type = \"feature-layer\", this.refresh = c(async () => {\n      await this.load();\n      const e = this.sourceJSON.editingInfo?.lastEditDate;\n      if (null == e) return {\n        dataChanged: !0,\n        updates: {}\n      };\n\n      try {\n        await this._fetchService(null);\n      } catch {\n        return {\n          dataChanged: !0,\n          updates: {}\n        };\n      }\n\n      const t = e !== this.sourceJSON.editingInfo?.lastEditDate;\n      return {\n        dataChanged: t,\n        updates: t ? {\n          editingInfo: this.sourceJSON.editingInfo,\n          extent: this.sourceJSON.extent\n        } : null\n      };\n    });\n  }\n\n  load(e) {\n    const t = n(e) ? e.signal : null;\n    return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON, t)), Promise.resolve(this);\n  }\n\n  get queryTask() {\n    const {\n      capabilities: {\n        query: {\n          supportsFormatPBF: e\n        }\n      },\n      parsedUrl: t,\n      dynamicDataSource: s,\n      infoFor3D: a,\n      gdbVersion: r,\n      spatialReference: o,\n      fieldsIndex: i\n    } = this.layer,\n          n = has(\"featurelayer-pbf\") && e && u(a) ? \"pbf\" : \"json\";\n    return new b({\n      url: t.path,\n      format: n,\n      fieldsIndex: i,\n      infoFor3D: a,\n      dynamicDataSource: s,\n      gdbVersion: r,\n      sourceSpatialReference: o\n    });\n  }\n\n  async addAttachment(e, t) {\n    await this.load();\n\n    const a = e.attributes[this.layer.objectIdField],\n          r = this.layer.parsedUrl.path + \"/\" + a + \"/addAttachment\",\n          o = this._getLayerRequestOptions(),\n          i = this._getFormDataForAttachment(t, o.query);\n\n    try {\n      const e = await s(r, {\n        body: i\n      });\n      return this._createFeatureEditResult(e.data.addAttachmentResult);\n    } catch (n) {\n      throw this._createAttachmentErrorResult(a, n);\n    }\n  }\n\n  async updateAttachment(e, t, a) {\n    await this.load();\n\n    const r = e.attributes[this.layer.objectIdField],\n          o = this.layer.parsedUrl.path + \"/\" + r + \"/updateAttachment\",\n          i = this._getLayerRequestOptions({\n      query: {\n        attachmentId: t\n      }\n    }),\n          n = this._getFormDataForAttachment(a, i.query);\n\n    try {\n      const e = await s(o, {\n        body: n\n      });\n      return this._createFeatureEditResult(e.data.updateAttachmentResult);\n    } catch (u) {\n      throw this._createAttachmentErrorResult(r, u);\n    }\n  }\n\n  async applyEdits(e, t) {\n    await this.load();\n\n    const a = this.layer.infoFor3D,\n          r = n(a),\n          o = r || t?.globalIdUsed,\n          i = e.addFeatures.map(e => this._serializeFeature(e, a)),\n          u = e.updateFeatures.map(e => this._serializeFeature(e, a)),\n          d = this._getFeatureIds(e.deleteFeatures, o);\n\n    q(i, u, this.layer.spatialReference);\n    const c = [],\n          p = [],\n          h = [...e.deleteAttachments];\n\n    for (const s of e.addAttachments) c.push(await this._serializeAttachment(s));\n\n    for (const s of e.updateAttachments) p.push(await this._serializeAttachment(s));\n\n    const y = c.length || p.length || h.length ? {\n      adds: c,\n      updates: p,\n      deletes: h\n    } : null;\n    let m,\n        f = null;\n\n    if (r) {\n      f = new Map();\n      const t = [];\n\n      for (const a of e.addAssets) t.push(this._serializeAssetMapEditAndUploadAssets(a, f));\n\n      const s = await Promise.all(t);\n      m = s.length ? {\n        adds: s,\n        updates: [],\n        deletes: []\n      } : void 0;\n    }\n\n    const g = {\n      gdbVersion: t?.gdbVersion || this.layer.gdbVersion,\n      rollbackOnFailure: t?.rollbackOnFailureEnabled,\n      useGlobalIds: o,\n      returnEditMoment: t?.returnEditMoment,\n      usePreviousEditMoment: t?.usePreviousEditMoment,\n      sessionId: t?.sessionId\n    };\n    t?.returnServiceEditsOption ? (g.edits = JSON.stringify([{\n      id: this.layer.layerId,\n      adds: i,\n      updates: u,\n      deletes: d,\n      attachments: y,\n      assetMaps: l(m)\n    }]), g.returnServiceEditsOption = O.toJSON(t?.returnServiceEditsOption), g.returnServiceEditsInSourceSR = t?.returnServiceEditsInSourceSR) : (g.adds = i.length ? JSON.stringify(i) : null, g.updates = u.length ? JSON.stringify(u) : null, g.deletes = d.length ? o ? JSON.stringify(d) : d.join(\",\") : null, g.attachments = y && JSON.stringify(y), g.assetMaps = n(m) ? JSON.stringify(m) : void 0);\n\n    const R = this._getLayerRequestOptions({\n      method: \"post\",\n      query: g\n    }),\n          F = t?.returnServiceEditsOption ? this.layer.url : this.layer.parsedUrl.path,\n          b = await s(F + \"/applyEdits\", R);\n\n    if (r && null != b.data && null != b.data.assetMaps) {\n      const e = b.data,\n            t = this.layer.objectIdField,\n            a = [];\n\n      for (const s of e.addResults) s.success && a.push(s.objectId);\n\n      for (const s of e.updateResults) s.success && a.push(s.objectId);\n\n      const r = this._createRequestQueryOptions(),\n            o = await s(F + \"/query\", { ...r,\n        query: {\n          f: \"json\",\n          formatOf3DObjects: \"3D_glb\",\n          where: `OBJECTID IN (${a.join(\",\")})`,\n          outFields: `${t}`\n        }\n      });\n\n      if (o && o.data && o.data.assetMaps && n(f)) {\n        const e = o.data.assetMaps;\n\n        for (const t of e) {\n          const e = f.get(t.parentGlobalId).geometry;\n          n(e) && \"mesh\" === e.type && e.updateExternalSource({\n            source: [{\n              name: t.assetName,\n              source: t.assetName\n            }],\n            extent: e.extent\n          });\n        }\n      }\n    }\n\n    return this._createEditsResult(b);\n  }\n\n  async deleteAttachments(e, t) {\n    await this.load();\n    const a = e.attributes[this.layer.objectIdField],\n          r = this.layer.parsedUrl.path + \"/\" + a + \"/deleteAttachments\";\n\n    try {\n      return (await s(r, this._getLayerRequestOptions({\n        query: {\n          attachmentIds: t.join(\",\")\n        },\n        method: \"post\"\n      }))).data.deleteAttachmentResults.map(this._createFeatureEditResult);\n    } catch (o) {\n      throw this._createAttachmentErrorResult(a, o);\n    }\n  }\n\n  fetchRecomputedExtents(e = {}) {\n    const t = e.signal;\n    return this.load({\n      signal: t\n    }).then(async () => {\n      const t = this._getLayerRequestOptions({ ...e,\n        query: {\n          returnUpdates: !0\n        }\n      }),\n            {\n        layerId: r,\n        url: o\n      } = this.layer,\n            {\n        data: i\n      } = await s(`${o}/${r}`, t),\n            {\n        id: n,\n        extent: u,\n        fullExtent: l,\n        timeExtent: d\n      } = i,\n            c = u || l;\n\n      return {\n        id: n,\n        fullExtent: c && f.fromJSON(c),\n        timeExtent: d && a.fromJSON({\n          start: d[0],\n          end: d[1]\n        })\n      };\n    });\n  }\n\n  async queryAttachments(e, t = {}) {\n    const {\n      parsedUrl: a\n    } = this.layer,\n          r = a.path;\n    await this.load();\n\n    const o = this._getLayerRequestOptions(t);\n\n    if (!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")) {\n      const {\n        objectIds: t\n      } = e,\n            a = [];\n\n      for (const e of t) {\n        const t = r + \"/\" + e + \"/attachments\";\n        a.push(s(t, o));\n      }\n\n      return Promise.all(a).then(e => t.map((t, s) => ({\n        parentObjectId: t,\n        attachmentInfos: e[s].data.attachmentInfos\n      }))).then(e => _(e, r));\n    }\n\n    return this.queryTask.executeAttachmentQuery(e, o);\n  }\n\n  async queryFeatures(e, t) {\n    return await this.load(), this.queryTask.execute(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryFeaturesJSON(e, t) {\n    return await this.load(), this.queryTask.executeJSON(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForIds(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryFeatureCount(e, t) {\n    return await this.load(), this.queryTask.executeForCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryExtent(e, t) {\n    return await this.load(), this.queryTask.executeForExtent(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryRelatedFeatures(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQuery(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryRelatedFeaturesCount(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQueryForCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopFeatures(e, t) {\n    return await this.load(), this.queryTask.executeTopFeaturesQuery(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForTopIds(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopExtents(e, t) {\n    return await this.load(), this.queryTask.executeForTopExtents(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopCount(e, t) {\n    return await this.load(), this.queryTask.executeForTopCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async fetchPublishingStatus() {\n    if (!I(this.layer.url)) return \"unavailable\";\n    const e = p(this.layer.url, \"status\"),\n          t = await s(e, {\n      query: {\n        f: \"json\"\n      }\n    });\n    return j.fromJSON(t.data.status);\n  }\n\n  _createRequestQueryOptions(e) {\n    const t = { ...this.layer.customParameters,\n      token: this.layer.apiKey,\n      ...e?.query\n    };\n    return this.layer.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t;\n  }\n\n  async _fetchService(e, t) {\n    if (!e) {\n      const {\n        data: a\n      } = await s(this.layer.parsedUrl.path, this._getLayerRequestOptions({\n        query: has(\"featurelayer-advanced-symbols\") ? {\n          returnAdvancedSymbols: !0\n        } : {},\n        signal: t\n      }));\n      e = a;\n    }\n\n    this.sourceJSON = this._patchServiceJSON(e);\n    const a = e.type;\n    if (!S.has(a)) throw new r(\"feature-layer-source:unsupported-type\", `Source type \"${a}\" is not supported`);\n  }\n\n  _patchServiceJSON(e) {\n    if (\"Table\" !== e.type && e.geometryType && !e?.drawingInfo?.renderer && !e.defaultSymbol) {\n      const t = F(e.geometryType).renderer;\n      d(\"drawingInfo.renderer\", t, e);\n    }\n\n    return \"esriGeometryMultiPatch\" === e.geometryType && e.infoFor3D && (e.geometryType = \"mesh\"), e;\n  }\n\n  _serializeFeature(e, t) {\n    const {\n      geometry: s,\n      attributes: a\n    } = e;\n\n    if (n(t) && n(e.geometry) && \"mesh\" === e.geometry.type) {\n      const s = { ...a\n      },\n            r = e.geometry,\n            o = r.origin,\n            i = r.transform;\n\n      if (s[t.transformFieldRoles.originX] = o.x, s[t.transformFieldRoles.originY] = o.y, s[t.transformFieldRoles.originZ] = o.z, n(i)) {\n        const e = i.translation,\n              a = i.scale,\n              r = i.rotation;\n        s[t.transformFieldRoles.translationX] = e[0], s[t.transformFieldRoles.translationY] = e[1], s[t.transformFieldRoles.translationZ] = e[2], s[t.transformFieldRoles.scaleX] = a[0], s[t.transformFieldRoles.scaleY] = a[1], s[t.transformFieldRoles.scaleZ] = a[2], s[t.transformFieldRoles.rotationX] = r[0], s[t.transformFieldRoles.rotationY] = r[1], s[t.transformFieldRoles.rotationZ] = r[2], s[t.transformFieldRoles.rotationDeg] = r[3];\n      }\n\n      return {\n        geometry: null,\n        attributes: s\n      };\n    }\n\n    return u(s) ? {\n      attributes: a\n    } : \"mesh\" === s.type || \"extent\" === s.type ? null : {\n      geometry: s.toJSON(),\n      attributes: a\n    };\n  }\n\n  async _serializeAttachment(e) {\n    const {\n      feature: t,\n      attachment: s\n    } = e,\n          {\n      globalId: a,\n      name: r,\n      contentType: o,\n      data: i,\n      uploadId: n\n    } = s,\n          u = {\n      globalId: a,\n      parentGlobalId: null,\n      contentType: null,\n      name: null,\n      uploadId: null,\n      data: null\n    };\n    if (t && (u.parentGlobalId = \"attributes\" in t ? t.attributes && t.attributes[this.layer.globalIdField] : t.globalId), n) u.uploadId = n;else if (i) {\n      const e = await E(i);\n      u.contentType = e.mediaType, u.data = e.data, i instanceof File && (u.name = i.name);\n    }\n    return r && (u.name = r), o && (u.contentType = o), u;\n  }\n\n  async _serializeAssetMapEditAndUploadAssets(e, t) {\n    const a = this.layer.url;\n    let o = null;\n\n    try {\n      const t = new Blob([e.data], {\n        type: e.mimeType\n      }),\n            i = new FormData();\n      i.append(\"f\", \"json\"), i.append(\"file\", t, `${e.assetName}`);\n      const n = {\n        body: i,\n        method: \"post\",\n        responseType: \"json\"\n      },\n            {\n        data: u\n      } = await s(`${a}/uploads/upload`, n);\n      if (!u.success) throw new r(\"feature-layer-source:upload-failure\", \"Expected upload to be successfull.\");\n      o = {\n        assetType: e.assetType,\n        assetUploadId: u.item.itemID\n      };\n    } catch (h) {\n      o = null;\n    }\n\n    if (u(o)) {\n      const t = await E(new Blob([e.data]));\n      if (!t.isBase64) throw new r(\"feature-layer-source:uploadAssets-failure\", \"Expected gltf data in base64 format after conversion.\");\n      o = {\n        assetType: e.assetType,\n        assetData: t.data\n      };\n    }\n\n    if (u(o)) throw new r(\"feature-layer-source:uploadAssets-failure\", \"Unable to prepare uploadAsset request options.\");\n    const i = {\n      method: \"post\",\n      query: {\n        f: \"json\",\n        assets: JSON.stringify([o])\n      },\n      responseType: \"json\"\n    },\n          n = await s(p(this.layer.parsedUrl.path, \"uploadAssets\"), i);\n    if (1 !== n.data.uploadResults.length || !n.data.uploadResults[0].success) throw new r(\"feature-layer-source:uploadAssets-failure\", \"Bad response.\");\n    const l = n.data.uploadResults[0].assetHash,\n          d = [];\n    e.flags & R.PROJECT_VERTICES && d.push(\"PROJECT_VERTICES\");\n    const c = {\n      globalId: e.assetMapGlobalId,\n      parentGlobalId: e.featureGlobalId,\n      assetName: e.assetName,\n      assetHash: l,\n      flags: d\n    };\n    return t.set(e.featureGlobalId, e.feature), c;\n  }\n\n  _getFeatureIds(e, t) {\n    const s = e[0];\n    return s ? this._canUseGlobalIds(t, e) ? this._getGlobalIdsFromFeatureIdentifier(e) : \"objectId\" in s ? this._getObjectIdsFromFeatureIdentifier(e) : this._getIdsFromFeatures(e) : [];\n  }\n\n  _getIdsFromFeatures(e) {\n    const t = this.layer.objectIdField;\n    return e.map(e => e.attributes && e.attributes[t]);\n  }\n\n  _canUseGlobalIds(e, t) {\n    return e && \"globalId\" in t[0];\n  }\n\n  _getObjectIdsFromFeatureIdentifier(e) {\n    return e.map(e => e.objectId);\n  }\n\n  _getGlobalIdsFromFeatureIdentifier(e) {\n    return e.map(e => e.globalId);\n  }\n\n  _createEditsResult(e) {\n    const t = e.data,\n          {\n      layerId: s\n    } = this.layer,\n          a = [];\n    let r = null;\n    if (Array.isArray(t)) for (const n of t) a.push({\n      id: n.id,\n      editedFeatures: n.editedFeatures\n    }), n.id === s && (r = {\n      addResults: n.addResults,\n      updateResults: n.updateResults,\n      deleteResults: n.deleteResults,\n      attachments: n.attachments,\n      editMoment: n.editMoment\n    });else r = t;\n    const o = r?.attachments,\n          i = {\n      addFeatureResults: r.addResults ? r.addResults.map(this._createFeatureEditResult, this) : [],\n      updateFeatureResults: r.updateResults ? r.updateResults.map(this._createFeatureEditResult, this) : [],\n      deleteFeatureResults: r.deleteResults ? r.deleteResults.map(this._createFeatureEditResult, this) : [],\n      addAttachmentResults: o && o.addResults ? o.addResults.map(this._createFeatureEditResult, this) : [],\n      updateAttachmentResults: o && o.updateResults ? o.updateResults.map(this._createFeatureEditResult, this) : [],\n      deleteAttachmentResults: o && o.deleteResults ? o.deleteResults.map(this._createFeatureEditResult, this) : []\n    };\n\n    if (r.editMoment && (i.editMoment = r.editMoment), a.length > 0) {\n      i.editedFeatureResults = [];\n\n      for (const e of a) {\n        const {\n          adds: t,\n          updates: s,\n          deletes: a,\n          spatialReference: r\n        } = e.editedFeatures,\n              o = r ? new w(r) : null;\n        i.editedFeatureResults.push({\n          layerId: e.id,\n          editedFeatures: {\n            adds: t?.map(e => this._createEditedFeature(e, o)) || [],\n            updates: s?.map(e => ({\n              original: this._createEditedFeature(e[0], o),\n              current: this._createEditedFeature(e[1], o)\n            })) || [],\n            deletes: a?.map(e => this._createEditedFeature(e, o)) || [],\n            spatialReference: o\n          }\n        });\n      }\n    }\n\n    return i;\n  }\n\n  _createEditedFeature(e, s) {\n    return new t({\n      attributes: e.attributes,\n      geometry: g({ ...e.geometry,\n        spatialReference: s\n      })\n    });\n  }\n\n  _createFeatureEditResult(e) {\n    const t = !0 === e.success ? null : e.error || {\n      code: void 0,\n      description: void 0\n    };\n    return {\n      objectId: e.objectId,\n      globalId: e.globalId,\n      error: t ? new r(\"feature-layer-source:edit-failure\", t.description, {\n        code: t.code\n      }) : null\n    };\n  }\n\n  _createAttachmentErrorResult(e, t) {\n    const s = t.details.messages && t.details.messages[0] || t.message,\n          a = t.details.httpStatus || t.details.messageCode;\n    return {\n      objectId: e,\n      globalId: null,\n      error: new r(\"feature-layer-source:attachment-failure\", s, {\n        code: a\n      })\n    };\n  }\n\n  _getFormDataForAttachment(e, t) {\n    const s = e instanceof FormData ? e : e && e.elements ? new FormData(e) : null;\n    if (s) for (const a in t) {\n      const e = t[a];\n      null != e && (s.set ? s.set(a, e) : s.append(a, e));\n    }\n    return s;\n  }\n\n  _getLayerRequestOptions(e = {}) {\n    const {\n      parsedUrl: t,\n      gdbVersion: s,\n      dynamicDataSource: a\n    } = this.layer;\n    return { ...e,\n      query: {\n        gdbVersion: s,\n        layer: a ? JSON.stringify({\n          source: a\n        }) : void 0,\n        ...t.query,\n        f: \"json\",\n        ...this._createRequestQueryOptions(e)\n      },\n      responseType: \"json\"\n    };\n  }\n\n};\ne([y()], T.prototype, \"type\", void 0), e([y({\n  constructOnly: !0\n})], T.prototype, \"layer\", void 0), e([y({\n  readOnly: !0\n})], T.prototype, \"queryTask\", null), T = e([m(\"esri.layers.graphics.sources.FeatureLayerSource\")], T);\nconst A = T;\nexport { A as default };","map":{"version":3,"names":["_","e","t","s","a","r","has","JSONMap","o","i","isSome","n","isNone","u","unwrap","l","setDeepValue","d","debounce","c","join","p","dataComponents","h","property","y","subclass","m","f","fromJSON","g","AssetMapEditFlags","R","createDrawingInfo","F","b","isHostedAgolService","I","unapplyEditsZUnitScaling","q","processAttachmentQueryResult","w","O","originalAndCurrentFeatures","none","E","data","Promise","FileReader","readAsDataURL","onload","result","onerror","S","Set","j","Started","Publishing","Stopped","T","constructor","arguments","type","refresh","load","sourceJSON","editingInfo","lastEditDate","dataChanged","updates","_fetchService","extent","signal","addResolvingPromise","layer","resolve","queryTask","capabilities","query","supportsFormatPBF","parsedUrl","dynamicDataSource","infoFor3D","gdbVersion","spatialReference","fieldsIndex","url","path","format","sourceSpatialReference","addAttachment","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","_createFeatureEditResult","addAttachmentResult","_createAttachmentErrorResult","updateAttachment","attachmentId","updateAttachmentResult","applyEdits","globalIdUsed","addFeatures","map","_serializeFeature","updateFeatures","_getFeatureIds","deleteFeatures","deleteAttachments","addAttachments","push","_serializeAttachment","updateAttachments","length","adds","deletes","Map","addAssets","_serializeAssetMapEditAndUploadAssets","all","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","attachments","assetMaps","toJSON","returnServiceEditsInSourceSR","method","addResults","success","objectId","updateResults","_createRequestQueryOptions","formatOf3DObjects","where","outFields","get","parentGlobalId","geometry","updateExternalSource","source","name","assetName","_createEditsResult","attachmentIds","deleteAttachmentResults","fetchRecomputedExtents","then","returnUpdates","fullExtent","timeExtent","start","end","queryAttachments","objectIds","parentObjectId","attachmentInfos","executeAttachmentQuery","queryFeatures","execute","queryFeaturesJSON","executeJSON","queryObjectIds","executeForIds","queryFeatureCount","executeForCount","queryExtent","executeForExtent","queryRelatedFeatures","executeRelationshipQuery","queryRelatedFeaturesCount","executeRelationshipQueryForCount","queryTopFeatures","executeTopFeaturesQuery","queryTopObjectIds","executeForTopIds","queryTopExtents","executeForTopExtents","queryTopCount","executeForTopCount","fetchPublishingStatus","status","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","_patchServiceJSON","geometryType","drawingInfo","renderer","defaultSymbol","origin","transform","transformFieldRoles","originX","x","originY","originZ","z","translation","scale","rotation","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","feature","attachment","globalId","contentType","uploadId","globalIdField","mediaType","File","Blob","mimeType","FormData","append","responseType","assetType","assetUploadId","item","itemID","isBase64","assetData","assets","uploadResults","assetHash","flags","PROJECT_VERTICES","assetMapGlobalId","featureGlobalId","set","_canUseGlobalIds","_getGlobalIdsFromFeatureIdentifier","_getObjectIdsFromFeatureIdentifier","_getIdsFromFeatures","Array","isArray","editedFeatures","deleteResults","editMoment","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","_createEditedFeature","original","current","error","code","description","details","messages","message","httpStatus","messageCode","elements","prototype","constructOnly","readOnly","A","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import s from\"../../../request.js\";import a from\"../../../TimeExtent.js\";import r from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import i from\"../../../core/Loadable.js\";import{isSome as n,isNone as u,unwrap as l}from\"../../../core/maybe.js\";import{setDeepValue as d}from\"../../../core/object.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{join as p,dataComponents as h}from\"../../../core/urlUtils.js\";import{property as y}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import f from\"../../../geometry/Extent.js\";import{fromJSON as g}from\"../../../geometry/support/jsonUtils.js\";import{AssetMapEditFlags as R}from\"../assetEditingSupport.js\";import{createDrawingInfo as F}from\"./support/clientSideDefaults.js\";import b from\"./support/QueryTask.js\";import{isHostedAgolService as I}from\"../../support/arcgisLayerUrl.js\";import{unapplyEditsZUnitScaling as q}from\"../../../rest/query/operations/editsZScale.js\";import{processAttachmentQueryResult as _}from\"../../../rest/query/operations/queryAttachments.js\";import w from\"../../../geometry/SpatialReference.js\";const O=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"});async function E(e){if(\"string\"==typeof e){const t=h(e);return t||{data:e}}return new Promise(((t,s)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(h(a.result)),a.onerror=e=>s(e)}))}const S=new Set([\"Feature Layer\",\"Table\"]),j=new o({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let T=class extends i{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}))}load(e){const t=n(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:t,dynamicDataSource:s,infoFor3D:a,gdbVersion:r,spatialReference:o,fieldsIndex:i}=this.layer,n=has(\"featurelayer-pbf\")&&e&&u(a)?\"pbf\":\"json\";return new b({url:t.path,format:n,fieldsIndex:i,infoFor3D:a,dynamicDataSource:s,gdbVersion:r,sourceSpatialReference:o})}async addAttachment(e,t){await this.load();const a=e.attributes[this.layer.objectIdField],r=this.layer.parsedUrl.path+\"/\"+a+\"/addAttachment\",o=this._getLayerRequestOptions(),i=this._getFormDataForAttachment(t,o.query);try{const e=await s(r,{body:i});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(a,n)}}async updateAttachment(e,t,a){await this.load();const r=e.attributes[this.layer.objectIdField],o=this.layer.parsedUrl.path+\"/\"+r+\"/updateAttachment\",i=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(a,i.query);try{const e=await s(o,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(r,u)}}async applyEdits(e,t){await this.load();const a=this.layer.infoFor3D,r=n(a),o=r||t?.globalIdUsed,i=e.addFeatures.map((e=>this._serializeFeature(e,a))),u=e.updateFeatures.map((e=>this._serializeFeature(e,a))),d=this._getFeatureIds(e.deleteFeatures,o);q(i,u,this.layer.spatialReference);const c=[],p=[],h=[...e.deleteAttachments];for(const s of e.addAttachments)c.push(await this._serializeAttachment(s));for(const s of e.updateAttachments)p.push(await this._serializeAttachment(s));const y=c.length||p.length||h.length?{adds:c,updates:p,deletes:h}:null;let m,f=null;if(r){f=new Map;const t=[];for(const a of e.addAssets)t.push(this._serializeAssetMapEditAndUploadAssets(a,f));const s=await Promise.all(t);m=s.length?{adds:s,updates:[],deletes:[]}:void 0}const g={gdbVersion:t?.gdbVersion||this.layer.gdbVersion,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:o,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,sessionId:t?.sessionId};t?.returnServiceEditsOption?(g.edits=JSON.stringify([{id:this.layer.layerId,adds:i,updates:u,deletes:d,attachments:y,assetMaps:l(m)}]),g.returnServiceEditsOption=O.toJSON(t?.returnServiceEditsOption),g.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(g.adds=i.length?JSON.stringify(i):null,g.updates=u.length?JSON.stringify(u):null,g.deletes=d.length?o?JSON.stringify(d):d.join(\",\"):null,g.attachments=y&&JSON.stringify(y),g.assetMaps=n(m)?JSON.stringify(m):void 0);const R=this._getLayerRequestOptions({method:\"post\",query:g}),F=t?.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,b=await s(F+\"/applyEdits\",R);if(r&&null!=b.data&&null!=b.data.assetMaps){const e=b.data,t=this.layer.objectIdField,a=[];for(const s of e.addResults)s.success&&a.push(s.objectId);for(const s of e.updateResults)s.success&&a.push(s.objectId);const r=this._createRequestQueryOptions(),o=await s(F+\"/query\",{...r,query:{f:\"json\",formatOf3DObjects:\"3D_glb\",where:`OBJECTID IN (${a.join(\",\")})`,outFields:`${t}`}});if(o&&o.data&&o.data.assetMaps&&n(f)){const e=o.data.assetMaps;for(const t of e){const e=f.get(t.parentGlobalId).geometry;n(e)&&\"mesh\"===e.type&&e.updateExternalSource({source:[{name:t.assetName,source:t.assetName}],extent:e.extent})}}}return this._createEditsResult(b)}async deleteAttachments(e,t){await this.load();const a=e.attributes[this.layer.objectIdField],r=this.layer.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await s(r,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(o){throw this._createAttachmentErrorResult(a,o)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:r,url:o}=this.layer,{data:i}=await s(`${o}/${r}`,t),{id:n,extent:u,fullExtent:l,timeExtent:d}=i,c=u||l;return{id:n,fullExtent:c&&f.fromJSON(c),timeExtent:d&&a.fromJSON({start:d[0],end:d[1]})}}))}async queryAttachments(e,t={}){const{parsedUrl:a}=this.layer,r=a.path;await this.load();const o=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,a=[];for(const e of t){const t=r+\"/\"+e+\"/attachments\";a.push(s(t,o))}return Promise.all(a).then((e=>t.map(((t,s)=>({parentObjectId:t,attachmentInfos:e[s].data.attachmentInfos}))))).then((e=>_(e,r)))}return this.queryTask.executeAttachmentQuery(e,o)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!I(this.layer.url))return\"unavailable\";const e=p(this.layer.url,\"status\"),t=await s(e,{query:{f:\"json\"}});return j.fromJSON(t.data.status)}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:a}=await s(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:has(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:t}));e=a}this.sourceJSON=this._patchServiceJSON(e);const a=e.type;if(!S.has(a))throw new r(\"feature-layer-source:unsupported-type\",`Source type \"${a}\" is not supported`)}_patchServiceJSON(e){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=F(e.geometryType).renderer;d(\"drawingInfo.renderer\",t,e)}return\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),e}_serializeFeature(e,t){const{geometry:s,attributes:a}=e;if(n(t)&&n(e.geometry)&&\"mesh\"===e.geometry.type){const s={...a},r=e.geometry,o=r.origin,i=r.transform;if(s[t.transformFieldRoles.originX]=o.x,s[t.transformFieldRoles.originY]=o.y,s[t.transformFieldRoles.originZ]=o.z,n(i)){const e=i.translation,a=i.scale,r=i.rotation;s[t.transformFieldRoles.translationX]=e[0],s[t.transformFieldRoles.translationY]=e[1],s[t.transformFieldRoles.translationZ]=e[2],s[t.transformFieldRoles.scaleX]=a[0],s[t.transformFieldRoles.scaleY]=a[1],s[t.transformFieldRoles.scaleZ]=a[2],s[t.transformFieldRoles.rotationX]=r[0],s[t.transformFieldRoles.rotationY]=r[1],s[t.transformFieldRoles.rotationZ]=r[2],s[t.transformFieldRoles.rotationDeg]=r[3]}return{geometry:null,attributes:s}}return u(s)?{attributes:a}:\"mesh\"===s.type||\"extent\"===s.type?null:{geometry:s.toJSON(),attributes:a}}async _serializeAttachment(e){const{feature:t,attachment:s}=e,{globalId:a,name:r,contentType:o,data:i,uploadId:n}=s,u={globalId:a,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(i){const e=await E(i);u.contentType=e.mediaType,u.data=e.data,i instanceof File&&(u.name=i.name)}return r&&(u.name=r),o&&(u.contentType=o),u}async _serializeAssetMapEditAndUploadAssets(e,t){const a=this.layer.url;let o=null;try{const t=new Blob([e.data],{type:e.mimeType}),i=new FormData;i.append(\"f\",\"json\"),i.append(\"file\",t,`${e.assetName}`);const n={body:i,method:\"post\",responseType:\"json\"},{data:u}=await s(`${a}/uploads/upload`,n);if(!u.success)throw new r(\"feature-layer-source:upload-failure\",\"Expected upload to be successfull.\");o={assetType:e.assetType,assetUploadId:u.item.itemID}}catch(h){o=null}if(u(o)){const t=await E(new Blob([e.data]));if(!t.isBase64)throw new r(\"feature-layer-source:uploadAssets-failure\",\"Expected gltf data in base64 format after conversion.\");o={assetType:e.assetType,assetData:t.data}}if(u(o))throw new r(\"feature-layer-source:uploadAssets-failure\",\"Unable to prepare uploadAsset request options.\");const i={method:\"post\",query:{f:\"json\",assets:JSON.stringify([o])},responseType:\"json\"},n=await s(p(this.layer.parsedUrl.path,\"uploadAssets\"),i);if(1!==n.data.uploadResults.length||!n.data.uploadResults[0].success)throw new r(\"feature-layer-source:uploadAssets-failure\",\"Bad response.\");const l=n.data.uploadResults[0].assetHash,d=[];e.flags&R.PROJECT_VERTICES&&d.push(\"PROJECT_VERTICES\");const c={globalId:e.assetMapGlobalId,parentGlobalId:e.featureGlobalId,assetName:e.assetName,assetHash:l,flags:d};return t.set(e.featureGlobalId,e.feature),c}_getFeatureIds(e,t){const s=e[0];return s?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):\"objectId\"in s?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map((e=>e.attributes&&e.attributes[t]))}_canUseGlobalIds(e,t){return e&&\"globalId\"in t[0]}_getObjectIdsFromFeatureIdentifier(e){return e.map((e=>e.objectId))}_getGlobalIdsFromFeatureIdentifier(e){return e.map((e=>e.globalId))}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,a=[];let r=null;if(Array.isArray(t))for(const n of t)a.push({id:n.id,editedFeatures:n.editedFeatures}),n.id===s&&(r={addResults:n.addResults,updateResults:n.updateResults,deleteResults:n.deleteResults,attachments:n.attachments,editMoment:n.editMoment});else r=t;const o=r?.attachments,i={addFeatureResults:r.addResults?r.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:r.updateResults?r.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:r.deleteResults?r.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:o&&o.addResults?o.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:o&&o.updateResults?o.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:o&&o.deleteResults?o.deleteResults.map(this._createFeatureEditResult,this):[]};if(r.editMoment&&(i.editMoment=r.editMoment),a.length>0){i.editedFeatureResults=[];for(const e of a){const{adds:t,updates:s,deletes:a,spatialReference:r}=e.editedFeatures,o=r?new w(r):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:t?.map((e=>this._createEditedFeature(e,o)))||[],updates:s?.map((e=>({original:this._createEditedFeature(e[0],o),current:this._createEditedFeature(e[1],o)})))||[],deletes:a?.map((e=>this._createEditedFeature(e,o)))||[],spatialReference:o}})}}return i}_createEditedFeature(e,s){return new t({attributes:e.attributes,geometry:g({...e.geometry,spatialReference:s})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new r(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const s=t.details.messages&&t.details.messages[0]||t.message,a=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new r(\"feature-layer-source:attachment-failure\",s,{code:a})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const a in t){const e=t[a];null!=e&&(s.set?s.set(a,e):s.append(a,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:a}=this.layer;return{...e,query:{gdbVersion:s,layer:a?JSON.stringify({source:a}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}};e([y()],T.prototype,\"type\",void 0),e([y({constructOnly:!0})],T.prototype,\"layer\",void 0),e([y({readOnly:!0})],T.prototype,\"queryTask\",null),T=e([m(\"esri.layers.graphics.sources.FeatureLayerSource\")],T);const A=T;export{A as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}