{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport { JSONSupportMixin as n } from \"../../core/JSONSupport.js\";\nimport i from \"../../core/Loadable.js\";\nimport { isNone as s, unwrap as r } from \"../../core/maybe.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { parse as l } from \"./arcgisLayerUrl.js\";\nimport u from \"./Contingency.js\";\nimport c from \"./ContingencyConstraintViolation.js\";\nimport p from \"./ContingentValue.js\";\nimport d from \"./ContingentValuesResult.js\";\nimport f from \"./FieldGroup.js\";\nimport y from \"./Subtype.js\";\nvar m;\nlet h = m = class extends n(i) {\n  constructor(e) {\n    super(e), this.request = t, this.fieldGroups = null, this.fieldGroupDefinitions = null;\n  }\n\n  initialize() {}\n\n  static async createLoadedLayerContingentValuesCache(e) {\n    await e.load();\n    const t = e.sourceJSON;\n    if (void 0 === e.layerId) return null;\n    const n = t.hasContingentValuesDefinition;\n    if (n) return new m({\n      layer: e\n    }).load();\n\n    if (void 0 === n) {\n      const t = l(e.url);\n      if (s(t)) return null;\n      const n = t.url.path;\n\n      if ((await m._staticFetchEnterpriseFeatureRoot(n)).supportsQueryDataElements) {\n        const t = e.layerId.toString(),\n              i = await m._staticFetchEnterpriseFieldGroup(n, t);\n\n        if (i) {\n          const t = i.map(e => ({\n            name: e.name,\n            isEditingRestrictive: e.isEditingRestrictive,\n            fields: e.fieldNames.names\n          }));\n          return new m({\n            layer: e,\n            fieldGroupDefinitions: t\n          }).load();\n        }\n      }\n    }\n\n    return null;\n  }\n\n  async load(e) {\n    const t = this.layer.load(e).then(() => this._initializeContingentValues(this.fieldGroupDefinitions, e));\n    return this.addResolvingPromise(t), this;\n  }\n\n  validateContingencyConstraints(e, t) {\n    const n = this.layer.typeIdField,\n          i = Object.keys(e),\n          s = [],\n          r = [];\n\n    for (const o of this.fieldGroups) {\n      const a = o.isEditingRestrictive ? \"error\" : \"warning\";\n      if (t && !o.fields.some(e => t.includes(e))) continue;\n\n      if (!o.fields.every(e => i.includes(e))) {\n        r.push(new c({\n          fieldGroup: o,\n          type: a\n        }));\n        continue;\n      }\n\n      let l = !1;\n      const u = e[n],\n            p = o.contingencies.filter(e => !(!e.isRetired && e.subtype) || e.subtype.code === u);\n\n      for (const t of p) {\n        let n = !0;\n\n        for (const i in t.values) {\n          const s = t.values[i];\n          if (\"any\" !== s.objectType) if (\"null\" === s.objectType) {\n            if (null != e[i]) {\n              n = !1;\n              break;\n            }\n          } else if (\"code\" === s.objectType) {\n            if (e[i] !== s.codedValue.code) {\n              n = !1;\n              break;\n            }\n          } else if (\"range\" === s.objectType) {\n            const t = e[i];\n\n            if (t < s.minValue || t > s.maxValue) {\n              n = !1;\n              break;\n            }\n          }\n        }\n\n        if (n) {\n          l = !0;\n          break;\n        }\n      }\n\n      l || s.push(new c({\n        fieldGroup: o,\n        type: a\n      }));\n    }\n\n    return {\n      invalid: s,\n      incomplete: r\n    };\n  }\n\n  getContingentValues(e, t, n = !1) {\n    const i = e[this.layer.typeIdField],\n          s = null != i,\n          r = {};\n    let o = [];\n    const a = this.fieldGroups.filter(e => e.fields.includes(t));\n    o.push(new p({\n      objectType: \"any\"\n    }));\n\n    for (const l of a) {\n      let a = [];\n      const u = l.contingencies.filter(e => !(e.isRetired || e.subtype && s && e.subtype.code !== i));\n      let c = !1;\n      const p = {};\n\n      for (const n of u) {\n        let i,\n            s = !0;\n\n        for (const r in n.values) {\n          const o = n.values[r];\n\n          if (t !== r) {\n            if (void 0 !== e[r] && \"any\" !== o.objectType) if (\"null\" === o.objectType) null !== e[r] && (s = !1);else if (\"code\" === o.objectType) e[r] !== o.codedValue.code && (s = !1);else if (\"range\" === o.objectType) {\n              const t = e[r];\n              (t < o.minValue || t > o.maxValue) && (s = !1);\n            }\n          } else i = o, c = c || \"range\" === o.objectType;\n        }\n\n        if (i && s) {\n          if (\"any\" === i.objectType) {\n            a.length = 0, a.push(i);\n            break;\n          }\n\n          const e = this._generateKey(i);\n\n          p[e] || a.push(i), p[e] = !0;\n        }\n      }\n\n      c && (a = this._joinRange(a)), r[l.name] = a, o = n ? this._filterIntersection(o, a) : null;\n    }\n\n    return 1 === a.length && n && (o = []), new d({\n      contingentValuesAllGroups: o,\n      contingentValuesByFieldGroup: r\n    });\n  }\n\n  _generateKey(e) {\n    switch (e.objectType) {\n      case \"any\":\n        return \"@any@\";\n\n      case \"null\":\n        return \"@null@\";\n\n      case \"code\":\n        return e.codedValue.name + e.codedValue.code.toString();\n\n      case \"range\":\n        return e.minValue.toString() + \"-\" + e.maxValue.toString();\n    }\n  }\n\n  _joinRange(e) {\n    let t, n;\n    e.sort((e, t) => \"null\" === e.objectType ? -1 : \"null\" === t.objectType ? 1 : e.minValue - t.minValue);\n    const i = [];\n\n    for (const s of e) \"null\" !== s.objectType ? void 0 !== t ? n < s.minValue ? (i.push(new p({\n      objectType: \"range\",\n      minValue: t,\n      maxValue: n\n    })), t = s.minValue, n = s.maxValue) : n < s.maxValue && (n = s.maxValue) : (t = s.minValue, n = s.maxValue) : i.push(s);\n\n    return i.push(new p({\n      objectType: \"range\",\n      minValue: t,\n      maxValue: n\n    })), i;\n  }\n\n  _filterIntersection(e, t) {\n    if (0 === e.length || 0 === t.length) return [];\n    if (\"any\" === e[0].objectType) return t;\n    if (\"any\" === t[0].objectType) return e;\n    const n = \"range\" === e[0].objectType || \"range\" === e[1]?.objectType,\n          i = \"range\" === t[0].objectType || \"range\" === t[1]?.objectType;\n    return n || i ? this._intersectRanges(e, t) : this._intersectValues(e, t);\n  }\n\n  _intersectRanges(e, t) {\n    const n = [];\n    let i,\n        s = 0;\n\n    for (const r of e) for (; s < t.length; s++) {\n      const e = t[s];\n      if (\"null\" === r.objectType && \"null\" === e.objectType) n.push(new p({\n        objectType: \"null\"\n      }));else {\n        if (\"null\" === r.objectType) break;\n        if (\"null\" === e.objectType) continue;\n      }\n      if (r.maxValue < e.minValue) break;\n\n      if (r.maxValue === e.minValue) {\n        n.push(new p({\n          objectType: \"range\",\n          minValue: r.maxValue,\n          maxValue: e.minValue\n        }));\n        break;\n      }\n\n      if (!(r.minValue > e.maxValue)) if (r.minValue !== e.maxValue) {\n        if (i = r.minValue > e.minValue ? r.minValue : e.minValue, r.maxValue < e.maxValue) {\n          n.push(new p({\n            objectType: \"range\",\n            minValue: i,\n            maxValue: r.maxValue\n          }));\n          break;\n        }\n\n        n.push(new p({\n          objectType: \"range\",\n          minValue: i,\n          maxValue: e.maxValue\n        }));\n      } else n.push(new p({\n        objectType: \"range\",\n        minValue: r.minValue,\n        maxValue: e.maxValue\n      }));\n    }\n\n    return n;\n  }\n\n  _intersectValues(e, t) {\n    const n = [];\n\n    for (const i of e) t.some(e => {\n      if (i.objectType === e.objectType) switch (i.objectType) {\n        case \"any\":\n        case \"null\":\n          return !0;\n\n        case \"code\":\n          return i.codedValue.code === e.codedValue.code && i.codedValue.name === e.codedValue.name;\n      }\n      return !1;\n    }) && n.push(i);\n\n    return n;\n  }\n\n  static async _staticFetchEnterpriseFeatureRoot(e, n) {\n    return t(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      },\n      ...n\n    }).then(e => e.data);\n  }\n\n  static async _staticFetchEnterpriseFieldGroup(e, n, i) {\n    return t(`${e}/queryDataElements`, {\n      responseType: \"json\",\n      query: {\n        layers: JSON.stringify([n]),\n        f: \"json\"\n      },\n      ...i\n    }).then(e => e.data.layerDataElements?.[0].dataElement.fieldGroups);\n  }\n\n  async _initializeContingentValues(e, t) {\n    const n = e || (await this._fetchFieldGroupDefs(t));\n    if (0 === n.length) return void (this.fieldGroups = []);\n    const i = await this._fetchContingentValues(n, t);\n    this.fieldGroups = i;\n  }\n\n  async _fetchFieldGroupDefs(e) {\n    if (void 0 === this.layer.layerId) return [];\n    const t = this.layer.sourceJSON,\n          n = this.layer.layerId.toString(),\n          i = r(l(this.layer.url)).url.path;\n\n    if (t.hasContingentValuesDefinition) {\n      return (await this._fetchAGOLFieldGroup(i, n, e)).map(e => ({\n        name: e.name,\n        isEditingRestrictive: e.restrictive,\n        fields: e.fields.map(e => this.layer.fieldsIndex.normalizeFieldName(e))\n      }));\n    }\n\n    return void 0 !== t.hasContingentValuesDefinition ? [] : this._fetchEnterpriseFeatureRoot(i, e).then(async t => {\n      if (t.supportsQueryDataElements) {\n        return (await this._fetchEnterpriseFieldGroup(i, n, e)).map(e => ({\n          name: e.name,\n          isEditingRestrictive: e.isEditingRestrictive,\n          fields: e.fieldNames.names.map(e => this.layer.fieldsIndex.normalizeFieldName(e))\n        }));\n      }\n\n      return [];\n    });\n  }\n\n  async _fetchAGOLFieldGroup(e, n, i) {\n    return t(`${e}/${n}/fieldgroups`, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      },\n      ...i\n    }).then(e => e.data.fieldGroups);\n  }\n\n  async _fetchEnterpriseFieldGroup(e, t, n) {\n    return m._staticFetchEnterpriseFieldGroup(e, t, n);\n  }\n\n  async _fetchEnterpriseFeatureRoot(e, t) {\n    return m._staticFetchEnterpriseFeatureRoot(e, t);\n  }\n\n  async _fetchContingentValues(e, t) {\n    if (void 0 === this.layer.layerId) return [];\n    const n = this.layer.sourceJSON,\n          i = this.layer.layerId.toString(),\n          s = r(l(this.layer.url)).url.path;\n\n    if (n.hasContingentValuesDefinition) {\n      const n = await this._fetchAGOLContingentValues(s, i, t);\n      return this._constructFieldGroupsAGOL(e, n);\n    }\n\n    const o = await this._fetchEnterpriseContingentValues(s, i, t);\n    return this._constructFieldGroupsEnterprise(e, o);\n  }\n\n  _constructFieldGroupsAGOL(e, t) {\n    return e.map(e => {\n      const n = t.contingentValuesDefinition.fieldGroups.find(t => t.name === e.name);\n\n      if (n) {\n        let i = [];\n        return i = t.contingentValuesDefinition.hasSubType ? this._parseAGOLFieldGroupSubtype(e, t, n.subTypes) : this._parseAGOLFieldGroup(e, t, n.contingentValues), new f({\n          name: e.name,\n          isEditingRestrictive: e.isEditingRestrictive,\n          fields: e.fields,\n          contingencies: i\n        });\n      }\n\n      return null;\n    }).filter(e => null !== e);\n  }\n\n  _parseAGOLFieldGroupSubtype(e, t, n) {\n    let i = [];\n    return n.forEach(n => {\n      const s = this._getSubtypeAGOL(n.name);\n\n      i = i.concat(this._parseAGOLFieldGroup(e, t, n.contingentValues, s));\n    }), i;\n  }\n\n  _parseAGOLFieldGroup(e, t, n, i = null) {\n    const s = [];\n\n    for (const r of n) {\n      const n = this._parseAGOLContingency(r, e, t, i);\n\n      s.push(n);\n    }\n\n    return s;\n  }\n\n  _parseAGOLContingency(e, t, n, i) {\n    const s = e.id,\n          r = !!e.retired && 1 === e.retired,\n          o = {};\n\n    for (let a = 0, l = 0; a < t.fields.length; a++) {\n      const s = t.fields[a],\n            r = n.typeCodes[e.types[a]];\n\n      if (\"Code\" === r) {\n        let t = e.values[l];\n        l++;\n\n        const r = this._getDomain(i, s);\n\n        if (\"string\" === this.layer.getField(s).type) {\n          const e = n.stringDicts.find(e => e.domain === r.name);\n          e && (t = e.entries[t]);\n        }\n\n        const a = r.codedValues.find(e => e.code === t),\n              u = new p({\n          codedValue: a,\n          objectType: \"code\"\n        });\n        o[s] = u;\n      } else if (\"Range\" === r) {\n        const t = e.values[l];\n        l++;\n        const n = t.range[0],\n              i = t.range[1],\n              r = new p({\n          minValue: n,\n          maxValue: i,\n          objectType: \"range\"\n        });\n        o[s] = r;\n      } else if (\"Any\" === r) {\n        const e = new p({\n          objectType: \"any\"\n        });\n        o[s] = e;\n      } else {\n        const e = new p({\n          objectType: \"null\"\n        });\n        o[s] = e;\n      }\n    }\n\n    return new u({\n      id: s,\n      isRetired: r,\n      subtype: i,\n      values: o\n    });\n  }\n\n  _constructFieldGroupsEnterprise(e, t) {\n    const n = t.fieldGroups;\n    return e.map(e => {\n      const i = n.find(t => t.name === e.name);\n\n      if (i) {\n        const n = i.contingencies.map(n => {\n          const i = n.id,\n                s = n.isRetired || !1,\n                r = this._getSubtypeEnterprise(n.subtypeCode),\n                o = {};\n\n          for (let a = 0; a < e.fields.length; a++) {\n            const i = e.fields[a];\n            let s = n.values[a];\n\n            if (\"number\" == typeof s || \"string\" == typeof s) {\n              const e = this._getDomain(r, i),\n                    n = this.layer.getField(i);\n\n              if (\"string\" === n.type) s = t.stringDictionary[s];else if (\"date\" === n.type) {\n                const e = new Date(`${s}+00:00`);\n                s = e.getTime();\n              }\n              const a = e.codedValues.find(e => e.code === s),\n                    l = new p({\n                codedValue: a,\n                objectType: \"code\"\n              });\n              o[i] = l;\n            } else if (\"object\" == typeof s) {\n              const e = s.minValue,\n                    t = s.maxValue,\n                    n = new p({\n                minValue: e,\n                maxValue: t,\n                objectType: \"range\"\n              });\n              o[i] = n;\n            } else if (s) {\n              const e = new p({\n                objectType: \"any\"\n              });\n              o[i] = e;\n            } else {\n              const e = new p({\n                objectType: \"null\"\n              });\n              o[i] = e;\n            }\n          }\n\n          return new u({\n            id: i,\n            isRetired: s,\n            subtype: r,\n            values: o\n          });\n        });\n        return new f({\n          name: e.name,\n          isEditingRestrictive: e.isEditingRestrictive,\n          fields: e.fields,\n          contingencies: n\n        });\n      }\n\n      return null;\n    }).filter(e => null !== e);\n  }\n\n  async _fetchEnterpriseContingentValues(e, n, i) {\n    return t(`${e}/queryContingentValues`, {\n      responseType: \"json\",\n      query: {\n        layers: JSON.stringify([n]),\n        f: \"json\"\n      },\n      ...i\n    }).then(e => e.data.contingentValueSets?.[0]);\n  }\n\n  async _fetchAGOLContingentValues(e, n, i) {\n    return t(`${e}/${n}/contingentValues`, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      },\n      ...i\n    }).then(e => e.data);\n  }\n\n  _getSubtypeEnterprise(e) {\n    const t = this.layer.sourceJSON;\n    let n;\n\n    if (t.subtypes) {\n      const i = t.subtypes.find(t => t.code === e);\n      n = y.fromJSON(i);\n    }\n\n    return n || null;\n  }\n\n  _getSubtypeAGOL(e) {\n    const t = this.layer.sourceJSON;\n    let n;\n\n    if (t.subtypes) {\n      const i = t.subtypes.find(t => t.name === e);\n      n = y.fromJSON(i);\n    }\n\n    return n || null;\n  }\n\n  _getDomain(e, t) {\n    const n = e ? e.domains[t] : this.layer.getFieldDomain(t);\n    return \"inherited\" === n.type ? this.layer.getFieldDomain(t) : n;\n  }\n\n};\ne([o({\n  constructOnly: !0\n})], h.prototype, \"layer\", void 0), e([o({\n  constructOnly: !0\n})], h.prototype, \"request\", void 0), e([o({\n  type: [f]\n})], h.prototype, \"fieldGroups\", void 0), e([o()], h.prototype, \"fieldGroupDefinitions\", void 0), h = m = e([a(\"esri.layers.support.LayerContingentValuesCache\")], h);\nconst g = h;\nexport { g as default };","map":{"version":3,"names":["_","e","t","JSONSupportMixin","n","i","isNone","s","unwrap","r","property","o","subclass","a","parse","l","u","c","p","d","f","y","m","h","constructor","request","fieldGroups","fieldGroupDefinitions","initialize","createLoadedLayerContingentValuesCache","load","sourceJSON","layerId","hasContingentValuesDefinition","layer","url","path","_staticFetchEnterpriseFeatureRoot","supportsQueryDataElements","toString","_staticFetchEnterpriseFieldGroup","map","name","isEditingRestrictive","fields","fieldNames","names","then","_initializeContingentValues","addResolvingPromise","validateContingencyConstraints","typeIdField","Object","keys","some","includes","every","push","fieldGroup","type","contingencies","filter","isRetired","subtype","code","values","objectType","codedValue","minValue","maxValue","invalid","incomplete","getContingentValues","length","_generateKey","_joinRange","_filterIntersection","contingentValuesAllGroups","contingentValuesByFieldGroup","sort","_intersectRanges","_intersectValues","responseType","query","data","layers","JSON","stringify","layerDataElements","dataElement","_fetchFieldGroupDefs","_fetchContingentValues","_fetchAGOLFieldGroup","restrictive","fieldsIndex","normalizeFieldName","_fetchEnterpriseFeatureRoot","_fetchEnterpriseFieldGroup","_fetchAGOLContingentValues","_constructFieldGroupsAGOL","_fetchEnterpriseContingentValues","_constructFieldGroupsEnterprise","contingentValuesDefinition","find","hasSubType","_parseAGOLFieldGroupSubtype","subTypes","_parseAGOLFieldGroup","contingentValues","forEach","_getSubtypeAGOL","concat","_parseAGOLContingency","id","retired","typeCodes","types","_getDomain","getField","stringDicts","domain","entries","codedValues","range","_getSubtypeEnterprise","subtypeCode","stringDictionary","Date","getTime","contingentValueSets","subtypes","fromJSON","domains","getFieldDomain","constructOnly","prototype","g","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/LayerContingentValuesCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import{JSONSupportMixin as n}from\"../../core/JSONSupport.js\";import i from\"../../core/Loadable.js\";import{isNone as s,unwrap as r}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as l}from\"./arcgisLayerUrl.js\";import u from\"./Contingency.js\";import c from\"./ContingencyConstraintViolation.js\";import p from\"./ContingentValue.js\";import d from\"./ContingentValuesResult.js\";import f from\"./FieldGroup.js\";import y from\"./Subtype.js\";var m;let h=m=class extends(n(i)){constructor(e){super(e),this.request=t,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}static async createLoadedLayerContingentValuesCache(e){await e.load();const t=e.sourceJSON;if(void 0===e.layerId)return null;const n=t.hasContingentValuesDefinition;if(n)return new m({layer:e}).load();if(void 0===n){const t=l(e.url);if(s(t))return null;const n=t.url.path;if((await m._staticFetchEnterpriseFeatureRoot(n)).supportsQueryDataElements){const t=e.layerId.toString(),i=await m._staticFetchEnterpriseFieldGroup(n,t);if(i){const t=i.map((e=>({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fieldNames.names})));return new m({layer:e,fieldGroupDefinitions:t}).load()}}}return null}async load(e){const t=this.layer.load(e).then((()=>this._initializeContingentValues(this.fieldGroupDefinitions,e)));return this.addResolvingPromise(t),this}validateContingencyConstraints(e,t){const n=this.layer.typeIdField,i=Object.keys(e),s=[],r=[];for(const o of this.fieldGroups){const a=o.isEditingRestrictive?\"error\":\"warning\";if(t&&!o.fields.some((e=>t.includes(e))))continue;if(!o.fields.every((e=>i.includes(e)))){r.push(new c({fieldGroup:o,type:a}));continue}let l=!1;const u=e[n],p=o.contingencies.filter((e=>!(!e.isRetired&&e.subtype)||e.subtype.code===u));for(const t of p){let n=!0;for(const i in t.values){const s=t.values[i];if(\"any\"!==s.objectType)if(\"null\"===s.objectType){if(null!=e[i]){n=!1;break}}else if(\"code\"===s.objectType){if(e[i]!==s.codedValue.code){n=!1;break}}else if(\"range\"===s.objectType){const t=e[i];if(t<s.minValue||t>s.maxValue){n=!1;break}}}if(n){l=!0;break}}l||s.push(new c({fieldGroup:o,type:a}))}return{invalid:s,incomplete:r}}getContingentValues(e,t,n=!1){const i=e[this.layer.typeIdField],s=null!=i,r={};let o=[];const a=this.fieldGroups.filter((e=>e.fields.includes(t)));o.push(new p({objectType:\"any\"}));for(const l of a){let a=[];const u=l.contingencies.filter((e=>!(e.isRetired||e.subtype&&s&&e.subtype.code!==i)));let c=!1;const p={};for(const n of u){let i,s=!0;for(const r in n.values){const o=n.values[r];if(t!==r){if(void 0!==e[r]&&\"any\"!==o.objectType)if(\"null\"===o.objectType)null!==e[r]&&(s=!1);else if(\"code\"===o.objectType)e[r]!==o.codedValue.code&&(s=!1);else if(\"range\"===o.objectType){const t=e[r];(t<o.minValue||t>o.maxValue)&&(s=!1)}}else i=o,c=c||\"range\"===o.objectType}if(i&&s){if(\"any\"===i.objectType){a.length=0,a.push(i);break}const e=this._generateKey(i);p[e]||a.push(i),p[e]=!0}}c&&(a=this._joinRange(a)),r[l.name]=a,o=n?this._filterIntersection(o,a):null}return 1===a.length&&n&&(o=[]),new d({contingentValuesAllGroups:o,contingentValuesByFieldGroup:r})}_generateKey(e){switch(e.objectType){case\"any\":return\"@any@\";case\"null\":return\"@null@\";case\"code\":return e.codedValue.name+e.codedValue.code.toString();case\"range\":return e.minValue.toString()+\"-\"+e.maxValue.toString()}}_joinRange(e){let t,n;e.sort(((e,t)=>\"null\"===e.objectType?-1:\"null\"===t.objectType?1:e.minValue-t.minValue));const i=[];for(const s of e)\"null\"!==s.objectType?void 0!==t?n<s.minValue?(i.push(new p({objectType:\"range\",minValue:t,maxValue:n})),t=s.minValue,n=s.maxValue):n<s.maxValue&&(n=s.maxValue):(t=s.minValue,n=s.maxValue):i.push(s);return i.push(new p({objectType:\"range\",minValue:t,maxValue:n})),i}_filterIntersection(e,t){if(0===e.length||0===t.length)return[];if(\"any\"===e[0].objectType)return t;if(\"any\"===t[0].objectType)return e;const n=\"range\"===e[0].objectType||\"range\"===e[1]?.objectType,i=\"range\"===t[0].objectType||\"range\"===t[1]?.objectType;return n||i?this._intersectRanges(e,t):this._intersectValues(e,t)}_intersectRanges(e,t){const n=[];let i,s=0;for(const r of e)for(;s<t.length;s++){const e=t[s];if(\"null\"===r.objectType&&\"null\"===e.objectType)n.push(new p({objectType:\"null\"}));else{if(\"null\"===r.objectType)break;if(\"null\"===e.objectType)continue}if(r.maxValue<e.minValue)break;if(r.maxValue===e.minValue){n.push(new p({objectType:\"range\",minValue:r.maxValue,maxValue:e.minValue}));break}if(!(r.minValue>e.maxValue))if(r.minValue!==e.maxValue){if(i=r.minValue>e.minValue?r.minValue:e.minValue,r.maxValue<e.maxValue){n.push(new p({objectType:\"range\",minValue:i,maxValue:r.maxValue}));break}n.push(new p({objectType:\"range\",minValue:i,maxValue:e.maxValue}))}else n.push(new p({objectType:\"range\",minValue:r.minValue,maxValue:e.maxValue}))}return n}_intersectValues(e,t){const n=[];for(const i of e)t.some((e=>{if(i.objectType===e.objectType)switch(i.objectType){case\"any\":case\"null\":return!0;case\"code\":return i.codedValue.code===e.codedValue.code&&i.codedValue.name===e.codedValue.name}return!1}))&&n.push(i);return n}static async _staticFetchEnterpriseFeatureRoot(e,n){return t(e,{responseType:\"json\",query:{f:\"json\"},...n}).then((e=>e.data))}static async _staticFetchEnterpriseFieldGroup(e,n,i){return t(`${e}/queryDataElements`,{responseType:\"json\",query:{layers:JSON.stringify([n]),f:\"json\"},...i}).then((e=>e.data.layerDataElements?.[0].dataElement.fieldGroups))}async _initializeContingentValues(e,t){const n=e||await this._fetchFieldGroupDefs(t);if(0===n.length)return void(this.fieldGroups=[]);const i=await this._fetchContingentValues(n,t);this.fieldGroups=i}async _fetchFieldGroupDefs(e){if(void 0===this.layer.layerId)return[];const t=this.layer.sourceJSON,n=this.layer.layerId.toString(),i=r(l(this.layer.url)).url.path;if(t.hasContingentValuesDefinition){return(await this._fetchAGOLFieldGroup(i,n,e)).map((e=>({name:e.name,isEditingRestrictive:e.restrictive,fields:e.fields.map((e=>this.layer.fieldsIndex.normalizeFieldName(e)))})))}return void 0!==t.hasContingentValuesDefinition?[]:this._fetchEnterpriseFeatureRoot(i,e).then((async t=>{if(t.supportsQueryDataElements){return(await this._fetchEnterpriseFieldGroup(i,n,e)).map((e=>({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fieldNames.names.map((e=>this.layer.fieldsIndex.normalizeFieldName(e)))})))}return[]}))}async _fetchAGOLFieldGroup(e,n,i){return t(`${e}/${n}/fieldgroups`,{responseType:\"json\",query:{f:\"json\"},...i}).then((e=>e.data.fieldGroups))}async _fetchEnterpriseFieldGroup(e,t,n){return m._staticFetchEnterpriseFieldGroup(e,t,n)}async _fetchEnterpriseFeatureRoot(e,t){return m._staticFetchEnterpriseFeatureRoot(e,t)}async _fetchContingentValues(e,t){if(void 0===this.layer.layerId)return[];const n=this.layer.sourceJSON,i=this.layer.layerId.toString(),s=r(l(this.layer.url)).url.path;if(n.hasContingentValuesDefinition){const n=await this._fetchAGOLContingentValues(s,i,t);return this._constructFieldGroupsAGOL(e,n)}const o=await this._fetchEnterpriseContingentValues(s,i,t);return this._constructFieldGroupsEnterprise(e,o)}_constructFieldGroupsAGOL(e,t){return e.map((e=>{const n=t.contingentValuesDefinition.fieldGroups.find((t=>t.name===e.name));if(n){let i=[];return i=t.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(e,t,n.subTypes):this._parseAGOLFieldGroup(e,t,n.contingentValues),new f({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fields,contingencies:i})}return null})).filter((e=>null!==e))}_parseAGOLFieldGroupSubtype(e,t,n){let i=[];return n.forEach((n=>{const s=this._getSubtypeAGOL(n.name);i=i.concat(this._parseAGOLFieldGroup(e,t,n.contingentValues,s))})),i}_parseAGOLFieldGroup(e,t,n,i=null){const s=[];for(const r of n){const n=this._parseAGOLContingency(r,e,t,i);s.push(n)}return s}_parseAGOLContingency(e,t,n,i){const s=e.id,r=!!e.retired&&1===e.retired,o={};for(let a=0,l=0;a<t.fields.length;a++){const s=t.fields[a],r=n.typeCodes[e.types[a]];if(\"Code\"===r){let t=e.values[l];l++;const r=this._getDomain(i,s);if(\"string\"===this.layer.getField(s).type){const e=n.stringDicts.find((e=>e.domain===r.name));e&&(t=e.entries[t])}const a=r.codedValues.find((e=>e.code===t)),u=new p({codedValue:a,objectType:\"code\"});o[s]=u}else if(\"Range\"===r){const t=e.values[l];l++;const n=t.range[0],i=t.range[1],r=new p({minValue:n,maxValue:i,objectType:\"range\"});o[s]=r}else if(\"Any\"===r){const e=new p({objectType:\"any\"});o[s]=e}else{const e=new p({objectType:\"null\"});o[s]=e}}return new u({id:s,isRetired:r,subtype:i,values:o})}_constructFieldGroupsEnterprise(e,t){const n=t.fieldGroups;return e.map((e=>{const i=n.find((t=>t.name===e.name));if(i){const n=i.contingencies.map((n=>{const i=n.id,s=n.isRetired||!1,r=this._getSubtypeEnterprise(n.subtypeCode),o={};for(let a=0;a<e.fields.length;a++){const i=e.fields[a];let s=n.values[a];if(\"number\"==typeof s||\"string\"==typeof s){const e=this._getDomain(r,i),n=this.layer.getField(i);if(\"string\"===n.type)s=t.stringDictionary[s];else if(\"date\"===n.type){const e=new Date(`${s}+00:00`);s=e.getTime()}const a=e.codedValues.find((e=>e.code===s)),l=new p({codedValue:a,objectType:\"code\"});o[i]=l}else if(\"object\"==typeof s){const e=s.minValue,t=s.maxValue,n=new p({minValue:e,maxValue:t,objectType:\"range\"});o[i]=n}else if(s){const e=new p({objectType:\"any\"});o[i]=e}else{const e=new p({objectType:\"null\"});o[i]=e}}return new u({id:i,isRetired:s,subtype:r,values:o})}));return new f({name:e.name,isEditingRestrictive:e.isEditingRestrictive,fields:e.fields,contingencies:n})}return null})).filter((e=>null!==e))}async _fetchEnterpriseContingentValues(e,n,i){return t(`${e}/queryContingentValues`,{responseType:\"json\",query:{layers:JSON.stringify([n]),f:\"json\"},...i}).then((e=>e.data.contingentValueSets?.[0]))}async _fetchAGOLContingentValues(e,n,i){return t(`${e}/${n}/contingentValues`,{responseType:\"json\",query:{f:\"json\"},...i}).then((e=>e.data))}_getSubtypeEnterprise(e){const t=this.layer.sourceJSON;let n;if(t.subtypes){const i=t.subtypes.find((t=>t.code===e));n=y.fromJSON(i)}return n||null}_getSubtypeAGOL(e){const t=this.layer.sourceJSON;let n;if(t.subtypes){const i=t.subtypes.find((t=>t.name===e));n=y.fromJSON(i)}return n||null}_getDomain(e,t){const n=e?e.domains[t]:this.layer.getFieldDomain(t);return\"inherited\"===n.type?this.layer.getFieldDomain(t):n}};e([o({constructOnly:!0})],h.prototype,\"layer\",void 0),e([o({constructOnly:!0})],h.prototype,\"request\",void 0),e([o({type:[f]})],h.prototype,\"fieldGroups\",void 0),e([o()],h.prototype,\"fieldGroupDefinitions\",void 0),h=m=e([a(\"esri.layers.support.LayerContingentValuesCache\")],h);const g=h;export{g as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}