{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { acosClamped as e } from \"../../../../core/mathUtils.js\";\nimport t from \"../../../../core/ObjectPool.js\";\nimport { b as i, g as s, a as r, o as n, e as o } from \"../../../../chunks/vec3.js\";\nimport { c as a } from \"../../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as u } from \"../../../../geometry/projectionEllipsoid.js\";\nimport { PointIndex as l, PlaneIndex as d } from \"../../../../geometry/support/frustum.js\";\nimport { create as c, projectVector as h, fromPoints as m, normal as _ } from \"../../../../geometry/support/plane.js\";\nimport { wrap as T } from \"../../../../geometry/support/ray.js\";\nimport { ViewingMode as p } from \"../../../ViewingMode.js\";\nimport { FeatureTileDescriptor3D as E, Visibility as I } from \"./FeatureTileDescriptor3D.js\";\nimport { Frustum as F } from \"../../state/Frustum.js\";\nimport { FrustumExtentIntersection as f } from \"../../support/FrustumExtentIntersection.js\";\n\nclass A {\n  constructor(e) {\n    this.renderCoordsHelper = e, this.surfaceElevation = 0, this.cache = new Map(), this.frustum = new F(e), this.extendedFrustum = new F(e), this.intersector = new f({\n      renderCoordsHelper: e\n    }), this.renderCoordsHelper = e;\n  }\n\n  begin(e, t) {\n    this.surfaceElevation = t, this.aboveGround = this.renderCoordsHelper.getAltitude(e.eye) > t, this.frustum.update(e), this._shortenFrustumFarPlane(this.frustum), this._updateExtendedFrustum(e);\n  }\n\n  end() {\n    this.cache.clear();\n  }\n\n  calculate(e) {\n    if (this.allTilesInvisible) return I.INVISIBLE;\n\n    const t = this.renderCoordsHelper.viewingMode === p.Global && e.lij[0] >= R && e.lij[0] < O,\n          i = this._getOrCalculateSingleTileVisibility(e, !t);\n\n    return i !== I.INVISIBLE && t ? this._calculateAggregatedChildrenVisibility(e) : i;\n  }\n\n  _shortenFrustumFarPlane(e) {\n    const t = F.nearFarLineIndices,\n          n = e.mutablePoints;\n\n    for (const o of t) {\n      const [e, t] = o,\n            a = n[e],\n            u = n[t];\n      i(S, u, a), s(S, S, b), r(n[t], a, S);\n    }\n\n    e.updatePoints(n);\n  }\n\n  _calculateAggregatedChildrenVisibility(e) {\n    let t = I.INVISIBLE;\n    const i = this.cache.get(e.id);\n    if (null != i) return i;\n    const s = H.acquire();\n    e.getChildren(s);\n\n    for (const r of s) {\n      const e = this.calculate(r);\n      if (e !== I.INVISIBLE && (t = e, e === I.VISIBLE_ON_SURFACE)) break;\n    }\n\n    return H.release(s), this.cache.set(e.id, t), t;\n  }\n\n  _getOrCalculateSingleTileVisibility(e, t) {\n    const i = this.cache.get(e.id);\n    if (null != i) return i;\n\n    const s = this._calculateSingleTileVisibility(e);\n\n    return t && this.cache.set(e.id, s), s;\n  }\n\n  _calculateSingleTileVisibility(e) {\n    if (!this.aboveGround && this.renderCoordsHelper.viewingMode === p.Global && e.lij[0] < g) {\n      return this._calculateSingleTileVisibilitySided(e, !1) === I.INVISIBLE ? this._calculateSingleTileVisibilitySided(e, !0) : void 0;\n    }\n\n    return this._calculateSingleTileVisibilitySided(e, this.aboveGround);\n  }\n\n  _calculateSingleTileVisibilitySided(e, t) {\n    this.intersector.update(e.extent, e.tilingScheme.spatialReference, this.surfaceElevation, t);\n    const i = u(e.tilingScheme.spatialReference).radius;\n    return this.intersector.isVisibleInFrustum(this.extendedFrustum, i) ? this.intersector.isVisibleInFrustum(this.frustum, i, !0) ? I.VISIBLE_ON_SURFACE : I.VISIBLE_WHEN_EXTENDED : I.INVISIBLE;\n  }\n\n  _updateExtendedFrustum(t) {\n    this.extendedFrustum.update(t), this._shortenFrustumFarPlane(this.extendedFrustum);\n    const i = this.renderCoordsHelper.worldUpAtPosition(t.eye, S);\n    this.aboveGround || n(i, i);\n    const r = e(-o(i, t.viewForward));\n    if (this.allTilesInvisible = r > (Math.PI + t.fovY) / 2, this.allTilesInvisible) return;\n    if (this.hasExtendedFrustum = r > t.fovY / 2, !this.hasExtendedFrustum) return;\n\n    const a = this._extendedFrustumParameters(),\n          u = this.extendedFrustum.mutablePoints;\n\n    for (let e = 0; e < 4; e++) {\n      const t = a.pointIndices[e],\n            i = u[t],\n            r = this.renderCoordsHelper.getAltitude(i);\n\n      if (a.needsAltitudeAdjustment(r)) {\n        switch (this.renderCoordsHelper.worldUpAtPosition(i, S), t) {\n          case l.FAR_BOTTOM_LEFT:\n          case l.FAR_TOP_LEFT:\n          case l.NEAR_BOTTOM_LEFT:\n          case l.NEAR_TOP_LEFT:\n            h(this.extendedFrustum.planes[d.LEFT], S, S);\n            break;\n\n          case l.FAR_BOTTOM_RIGHT:\n          case l.FAR_TOP_RIGHT:\n          case l.NEAR_BOTTOM_RIGHT:\n          case l.NEAR_TOP_RIGHT:\n            h(this.extendedFrustum.planes[d.RIGHT], S, S);\n        }\n\n        s(S, S, a.direction), this.renderCoordsHelper.intersectInfiniteManifold(T(i, S), a.zWithMargin, i);\n      }\n    }\n\n    if (this.extendedFrustum.updatePoints(u), m(u[l.NEAR_BOTTOM_LEFT], u[l.NEAR_BOTTOM_RIGHT], u[l.NEAR_TOP_RIGHT], N), m(u[l.NEAR_BOTTOM_RIGHT], u[l.NEAR_TOP_RIGHT], u[l.NEAR_TOP_LEFT], v), o(_(N), _(v)) < 0) {\n      const e = this.extendedFrustum.mutablePoints;\n      this.aboveGround ? [e[l.NEAR_BOTTOM_LEFT], e[l.NEAR_BOTTOM_RIGHT]] = [e[l.NEAR_BOTTOM_RIGHT], e[l.NEAR_BOTTOM_LEFT]] : [e[l.NEAR_TOP_LEFT], e[l.NEAR_TOP_RIGHT]] = [e[l.NEAR_TOP_RIGHT], e[l.NEAR_TOP_LEFT]], this.extendedFrustum.updatePoints(e);\n    }\n  }\n\n  _extendedFrustumParameters() {\n    return this.aboveGround ? this._extendedFrustumParametersAboveSurface() : this._extendedFrustumParametersBelowSurface();\n  }\n\n  _extendedFrustumParametersAboveSurface() {\n    const e = this.surfaceElevation - P;\n    return {\n      zWithMargin: e,\n      pointIndices: F.planePointIndices.bottom,\n      direction: -1,\n      needsAltitudeAdjustment: t => t > e\n    };\n  }\n\n  _extendedFrustumParametersBelowSurface() {\n    const e = this.surfaceElevation + P;\n    return {\n      zWithMargin: e,\n      pointIndices: F.planePointIndices.top,\n      direction: 1,\n      needsAltitudeAdjustment: t => t < e\n    };\n  }\n\n}\n\nconst R = 2,\n      O = 6,\n      g = 12,\n      b = .95,\n      P = 1,\n      S = a(),\n      N = c(),\n      v = c(),\n      H = new t(Array, e => {\n  4 !== e.length && (e[0] = new E(), e[1] = new E(), e[2] = new E(), e[3] = new E());\n}, e => {\n  e[0].release(), e[1].release(), e[2].release(), e[3].release();\n});\nexport { A as FeatureTileVisibility3D };","map":{"version":3,"names":["acosClamped","e","t","b","i","g","s","a","r","o","n","c","getReferenceEllipsoid","u","PointIndex","l","PlaneIndex","d","create","projectVector","h","fromPoints","m","normal","_","wrap","T","ViewingMode","p","FeatureTileDescriptor3D","E","Visibility","I","Frustum","F","FrustumExtentIntersection","f","A","constructor","renderCoordsHelper","surfaceElevation","cache","Map","frustum","extendedFrustum","intersector","begin","aboveGround","getAltitude","eye","update","_shortenFrustumFarPlane","_updateExtendedFrustum","end","clear","calculate","allTilesInvisible","INVISIBLE","viewingMode","Global","lij","R","O","_getOrCalculateSingleTileVisibility","_calculateAggregatedChildrenVisibility","nearFarLineIndices","mutablePoints","S","updatePoints","get","id","H","acquire","getChildren","VISIBLE_ON_SURFACE","release","set","_calculateSingleTileVisibility","_calculateSingleTileVisibilitySided","extent","tilingScheme","spatialReference","radius","isVisibleInFrustum","VISIBLE_WHEN_EXTENDED","worldUpAtPosition","viewForward","Math","PI","fovY","hasExtendedFrustum","_extendedFrustumParameters","pointIndices","needsAltitudeAdjustment","FAR_BOTTOM_LEFT","FAR_TOP_LEFT","NEAR_BOTTOM_LEFT","NEAR_TOP_LEFT","planes","LEFT","FAR_BOTTOM_RIGHT","FAR_TOP_RIGHT","NEAR_BOTTOM_RIGHT","NEAR_TOP_RIGHT","RIGHT","direction","intersectInfiniteManifold","zWithMargin","N","v","_extendedFrustumParametersAboveSurface","_extendedFrustumParametersBelowSurface","P","planePointIndices","bottom","top","Array","length","FeatureTileVisibility3D"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/support/FeatureTileVisibility3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{acosClamped as e}from\"../../../../core/mathUtils.js\";import t from\"../../../../core/ObjectPool.js\";import{b as i,g as s,a as r,o as n,e as o}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as u}from\"../../../../geometry/projectionEllipsoid.js\";import{PointIndex as l,PlaneIndex as d}from\"../../../../geometry/support/frustum.js\";import{create as c,projectVector as h,fromPoints as m,normal as _}from\"../../../../geometry/support/plane.js\";import{wrap as T}from\"../../../../geometry/support/ray.js\";import{ViewingMode as p}from\"../../../ViewingMode.js\";import{FeatureTileDescriptor3D as E,Visibility as I}from\"./FeatureTileDescriptor3D.js\";import{Frustum as F}from\"../../state/Frustum.js\";import{FrustumExtentIntersection as f}from\"../../support/FrustumExtentIntersection.js\";class A{constructor(e){this.renderCoordsHelper=e,this.surfaceElevation=0,this.cache=new Map,this.frustum=new F(e),this.extendedFrustum=new F(e),this.intersector=new f({renderCoordsHelper:e}),this.renderCoordsHelper=e}begin(e,t){this.surfaceElevation=t,this.aboveGround=this.renderCoordsHelper.getAltitude(e.eye)>t,this.frustum.update(e),this._shortenFrustumFarPlane(this.frustum),this._updateExtendedFrustum(e)}end(){this.cache.clear()}calculate(e){if(this.allTilesInvisible)return I.INVISIBLE;const t=this.renderCoordsHelper.viewingMode===p.Global&&e.lij[0]>=R&&e.lij[0]<O,i=this._getOrCalculateSingleTileVisibility(e,!t);return i!==I.INVISIBLE&&t?this._calculateAggregatedChildrenVisibility(e):i}_shortenFrustumFarPlane(e){const t=F.nearFarLineIndices,n=e.mutablePoints;for(const o of t){const[e,t]=o,a=n[e],u=n[t];i(S,u,a),s(S,S,b),r(n[t],a,S)}e.updatePoints(n)}_calculateAggregatedChildrenVisibility(e){let t=I.INVISIBLE;const i=this.cache.get(e.id);if(null!=i)return i;const s=H.acquire();e.getChildren(s);for(const r of s){const e=this.calculate(r);if(e!==I.INVISIBLE&&(t=e,e===I.VISIBLE_ON_SURFACE))break}return H.release(s),this.cache.set(e.id,t),t}_getOrCalculateSingleTileVisibility(e,t){const i=this.cache.get(e.id);if(null!=i)return i;const s=this._calculateSingleTileVisibility(e);return t&&this.cache.set(e.id,s),s}_calculateSingleTileVisibility(e){if(!this.aboveGround&&this.renderCoordsHelper.viewingMode===p.Global&&e.lij[0]<g){return this._calculateSingleTileVisibilitySided(e,!1)===I.INVISIBLE?this._calculateSingleTileVisibilitySided(e,!0):void 0}return this._calculateSingleTileVisibilitySided(e,this.aboveGround)}_calculateSingleTileVisibilitySided(e,t){this.intersector.update(e.extent,e.tilingScheme.spatialReference,this.surfaceElevation,t);const i=u(e.tilingScheme.spatialReference).radius;return this.intersector.isVisibleInFrustum(this.extendedFrustum,i)?this.intersector.isVisibleInFrustum(this.frustum,i,!0)?I.VISIBLE_ON_SURFACE:I.VISIBLE_WHEN_EXTENDED:I.INVISIBLE}_updateExtendedFrustum(t){this.extendedFrustum.update(t),this._shortenFrustumFarPlane(this.extendedFrustum);const i=this.renderCoordsHelper.worldUpAtPosition(t.eye,S);this.aboveGround||n(i,i);const r=e(-o(i,t.viewForward));if(this.allTilesInvisible=r>(Math.PI+t.fovY)/2,this.allTilesInvisible)return;if(this.hasExtendedFrustum=r>t.fovY/2,!this.hasExtendedFrustum)return;const a=this._extendedFrustumParameters(),u=this.extendedFrustum.mutablePoints;for(let e=0;e<4;e++){const t=a.pointIndices[e],i=u[t],r=this.renderCoordsHelper.getAltitude(i);if(a.needsAltitudeAdjustment(r)){switch(this.renderCoordsHelper.worldUpAtPosition(i,S),t){case l.FAR_BOTTOM_LEFT:case l.FAR_TOP_LEFT:case l.NEAR_BOTTOM_LEFT:case l.NEAR_TOP_LEFT:h(this.extendedFrustum.planes[d.LEFT],S,S);break;case l.FAR_BOTTOM_RIGHT:case l.FAR_TOP_RIGHT:case l.NEAR_BOTTOM_RIGHT:case l.NEAR_TOP_RIGHT:h(this.extendedFrustum.planes[d.RIGHT],S,S)}s(S,S,a.direction),this.renderCoordsHelper.intersectInfiniteManifold(T(i,S),a.zWithMargin,i)}}if(this.extendedFrustum.updatePoints(u),m(u[l.NEAR_BOTTOM_LEFT],u[l.NEAR_BOTTOM_RIGHT],u[l.NEAR_TOP_RIGHT],N),m(u[l.NEAR_BOTTOM_RIGHT],u[l.NEAR_TOP_RIGHT],u[l.NEAR_TOP_LEFT],v),o(_(N),_(v))<0){const e=this.extendedFrustum.mutablePoints;this.aboveGround?[e[l.NEAR_BOTTOM_LEFT],e[l.NEAR_BOTTOM_RIGHT]]=[e[l.NEAR_BOTTOM_RIGHT],e[l.NEAR_BOTTOM_LEFT]]:[e[l.NEAR_TOP_LEFT],e[l.NEAR_TOP_RIGHT]]=[e[l.NEAR_TOP_RIGHT],e[l.NEAR_TOP_LEFT]],this.extendedFrustum.updatePoints(e)}}_extendedFrustumParameters(){return this.aboveGround?this._extendedFrustumParametersAboveSurface():this._extendedFrustumParametersBelowSurface()}_extendedFrustumParametersAboveSurface(){const e=this.surfaceElevation-P;return{zWithMargin:e,pointIndices:F.planePointIndices.bottom,direction:-1,needsAltitudeAdjustment:t=>t>e}}_extendedFrustumParametersBelowSurface(){const e=this.surfaceElevation+P;return{zWithMargin:e,pointIndices:F.planePointIndices.top,direction:1,needsAltitudeAdjustment:t=>t<e}}}const R=2,O=6,g=12,b=.95,P=1,S=a(),N=c(),v=c(),H=new t(Array,(e=>{4!==e.length&&(e[0]=new E,e[1]=new E,e[2]=new E,e[3]=new E)}),(e=>{e[0].release(),e[1].release(),e[2].release(),e[3].release()}));export{A as FeatureTileVisibility3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}