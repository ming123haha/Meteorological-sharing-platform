{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { id as e } from \"../kernel.js\";\nimport t from \"../request.js\";\nimport i from \"../core/Error.js\";\nimport { JSONMap as r } from \"../core/jsonMap.js\";\nimport { isSome as a } from \"../core/maybe.js\";\nimport { createScreenPoint as n, pt2px as s, px2pt as o } from \"../core/screenUtils.js\";\nimport { normalize as l, dataComponents as c } from \"../core/urlUtils.js\";\nimport u from \"../geometry/Polygon.js\";\nimport { collectLabelingFields as y } from \"../layers/support/fieldUtils.js\";\nimport { getFloorFilterClause as m } from \"../layers/support/floorFilterUtils.js\";\nimport { getSizeRangeAtScale as f } from \"../renderers/visualVariables/support/visualVariableUtils.js\";\nimport { getToken as p } from \"./utils.js\";\nimport { execute as d } from \"./geoprocessor/execute.js\";\nimport { submitJob as g } from \"./geoprocessor/submitJob.js\";\nimport { toJSON as b } from \"./support/fileFormat.js\";\nimport { toJSON as h } from \"./support/layoutTemplate.js\";\nimport { getVisibleLayerViews as w, isScreenshotRequired as S, isBingMapsLayer as x, isCSVLayer as v, isBlendLayer as I, applyVisualVariables as D, getContextBoundingBox as L, createPolygonLayer as T, createPolylineLayer as E, createPointLayer as M, createMultipointLayer as O } from \"./support/printTaskUtils.js\";\nimport V from \"./support/PrintTemplate.js\";\nconst P = {\n  Feet: \"ft\",\n  Kilometers: \"km\",\n  Meters: \"m\",\n  Miles: \"mi\"\n},\n      F = new r({\n  esriFeet: \"Feet\",\n  esriKilometers: \"Kilometers\",\n  esriMeters: \"Meters\",\n  esriMiles: \"Miles\"\n}),\n      R = new r({\n  esriExecutionTypeSynchronous: \"sync\",\n  esriExecutionTypeAsynchronous: \"async\"\n}),\n      N = new Map();\n\nasync function J(e, i, r) {\n  const a = C(e);\n  let n = N.get(a);\n  return Promise.resolve().then(() => n ? {\n    data: n.gpMetadata\n  } : (n = {\n    gpServerUrl: a,\n    is11xService: !1,\n    legendLayerNameMap: {},\n    legendLayers: []\n  }, t(a, {\n    query: {\n      f: \"json\"\n    }\n  }))).then(e => (n.gpMetadata = e.data, n.cimVersion = n.gpMetadata.cimVersion, n.is11xService = !!n.cimVersion, N.set(a, n), j(i, n))).then(t => {\n    const a = ue(n);\n    let s;\n\n    const o = e => \"sync\" === a ? e.results && e.results[0] && e.results[0].value : s.fetchResultData(\"Output_File\", null, r).then(e => e.value);\n\n    return \"async\" === a ? g(e, t, null, r).then(e => (s = e, e.waitForJobCompletion({\n      interval: i.updateDelay\n    }).then(o))) : d(e, t, null, r).then(o);\n  });\n}\n\nasync function U(e) {\n  const t = C(e);\n  return ue(N.get(t));\n}\n\nasync function j(t, r) {\n  r = r || {\n    is11xService: !1,\n    legendLayerNameMap: {},\n    legendLayers: []\n  };\n  const a = t.template || new V();\n  null == a.showLabels && (a.showLabels = !0);\n  const n = a.exportOptions;\n  let s;\n  const o = h(a.layout);\n\n  if (n) {\n    if (s = {\n      dpi: n.dpi\n    }, \"map_only\" === o.toLowerCase() || \"\" === o) {\n      const e = n.width,\n            t = n.height;\n      s.outputSize = [e, t];\n    }\n  }\n\n  const l = a.layoutOptions;\n  let c;\n\n  if (l) {\n    let e, t;\n    \"Miles\" === l.scalebarUnit || \"Kilometers\" === l.scalebarUnit ? (e = \"Kilometers\", t = \"Miles\") : \"Meters\" !== l.scalebarUnit && \"Feet\" !== l.scalebarUnit || (e = \"Meters\", t = \"Feet\"), c = {\n      titleText: l.titleText,\n      authorText: l.authorText,\n      copyrightText: l.copyrightText,\n      customTextElements: l.customTextElements,\n      elementOverrides: l.elementOverrides,\n      scaleBarOptions: {\n        metricUnit: F.toJSON(e),\n        metricLabel: P[e],\n        nonMetricUnit: F.toJSON(t),\n        nonMetricLabel: P[t]\n      }\n    };\n  }\n\n  let u = null;\n  l?.legendLayers && (u = l.legendLayers.map(e => {\n    r.legendLayerNameMap[e.layerId] = e.title;\n    const t = {\n      id: e.layerId\n    };\n    return e.subLayerIds && (t.subLayerIds = e.subLayerIds), t;\n  }));\n  const y = await A(t, a, r);\n\n  if (y.operationalLayers) {\n    const e = new RegExp(\"[\\\\u4E00-\\\\u9FFF\\\\u0E00-\\\\u0E7F\\\\u0900-\\\\u097F\\\\u3040-\\\\u309F\\\\u30A0-\\\\u30FF\\\\u31F0-\\\\u31FF]\"),\n          t = /[\\u0600-\\u06FF]/,\n          a = i => {\n      const r = i.text,\n            a = i.font,\n            n = a && a.family && a.family.toLowerCase();\n      r && a && (\"arial\" === n || \"arial unicode ms\" === n) && (a.family = e.test(r) ? \"Arial Unicode MS\" : \"Arial\", \"normal\" !== a.style && t.test(r) && (a.family = \"Arial Unicode MS\"));\n    },\n          n = () => {\n      throw new i(\"print:cim-symbol-unsupported\", \"CIMSymbol is not supported by a print service published from ArcMap\");\n    };\n\n    y.operationalLayers.forEach(e => {\n      e.featureCollection?.layers ? e.featureCollection.layers.forEach(e => {\n        if (e.layerDefinition?.drawingInfo?.renderer?.symbol) {\n          const t = e.layerDefinition.drawingInfo.renderer;\n          \"esriTS\" === t.symbol.type ? a(t.symbol) : \"CIMSymbolReference\" !== t.symbol.type || r.is11xService || n();\n        }\n\n        e.featureSet?.features && e.featureSet.features.forEach(e => {\n          e.symbol && (\"esriTS\" === e.symbol.type ? a(e.symbol) : \"CIMSymbolReference\" !== e.symbol.type || r.is11xService || n());\n        });\n      }) : !r.is11xService && e.layerDefinition?.drawingInfo?.renderer && JSON.stringify(e.layerDefinition.drawingInfo.renderer).includes('\"type\":\"CIMSymbolReference\"') && n();\n    });\n  }\n\n  t.outSpatialReference && (y.mapOptions.spatialReference = t.outSpatialReference.toJSON()), Object.assign(y, {\n    exportOptions: s,\n    layoutOptions: c || {}\n  }), Object.assign(y.layoutOptions, {\n    legendOptions: {\n      operationalLayers: null != u ? u : r.legendLayers.slice()\n    }\n  }), r.legendLayers.length = 0, N.set(r.gpServerUrl, r);\n  const m = {\n    Web_Map_as_JSON: JSON.stringify(y),\n    Format: b(a.format),\n    Layout_Template: o,\n    Layout_Item_ID: void 0\n  };\n\n  if (a.layoutItem) {\n    delete m.Layout_Template;\n    const t = a.layoutItem;\n    await t.load(), \"public\" !== t.access && e && (await e.getCredential(r.gpServerUrl)), m.Layout_Item_ID = JSON.stringify({\n      id: t.id\n    });\n  }\n\n  return t.extraParameters && Object.assign(m, t.extraParameters), m;\n}\n\nasync function A(e, t, i) {\n  const r = e.view;\n  let n = r.spatialReference;\n  const s = {\n    operationalLayers: await k(r, t, i)\n  };\n  let o = i.ssExtent || e.extent || r.extent;\n\n  if (n && n.isWrappable && (o = o.clone()._normalize(!0), n = o.spatialReference), s.mapOptions = {\n    extent: o && o.toJSON(),\n    spatialReference: n && n.toJSON(),\n    showAttribution: t.attributionVisible\n  }, i.ssExtent = null, r.background && (s.background = r.background.toJSON()), r.rotation && (s.mapOptions.rotation = -r.rotation), t.scalePreserved && (s.mapOptions.scale = t.outScale || r.scale), a(r.timeExtent)) {\n    const e = a(r.timeExtent.start) ? r.timeExtent.start.getTime() : null,\n          t = a(r.timeExtent.end) ? r.timeExtent.end.getTime() : null;\n    s.mapOptions.time = [e, t];\n  }\n\n  return s;\n}\n\nfunction C(e) {\n  let t = e;\n  const i = t.lastIndexOf(\"/GPServer/\");\n  return i > 0 && (t = t.slice(0, i + 9)), t;\n}\n\nasync function k(e, t, i) {\n  const r = [],\n        a = {\n    layerView: null,\n    printTemplate: t,\n    view: e\n  };\n  let n = 0;\n  t.scalePreserved && (n = t.outScale || e.scale);\n  const s = w(e, n);\n\n  for (const o of s) {\n    const e = o.layer;\n    if (!e.loaded || \"group\" === e?.type) continue;\n    let t;\n    a.layerView = o, t = S(o) ? await Z(e, a, i) : x(e) ? z(e) : v(e) ? await _(e, a, i) : \"feature\" === e?.type ? await q(e, a, i) : \"geojson\" === e?.type ? await K(e, a, i) : \"graphics\" === e?.type ? await W(e, a, i) : \"imagery\" === e?.type ? B(e, i) : \"imagery-tile\" === e?.type ? await G(e, a, i) : \"kml\" === e?.type ? await Q(e, a, i) : \"map-image\" === e?.type ? H(e, a, i) : \"map-notes\" === e?.type ? await X(a, i) : \"open-street-map\" === e?.type ? Y() : \"stream\" === e?.type ? await ee(e, a, i) : \"tile\" === e?.type ? te(e, i) : \"vector-tile\" === e?.type ? await ie(e, a, i) : \"web-tile\" === e?.type ? re(e) : \"wms\" === e?.type ? ae(e) : \"wmts\" === e?.type ? ne(e) : await Z(e, a, i), t && (Array.isArray(t) ? r.push(...t) : (t.id = e.id, t.title = i.legendLayerNameMap[e.id] || e.title, t.opacity = e.opacity, t.minScale = e.minScale || 0, t.maxScale = e.maxScale || 0, I(e) && e.blendMode && \"normal\" !== e.blendMode && (t.blendMode = e.blendMode), r.push(t)));\n  }\n\n  if (n && r.forEach(e => {\n    e.minScale = 0, e.maxScale = 0;\n  }), e.graphics && e.graphics.length) {\n    const a = await $(null, e.graphics, t, i);\n    a && r.push(a);\n  }\n\n  return r;\n}\n\nfunction z(e) {\n  return {\n    culture: e.culture,\n    key: e.key,\n    type: \"BingMaps\" + (\"aerial\" === e.style ? \"Aerial\" : \"hybrid\" === e.style ? \"Hybrid\" : \"Road\")\n  };\n}\n\nasync function _(e, t, i) {\n  e.legendEnabled && i.legendLayers.push({\n    id: e.id\n  });\n  const r = t.layerView,\n        a = t.printTemplate;\n  let n;\n\n  if (!i.is11xService || r.filter) {\n    return $(e, await ce(r), a, i);\n  }\n\n  return n = {\n    type: \"CSV\"\n  }, e.write(n, {\n    origin: \"web-map\"\n  }), delete n.popupInfo, delete n.layerType, n.showLabels = a.showLabels && e.labelsVisible, n;\n}\n\nasync function $(e, t, i, r) {\n  let a;\n  const n = T(),\n        s = E(),\n        o = M(),\n        l = O(),\n        c = M();\n\n  if (c.layerDefinition.name = \"textLayer\", delete c.layerDefinition.drawingInfo, e) {\n    if (\"esri.layers.FeatureLayer\" === e.declaredClass || \"esri.layers.StreamLayer\" === e.declaredClass ? n.layerDefinition.name = s.layerDefinition.name = o.layerDefinition.name = l.layerDefinition.name = r.legendLayerNameMap[e.id] || e.get(\"arcgisProps.title\") || e.title : \"esri.layers.GraphicsLayer\" === e.declaredClass && (t = e.graphics.items), e.renderer) {\n      const t = e.renderer.toJSON();\n      n.layerDefinition.drawingInfo.renderer = t, s.layerDefinition.drawingInfo.renderer = t, o.layerDefinition.drawingInfo.renderer = t, l.layerDefinition.drawingInfo.renderer = t;\n    }\n\n    if (i.showLabels && e.labelsVisible && \"function\" == typeof e.write) {\n      const t = e.write({}, {\n        origin: \"web-map\"\n      }).layerDefinition?.drawingInfo?.labelingInfo;\n      t && (a = !0, n.layerDefinition.drawingInfo.labelingInfo = t, s.layerDefinition.drawingInfo.labelingInfo = t, o.layerDefinition.drawingInfo.labelingInfo = t, l.layerDefinition.drawingInfo.labelingInfo = t);\n    }\n  }\n\n  let m;\n  e?.renderer || a || (delete n.layerDefinition.drawingInfo, delete s.layerDefinition.drawingInfo, delete o.layerDefinition.drawingInfo, delete l.layerDefinition.drawingInfo);\n  const f = e?.fieldsIndex,\n        p = e?.renderer;\n\n  if (f) {\n    const t = new Set();\n    a && (await y(t, e)), p && \"function\" == typeof p.collectRequiredFields && (await p.collectRequiredFields(t, f)), m = Array.from(t);\n    const i = f.fields.map(e => e.toJSON());\n    n.layerDefinition.fields = i, s.layerDefinition.fields = i, o.layerDefinition.fields = i, l.layerDefinition.fields = i;\n  }\n\n  const d = t && t.length;\n  let g;\n\n  for (let y = 0; y < d; y++) {\n    const a = t[y] || t.getItemAt(y);\n    if (!1 === a.visible || !a.geometry) continue;\n    if (g = a.toJSON(), g.hasOwnProperty(\"popupTemplate\") && delete g.popupTemplate, g.geometry && g.geometry.z && delete g.geometry.z, g.symbol && g.symbol.outline && \"esriCLS\" === g.symbol.outline.type && !r.is11xService) continue;\n    !r.is11xService && g.symbol && g.symbol.outline && g.symbol.outline.color && g.symbol.outline.color[3] && (g.symbol.outline.color[3] = 255);\n    const f = e && e.renderer && (\"valueExpression\" in e.renderer && e.renderer.valueExpression || \"hasVisualVariables\" in e.renderer && e.renderer.hasVisualVariables());\n\n    if (!g.symbol && e && e.renderer && f && !r.is11xService) {\n      const t = e.renderer,\n            i = await t.getSymbolAsync(a);\n      if (!i) continue;\n      g.symbol = i.toJSON(), \"hasVisualVariables\" in t && t.hasVisualVariables() && D(g.symbol, {\n        renderer: t,\n        graphic: a,\n        symbol: i\n      });\n    }\n\n    if (g.symbol && (g.symbol.angle || delete g.symbol.angle, ye(g.symbol) ? g.symbol = await oe(g.symbol, r) : g.symbol.text && delete g.attributes), (!i || !i.forceFeatureAttributes) && m?.length) {\n      const e = {};\n      m.forEach(t => {\n        g.attributes && g.attributes.hasOwnProperty(t) && (e[t] = g.attributes[t]);\n      }), g.attributes = e;\n    }\n\n    \"polygon\" === a.geometry.type ? n.featureSet.features.push(g) : \"polyline\" === a.geometry.type ? s.featureSet.features.push(g) : \"point\" === a.geometry.type ? g.symbol && g.symbol.text ? c.featureSet.features.push(g) : o.featureSet.features.push(g) : \"multipoint\" === a.geometry.type ? l.featureSet.features.push(g) : \"extent\" === a.geometry.type && (g.geometry = u.fromExtent(a.geometry).toJSON(), n.featureSet.features.push(g));\n  }\n\n  const b = [n, s, l, o, c].filter(e => e.featureSet.features.length > 0);\n\n  for (const u of b) {\n    const e = u.featureSet.features.every(e => e.symbol);\n    !e || i && i.forceFeatureAttributes || u.featureSet.features.forEach(e => {\n      delete e.attributes;\n    }), e && delete u.layerDefinition.drawingInfo, u.layerDefinition.drawingInfo && u.layerDefinition.drawingInfo.renderer && (await le(u.layerDefinition.drawingInfo.renderer, r));\n  }\n\n  return b.length ? {\n    featureCollection: {\n      layers: b\n    },\n    showLabels: a\n  } : null;\n}\n\nasync function q(e, t, i) {\n  let r;\n  const a = e.renderer,\n        n = parseFloat(i.cimVersion);\n  if (\"binning\" === e.featureReduction?.type || \"cluster\" === e.featureReduction?.type && (!i.is11xService || n < 2.9) || \"pie-chart\" === a?.type || \"dot-density\" === a?.type && (!i.is11xService || n < 2.6)) return Z(e, t, i);\n  e.legendEnabled && i.legendLayers.push({\n    id: e.id\n  });\n  const s = t.layerView,\n        {\n    printTemplate: o,\n    view: l\n  } = t,\n        c = a && (\"valueExpression\" in a && a.valueExpression || \"hasVisualVariables\" in a && a.hasVisualVariables()),\n        u = \"feature-layer\" !== e.source?.type && \"ogc-feature\" !== e.source?.type;\n\n  if (!i.is11xService && c || s.filter || u || !a || \"field\" in a && null != a.field && (\"string\" != typeof a.field || !e.getField(a.field))) {\n    const t = await ce(s);\n    r = await $(e, t, o, i);\n  } else {\n    if (r = {\n      id: (y = e.write()).id,\n      title: y.title,\n      opacity: y.opacity,\n      minScale: y.minScale,\n      maxScale: y.maxScale,\n      url: y.url,\n      layerType: y.layerType,\n      customParameters: y.customParameters,\n      layerDefinition: y.layerDefinition\n    }, r.showLabels = o.showLabels && e.labelsVisible, se(r, e), r.layerDefinition?.drawingInfo?.renderer && (delete r.layerDefinition.minScale, delete r.layerDefinition.maxScale, await le(r.layerDefinition.drawingInfo.renderer, i), \"visualVariables\" in a && a.visualVariables && a.visualVariables[0])) {\n      const e = a.visualVariables[0];\n\n      if (\"size\" === e.type && e.maxSize && \"number\" != typeof e.maxSize && e.minSize && \"number\" != typeof e.minSize) {\n        const t = f(e, l.scale);\n        r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize = t.minSize, r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize = t.maxSize;\n      }\n    }\n\n    const t = m(s);\n    t && (r.layerDefinition || (r.layerDefinition = {}), r.layerDefinition.definitionExpression = r.layerDefinition.definitionExpression ? `(${r.layerDefinition.definitionExpression}) AND (${t})` : t);\n  }\n\n  var y;\n  return r;\n}\n\nasync function K(e, t, i) {\n  if (\"binning\" === e.featureReduction?.type || \"cluster\" === e.featureReduction?.type) return Z(e, t, i);\n  e.legendEnabled && i.legendLayers.push({\n    id: e.id\n  });\n  return $(e, await ce(t.layerView), t.printTemplate, i);\n}\n\nasync function W(e, {\n  printTemplate: t\n}, i) {\n  return $(e, null, t, i);\n}\n\nfunction B(e, t) {\n  e.legendEnabled && t.legendLayers.push({\n    id: e.id\n  });\n  const i = {\n    layerType: (r = e.write()).layerType,\n    customParameters: r.customParameters\n  };\n  var r;\n  if (i.bandIds = e.bandIds, i.compressionQuality = e.compressionQuality, i.format = e.format, i.interpolation = e.interpolation, (e.mosaicRule || e.definitionExpression) && (i.mosaicRule = e.exportImageServiceParameters.mosaicRule.toJSON()), e.renderingRule || e.renderer) if (t.is11xService) e.renderingRule && (i.renderingRule = e.renderingRule.toJSON()), e.renderer && (i.layerDefinition = i.layerDefinition || {}, i.layerDefinition.drawingInfo = i.layerDefinition.drawingInfo || {}, i.layerDefinition.drawingInfo.renderer = e.renderer.toJSON());else {\n    const t = e.exportImageServiceParameters.combineRendererWithRenderingRule();\n    t && (i.renderingRule = t.toJSON());\n  }\n  return se(i, e), i;\n}\n\nasync function G(e, t, i) {\n  if (\"flow\" === e.renderer?.type) return Z(e, t, i);\n  e.legendEnabled && i.legendLayers.push({\n    id: e.id\n  });\n  const r = {\n    bandIds: (a = e.write() || {}).bandIds,\n    customParameters: a.customParameters,\n    interpolation: a.interpolation,\n    layerDefinition: a.layerDefinition\n  };\n  var a;\n  return r.layerType = \"ArcGISImageServiceLayer\", se(r, e), r;\n}\n\nasync function Q(e, t, i) {\n  const r = t.printTemplate;\n\n  if (i.is11xService) {\n    const t = {\n      type: \"kml\"\n    };\n    return e.write(t, {\n      origin: \"web-map\"\n    }), delete t.layerType, t.url = l(e.url), t;\n  }\n\n  {\n    const a = [],\n          n = t.layerView;\n    n.allVisibleMapImages.forEach((t, i) => {\n      const r = {\n        id: `${e.id}_image${i}`,\n        type: \"image\",\n        title: e.id,\n        minScale: e.minScale || 0,\n        maxScale: e.maxScale || 0,\n        opacity: e.opacity,\n        extent: t.extent\n      };\n      \"data:image/png;base64,\" === t.href.substr(0, 22) ? r.imageData = t.href.substr(22) : r.url = t.href, a.push(r);\n    });\n    const s = [...n.allVisiblePoints.items, ...n.allVisiblePolylines.items, ...n.allVisiblePolygons.items],\n          o = {\n      id: e.id,\n      ...(await $(null, s, r, i))\n    };\n    return a.push(o), a;\n  }\n}\n\nfunction H(e, {\n  view: t\n}, i) {\n  let r;\n  const a = {\n    id: e.id,\n    subLayerIds: []\n  };\n  let n = [];\n\n  const s = t.scale,\n        o = e => {\n    const t = 0 === s,\n          i = 0 === e.minScale || s <= e.minScale,\n          r = 0 === e.maxScale || s >= e.maxScale;\n    if (e.visible && (t || i && r)) if (e.sublayers) e.sublayers.forEach(o);else {\n      const t = e.toExportImageJSON(),\n            i = {\n        id: e.id,\n        name: e.title,\n        layerDefinition: {\n          drawingInfo: t.drawingInfo,\n          definitionExpression: t.definitionExpression,\n          source: t.source\n        }\n      };\n      n.unshift(i), a.subLayerIds.push(e.id);\n    }\n  };\n\n  var l;\n  return e.sublayers && e.sublayers.forEach(o), n.length && (n = n.map(({\n    id: e,\n    name: t,\n    layerDefinition: i\n  }) => ({\n    id: e,\n    name: t,\n    layerDefinition: i\n  })), r = {\n    layerType: (l = e.write()).layerType,\n    customParameters: l.customParameters\n  }, r.layers = n, r.visibleLayers = e.capabilities.exportMap.supportsDynamicLayers ? void 0 : a.subLayerIds, se(r, e), e.legendEnabled && i.legendLayers.push(a)), r;\n}\n\nasync function X({\n  layerView: e,\n  printTemplate: t\n}, i) {\n  const r = [],\n        n = e.layer;\n  if (a(n.featureCollections)) for (const a of n.featureCollections) {\n    const e = await $(a, a.source, t, i);\n    e && r.push(...e.featureCollection.layers);\n  } else if (a(n.sublayers)) for (const a of n.sublayers) {\n    const e = await $(null, a.graphics, t, i);\n    e && r.push(...e.featureCollection.layers);\n  }\n  return {\n    featureCollection: {\n      layers: r\n    }\n  };\n}\n\nfunction Y() {\n  return {\n    type: \"OpenStreetMap\"\n  };\n}\n\nasync function Z(e, {\n  printTemplate: t,\n  view: i\n}, r) {\n  const a = {\n    type: \"image\"\n  },\n        s = {\n    format: \"png\",\n    ignoreBackground: !0,\n    layers: [e],\n    rotation: 0\n  },\n        o = r.ssExtent || i.extent.clone();\n  let l = 96,\n      u = !0,\n      y = !0;\n\n  if (t.exportOptions) {\n    const e = t.exportOptions;\n    e.dpi > 0 && (l = e.dpi), e.width > 0 && (u = e.width % 2 == i.width % 2), e.height > 0 && (y = e.height % 2 == i.height % 2);\n  }\n\n  if (\"map-only\" === t.layout && t.scalePreserved && (!t.outScale || t.outScale === i.scale) && 96 === l && (!u || !y) && (s.area = {\n    x: 0,\n    y: 0,\n    width: i.width,\n    height: i.height\n  }, u || (s.area.width -= 1), y || (s.area.height -= 1), !r.ssExtent)) {\n    const e = i.toMap(n(s.area.width, s.area.height));\n    o.ymin = e.y, o.xmax = e.x, r.ssExtent = o;\n  }\n\n  a.extent = o.clone()._normalize(!0).toJSON();\n  const m = await i.takeScreenshot(s),\n        {\n    data: f\n  } = c(m.dataUrl);\n  return a.imageData = f, a;\n}\n\nasync function ee(e, {\n  layerView: t,\n  printTemplate: i\n}, r) {\n  e.legendEnabled && r.legendLayers.push({\n    id: e.id\n  });\n  return $(e, await ce(t), i, r);\n}\n\nfunction te(e, t) {\n  e.legendEnabled && t.legendLayers.push({\n    id: e.id\n  });\n  const i = {\n    layerType: (r = e.write()).layerType,\n    customParameters: r.customParameters\n  };\n  var r;\n  return se(i, e), i;\n}\n\nasync function ie(e, t, i) {\n  if (i.is11xService && e.serviceUrl && e.styleUrl) {\n    const t = p(e.styleUrl, e.apiKey),\n          r = p(e.serviceUrl, e.apiKey);\n\n    if (!t && !r || \"2.1.0\" !== i.cimVersion) {\n      const i = {\n        type: \"VectorTileLayer\"\n      };\n      return i.styleUrl = l(e.styleUrl), i.token = t, r !== t && (i.additionalTokens = [{\n        url: e.serviceUrl,\n        token: r\n      }]), i;\n    }\n  }\n\n  return Z(e, t, i);\n}\n\nfunction re(e) {\n  const t = {\n    type: \"WebTiledLayer\",\n    urlTemplate: e.urlTemplate.replace(/\\${/g, \"{\"),\n    credits: e.copyright\n  };\n  return e.subDomains && e.subDomains.length > 0 && (t.subDomains = e.subDomains), t;\n}\n\nfunction ae(e) {\n  let t;\n\n  const i = [],\n        r = e => {\n    e.visible && (e.sublayers ? e.sublayers.forEach(r) : e.name && i.unshift(e.name));\n  };\n\n  return e.sublayers && e.sublayers.forEach(r), i.length && (t = {\n    type: \"wms\",\n    customLayerParameters: e.customLayerParameters,\n    customParameters: e.customParameters,\n    transparentBackground: e.imageTransparency,\n    visibleLayers: i,\n    url: l(e.url),\n    version: e.version\n  }), t;\n}\n\nfunction ne(e) {\n  const t = e.activeLayer;\n  return {\n    type: \"wmts\",\n    customLayerParameters: e.customLayerParameters,\n    customParameters: e.customParameters,\n    format: t.imageFormat,\n    layer: t.id,\n    style: t.styleId,\n    tileMatrixSet: t.tileMatrixSetId,\n    url: l(e.url)\n  };\n}\n\nfunction se(e, t) {\n  t.url && (e.url = l(e.url || t.url), e.token = p(e.url, t.apiKey));\n}\n\nasync function oe(e, i) {\n  i.canvas || (i.canvas = document.createElement(\"canvas\"));\n  const r = 1024;\n  i.canvas.width = r, i.canvas.height = r;\n  const a = i.canvas.getContext(\"2d\");\n  let n, l;\n\n  if (e.path) {\n    const t = new Path2D(e.path);\n    t.closePath(), a.fillStyle = Array.isArray(e.color) ? `rgba(${e.color[0]},${e.color[1]},${e.color[2]},${e.color[3] / 255})` : \"rgb(0,0,0)\", a.fill(t);\n    const i = L(a);\n    if (!i) return null;\n    a.clearRect(0, 0, r, r);\n    const o = s(e.size) / Math.max(i.width, i.height);\n    a.scale(o, o);\n    const c = r / o,\n          u = c / 2 - i.width / 2 - i.x,\n          y = c / 2 - i.height / 2 - i.y;\n\n    if (a.translate(u, y), Array.isArray(e.color) && a.fill(t), e.outline?.width && Array.isArray(e.outline.color)) {\n      const r = e.outline;\n      a.lineWidth = s(r.width) / o, a.lineJoin = \"round\", a.strokeStyle = `rgba(${r.color[0]},${r.color[1]},${r.color[2]},${r.color[3] / 255})`, a.stroke(t), i.width += a.lineWidth, i.height += a.lineWidth;\n    }\n\n    i.width *= o, i.height *= o;\n    const m = a.getImageData(r / 2 - i.width / 2, r / 2 - i.height / 2, Math.ceil(i.width), Math.ceil(i.height));\n    n = m.width, l = m.height, a.canvas.width = n, a.canvas.height = l, a.putImageData(m, 0, 0);\n  } else {\n    const i = \"image/svg+xml\" === e.contentType ? \"data:image/svg+xml;base64,\" + e.imageData : e.url,\n          r = (await t(i, {\n      responseType: \"image\"\n    })).data;\n    n = s(e.width), l = s(e.height), a.canvas.width = n, a.canvas.height = l, a.drawImage(r, 0, 0, a.canvas.width, a.canvas.height);\n  }\n\n  return {\n    type: \"esriPMS\",\n    imageData: a.canvas.toDataURL(\"image/png\").substr(22),\n    angle: e.angle,\n    contentType: \"image/png\",\n    height: o(l),\n    width: o(n),\n    xoffset: e.xoffset,\n    yoffset: e.yoffset\n  };\n}\n\nasync function le(e, t) {\n  const i = e.type;\n  if (\"simple\" === i && ye(e.symbol)) e.symbol = await oe(e.symbol, t);else if (\"uniqueValue\" === i || \"classBreaks\" === i) {\n    ye(e.defaultSymbol) && (e.defaultSymbol = await oe(e.defaultSymbol, t));\n    const r = e[\"uniqueValue\" === i ? \"uniqueValueInfos\" : \"classBreakInfos\"];\n    if (r) for (const e of r) ye(e.symbol) && (e.symbol = await oe(e.symbol, t));\n  }\n}\n\nasync function ce(e) {\n  return e.queryFeatures(e.createQuery()).then(e => e.features);\n}\n\nfunction ue(e) {\n  return e.gpMetadata && e.gpMetadata.executionType ? R.fromJSON(e.gpMetadata.executionType) : \"sync\";\n}\n\nfunction ye(e) {\n  return e && (e.path || \"image/svg+xml\" === e.contentType || e.url && e.url.endsWith(\".svg\"));\n}\n\nexport { J as execute, j as getGpPrintParams, C as getGpServerUrl, U as getMode, N as printCacheMap };","map":{"version":3,"names":["id","e","t","i","JSONMap","r","isSome","a","createScreenPoint","n","pt2px","s","px2pt","o","normalize","l","dataComponents","c","u","collectLabelingFields","y","getFloorFilterClause","m","getSizeRangeAtScale","f","getToken","p","execute","d","submitJob","g","toJSON","b","h","getVisibleLayerViews","w","isScreenshotRequired","S","isBingMapsLayer","x","isCSVLayer","v","isBlendLayer","I","applyVisualVariables","D","getContextBoundingBox","L","createPolygonLayer","T","createPolylineLayer","E","createPointLayer","M","createMultipointLayer","O","V","P","Feet","Kilometers","Meters","Miles","F","esriFeet","esriKilometers","esriMeters","esriMiles","R","esriExecutionTypeSynchronous","esriExecutionTypeAsynchronous","N","Map","J","C","get","Promise","resolve","then","data","gpMetadata","gpServerUrl","is11xService","legendLayerNameMap","legendLayers","query","cimVersion","set","j","ue","results","value","fetchResultData","waitForJobCompletion","interval","updateDelay","U","template","showLabels","exportOptions","layout","dpi","toLowerCase","width","height","outputSize","layoutOptions","scalebarUnit","titleText","authorText","copyrightText","customTextElements","elementOverrides","scaleBarOptions","metricUnit","metricLabel","nonMetricUnit","nonMetricLabel","map","layerId","title","subLayerIds","A","operationalLayers","RegExp","text","font","family","test","style","forEach","featureCollection","layers","layerDefinition","drawingInfo","renderer","symbol","type","featureSet","features","JSON","stringify","includes","outSpatialReference","mapOptions","spatialReference","Object","assign","legendOptions","slice","length","Web_Map_as_JSON","Format","format","Layout_Template","Layout_Item_ID","layoutItem","load","access","getCredential","extraParameters","view","k","ssExtent","extent","isWrappable","clone","_normalize","showAttribution","attributionVisible","background","rotation","scalePreserved","scale","outScale","timeExtent","start","getTime","end","time","lastIndexOf","layerView","printTemplate","layer","loaded","Z","z","_","q","K","W","B","G","Q","H","X","Y","ee","te","ie","re","ae","ne","Array","isArray","push","opacity","minScale","maxScale","blendMode","graphics","$","culture","key","legendEnabled","filter","ce","write","origin","popupInfo","layerType","labelsVisible","name","declaredClass","items","labelingInfo","fieldsIndex","Set","collectRequiredFields","from","fields","getItemAt","visible","geometry","hasOwnProperty","popupTemplate","outline","color","valueExpression","hasVisualVariables","getSymbolAsync","graphic","angle","ye","oe","attributes","forceFeatureAttributes","fromExtent","every","le","parseFloat","featureReduction","source","field","getField","url","customParameters","se","visualVariables","maxSize","minSize","definitionExpression","bandIds","compressionQuality","interpolation","mosaicRule","exportImageServiceParameters","renderingRule","combineRendererWithRenderingRule","allVisibleMapImages","href","substr","imageData","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","sublayers","toExportImageJSON","unshift","visibleLayers","capabilities","exportMap","supportsDynamicLayers","featureCollections","ignoreBackground","area","toMap","ymin","xmax","takeScreenshot","dataUrl","serviceUrl","styleUrl","apiKey","token","additionalTokens","urlTemplate","replace","credits","copyright","subDomains","customLayerParameters","transparentBackground","imageTransparency","version","activeLayer","imageFormat","styleId","tileMatrixSet","tileMatrixSetId","canvas","document","createElement","getContext","path","Path2D","closePath","fillStyle","fill","clearRect","size","Math","max","translate","lineWidth","lineJoin","strokeStyle","stroke","getImageData","ceil","putImageData","contentType","responseType","drawImage","toDataURL","xoffset","yoffset","defaultSymbol","queryFeatures","createQuery","executionType","fromJSON","endsWith","getGpPrintParams","getGpServerUrl","getMode","printCacheMap"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/rest/print.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{id as e}from\"../kernel.js\";import t from\"../request.js\";import i from\"../core/Error.js\";import{JSONMap as r}from\"../core/jsonMap.js\";import{isSome as a}from\"../core/maybe.js\";import{createScreenPoint as n,pt2px as s,px2pt as o}from\"../core/screenUtils.js\";import{normalize as l,dataComponents as c}from\"../core/urlUtils.js\";import u from\"../geometry/Polygon.js\";import{collectLabelingFields as y}from\"../layers/support/fieldUtils.js\";import{getFloorFilterClause as m}from\"../layers/support/floorFilterUtils.js\";import{getSizeRangeAtScale as f}from\"../renderers/visualVariables/support/visualVariableUtils.js\";import{getToken as p}from\"./utils.js\";import{execute as d}from\"./geoprocessor/execute.js\";import{submitJob as g}from\"./geoprocessor/submitJob.js\";import{toJSON as b}from\"./support/fileFormat.js\";import{toJSON as h}from\"./support/layoutTemplate.js\";import{getVisibleLayerViews as w,isScreenshotRequired as S,isBingMapsLayer as x,isCSVLayer as v,isBlendLayer as I,applyVisualVariables as D,getContextBoundingBox as L,createPolygonLayer as T,createPolylineLayer as E,createPointLayer as M,createMultipointLayer as O}from\"./support/printTaskUtils.js\";import V from\"./support/PrintTemplate.js\";const P={Feet:\"ft\",Kilometers:\"km\",Meters:\"m\",Miles:\"mi\"},F=new r({esriFeet:\"Feet\",esriKilometers:\"Kilometers\",esriMeters:\"Meters\",esriMiles:\"Miles\"}),R=new r({esriExecutionTypeSynchronous:\"sync\",esriExecutionTypeAsynchronous:\"async\"}),N=new Map;async function J(e,i,r){const a=C(e);let n=N.get(a);return Promise.resolve().then((()=>n?{data:n.gpMetadata}:(n={gpServerUrl:a,is11xService:!1,legendLayerNameMap:{},legendLayers:[]},t(a,{query:{f:\"json\"}})))).then((e=>(n.gpMetadata=e.data,n.cimVersion=n.gpMetadata.cimVersion,n.is11xService=!!n.cimVersion,N.set(a,n),j(i,n)))).then((t=>{const a=ue(n);let s;const o=e=>\"sync\"===a?e.results&&e.results[0]&&e.results[0].value:s.fetchResultData(\"Output_File\",null,r).then((e=>e.value));return\"async\"===a?g(e,t,null,r).then((e=>(s=e,e.waitForJobCompletion({interval:i.updateDelay}).then(o)))):d(e,t,null,r).then(o)}))}async function U(e){const t=C(e);return ue(N.get(t))}async function j(t,r){r=r||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]};const a=t.template||new V;null==a.showLabels&&(a.showLabels=!0);const n=a.exportOptions;let s;const o=h(a.layout);if(n){if(s={dpi:n.dpi},\"map_only\"===o.toLowerCase()||\"\"===o){const e=n.width,t=n.height;s.outputSize=[e,t]}}const l=a.layoutOptions;let c;if(l){let e,t;\"Miles\"===l.scalebarUnit||\"Kilometers\"===l.scalebarUnit?(e=\"Kilometers\",t=\"Miles\"):\"Meters\"!==l.scalebarUnit&&\"Feet\"!==l.scalebarUnit||(e=\"Meters\",t=\"Feet\"),c={titleText:l.titleText,authorText:l.authorText,copyrightText:l.copyrightText,customTextElements:l.customTextElements,elementOverrides:l.elementOverrides,scaleBarOptions:{metricUnit:F.toJSON(e),metricLabel:P[e],nonMetricUnit:F.toJSON(t),nonMetricLabel:P[t]}}}let u=null;l?.legendLayers&&(u=l.legendLayers.map((e=>{r.legendLayerNameMap[e.layerId]=e.title;const t={id:e.layerId};return e.subLayerIds&&(t.subLayerIds=e.subLayerIds),t})));const y=await A(t,a,r);if(y.operationalLayers){const e=new RegExp(\"[\\\\u4E00-\\\\u9FFF\\\\u0E00-\\\\u0E7F\\\\u0900-\\\\u097F\\\\u3040-\\\\u309F\\\\u30A0-\\\\u30FF\\\\u31F0-\\\\u31FF]\"),t=/[\\u0600-\\u06FF]/,a=i=>{const r=i.text,a=i.font,n=a&&a.family&&a.family.toLowerCase();r&&a&&(\"arial\"===n||\"arial unicode ms\"===n)&&(a.family=e.test(r)?\"Arial Unicode MS\":\"Arial\",\"normal\"!==a.style&&t.test(r)&&(a.family=\"Arial Unicode MS\"))},n=()=>{throw new i(\"print:cim-symbol-unsupported\",\"CIMSymbol is not supported by a print service published from ArcMap\")};y.operationalLayers.forEach((e=>{e.featureCollection?.layers?e.featureCollection.layers.forEach((e=>{if(e.layerDefinition?.drawingInfo?.renderer?.symbol){const t=e.layerDefinition.drawingInfo.renderer;\"esriTS\"===t.symbol.type?a(t.symbol):\"CIMSymbolReference\"!==t.symbol.type||r.is11xService||n()}e.featureSet?.features&&e.featureSet.features.forEach((e=>{e.symbol&&(\"esriTS\"===e.symbol.type?a(e.symbol):\"CIMSymbolReference\"!==e.symbol.type||r.is11xService||n())}))})):!r.is11xService&&e.layerDefinition?.drawingInfo?.renderer&&JSON.stringify(e.layerDefinition.drawingInfo.renderer).includes('\"type\":\"CIMSymbolReference\"')&&n()}))}t.outSpatialReference&&(y.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(y,{exportOptions:s,layoutOptions:c||{}}),Object.assign(y.layoutOptions,{legendOptions:{operationalLayers:null!=u?u:r.legendLayers.slice()}}),r.legendLayers.length=0,N.set(r.gpServerUrl,r);const m={Web_Map_as_JSON:JSON.stringify(y),Format:b(a.format),Layout_Template:o,Layout_Item_ID:void 0};if(a.layoutItem){delete m.Layout_Template;const t=a.layoutItem;await t.load(),\"public\"!==t.access&&e&&await e.getCredential(r.gpServerUrl),m.Layout_Item_ID=JSON.stringify({id:t.id})}return t.extraParameters&&Object.assign(m,t.extraParameters),m}async function A(e,t,i){const r=e.view;let n=r.spatialReference;const s={operationalLayers:await k(r,t,i)};let o=i.ssExtent||e.extent||r.extent;if(n&&n.isWrappable&&(o=o.clone()._normalize(!0),n=o.spatialReference),s.mapOptions={extent:o&&o.toJSON(),spatialReference:n&&n.toJSON(),showAttribution:t.attributionVisible},i.ssExtent=null,r.background&&(s.background=r.background.toJSON()),r.rotation&&(s.mapOptions.rotation=-r.rotation),t.scalePreserved&&(s.mapOptions.scale=t.outScale||r.scale),a(r.timeExtent)){const e=a(r.timeExtent.start)?r.timeExtent.start.getTime():null,t=a(r.timeExtent.end)?r.timeExtent.end.getTime():null;s.mapOptions.time=[e,t]}return s}function C(e){let t=e;const i=t.lastIndexOf(\"/GPServer/\");return i>0&&(t=t.slice(0,i+9)),t}async function k(e,t,i){const r=[],a={layerView:null,printTemplate:t,view:e};let n=0;t.scalePreserved&&(n=t.outScale||e.scale);const s=w(e,n);for(const o of s){const e=o.layer;if(!e.loaded||\"group\"===e?.type)continue;let t;a.layerView=o,t=S(o)?await Z(e,a,i):x(e)?z(e):v(e)?await _(e,a,i):\"feature\"===e?.type?await q(e,a,i):\"geojson\"===e?.type?await K(e,a,i):\"graphics\"===e?.type?await W(e,a,i):\"imagery\"===e?.type?B(e,i):\"imagery-tile\"===e?.type?await G(e,a,i):\"kml\"===e?.type?await Q(e,a,i):\"map-image\"===e?.type?H(e,a,i):\"map-notes\"===e?.type?await X(a,i):\"open-street-map\"===e?.type?Y():\"stream\"===e?.type?await ee(e,a,i):\"tile\"===e?.type?te(e,i):\"vector-tile\"===e?.type?await ie(e,a,i):\"web-tile\"===e?.type?re(e):\"wms\"===e?.type?ae(e):\"wmts\"===e?.type?ne(e):await Z(e,a,i),t&&(Array.isArray(t)?r.push(...t):(t.id=e.id,t.title=i.legendLayerNameMap[e.id]||e.title,t.opacity=e.opacity,t.minScale=e.minScale||0,t.maxScale=e.maxScale||0,I(e)&&e.blendMode&&\"normal\"!==e.blendMode&&(t.blendMode=e.blendMode),r.push(t)))}if(n&&r.forEach((e=>{e.minScale=0,e.maxScale=0})),e.graphics&&e.graphics.length){const a=await $(null,e.graphics,t,i);a&&r.push(a)}return r}function z(e){return{culture:e.culture,key:e.key,type:\"BingMaps\"+(\"aerial\"===e.style?\"Aerial\":\"hybrid\"===e.style?\"Hybrid\":\"Road\")}}async function _(e,t,i){e.legendEnabled&&i.legendLayers.push({id:e.id});const r=t.layerView,a=t.printTemplate;let n;if(!i.is11xService||r.filter){return $(e,await ce(r),a,i)}return n={type:\"CSV\"},e.write(n,{origin:\"web-map\"}),delete n.popupInfo,delete n.layerType,n.showLabels=a.showLabels&&e.labelsVisible,n}async function $(e,t,i,r){let a;const n=T(),s=E(),o=M(),l=O(),c=M();if(c.layerDefinition.name=\"textLayer\",delete c.layerDefinition.drawingInfo,e){if(\"esri.layers.FeatureLayer\"===e.declaredClass||\"esri.layers.StreamLayer\"===e.declaredClass?n.layerDefinition.name=s.layerDefinition.name=o.layerDefinition.name=l.layerDefinition.name=r.legendLayerNameMap[e.id]||e.get(\"arcgisProps.title\")||e.title:\"esri.layers.GraphicsLayer\"===e.declaredClass&&(t=e.graphics.items),e.renderer){const t=e.renderer.toJSON();n.layerDefinition.drawingInfo.renderer=t,s.layerDefinition.drawingInfo.renderer=t,o.layerDefinition.drawingInfo.renderer=t,l.layerDefinition.drawingInfo.renderer=t}if(i.showLabels&&e.labelsVisible&&\"function\"==typeof e.write){const t=e.write({},{origin:\"web-map\"}).layerDefinition?.drawingInfo?.labelingInfo;t&&(a=!0,n.layerDefinition.drawingInfo.labelingInfo=t,s.layerDefinition.drawingInfo.labelingInfo=t,o.layerDefinition.drawingInfo.labelingInfo=t,l.layerDefinition.drawingInfo.labelingInfo=t)}}let m;e?.renderer||a||(delete n.layerDefinition.drawingInfo,delete s.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo);const f=e?.fieldsIndex,p=e?.renderer;if(f){const t=new Set;a&&await y(t,e),p&&\"function\"==typeof p.collectRequiredFields&&await p.collectRequiredFields(t,f),m=Array.from(t);const i=f.fields.map((e=>e.toJSON()));n.layerDefinition.fields=i,s.layerDefinition.fields=i,o.layerDefinition.fields=i,l.layerDefinition.fields=i}const d=t&&t.length;let g;for(let y=0;y<d;y++){const a=t[y]||t.getItemAt(y);if(!1===a.visible||!a.geometry)continue;if(g=a.toJSON(),g.hasOwnProperty(\"popupTemplate\")&&delete g.popupTemplate,g.geometry&&g.geometry.z&&delete g.geometry.z,g.symbol&&g.symbol.outline&&\"esriCLS\"===g.symbol.outline.type&&!r.is11xService)continue;!r.is11xService&&g.symbol&&g.symbol.outline&&g.symbol.outline.color&&g.symbol.outline.color[3]&&(g.symbol.outline.color[3]=255);const f=e&&e.renderer&&(\"valueExpression\"in e.renderer&&e.renderer.valueExpression||\"hasVisualVariables\"in e.renderer&&e.renderer.hasVisualVariables());if(!g.symbol&&e&&e.renderer&&f&&!r.is11xService){const t=e.renderer,i=await t.getSymbolAsync(a);if(!i)continue;g.symbol=i.toJSON(),\"hasVisualVariables\"in t&&t.hasVisualVariables()&&D(g.symbol,{renderer:t,graphic:a,symbol:i})}if(g.symbol&&(g.symbol.angle||delete g.symbol.angle,ye(g.symbol)?g.symbol=await oe(g.symbol,r):g.symbol.text&&delete g.attributes),(!i||!i.forceFeatureAttributes)&&m?.length){const e={};m.forEach((t=>{g.attributes&&g.attributes.hasOwnProperty(t)&&(e[t]=g.attributes[t])})),g.attributes=e}\"polygon\"===a.geometry.type?n.featureSet.features.push(g):\"polyline\"===a.geometry.type?s.featureSet.features.push(g):\"point\"===a.geometry.type?g.symbol&&g.symbol.text?c.featureSet.features.push(g):o.featureSet.features.push(g):\"multipoint\"===a.geometry.type?l.featureSet.features.push(g):\"extent\"===a.geometry.type&&(g.geometry=u.fromExtent(a.geometry).toJSON(),n.featureSet.features.push(g))}const b=[n,s,l,o,c].filter((e=>e.featureSet.features.length>0));for(const u of b){const e=u.featureSet.features.every((e=>e.symbol));!e||i&&i.forceFeatureAttributes||u.featureSet.features.forEach((e=>{delete e.attributes})),e&&delete u.layerDefinition.drawingInfo,u.layerDefinition.drawingInfo&&u.layerDefinition.drawingInfo.renderer&&await le(u.layerDefinition.drawingInfo.renderer,r)}return b.length?{featureCollection:{layers:b},showLabels:a}:null}async function q(e,t,i){let r;const a=e.renderer,n=parseFloat(i.cimVersion);if(\"binning\"===e.featureReduction?.type||\"cluster\"===e.featureReduction?.type&&(!i.is11xService||n<2.9)||\"pie-chart\"===a?.type||\"dot-density\"===a?.type&&(!i.is11xService||n<2.6))return Z(e,t,i);e.legendEnabled&&i.legendLayers.push({id:e.id});const s=t.layerView,{printTemplate:o,view:l}=t,c=a&&(\"valueExpression\"in a&&a.valueExpression||\"hasVisualVariables\"in a&&a.hasVisualVariables()),u=\"feature-layer\"!==e.source?.type&&\"ogc-feature\"!==e.source?.type;if(!i.is11xService&&c||s.filter||u||!a||\"field\"in a&&null!=a.field&&(\"string\"!=typeof a.field||!e.getField(a.field))){const t=await ce(s);r=await $(e,t,o,i)}else{if(r={id:(y=e.write()).id,title:y.title,opacity:y.opacity,minScale:y.minScale,maxScale:y.maxScale,url:y.url,layerType:y.layerType,customParameters:y.customParameters,layerDefinition:y.layerDefinition},r.showLabels=o.showLabels&&e.labelsVisible,se(r,e),r.layerDefinition?.drawingInfo?.renderer&&(delete r.layerDefinition.minScale,delete r.layerDefinition.maxScale,await le(r.layerDefinition.drawingInfo.renderer,i),\"visualVariables\"in a&&a.visualVariables&&a.visualVariables[0])){const e=a.visualVariables[0];if(\"size\"===e.type&&e.maxSize&&\"number\"!=typeof e.maxSize&&e.minSize&&\"number\"!=typeof e.minSize){const t=f(e,l.scale);r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=t.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=t.maxSize}}const t=m(s);t&&(r.layerDefinition||(r.layerDefinition={}),r.layerDefinition.definitionExpression=r.layerDefinition.definitionExpression?`(${r.layerDefinition.definitionExpression}) AND (${t})`:t)}var y;return r}async function K(e,t,i){if(\"binning\"===e.featureReduction?.type||\"cluster\"===e.featureReduction?.type)return Z(e,t,i);e.legendEnabled&&i.legendLayers.push({id:e.id});return $(e,await ce(t.layerView),t.printTemplate,i)}async function W(e,{printTemplate:t},i){return $(e,null,t,i)}function B(e,t){e.legendEnabled&&t.legendLayers.push({id:e.id});const i={layerType:(r=e.write()).layerType,customParameters:r.customParameters};var r;if(i.bandIds=e.bandIds,i.compressionQuality=e.compressionQuality,i.format=e.format,i.interpolation=e.interpolation,(e.mosaicRule||e.definitionExpression)&&(i.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON()),e.renderingRule||e.renderer)if(t.is11xService)e.renderingRule&&(i.renderingRule=e.renderingRule.toJSON()),e.renderer&&(i.layerDefinition=i.layerDefinition||{},i.layerDefinition.drawingInfo=i.layerDefinition.drawingInfo||{},i.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());else{const t=e.exportImageServiceParameters.combineRendererWithRenderingRule();t&&(i.renderingRule=t.toJSON())}return se(i,e),i}async function G(e,t,i){if(\"flow\"===e.renderer?.type)return Z(e,t,i);e.legendEnabled&&i.legendLayers.push({id:e.id});const r={bandIds:(a=e.write()||{}).bandIds,customParameters:a.customParameters,interpolation:a.interpolation,layerDefinition:a.layerDefinition};var a;return r.layerType=\"ArcGISImageServiceLayer\",se(r,e),r}async function Q(e,t,i){const r=t.printTemplate;if(i.is11xService){const t={type:\"kml\"};return e.write(t,{origin:\"web-map\"}),delete t.layerType,t.url=l(e.url),t}{const a=[],n=t.layerView;n.allVisibleMapImages.forEach(((t,i)=>{const r={id:`${e.id}_image${i}`,type:\"image\",title:e.id,minScale:e.minScale||0,maxScale:e.maxScale||0,opacity:e.opacity,extent:t.extent};\"data:image/png;base64,\"===t.href.substr(0,22)?r.imageData=t.href.substr(22):r.url=t.href,a.push(r)}));const s=[...n.allVisiblePoints.items,...n.allVisiblePolylines.items,...n.allVisiblePolygons.items],o={id:e.id,...await $(null,s,r,i)};return a.push(o),a}}function H(e,{view:t},i){let r;const a={id:e.id,subLayerIds:[]};let n=[];const s=t.scale,o=e=>{const t=0===s,i=0===e.minScale||s<=e.minScale,r=0===e.maxScale||s>=e.maxScale;if(e.visible&&(t||i&&r))if(e.sublayers)e.sublayers.forEach(o);else{const t=e.toExportImageJSON(),i={id:e.id,name:e.title,layerDefinition:{drawingInfo:t.drawingInfo,definitionExpression:t.definitionExpression,source:t.source}};n.unshift(i),a.subLayerIds.push(e.id)}};var l;return e.sublayers&&e.sublayers.forEach(o),n.length&&(n=n.map((({id:e,name:t,layerDefinition:i})=>({id:e,name:t,layerDefinition:i}))),r={layerType:(l=e.write()).layerType,customParameters:l.customParameters},r.layers=n,r.visibleLayers=e.capabilities.exportMap.supportsDynamicLayers?void 0:a.subLayerIds,se(r,e),e.legendEnabled&&i.legendLayers.push(a)),r}async function X({layerView:e,printTemplate:t},i){const r=[],n=e.layer;if(a(n.featureCollections))for(const a of n.featureCollections){const e=await $(a,a.source,t,i);e&&r.push(...e.featureCollection.layers)}else if(a(n.sublayers))for(const a of n.sublayers){const e=await $(null,a.graphics,t,i);e&&r.push(...e.featureCollection.layers)}return{featureCollection:{layers:r}}}function Y(){return{type:\"OpenStreetMap\"}}async function Z(e,{printTemplate:t,view:i},r){const a={type:\"image\"},s={format:\"png\",ignoreBackground:!0,layers:[e],rotation:0},o=r.ssExtent||i.extent.clone();let l=96,u=!0,y=!0;if(t.exportOptions){const e=t.exportOptions;e.dpi>0&&(l=e.dpi),e.width>0&&(u=e.width%2==i.width%2),e.height>0&&(y=e.height%2==i.height%2)}if(\"map-only\"===t.layout&&t.scalePreserved&&(!t.outScale||t.outScale===i.scale)&&96===l&&(!u||!y)&&(s.area={x:0,y:0,width:i.width,height:i.height},u||(s.area.width-=1),y||(s.area.height-=1),!r.ssExtent)){const e=i.toMap(n(s.area.width,s.area.height));o.ymin=e.y,o.xmax=e.x,r.ssExtent=o}a.extent=o.clone()._normalize(!0).toJSON();const m=await i.takeScreenshot(s),{data:f}=c(m.dataUrl);return a.imageData=f,a}async function ee(e,{layerView:t,printTemplate:i},r){e.legendEnabled&&r.legendLayers.push({id:e.id});return $(e,await ce(t),i,r)}function te(e,t){e.legendEnabled&&t.legendLayers.push({id:e.id});const i={layerType:(r=e.write()).layerType,customParameters:r.customParameters};var r;return se(i,e),i}async function ie(e,t,i){if(i.is11xService&&e.serviceUrl&&e.styleUrl){const t=p(e.styleUrl,e.apiKey),r=p(e.serviceUrl,e.apiKey);if(!t&&!r||\"2.1.0\"!==i.cimVersion){const i={type:\"VectorTileLayer\"};return i.styleUrl=l(e.styleUrl),i.token=t,r!==t&&(i.additionalTokens=[{url:e.serviceUrl,token:r}]),i}}return Z(e,t,i)}function re(e){const t={type:\"WebTiledLayer\",urlTemplate:e.urlTemplate.replace(/\\${/g,\"{\"),credits:e.copyright};return e.subDomains&&e.subDomains.length>0&&(t.subDomains=e.subDomains),t}function ae(e){let t;const i=[],r=e=>{e.visible&&(e.sublayers?e.sublayers.forEach(r):e.name&&i.unshift(e.name))};return e.sublayers&&e.sublayers.forEach(r),i.length&&(t={type:\"wms\",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,transparentBackground:e.imageTransparency,visibleLayers:i,url:l(e.url),version:e.version}),t}function ne(e){const t=e.activeLayer;return{type:\"wmts\",customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,format:t.imageFormat,layer:t.id,style:t.styleId,tileMatrixSet:t.tileMatrixSetId,url:l(e.url)}}function se(e,t){t.url&&(e.url=l(e.url||t.url),e.token=p(e.url,t.apiKey))}async function oe(e,i){i.canvas||(i.canvas=document.createElement(\"canvas\"));const r=1024;i.canvas.width=r,i.canvas.height=r;const a=i.canvas.getContext(\"2d\");let n,l;if(e.path){const t=new Path2D(e.path);t.closePath(),a.fillStyle=Array.isArray(e.color)?`rgba(${e.color[0]},${e.color[1]},${e.color[2]},${e.color[3]/255})`:\"rgb(0,0,0)\",a.fill(t);const i=L(a);if(!i)return null;a.clearRect(0,0,r,r);const o=s(e.size)/Math.max(i.width,i.height);a.scale(o,o);const c=r/o,u=c/2-i.width/2-i.x,y=c/2-i.height/2-i.y;if(a.translate(u,y),Array.isArray(e.color)&&a.fill(t),e.outline?.width&&Array.isArray(e.outline.color)){const r=e.outline;a.lineWidth=s(r.width)/o,a.lineJoin=\"round\",a.strokeStyle=`rgba(${r.color[0]},${r.color[1]},${r.color[2]},${r.color[3]/255})`,a.stroke(t),i.width+=a.lineWidth,i.height+=a.lineWidth}i.width*=o,i.height*=o;const m=a.getImageData(r/2-i.width/2,r/2-i.height/2,Math.ceil(i.width),Math.ceil(i.height));n=m.width,l=m.height,a.canvas.width=n,a.canvas.height=l,a.putImageData(m,0,0)}else{const i=\"image/svg+xml\"===e.contentType?\"data:image/svg+xml;base64,\"+e.imageData:e.url,r=(await t(i,{responseType:\"image\"})).data;n=s(e.width),l=s(e.height),a.canvas.width=n,a.canvas.height=l,a.drawImage(r,0,0,a.canvas.width,a.canvas.height)}return{type:\"esriPMS\",imageData:a.canvas.toDataURL(\"image/png\").substr(22),angle:e.angle,contentType:\"image/png\",height:o(l),width:o(n),xoffset:e.xoffset,yoffset:e.yoffset}}async function le(e,t){const i=e.type;if(\"simple\"===i&&ye(e.symbol))e.symbol=await oe(e.symbol,t);else if(\"uniqueValue\"===i||\"classBreaks\"===i){ye(e.defaultSymbol)&&(e.defaultSymbol=await oe(e.defaultSymbol,t));const r=e[\"uniqueValue\"===i?\"uniqueValueInfos\":\"classBreakInfos\"];if(r)for(const e of r)ye(e.symbol)&&(e.symbol=await oe(e.symbol,t))}}async function ce(e){return e.queryFeatures(e.createQuery()).then((e=>e.features))}function ue(e){return e.gpMetadata&&e.gpMetadata.executionType?R.fromJSON(e.gpMetadata.executionType):\"sync\"}function ye(e){return e&&(e.path||\"image/svg+xml\"===e.contentType||e.url&&e.url.endsWith(\".svg\"))}export{J as execute,j as getGpPrintParams,C as getGpServerUrl,U as getMode,N as printCacheMap};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}