{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { unpackFloatRGBA as e } from \"../../../../core/floatRGBA.js\";\nimport { isSome as t, isNone as r } from \"../../../../core/maybe.js\";\nimport i from \"../../../../core/PooledArray.js\";\nimport { m as n, c as s } from \"../../../../chunks/mat4.js\";\nimport { c as a } from \"../../../../chunks/mat4f64.js\";\nimport { m as o } from \"../../../../chunks/vec3.js\";\nimport { l as h } from \"../../../../chunks/vec4.js\";\nimport { c as f } from \"../../../../chunks/vec4f64.js\";\nimport { intersectsSphere as c, create as l, copy as u } from \"../../../../geometry/support/frustum.js\";\nimport { c as d } from \"../../../../chunks/sphere.js\";\nimport { maxScale as g } from \"../../support/mathUtils.js\";\nimport { empty as m, union as p, set as _ } from \"./depthRange.js\";\nimport b from \"./Octree.js\";\nimport { assert as w } from \"./Util.js\";\nconst R = 1e4,\n      B = 100,\n      v = 500,\n      j = 500,\n      C = .1;\n\nfunction A(t, r, i) {\n  return e(r, t) * (i[1] - i[0]) + i[0];\n}\n\nfunction M(e, t, r) {\n  if (t.size < R) return K.compute(e, t);\n  const i = m();\n  return r.forAll(t => {\n    t.isVisible && p(i, O(e, t));\n  }), i;\n}\n\nfunction O(e, r) {\n  if (!r.isVisible) return;\n  const i = m(),\n        n = r.getSpatialQueryAccelerator();\n  return t(n) ? T(i, e, n) : D(i, e, r.objects), i;\n}\n\nfunction T(e, t, r) {\n  const i = t.eye,\n        n = t.viewForward,\n        s = t.frustum,\n        a = e => e.isVisible,\n        o = r.objectCount;\n\n  if (o < v) _(W, t.near, Math.min(e.near, t.far)), r.forEachInDepthRange(i, n, b.DepthOrder.FRONT_TO_BACK, W, (r, i) => {\n    S(e, t, r), W.far = e.near, i.setRange(W);\n  }, s, a), _(W, Math.max(e.far, t.near), t.far), r.forEachInDepthRange(i, n, b.DepthOrder.BACK_TO_FRONT, W, (r, i) => {\n    S(e, t, r), W.near = e.far, i.setRange(W);\n  }, s, a);else {\n    const i = Math.max(Math.min(o, j), Math.ceil(o * C)),\n          h = r.findClosest(n, b.DepthOrder.FRONT_TO_BACK, s, a, i),\n          f = r.findClosest(n, b.DepthOrder.BACK_TO_FRONT, s, a, i);\n    h && f && (F(e, t, h.boundingVolumeWorldSpace.bounds), F(e, t, f.boundingVolumeWorldSpace.bounds));\n  }\n}\n\nfunction D(e, t, r) {\n  k.clear(), r.forAll(e => {\n    e.isVisible && 0 !== e.geometryRecords.length && k.add(e);\n  }), k.empty || (k.sort(t), _(W, t.near, Math.min(e.near, t.far)), k.forEachInDepthRange(W, b.DepthOrder.FRONT_TO_BACK, (r, i) => {\n    i < e.near && S(e, t, r);\n  }), _(W, Math.max(e.far, t.near), t.far), k.forEachInDepthRange(W, b.DepthOrder.BACK_TO_FRONT, (t, r, i) => {\n    e.far = Math.max(e.far, i);\n  }));\n}\n\nfunction S(e, t, r) {\n  if (!r.isVisible) return;\n  if (!c(t.frustum, r.boundingVolumeWorldSpace.bounds)) return;\n  const i = r.transformation,\n        s = E;\n  r.geometryRecords.forEach(r => {\n    n(s, i, r.getShaderTransformation());\n    const a = g(s);\n    y(e, t, r.geometry.boundingInfo, s, a);\n  });\n}\n\nfunction y(e, t, i, n, s) {\n  if (r(i)) return;\n  const a = t.eye,\n        h = t.viewForward;\n  o(V, i.center, n);\n  const f = h[0] * (V[0] - a[0]) + h[1] * (V[1] - a[1]) + h[2] * (V[2] - a[2]);\n  if (V[3] = i.radius * s, !(f - V[3] > e.near && f + V[3] < e.far) && c(t.frustum, V)) if (i.radius > B && i.getChildren()) {\n    const r = i.getChildren();\n\n    for (let i = 0; i < 8; ++i) r[i] && y(e, t, r[i], n, s);\n  } else U.unionDepthRangeWithAABB(e, t.viewProjectionMatrix, n, i.bbMin, i.bbMax);\n}\n\nfunction F(e, t, r) {\n  const i = t.eye,\n        n = t.viewForward,\n        s = (r[0] - i[0]) * n[0] + (r[1] - i[1]) * n[1] + (r[2] - i[2]) * n[2];\n  e.near = Math.min(e.near, s - r[3]), e.far = Math.max(e.far, s + r[3]);\n}\n\nclass I {\n  constructor() {\n    this._items = new i({\n      allocator: e => e || {\n        obj: null,\n        distance: 0,\n        near: 0,\n        far: 0\n      },\n      deallocator: e => (e.obj = null, e.distance = 0, e.near = 0, e.far = 0, e)\n    });\n  }\n\n  get length() {\n    return this._items.length;\n  }\n\n  get empty() {\n    return 0 === this._items.length;\n  }\n\n  clear() {\n    this._items.clear();\n  }\n\n  add(e) {\n    this._items.pushNew().obj = e;\n  }\n\n  sort(e) {\n    const t = e.eye,\n          r = e.viewForward;\n    this._items.forAll(e => {\n      const i = e.obj.boundingVolumeWorldSpace.bounds,\n            n = (i[0] - t[0]) * r[0] + (i[1] - t[1]) * r[1] + (i[2] - t[2]) * r[2];\n      e.distance = n, e.near = n - i[3], e.far = n + i[3];\n    }), this._items.sort((e, t) => e.distance - t.distance);\n  }\n\n  forEachInDepthRange(e, t, r) {\n    if (t === b.DepthOrder.FRONT_TO_BACK) for (let i = 0; i < this._items.length; ++i) {\n      const t = this._items.data[i];\n      t.far < e.near || t.near > e.far || r(t.obj, t.near, t.far);\n    } else for (let i = this._items.length - 1; i >= 0; --i) {\n      const t = this._items.data[i];\n      t.far < e.near || t.near > e.far || r(t.obj, t.near, t.far);\n    }\n  }\n\n}\n\nclass P {\n  constructor() {\n    this.view = a(), this.viewProj = a(), this.frustum = l(), this.geometries = [], this.near = [], this.far = [], this.nearCandidates = [], this.farCandidates = [], this.range = {\n      near: 0,\n      far: 0\n    }, this.looseRange = {\n      near: 0,\n      far: 0\n    };\n  }\n\n  compute(e, t) {\n    this._reset(), s(this.view, e.viewMatrix), n(this.viewProj, e.projectionMatrix, this.view), u(this.frustum, e.frustum);\n    const r = this.view,\n          i = r[2],\n          a = r[6],\n          o = r[10],\n          h = r[14],\n          f = this.range;\n    let c = 0;\n    if (t.forEach(e => {\n      if (!e.instanceParameters.visible) return;\n      if (!e.castShadow) return;\n      let t;\n      e.hasShaderTransformation ? (e.computeBoundingSphere(e.getShaderTransformation(), V, 1), t = V) : t = e.boundingSphere;\n      const r = i * t[0] + a * t[1] + o * t[2] + h,\n            n = r - t[3],\n            s = r + t[3];\n      this.geometries[c] = e, this.near[c] = -s, this.far[c] = -n, ++c;\n    }), 0 === this.geometries.length) return f;\n\n    for (let n = 0; n < this.geometries.length; ++n) this.near[n] > f.far && (f.far = this.near[n]), this.near[n] > 2 && this.far[n] < f.near && (f.near = this.far[n]);\n\n    const l = this.looseRange;\n    l.near = Math.max(.5 * f.near, 2), l.far = 2 * f.far;\n    let d = 0,\n        g = 0;\n\n    for (let n = 0; n < this.geometries.length; ++n) this.near[n] < f.near && (this.near[n] >= l.near ? f.near = this.near[n] : this.nearCandidates[d++] = n), this.far[n] > f.far && (this.far[n] <= l.far ? f.far = this.far[n] : this.farCandidates[g++] = n);\n\n    if (0 === this.nearCandidates.length && 0 === this.farCandidates.length) return f;\n    this.nearCandidates.sort((e, t) => this.near[e] < this.near[t] ? -1 : this.near[e] > this.near[t] ? 1 : 0), this.farCandidates.sort((e, t) => this.far[e] < this.far[t] ? 1 : this.far[e] > this.far[t] ? -1 : 0);\n\n    for (let n = 0; n < this.nearCandidates.length; ++n) {\n      const e = this.nearCandidates[n];\n\n      if (this.near[e] < f.near) {\n        const t = this.geometries[e],\n              r = t.boundingInfo;\n\n        this._includeNearBoundingInfoRec(r, t.getShaderTransformation());\n      }\n    }\n\n    for (let n = 0; n < this.farCandidates.length; ++n) {\n      const e = this.farCandidates[n];\n\n      if (this.far[e] > f.far) {\n        const t = this.geometries[e],\n              r = t.boundingInfo;\n\n        this._includeFarBoundingInfoRec(r, t.getShaderTransformation());\n      }\n    }\n\n    return f;\n  }\n\n  _reset() {\n    this.geometries.length = 0, this.near.length = 0, this.far.length = 0, this.nearCandidates.length = 0, this.farCandidates.length = 0, this.range.near = Number.MAX_VALUE, this.range.far = -Number.MAX_VALUE;\n  }\n\n  _includeNearBoundingInfoRec(e, t) {\n    if (r(e)) return;\n    const i = e.getCenter();\n    o(V, i, t);\n    const n = g(t),\n          s = V[0],\n          a = V[1],\n          h = V[2],\n          f = e.getBSRadius() * n,\n          c = this.frustum;\n    if (c[0][0] * s + c[0][1] * a + c[0][2] * h + c[0][3] > f || c[1][0] * s + c[1][1] * a + c[1][2] * h + c[1][3] > f || c[2][0] * s + c[2][1] * a + c[2][2] * h + c[2][3] > f || c[3][0] * s + c[3][1] * a + c[3][2] * h + c[3][3] > f) return;\n    const l = this.view[2] * s + this.view[6] * a + this.view[10] * h + this.view[14],\n          u = l + f;\n    if (!(-(l - f) < 2 || -u >= this.range.near)) if (-u > this.looseRange.near) this.range.near = -u;else {\n      if (f > B) {\n        const r = e.getChildren();\n\n        if (void 0 !== r) {\n          for (let e = 0; e < 8; ++e) void 0 !== r[e] && this._includeNearBoundingInfoRec(r[e], t);\n\n          return;\n        }\n      }\n\n      U.unionDepthRangeWithAABB(this.range, this.viewProj, t, e.getBBMin(), e.getBBMax());\n    }\n  }\n\n  _includeFarBoundingInfoRec(e, t) {\n    if (r(e)) return;\n    let i = e.getBSRadius();\n    const n = e.getCenter();\n    o(V, n, t);\n    const s = g(t),\n          a = V[0],\n          h = V[1],\n          f = V[2];\n    i *= s;\n    const c = this.frustum;\n    if (c[0][0] * a + c[0][1] * h + c[0][2] * f + c[0][3] > i || c[1][0] * a + c[1][1] * h + c[1][2] * f + c[1][3] > i || c[2][0] * a + c[2][1] * h + c[2][2] * f + c[2][3] > i || c[3][0] * a + c[3][1] * h + c[3][2] * f + c[3][3] > i) return;\n    const l = this.view[2] * a + this.view[6] * h + this.view[10] * f + this.view[14] - i;\n    if (!(-l <= this.range.far)) if (-l < this.looseRange.far) this.range.far = -l;else {\n      if (i > B) {\n        const r = e.getChildren();\n\n        if (void 0 !== r) {\n          for (let e = 0; e < 8; ++e) void 0 !== r[e] && this._includeFarBoundingInfoRec(r[e], t);\n\n          return;\n        }\n      }\n\n      U.unionDepthRangeWithAABB(this.range, this.viewProj, t, e.getBBMin(), e.getBBMax());\n    }\n  }\n\n}\n\nclass x {\n  constructor() {\n    this.modelViewProj = a(), this.clipPosition = [f(), f(), f(), f(), f(), f(), f(), f()];\n  }\n\n  unionDepthRangeWithAABB(e, t, r, i, s) {\n    const a = this.modelViewProj;\n    n(a, t, r);\n    let o = !1;\n\n    for (let n = 0; n < 8; ++n) {\n      const e = this.clipPosition[n],\n            t = 0 === n || 3 === n || 4 === n || 7 === n ? i[0] : s[0],\n            r = 0 === n || 1 === n || 4 === n || 5 === n ? i[1] : s[1],\n            o = n < 4 ? i[2] : s[2];\n      e[0] = a[0] * t + a[4] * r + a[8] * o + a[12], e[1] = a[1] * t + a[5] * r + a[9] * o + a[13], e[2] = a[2] * t + a[6] * r + a[10] * o + a[14], e[3] = a[3] * t + a[7] * r + a[11] * o + a[15];\n    }\n\n    for (let n = 0; n < 12; ++n) {\n      const t = this.clipPosition[N[n][0]],\n            r = this.clipPosition[N[n][1]],\n            i = this.clipPosition[N[n][2]],\n            s = this._clipTriangle(t, r, i);\n\n      let a = !0;\n\n      for (let e = 0; e < s.length; ++e) {\n        if (s[e][3] >= 2) {\n          a = !1;\n          break;\n        }\n      }\n\n      if (!a) {\n        o = !0;\n\n        for (let t = 0; t < s.length; ++t) {\n          const r = s[t][3];\n          r < e.near && (e.near = r), r > e.far && (e.far = r);\n        }\n      }\n    }\n\n    return o;\n  }\n\n  _inside(e, t) {\n    return 0 === t ? e[0] >= -e[3] : 1 === t ? e[1] >= -e[3] : 2 === t ? e[0] <= e[3] : 3 === t ? e[1] <= e[3] : void w(!1);\n  }\n\n  _intersect(e, t, r) {\n    let i = 0;\n    return 0 === r ? i = (-e[3] - e[0]) / (t[0] - e[0] + t[3] - e[3]) : 1 === r ? i = (-e[3] - e[1]) / (t[1] - e[1] + t[3] - e[3]) : 2 === r ? i = (e[3] - e[0]) / (t[0] - e[0] - t[3] + e[3]) : 3 === r && (i = (e[3] - e[1]) / (t[1] - e[1] - t[3] + e[3])), h(f(), e, t, i);\n  }\n\n  _clipTriangle(e, t, r) {\n    let i = [e, t, r];\n\n    for (let n = 0; n < 4; ++n) {\n      const e = i;\n      i = [];\n\n      for (let t = 0; t < e.length; ++t) {\n        const r = e[t],\n              s = e[(t + 1) % e.length];\n        this._inside(s, n) ? (this._inside(r, n) || i.push(this._intersect(r, s, n)), i.push(s)) : this._inside(r, n) && i.push(this._intersect(r, s, n));\n      }\n    }\n\n    return i;\n  }\n\n}\n\nconst N = [[0, 1, 3], [2, 3, 1], [1, 5, 2], [6, 2, 5], [5, 4, 6], [7, 6, 4], [4, 0, 7], [3, 7, 0], [3, 2, 7], [6, 7, 2], [4, 5, 0], [1, 0, 5]],\n      V = d(),\n      E = a(),\n      W = m(),\n      k = new I(),\n      K = new P(),\n      U = new x();\nexport { P as DepthRangeFromRenderGeometries, O as depthRangeFromLayer, M as depthRangeFromScene, A as textureToDepth };","map":{"version":3,"names":["unpackFloatRGBA","e","isSome","t","isNone","r","i","m","n","c","s","a","o","l","h","f","intersectsSphere","create","copy","u","d","maxScale","g","empty","union","p","set","_","b","assert","w","R","B","v","j","C","A","M","size","K","compute","forAll","isVisible","O","getSpatialQueryAccelerator","T","D","objects","eye","viewForward","frustum","objectCount","W","near","Math","min","far","forEachInDepthRange","DepthOrder","FRONT_TO_BACK","S","setRange","max","BACK_TO_FRONT","ceil","findClosest","F","boundingVolumeWorldSpace","bounds","k","clear","geometryRecords","length","add","sort","transformation","E","forEach","getShaderTransformation","y","geometry","boundingInfo","V","center","radius","getChildren","U","unionDepthRangeWithAABB","viewProjectionMatrix","bbMin","bbMax","I","constructor","_items","allocator","obj","distance","deallocator","pushNew","data","P","view","viewProj","geometries","nearCandidates","farCandidates","range","looseRange","_reset","viewMatrix","projectionMatrix","instanceParameters","visible","castShadow","hasShaderTransformation","computeBoundingSphere","boundingSphere","_includeNearBoundingInfoRec","_includeFarBoundingInfoRec","Number","MAX_VALUE","getCenter","getBSRadius","getBBMin","getBBMax","x","modelViewProj","clipPosition","N","_clipTriangle","_inside","_intersect","push","DepthRangeFromRenderGeometries","depthRangeFromLayer","depthRangeFromScene","textureToDepth"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/depthRangeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{unpackFloatRGBA as e}from\"../../../../core/floatRGBA.js\";import{isSome as t,isNone as r}from\"../../../../core/maybe.js\";import i from\"../../../../core/PooledArray.js\";import{m as n,c as s}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{m as o}from\"../../../../chunks/vec3.js\";import{l as h}from\"../../../../chunks/vec4.js\";import{c as f}from\"../../../../chunks/vec4f64.js\";import{intersectsSphere as c,create as l,copy as u}from\"../../../../geometry/support/frustum.js\";import{c as d}from\"../../../../chunks/sphere.js\";import{maxScale as g}from\"../../support/mathUtils.js\";import{empty as m,union as p,set as _}from\"./depthRange.js\";import b from\"./Octree.js\";import{assert as w}from\"./Util.js\";const R=1e4,B=100,v=500,j=500,C=.1;function A(t,r,i){return e(r,t)*(i[1]-i[0])+i[0]}function M(e,t,r){if(t.size<R)return K.compute(e,t);const i=m();return r.forAll((t=>{t.isVisible&&p(i,O(e,t))})),i}function O(e,r){if(!r.isVisible)return;const i=m(),n=r.getSpatialQueryAccelerator();return t(n)?T(i,e,n):D(i,e,r.objects),i}function T(e,t,r){const i=t.eye,n=t.viewForward,s=t.frustum,a=e=>e.isVisible,o=r.objectCount;if(o<v)_(W,t.near,Math.min(e.near,t.far)),r.forEachInDepthRange(i,n,b.DepthOrder.FRONT_TO_BACK,W,((r,i)=>{S(e,t,r),W.far=e.near,i.setRange(W)}),s,a),_(W,Math.max(e.far,t.near),t.far),r.forEachInDepthRange(i,n,b.DepthOrder.BACK_TO_FRONT,W,((r,i)=>{S(e,t,r),W.near=e.far,i.setRange(W)}),s,a);else{const i=Math.max(Math.min(o,j),Math.ceil(o*C)),h=r.findClosest(n,b.DepthOrder.FRONT_TO_BACK,s,a,i),f=r.findClosest(n,b.DepthOrder.BACK_TO_FRONT,s,a,i);h&&f&&(F(e,t,h.boundingVolumeWorldSpace.bounds),F(e,t,f.boundingVolumeWorldSpace.bounds))}}function D(e,t,r){k.clear(),r.forAll((e=>{e.isVisible&&0!==e.geometryRecords.length&&k.add(e)})),k.empty||(k.sort(t),_(W,t.near,Math.min(e.near,t.far)),k.forEachInDepthRange(W,b.DepthOrder.FRONT_TO_BACK,((r,i)=>{i<e.near&&S(e,t,r)})),_(W,Math.max(e.far,t.near),t.far),k.forEachInDepthRange(W,b.DepthOrder.BACK_TO_FRONT,((t,r,i)=>{e.far=Math.max(e.far,i)})))}function S(e,t,r){if(!r.isVisible)return;if(!c(t.frustum,r.boundingVolumeWorldSpace.bounds))return;const i=r.transformation,s=E;r.geometryRecords.forEach((r=>{n(s,i,r.getShaderTransformation());const a=g(s);y(e,t,r.geometry.boundingInfo,s,a)}))}function y(e,t,i,n,s){if(r(i))return;const a=t.eye,h=t.viewForward;o(V,i.center,n);const f=h[0]*(V[0]-a[0])+h[1]*(V[1]-a[1])+h[2]*(V[2]-a[2]);if(V[3]=i.radius*s,!(f-V[3]>e.near&&f+V[3]<e.far)&&c(t.frustum,V))if(i.radius>B&&i.getChildren()){const r=i.getChildren();for(let i=0;i<8;++i)r[i]&&y(e,t,r[i],n,s)}else U.unionDepthRangeWithAABB(e,t.viewProjectionMatrix,n,i.bbMin,i.bbMax)}function F(e,t,r){const i=t.eye,n=t.viewForward,s=(r[0]-i[0])*n[0]+(r[1]-i[1])*n[1]+(r[2]-i[2])*n[2];e.near=Math.min(e.near,s-r[3]),e.far=Math.max(e.far,s+r[3])}class I{constructor(){this._items=new i({allocator:e=>e||{obj:null,distance:0,near:0,far:0},deallocator:e=>(e.obj=null,e.distance=0,e.near=0,e.far=0,e)})}get length(){return this._items.length}get empty(){return 0===this._items.length}clear(){this._items.clear()}add(e){this._items.pushNew().obj=e}sort(e){const t=e.eye,r=e.viewForward;this._items.forAll((e=>{const i=e.obj.boundingVolumeWorldSpace.bounds,n=(i[0]-t[0])*r[0]+(i[1]-t[1])*r[1]+(i[2]-t[2])*r[2];e.distance=n,e.near=n-i[3],e.far=n+i[3]})),this._items.sort(((e,t)=>e.distance-t.distance))}forEachInDepthRange(e,t,r){if(t===b.DepthOrder.FRONT_TO_BACK)for(let i=0;i<this._items.length;++i){const t=this._items.data[i];t.far<e.near||t.near>e.far||r(t.obj,t.near,t.far)}else for(let i=this._items.length-1;i>=0;--i){const t=this._items.data[i];t.far<e.near||t.near>e.far||r(t.obj,t.near,t.far)}}}class P{constructor(){this.view=a(),this.viewProj=a(),this.frustum=l(),this.geometries=[],this.near=[],this.far=[],this.nearCandidates=[],this.farCandidates=[],this.range={near:0,far:0},this.looseRange={near:0,far:0}}compute(e,t){this._reset(),s(this.view,e.viewMatrix),n(this.viewProj,e.projectionMatrix,this.view),u(this.frustum,e.frustum);const r=this.view,i=r[2],a=r[6],o=r[10],h=r[14],f=this.range;let c=0;if(t.forEach((e=>{if(!e.instanceParameters.visible)return;if(!e.castShadow)return;let t;e.hasShaderTransformation?(e.computeBoundingSphere(e.getShaderTransformation(),V,1),t=V):t=e.boundingSphere;const r=i*t[0]+a*t[1]+o*t[2]+h,n=r-t[3],s=r+t[3];this.geometries[c]=e,this.near[c]=-s,this.far[c]=-n,++c})),0===this.geometries.length)return f;for(let n=0;n<this.geometries.length;++n)this.near[n]>f.far&&(f.far=this.near[n]),this.near[n]>2&&this.far[n]<f.near&&(f.near=this.far[n]);const l=this.looseRange;l.near=Math.max(.5*f.near,2),l.far=2*f.far;let d=0,g=0;for(let n=0;n<this.geometries.length;++n)this.near[n]<f.near&&(this.near[n]>=l.near?f.near=this.near[n]:this.nearCandidates[d++]=n),this.far[n]>f.far&&(this.far[n]<=l.far?f.far=this.far[n]:this.farCandidates[g++]=n);if(0===this.nearCandidates.length&&0===this.farCandidates.length)return f;this.nearCandidates.sort(((e,t)=>this.near[e]<this.near[t]?-1:this.near[e]>this.near[t]?1:0)),this.farCandidates.sort(((e,t)=>this.far[e]<this.far[t]?1:this.far[e]>this.far[t]?-1:0));for(let n=0;n<this.nearCandidates.length;++n){const e=this.nearCandidates[n];if(this.near[e]<f.near){const t=this.geometries[e],r=t.boundingInfo;this._includeNearBoundingInfoRec(r,t.getShaderTransformation())}}for(let n=0;n<this.farCandidates.length;++n){const e=this.farCandidates[n];if(this.far[e]>f.far){const t=this.geometries[e],r=t.boundingInfo;this._includeFarBoundingInfoRec(r,t.getShaderTransformation())}}return f}_reset(){this.geometries.length=0,this.near.length=0,this.far.length=0,this.nearCandidates.length=0,this.farCandidates.length=0,this.range.near=Number.MAX_VALUE,this.range.far=-Number.MAX_VALUE}_includeNearBoundingInfoRec(e,t){if(r(e))return;const i=e.getCenter();o(V,i,t);const n=g(t),s=V[0],a=V[1],h=V[2],f=e.getBSRadius()*n,c=this.frustum;if(c[0][0]*s+c[0][1]*a+c[0][2]*h+c[0][3]>f||c[1][0]*s+c[1][1]*a+c[1][2]*h+c[1][3]>f||c[2][0]*s+c[2][1]*a+c[2][2]*h+c[2][3]>f||c[3][0]*s+c[3][1]*a+c[3][2]*h+c[3][3]>f)return;const l=this.view[2]*s+this.view[6]*a+this.view[10]*h+this.view[14],u=l+f;if(!(-(l-f)<2||-u>=this.range.near))if(-u>this.looseRange.near)this.range.near=-u;else{if(f>B){const r=e.getChildren();if(void 0!==r){for(let e=0;e<8;++e)void 0!==r[e]&&this._includeNearBoundingInfoRec(r[e],t);return}}U.unionDepthRangeWithAABB(this.range,this.viewProj,t,e.getBBMin(),e.getBBMax())}}_includeFarBoundingInfoRec(e,t){if(r(e))return;let i=e.getBSRadius();const n=e.getCenter();o(V,n,t);const s=g(t),a=V[0],h=V[1],f=V[2];i*=s;const c=this.frustum;if(c[0][0]*a+c[0][1]*h+c[0][2]*f+c[0][3]>i||c[1][0]*a+c[1][1]*h+c[1][2]*f+c[1][3]>i||c[2][0]*a+c[2][1]*h+c[2][2]*f+c[2][3]>i||c[3][0]*a+c[3][1]*h+c[3][2]*f+c[3][3]>i)return;const l=this.view[2]*a+this.view[6]*h+this.view[10]*f+this.view[14]-i;if(!(-l<=this.range.far))if(-l<this.looseRange.far)this.range.far=-l;else{if(i>B){const r=e.getChildren();if(void 0!==r){for(let e=0;e<8;++e)void 0!==r[e]&&this._includeFarBoundingInfoRec(r[e],t);return}}U.unionDepthRangeWithAABB(this.range,this.viewProj,t,e.getBBMin(),e.getBBMax())}}}class x{constructor(){this.modelViewProj=a(),this.clipPosition=[f(),f(),f(),f(),f(),f(),f(),f()]}unionDepthRangeWithAABB(e,t,r,i,s){const a=this.modelViewProj;n(a,t,r);let o=!1;for(let n=0;n<8;++n){const e=this.clipPosition[n],t=0===n||3===n||4===n||7===n?i[0]:s[0],r=0===n||1===n||4===n||5===n?i[1]:s[1],o=n<4?i[2]:s[2];e[0]=a[0]*t+a[4]*r+a[8]*o+a[12],e[1]=a[1]*t+a[5]*r+a[9]*o+a[13],e[2]=a[2]*t+a[6]*r+a[10]*o+a[14],e[3]=a[3]*t+a[7]*r+a[11]*o+a[15]}for(let n=0;n<12;++n){const t=this.clipPosition[N[n][0]],r=this.clipPosition[N[n][1]],i=this.clipPosition[N[n][2]],s=this._clipTriangle(t,r,i);let a=!0;for(let e=0;e<s.length;++e){if(s[e][3]>=2){a=!1;break}}if(!a){o=!0;for(let t=0;t<s.length;++t){const r=s[t][3];r<e.near&&(e.near=r),r>e.far&&(e.far=r)}}}return o}_inside(e,t){return 0===t?e[0]>=-e[3]:1===t?e[1]>=-e[3]:2===t?e[0]<=e[3]:3===t?e[1]<=e[3]:void w(!1)}_intersect(e,t,r){let i=0;return 0===r?i=(-e[3]-e[0])/(t[0]-e[0]+t[3]-e[3]):1===r?i=(-e[3]-e[1])/(t[1]-e[1]+t[3]-e[3]):2===r?i=(e[3]-e[0])/(t[0]-e[0]-t[3]+e[3]):3===r&&(i=(e[3]-e[1])/(t[1]-e[1]-t[3]+e[3])),h(f(),e,t,i)}_clipTriangle(e,t,r){let i=[e,t,r];for(let n=0;n<4;++n){const e=i;i=[];for(let t=0;t<e.length;++t){const r=e[t],s=e[(t+1)%e.length];this._inside(s,n)?(this._inside(r,n)||i.push(this._intersect(r,s,n)),i.push(s)):this._inside(r,n)&&i.push(this._intersect(r,s,n))}}return i}}const N=[[0,1,3],[2,3,1],[1,5,2],[6,2,5],[5,4,6],[7,6,4],[4,0,7],[3,7,0],[3,2,7],[6,7,2],[4,5,0],[1,0,5]],V=d(),E=a(),W=m(),k=new I,K=new P,U=new x;export{P as DepthRangeFromRenderGeometries,O as depthRangeFromLayer,M as depthRangeFromScene,A as textureToDepth};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}