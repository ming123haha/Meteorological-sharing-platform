{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Accessor.js\";\nimport r from \"../../core/Logger.js\";\nimport { isNone as i, unwrapOrThrow as n } from \"../../core/maybe.js\";\nimport s from \"../../core/Queue.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { PropertiesPool as l } from \"../3d/support/PropertiesPool.js\";\nimport { primaryKey as h, isSystemModifier as p } from \"./keys.js\";\nimport { LatestPointer as d } from \"./handlers/LatestPointer.js\";\nimport { MultiTouch as c } from \"./handlers/MultiTouch.js\";\nlet u = class extends t {\n  constructor(e) {\n    super(e), this._pointerCaptures = new Map(), this._nameToGroup = {}, this._handlers = [], this._handlersPriority = [], this._currentPropagation = null, this._updateDependenciesAfterPropagation = !1, this._sourceEvents = new Set(), this._keyModifiers = new Set(), this._activeKeyModifiers = new Set(), this._stoppedPropagationEventIds = new Set(), this.primaryKey = h, this._latestPointerType = \"mouse\", this._propertiesPool = new l({\n      latestPointerLocation: v\n    }, this), this.latestPointerLocation = null, this.test = {\n      timestamp: void 0,\n      hasCurrentPropagation: () => !!this._currentPropagation\n    };\n  }\n\n  initialize() {\n    this.eventSource.onEventReceived = this._onEventReceived.bind(this), this._installRecognizers();\n  }\n\n  destroy() {\n    const e = Object.keys(this._nameToGroup);\n\n    for (const t of e) this.uninstallHandlers(t);\n\n    this.eventSource.destroy(), this._currentPropagation = null, this._propertiesPool.destroy();\n  }\n\n  get hasPendingInputs() {\n    return this._handlers.some(e => e.handler.hasPendingInputs);\n  }\n\n  get latestPointerType() {\n    return this._latestPointerType;\n  }\n\n  get multiTouchActive() {\n    return this._multiTouchHandler.multiTouchActive;\n  }\n\n  installHandlers(e, t, i = P.INTERNAL) {\n    if (this._nameToGroup[e]) return void r.getLogger(this.declaredClass).error(\"There is already an InputHandler group registered under the name `\" + e + \"`\");\n    if (0 === t.length) return void r.getLogger(this.declaredClass).error(\"Can't register a group of zero handlers\");\n    const n = {\n      name: e,\n      handlers: t.map(e => ({\n        handler: e,\n        active: !0,\n        removed: !1,\n        priorityIndex: 0,\n        groupPriority: i,\n        eventCallback: null,\n        uninstallCallback: null\n      }))\n    };\n    this._nameToGroup[e] = n;\n\n    for (let r = n.handlers.length - 1; r >= 0; r--) {\n      const e = n.handlers[r];\n      this._handlers.push(e), e.handler.onInstall({\n        updateDependencies: () => {\n          this.updateDependencies();\n        },\n        emit: (t, r, i, n, s) => {\n          this._emitInputEvent(e.priorityIndex + 1, t, r, i, s, n);\n        },\n        setPointerCapture: (t, r) => {\n          this._setPointerCapture(n, e, t, r);\n        },\n        setEventCallback: t => {\n          e.eventCallback = t;\n        },\n        setUninstallCallback: t => {\n          e.uninstallCallback = t;\n        },\n        refreshHasPendingInputs: () => {\n          this.notifyChange(\"hasPendingInputs\");\n        }\n      });\n    }\n\n    this.updateDependencies();\n  }\n\n  uninstallHandlers(e) {\n    const t = this._nameToGroup[e];\n    t ? (t.handlers.forEach(e => {\n      e.removed = !0, e.uninstallCallback?.();\n    }), delete this._nameToGroup[e], this._currentPropagation ? this._currentPropagation.needsHandlerGarbageCollect = !0 : this._garbageCollectRemovedHandlers()) : r.getLogger(this.declaredClass).error(\"There is no InputHandler group registered under the name `\" + e + \"`\");\n  }\n\n  hasHandlers(e) {\n    return void 0 !== this._nameToGroup[e];\n  }\n\n  updateDependencies() {\n    if (this._currentPropagation) return void (this._updateDependenciesAfterPropagation = !0);\n    this._updateDependenciesAfterPropagation = !1;\n    const e = new Set(),\n          t = new Set();\n    this._handlersPriority = [];\n\n    for (let r = this._handlers.length - 1; r >= 0; r--) {\n      const e = this._handlers[r];\n      e.priorityIndex = r, this._handlersPriority.push(e);\n    }\n\n    this._handlersPriority = this._sortHandlersPriority(this._handlersPriority);\n\n    for (let r = this._handlersPriority.length - 1; r >= 0; r--) {\n      const i = this._handlersPriority[r];\n      i.priorityIndex = r;\n      let n = i.handler.hasSideEffects;\n      if (!n) for (const t of i.handler.outgoingEventTypes) if (e.has(t)) {\n        n = !0;\n        break;\n      }\n      if (n) for (const r of i.handler.incomingEventMatches) {\n        e.add(r.eventType);\n\n        for (const e of r.keyModifiers) p(e) || t.add(e);\n      }\n      i.active = n;\n    }\n\n    this._sourceEvents = e, this._keyModifiers = t, this._pointerCaptures.size > 0 && this._sourceEvents.add(\"pointer-capture-lost\"), this._keyModifiers.size > 0 && (this._sourceEvents.add(\"key-down\"), this._sourceEvents.add(\"key-up\")), this.eventSource && (this.eventSource.activeEvents = this._sourceEvents);\n  }\n\n  _setLatestPointer(e, t, r) {\n    this._latestPointerType = e;\n\n    const n = this._get(\"latestPointerLocation\");\n\n    if (i(n) || n.x !== t || n.y !== r) {\n      const e = this._propertiesPool.get(\"latestPointerLocation\");\n\n      e.x = t, e.y = r, this._set(\"latestPointerLocation\", e);\n    }\n  }\n\n  _onEventReceived(e, t) {\n    if (\"pointer-capture-lost\" === e) {\n      const e = t;\n\n      this._pointerCaptures.delete(e.native.pointerId);\n    }\n\n    this._updateKeyModifiers(e, t);\n\n    const r = null != this.test.timestamp ? this.test.timestamp : t.native ? t.native.timestamp : void 0,\n          i = t.native ? t.native.cancelable : void 0;\n\n    this._emitInputEventFromSource(e, t, r, i);\n  }\n\n  _updateKeyModifiers(e, t) {\n    if (!t) return;\n    let r = !1;\n\n    const i = () => {\n      if (!r) {\n        const e = new Set();\n        this._activeKeyModifiers.forEach(t => {\n          e.add(t);\n        }), this._activeKeyModifiers = e, r = !0;\n      }\n    },\n          n = (e, t) => {\n      t && !this._activeKeyModifiers.has(e) ? (i(), this._activeKeyModifiers.add(e)) : !t && this._activeKeyModifiers.has(e) && (i(), this._activeKeyModifiers.delete(e));\n    };\n\n    if (\"key-down\" === e || \"key-up\" === e) {\n      const r = t.key;\n      this._keyModifiers.has(r) && n(r, \"key-down\" === e);\n    }\n\n    const s = t.native;\n    n(\"Alt\", !(!s || !s.altKey)), n(\"Ctrl\", !(!s || !s.ctrlKey)), n(\"Shift\", !(!s || !s.shiftKey)), n(\"Meta\", !(!s || !s.metaKey)), n(\"Primary\", this._activeKeyModifiers.has(this.primaryKey));\n  }\n\n  _installRecognizers() {\n    this._latestPointerHandler = new d((e, t, r) => this._setLatestPointer(e, t, r)), this._multiTouchHandler = new c(), this.installHandlers(\"input-manager-logic\", [this._latestPointerHandler, this._multiTouchHandler], P.ALWAYS), this.recognizers.length > 0 && this.installHandlers(\"default\", this.recognizers, P.INTERNAL);\n  }\n\n  _setPointerCapture(e, t, r, i) {\n    const n = e.name + \"-\" + t.priorityIndex,\n          s = this._pointerCaptures.get(r.pointerId) || new Set();\n    this._pointerCaptures.set(r.pointerId, s), i ? (s.add(n), 1 === s.size && this.eventSource && this.eventSource.setPointerCapture(r, !0)) : s.has(n) && (s.delete(n), 0 === s.size && (this._pointerCaptures.delete(r.pointerId), this.eventSource && this.eventSource.setPointerCapture(r, !1)));\n  }\n\n  _garbageCollectRemovedHandlers() {\n    this._handlers = this._handlers.filter(e => !e.removed), this.updateDependencies();\n  }\n\n  _emitInputEventFromSource(e, t, r, i) {\n    this._emitInputEvent(0, e, t, r, i);\n  }\n\n  _emitInputEvent(e, t, r, i, n, s) {\n    const o = void 0 !== i ? i : this._currentPropagation ? this._currentPropagation.timestamp : performance.now(),\n          a = void 0 !== n && n,\n          l = {\n      event: new _(t, r, o, s || this._activeKeyModifiers, a),\n      priorityIndex: e\n    };\n    this._currentPropagation ? this._currentPropagation.events.push(l) : this._doNewPropagation(l);\n  }\n\n  _doNewPropagation(e) {\n    this._currentPropagation = {\n      events: new s(),\n      currentHandler: null,\n      needsHandlerGarbageCollect: !1,\n      timestamp: e.event.timestamp\n    }, this._currentPropagation.events.push(e), this._continuePropagation();\n  }\n\n  _continuePropagation() {\n    const e = n(this._currentPropagation);\n\n    for (; e.events.length > 0;) {\n      const {\n        event: t,\n        priorityIndex: r\n      } = e.events.pop(),\n            i = t.data && t.data.eventId;\n      if (!(null != i && this._stoppedPropagationEventIds.has(i))) for (e.currentHandler = this._handlersPriority[r]; e.currentHandler;) {\n        if (e.currentHandler.removed) e.needsHandlerGarbageCollect = !0;else {\n          if (e.currentHandler.active && !t.shouldStopPropagation() && e.currentHandler.eventCallback?.(t), t.shouldStopPropagation()) {\n            null != i && this._stoppedPropagationEventIds.add(i);\n            break;\n          }\n\n          if (t.shouldPausePropagation(() => this._continuePropagation())) return void this._pausePropagation({\n            event: t,\n            priorityIndex: e.currentHandler.priorityIndex + 1\n          });\n        }\n        e.currentHandler = this._handlersPriority[e.currentHandler.priorityIndex + 1];\n      }\n    }\n\n    e.needsHandlerGarbageCollect && this._garbageCollectRemovedHandlers(), this.hasPendingInputs || this._stoppedPropagationEventIds.clear(), this._currentPropagation = null, this._updateDependenciesAfterPropagation && this.updateDependencies();\n  }\n\n  _pausePropagation(e) {\n    const t = new s();\n    t.push(e);\n    const r = this._currentPropagation;\n\n    if (r) {\n      for (; r.events.length;) t.push(r.events.pop());\n\n      r.events = t, r.currentHandler = null;\n    }\n  }\n\n  _compareHandlerPriority(e, t) {\n    if (e.handler.hasSideEffects !== t.handler.hasSideEffects) return e.handler.hasSideEffects ? 1 : -1;\n    if (e.groupPriority !== t.groupPriority) return e.groupPriority > t.groupPriority ? -1 : 1;\n\n    for (const r of e.handler.incomingEventMatches) for (const e of t.handler.incomingEventMatches) {\n      if (r.eventType !== e.eventType) continue;\n      const t = r.keyModifiers.filter(t => e.keyModifiers.includes(t));\n      if (t.length === r.keyModifiers.length !== (t.length === e.keyModifiers.length)) return r.keyModifiers.length > e.keyModifiers.length ? -1 : 1;\n    }\n\n    return e.priorityIndex > t.priorityIndex ? -1 : 1;\n  }\n\n  _sortHandlersPriority(e) {\n    const t = [];\n\n    for (const r of e) {\n      let e = 0;\n\n      for (; e < t.length && this._compareHandlerPriority(r, t[e]) >= 0;) e++;\n\n      t.splice(e, 0, r);\n    }\n\n    return t;\n  }\n\n  get debug() {\n    const e = e => {\n      const t = this._setPointerCapture;\n      this._setPointerCapture = () => {}, e(), this._setPointerCapture = t;\n    };\n\n    return {\n      injectEvent: (t, r) => {\n        e(() => {\n          this._onEventReceived(t, r);\n        });\n      },\n      disablePointerCapture: e\n    };\n  }\n\n};\ne([o({\n  readOnly: !0\n})], u.prototype, \"hasPendingInputs\", null), e([o({\n  constructOnly: !0\n})], u.prototype, \"eventSource\", void 0), e([o({\n  constructOnly: !0\n})], u.prototype, \"recognizers\", void 0), e([o()], u.prototype, \"_latestPointerType\", void 0), e([o()], u.prototype, \"latestPointerType\", null), e([o()], u.prototype, \"multiTouchActive\", null), e([o({\n  readOnly: !0\n})], u.prototype, \"latestPointerLocation\", void 0), u = e([a(\"esri.views.input.InputManager\")], u);\n\nclass _ {\n  constructor(e, t, r, i, n) {\n    this.type = e, this.data = t, this.timestamp = r, this.modifiers = i, this.cancelable = n, this._propagationState = g.NONE, this._resumeCallback = null;\n  }\n\n  stopPropagation() {\n    this._propagationState |= g.STOPPED;\n  }\n\n  shouldStopPropagation() {\n    return 0 != (this._propagationState & g.STOPPED);\n  }\n\n  async(e) {\n    this._propagationState |= g.PAUSED;\n\n    const t = (e, t) => {\n      this._propagationState &= ~g.PAUSED;\n      const r = this._resumeCallback;\n      if (this._resumeCallback = null, r && r(), t) throw e;\n      return e;\n    };\n\n    return (\"function\" == typeof e ? e() : e).then(e => t(e, !1), e => t(e, !0));\n  }\n\n  shouldPausePropagation(e) {\n    return !!(this._propagationState & g.PAUSED) && (this._resumeCallback = e, !0);\n  }\n\n  preventDefault() {\n    this.data.native.preventDefault();\n  }\n\n}\n\nvar g;\n!function (e) {\n  e[e.NONE = 0] = \"NONE\", e[e.STOPPED = 1] = \"STOPPED\", e[e.PAUSED = 2] = \"PAUSED\";\n}(g || (g = {}));\nconst P = {\n  ALWAYS: 1,\n  DEFAULT: 0,\n  TOOL: -1,\n  WIDGET: -2,\n  INTERNAL: -3\n};\n\nclass v {}\n\nexport { u as InputManager, P as ViewEventPriorities };","map":{"version":3,"names":["_","e","t","r","isNone","i","unwrapOrThrow","n","s","property","o","subclass","a","PropertiesPool","l","primaryKey","h","isSystemModifier","p","LatestPointer","d","MultiTouch","c","u","constructor","_pointerCaptures","Map","_nameToGroup","_handlers","_handlersPriority","_currentPropagation","_updateDependenciesAfterPropagation","_sourceEvents","Set","_keyModifiers","_activeKeyModifiers","_stoppedPropagationEventIds","_latestPointerType","_propertiesPool","latestPointerLocation","v","test","timestamp","hasCurrentPropagation","initialize","eventSource","onEventReceived","_onEventReceived","bind","_installRecognizers","destroy","Object","keys","uninstallHandlers","hasPendingInputs","some","handler","latestPointerType","multiTouchActive","_multiTouchHandler","installHandlers","P","INTERNAL","getLogger","declaredClass","error","length","name","handlers","map","active","removed","priorityIndex","groupPriority","eventCallback","uninstallCallback","push","onInstall","updateDependencies","emit","_emitInputEvent","setPointerCapture","_setPointerCapture","setEventCallback","setUninstallCallback","refreshHasPendingInputs","notifyChange","forEach","needsHandlerGarbageCollect","_garbageCollectRemovedHandlers","hasHandlers","_sortHandlersPriority","hasSideEffects","outgoingEventTypes","has","incomingEventMatches","add","eventType","keyModifiers","size","activeEvents","_setLatestPointer","_get","x","y","get","_set","delete","native","pointerId","_updateKeyModifiers","cancelable","_emitInputEventFromSource","key","altKey","ctrlKey","shiftKey","metaKey","_latestPointerHandler","ALWAYS","recognizers","set","filter","performance","now","event","events","_doNewPropagation","currentHandler","_continuePropagation","pop","data","eventId","shouldStopPropagation","shouldPausePropagation","_pausePropagation","clear","_compareHandlerPriority","includes","splice","debug","injectEvent","disablePointerCapture","readOnly","prototype","constructOnly","type","modifiers","_propagationState","g","NONE","_resumeCallback","stopPropagation","STOPPED","async","PAUSED","then","preventDefault","DEFAULT","TOOL","WIDGET","InputManager","ViewEventPriorities"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/input/InputManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Logger.js\";import{isNone as i,unwrapOrThrow as n}from\"../../core/maybe.js\";import s from\"../../core/Queue.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{PropertiesPool as l}from\"../3d/support/PropertiesPool.js\";import{primaryKey as h,isSystemModifier as p}from\"./keys.js\";import{LatestPointer as d}from\"./handlers/LatestPointer.js\";import{MultiTouch as c}from\"./handlers/MultiTouch.js\";let u=class extends t{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=h,this._latestPointerType=\"mouse\",this._propertiesPool=new l({latestPointerLocation:v},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,i=P.INTERNAL){if(this._nameToGroup[e])return void r.getLogger(this.declaredClass).error(\"There is already an InputHandler group registered under the name `\"+e+\"`\");if(0===t.length)return void r.getLogger(this.declaredClass).error(\"Can't register a group of zero handlers\");const n={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=n;for(let r=n.handlers.length-1;r>=0;r--){const e=n.handlers[r];this._handlers.push(e),e.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(t,r,i,n,s)=>{this._emitInputEvent(e.priorityIndex+1,t,r,i,s,n)},setPointerCapture:(t,r)=>{this._setPointerCapture(n,e,t,r)},setEventCallback:t=>{e.eventCallback=t},setUninstallCallback:t=>{e.uninstallCallback=t},refreshHasPendingInputs:()=>{this.notifyChange(\"hasPendingInputs\")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback?.()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):r.getLogger(this.declaredClass).error(\"There is no InputHandler group registered under the name `\"+e+\"`\")}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const e=this._handlers[r];e.priorityIndex=r,this._handlersPriority.push(e)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n)for(const t of i.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const r of i.handler.incomingEventMatches){e.add(r.eventType);for(const e of r.keyModifiers)p(e)||t.add(e)}i.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add(\"pointer-capture-lost\"),this._keyModifiers.size>0&&(this._sourceEvents.add(\"key-down\"),this._sourceEvents.add(\"key-up\")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,r){this._latestPointerType=e;const n=this._get(\"latestPointerLocation\");if(i(n)||n.x!==t||n.y!==r){const e=this._propertiesPool.get(\"latestPointerLocation\");e.x=t,e.y=r,this._set(\"latestPointerLocation\",e)}}_onEventReceived(e,t){if(\"pointer-capture-lost\"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t)})),this._activeKeyModifiers=e,r=!0}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(i(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(i(),this._activeKeyModifiers.delete(e))};if(\"key-down\"===e||\"key-up\"===e){const r=t.key;this._keyModifiers.has(r)&&n(r,\"key-down\"===e)}const s=t.native;n(\"Alt\",!(!s||!s.altKey)),n(\"Ctrl\",!(!s||!s.ctrlKey)),n(\"Shift\",!(!s||!s.shiftKey)),n(\"Meta\",!(!s||!s.metaKey)),n(\"Primary\",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new d(((e,t,r)=>this._setLatestPointer(e,t,r))),this._multiTouchHandler=new c,this.installHandlers(\"input-manager-logic\",[this._latestPointerHandler,this._multiTouchHandler],P.ALWAYS),this.recognizers.length>0&&this.installHandlers(\"default\",this.recognizers,P.INTERNAL)}_setPointerCapture(e,t,r,i){const n=e.name+\"-\"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),0===s.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i)}_emitInputEvent(e,t,r,i,n,s){const o=void 0!==i?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,l={event:new _(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new s,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=n(this._currentPropagation);for(;e.events.length>0;){const{event:t,priorityIndex:r}=e.events.pop(),i=t.data&&t.data.eventId;if(!(null!=i&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){null!=i&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new s;t.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)t.push(r.events.pop());r.events=t,r.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(r.eventType!==e.eventType)continue;const t=r.keyModifiers.filter((t=>e.keyModifiers.includes(t)));if(t.length===r.keyModifiers.length!==(t.length===e.keyModifiers.length))return r.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(r,t[e])>=0;)e++;t.splice(e,0,r)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,r)=>{e((()=>{this._onEventReceived(t,r)}))},disablePointerCapture:e}}};e([o({readOnly:!0})],u.prototype,\"hasPendingInputs\",null),e([o({constructOnly:!0})],u.prototype,\"eventSource\",void 0),e([o({constructOnly:!0})],u.prototype,\"recognizers\",void 0),e([o()],u.prototype,\"_latestPointerType\",void 0),e([o()],u.prototype,\"latestPointerType\",null),e([o()],u.prototype,\"multiTouchActive\",null),e([o({readOnly:!0})],u.prototype,\"latestPointerLocation\",void 0),u=e([a(\"esri.views.input.InputManager\")],u);class _{constructor(e,t,r,i,n){this.type=e,this.data=t,this.timestamp=r,this.modifiers=i,this.cancelable=n,this._propagationState=g.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=g.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&g.STOPPED)}async(e){this._propagationState|=g.PAUSED;const t=(e,t)=>{this._propagationState&=~g.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),t)throw e;return e};return(\"function\"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(this._propagationState&g.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var g;!function(e){e[e.NONE=0]=\"NONE\",e[e.STOPPED=1]=\"STOPPED\",e[e.PAUSED=2]=\"PAUSED\"}(g||(g={}));const P={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class v{}export{u as InputManager,P as ViewEventPriorities};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}