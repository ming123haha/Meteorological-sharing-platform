{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { a as e, j as a } from \"./mat4.js\";\nimport { c as r } from \"./mat4f64.js\";\nimport { ScreenSpacePass as o } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";\nimport { ReadLinearDepth as s } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { ReadShadowMapBindParameters as i, ReadShadowMapPass as t } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";\nimport { CameraSpace as d } from \"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";\nimport { RgbaFloatEncoding as l } from \"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";\nimport { Float2PassUniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";\nimport { glsl as c } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as p } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";\nimport { ShaderBuilder as h } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\n\nclass w extends i {}\n\nconst u = 255,\n      g = 1 / u;\n\nfunction v() {\n  const r = new h(),\n        i = r.fragment;\n  return i.include(l), i.include(s), r.include(d), r.include(o), r.include(t, {\n    receiveShadows: !0\n  }), i.uniforms.add([new m(\"depthMap\", e => e.linearDepthTexture), new p(\"inverseViewMatrix\", (r, o) => e(f, a(f, o.camera.viewMatrix, o.camera.center))), new n(\"nearFar\", (e, a) => a.camera.nearFar)]), i.constants.add(\"sampleValue\", \"float\", g), i.code.add(c`void main(void) {\nfloat depth = rgba2float(texture2D(depthMap, uv));\nif (depth == 0.0) {\ndiscard;\n}\nfloat currentPixelDepth = linearDepthFromFloat(depth, nearFar);\nif (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {\ndiscard;\n}\nvec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);\nvec4 worldSpacePos = inverseViewMatrix * currentPixelPos;\nmat4 shadowMatrix;\nfloat linearDepth = -currentPixelDepth;\nint i = chooseCascade(linearDepth, shadowMatrix);\nif (i >= numCascades) {\ndiscard;\n}\nvec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {\ndiscard;\n}\nvec2 uvShadow = cascadeCoordinates(i, lvpos);\nfloat depthShadow = readShadowMapDepth(uvShadow, shadowMapTex);\nbool shadow = depthShadow < lvpos.z;\nif (!shadow) {\ndiscard;\n}\ngl_FragColor = vec4(sampleValue);\n}`), r;\n}\n\nconst f = r(),\n      x = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  ShadowCastAccumulatePassParameters: w,\n  shadowCastMaxSamples: u,\n  build: v\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { w as S, x as a, v as b, u as s };","map":{"version":3,"names":["a","e","j","c","r","ScreenSpacePass","o","ReadLinearDepth","s","ReadShadowMapBindParameters","i","ReadShadowMapPass","t","CameraSpace","d","RgbaFloatEncoding","l","Float2PassUniform","n","glsl","Matrix4PassUniform","p","ShaderBuilder","h","Texture2DPassUniform","m","w","u","g","v","fragment","include","receiveShadows","uniforms","add","linearDepthTexture","f","camera","viewMatrix","center","nearFar","constants","code","x","Object","freeze","defineProperty","__proto__","ShadowCastAccumulatePassParameters","shadowCastMaxSamples","build","Symbol","toStringTag","value","S","b"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/chunks/ShadowCastAccumulate.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{a as e,j as a}from\"./mat4.js\";import{c as r}from\"./mat4f64.js\";import{ScreenSpacePass as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";import{ReadLinearDepth as s}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ReadShadowMapBindParameters as i,ReadShadowMapPass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{CameraSpace as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{RgbaFloatEncoding as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as h}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";class w extends i{}const u=255,g=1/u;function v(){const r=new h,i=r.fragment;return i.include(l),i.include(s),r.include(d),r.include(o),r.include(t,{receiveShadows:!0}),i.uniforms.add([new m(\"depthMap\",(e=>e.linearDepthTexture)),new p(\"inverseViewMatrix\",((r,o)=>e(f,a(f,o.camera.viewMatrix,o.camera.center)))),new n(\"nearFar\",((e,a)=>a.camera.nearFar))]),i.constants.add(\"sampleValue\",\"float\",g),i.code.add(c`void main(void) {\nfloat depth = rgba2float(texture2D(depthMap, uv));\nif (depth == 0.0) {\ndiscard;\n}\nfloat currentPixelDepth = linearDepthFromFloat(depth, nearFar);\nif (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {\ndiscard;\n}\nvec4 currentPixelPos = vec4(reconstructPosition(gl_FragCoord.xy, currentPixelDepth), 1.0);\nvec4 worldSpacePos = inverseViewMatrix * currentPixelPos;\nmat4 shadowMatrix;\nfloat linearDepth = -currentPixelDepth;\nint i = chooseCascade(linearDepth, shadowMatrix);\nif (i >= numCascades) {\ndiscard;\n}\nvec3 lvpos = lightSpacePosition(worldSpacePos.xyz, shadowMatrix);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {\ndiscard;\n}\nvec2 uvShadow = cascadeCoordinates(i, lvpos);\nfloat depthShadow = readShadowMapDepth(uvShadow, shadowMapTex);\nbool shadow = depthShadow < lvpos.z;\nif (!shadow) {\ndiscard;\n}\ngl_FragColor = vec4(sampleValue);\n}`),r}const f=r(),x=Object.freeze(Object.defineProperty({__proto__:null,ShadowCastAccumulatePassParameters:w,shadowCastMaxSamples:u,build:v},Symbol.toStringTag,{value:\"Module\"}));export{w as S,x as a,v as b,u as s};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}