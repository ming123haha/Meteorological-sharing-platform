{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { adjustStaticAGOUrl as e } from \"../../../../core/devEnvironmentUtils.js\";\nimport { get as t, isSome as r, isNone as s } from \"../../../../core/maybe.js\";\nimport { b as o } from \"../../../../chunks/mat3.js\";\nimport { c as i } from \"../../../../chunks/mat3f64.js\";\nimport { a as n } from \"../../../../chunks/mat4.js\";\nimport { c as a } from \"../../../../chunks/mat4f64.js\";\nimport { m as u, b as l, C as c, l as m, n as f, h as d } from \"../../../../chunks/vec3.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { empty as g, expandWithVec3 as x } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as h, BufferViewVec4f as b, BufferViewVec2f as T, BufferViewVec4u8 as R, BufferViewVec4u16 as v, BufferViewVec3u8 as M, BufferViewVec3u16 as y } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { t as j, a as B, s as w } from \"../../../../chunks/vec32.js\";\nimport { t as L, s as C } from \"../../../../chunks/vec42.js\";\nimport { createBuffer as I } from \"../../../../geometry/support/buffer/utils.js\";\nimport { DefaultLoadingContext as A } from \"../../glTF/DefaultLoadingContext.js\";\nimport { loadGLTF as E } from \"../../glTF/loader.js\";\nimport { triangleFanToTriangles as O, triangleStripToTriangles as S, trianglesToTriangles as k } from \"../../glTF/internal/indexUtils.js\";\nimport { getTransformMatrix as N } from \"../../glTF/internal/TextureTransformUtils.js\";\nimport { ProcessedObjectResource as F } from \"./ProcessedObjectResource.js\";\nimport { load as P, processLoadResult as V } from \"./wosrLoader.js\";\nimport { AlphaDiscardMode as _, DepthTestFunction as G, CullFaceOptions as D } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Geometry as z } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Texture as U } from \"../../webgl-engine/lib/Texture.js\";\nimport { VertexAttribute as H } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as q } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { COLOR_GAMMA as W } from \"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";\nimport { PrimitiveType as $ } from \"../../../webgl/enums.js\";\nimport { n as K } from \"../../../../chunks/vec22.js\";\nimport { c as Q, f as J } from \"../../../../chunks/vec43.js\";\nimport { c as X } from \"../../../../chunks/vec33.js\";\n\nasync function Y(s, o) {\n  const i = Z(e(s));\n\n  if (\"wosr\" === i.fileType) {\n    const e = await (o.cache ? o.cache.loadWOSR(i.url, o) : P(i.url, o)),\n          {\n      engineResources: t,\n      referenceBoundingBox: r\n    } = V(e, o);\n    return {\n      lods: t,\n      referenceBoundingBox: r,\n      isEsriSymbolResource: !1,\n      isWosr: !0\n    };\n  }\n\n  const n = await (o.cache ? o.cache.loadGLTF(i.url, o, o.usePBR) : E(new A(o.streamDataRequester), i.url, o, o.usePBR)),\n        a = t(n.model.meta, \"ESRI_proxyEllipsoid\"),\n        u = n.meta.isEsriSymbolResource && r(a) && n.meta.uri.includes(\"/RealisticTrees/\");\n  u && !n.customMeta.esriTreeRendering && (n.customMeta.esriTreeRendering = !0, ie(n, a));\n  const l = n.meta.isEsriSymbolResource ? {\n    usePBR: o.usePBR,\n    isSchematic: !1,\n    treeRendering: u,\n    mrrFactors: [0, 1, .2]\n  } : {\n    usePBR: o.usePBR,\n    isSchematic: !1,\n    treeRendering: !1,\n    mrrFactors: [0, 1, .5]\n  },\n        c = { ...o.materialParamsMixin,\n    treeRendering: u\n  },\n        {\n    engineResources: m,\n    referenceBoundingBox: f\n  } = ee(n, l, c, o.skipHighLods && null == i.specifiedLodIndex ? {\n    skipHighLods: !0\n  } : {\n    skipHighLods: !1,\n    singleLodIndex: i.specifiedLodIndex\n  });\n  return {\n    lods: m,\n    referenceBoundingBox: f,\n    isEsriSymbolResource: n.meta.isEsriSymbolResource,\n    isWosr: !1\n  };\n}\n\nfunction Z(e) {\n  const t = e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);\n  if (t) return {\n    fileType: \"gltf\",\n    url: t[1],\n    specifiedLodIndex: null != t[4] ? Number(t[4]) : null\n  };\n  return e.match(/(.*\\.(json|json\\.gz))$/) ? {\n    fileType: \"wosr\",\n    url: e,\n    specifiedLodIndex: null\n  } : {\n    fileType: \"unknown\",\n    url: e,\n    specifiedLodIndex: null\n  };\n}\n\nfunction ee(e, t, o, i) {\n  const n = e.model,\n        a = new Array(),\n        u = new Map(),\n        l = new Map(),\n        c = n.lods.length,\n        m = g();\n  return n.lods.forEach((e, f) => {\n    const d = !0 === i.skipHighLods && (c > 1 && 0 === f || c > 3 && 1 === f) || !1 === i.skipHighLods && null != i.singleLodIndex && f !== i.singleLodIndex;\n    if (d && 0 !== f) return;\n    const p = new Array();\n    let g = 0;\n    if (e.parts.forEach(e => {\n      const {\n        geometry: t,\n        vertexCount: s\n      } = te(e);\n      p.push(t), g += s;\n      const o = t.boundingInfo;\n      r(o) && 0 === f && (x(m, o.getBBMin()), x(m, o.getBBMax()));\n    }), d) return;\n    const h = new F(e.name, {\n      textures: new Array(),\n      materials: new Array(),\n      geometries: p\n    }, e.lodThreshold, [0, 0, 0], g);\n    a.push(h), e.parts.forEach(e => {\n      const i = e.material + (e.attributes.normal ? \"_normal\" : \"\") + (e.attributes.color ? \"_color\" : \"\") + (e.attributes.texCoord0 ? \"_texCoord0\" : \"\") + (e.attributes.tangent ? \"_tangent\" : \"\"),\n            a = n.materials.get(e.material),\n            c = r(e.attributes.texCoord0),\n            m = r(e.attributes.normal);\n      if (s(a)) return;\n      const f = se(a.alphaMode);\n\n      if (!u.has(i)) {\n        if (c) {\n          const e = (e, t = !1) => {\n            if (r(e) && !l.has(e)) {\n              const s = n.textures.get(e);\n              r(s) && l.set(e, new U(s.data, t ? { ...s.parameters,\n                preMultiplyAlpha: t\n              } : s.parameters));\n            }\n          };\n\n          e(a.textureColor, f !== _.Opaque), e(a.textureNormal), e(a.textureOcclusion), e(a.textureEmissive), e(a.textureMetallicRoughness);\n        }\n\n        const s = a.color[0] ** (1 / W),\n              d = a.color[1] ** (1 / W),\n              p = a.color[2] ** (1 / W),\n              g = a.emissiveFactor[0] ** (1 / W),\n              x = a.emissiveFactor[1] ** (1 / W),\n              h = a.emissiveFactor[2] ** (1 / W),\n              b = r(a.textureColor) && c ? l.get(a.textureColor) : null;\n        u.set(i, new q({ ...t,\n          transparent: f === _.Blend,\n          customDepthTest: G.Lequal,\n          textureAlphaMode: f,\n          textureAlphaCutoff: a.alphaCutoff,\n          diffuse: [s, d, p],\n          ambient: [s, d, p],\n          opacity: a.opacity,\n          doubleSided: a.doubleSided,\n          doubleSidedType: \"winding-order\",\n          cullFace: a.doubleSided ? D.None : D.Back,\n          hasVertexColors: !!e.attributes.color,\n          hasVertexTangents: !!e.attributes.tangent,\n          normals: m ? \"default\" : \"screenDerivative\",\n          castShadows: !0,\n          receiveSSAO: !0,\n          textureId: r(b) ? b.id : void 0,\n          colorMixMode: a.colorMixMode,\n          normalTextureId: r(a.textureNormal) && c ? l.get(a.textureNormal).id : void 0,\n          textureAlphaPremultiplied: r(b) && !!b.params.preMultiplyAlpha,\n          occlusionTextureId: r(a.textureOcclusion) && c ? l.get(a.textureOcclusion).id : void 0,\n          emissiveTextureId: r(a.textureEmissive) && c ? l.get(a.textureEmissive).id : void 0,\n          metallicRoughnessTextureId: r(a.textureMetallicRoughness) && c ? l.get(a.textureMetallicRoughness).id : void 0,\n          emissiveFactor: [g, x, h],\n          mrrFactors: [a.metallicFactor, a.roughnessFactor, t.mrrFactors[2]],\n          isSchematic: !1,\n          colorTextureTransformMatrix: N(a.colorTextureTransform),\n          normalTextureTransformMatrix: N(a.normalTextureTransform),\n          occlusionTextureTransformMatrix: N(a.occlusionTextureTransform),\n          emissiveTextureTransformMatrix: N(a.emissiveTextureTransform),\n          metallicRoughnessTextureTransformMatrix: N(a.metallicRoughnessTextureTransform),\n          ...o\n        }));\n      }\n\n      if (h.stageResources.materials.push(u.get(i)), c) {\n        const e = e => {\n          r(e) && h.stageResources.textures.push(l.get(e));\n        };\n\n        e(a.textureColor), e(a.textureNormal), e(a.textureOcclusion), e(a.textureEmissive), e(a.textureMetallicRoughness);\n      }\n    });\n  }), {\n    engineResources: a,\n    referenceBoundingBox: m\n  };\n}\n\nfunction te(e) {\n  const t = oe(e.indices || e.attributes.position.count, e.primitiveType),\n        s = e.attributes.position.count,\n        i = I(h, s);\n  j(i, e.attributes.position, e.transform);\n  const n = [[H.POSITION, {\n    data: i.typedBuffer,\n    size: i.elementCount,\n    exclusive: !0\n  }]],\n        a = [[H.POSITION, t]];\n\n  if (r(e.attributes.normal)) {\n    const r = I(h, s);\n    o(re, e.transform), B(r, e.attributes.normal, re), n.push([H.NORMAL, {\n      data: r.typedBuffer,\n      size: r.elementCount,\n      exclusive: !0\n    }]), a.push([H.NORMAL, t]);\n  }\n\n  if (r(e.attributes.tangent)) {\n    const r = I(b, s);\n    o(re, e.transform), L(r, e.attributes.tangent, re), n.push([H.TANGENT, {\n      data: r.typedBuffer,\n      size: r.elementCount,\n      exclusive: !0\n    }]), a.push([H.TANGENT, t]);\n  }\n\n  if (r(e.attributes.texCoord0)) {\n    const r = I(T, s);\n    K(r, e.attributes.texCoord0), n.push([H.UV0, {\n      data: r.typedBuffer,\n      size: r.elementCount,\n      exclusive: !0\n    }]), a.push([H.UV0, t]);\n  }\n\n  if (r(e.attributes.color)) {\n    const r = I(R, s);\n    if (4 === e.attributes.color.elementCount) e.attributes.color instanceof b ? C(r, e.attributes.color, 255) : e.attributes.color instanceof R ? Q(r, e.attributes.color) : e.attributes.color instanceof v && C(r, e.attributes.color, 1 / 256);else {\n      J(r, 255, 255, 255, 255);\n      const t = new M(r.buffer, 0, 4);\n      e.attributes.color instanceof h ? w(t, e.attributes.color, 255) : e.attributes.color instanceof M ? X(t, e.attributes.color) : e.attributes.color instanceof y && w(t, e.attributes.color, 1 / 256);\n    }\n    n.push([H.COLOR, {\n      data: r.typedBuffer,\n      size: r.elementCount,\n      exclusive: !0\n    }]), a.push([H.COLOR, t]);\n  }\n\n  return {\n    geometry: new z(n, a),\n    vertexCount: s\n  };\n}\n\nconst re = i();\n\nfunction se(e) {\n  switch (e) {\n    case \"BLEND\":\n      return _.Blend;\n\n    case \"MASK\":\n      return _.Mask;\n\n    case \"OPAQUE\":\n    case null:\n    case void 0:\n      return _.Opaque;\n  }\n}\n\nfunction oe(e, t) {\n  switch (t) {\n    case $.TRIANGLES:\n      return k(e);\n\n    case $.TRIANGLE_STRIP:\n      return S(e);\n\n    case $.TRIANGLE_FAN:\n      return O(e);\n  }\n}\n\nfunction ie(e, t) {\n  for (let r = 0; r < e.model.lods.length; ++r) {\n    const o = e.model.lods[r];\n\n    for (const i of o.parts) {\n      const o = i.attributes.normal;\n      if (s(o)) return;\n      const g = i.attributes.position,\n            x = g.count,\n            b = p(),\n            T = p(),\n            v = p(),\n            M = I(R, x),\n            y = I(h, x),\n            j = n(a(), i.transform);\n\n      for (let s = 0; s < x; s++) {\n        g.getVec(s, T), o.getVec(s, b), u(T, T, i.transform), l(v, T, t.center), c(v, v, t.radius);\n        const n = v[2],\n              a = m(v),\n              p = Math.min(.45 + .55 * a * a, 1);\n        c(v, v, t.radius), null !== j && u(v, v, j), f(v, v), r + 1 !== e.model.lods.length && e.model.lods.length > 1 && d(v, v, b, n > -1 ? .2 : Math.min(-4 * n - 3.8, 1)), y.setVec(s, v), M.set(s, 0, 255 * p), M.set(s, 1, 255 * p), M.set(s, 2, 255 * p), M.set(s, 3, 255);\n      }\n\n      i.attributes.normal = y, i.attributes.color = M;\n    }\n  }\n}\n\nexport { Y as fetch, ee as gltfToEngineResources, Z as parseUrl };","map":{"version":3,"names":["adjustStaticAGOUrl","e","get","t","isSome","r","isNone","s","b","o","c","i","a","n","m","u","l","C","f","h","d","p","empty","g","expandWithVec3","x","BufferViewVec3f","BufferViewVec4f","BufferViewVec2f","T","BufferViewVec4u8","R","BufferViewVec4u16","v","BufferViewVec3u8","M","BufferViewVec3u16","y","j","B","w","L","createBuffer","I","DefaultLoadingContext","A","loadGLTF","E","triangleFanToTriangles","O","triangleStripToTriangles","S","trianglesToTriangles","k","getTransformMatrix","N","ProcessedObjectResource","F","load","P","processLoadResult","V","AlphaDiscardMode","_","DepthTestFunction","G","CullFaceOptions","D","Geometry","z","Texture","U","VertexAttribute","H","DefaultMaterial","q","COLOR_GAMMA","W","PrimitiveType","$","K","Q","J","X","Y","Z","fileType","cache","loadWOSR","url","engineResources","referenceBoundingBox","lods","isEsriSymbolResource","isWosr","usePBR","streamDataRequester","model","meta","uri","includes","customMeta","esriTreeRendering","ie","isSchematic","treeRendering","mrrFactors","materialParamsMixin","ee","skipHighLods","specifiedLodIndex","singleLodIndex","match","Number","Array","Map","length","forEach","parts","geometry","vertexCount","te","push","boundingInfo","getBBMin","getBBMax","name","textures","materials","geometries","lodThreshold","material","attributes","normal","color","texCoord0","tangent","se","alphaMode","has","set","data","parameters","preMultiplyAlpha","textureColor","Opaque","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","emissiveFactor","transparent","Blend","customDepthTest","Lequal","textureAlphaMode","textureAlphaCutoff","alphaCutoff","diffuse","ambient","opacity","doubleSided","doubleSidedType","cullFace","None","Back","hasVertexColors","hasVertexTangents","normals","castShadows","receiveSSAO","textureId","id","colorMixMode","normalTextureId","textureAlphaPremultiplied","params","occlusionTextureId","emissiveTextureId","metallicRoughnessTextureId","metallicFactor","roughnessFactor","colorTextureTransformMatrix","colorTextureTransform","normalTextureTransformMatrix","normalTextureTransform","occlusionTextureTransformMatrix","occlusionTextureTransform","emissiveTextureTransformMatrix","emissiveTextureTransform","metallicRoughnessTextureTransformMatrix","metallicRoughnessTextureTransform","stageResources","oe","indices","position","count","primitiveType","transform","POSITION","typedBuffer","size","elementCount","exclusive","re","NORMAL","TANGENT","UV0","buffer","COLOR","Mask","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","getVec","center","radius","Math","min","setVec","fetch","gltfToEngineResources","parseUrl"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{b as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a as n}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{m as u,b as l,C as c,l as m,n as f,h as d}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as g,expandWithVec3 as x}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as T,BufferViewVec4u8 as R,BufferViewVec4u16 as v,BufferViewVec3u8 as M,BufferViewVec3u16 as y}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as j,a as B,s as w}from\"../../../../chunks/vec32.js\";import{t as L,s as C}from\"../../../../chunks/vec42.js\";import{createBuffer as I}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as A}from\"../../glTF/DefaultLoadingContext.js\";import{loadGLTF as E}from\"../../glTF/loader.js\";import{triangleFanToTriangles as O,triangleStripToTriangles as S,trianglesToTriangles as k}from\"../../glTF/internal/indexUtils.js\";import{getTransformMatrix as N}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as F}from\"./ProcessedObjectResource.js\";import{load as P,processLoadResult as V}from\"./wosrLoader.js\";import{AlphaDiscardMode as _,DepthTestFunction as G,CullFaceOptions as D}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as z}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as U}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as H}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as q}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as W}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as $}from\"../../../webgl/enums.js\";import{n as K}from\"../../../../chunks/vec22.js\";import{c as Q,f as J}from\"../../../../chunks/vec43.js\";import{c as X}from\"../../../../chunks/vec33.js\";async function Y(s,o){const i=Z(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):P(i.url,o)),{engineResources:t,referenceBoundingBox:r}=V(e,o);return{lods:t,referenceBoundingBox:r,isEsriSymbolResource:!1,isWosr:!0}}const n=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):E(new A(o.streamDataRequester),i.url,o,o.usePBR)),a=t(n.model.meta,\"ESRI_proxyEllipsoid\"),u=n.meta.isEsriSymbolResource&&r(a)&&n.meta.uri.includes(\"/RealisticTrees/\");u&&!n.customMeta.esriTreeRendering&&(n.customMeta.esriTreeRendering=!0,ie(n,a));const l=n.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:u,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,treeRendering:!1,mrrFactors:[0,1,.5]},c={...o.materialParamsMixin,treeRendering:u},{engineResources:m,referenceBoundingBox:f}=ee(n,l,c,o.skipHighLods&&null==i.specifiedLodIndex?{skipHighLods:!0}:{skipHighLods:!1,singleLodIndex:i.specifiedLodIndex});return{lods:m,referenceBoundingBox:f,isEsriSymbolResource:n.meta.isEsriSymbolResource,isWosr:!1}}function Z(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function ee(e,t,o,i){const n=e.model,a=new Array,u=new Map,l=new Map,c=n.lods.length,m=g();return n.lods.forEach(((e,f)=>{const d=!0===i.skipHighLods&&(c>1&&0===f||c>3&&1===f)||!1===i.skipHighLods&&null!=i.singleLodIndex&&f!==i.singleLodIndex;if(d&&0!==f)return;const p=new Array;let g=0;if(e.parts.forEach((e=>{const{geometry:t,vertexCount:s}=te(e);p.push(t),g+=s;const o=t.boundingInfo;r(o)&&0===f&&(x(m,o.getBBMin()),x(m,o.getBBMax()))})),d)return;const h=new F(e.name,{textures:new Array,materials:new Array,geometries:p},e.lodThreshold,[0,0,0],g);a.push(h),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=n.materials.get(e.material),c=r(e.attributes.texCoord0),m=r(e.attributes.normal);if(s(a))return;const f=se(a.alphaMode);if(!u.has(i)){if(c){const e=(e,t=!1)=>{if(r(e)&&!l.has(e)){const s=n.textures.get(e);r(s)&&l.set(e,new U(s.data,t?{...s.parameters,preMultiplyAlpha:t}:s.parameters))}};e(a.textureColor,f!==_.Opaque),e(a.textureNormal),e(a.textureOcclusion),e(a.textureEmissive),e(a.textureMetallicRoughness)}const s=a.color[0]**(1/W),d=a.color[1]**(1/W),p=a.color[2]**(1/W),g=a.emissiveFactor[0]**(1/W),x=a.emissiveFactor[1]**(1/W),h=a.emissiveFactor[2]**(1/W),b=r(a.textureColor)&&c?l.get(a.textureColor):null;u.set(i,new q({...t,transparent:f===_.Blend,customDepthTest:G.Lequal,textureAlphaMode:f,textureAlphaCutoff:a.alphaCutoff,diffuse:[s,d,p],ambient:[s,d,p],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?D.None:D.Back,hasVertexColors:!!e.attributes.color,hasVertexTangents:!!e.attributes.tangent,normals:m?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(b)?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&c?l.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:r(b)&&!!b.params.preMultiplyAlpha,occlusionTextureId:r(a.textureOcclusion)&&c?l.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&c?l.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&c?l.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[g,x,h],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,colorTextureTransformMatrix:N(a.colorTextureTransform),normalTextureTransformMatrix:N(a.normalTextureTransform),occlusionTextureTransformMatrix:N(a.occlusionTextureTransform),emissiveTextureTransformMatrix:N(a.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:N(a.metallicRoughnessTextureTransform),...o}))}if(h.stageResources.materials.push(u.get(i)),c){const e=e=>{r(e)&&h.stageResources.textures.push(l.get(e))};e(a.textureColor),e(a.textureNormal),e(a.textureOcclusion),e(a.textureEmissive),e(a.textureMetallicRoughness)}}))})),{engineResources:a,referenceBoundingBox:m}}function te(e){const t=oe(e.indices||e.attributes.position.count,e.primitiveType),s=e.attributes.position.count,i=I(h,s);j(i,e.attributes.position,e.transform);const n=[[H.POSITION,{data:i.typedBuffer,size:i.elementCount,exclusive:!0}]],a=[[H.POSITION,t]];if(r(e.attributes.normal)){const r=I(h,s);o(re,e.transform),B(r,e.attributes.normal,re),n.push([H.NORMAL,{data:r.typedBuffer,size:r.elementCount,exclusive:!0}]),a.push([H.NORMAL,t])}if(r(e.attributes.tangent)){const r=I(b,s);o(re,e.transform),L(r,e.attributes.tangent,re),n.push([H.TANGENT,{data:r.typedBuffer,size:r.elementCount,exclusive:!0}]),a.push([H.TANGENT,t])}if(r(e.attributes.texCoord0)){const r=I(T,s);K(r,e.attributes.texCoord0),n.push([H.UV0,{data:r.typedBuffer,size:r.elementCount,exclusive:!0}]),a.push([H.UV0,t])}if(r(e.attributes.color)){const r=I(R,s);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?C(r,e.attributes.color,255):e.attributes.color instanceof R?Q(r,e.attributes.color):e.attributes.color instanceof v&&C(r,e.attributes.color,1/256);else{J(r,255,255,255,255);const t=new M(r.buffer,0,4);e.attributes.color instanceof h?w(t,e.attributes.color,255):e.attributes.color instanceof M?X(t,e.attributes.color):e.attributes.color instanceof y&&w(t,e.attributes.color,1/256)}n.push([H.COLOR,{data:r.typedBuffer,size:r.elementCount,exclusive:!0}]),a.push([H.COLOR,t])}return{geometry:new z(n,a),vertexCount:s}}const re=i();function se(e){switch(e){case\"BLEND\":return _.Blend;case\"MASK\":return _.Mask;case\"OPAQUE\":case null:case void 0:return _.Opaque}}function oe(e,t){switch(t){case $.TRIANGLES:return k(e);case $.TRIANGLE_STRIP:return S(e);case $.TRIANGLE_FAN:return O(e)}}function ie(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const g=i.attributes.position,x=g.count,b=p(),T=p(),v=p(),M=I(R,x),y=I(h,x),j=n(a(),i.transform);for(let s=0;s<x;s++){g.getVec(s,T),o.getVec(s,b),u(T,T,i.transform),l(v,T,t.center),c(v,v,t.radius);const n=v[2],a=m(v),p=Math.min(.45+.55*a*a,1);c(v,v,t.radius),null!==j&&u(v,v,j),f(v,v),r+1!==e.model.lods.length&&e.model.lods.length>1&&d(v,v,b,n>-1?.2:Math.min(-4*n-3.8,1)),y.setVec(s,v),M.set(s,0,255*p),M.set(s,1,255*p),M.set(s,2,255*p),M.set(s,3,255)}i.attributes.normal=y,i.attributes.color=M}}}export{Y as fetch,ee as gltfToEngineResources,Z as parseUrl};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}