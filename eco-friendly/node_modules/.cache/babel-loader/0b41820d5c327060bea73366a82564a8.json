{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { s as e, l as t, g as i } from \"../../chunks/vec3.js\";\nimport { c as s } from \"../../chunks/vec3f64.js\";\nimport { FilteredFiniteDifference as n } from \"./FilteredFiniteDifference.js\";\nimport { Momentum as r } from \"./Momentum.js\";\n\nclass c extends r {\n  constructor(e, t, i, s, n) {\n    super(e, t, i), this._sceneVelocity = s, this.direction = n;\n  }\n\n  value(e) {\n    return super.valueFromInitialVelocity(this._sceneVelocity, e);\n  }\n\n}\n\nclass l {\n  constructor(e = 300, t = 12, i = .84) {\n    this._minimumInitialVelocity = e, this._stopVelocity = t, this._friction = i, this.enabled = !0, this._time = new n(.6), this._screen = [new n(.4), new n(.4)], this._scene = [new n(.6), new n(.6), new n(.6)], this._tmpDirection = s();\n  }\n\n  add(e, t, i) {\n    if (this.enabled) {\n      if (this._time.hasLastValue()) {\n        if (this._time.computeDelta(i) < .015) return;\n      }\n\n      this._screen[0].update(e[0]), this._screen[1].update(e[1]), this._scene[0].update(t[0]), this._scene[1].update(t[1]), this._scene[2].update(t[2]), this._time.update(i);\n    }\n  }\n\n  reset() {\n    this._screen[0].reset(), this._screen[1].reset(), this._scene[0].reset(), this._scene[1].reset(), this._scene[2].reset(), this._time.reset();\n  }\n\n  evaluateMomentum() {\n    if (!this.enabled || !this._screen[0].hasFilteredDelta() || !this._time.hasFilteredDelta()) return null;\n    const e = this._screen[0].filteredDelta,\n          t = this._screen[1].filteredDelta,\n          i = null == e || null == t ? 0 : Math.sqrt(e * e + t * t),\n          s = this._time.filteredDelta,\n          n = null == s || null == i ? 0 : i / s;\n    return Math.abs(n) < this._minimumInitialVelocity ? null : this.createMomentum(n, this._stopVelocity, this._friction);\n  }\n\n  createMomentum(s, n, r) {\n    e(this._tmpDirection, this._scene[0].filteredDelta ?? 0, this._scene[1].filteredDelta ?? 0, this._scene[2].filteredDelta ?? 0);\n    const l = t(this._tmpDirection);\n    l > 0 && i(this._tmpDirection, this._tmpDirection, 1 / l);\n    const h = this._time.filteredDelta;\n    return new c(s, n, r, null == h ? 0 : l / h, this._tmpDirection);\n  }\n\n}\n\nexport { c as PanPlanarMomentum, l as PanPlanarMomentumEstimator };","map":{"version":3,"names":["s","e","l","t","g","i","c","FilteredFiniteDifference","n","Momentum","r","constructor","_sceneVelocity","direction","value","valueFromInitialVelocity","_minimumInitialVelocity","_stopVelocity","_friction","enabled","_time","_screen","_scene","_tmpDirection","add","hasLastValue","computeDelta","update","reset","evaluateMomentum","hasFilteredDelta","filteredDelta","Math","sqrt","abs","createMomentum","h","PanPlanarMomentum","PanPlanarMomentumEstimator"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as e,l as t,g as i}from\"../../chunks/vec3.js\";import{c as s}from\"../../chunks/vec3f64.js\";import{FilteredFiniteDifference as n}from\"./FilteredFiniteDifference.js\";import{Momentum as r}from\"./Momentum.js\";class c extends r{constructor(e,t,i,s,n){super(e,t,i),this._sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this._sceneVelocity,e)}}class l{constructor(e=300,t=12,i=.84){this._minimumInitialVelocity=e,this._stopVelocity=t,this._friction=i,this.enabled=!0,this._time=new n(.6),this._screen=[new n(.4),new n(.4)],this._scene=[new n(.6),new n(.6),new n(.6)],this._tmpDirection=s()}add(e,t,i){if(this.enabled){if(this._time.hasLastValue()){if(this._time.computeDelta(i)<.015)return}this._screen[0].update(e[0]),this._screen[1].update(e[1]),this._scene[0].update(t[0]),this._scene[1].update(t[1]),this._scene[2].update(t[2]),this._time.update(i)}}reset(){this._screen[0].reset(),this._screen[1].reset(),this._scene[0].reset(),this._scene[1].reset(),this._scene[2].reset(),this._time.reset()}evaluateMomentum(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;const e=this._screen[0].filteredDelta,t=this._screen[1].filteredDelta,i=null==e||null==t?0:Math.sqrt(e*e+t*t),s=this._time.filteredDelta,n=null==s||null==i?0:i/s;return Math.abs(n)<this._minimumInitialVelocity?null:this.createMomentum(n,this._stopVelocity,this._friction)}createMomentum(s,n,r){e(this._tmpDirection,this._scene[0].filteredDelta??0,this._scene[1].filteredDelta??0,this._scene[2].filteredDelta??0);const l=t(this._tmpDirection);l>0&&i(this._tmpDirection,this._tmpDirection,1/l);const h=this._time.filteredDelta;return new c(s,n,r,null==h?0:l/h,this._tmpDirection)}}export{c as PanPlanarMomentum,l as PanPlanarMomentumEstimator};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}