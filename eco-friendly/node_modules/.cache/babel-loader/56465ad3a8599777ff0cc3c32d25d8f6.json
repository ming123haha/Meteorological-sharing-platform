{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport t from \"../../layers/Layer.js\";\nimport { isArcGISUrl as r } from \"../../layers/support/arcgisLayerUrl.js\";\nimport a from \"../Portal.js\";\nimport n from \"../PortalItem.js\";\nimport { createForItemRead as o } from \"./jsonContext.js\";\nimport { hasTypeKeyword as l } from \"./portalItemUtils.js\";\nimport { loadStyleRenderer as s } from \"../../renderers/support/styleUtils.js\";\nimport { requestArcGISServiceJSON as i } from \"../../support/requestPresets.js\";\n\nasync function p(e, t) {\n  const r = e.instance.portalItem;\n  if (r && r.id) return await r.load(t), u(e), y(e, t);\n}\n\nfunction u(t) {\n  const r = t.instance.portalItem;\n  if (!t.supportedTypes.includes(r.type)) throw new e(\"portal:invalid-layer-item-type\", \"Invalid layer item type '${type}', expected '${expectedType}'\", {\n    type: r.type,\n    expectedType: t.supportedTypes.join(\", \")\n  });\n}\n\nasync function y(e, t) {\n  const r = e.instance,\n        a = r.portalItem,\n        {\n    url: n,\n    title: l\n  } = a,\n        i = o(a);\n  if (\"group\" === r.type) return r.read({\n    title: l\n  }, i), c(r, e);\n  n && r.read({\n    url: n\n  }, i);\n  const p = await h(e, t);\n  return p && r.read(p, i), r.resourceReferences = {\n    portalItem: a,\n    paths: i.readResourcePaths\n  }, \"subtype-group\" !== r.type && r.read({\n    title: l\n  }, i), s(r, i);\n}\n\nfunction c(t, r) {\n  let a;\n  const n = t.portalItem.type,\n        o = r.layerModuleTypeMap,\n        s = l(t.portalItem, \"Oriented Imagery Layer\") ?? !1;\n\n  switch (n) {\n    case \"Feature Service\":\n      a = s ? o.OrientedImageryLayer : o.FeatureLayer;\n      break;\n\n    case \"Stream Service\":\n      a = o.StreamLayer;\n      break;\n\n    case \"Scene Service\":\n      a = o.SceneLayer;\n      break;\n\n    case \"Feature Collection\":\n      a = o.FeatureLayer;\n      break;\n\n    default:\n      throw new e(\"portal:unsupported-item-type-as-group\", `The item type '${n}' is not supported as a 'IGroupLayer'`);\n  }\n\n  let i;\n  return a().then(e => (i = e, h(r))).then(async e => {\n    let r = () => i;\n\n    if (\"Feature Service\" === n) {\n      if (T(e = await b(e, t.portalItem.url)).length) {\n        const e = o.SubtypeGroupLayer,\n              t = await e();\n\n        r = e => \"SubtypeGroupLayer\" === e.layerType ? t : i;\n      }\n\n      return m(t, r, e);\n    }\n\n    return w(e) > 0 ? m(t, r, e) : d(t, r);\n  });\n}\n\nfunction d(e, t) {\n  return e.portalItem.url ? i(e.portalItem.url).then(r => {\n    function a(e) {\n      return {\n        id: e.id,\n        name: e.name\n      };\n    }\n\n    r && m(e, t, {\n      layers: r.layers?.map(a),\n      tables: r.tables?.map(a)\n    });\n  }) : Promise.resolve();\n}\n\nfunction m(e, t, r) {\n  let a = r.layers || [];\n  const n = r.tables || [];\n\n  if (\"Feature Collection\" === e.portalItem.type && (a.forEach(e => {\n    \"Table\" === e?.layerDefinition?.type && n.push(e);\n  }), a = a.filter(e => \"Table\" !== e?.layerDefinition?.type)), \"coverage\" in r) {\n    const t = L(r);\n    e.add(t);\n  }\n\n  a.reverse().forEach(a => {\n    const n = f(e, t(a), r, a);\n    e.add(n);\n  }), n.reverse().forEach(a => {\n    const n = f(e, t(a), r, a);\n    e.tables.add(n);\n  });\n}\n\nfunction f(e, t, r, n) {\n  const o = new t({\n    portalItem: e.portalItem.clone(),\n    layerId: n.id\n  });\n\n  if (\"subtype-group\" !== o.type && (o.sublayerTitleMode = \"service-name\"), \"Feature Collection\" === e.portalItem.type) {\n    const t = {\n      origin: \"portal-item\",\n      portal: e.portalItem.portal || a.getDefault()\n    };\n    o.read(n, t);\n    const l = r.showLegend;\n    null != l && o.read({\n      showLegend: l\n    }, t);\n  }\n\n  return o;\n}\n\nfunction h(e, t) {\n  if (!1 === e.supportsData) return Promise.resolve(void 0);\n  const r = e.instance;\n  return r.portalItem.fetchData(\"json\", t).catch(() => null).then(e => {\n    if (v(r)) {\n      let t,\n          a = !0;\n\n      if (e && w(e) > 0) {\n        if (null == r.layerId) {\n          const t = T(e);\n          r.layerId = \"subtype-group\" === r.type ? t?.[0] : g(e);\n        }\n\n        t = I(e, r), t && (1 === w(e) && (a = !1), null != e.showLegend && (t.showLegend = e.showLegend));\n      }\n\n      return a && \"service-name\" !== r.sublayerTitleMode && (r.sublayerTitleMode = \"item-title-and-service-name\"), t;\n    }\n\n    return e;\n  });\n}\n\nasync function b(e, t) {\n  if (null == e?.layers || null == e?.tables) {\n    const r = await i(t);\n    (e = e || {}).layers = e.layers || r?.layers, e.tables = e.tables || r?.tables;\n  }\n\n  return e;\n}\n\nfunction g(e) {\n  const t = e.layers;\n  if (t && t.length) return t[0].id;\n  const r = e.tables;\n  return r && r.length ? r[0].id : null;\n}\n\nfunction I(e, t) {\n  const {\n    layerId: r\n  } = t,\n        a = e.layers?.find(e => e.id === r) || e.tables?.find(e => e.id === r);\n  return a && S(a, t) ? a : null;\n}\n\nfunction w(e) {\n  return (e?.layers?.length ?? 0) + (e?.tables?.length ?? 0);\n}\n\nfunction v(e) {\n  return \"stream\" !== e.type && \"oriented-imagery\" !== e.type && \"layerId\" in e;\n}\n\nfunction L(a) {\n  const {\n    coverage: o\n  } = a;\n  if (!o) return null;\n  const l = new URL(o);\n\n  if (o.toLowerCase().includes(\"item.html\")) {\n    const e = l.searchParams.get(\"id\"),\n          r = l.origin;\n    return t.fromPortalItem({\n      portalItem: new n({\n        id: e,\n        url: r\n      })\n    });\n  }\n\n  if (r(o)) return t.fromArcGISServerUrl({\n    url: o\n  });\n  throw new e(\"portal:oriented-imagery-layer-coverage\", \"the provided coverage url couldn't be loaded as a layer\");\n}\n\nfunction T(e) {\n  const t = [];\n  return e?.layers?.forEach(e => {\n    \"SubtypeGroupLayer\" === e.layerType && t.push(e.id);\n  }), t;\n}\n\nfunction S(e, t) {\n  return !(\"feature\" === t.type && \"layerType\" in e && \"SubtypeGroupLayer\" === e.layerType || \"subtype-group\" === t.type && !(\"layerType\" in e));\n}\n\nexport { g as getFirstLayerOrTableId, w as getNumLayersAndTables, T as getSubtypeGroupLayerIds, p as load, b as preprocessFSItemData };","map":{"version":3,"names":["e","t","isArcGISUrl","r","a","n","createForItemRead","o","hasTypeKeyword","l","loadStyleRenderer","s","requestArcGISServiceJSON","i","p","instance","portalItem","id","load","u","y","supportedTypes","includes","type","expectedType","join","url","title","read","c","h","resourceReferences","paths","readResourcePaths","layerModuleTypeMap","OrientedImageryLayer","FeatureLayer","StreamLayer","SceneLayer","then","T","b","length","SubtypeGroupLayer","layerType","m","w","d","name","layers","map","tables","Promise","resolve","forEach","layerDefinition","push","filter","L","add","reverse","f","clone","layerId","sublayerTitleMode","origin","portal","getDefault","showLegend","supportsData","fetchData","catch","v","g","I","find","S","coverage","URL","toLowerCase","searchParams","get","fromPortalItem","fromArcGISServerUrl","getFirstLayerOrTableId","getNumLayersAndTables","getSubtypeGroupLayerIds","preprocessFSItemData"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/portal/support/layersLoader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import t from\"../../layers/Layer.js\";import{isArcGISUrl as r}from\"../../layers/support/arcgisLayerUrl.js\";import a from\"../Portal.js\";import n from\"../PortalItem.js\";import{createForItemRead as o}from\"./jsonContext.js\";import{hasTypeKeyword as l}from\"./portalItemUtils.js\";import{loadStyleRenderer as s}from\"../../renderers/support/styleUtils.js\";import{requestArcGISServiceJSON as i}from\"../../support/requestPresets.js\";async function p(e,t){const r=e.instance.portalItem;if(r&&r.id)return await r.load(t),u(e),y(e,t)}function u(t){const r=t.instance.portalItem;if(!t.supportedTypes.includes(r.type))throw new e(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}'\",{type:r.type,expectedType:t.supportedTypes.join(\", \")})}async function y(e,t){const r=e.instance,a=r.portalItem,{url:n,title:l}=a,i=o(a);if(\"group\"===r.type)return r.read({title:l},i),c(r,e);n&&r.read({url:n},i);const p=await h(e,t);return p&&r.read(p,i),r.resourceReferences={portalItem:a,paths:i.readResourcePaths},\"subtype-group\"!==r.type&&r.read({title:l},i),s(r,i)}function c(t,r){let a;const n=t.portalItem.type,o=r.layerModuleTypeMap,s=l(t.portalItem,\"Oriented Imagery Layer\")??!1;switch(n){case\"Feature Service\":a=s?o.OrientedImageryLayer:o.FeatureLayer;break;case\"Stream Service\":a=o.StreamLayer;break;case\"Scene Service\":a=o.SceneLayer;break;case\"Feature Collection\":a=o.FeatureLayer;break;default:throw new e(\"portal:unsupported-item-type-as-group\",`The item type '${n}' is not supported as a 'IGroupLayer'`)}let i;return a().then((e=>(i=e,h(r)))).then((async e=>{let r=()=>i;if(\"Feature Service\"===n){if(T(e=await b(e,t.portalItem.url)).length){const e=o.SubtypeGroupLayer,t=await e();r=e=>\"SubtypeGroupLayer\"===e.layerType?t:i}return m(t,r,e)}return w(e)>0?m(t,r,e):d(t,r)}))}function d(e,t){return e.portalItem.url?i(e.portalItem.url).then((r=>{function a(e){return{id:e.id,name:e.name}}r&&m(e,t,{layers:r.layers?.map(a),tables:r.tables?.map(a)})})):Promise.resolve()}function m(e,t,r){let a=r.layers||[];const n=r.tables||[];if(\"Feature Collection\"===e.portalItem.type&&(a.forEach((e=>{\"Table\"===e?.layerDefinition?.type&&n.push(e)})),a=a.filter((e=>\"Table\"!==e?.layerDefinition?.type))),\"coverage\"in r){const t=L(r);e.add(t)}a.reverse().forEach((a=>{const n=f(e,t(a),r,a);e.add(n)})),n.reverse().forEach((a=>{const n=f(e,t(a),r,a);e.tables.add(n)}))}function f(e,t,r,n){const o=new t({portalItem:e.portalItem.clone(),layerId:n.id});if(\"subtype-group\"!==o.type&&(o.sublayerTitleMode=\"service-name\"),\"Feature Collection\"===e.portalItem.type){const t={origin:\"portal-item\",portal:e.portalItem.portal||a.getDefault()};o.read(n,t);const l=r.showLegend;null!=l&&o.read({showLegend:l},t)}return o}function h(e,t){if(!1===e.supportsData)return Promise.resolve(void 0);const r=e.instance;return r.portalItem.fetchData(\"json\",t).catch((()=>null)).then((e=>{if(v(r)){let t,a=!0;if(e&&w(e)>0){if(null==r.layerId){const t=T(e);r.layerId=\"subtype-group\"===r.type?t?.[0]:g(e)}t=I(e,r),t&&(1===w(e)&&(a=!1),null!=e.showLegend&&(t.showLegend=e.showLegend))}return a&&\"service-name\"!==r.sublayerTitleMode&&(r.sublayerTitleMode=\"item-title-and-service-name\"),t}return e}))}async function b(e,t){if(null==e?.layers||null==e?.tables){const r=await i(t);(e=e||{}).layers=e.layers||r?.layers,e.tables=e.tables||r?.tables}return e}function g(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function I(e,t){const{layerId:r}=t,a=e.layers?.find((e=>e.id===r))||e.tables?.find((e=>e.id===r));return a&&S(a,t)?a:null}function w(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function v(e){return\"stream\"!==e.type&&\"oriented-imagery\"!==e.type&&\"layerId\"in e}function L(a){const{coverage:o}=a;if(!o)return null;const l=new URL(o);if(o.toLowerCase().includes(\"item.html\")){const e=l.searchParams.get(\"id\"),r=l.origin;return t.fromPortalItem({portalItem:new n({id:e,url:r})})}if(r(o))return t.fromArcGISServerUrl({url:o});throw new e(\"portal:oriented-imagery-layer-coverage\",\"the provided coverage url couldn't be loaded as a layer\")}function T(e){const t=[];return e?.layers?.forEach((e=>{\"SubtypeGroupLayer\"===e.layerType&&t.push(e.id)})),t}function S(e,t){return!(\"feature\"===t.type&&\"layerType\"in e&&\"SubtypeGroupLayer\"===e.layerType||\"subtype-group\"===t.type&&!(\"layerType\"in e))}export{g as getFirstLayerOrTableId,w as getNumLayersAndTables,T as getSubtypeGroupLayerIds,p as load,b as preprocessFSItemData};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}