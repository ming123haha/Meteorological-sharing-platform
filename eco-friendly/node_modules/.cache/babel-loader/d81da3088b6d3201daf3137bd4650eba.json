{"ast":null,"code":"var Entry = function () {\n  function Entry(val) {\n    this.value = val;\n  }\n\n  return Entry;\n}();\n\nexport { Entry };\n\nvar LinkedList = function () {\n  function LinkedList() {\n    this._len = 0;\n  }\n\n  LinkedList.prototype.insert = function (val) {\n    var entry = new Entry(val);\n    this.insertEntry(entry);\n    return entry;\n  };\n\n  LinkedList.prototype.insertEntry = function (entry) {\n    if (!this.head) {\n      this.head = this.tail = entry;\n    } else {\n      this.tail.next = entry;\n      entry.prev = this.tail;\n      entry.next = null;\n      this.tail = entry;\n    }\n\n    this._len++;\n  };\n\n  LinkedList.prototype.remove = function (entry) {\n    var prev = entry.prev;\n    var next = entry.next;\n\n    if (prev) {\n      prev.next = next;\n    } else {\n      this.head = next;\n    }\n\n    if (next) {\n      next.prev = prev;\n    } else {\n      this.tail = prev;\n    }\n\n    entry.next = entry.prev = null;\n    this._len--;\n  };\n\n  LinkedList.prototype.len = function () {\n    return this._len;\n  };\n\n  LinkedList.prototype.clear = function () {\n    this.head = this.tail = null;\n    this._len = 0;\n  };\n\n  return LinkedList;\n}();\n\nexport { LinkedList };\n\nvar LRU = function () {\n  function LRU(maxSize) {\n    this._list = new LinkedList();\n    this._maxSize = 10;\n    this._map = {};\n    this._maxSize = maxSize;\n  }\n\n  LRU.prototype.put = function (key, value) {\n    var list = this._list;\n    var map = this._map;\n    var removed = null;\n\n    if (map[key] == null) {\n      var len = list.len();\n      var entry = this._lastRemovedEntry;\n\n      if (len >= this._maxSize && len > 0) {\n        var leastUsedEntry = list.head;\n        list.remove(leastUsedEntry);\n        delete map[leastUsedEntry.key];\n        removed = leastUsedEntry.value;\n        this._lastRemovedEntry = leastUsedEntry;\n      }\n\n      if (entry) {\n        entry.value = value;\n      } else {\n        entry = new Entry(value);\n      }\n\n      entry.key = key;\n      list.insertEntry(entry);\n      map[key] = entry;\n    }\n\n    return removed;\n  };\n\n  LRU.prototype.get = function (key) {\n    var entry = this._map[key];\n    var list = this._list;\n\n    if (entry != null) {\n      if (entry !== list.tail) {\n        list.remove(entry);\n        list.insertEntry(entry);\n      }\n\n      return entry.value;\n    }\n  };\n\n  LRU.prototype.clear = function () {\n    this._list.clear();\n\n    this._map = {};\n  };\n\n  LRU.prototype.len = function () {\n    return this._list.len();\n  };\n\n  return LRU;\n}();\n\nexport default LRU;","map":{"version":3,"names":["Entry","val","value","LinkedList","_len","prototype","insert","entry","insertEntry","head","tail","next","prev","remove","len","clear","LRU","maxSize","_list","_maxSize","_map","put","key","list","map","removed","_lastRemovedEntry","leastUsedEntry","get"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/zrender/lib/core/LRU.js"],"sourcesContent":["var Entry = (function () {\r\n    function Entry(val) {\r\n        this.value = val;\r\n    }\r\n    return Entry;\r\n}());\r\nexport { Entry };\r\nvar LinkedList = (function () {\r\n    function LinkedList() {\r\n        this._len = 0;\r\n    }\r\n    LinkedList.prototype.insert = function (val) {\r\n        var entry = new Entry(val);\r\n        this.insertEntry(entry);\r\n        return entry;\r\n    };\r\n    LinkedList.prototype.insertEntry = function (entry) {\r\n        if (!this.head) {\r\n            this.head = this.tail = entry;\r\n        }\r\n        else {\r\n            this.tail.next = entry;\r\n            entry.prev = this.tail;\r\n            entry.next = null;\r\n            this.tail = entry;\r\n        }\r\n        this._len++;\r\n    };\r\n    LinkedList.prototype.remove = function (entry) {\r\n        var prev = entry.prev;\r\n        var next = entry.next;\r\n        if (prev) {\r\n            prev.next = next;\r\n        }\r\n        else {\r\n            this.head = next;\r\n        }\r\n        if (next) {\r\n            next.prev = prev;\r\n        }\r\n        else {\r\n            this.tail = prev;\r\n        }\r\n        entry.next = entry.prev = null;\r\n        this._len--;\r\n    };\r\n    LinkedList.prototype.len = function () {\r\n        return this._len;\r\n    };\r\n    LinkedList.prototype.clear = function () {\r\n        this.head = this.tail = null;\r\n        this._len = 0;\r\n    };\r\n    return LinkedList;\r\n}());\r\nexport { LinkedList };\r\nvar LRU = (function () {\r\n    function LRU(maxSize) {\r\n        this._list = new LinkedList();\r\n        this._maxSize = 10;\r\n        this._map = {};\r\n        this._maxSize = maxSize;\r\n    }\r\n    LRU.prototype.put = function (key, value) {\r\n        var list = this._list;\r\n        var map = this._map;\r\n        var removed = null;\r\n        if (map[key] == null) {\r\n            var len = list.len();\r\n            var entry = this._lastRemovedEntry;\r\n            if (len >= this._maxSize && len > 0) {\r\n                var leastUsedEntry = list.head;\r\n                list.remove(leastUsedEntry);\r\n                delete map[leastUsedEntry.key];\r\n                removed = leastUsedEntry.value;\r\n                this._lastRemovedEntry = leastUsedEntry;\r\n            }\r\n            if (entry) {\r\n                entry.value = value;\r\n            }\r\n            else {\r\n                entry = new Entry(value);\r\n            }\r\n            entry.key = key;\r\n            list.insertEntry(entry);\r\n            map[key] = entry;\r\n        }\r\n        return removed;\r\n    };\r\n    LRU.prototype.get = function (key) {\r\n        var entry = this._map[key];\r\n        var list = this._list;\r\n        if (entry != null) {\r\n            if (entry !== list.tail) {\r\n                list.remove(entry);\r\n                list.insertEntry(entry);\r\n            }\r\n            return entry.value;\r\n        }\r\n    };\r\n    LRU.prototype.clear = function () {\r\n        this._list.clear();\r\n        this._map = {};\r\n    };\r\n    LRU.prototype.len = function () {\r\n        return this._list.len();\r\n    };\r\n    return LRU;\r\n}());\r\nexport default LRU;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}