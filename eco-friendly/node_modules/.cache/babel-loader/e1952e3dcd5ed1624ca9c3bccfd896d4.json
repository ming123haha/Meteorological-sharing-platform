{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from \"../../../core/Error.js\";\nimport r from \"./AspectFunction.js\";\nimport e from \"./BandArithmeticFunction.js\";\nimport s from \"./ColormapFunction.js\";\nimport n from \"./CompositeBandFunction.js\";\nimport o from \"./ConvolutionFunction.js\";\nimport a from \"./ExtractBandFunction.js\";\nimport c from \"./LocalFunction.js\";\nimport i from \"./MaskFunction.js\";\nimport u from \"./NDVIFunction.js\";\nimport m from \"./RemapFunction.js\";\nimport p from \"./SlopeFunction.js\";\nimport f from \"./StatisticsHistogramsFunction.js\";\nimport F from \"./StretchFunction.js\";\nconst d = new Map();\n\nfunction A(t, r, e = [\"raster\"], s = \"\") {\n  d.set(t, {\n    desc: s,\n    ctor: r,\n    rasterArgumentNames: e\n  });\n}\n\nfunction g() {\n  const t = new Set();\n  return d.forEach((r, e) => t.add(e)), t;\n}\n\nfunction l(r, e) {\n  if (\"rasterFunction\" in r) return h(r, e ?? {});\n  throw new t(\"raster-function-helper\", \"unsupported raster function json.\");\n}\n\nfunction N(t, r) {\n  return \"rasters\" === r[0] && Array.isArray(t.rasters) ? t.rasters : r.map(r => t[r]);\n}\n\nfunction h(r, e) {\n  const {\n    rasterFunction: s,\n    rasterFunctionArguments: n\n  } = r,\n        o = r.outputPixelType?.toLowerCase();\n  if (null == s || !d.has(s)) throw new t(\"raster-function-helper\", `unsupported raster function: ${s}`);\n  const a = d.get(s),\n        c = (\"function\" == typeof a.ctor ? a.ctor : a.ctor.default).fromJSON({ ...r,\n    outputPixelType: o\n  }),\n        {\n    rasterArgumentNames: i\n  } = c,\n        u = [],\n        m = N(n, i),\n        p = \"rasters\" === i[0],\n        f = [];\n\n  for (let t = 0; t < m.length; t++) {\n    const r = m[t];\n    let s;\n    null == r || \"string\" == typeof r && r.startsWith(\"$\") ? u.push(e?.raster) : \"string\" == typeof r ? e[r] && u.push(e[r]) : \"number\" != typeof r && \"rasterFunction\" in r && (s = h(r, e), p || (c.functionArguments[i[t]] = s), u.push(s)), p && f.push(s ?? r);\n  }\n\n  if (p && (c.functionArguments.rasters = f), e) {\n    c.sourceRasters = u;\n    const t = e.raster?.url;\n    t && (c.mainPrimaryRasterId = t);\n  }\n\n  return c;\n}\n\nd.set(\"Aspect\", {\n  desc: \"Aspect Function\",\n  ctor: r,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"BandArithmetic\", {\n  desc: \"Band Arithmetic Function\",\n  ctor: e,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"Colormap\", {\n  desc: \"Colormap Function\",\n  ctor: s,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"CompositeBand\", {\n  desc: \"CompositeBand Function\",\n  ctor: n,\n  rasterArgumentNames: [\"rasters\"]\n}), d.set(\"Convolution\", {\n  desc: \"Convolution Function\",\n  ctor: o,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"ExtractBand\", {\n  desc: \"ExtractBand Function\",\n  ctor: a,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"Local\", {\n  desc: \"Local Function\",\n  ctor: c,\n  rasterArgumentNames: [\"rasters\"]\n}), d.set(\"Mask\", {\n  desc: \"Mask Function\",\n  ctor: i,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"NDVI\", {\n  desc: \"NDVI Function\",\n  ctor: u,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"Remap\", {\n  desc: \"Remap Function\",\n  ctor: m,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"Slope\", {\n  desc: \"Slope Function\",\n  ctor: p,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"StatisticsHistograms\", {\n  desc: \"Statistics Histograms Function\",\n  ctor: f,\n  rasterArgumentNames: [\"raster\"]\n}), d.set(\"Stretch\", {\n  desc: \"Stretch Function\",\n  ctor: F,\n  rasterArgumentNames: [\"raster\"]\n});\nexport { l as create, N as getRasterValues, g as getSupportedFunctions, A as register };","map":{"version":3,"names":["t","r","e","s","n","o","a","c","i","u","m","p","f","F","d","Map","A","set","desc","ctor","rasterArgumentNames","g","Set","forEach","add","l","h","N","Array","isArray","rasters","map","rasterFunction","rasterFunctionArguments","outputPixelType","toLowerCase","has","get","default","fromJSON","length","startsWith","push","raster","functionArguments","sourceRasters","url","mainPrimaryRasterId","create","getRasterValues","getSupportedFunctions","register"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/rasterFunctionHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import r from\"./AspectFunction.js\";import e from\"./BandArithmeticFunction.js\";import s from\"./ColormapFunction.js\";import n from\"./CompositeBandFunction.js\";import o from\"./ConvolutionFunction.js\";import a from\"./ExtractBandFunction.js\";import c from\"./LocalFunction.js\";import i from\"./MaskFunction.js\";import u from\"./NDVIFunction.js\";import m from\"./RemapFunction.js\";import p from\"./SlopeFunction.js\";import f from\"./StatisticsHistogramsFunction.js\";import F from\"./StretchFunction.js\";const d=new Map;function A(t,r,e=[\"raster\"],s=\"\"){d.set(t,{desc:s,ctor:r,rasterArgumentNames:e})}function g(){const t=new Set;return d.forEach(((r,e)=>t.add(e))),t}function l(r,e){if(\"rasterFunction\"in r)return h(r,e??{});throw new t(\"raster-function-helper\",\"unsupported raster function json.\")}function N(t,r){return\"rasters\"===r[0]&&Array.isArray(t.rasters)?t.rasters:r.map((r=>t[r]))}function h(r,e){const{rasterFunction:s,rasterFunctionArguments:n}=r,o=r.outputPixelType?.toLowerCase();if(null==s||!d.has(s))throw new t(\"raster-function-helper\",`unsupported raster function: ${s}`);const a=d.get(s),c=(\"function\"==typeof a.ctor?a.ctor:a.ctor.default).fromJSON({...r,outputPixelType:o}),{rasterArgumentNames:i}=c,u=[],m=N(n,i),p=\"rasters\"===i[0],f=[];for(let t=0;t<m.length;t++){const r=m[t];let s;null==r||\"string\"==typeof r&&r.startsWith(\"$\")?u.push(e?.raster):\"string\"==typeof r?e[r]&&u.push(e[r]):\"number\"!=typeof r&&\"rasterFunction\"in r&&(s=h(r,e),p||(c.functionArguments[i[t]]=s),u.push(s)),p&&f.push(s??r)}if(p&&(c.functionArguments.rasters=f),e){c.sourceRasters=u;const t=e.raster?.url;t&&(c.mainPrimaryRasterId=t)}return c}d.set(\"Aspect\",{desc:\"Aspect Function\",ctor:r,rasterArgumentNames:[\"raster\"]}),d.set(\"BandArithmetic\",{desc:\"Band Arithmetic Function\",ctor:e,rasterArgumentNames:[\"raster\"]}),d.set(\"Colormap\",{desc:\"Colormap Function\",ctor:s,rasterArgumentNames:[\"raster\"]}),d.set(\"CompositeBand\",{desc:\"CompositeBand Function\",ctor:n,rasterArgumentNames:[\"rasters\"]}),d.set(\"Convolution\",{desc:\"Convolution Function\",ctor:o,rasterArgumentNames:[\"raster\"]}),d.set(\"ExtractBand\",{desc:\"ExtractBand Function\",ctor:a,rasterArgumentNames:[\"raster\"]}),d.set(\"Local\",{desc:\"Local Function\",ctor:c,rasterArgumentNames:[\"rasters\"]}),d.set(\"Mask\",{desc:\"Mask Function\",ctor:i,rasterArgumentNames:[\"raster\"]}),d.set(\"NDVI\",{desc:\"NDVI Function\",ctor:u,rasterArgumentNames:[\"raster\"]}),d.set(\"Remap\",{desc:\"Remap Function\",ctor:m,rasterArgumentNames:[\"raster\"]}),d.set(\"Slope\",{desc:\"Slope Function\",ctor:p,rasterArgumentNames:[\"raster\"]}),d.set(\"StatisticsHistograms\",{desc:\"Statistics Histograms Function\",ctor:f,rasterArgumentNames:[\"raster\"]}),d.set(\"Stretch\",{desc:\"Stretch Function\",ctor:F,rasterArgumentNames:[\"raster\"]});export{l as create,N as getRasterValues,g as getSupportedFunctions,A as register};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}