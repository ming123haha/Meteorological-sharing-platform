{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport { on as t } from \"../../../../core/events.js\";\nimport r from \"../../../../core/Logger.js\";\nimport { isPowerOfTwo as s } from \"../../../../core/mathUtils.js\";\nimport { isSome as i, isNone as o } from \"../../../../core/maybe.js\";\nimport { watch as n, when as a, initial as h } from \"../../../../core/reactiveUtils.js\";\nimport { DisplayObject as m } from \"../DisplayObject.js\";\nimport { BufferObject as l } from \"../../../webgl/BufferObject.js\";\nimport { PixelFormat as d, PixelType as c, TextureSamplingMode as p, TextureWrapMode as u, Usage as g } from \"../../../webgl/enums.js\";\nimport { Texture as f } from \"../../../webgl/Texture.js\";\nimport { VertexArrayObject as w } from \"../../../webgl/VertexArrayObject.js\";\nimport y from \"../../../webgl/capabilities/isWebGL2Context.js\";\n\nclass _ extends m {\n  constructor(s) {\n    super(), this.elementView = s, this.isWrapAround = !1, this._vertices = new Float32Array(20), this._handles = [], this._handles.push(n(() => this.elementView.element.opacity, e => this.opacity = e, h), n(() => [this.elementView.coords], () => {\n      this.requestRender();\n    }, h), a(() => this.elementView.element.loaded, () => {\n      const e = this.elementView.element;\n      this.ready(), \"video\" === e.type && i(e.content) && this._handles.push(t(e.content, \"play\", () => this.requestRender()));\n    }, h)), s.element.load().catch(t => {\n      r.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new e(\"element-load-error\", \"Element cannot be displayed\", {\n        element: s,\n        error: t\n      }));\n    });\n  }\n\n  destroy() {\n    this._handles.forEach(e => e.remove()), this.texture?.dispose(), this.texture = null;\n  }\n\n  get dvsMat3() {\n    return this.parent.dvsMat3;\n  }\n\n  beforeRender(e) {\n    const {\n      context: t\n    } = e,\n          r = this.elementView.element.content;\n\n    if (i(r)) {\n      const e = r instanceof HTMLImageElement,\n            i = r instanceof HTMLVideoElement,\n            o = e ? r.naturalWidth : i ? r.videoWidth : r.width,\n            n = e ? r.naturalHeight : i ? r.videoHeight : r.height;\n      this.texture ? i && !r.paused && (this.texture.setData(r), this.requestRender(), (y(t.gl) || s(o) && s(n)) && this.texture.generateMipmap()) : (this.texture = new f(t, {\n        pixelFormat: d.RGBA,\n        dataType: c.UNSIGNED_BYTE,\n        samplingMode: p.LINEAR,\n        wrapMode: u.CLAMP_TO_EDGE,\n        width: o,\n        height: n\n      }, r), (y(t.gl) || s(o) && s(n)) && this.texture.generateMipmap(), i && !r.paused && this.requestRender());\n    }\n\n    super.beforeRender(e);\n  }\n\n  _createTransforms() {\n    return null;\n  }\n\n  updateDrawCoords(e, t) {\n    const r = this.elementView.coords;\n    if (o(r)) return;\n    const [s, i, n, a] = r.rings[0],\n          h = this._vertices,\n          {\n      x: m,\n      y: l\n    } = e,\n          d = 0 !== t;\n    d ? h.set([i[0] - m, i[1] - l, s[0] - m, s[1] - l, n[0] - m, n[1] - l, a[0] - m, a[1] - l, a[0] - m, a[1] - l, i[0] + t - m, i[1] - l, i[0] + t - m, i[1] - l, s[0] + t - m, s[1] - l, n[0] + t - m, n[1] - l, a[0] + t - m, a[1] - l]) : h.set([i[0] - m, i[1] - l, s[0] - m, s[1] - l, n[0] - m, n[1] - l, a[0] - m, a[1] - l]), this.isWrapAround = d;\n  }\n\n  getVAO(e, t, r) {\n    if (o(this.elementView.coords)) return null;\n    const s = this._vertices;\n    if (this._vao) this._geometryVbo.setData(s);else {\n      this._geometryVbo = l.createVertex(e, g.DYNAMIC_DRAW, s);\n      const i = l.createVertex(e, g.STATIC_DRAW, new Uint16Array([0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1]));\n      this._vao = new w(e, r, t, {\n        geometry: this._geometryVbo,\n        tex: i\n      });\n    }\n    return this._vao;\n  }\n\n}\n\nexport { _ as default };","map":{"version":3,"names":["e","on","t","r","isPowerOfTwo","s","isSome","i","isNone","o","watch","n","when","a","initial","h","DisplayObject","m","BufferObject","l","PixelFormat","d","PixelType","c","TextureSamplingMode","p","TextureWrapMode","u","Usage","g","Texture","f","VertexArrayObject","w","y","_","constructor","elementView","isWrapAround","_vertices","Float32Array","_handles","push","element","opacity","coords","requestRender","loaded","ready","type","content","load","catch","getLogger","error","destroy","forEach","remove","texture","dispose","dvsMat3","parent","beforeRender","context","HTMLImageElement","HTMLVideoElement","naturalWidth","videoWidth","width","naturalHeight","videoHeight","height","paused","setData","gl","generateMipmap","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","LINEAR","wrapMode","CLAMP_TO_EDGE","_createTransforms","updateDrawCoords","rings","x","set","getVAO","_vao","_geometryVbo","createVertex","DYNAMIC_DRAW","STATIC_DRAW","Uint16Array","geometry","tex","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/Overlay.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{on as t}from\"../../../../core/events.js\";import r from\"../../../../core/Logger.js\";import{isPowerOfTwo as s}from\"../../../../core/mathUtils.js\";import{isSome as i,isNone as o}from\"../../../../core/maybe.js\";import{watch as n,when as a,initial as h}from\"../../../../core/reactiveUtils.js\";import{DisplayObject as m}from\"../DisplayObject.js\";import{BufferObject as l}from\"../../../webgl/BufferObject.js\";import{PixelFormat as d,PixelType as c,TextureSamplingMode as p,TextureWrapMode as u,Usage as g}from\"../../../webgl/enums.js\";import{Texture as f}from\"../../../webgl/Texture.js\";import{VertexArrayObject as w}from\"../../../webgl/VertexArrayObject.js\";import y from\"../../../webgl/capabilities/isWebGL2Context.js\";class _ extends m{constructor(s){super(),this.elementView=s,this.isWrapAround=!1,this._vertices=new Float32Array(20),this._handles=[],this._handles.push(n((()=>this.elementView.element.opacity),(e=>this.opacity=e),h),n((()=>[this.elementView.coords]),(()=>{this.requestRender()}),h),a((()=>this.elementView.element.loaded),(()=>{const e=this.elementView.element;this.ready(),\"video\"===e.type&&i(e.content)&&this._handles.push(t(e.content,\"play\",(()=>this.requestRender())))}),h)),s.element.load().catch((t=>{r.getLogger(\"esri.views.2d.layers.MediaLayerView2D\").error(new e(\"element-load-error\",\"Element cannot be displayed\",{element:s,error:t}))}))}destroy(){this._handles.forEach((e=>e.remove())),this.texture?.dispose(),this.texture=null}get dvsMat3(){return this.parent.dvsMat3}beforeRender(e){const{context:t}=e,r=this.elementView.element.content;if(i(r)){const e=r instanceof HTMLImageElement,i=r instanceof HTMLVideoElement,o=e?r.naturalWidth:i?r.videoWidth:r.width,n=e?r.naturalHeight:i?r.videoHeight:r.height;this.texture?i&&!r.paused&&(this.texture.setData(r),this.requestRender(),(y(t.gl)||s(o)&&s(n))&&this.texture.generateMipmap()):(this.texture=new f(t,{pixelFormat:d.RGBA,dataType:c.UNSIGNED_BYTE,samplingMode:p.LINEAR,wrapMode:u.CLAMP_TO_EDGE,width:o,height:n},r),(y(t.gl)||s(o)&&s(n))&&this.texture.generateMipmap(),i&&!r.paused&&this.requestRender())}super.beforeRender(e)}_createTransforms(){return null}updateDrawCoords(e,t){const r=this.elementView.coords;if(o(r))return;const[s,i,n,a]=r.rings[0],h=this._vertices,{x:m,y:l}=e,d=0!==t;d?h.set([i[0]-m,i[1]-l,s[0]-m,s[1]-l,n[0]-m,n[1]-l,a[0]-m,a[1]-l,a[0]-m,a[1]-l,i[0]+t-m,i[1]-l,i[0]+t-m,i[1]-l,s[0]+t-m,s[1]-l,n[0]+t-m,n[1]-l,a[0]+t-m,a[1]-l]):h.set([i[0]-m,i[1]-l,s[0]-m,s[1]-l,n[0]-m,n[1]-l,a[0]-m,a[1]-l]),this.isWrapAround=d}getVAO(e,t,r){if(o(this.elementView.coords))return null;const s=this._vertices;if(this._vao)this._geometryVbo.setData(s);else{this._geometryVbo=l.createVertex(e,g.DYNAMIC_DRAW,s);const i=l.createVertex(e,g.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new w(e,r,t,{geometry:this._geometryVbo,tex:i})}return this._vao}}export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}