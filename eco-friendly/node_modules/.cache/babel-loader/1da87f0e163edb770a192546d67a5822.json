{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../../core/maybe.js\";\nimport { s as t } from \"../../../../chunks/vec3.js\";\nimport { c as r } from \"../../../../chunks/vec3f64.js\";\nimport { create as i, empty as s, expandWithRect as o, center as d, set as n, toRect as a } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { create as h } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { demResolutionForBoundingBox as c } from \"./graphicUtils.js\";\nimport { Object3DState as m } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { ModelDirty as g } from \"../../webgl-engine/lib/ModelDirtyTypes.js\";\n\nclass u {\n  constructor(e, t, r, i) {\n    this.graphics3DSymbolLayer = e, this.renderGeometries = t, this.boundingBox = r, this._drapeSourceRenderer = i, this.type = \"draped\", this.stage = null, this._visible = !1, this._addedToStage = !1, this.isElevationSource = !1;\n  }\n\n  initialize(e) {\n    this.stage = e;\n  }\n\n  setVisibility(e) {\n    if (null != this.stage && this._visible !== e) {\n      if (this._visible = e, e && !this._addedToStage) return this._addedToStage = !0, void this._drapeSourceRenderer.addGeometries(this.renderGeometries, g.Geometry.ADD);\n\n      if (e || this._addedToStage) {\n        for (const e of this.renderGeometries) e.instanceParameters.visible = this._visible;\n\n        this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.State.VISIBILITIES);\n      }\n    }\n  }\n\n  destroy() {\n    this.stage && this._addedToStage && this._drapeSourceRenderer.removeGeometries(this.renderGeometries, g.Geometry.REMOVE), this._addedToStage = !1, this._visible = !1, this.stage = null;\n  }\n\n  getCenterObjectSpace(e = r()) {\n    return t(e, 0, 0, 0);\n  }\n\n  getBoundingBoxObjectSpace(e = i()) {\n    return s(e);\n  }\n\n  addObjectState(e, t) {\n    e === m.Highlight && (this.renderGeometries.forEach(e => {\n      const r = e.addHighlight();\n      t.addRenderGeometry(e, r, this);\n    }), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.State.HIGHLIGHTS));\n  }\n\n  removeObjectState(e) {\n    this.renderGeometries.forEach(t => {\n      e.removeRenderGeometry(t);\n    });\n  }\n\n  removeRenderGeometryObjectState(e, t) {\n    e.removeHighlight(t), this._addedToStage && this._drapeSourceRenderer.modifyGeometries(this.renderGeometries, g.State.HIGHLIGHTS);\n  }\n\n  computeAttachmentOrigin(e) {\n    for (const t of this.renderGeometries) t.computeAttachmentOrigin(S) && (e.draped.origin[0] += S[0], e.draped.origin[1] += S[1], e.draped.num++);\n  }\n\n  async getProjectedBoundingBox(t, r, i, n, a) {\n    s(a);\n\n    for (let e = 0; e < this.renderGeometries.length; e++) {\n      const r = this.renderGeometries[e];\n      this._getRenderGeometryProjectedBoundingRect(r, t, l, i), o(a, l);\n    }\n\n    if (r) {\n      let t;\n      d(a, S);\n      const i = c(a, r);\n\n      try {\n        t = await r.service.queryElevation(S[0], S[1], n, i, \"ground\");\n      } catch (h) {}\n\n      e(t) && (a[2] = Math.min(a[2], t), a[5] = Math.max(a[5], t));\n    }\n\n    return a;\n  }\n\n  _getRenderGeometryProjectedBoundingRect(e, t, r, i) {\n    if (this.boundingBox) n(p, this.boundingBox);else {\n      const t = e.boundingSphere,\n            r = t[3];\n      p[0] = t[0] - r, p[1] = t[1] - r, p[2] = t[2] - r, p[3] = t[0] + r, p[4] = t[1] + r, p[5] = t[2] + r;\n    }\n    return t(p, 0, 2), this.calculateRelativeScreenBounds && i.push({\n      location: d(p),\n      screenSpaceBoundingRect: this.calculateRelativeScreenBounds()\n    }), a(p, r);\n  }\n\n}\n\nconst l = h(),\n      p = i(),\n      S = r();\nexport { u as default };","map":{"version":3,"names":["isSome","e","s","t","c","r","create","i","empty","expandWithRect","o","center","d","set","n","toRect","a","h","demResolutionForBoundingBox","Object3DState","m","ModelDirty","g","u","constructor","graphics3DSymbolLayer","renderGeometries","boundingBox","_drapeSourceRenderer","type","stage","_visible","_addedToStage","isElevationSource","initialize","setVisibility","addGeometries","Geometry","ADD","instanceParameters","visible","modifyGeometries","State","VISIBILITIES","destroy","removeGeometries","REMOVE","getCenterObjectSpace","getBoundingBoxObjectSpace","addObjectState","Highlight","forEach","addHighlight","addRenderGeometry","HIGHLIGHTS","removeObjectState","removeRenderGeometry","removeRenderGeometryObjectState","removeHighlight","computeAttachmentOrigin","S","draped","origin","num","getProjectedBoundingBox","length","_getRenderGeometryProjectedBoundingRect","l","service","queryElevation","Math","min","max","p","boundingSphere","calculateRelativeScreenBounds","push","location","screenSpaceBoundingRect","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{s as t}from\"../../../../chunks/vec3.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{create as i,empty as s,expandWithRect as o,center as d,set as n,toRect as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as h}from\"../../../../geometry/support/aaBoundingRect.js\";import{demResolutionForBoundingBox as c}from\"./graphicUtils.js\";import{Object3DState as m}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ModelDirty as g}from\"../../webgl-engine/lib/ModelDirtyTypes.js\";class u{constructor(e,t,r,i){this.graphics3DSymbolLayer=e,this.renderGeometries=t,this.boundingBox=r,this._drapeSourceRenderer=i,this.type=\"draped\",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(e){this.stage=e}setVisibility(e){if(null!=this.stage&&this._visible!==e){if(this._visible=e,e&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,g.Geometry.ADD);if(e||this._addedToStage){for(const e of this.renderGeometries)e.instanceParameters.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,g.State.VISIBILITIES)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,g.Geometry.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(e=r()){return t(e,0,0,0)}getBoundingBoxObjectSpace(e=i()){return s(e)}addObjectState(e,t){e===m.Highlight&&(this.renderGeometries.forEach((e=>{const r=e.addHighlight();t.addRenderGeometry(e,r,this)})),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,g.State.HIGHLIGHTS))}removeObjectState(e){this.renderGeometries.forEach((t=>{e.removeRenderGeometry(t)}))}removeRenderGeometryObjectState(e,t){e.removeHighlight(t),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,g.State.HIGHLIGHTS)}computeAttachmentOrigin(e){for(const t of this.renderGeometries)t.computeAttachmentOrigin(S)&&(e.draped.origin[0]+=S[0],e.draped.origin[1]+=S[1],e.draped.num++)}async getProjectedBoundingBox(t,r,i,n,a){s(a);for(let e=0;e<this.renderGeometries.length;e++){const r=this.renderGeometries[e];this._getRenderGeometryProjectedBoundingRect(r,t,l,i),o(a,l)}if(r){let t;d(a,S);const i=c(a,r);try{t=await r.service.queryElevation(S[0],S[1],n,i,\"ground\")}catch(h){}e(t)&&(a[2]=Math.min(a[2],t),a[5]=Math.max(a[5],t))}return a}_getRenderGeometryProjectedBoundingRect(e,t,r,i){if(this.boundingBox)n(p,this.boundingBox);else{const t=e.boundingSphere,r=t[3];p[0]=t[0]-r,p[1]=t[1]-r,p[2]=t[2]-r,p[3]=t[0]+r,p[4]=t[1]+r,p[5]=t[2]+r}return t(p,0,2),this.calculateRelativeScreenBounds&&i.push({location:d(p),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),a(p,r)}}const l=h(),p=i(),S=r();export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}