{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"../../chunks/tslib.es6.js\";\nimport s from \"../../core/Accessor.js\";\nimport { JSONMap as e } from \"../../core/jsonMap.js\";\nimport o from \"../../core/Logger.js\";\nimport t from \"../../core/Warning.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport l from \"./ColorVariable.js\";\nimport n from \"./OpacityVariable.js\";\nimport c from \"./RotationVariable.js\";\nimport p from \"./SizeVariable.js\";\nconst u = {\n  color: l,\n  size: p,\n  opacity: n,\n  rotation: c\n},\n      b = new e({\n  colorInfo: \"color\",\n  transparencyInfo: \"opacity\",\n  rotationInfo: \"rotation\",\n  sizeInfo: \"size\"\n}),\n      h = /^\\[([^\\]]+)\\]$/i;\nlet V = class extends s {\n  constructor() {\n    super(...arguments), this.colorVariables = null, this.opacityVariables = null, this.rotationVariables = null, this.sizeVariables = null;\n  }\n\n  set visualVariables(r) {\n    if (this._resetVariables(), (r = r && r.filter(r => !!r)) && r.length) {\n      for (const s of r) switch (s.type) {\n        case \"color\":\n          this.colorVariables.push(s);\n          break;\n\n        case \"opacity\":\n          this.opacityVariables.push(s);\n          break;\n\n        case \"rotation\":\n          this.rotationVariables.push(s);\n          break;\n\n        case \"size\":\n          this.sizeVariables.push(s);\n      }\n\n      if (this.sizeVariables.length) {\n        this.sizeVariables.some(r => !!r.target) && r.sort((r, s) => {\n          let e = null;\n          return e = r.target === s.target ? 0 : r.target ? 1 : -1, e;\n        });\n      }\n\n      for (let s = 0; s < r.length; s++) {\n        r[s].index = s;\n      }\n\n      this._set(\"visualVariables\", r);\n    } else this._set(\"visualVariables\", r);\n  }\n\n  readVariables(r, s, e) {\n    const {\n      rotationExpression: a,\n      rotationType: i\n    } = s,\n          l = a && a.match(h),\n          n = l && l[1];\n    if (n && (r || (r = []), r.push({\n      type: \"rotationInfo\",\n      rotationType: i,\n      field: n\n    })), r) return r.map(r => {\n      const s = b.read(r.type),\n            a = u[s];\n      a || (o.getLogger(this.declaredClass).warn(`Unknown variable type: ${s}`), e && e.messages && e.messages.push(new t(\"visual-variable:unsupported\", `visualVariable of type '${s}' is not supported`, {\n        definition: r,\n        context: e\n      })));\n      const i = new a();\n      return i.read(r, e), i;\n    });\n  }\n\n  writeVariables(r, s) {\n    const e = [];\n\n    for (const o of r) {\n      const r = o.toJSON(s);\n      r && e.push(r);\n    }\n\n    return e;\n  }\n\n  _resetVariables() {\n    this.colorVariables = [], this.opacityVariables = [], this.rotationVariables = [], this.sizeVariables = [];\n  }\n\n};\nr([a()], V.prototype, \"visualVariables\", null), V = r([i(\"esri.renderers.visualVariables.VisualVariableFactory\")], V);\nconst f = V;\nexport { f as default };","map":{"version":3,"names":["_","r","s","JSONMap","e","o","t","property","a","subclass","i","l","n","c","p","u","color","size","opacity","rotation","b","colorInfo","transparencyInfo","rotationInfo","sizeInfo","h","V","constructor","arguments","colorVariables","opacityVariables","rotationVariables","sizeVariables","visualVariables","_resetVariables","filter","length","type","push","some","target","sort","index","_set","readVariables","rotationExpression","rotationType","match","field","map","read","getLogger","declaredClass","warn","messages","definition","context","writeVariables","toJSON","prototype","f","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/renderers/visualVariables/VisualVariableFactory.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import s from\"../../core/Accessor.js\";import{JSONMap as e}from\"../../core/jsonMap.js\";import o from\"../../core/Logger.js\";import t from\"../../core/Warning.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"./ColorVariable.js\";import n from\"./OpacityVariable.js\";import c from\"./RotationVariable.js\";import p from\"./SizeVariable.js\";const u={color:l,size:p,opacity:n,rotation:c},b=new e({colorInfo:\"color\",transparencyInfo:\"opacity\",rotationInfo:\"rotation\",sizeInfo:\"size\"}),h=/^\\[([^\\]]+)\\]$/i;let V=class extends s{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(r){if(this._resetVariables(),(r=r&&r.filter((r=>!!r)))&&r.length){for(const s of r)switch(s.type){case\"color\":this.colorVariables.push(s);break;case\"opacity\":this.opacityVariables.push(s);break;case\"rotation\":this.rotationVariables.push(s);break;case\"size\":this.sizeVariables.push(s)}if(this.sizeVariables.length){this.sizeVariables.some((r=>!!r.target))&&r.sort(((r,s)=>{let e=null;return e=r.target===s.target?0:r.target?1:-1,e}))}for(let s=0;s<r.length;s++){r[s].index=s}this._set(\"visualVariables\",r)}else this._set(\"visualVariables\",r)}readVariables(r,s,e){const{rotationExpression:a,rotationType:i}=s,l=a&&a.match(h),n=l&&l[1];if(n&&(r||(r=[]),r.push({type:\"rotationInfo\",rotationType:i,field:n})),r)return r.map((r=>{const s=b.read(r.type),a=u[s];a||(o.getLogger(this.declaredClass).warn(`Unknown variable type: ${s}`),e&&e.messages&&e.messages.push(new t(\"visual-variable:unsupported\",`visualVariable of type '${s}' is not supported`,{definition:r,context:e})));const i=new a;return i.read(r,e),i}))}writeVariables(r,s){const e=[];for(const o of r){const r=o.toJSON(s);r&&e.push(r)}return e}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};r([a()],V.prototype,\"visualVariables\",null),V=r([i(\"esri.renderers.visualVariables.VisualVariableFactory\")],V);const f=V;export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}