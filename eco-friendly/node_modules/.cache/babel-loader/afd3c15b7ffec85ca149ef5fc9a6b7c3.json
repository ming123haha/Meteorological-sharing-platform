{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n(function (root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else {\n    root.BMapLib = root.BMapLib || {};\n    root.BMapLib.Heatmap = root.BMapLib.Heatmap || factory();\n  }\n})(this, function () {\n  function inherits(subClass, superClass, className) {\n    var key,\n        proto,\n        selfProps = subClass.prototype,\n        clazz = new Function();\n    clazz.prototype = superClass.prototype;\n    proto = subClass.prototype = new clazz();\n\n    for (key in selfProps) {\n      proto[key] = selfProps[key];\n    }\n\n    subClass.prototype.constructor = subClass;\n    subClass.superClass = superClass.prototype; // 类名标识，兼容Class的toString，基本没用\n\n    if (\"string\" == typeof className) {\n      proto._className = className;\n    }\n  }\n\n  ;\n\n  var heatmapFactory = function () {\n    // store object constructor\n    // a heatmap contains a store\n    // the store has to know about the heatmap in order to trigger heatmap updates when datapoints get added\n    var store = function store(hmap) {\n      var _ = {\n        // data is a two dimensional array\n        // a datapoint gets saved as data[point-x-value][point-y-value]\n        // the value at [point-x-value][point-y-value] is the occurrence of the datapoint\n        data: [],\n        // tight coupling of the heatmap object\n        heatmap: hmap\n      }; // the max occurrence - the heatmaps radial gradient alpha transition is based on it\n\n      this.max = 1;\n\n      this.get = function (key) {\n        return _[key];\n      };\n\n      this.set = function (key, value) {\n        _[key] = value;\n      };\n    };\n\n    store.prototype = {\n      // function for adding datapoints to the store\n      // datapoints are usually defined by x and y but could also contain a third parameter which represents the occurrence\n      addDataPoint: function (x, y) {\n        if (x < 0 || y < 0) return;\n        var me = this,\n            heatmap = me.get(\"heatmap\"),\n            data = me.get(\"data\");\n        if (!data[x]) data[x] = [];\n        if (!data[x][y]) data[x][y] = 0; // if count parameter is set increment by count otherwise by 1\n\n        data[x][y] += arguments.length < 3 ? 1 : arguments[2];\n        me.set(\"data\", data); // do we have a new maximum?\n\n        if (me.max < data[x][y]) {\n          // max changed, we need to redraw all existing(lower) datapoints\n          heatmap.get(\"actx\").clearRect(0, 0, heatmap.get(\"width\"), heatmap.get(\"height\"));\n          me.setDataSet({\n            max: data[x][y],\n            data: data\n          }, true);\n          return;\n        }\n\n        heatmap.drawAlpha(x, y, data[x][y], true);\n      },\n      setDataSet: function (obj, internal) {\n        var me = this,\n            heatmap = me.get(\"heatmap\"),\n            data = [],\n            d = obj.data,\n            dlen = d.length; // clear the heatmap before the data set gets drawn\n\n        heatmap.clear();\n        this.max = obj.max; // if a legend is set, update it\n\n        heatmap.get(\"legend\") && heatmap.get(\"legend\").update(obj.max);\n\n        if (internal != null && internal) {\n          for (var one in d) {\n            // jump over undefined indexes\n            if (one === undefined) continue;\n\n            for (var two in d[one]) {\n              if (two === undefined) continue; // if both indexes are defined, push the values into the array\n\n              heatmap.drawAlpha(one, two, d[one][two], false);\n            }\n          }\n        } else {\n          while (dlen--) {\n            var point = d[dlen];\n            heatmap.drawAlpha(point.x, point.y, point.count, false);\n            if (!data[point.x]) data[point.x] = [];\n            if (!data[point.x][point.y]) data[point.x][point.y] = 0;\n            data[point.x][point.y] = point.count;\n          }\n        }\n\n        heatmap.colorize();\n        this.set(\"data\", d);\n      },\n      exportDataSet: function () {\n        var me = this,\n            data = me.get(\"data\"),\n            exportData = [];\n\n        for (var one in data) {\n          // jump over undefined indexes\n          if (one === undefined) continue;\n\n          for (var two in data[one]) {\n            if (two === undefined) continue; // if both indexes are defined, push the values into the array\n\n            exportData.push({\n              x: parseInt(one, 10),\n              y: parseInt(two, 10),\n              count: data[one][two]\n            });\n          }\n        }\n\n        return {\n          max: me.max,\n          data: exportData\n        };\n      },\n      generateRandomDataSet: function (points) {\n        var heatmap = this.get(\"heatmap\"),\n            w = heatmap.get(\"width\"),\n            h = heatmap.get(\"height\");\n        var randomset = {},\n            max = Math.floor(Math.random() * 1000 + 1);\n        randomset.max = max;\n        var data = [];\n\n        while (points--) {\n          data.push({\n            x: Math.floor(Math.random() * w + 1),\n            y: Math.floor(Math.random() * h + 1),\n            count: Math.floor(Math.random() * max + 1)\n          });\n        }\n\n        randomset.data = data;\n        this.setDataSet(randomset);\n      }\n    };\n\n    var legend = function legend(config) {\n      this.config = config;\n      var _ = {\n        element: null,\n        labelsEl: null,\n        gradientCfg: null,\n        ctx: null\n      };\n\n      this.get = function (key) {\n        return _[key];\n      };\n\n      this.set = function (key, value) {\n        _[key] = value;\n      };\n\n      this.init();\n    };\n\n    legend.prototype = {\n      init: function () {\n        var me = this,\n            config = me.config,\n            title = config.title || \"Legend\",\n            position = config.position,\n            offset = config.offset || 10,\n            gconfig = config.gradient,\n            labelsEl = document.createElement(\"ul\"),\n            labelsHtml = \"\",\n            grad,\n            element,\n            gradient,\n            positionCss = \"\";\n        me.processGradientObject(); // Positioning\n        // top or bottom\n\n        if (position.indexOf('t') > -1) {\n          positionCss += 'top:' + offset + 'px;';\n        } else {\n          positionCss += 'bottom:' + offset + 'px;';\n        } // left or right\n\n\n        if (position.indexOf('l') > -1) {\n          positionCss += 'left:' + offset + 'px;';\n        } else {\n          positionCss += 'right:' + offset + 'px;';\n        }\n\n        element = document.createElement(\"div\");\n        element.style.cssText = \"border-radius:5px;position:absolute;\" + positionCss + \"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;\";\n        element.innerHTML = \"<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>\" + title + \"</h3>\"; // create gradient in canvas\n\n        labelsEl.style.cssText = \"position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;\"; // create gradient element\n\n        gradient = document.createElement(\"div\");\n        gradient.style.cssText = [\"position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(\", me.createGradientImage(), \");\"].join(\"\");\n        element.appendChild(labelsEl);\n        element.appendChild(gradient);\n        me.set(\"element\", element);\n        me.set(\"labelsEl\", labelsEl);\n        me.update(1);\n      },\n      processGradientObject: function () {\n        // create array and sort it\n        var me = this,\n            gradientConfig = this.config.gradient,\n            gradientArr = [];\n\n        for (var key in gradientConfig) {\n          if (gradientConfig.hasOwnProperty(key)) {\n            gradientArr.push({\n              stop: key,\n              value: gradientConfig[key]\n            });\n          }\n        }\n\n        gradientArr.sort(function (a, b) {\n          return a.stop - b.stop;\n        });\n        gradientArr.unshift({\n          stop: 0,\n          value: 'rgba(0,0,0,0)'\n        });\n        me.set(\"gradientArr\", gradientArr);\n      },\n      createGradientImage: function () {\n        var me = this,\n            gradArr = me.get(\"gradientArr\"),\n            length = gradArr.length,\n            canvas = document.createElement(\"canvas\"),\n            ctx = canvas.getContext(\"2d\"),\n            grad; // the gradient in the legend including the ticks will be 256x15px\n\n        canvas.width = \"256\";\n        canvas.height = \"15\";\n        grad = ctx.createLinearGradient(0, 5, 256, 10);\n\n        for (var i = 0; i < length; i++) {\n          grad.addColorStop(1 / (length - 1) * i, gradArr[i].value);\n        }\n\n        ctx.fillStyle = grad;\n        ctx.fillRect(0, 5, 256, 10);\n        ctx.strokeStyle = \"black\";\n        ctx.beginPath();\n\n        for (var i = 0; i < length; i++) {\n          ctx.moveTo((1 / (length - 1) * i * 256 >> 0) + .5, 0);\n          ctx.lineTo((1 / (length - 1) * i * 256 >> 0) + .5, i == 0 ? 15 : 5);\n        }\n\n        ctx.moveTo(255.5, 0);\n        ctx.lineTo(255.5, 15);\n        ctx.moveTo(255.5, 4.5);\n        ctx.lineTo(0, 4.5);\n        ctx.stroke(); // we re-use the context for measuring the legends label widths\n\n        me.set(\"ctx\", ctx);\n        return canvas.toDataURL();\n      },\n      getElement: function () {\n        return this.get(\"element\");\n      },\n      update: function (max) {\n        var me = this,\n            gradient = me.get(\"gradientArr\"),\n            ctx = me.get(\"ctx\"),\n            labels = me.get(\"labelsEl\"),\n            labelText,\n            labelsHtml = \"\",\n            offset;\n\n        for (var i = 0; i < gradient.length; i++) {\n          labelText = max * gradient[i].stop >> 0;\n          offset = ctx.measureText(labelText).width / 2 >> 0;\n\n          if (i == 0) {\n            offset = 0;\n          }\n\n          if (i == gradient.length - 1) {\n            offset *= 2;\n          }\n\n          labelsHtml += '<li style=\"position:absolute;left:' + (((1 / (gradient.length - 1) * i * 256 || 0) >> 0) - offset + .5) + 'px\">' + labelText + '</li>';\n        }\n\n        labels.innerHTML = labelsHtml;\n      }\n    }; // heatmap object constructor\n\n    var heatmap = function heatmap(config) {\n      // private variables\n      var _ = {\n        radius: 40,\n        element: {},\n        canvas: {},\n        acanvas: {},\n        ctx: {},\n        actx: {},\n        legend: null,\n        visible: true,\n        width: 0,\n        height: 0,\n        max: false,\n        gradient: false,\n        opacity: 180,\n        premultiplyAlpha: false,\n        bounds: {\n          l: 1000,\n          r: 0,\n          t: 1000,\n          b: 0\n        },\n        debug: false\n      }; // heatmap store containing the datapoints and information about the maximum\n      // accessible via instance.store\n\n      this.store = new store(this);\n\n      this.get = function (key) {\n        return _[key];\n      };\n\n      this.set = function (key, value) {\n        _[key] = value;\n      }; // configure the heatmap when an instance gets created\n\n\n      this.configure(config); // and initialize it\n\n      this.init();\n    }; // public functions\n\n\n    heatmap.prototype = {\n      configure: function (config) {\n        var me = this,\n            rout,\n            rin;\n        me.set(\"radius\", config[\"radius\"] || 40);\n        me.set(\"element\", config.element instanceof Object ? config.element : document.getElementById(config.element));\n        me.set(\"visible\", config.visible != null ? config.visible : true);\n        me.set(\"max\", config.max || false);\n        me.set(\"gradient\", config.gradient || {\n          0.45: \"rgb(0,0,255)\",\n          0.55: \"rgb(0,255,255)\",\n          0.65: \"rgb(0,255,0)\",\n          0.95: \"yellow\",\n          1.0: \"rgb(255,0,0)\"\n        }); // default is the common blue to red gradient\n\n        me.set(\"opacity\", parseInt(255 / (100 / config.opacity), 10) || 180);\n        me.set(\"width\", config.width || 0);\n        me.set(\"height\", config.height || 0);\n        me.set(\"debug\", config.debug);\n\n        if (config.legend) {\n          var legendCfg = config.legend;\n          legendCfg.gradient = me.get(\"gradient\");\n          me.set(\"legend\", new legend(legendCfg));\n        }\n      },\n      resize: function () {\n        var me = this,\n            element = me.get(\"element\"),\n            canvas = me.get(\"canvas\"),\n            acanvas = me.get(\"acanvas\");\n        canvas.width = acanvas.width = me.get(\"width\") || element.style.width.replace(/px/, \"\") || me.getWidth(element);\n        this.set(\"width\", canvas.width);\n        canvas.height = acanvas.height = me.get(\"height\") || element.style.height.replace(/px/, \"\") || me.getHeight(element);\n        this.set(\"height\", canvas.height);\n      },\n      init: function () {\n        var me = this,\n            canvas = document.createElement(\"canvas\"),\n            acanvas = document.createElement(\"canvas\"),\n            ctx = canvas.getContext(\"2d\"),\n            actx = acanvas.getContext(\"2d\"),\n            element = me.get(\"element\");\n        me.initColorPalette();\n        me.set(\"canvas\", canvas);\n        me.set(\"ctx\", ctx);\n        me.set(\"acanvas\", acanvas);\n        me.set(\"actx\", actx);\n        me.resize();\n        canvas.style.cssText = acanvas.style.cssText = \"position:absolute;top:0;left:0;z-index:10000000;\";\n        if (!me.get(\"visible\")) canvas.style.display = \"none\";\n        element.appendChild(canvas);\n\n        if (me.get(\"legend\")) {\n          element.appendChild(me.get(\"legend\").getElement());\n        } // debugging purposes only\n\n\n        if (me.get(\"debug\")) document.body.appendChild(acanvas);\n        actx.shadowOffsetX = 15000;\n        actx.shadowOffsetY = 15000;\n        actx.shadowBlur = 15;\n      },\n      initColorPalette: function () {\n        var me = this,\n            canvas = document.createElement(\"canvas\"),\n            gradient = me.get(\"gradient\"),\n            ctx,\n            grad,\n            testData;\n        canvas.width = \"1\";\n        canvas.height = \"256\";\n        ctx = canvas.getContext(\"2d\");\n        grad = ctx.createLinearGradient(0, 0, 1, 256); // Test how the browser renders alpha by setting a partially transparent pixel\n        // and reading the result.  A good browser will return a value reasonably close\n        // to what was set.  Some browsers (e.g. on Android) will return a ridiculously wrong value.\n\n        testData = ctx.getImageData(0, 0, 1, 1);\n        testData.data[0] = testData.data[3] = 64; // 25% red & alpha\n\n        testData.data[1] = testData.data[2] = 0; // 0% blue & green\n\n        ctx.putImageData(testData, 0, 0);\n        testData = ctx.getImageData(0, 0, 1, 1);\n        me.set(\"premultiplyAlpha\", testData.data[0] < 60 || testData.data[0] > 70);\n\n        for (var x in gradient) {\n          grad.addColorStop(x, gradient[x]);\n        }\n\n        ctx.fillStyle = grad;\n        ctx.fillRect(0, 0, 1, 256);\n        me.set(\"gradient\", ctx.getImageData(0, 0, 1, 256).data);\n      },\n      getWidth: function (element) {\n        var width = element.offsetWidth;\n\n        if (element.style.paddingLeft) {\n          width += element.style.paddingLeft;\n        }\n\n        if (element.style.paddingRight) {\n          width += element.style.paddingRight;\n        }\n\n        return width;\n      },\n      getHeight: function (element) {\n        var height = element.offsetHeight;\n\n        if (element.style.paddingTop) {\n          height += element.style.paddingTop;\n        }\n\n        if (element.style.paddingBottom) {\n          height += element.style.paddingBottom;\n        }\n\n        return height;\n      },\n      colorize: function (x, y) {\n        // get the private variables\n        var me = this,\n            width = me.get(\"width\"),\n            radius = me.get(\"radius\"),\n            height = me.get(\"height\"),\n            actx = me.get(\"actx\"),\n            ctx = me.get(\"ctx\"),\n            x2 = radius * 3,\n            premultiplyAlpha = me.get(\"premultiplyAlpha\"),\n            palette = me.get(\"gradient\"),\n            opacity = me.get(\"opacity\"),\n            bounds = me.get(\"bounds\"),\n            left,\n            top,\n            bottom,\n            right,\n            image,\n            length,\n            alpha,\n            offset,\n            finalAlpha;\n\n        if (x != null && y != null) {\n          if (x + x2 > width) {\n            x = width - x2;\n          }\n\n          if (x < 0) {\n            x = 0;\n          }\n\n          if (y < 0) {\n            y = 0;\n          }\n\n          if (y + x2 > height) {\n            y = height - x2;\n          }\n\n          left = x;\n          top = y;\n          right = x + x2;\n          bottom = y + x2;\n        } else {\n          if (bounds['l'] < 0) {\n            left = 0;\n          } else {\n            left = bounds['l'];\n          }\n\n          if (bounds['r'] > width) {\n            right = width;\n          } else {\n            right = bounds['r'];\n          }\n\n          if (bounds['t'] < 0) {\n            top = 0;\n          } else {\n            top = bounds['t'];\n          }\n\n          if (bounds['b'] > height) {\n            bottom = height;\n          } else {\n            bottom = bounds['b'];\n          }\n        }\n\n        image = actx.getImageData(left, top, right - left, bottom - top);\n        length = image.data.length; // loop thru the area\n\n        for (var i = 3; i < length; i += 4) {\n          // [0] -> r, [1] -> g, [2] -> b, [3] -> alpha\n          alpha = image.data[i], offset = alpha * 4;\n          if (!offset) continue; // we ve started with i=3\n          // set the new r, g and b values\n\n          finalAlpha = alpha < opacity ? alpha : opacity;\n          image.data[i - 3] = palette[offset];\n          image.data[i - 2] = palette[offset + 1];\n          image.data[i - 1] = palette[offset + 2];\n\n          if (premultiplyAlpha) {\n            // To fix browsers that premultiply incorrectly, we'll pass in a value scaled\n            // appropriately so when the multiplication happens the correct value will result.\n            image.data[i - 3] /= 255 / finalAlpha;\n            image.data[i - 2] /= 255 / finalAlpha;\n            image.data[i - 1] /= 255 / finalAlpha;\n          } // we want the heatmap to have a gradient from transparent to the colors\n          // as long as alpha is lower than the defined opacity (maximum), we'll use the alpha value\n\n\n          image.data[i] = finalAlpha;\n        } // the rgb data manipulation didn't affect the ImageData object(defined on the top)\n        // after the manipulation process we have to set the manipulated data to the ImageData object\n        // image.data = imageData;\n\n\n        ctx.putImageData(image, left, top);\n      },\n      drawAlpha: function (x, y, count, colorize) {\n        // storing the variables because they will be often used\n        var me = this,\n            radius = me.get(\"radius\"),\n            ctx = me.get(\"actx\"),\n            max = me.get(\"max\"),\n            bounds = me.get(\"bounds\"),\n            xb = x - 1.5 * radius >> 0,\n            yb = y - 1.5 * radius >> 0,\n            xc = x + 1.5 * radius >> 0,\n            yc = y + 1.5 * radius >> 0;\n        ctx.shadowColor = 'rgba(0,0,0,' + (count ? count / me.store.max : '0.1') + ')';\n        ctx.shadowOffsetX = 15000;\n        ctx.shadowOffsetY = 15000;\n        ctx.shadowBlur = 15;\n        ctx.beginPath();\n        ctx.arc(x - 15000, y - 15000, radius, 0, Math.PI * 2, true);\n        ctx.closePath();\n        ctx.fill();\n\n        if (colorize) {\n          // finally colorize the area\n          me.colorize(xb, yb);\n        } else {\n          // or update the boundaries for the area that then should be colorized\n          if (xb < bounds[\"l\"]) {\n            bounds[\"l\"] = xb;\n          }\n\n          if (yb < bounds[\"t\"]) {\n            bounds[\"t\"] = yb;\n          }\n\n          if (xc > bounds['r']) {\n            bounds['r'] = xc;\n          }\n\n          if (yc > bounds['b']) {\n            bounds['b'] = yc;\n          }\n        }\n      },\n      toggleDisplay: function () {\n        var me = this,\n            visible = me.get(\"visible\"),\n            canvas = me.get(\"canvas\");\n        if (!visible) canvas.style.display = \"block\";else canvas.style.display = \"none\";\n        me.set(\"visible\", !visible);\n      },\n      // dataURL export\n      getImageData: function () {\n        return this.get(\"canvas\").toDataURL();\n      },\n      clear: function () {\n        var me = this,\n            w = me.get(\"width\"),\n            h = me.get(\"height\");\n        me.store.set(\"data\", []); // @TODO: reset stores max to 1\n        //me.store.max = 1;\n\n        me.get(\"ctx\").clearRect(0, 0, w, h);\n        me.get(\"actx\").clearRect(0, 0, w, h);\n      },\n      cleanup: function () {\n        var me = this;\n        me.get(\"element\").removeChild(me.get(\"canvas\"));\n      }\n    };\n    return {\n      create: function (config) {\n        return new heatmap(config);\n      },\n      util: {\n        mousePosition: function (ev) {\n          // this doesn't work right\n          // rather use\n\n          /*\n              // this = element to observe\n              var x = ev.pageX - this.offsetLeft;\n              var y = ev.pageY - this.offsetTop;\n           */\n          var x, y;\n\n          if (ev.layerX) {\n            // Firefox\n            x = ev.layerX;\n            y = ev.layerY;\n          } else if (ev.offsetX) {\n            // Opera\n            x = ev.offsetX;\n            y = ev.offsetY;\n          }\n\n          if (typeof x == 'undefined') return;\n          return [x, y];\n        }\n      }\n    };\n  }();\n\n  var HeatmapOverlay = function (opts) {\n    try {\n      BMap;\n    } catch (e) {\n      throw Error('Baidu Map JS API is not ready yet!');\n    }\n\n    if (!HeatmapOverlay._isExtended) {\n      HeatmapOverlay._isExtended = true;\n      inherits(HeatmapOverlay, BMap.Overlay, \"HeatmapOverlay\");\n      var newHeatmap = new HeatmapOverlay(opts);\n      this.__proto__ = newHeatmap.__proto__;\n    } // HeatmapOverlay.prototype = new BMap.Overlay();\n\n\n    this.conf = opts;\n    this.heatmap = null;\n    this.latlngs = [];\n    this.bounds = null;\n    this._moveendHandler = this._moveendHandler.bind(this);\n  };\n\n  HeatmapOverlay.prototype.initialize = function (map) {\n    this._map = map;\n    var el = document.createElement(\"div\");\n    el.style.position = \"absolute\";\n    el.style.top = 0;\n    el.style.left = 0;\n    el.style.border = 0;\n    el.style.width = this._map.getSize().width + \"px\";\n    el.style.height = this._map.getSize().height + \"px\";\n    this.conf.element = el;\n    map.getPanes().mapPane.appendChild(el);\n    this.heatmap = heatmapFactory.create(this.conf);\n    this._div = el;\n    return el;\n  };\n\n  HeatmapOverlay.prototype.draw = function () {\n    var currentBounds = this._map.getBounds();\n\n    if (currentBounds.equals(this.bounds)) {\n      return;\n    }\n\n    this.bounds = currentBounds;\n\n    var ne = this._map.pointToOverlayPixel(currentBounds.getNorthEast()),\n        sw = this._map.pointToOverlayPixel(currentBounds.getSouthWest());\n\n    if (!ne || !sw) {\n      return;\n    }\n\n    var topY = ne.y,\n        leftX = sw.x,\n        h = sw.y - ne.y,\n        w = ne.x - sw.x;\n    this.conf.element.style.left = leftX + 'px';\n    this.conf.element.style.top = topY + 'px';\n    this.conf.element.style.width = w + 'px';\n    this.conf.element.style.height = h + 'px';\n    this.heatmap.store.get(\"heatmap\").resize();\n\n    if (this.latlngs.length > 0) {\n      this.heatmap.clear();\n      var len = this.latlngs.length;\n      var d = {\n        max: this.heatmap.store.max,\n        data: []\n      };\n\n      while (len--) {\n        var latlng = this.latlngs[len].latlng;\n\n        if (!currentBounds.containsPoint(latlng)) {\n          continue;\n        }\n\n        var divPixel = this._map.pointToOverlayPixel(latlng),\n            screenPixel = new BMap.Pixel(divPixel.x - leftX, divPixel.y - topY);\n\n        var roundedPoint = this.pixelTransform(screenPixel);\n        d.data.push({\n          x: roundedPoint.x,\n          y: roundedPoint.y,\n          count: this.latlngs[len].c\n        });\n      }\n\n      this.heatmap.store.setDataSet(d);\n    }\n  };\n\n  HeatmapOverlay.prototype.pixelTransform = function (p) {\n    var w = this.heatmap.get(\"width\"),\n        h = this.heatmap.get(\"height\");\n\n    while (p.x < 0) {\n      p.x += w;\n    }\n\n    while (p.x > w) {\n      p.x -= w;\n    }\n\n    while (p.y < 0) {\n      p.y += h;\n    }\n\n    while (p.y > h) {\n      p.y -= h;\n    }\n\n    p.x = p.x >> 0;\n    p.y = p.y >> 0;\n    return p;\n  };\n\n  HeatmapOverlay.prototype._moveendHandler = function (e) {\n    this.setDataSet(this._data);\n    delete this._data;\n\n    this._map.removeEventListener('moveend', this._moveendHandler);\n  };\n\n  HeatmapOverlay.prototype.setDataSet = function (data) {\n    if (!this._map) {\n      return;\n    }\n\n    var currentBounds = this._map.getBounds();\n\n    var ne = this._map.pointToOverlayPixel(currentBounds.getNorthEast()),\n        sw = this._map.pointToOverlayPixel(currentBounds.getSouthWest());\n\n    if (!ne || !sw) {\n      this._data = data;\n\n      this._map.addEventListener('moveend', this._moveendHandler);\n    }\n\n    var mapdata = {\n      max: data.max,\n      data: []\n    };\n    var d = data.data,\n        dlen = d.length;\n    this.latlngs = [];\n\n    while (dlen--) {\n      var latlng = new BMap.Point(d[dlen].lng, d[dlen].lat);\n      this.latlngs.push({\n        latlng: latlng,\n        c: d[dlen].count\n      });\n\n      if (!currentBounds.containsPoint(latlng)) {\n        continue;\n      }\n\n      var divPixel = this._map.pointToOverlayPixel(latlng),\n          leftX = this._map.pointToOverlayPixel(currentBounds.getSouthWest()).x,\n          topY = this._map.pointToOverlayPixel(currentBounds.getNorthEast()).y,\n          screenPixel = new BMap.Pixel(divPixel.x - leftX, divPixel.y - topY);\n\n      var point = this.pixelTransform(screenPixel);\n      mapdata.data.push({\n        x: point.x,\n        y: point.y,\n        count: d[dlen].count\n      });\n    }\n\n    this.heatmap.clear();\n    this.heatmap.store.setDataSet(mapdata);\n  };\n\n  HeatmapOverlay.prototype.addDataPoint = function (lng, lat, count) {\n    var latlng = new BMap.Point(lng, lat),\n        point = this.pixelTransform(this._map.pointToOverlayPixel(latlng));\n    this.heatmap.store.addDataPoint(point.x, point.y, count);\n    this.latlngs.push({\n      latlng: latlng,\n      c: count\n    });\n  };\n\n  HeatmapOverlay.prototype.toggle = function () {\n    this.heatmap.toggleDisplay();\n  };\n\n  return HeatmapOverlay;\n});","map":{"version":3,"names":["root","factory","exports","module","define","amd","BMapLib","Heatmap","inherits","subClass","superClass","className","key","proto","selfProps","prototype","clazz","Function","constructor","_className","heatmapFactory","store","hmap","_","data","heatmap","max","get","set","value","addDataPoint","x","y","me","arguments","length","clearRect","setDataSet","drawAlpha","obj","internal","d","dlen","clear","update","one","undefined","two","point","count","colorize","exportDataSet","exportData","push","parseInt","generateRandomDataSet","points","w","h","randomset","Math","floor","random","legend","config","element","labelsEl","gradientCfg","ctx","init","title","position","offset","gconfig","gradient","document","createElement","labelsHtml","grad","positionCss","processGradientObject","indexOf","style","cssText","innerHTML","createGradientImage","join","appendChild","gradientConfig","gradientArr","hasOwnProperty","stop","sort","a","b","unshift","gradArr","canvas","getContext","width","height","createLinearGradient","i","addColorStop","fillStyle","fillRect","strokeStyle","beginPath","moveTo","lineTo","stroke","toDataURL","getElement","labels","labelText","measureText","radius","acanvas","actx","visible","opacity","premultiplyAlpha","bounds","l","r","t","debug","configure","rout","rin","Object","getElementById","legendCfg","resize","replace","getWidth","getHeight","initColorPalette","display","body","shadowOffsetX","shadowOffsetY","shadowBlur","testData","getImageData","putImageData","offsetWidth","paddingLeft","paddingRight","offsetHeight","paddingTop","paddingBottom","x2","palette","left","top","bottom","right","image","alpha","finalAlpha","xb","yb","xc","yc","shadowColor","arc","PI","closePath","fill","toggleDisplay","cleanup","removeChild","create","util","mousePosition","ev","layerX","layerY","offsetX","offsetY","HeatmapOverlay","opts","BMap","e","Error","_isExtended","Overlay","newHeatmap","__proto__","conf","latlngs","_moveendHandler","bind","initialize","map","_map","el","border","getSize","getPanes","mapPane","_div","draw","currentBounds","getBounds","equals","ne","pointToOverlayPixel","getNorthEast","sw","getSouthWest","topY","leftX","len","latlng","containsPoint","divPixel","screenPixel","Pixel","roundedPoint","pixelTransform","c","p","_data","removeEventListener","addEventListener","mapdata","Point","lng","lat","toggle"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/bmaplib.heatmap/index.js"],"sourcesContent":["(function (root, factory) {  \n    if (typeof exports === 'object') {  \n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {  \n        define(factory);  \n    } else {\n        root.BMapLib = root.BMapLib || {};\n        root.BMapLib.Heatmap = root.BMapLib.Heatmap || factory();  \n    }  \n})(this, function() {\n    function inherits (subClass, superClass, className) {\n        var key, proto,\n            selfProps = subClass.prototype,\n            clazz = new Function();\n\n        clazz.prototype = superClass.prototype;\n        proto = subClass.prototype = new clazz();\n        for (key in selfProps) {\n            proto[key] = selfProps[key];\n        }\n        subClass.prototype.constructor = subClass;\n        subClass.superClass = superClass.prototype;\n\n        // 类名标识，兼容Class的toString，基本没用\n        if (\"string\" == typeof className) {\n            proto._className = className;\n        }\n    };\n    var heatmapFactory = (function(){\n        // store object constructor\n        // a heatmap contains a store\n        // the store has to know about the heatmap in order to trigger heatmap updates when datapoints get added\n        var store = function store(hmap){\n\n            var _ = {\n                // data is a two dimensional array\n                // a datapoint gets saved as data[point-x-value][point-y-value]\n                // the value at [point-x-value][point-y-value] is the occurrence of the datapoint\n                data: [],\n                // tight coupling of the heatmap object\n                heatmap: hmap\n            };\n            // the max occurrence - the heatmaps radial gradient alpha transition is based on it\n            this.max = 1;\n\n            this.get = function(key){\n                return _[key];\n            };\n            this.set = function(key, value){\n                _[key] = value;\n            };\n        }\n\n        store.prototype = {\n            // function for adding datapoints to the store\n            // datapoints are usually defined by x and y but could also contain a third parameter which represents the occurrence\n            addDataPoint: function(x, y){\n                if(x < 0 || y < 0)\n                    return;\n\n                var me = this,\n                    heatmap = me.get(\"heatmap\"),\n                    data = me.get(\"data\");\n\n                if(!data[x])\n                    data[x] = [];\n\n                if(!data[x][y])\n                    data[x][y] = 0;\n\n                // if count parameter is set increment by count otherwise by 1\n                data[x][y]+=(arguments.length<3)?1:arguments[2];\n                \n                me.set(\"data\", data);\n                // do we have a new maximum?\n                if(me.max < data[x][y]){\n                    // max changed, we need to redraw all existing(lower) datapoints\n                    heatmap.get(\"actx\").clearRect(0,0,heatmap.get(\"width\"),heatmap.get(\"height\"));\n                    me.setDataSet({ max: data[x][y], data: data }, true);\n                    return;\n                }\n                heatmap.drawAlpha(x, y, data[x][y], true);\n            },\n            setDataSet: function(obj, internal){\n                var me = this,\n                    heatmap = me.get(\"heatmap\"),\n                    data = [],\n                    d = obj.data,\n                    dlen = d.length;\n                // clear the heatmap before the data set gets drawn\n                heatmap.clear();\n                this.max = obj.max;\n                // if a legend is set, update it\n                heatmap.get(\"legend\") && heatmap.get(\"legend\").update(obj.max);\n                \n                if(internal != null && internal){\n                    for(var one in d){\n                        // jump over undefined indexes\n                        if(one === undefined)\n                            continue;\n                        for(var two in d[one]){\n                            if(two === undefined)\n                                continue;\n                            // if both indexes are defined, push the values into the array\n                            heatmap.drawAlpha(one, two, d[one][two], false);   \n                        }\n                    }\n                }else{\n                    while(dlen--){\n                        var point = d[dlen];\n                        heatmap.drawAlpha(point.x, point.y, point.count, false);\n                        if(!data[point.x])\n                            data[point.x] = [];\n\n                        if(!data[point.x][point.y])\n                            data[point.x][point.y] = 0;\n\n                        data[point.x][point.y] = point.count;\n                    }\n                }\n                heatmap.colorize();\n                this.set(\"data\", d);\n            },\n            exportDataSet: function(){\n                var me = this,\n                    data = me.get(\"data\"),\n                    exportData = [];\n\n                for(var one in data){\n                    // jump over undefined indexes\n                    if(one === undefined)\n                        continue;\n                    for(var two in data[one]){\n                        if(two === undefined)\n                            continue;\n                        // if both indexes are defined, push the values into the array\n                        exportData.push({x: parseInt(one, 10), y: parseInt(two, 10), count: data[one][two]});\n                    }\n                }\n\n                return { max: me.max, data: exportData };\n            },\n            generateRandomDataSet: function(points){\n                var heatmap = this.get(\"heatmap\"),\n                w = heatmap.get(\"width\"),\n                h = heatmap.get(\"height\");\n                var randomset = {},\n                max = Math.floor(Math.random()*1000+1);\n                randomset.max = max;\n                var data = [];\n                while(points--){\n                    data.push({x: Math.floor(Math.random()*w+1), y: Math.floor(Math.random()*h+1), count: Math.floor(Math.random()*max+1)});\n                }\n                randomset.data = data;\n                this.setDataSet(randomset);\n            }\n        };\n\n        var legend = function legend(config){\n            this.config = config;\n\n            var _ = {\n                element: null,\n                labelsEl: null,\n                gradientCfg: null,\n                ctx: null\n            };\n            this.get = function(key){\n                return _[key];\n            };\n            this.set = function(key, value){\n                _[key] = value;\n            };\n            this.init();\n        };\n        legend.prototype = {\n            init: function(){\n                var me = this,\n                    config = me.config,\n                    title = config.title || \"Legend\",\n                    position = config.position,\n                    offset = config.offset || 10,\n                    gconfig = config.gradient,\n                    labelsEl = document.createElement(\"ul\"),\n                    labelsHtml = \"\",\n                    grad, element, gradient, positionCss = \"\";\n\n                me.processGradientObject();\n                \n                // Positioning\n\n                // top or bottom\n                if(position.indexOf('t') > -1){\n                    positionCss += 'top:'+offset+'px;';\n                }else{\n                    positionCss += 'bottom:'+offset+'px;';\n                }\n\n                // left or right\n                if(position.indexOf('l') > -1){\n                    positionCss += 'left:'+offset+'px;';\n                }else{\n                    positionCss += 'right:'+offset+'px;';\n                }\n\n                element = document.createElement(\"div\");\n                element.style.cssText = \"border-radius:5px;position:absolute;\"+positionCss+\"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;\";\n                element.innerHTML = \"<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>\"+title+\"</h3>\";\n                // create gradient in canvas\n                labelsEl.style.cssText = \"position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;\";\n                \n\n                // create gradient element\n                gradient = document.createElement(\"div\");\n                gradient.style.cssText = [\"position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(\",me.createGradientImage(),\");\"].join(\"\");\n\n                element.appendChild(labelsEl);\n                element.appendChild(gradient);\n                \n                me.set(\"element\", element);\n                me.set(\"labelsEl\", labelsEl);\n\n                me.update(1);\n            },\n            processGradientObject: function(){\n                // create array and sort it\n                var me = this,\n                    gradientConfig = this.config.gradient,\n                    gradientArr = [];\n\n                for(var key in gradientConfig){\n                    if(gradientConfig.hasOwnProperty(key)){\n                        gradientArr.push({ stop: key, value: gradientConfig[key] });\n                    }\n                }\n                gradientArr.sort(function(a, b){\n                    return (a.stop - b.stop);\n                });\n                gradientArr.unshift({ stop: 0, value: 'rgba(0,0,0,0)' });\n\n                me.set(\"gradientArr\", gradientArr);\n            },\n            createGradientImage: function(){\n                var me = this,\n                    gradArr = me.get(\"gradientArr\"),\n                    length = gradArr.length,\n                    canvas = document.createElement(\"canvas\"),\n                    ctx = canvas.getContext(\"2d\"),\n                    grad;\n                // the gradient in the legend including the ticks will be 256x15px\n                canvas.width = \"256\";\n                canvas.height = \"15\";\n\n                grad = ctx.createLinearGradient(0,5,256,10);\n\n                for(var i = 0; i < length; i++){\n                    grad.addColorStop(1/(length-1) * i, gradArr[i].value);\n                }\n\n                ctx.fillStyle = grad;\n                ctx.fillRect(0,5,256,10);\n                ctx.strokeStyle = \"black\";\n                ctx.beginPath();\n\n                for(var i = 0; i < length; i++){\n                    ctx.moveTo(((1/(length-1)*i*256) >> 0)+.5, 0);\n                    ctx.lineTo(((1/(length-1)*i*256) >> 0)+.5, (i==0)?15:5);\n                }\n                ctx.moveTo(255.5, 0);\n                ctx.lineTo(255.5, 15);\n                ctx.moveTo(255.5, 4.5);\n                ctx.lineTo(0, 4.5);\n                \n                ctx.stroke();\n\n                // we re-use the context for measuring the legends label widths\n                me.set(\"ctx\", ctx);\n\n                return canvas.toDataURL();\n            },\n            getElement: function(){\n                return this.get(\"element\");\n            },\n            update: function(max){\n                var me = this,\n                    gradient = me.get(\"gradientArr\"),\n                    ctx = me.get(\"ctx\"),\n                    labels = me.get(\"labelsEl\"),\n                    labelText, labelsHtml = \"\", offset;\n\n                for(var i = 0; i < gradient.length; i++){\n\n                    labelText = max*gradient[i].stop >> 0;\n                    offset = (ctx.measureText(labelText).width/2) >> 0;\n\n                    if(i == 0){\n                        offset = 0;\n                    }\n                    if(i == gradient.length-1){\n                        offset *= 2;\n                    }\n                    labelsHtml += '<li style=\"position:absolute;left:'+(((((1/(gradient.length-1)*i*256) || 0)) >> 0)-offset+.5)+'px\">'+labelText+'</li>';\n                }       \n                labels.innerHTML = labelsHtml;\n            }\n        };\n\n        // heatmap object constructor\n        var heatmap = function heatmap(config){\n            // private variables\n            var _ = {\n                radius : 40,\n                element : {},\n                canvas : {},\n                acanvas: {},\n                ctx : {},\n                actx : {},\n                legend: null,\n                visible : true,\n                width : 0,\n                height : 0,\n                max : false,\n                gradient : false,\n                opacity: 180,\n                premultiplyAlpha: false,\n                bounds: {\n                    l: 1000,\n                    r: 0,\n                    t: 1000,\n                    b: 0\n                },\n                debug: false\n            };\n            // heatmap store containing the datapoints and information about the maximum\n            // accessible via instance.store\n            this.store = new store(this);\n\n            this.get = function(key){\n                return _[key];\n            };\n            this.set = function(key, value){\n                _[key] = value;\n            };\n            // configure the heatmap when an instance gets created\n            this.configure(config);\n            // and initialize it\n            this.init();\n        };\n\n        // public functions\n        heatmap.prototype = {\n            configure: function(config){\n                var me = this,\n                    rout, rin;\n\n                me.set(\"radius\", config[\"radius\"] || 40);\n                me.set(\"element\", (config.element instanceof Object)?config.element:document.getElementById(config.element));\n                me.set(\"visible\", (config.visible != null)?config.visible:true);\n                me.set(\"max\", config.max || false);\n                me.set(\"gradient\", config.gradient || { 0.45: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,255)\", 0.65: \"rgb(0,255,0)\", 0.95: \"yellow\", 1.0: \"rgb(255,0,0)\"});    // default is the common blue to red gradient\n                me.set(\"opacity\", parseInt(255/(100/config.opacity), 10) || 180);\n                me.set(\"width\", config.width || 0);\n                me.set(\"height\", config.height || 0);\n                me.set(\"debug\", config.debug);\n\n                if(config.legend){\n                    var legendCfg = config.legend;\n                    legendCfg.gradient = me.get(\"gradient\");\n                    me.set(\"legend\", new legend(legendCfg));\n                }\n                    \n            },\n            resize: function () {\n                var me = this,\n                    element = me.get(\"element\"),\n                    canvas = me.get(\"canvas\"),\n                    acanvas = me.get(\"acanvas\");\n                canvas.width = acanvas.width = me.get(\"width\") || element.style.width.replace(/px/, \"\") || me.getWidth(element);\n                this.set(\"width\", canvas.width);\n                canvas.height = acanvas.height = me.get(\"height\") || element.style.height.replace(/px/, \"\") || me.getHeight(element);\n                this.set(\"height\", canvas.height);\n            },\n\n            init: function(){\n                var me = this,\n                    canvas = document.createElement(\"canvas\"),\n                    acanvas = document.createElement(\"canvas\"),\n                    ctx = canvas.getContext(\"2d\"),\n                    actx = acanvas.getContext(\"2d\"),\n                    element = me.get(\"element\");\n\n                \n                me.initColorPalette();\n\n                me.set(\"canvas\", canvas);\n                me.set(\"ctx\", ctx);\n                me.set(\"acanvas\", acanvas);\n                me.set(\"actx\", actx);\n\n                me.resize();\n                canvas.style.cssText = acanvas.style.cssText = \"position:absolute;top:0;left:0;z-index:10000000;\";\n                \n                if(!me.get(\"visible\"))\n                    canvas.style.display = \"none\";\n\n                element.appendChild(canvas);\n                if(me.get(\"legend\")){\n                    element.appendChild(me.get(\"legend\").getElement());\n                }\n                \n                // debugging purposes only\n                if(me.get(\"debug\"))\n                    document.body.appendChild(acanvas);\n                \n                actx.shadowOffsetX = 15000; \n                actx.shadowOffsetY = 15000; \n                actx.shadowBlur = 15; \n            },\n            initColorPalette: function(){\n\n                var me = this,\n                    canvas = document.createElement(\"canvas\"),\n                    gradient = me.get(\"gradient\"),\n                    ctx, grad, testData;\n\n                canvas.width = \"1\";\n                canvas.height = \"256\";\n                ctx = canvas.getContext(\"2d\");\n                grad = ctx.createLinearGradient(0,0,1,256);\n\n                // Test how the browser renders alpha by setting a partially transparent pixel\n                // and reading the result.  A good browser will return a value reasonably close\n                // to what was set.  Some browsers (e.g. on Android) will return a ridiculously wrong value.\n                testData = ctx.getImageData(0,0,1,1);\n                testData.data[0] = testData.data[3] = 64; // 25% red & alpha\n                testData.data[1] = testData.data[2] = 0; // 0% blue & green\n                ctx.putImageData(testData, 0, 0);\n                testData = ctx.getImageData(0,0,1,1);\n                me.set(\"premultiplyAlpha\", (testData.data[0] < 60 || testData.data[0] > 70));\n                \n                for(var x in gradient){\n                    grad.addColorStop(x, gradient[x]);\n                }\n\n                ctx.fillStyle = grad;\n                ctx.fillRect(0,0,1,256);\n\n                me.set(\"gradient\", ctx.getImageData(0,0,1,256).data);\n            },\n            getWidth: function(element){\n                var width = element.offsetWidth;\n                if(element.style.paddingLeft){\n                    width+=element.style.paddingLeft;\n                }\n                if(element.style.paddingRight){\n                    width+=element.style.paddingRight;\n                }\n\n                return width;\n            },\n            getHeight: function(element){\n                var height = element.offsetHeight;\n                if(element.style.paddingTop){\n                    height+=element.style.paddingTop;\n                }\n                if(element.style.paddingBottom){\n                    height+=element.style.paddingBottom;\n                }\n\n                return height;\n            },\n            colorize: function(x, y){\n                // get the private variables\n                var me = this,\n                    width = me.get(\"width\"),\n                    radius = me.get(\"radius\"),\n                    height = me.get(\"height\"),\n                    actx = me.get(\"actx\"),\n                    ctx = me.get(\"ctx\"),\n                    x2 = radius * 3,\n                    premultiplyAlpha = me.get(\"premultiplyAlpha\"),\n                    palette = me.get(\"gradient\"),\n                    opacity = me.get(\"opacity\"),\n                    bounds = me.get(\"bounds\"),\n                    left, top, bottom, right, \n                    image, length, alpha, offset, finalAlpha;\n                \n                if(x != null && y != null){\n                    if(x+x2>width){\n                        x=width-x2;\n                    }\n                    if(x<0){\n                        x=0;\n                    }\n                    if(y<0){\n                        y=0;\n                    }\n                    if(y+x2>height){\n                        y=height-x2;\n                    }\n                    left = x;\n                    top = y;\n                    right = x + x2;\n                    bottom = y + x2;\n\n                }else{\n                    if(bounds['l'] < 0){\n                        left = 0;\n                    }else{\n                        left = bounds['l'];\n                    }\n                    if(bounds['r'] > width){\n                        right = width;\n                    }else{\n                        right = bounds['r'];\n                    }\n                    if(bounds['t'] < 0){\n                        top = 0;\n                    }else{\n                        top = bounds['t'];\n                    }\n                    if(bounds['b'] > height){\n                        bottom = height;\n                    }else{\n                        bottom = bounds['b'];\n                    }    \n                }\n\n                image = actx.getImageData(left, top, right-left, bottom-top);\n                length = image.data.length;\n                // loop thru the area\n                for(var i=3; i < length; i+=4){\n\n                    // [0] -> r, [1] -> g, [2] -> b, [3] -> alpha\n                    alpha = image.data[i],\n                    offset = alpha*4;\n\n                    if(!offset)\n                        continue;\n\n                    // we ve started with i=3\n                    // set the new r, g and b values\n                    finalAlpha = (alpha < opacity)?alpha:opacity;\n                    image.data[i-3]=palette[offset];\n                    image.data[i-2]=palette[offset+1];\n                    image.data[i-1]=palette[offset+2];\n                    \n                    if (premultiplyAlpha) {\n                    // To fix browsers that premultiply incorrectly, we'll pass in a value scaled\n                    // appropriately so when the multiplication happens the correct value will result.\n                    image.data[i-3] /= 255/finalAlpha;\n                    image.data[i-2] /= 255/finalAlpha;\n                    image.data[i-1] /= 255/finalAlpha;\n                    }\n                    \n                    // we want the heatmap to have a gradient from transparent to the colors\n                    // as long as alpha is lower than the defined opacity (maximum), we'll use the alpha value\n                    image.data[i] = finalAlpha;\n                }\n                // the rgb data manipulation didn't affect the ImageData object(defined on the top)\n                // after the manipulation process we have to set the manipulated data to the ImageData object\n                // image.data = imageData;\n                ctx.putImageData(image, left, top);\n            },\n            drawAlpha: function(x, y, count, colorize){\n                // storing the variables because they will be often used\n                var me = this,\n                    radius = me.get(\"radius\"),\n                    ctx = me.get(\"actx\"),\n                    max = me.get(\"max\"),\n                    bounds = me.get(\"bounds\"),\n                    xb = x - (1.5 * radius) >> 0, yb = y - (1.5 * radius) >> 0,\n                    xc = x + (1.5 * radius) >> 0, yc = y + (1.5 * radius) >> 0;\n\n                ctx.shadowColor = ('rgba(0,0,0,'+((count)?(count/me.store.max):'0.1')+')');\n\n                ctx.shadowOffsetX = 15000; \n                ctx.shadowOffsetY = 15000; \n                ctx.shadowBlur = 15; \n\n                ctx.beginPath();\n                ctx.arc(x - 15000, y - 15000, radius, 0, Math.PI * 2, true);\n                ctx.closePath();\n                ctx.fill();\n                if(colorize){\n                    // finally colorize the area\n                    me.colorize(xb,yb);\n                }else{\n                    // or update the boundaries for the area that then should be colorized\n                    if(xb < bounds[\"l\"]){\n                        bounds[\"l\"] = xb;\n                    }\n                    if(yb < bounds[\"t\"]){\n                        bounds[\"t\"] = yb;\n                    }\n                    if(xc > bounds['r']){\n                        bounds['r'] = xc;\n                    }\n                    if(yc > bounds['b']){\n                        bounds['b'] = yc;\n                    }\n                }\n            },\n            toggleDisplay: function(){\n                var me = this,\n                    visible = me.get(\"visible\"),\n                canvas = me.get(\"canvas\");\n\n                if(!visible)\n                    canvas.style.display = \"block\";\n                else\n                    canvas.style.display = \"none\";\n\n                me.set(\"visible\", !visible);\n            },\n            // dataURL export\n            getImageData: function(){\n                return this.get(\"canvas\").toDataURL();\n            },\n            clear: function(){\n                var me = this,\n                    w = me.get(\"width\"),\n                    h = me.get(\"height\");\n\n                me.store.set(\"data\",[]);\n                // @TODO: reset stores max to 1\n                //me.store.max = 1;\n                me.get(\"ctx\").clearRect(0,0,w,h);\n                me.get(\"actx\").clearRect(0,0,w,h);\n            },\n            cleanup: function(){\n                var me = this;\n                me.get(\"element\").removeChild(me.get(\"canvas\"));\n            }\n        };\n\n        return {\n            create: function(config){\n                return new heatmap(config);\n            }, \n            util: {\n                mousePosition: function(ev){\n                    // this doesn't work right\n                    // rather use\n                    /*\n                        // this = element to observe\n                        var x = ev.pageX - this.offsetLeft;\n                        var y = ev.pageY - this.offsetTop;\n\n                    */\n                    var x, y;\n\n                    if (ev.layerX) { // Firefox\n                        x = ev.layerX;\n                        y = ev.layerY;\n                    } else if (ev.offsetX) { // Opera\n                        x = ev.offsetX;\n                        y = ev.offsetY;\n                    }\n                    if(typeof(x)=='undefined')\n                        return;\n\n                    return [x,y];\n                }\n            }\n        };\n    })();\n\n    var HeatmapOverlay = function(opts) {\n        try {\n            BMap;\n        } catch (e) {\n            throw Error('Baidu Map JS API is not ready yet!');\n        }\n        if (!HeatmapOverlay._isExtended) {\n            HeatmapOverlay._isExtended = true;\n            inherits(HeatmapOverlay, BMap.Overlay, \"HeatmapOverlay\");\n            var newHeatmap = new HeatmapOverlay(opts);\n            this.__proto__ = newHeatmap.__proto__;\n        }\n        // HeatmapOverlay.prototype = new BMap.Overlay();\n        this.conf = opts;\n        this.heatmap = null;\n        this.latlngs = [];\n        this.bounds = null;\n        this._moveendHandler = this._moveendHandler.bind(this);\n    }\n\n    HeatmapOverlay.prototype.initialize = function(map) {\n        this._map = map;\n        var el = document.createElement(\"div\");\n        el.style.position = \"absolute\";\n        el.style.top = 0;\n        el.style.left = 0;\n        el.style.border = 0;\n        el.style.width = this._map.getSize().width + \"px\";\n        el.style.height = this._map.getSize().height + \"px\";\n        this.conf.element = el;\n        map.getPanes().mapPane.appendChild(el);\n        this.heatmap = heatmapFactory.create(this.conf);\n        this._div = el;\n        return el;\n    }\n\n    HeatmapOverlay.prototype.draw = function() {\n        var currentBounds = this._map.getBounds();\n\n        if (currentBounds.equals(this.bounds)) {\n            return;\n        }\n        this.bounds = currentBounds;\n\n        var ne = this._map.pointToOverlayPixel(currentBounds.getNorthEast()),\n            sw = this._map.pointToOverlayPixel(currentBounds.getSouthWest());\n        if (!ne || !sw) {\n            return\n        }\n        var topY = ne.y,\n            leftX = sw.x,\n            h = sw.y - ne.y,\n            w = ne.x - sw.x;\n\n        this.conf.element.style.left = leftX + 'px';\n        this.conf.element.style.top = topY + 'px';\n        this.conf.element.style.width = w + 'px';\n        this.conf.element.style.height = h + 'px';\n        this.heatmap.store.get(\"heatmap\").resize();\n\n        if (this.latlngs.length > 0) {\n            this.heatmap.clear();\n\n            var len = this.latlngs.length;\n            var d = {\n                max: this.heatmap.store.max,\n                data: []\n            };\n\n            while (len--) {\n                var latlng = this.latlngs[len].latlng;\n\n                if (!currentBounds.containsPoint(latlng)) {\n                    continue;\n                }\n\n                var divPixel = this._map.pointToOverlayPixel(latlng),\n                    screenPixel = new BMap.Pixel(divPixel.x - leftX, divPixel.y - topY);\n                var roundedPoint = this.pixelTransform(screenPixel);\n                d.data.push({\n                    x: roundedPoint.x,\n                    y: roundedPoint.y,\n                    count: this.latlngs[len].c\n                });\n            }\n            this.heatmap.store.setDataSet(d);\n        }\n    }\n\n    HeatmapOverlay.prototype.pixelTransform = function(p) {\n        var w = this.heatmap.get(\"width\"),\n            h = this.heatmap.get(\"height\");\n\n        while (p.x < 0) {\n            p.x += w;\n        }\n\n        while (p.x > w) {\n            p.x -= w;\n        }\n\n        while (p.y < 0) {\n            p.y += h;\n        }\n\n        while (p.y > h) {\n            p.y -= h;\n        }\n\n        p.x = (p.x >> 0);\n        p.y = (p.y >> 0);\n\n        return p;\n    }\n\n    HeatmapOverlay.prototype._moveendHandler = function (e) {\n        this.setDataSet(this._data);\n        delete this._data;\n        this._map.removeEventListener('moveend', this._moveendHandler);\n    }\n\n    HeatmapOverlay.prototype.setDataSet = function(data) {\n        if (!this._map) {\n            return;\n        }\n        var currentBounds = this._map.getBounds();\n\n        var ne = this._map.pointToOverlayPixel(currentBounds.getNorthEast()),\n            sw = this._map.pointToOverlayPixel(currentBounds.getSouthWest());\n        if (!ne || !sw) {\n            this._data = data\n            this._map.addEventListener('moveend', this._moveendHandler);\n        }\n\n        var mapdata = {\n            max: data.max,\n            data: []\n        };\n        var d = data.data,\n            dlen = d.length;\n\n\n        this.latlngs = [];\n\n        while (dlen--) {\n            var latlng = new BMap.Point(d[dlen].lng, d[dlen].lat);\n            this.latlngs.push({\n                latlng: latlng,\n                c: d[dlen].count\n            });\n\n            if (!currentBounds.containsPoint(latlng)) {\n                continue;\n            }\n\n            var divPixel = this._map.pointToOverlayPixel(latlng),\n                leftX = this._map.pointToOverlayPixel(currentBounds.getSouthWest()).x,\n                topY = this._map.pointToOverlayPixel(currentBounds.getNorthEast()).y,\n                screenPixel = new BMap.Pixel(divPixel.x - leftX, divPixel.y - topY);\n            var point = this.pixelTransform(screenPixel);\n\n            mapdata.data.push({\n                x: point.x,\n                y: point.y,\n                count: d[dlen].count\n            });\n        }\n        this.heatmap.clear();\n        this.heatmap.store.setDataSet(mapdata);\n    }\n\n    HeatmapOverlay.prototype.addDataPoint = function(lng, lat, count) {\n        var latlng = new BMap.Point(lng, lat),\n            point = this.pixelTransform(this._map.pointToOverlayPixel(latlng));\n\n        this.heatmap.store.addDataPoint(point.x, point.y, count);\n        this.latlngs.push({\n            latlng: latlng,\n            c: count\n        });\n    }\n\n    HeatmapOverlay.prototype.toggle = function() {\n        this.heatmap.toggleDisplay();\n    }\n\n    return HeatmapOverlay;\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}