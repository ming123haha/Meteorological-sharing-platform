{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../../core/maybe.js\";\nimport { pt2px as e } from \"../../../../../../core/screenUtils.js\";\nimport { premultiplyAlphaRGBA as i } from \"../../color.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as s, BITSET_GENERIC_LOCK_COLOR as r, BITSET_LINE_SCALE_DASH as o, BITSET_GENERIC_CONSIDER_ALPHA_ONLY as a, SPRITE_PADDING as l } from \"../../definitions.js\";\nimport { i1616to32 as h } from \"../../number.js\";\nimport { LineMaterialKey as n } from \"../../materialKey/MaterialKey.js\";\nimport { isFunction as c, getLimitCosine as m, getMinMaxZoom as p } from \"./util.js\";\nimport _ from \"./WGLBaseLineTemplate.js\";\nimport f from \"./WGLDynamicMeshTemplate.js\";\nimport { ok as d } from \"../../util/Result.js\";\n\nclass y extends _(f) {\n  constructor(l, n, p) {\n    super(l), this._minMaxZoom = h(Math.round(n * s), Math.round(p * s)), this._cimLineLayer = l;\n    let _ = 0;\n    c(l.width) || (_ = .5 * e(l.width));\n\n    const f = (t, i, s) => c(l.width) ? .5 * e(l.width(t, i, s)) : _;\n\n    this._dynamicPropertyMap.set(\"_halfWidth\", f), c(l.cap) ? this._dynamicPropertyMap.set(\"_capType\", l.cap) : this._capType = l.cap, c(l.join) ? this._dynamicPropertyMap.set(\"_joinType\", l.join) : this._joinType = l.join;\n    const d = l.color;\n\n    if (c(d)) {\n      const t = (t, e, s) => i(d(t, e, s));\n\n      this._dynamicPropertyMap.set(\"_fillColor\", t);\n    } else this._fillColor = d && i(d) || 0;\n\n    const y = l.miterLimit;\n\n    if (c(y)) {\n      const t = (t, e, i) => m(y(t, e, i));\n\n      this._dynamicPropertyMap.set(\"_miterLimitCosine\", t);\n    } else this._miterLimitCosine = m(y);\n\n    if (t(l.effects)) {\n      const t = l.effects;\n      c(t) ? this._dynamicPropertyMap.set(\"_effects\", t) : this._effects = t;\n    }\n\n    this._scaleFactor = l.scaleFactor || 1, this._isDashed = null != l.dashTemplate;\n    const P = l.colorLocked ? r : 0,\n          u = l.scaleDash ? o : 0,\n          j = l.sampleAlphaOnly ? a : 0;\n    this.tessellationProperties._bitset = P | u | j, this._materialKey = l.materialKey, this._initializeTessellator(!0);\n  }\n\n  static fromCIMLine(t, e) {\n    const [i, s] = p(t.scaleInfo, e);\n    return new y(t, i, s);\n  }\n\n  bindFeature(t, e, i) {\n    const s = t.readLegacyFeature();\n    this._dynamicPropertyMap.forEach((t, r) => {\n      this[r] = t(s, e, i);\n    }), this._halfWidth *= this._scaleFactor;\n    const r = this._materialCache,\n          o = (0, this._cimLineLayer.materialHash)(s, e, i),\n          a = r.get(o);\n    let c = null;\n\n    if (a && d(a.spriteMosaicItem) && (c = a.spriteMosaicItem), c) {\n      this._hasPattern = !0;\n      const {\n        rect: t,\n        width: e,\n        height: i\n      } = c,\n            s = t.x + l,\n            r = t.y + l,\n            o = s + e,\n            a = r + i;\n      this.tessellationProperties._tl = h(s, r), this.tessellationProperties._br = h(o, a);\n    } else this._hasPattern = !1, this.tessellationProperties._tl = 0, this.tessellationProperties._br = 0;\n\n    this.tessellationProperties._fillColor = this._fillColor, this.tessellationProperties._halfWidth = this._halfWidth, this.tessellationProperties.offset = 0, this.tessellationProperties._halfReferenceWidth = this.tessellationProperties._halfWidth;\n    const m = n.load(this._materialKey);\n    c && (m.sdf = c.sdf, m.pattern = !0, m.textureBinding = c.textureBinding), this._materialKey = m.data;\n  }\n\n}\n\nexport { y as default };","map":{"version":3,"names":["isSome","t","pt2px","e","premultiplyAlphaRGBA","i","MIN_MAX_ZOOM_PRECISION_FACTOR","s","BITSET_GENERIC_LOCK_COLOR","r","BITSET_LINE_SCALE_DASH","o","BITSET_GENERIC_CONSIDER_ALPHA_ONLY","a","SPRITE_PADDING","l","i1616to32","h","LineMaterialKey","n","isFunction","c","getLimitCosine","m","getMinMaxZoom","p","_","f","ok","d","y","constructor","_minMaxZoom","Math","round","_cimLineLayer","width","_dynamicPropertyMap","set","cap","_capType","join","_joinType","color","_fillColor","miterLimit","_miterLimitCosine","effects","_effects","_scaleFactor","scaleFactor","_isDashed","dashTemplate","P","colorLocked","u","scaleDash","j","sampleAlphaOnly","tessellationProperties","_bitset","_materialKey","materialKey","_initializeTessellator","fromCIMLine","scaleInfo","bindFeature","readLegacyFeature","forEach","_halfWidth","_materialCache","materialHash","get","spriteMosaicItem","_hasPattern","rect","height","x","_tl","_br","offset","_halfReferenceWidth","load","sdf","pattern","textureBinding","data","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../../core/maybe.js\";import{pt2px as e}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlphaRGBA as i}from\"../../color.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as s,BITSET_GENERIC_LOCK_COLOR as r,BITSET_LINE_SCALE_DASH as o,BITSET_GENERIC_CONSIDER_ALPHA_ONLY as a,SPRITE_PADDING as l}from\"../../definitions.js\";import{i1616to32 as h}from\"../../number.js\";import{LineMaterialKey as n}from\"../../materialKey/MaterialKey.js\";import{isFunction as c,getLimitCosine as m,getMinMaxZoom as p}from\"./util.js\";import _ from\"./WGLBaseLineTemplate.js\";import f from\"./WGLDynamicMeshTemplate.js\";import{ok as d}from\"../../util/Result.js\";class y extends(_(f)){constructor(l,n,p){super(l),this._minMaxZoom=h(Math.round(n*s),Math.round(p*s)),this._cimLineLayer=l;let _=0;c(l.width)||(_=.5*e(l.width));const f=(t,i,s)=>c(l.width)?.5*e(l.width(t,i,s)):_;this._dynamicPropertyMap.set(\"_halfWidth\",f),c(l.cap)?this._dynamicPropertyMap.set(\"_capType\",l.cap):this._capType=l.cap,c(l.join)?this._dynamicPropertyMap.set(\"_joinType\",l.join):this._joinType=l.join;const d=l.color;if(c(d)){const t=(t,e,s)=>i(d(t,e,s));this._dynamicPropertyMap.set(\"_fillColor\",t)}else this._fillColor=d&&i(d)||0;const y=l.miterLimit;if(c(y)){const t=(t,e,i)=>m(y(t,e,i));this._dynamicPropertyMap.set(\"_miterLimitCosine\",t)}else this._miterLimitCosine=m(y);if(t(l.effects)){const t=l.effects;c(t)?this._dynamicPropertyMap.set(\"_effects\",t):this._effects=t}this._scaleFactor=l.scaleFactor||1,this._isDashed=null!=l.dashTemplate;const P=l.colorLocked?r:0,u=l.scaleDash?o:0,j=l.sampleAlphaOnly?a:0;this.tessellationProperties._bitset=P|u|j,this._materialKey=l.materialKey,this._initializeTessellator(!0)}static fromCIMLine(t,e){const[i,s]=p(t.scaleInfo,e);return new y(t,i,s)}bindFeature(t,e,i){const s=t.readLegacyFeature();this._dynamicPropertyMap.forEach(((t,r)=>{this[r]=t(s,e,i)})),this._halfWidth*=this._scaleFactor;const r=this._materialCache,o=(0,this._cimLineLayer.materialHash)(s,e,i),a=r.get(o);let c=null;if(a&&d(a.spriteMosaicItem)&&(c=a.spriteMosaicItem),c){this._hasPattern=!0;const{rect:t,width:e,height:i}=c,s=t.x+l,r=t.y+l,o=s+e,a=r+i;this.tessellationProperties._tl=h(s,r),this.tessellationProperties._br=h(o,a)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties.offset=0,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;const m=n.load(this._materialKey);c&&(m.sdf=c.sdf,m.pattern=!0,m.textureBinding=c.textureBinding),this._materialKey=m.data}}export{y as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}