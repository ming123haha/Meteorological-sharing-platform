{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"./cache.js\";\nimport { FeatureSetError as t, FeatureSetErrorCodes as s } from \"./errorsupport.js\";\nimport a from \"./FeatureSetIterator.js\";\nimport r from \"./IdSet.js\";\nimport { FeatureServiceDatabaseType as n, layerGeometryEsriConstants as i, IdState as l, convertSquareUnitsToCode as u, convertLinearUnitsToCode as h, esriFieldToJson as c, layerGeometryEsriRestConstants as o } from \"./shared.js\";\nimport { max as d, min as _, sum as p, variance as f, stdev as g, mean as y, distinct as m, count as b } from \"./stats.js\";\nimport { isPromiseLike as F } from \"../../../core/promiseUtils.js\";\nimport { WhereClause as w } from \"../../../core/sql/WhereClause.js\";\nimport { union as S, geodesicArea as I, planarArea as T, geodesicLength as P, planarLength as D } from \"../../../geometry/geometryEngineAsync.js\";\nimport k from \"../../../geometry/SpatialReference.js\";\nimport x from \"../../../layers/support/FieldsIndex.js\";\n\nclass C {\n  constructor(e) {\n    this.recentlyUsedQueries = null, this.featureSetQueryInterceptor = null, this._idstates = [], this._parent = null, this._wset = null, this._mainSetInUse = null, this._maxProcessing = 200, this._maxQuery = 500, this._totalCount = -1, this._databaseType = n.NotEvaluated, this._databaseTypeProbed = null, this.declaredRootClass = \"esri.arcade.featureset.support.FeatureSet\", this._featureCache = [], this.typeIdField = null, this.types = null, this.fields = null, this.geometryType = \"\", this.objectIdField = \"\", this.globalIdField = \"\", this.spatialReference = null, this.hasM = !1, this.hasZ = !1, this._transparent = !1, this.loaded = !1, this._loadPromise = null, this._fieldsIndex = null, e && e.lrucache && (this.recentlyUsedQueries = e.lrucache), e && e.interceptor && (this.featureSetQueryInterceptor = e.interceptor);\n  }\n\n  optimisePagingFeatureQueries(e) {\n    this._parent && this._parent.optimisePagingFeatureQueries(e);\n  }\n\n  _hasMemorySource() {\n    return !0;\n  }\n\n  prop(e, t) {\n    return void 0 === t ? this[e] : (void 0 !== this[e] && (this[e] = t), this);\n  }\n\n  end() {\n    return null !== this._parent && !0 === this._parent._transparent ? this._parent.end() : this._parent;\n  }\n\n  _ensureLoaded() {\n    return this.load();\n  }\n\n  load() {\n    return null === this._loadPromise && (this._loadPromise = this.loadImpl()), this._loadPromise;\n  }\n\n  async loadImpl() {\n    return !0 === this._parent?.loaded ? (this._initialiseFeatureSet(), this) : (await this._parent?.load(), this._initialiseFeatureSet(), this);\n  }\n\n  _initialiseFeatureSet() {\n    null !== this._parent ? (this.fields = this._parent.fields.slice(0), this.geometryType = this._parent.geometryType, this.objectIdField = this._parent.objectIdField, this.globalIdField = this._parent.globalIdField, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = this._parent.typeIdField, this.types = this._parent.types) : (this.fields = [], this.typeIdField = \"\", this.objectIdField = \"\", this.globalIdField = \"\", this.spatialReference = new k({\n      wkid: 4326\n    }), this.geometryType = i.point);\n  }\n\n  getField(e, t) {\n    let s;\n    return (t = t || this.fields) && (e = e.toLowerCase(), t.some(t => (t && t.name.toLowerCase() === e && (s = t), !!s))), s;\n  }\n\n  getFieldsIndex() {\n    return null === this._fieldsIndex && (this._fieldsIndex = new x(this.fields)), this._fieldsIndex;\n  }\n\n  _maxProcessingRate() {\n    return null !== this._parent ? Math.min(this._maxProcessing, this._parent._maxProcessingRate()) : Math.min(this._maxProcessing, this._maxQueryRate());\n  }\n\n  _maxQueryRate() {\n    return null !== this._parent ? Math.max(this._maxQuery, this._parent._maxQueryRate()) : this._maxQuery;\n  }\n\n  _checkCancelled(e) {\n    if (null != e && e.aborted) throw new t(s.Cancelled);\n  }\n\n  nativeCapabilities() {\n    return this._parent.nativeCapabilities();\n  }\n\n  async _canDoAggregates(e, t, s, a, r) {\n    return null !== this._parent && this._parent._canDoAggregates(e, t, s, a, r);\n  }\n\n  async _getAggregatePagesDataSourceDefinition(e, a, r, n, i, l, u) {\n    if (null === this._parent) throw new t(s.NeverReach);\n    return this._parent._getAggregatePagesDataSourceDefinition(e, a, r, n, i, l, u);\n  }\n\n  async _getAgregagtePhysicalPage(e, a, r) {\n    if (null === this._parent) throw new t(s.NeverReach);\n    return this._parent._getAgregagtePhysicalPage(e, a, r);\n  }\n\n  async databaseType() {\n    if (this._databaseType === n.NotEvaluated) {\n      if (null !== e.applicationCache) {\n        const t = e.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());\n        if (null !== t) return t;\n      }\n\n      if (null !== this._databaseTypeProbed) return this._databaseTypeProbed;\n\n      try {\n        this._databaseTypeProbed = this._getDatabaseTypeImpl(), null !== e.applicationCache && e.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(), this._databaseTypeProbed);\n      } catch (t) {\n        throw null !== e.applicationCache && e.applicationCache.clearDatabaseType(this._cacheableFeatureSetSourceKey()), t;\n      }\n\n      return this._databaseTypeProbed;\n    }\n\n    return this._databaseType;\n  }\n\n  async _getDatabaseTypeImpl() {\n    const e = [{\n      thetype: n.SqlServer,\n      testwhere: \"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0\"\n    }, {\n      thetype: n.Oracle,\n      testwhere: \"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0\"\n    }, {\n      thetype: n.StandardisedNoInterval,\n      testwhere: \"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0\"\n    }];\n\n    for (const t of e) {\n      if (!0 === (await this._runDatabaseProbe(t.testwhere))) return t.thetype;\n    }\n\n    return n.StandardisedNoInterval;\n  }\n\n  _cacheableFeatureSetSourceKey() {\n    return \"MUSTBESET\";\n  }\n\n  async _runDatabaseProbe(e) {\n    if (null !== this._parent) return this._parent._runDatabaseProbe(e);\n    throw new t(s.NotImplemented);\n  }\n\n  isTable() {\n    return this._parent?.isTable() ?? !1;\n  }\n\n  _featureFromCache(e) {\n    if (void 0 !== this._featureCache[e]) return this._featureCache[e];\n  }\n\n  _isInFeatureSet(e) {\n    return l.Unknown;\n  }\n\n  _getSet(e) {\n    throw new t(s.NotImplemented);\n  }\n\n  async _getFeature(e, a, r) {\n    if (this._checkCancelled(r), void 0 !== this._featureFromCache(a)) return this._featureFromCache(a);\n    if (await this._getFeatures(e, a, this._maxProcessingRate(), r), this._checkCancelled(r), void 0 !== this._featureFromCache(a)) return this._featureFromCache(a);\n    throw new t(s.MissingFeatures);\n  }\n\n  async _getFeatureBatch(e, t) {\n    this._checkCancelled(t);\n\n    const s = new r([], e, !1, null),\n          a = [];\n    await this._getFeatures(s, -1, e.length, t), this._checkCancelled(t);\n\n    for (const r of e) void 0 !== this._featureFromCache(r) && a.push(this._featureFromCache(r));\n\n    return a;\n  }\n\n  async _getFeatures(e, t, s, a) {\n    return \"success\";\n  }\n\n  _getFilteredSet(e, a, r, n, i) {\n    throw new t(s.NotImplemented);\n  }\n\n  async _refineSetBlock(e, t, s) {\n    if (!0 === this._checkIfNeedToExpandCandidatePage(e, this._maxQueryRate())) return await this._expandPagedSet(e, this._maxQueryRate(), 0, 0, s), this._refineSetBlock(e, t, s);\n\n    this._checkCancelled(s);\n\n    const a = e._candidates.length;\n\n    this._refineKnowns(e, t);\n\n    let r = a - e._candidates.length;\n    if (0 === e._candidates.length) return e;\n    if (r >= t) return e;\n\n    if (await this._refineIfParentKnown(e, t - r, s), this._checkCancelled(s), this._refineKnowns(e, t - r), r = a - e._candidates.length, r < t && e._candidates.length > 0) {\n      const a = t - r,\n            n = this._prepareFetchAndRefineSet(e._candidates);\n\n      return await this._fetchAndRefineFeatures(n, n.length > a ? a : e._candidates.length, s), this._checkCancelled(s), this._refineKnowns(e, t - r), e;\n    }\n\n    return e;\n  }\n\n  _fetchAndRefineFeatures(e, t, s) {\n    return null;\n  }\n\n  _prepareFetchAndRefineSet(e) {\n    const t = [];\n\n    for (let s = 0; s < e.length; s++) this._isPhysicalFeature(e[s]) && t.push(e[s]);\n\n    return t;\n  }\n\n  _isPhysicalFeature(e) {\n    return null === this._parent || this._parent._isPhysicalFeature(e);\n  }\n\n  _refineKnowns(e, t) {\n    let s = 0,\n        a = null;\n    const r = [];\n    t = this._maxQueryRate();\n\n    for (let n = 0; n < e._candidates.length && \"GETPAGES\" !== e._candidates[n]; n++) {\n      let i = !1;\n\n      const u = this._candidateIdTransform(e._candidates[n]);\n\n      u !== e._candidates[n] && (i = !0);\n\n      const h = this._isInFeatureSet(u);\n\n      if (h === l.InFeatureSet) !0 === i ? e._known.includes(u) || (e._known.push(u), s += 1) : (e._known.push(e._candidates[n]), s += 1), null === a ? a = {\n        start: n,\n        end: n\n      } : a.end === n - 1 ? a.end = n : (r.push(a), a = {\n        start: n,\n        end: n\n      });else if (h === l.NotInFeatureSet) null === a ? a = {\n        start: n,\n        end: n\n      } : a.end === n - 1 ? a.end = n : (r.push(a), a = {\n        start: n,\n        end: n\n      }), s += 1;else if (h === l.Unknown && (s += 1, !0 === e._ordered)) break;\n      if (s >= t) break;\n    }\n\n    null !== a && r.push(a);\n\n    for (let n = r.length - 1; n >= 0; n--) e._candidates.splice(r[n].start, r[n].end - r[n].start + 1);\n  }\n\n  _refineIfParentKnown(e, t, s) {\n    const a = new r([], [], e._ordered, null);\n    return a._candidates = e._candidates.slice(0), this._parent._refineSetBlock(a, t, s);\n  }\n\n  _candidateIdTransform(e) {\n    return this._parent._candidateIdTransform(e);\n  }\n\n  _checkIfNeedToExpandKnownPage(e, t) {\n    if (null === e.pagesDefinition) return !1;\n    let s = 0;\n\n    for (let a = e._lastFetchedIndex; a < e._known.length; a++) {\n      if (\"GETPAGES\" === e._known[a]) return !0;\n      if (void 0 === this._featureCache[e._known[a]] && (s += 1, s >= t)) break;\n    }\n\n    return !1;\n  }\n\n  _checkIfNeedToExpandCandidatePage(e, t) {\n    if (null === e.pagesDefinition) return !1;\n    let s = 0;\n\n    for (let a = 0; a < e._candidates.length; a++) {\n      if (\"GETPAGES\" === e._candidates[a]) return !0;\n      if (s += 1, s >= t) break;\n    }\n\n    return !1;\n  }\n\n  async _expandPagedSet(e, a, r, n, i) {\n    if (null === this._parent) throw new t(s.NotImplemented);\n    return this._parent._expandPagedSet(e, a, r, n, i);\n  }\n\n  async _expandPagedSetFeatureSet(e, t, s, a, r) {\n    if (e._known.length > 0 && \"GETPAGES\" === e._known[e._known.length - 1] && (a = 1), 0 === a && e._candidates.length > 0 && \"GETPAGES\" === e._candidates[e._candidates.length - 1] && (a = 2), 0 === a) return \"finished\";\n    const n = await this._getPage(e, a, r);\n    return s + n < t ? this._expandPagedSet(e, t, s + n, 0, r) : \"success\";\n  }\n\n  async _getPage(e, t, s) {\n    const a = 1 === t ? e._known : e._candidates;\n\n    if (e.pagesDefinition.internal.set.length > e.pagesDefinition.resultOffset || !0 === e.pagesDefinition.internal.fullyResolved) {\n      a.length = a.length - 1;\n      let t = 0;\n\n      for (let r = 0; r < e.pagesDefinition.resultRecordCount && !(e.pagesDefinition.resultOffset + r >= e.pagesDefinition.internal.set.length); r++) a[a.length] = e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset + r], t++;\n\n      e.pagesDefinition.resultOffset += t;\n      let s = !1;\n      return !0 === e.pagesDefinition.internal.fullyResolved && e.pagesDefinition.internal.set.length <= e.pagesDefinition.resultOffset && (s = !0), !1 === s && a.push(\"GETPAGES\"), t;\n    }\n\n    return await this._getPhysicalPage(e, t, s), this._getPage(e, t, s);\n  }\n\n  _getPhysicalPage(e, t, s) {\n    return null;\n  }\n\n  _clonePageDefinition(e) {\n    return null === this._parent ? null : this._parent._clonePageDefinition(e);\n  }\n\n  _first(e) {\n    return this.iterator(e).next();\n  }\n\n  first(e) {\n    return this._first(e);\n  }\n\n  async calculateStatistic(e, t, s, a) {\n    await this._ensureLoaded();\n    let r = await this._stat(e, t, \"\", null, null, s, a);\n    return !1 === r.calculated && (r = await this._manualStat(e, t, s, a)), r.result;\n  }\n\n  async _manualStat(e, t, s, a) {\n    let r = null;\n\n    switch (e.toLowerCase()) {\n      case \"count\":\n        return r = await b(this, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"distinct\":\n        return r = await m(this, t, s, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"avg\":\n      case \"mean\":\n        return r = await y(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"stdev\":\n        return r = await g(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"variance\":\n        return r = await f(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"sum\":\n        return r = await p(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"min\":\n        return r = await _(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      case \"max\":\n        return r = await d(this, t, a), {\n          calculated: !0,\n          result: r\n        };\n\n      default:\n        return {\n          calculated: !0,\n          result: 0\n        };\n    }\n  }\n\n  async _stat(e, t, s, a, r, n, i) {\n    const l = await this._parent._stat(e, t, s, a, r, n, i);\n    return !1 === l.calculated ? null === r && \"\" === s && null === a ? this._manualStat(e, t, n, i) : {\n      calculated: !1\n    } : l;\n  }\n\n  _unionAllGeomSelf(e) {\n    const t = this.iterator(this._defaultTracker(e)),\n          s = [];\n    return new Promise((e, a) => {\n      this._unionShapeInBatches(s, t, e, a);\n    });\n  }\n\n  _unionAllGeom(e) {\n    return new Promise((t, s) => {\n      const a = this.iterator(this._defaultTracker(e)),\n            r = [];\n\n      this._unionShapeInBatches(r, a, t, s);\n    });\n  }\n\n  _unionShapeInBatches(e, t, s, a) {\n    t.next().then(r => {\n      try {\n        null !== r && null !== r.geometry && e.push(r.geometry), e.length > 30 || null === r && e.length > 1 ? S(e).then(n => {\n          try {\n            null === r ? s(n) : (e = [n], this._unionShapeInBatches(e, t, s, a));\n          } catch (i) {\n            a(i);\n          }\n        }, a) : null === r ? 1 === e.length ? s(e[0]) : s(null) : this._unionShapeInBatches(e, t, s, a);\n      } catch (n) {\n        a(n);\n      }\n    }, a);\n  }\n\n  iterator(e) {\n    return new a(this, e);\n  }\n\n  intersection(e, t = !1) {\n    return C._featuresetFunctions.intersection.bind(this)(e, t);\n  }\n\n  difference(e, t = !1, s = !0) {\n    return C._featuresetFunctions.difference.bind(this)(e, t, s);\n  }\n\n  symmetricDifference(e, t = !1, s = !0) {\n    return C._featuresetFunctions.symmetricDifference.bind(this)(e, t, s);\n  }\n\n  morphShape(e, t, s = \"unknown\", a = null) {\n    return C._featuresetFunctions.morphShape.bind(this)(e, t, s, a);\n  }\n\n  morphShapeAndAttributes(e, t, s = \"unknown\") {\n    return C._featuresetFunctions.morphShapeAndAttributes.bind(this)(e, t, s);\n  }\n\n  union(e, t = !1) {\n    return C._featuresetFunctions.union.bind(this)(e, t);\n  }\n\n  intersects(e) {\n    return C._featuresetFunctions.intersects.bind(this)(e);\n  }\n\n  envelopeIntersects(e) {\n    return C._featuresetFunctions.envelopeIntersects.bind(this)(e);\n  }\n\n  contains(e) {\n    return C._featuresetFunctions.contains.bind(this)(e);\n  }\n\n  overlaps(e) {\n    return C._featuresetFunctions.overlaps.bind(this)(e);\n  }\n\n  relate(e, t) {\n    return C._featuresetFunctions.relate.bind(this)(e, t);\n  }\n\n  within(e) {\n    return C._featuresetFunctions.within.bind(this)(e);\n  }\n\n  touches(e) {\n    return C._featuresetFunctions.touches.bind(this)(e);\n  }\n\n  top(e) {\n    return C._featuresetFunctions.top.bind(this)(e);\n  }\n\n  crosses(e) {\n    return C._featuresetFunctions.crosses.bind(this)(e);\n  }\n\n  buffer(e, t, s, a = !0) {\n    return C._featuresetFunctions.buffer.bind(this)(e, t, s, a);\n  }\n\n  filter(e, t = null) {\n    return C._featuresetFunctions.filter.bind(this)(e, t);\n  }\n\n  orderBy(e) {\n    return C._featuresetFunctions.orderBy.bind(this)(e);\n  }\n\n  dissolve(e, t) {\n    return C._featuresetFunctions.dissolve.bind(this)(e, t);\n  }\n\n  groupby(e, t) {\n    return C._featuresetFunctions.groupby.bind(this)(e, t);\n  }\n\n  reduce(e, t = null, s) {\n    return new Promise((a, r) => {\n      this._reduceImpl(this.iterator(this._defaultTracker(s)), e, t, 0, a, r, 0);\n    });\n  }\n\n  _reduceImpl(e, t, s, a, r, n, i) {\n    try {\n      if (++i > 1e3) return void setTimeout(() => {\n        i = 0, this._reduceImpl(e, t, s, a, r, n, i);\n      });\n      e.next().then(l => {\n        try {\n          if (null === l) r(s);else {\n            const u = t(s, l, a, this);\n            F(u) ? u.then(s => {\n              this._reduceImpl(e, t, s, a + 1, r, n, i);\n            }, n) : this._reduceImpl(e, t, u, a + 1, r, n, i);\n          }\n        } catch (u) {\n          n(u);\n        }\n      }, n);\n    } catch (l) {\n      n(l);\n    }\n  }\n\n  removeField(e) {\n    return C._featuresetFunctions.removeField.bind(this)(e);\n  }\n\n  addField(e, t, s = null) {\n    return C._featuresetFunctions.addField.bind(this)(e, t, s);\n  }\n\n  sumArea(e, t = !1, s) {\n    const a = u(e);\n    return this.reduce((e, s) => null === s.geometry ? 0 : t ? I(s.geometry, a).then(t => e + t) : T(s.geometry, a).then(t => e + t), 0, s);\n  }\n\n  sumLength(e, t = !1, s) {\n    const a = h(e);\n    return this.reduce((e, s) => null === s.geometry ? 0 : t ? P(s.geometry, a).then(t => e + t) : D(s.geometry, a).then(t => e + t), 0, s);\n  }\n\n  _substituteVars(e, t) {\n    if (null !== t) {\n      const s = {};\n\n      for (const e in t) s[e.toLowerCase()] = t[e];\n\n      e.parameters = s;\n    }\n  }\n\n  async distinct(e, t = 1e3, s = null, a) {\n    await this.load();\n    const r = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(r, s), this.calculateStatistic(\"distinct\", r, t, this._defaultTracker(a));\n  }\n\n  async min(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"min\", a, -1, this._defaultTracker(s));\n  }\n\n  async max(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"max\", a, -1, this._defaultTracker(s));\n  }\n\n  async avg(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"avg\", a, -1, this._defaultTracker(s));\n  }\n\n  async sum(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"sum\", a, -1, this._defaultTracker(s));\n  }\n\n  async stdev(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"stdev\", a, -1, this._defaultTracker(s));\n  }\n\n  async variance(e, t = null, s) {\n    await this.load();\n    const a = w.create(e, this.getFieldsIndex());\n    return this._substituteVars(a, t), this.calculateStatistic(\"variance\", a, -1, this._defaultTracker(s));\n  }\n\n  async count(e) {\n    return await this.load(), this.calculateStatistic(\"count\", w.create(\"1\", this.getFieldsIndex()), -1, this._defaultTracker(e));\n  }\n\n  _defaultTracker(e) {\n    return e || {\n      aborted: !1\n    };\n  }\n\n  forEach(e, t) {\n    return new Promise((s, a) => {\n      this._forEachImpl(this.iterator(this._defaultTracker(t)), e, this, s, a, 0);\n    });\n  }\n\n  _forEachImpl(e, t, s, a, r, n) {\n    try {\n      if (++n > 1e3) return void setTimeout(() => {\n        n = 0, this._forEachImpl(e, t, s, a, r, n);\n      }, 0);\n      e.next().then(i => {\n        try {\n          if (null === i) a(s);else {\n            const l = t(i);\n            null == l ? this._forEachImpl(e, t, s, a, r, n) : F(l) ? l.then(() => {\n              try {\n                this._forEachImpl(e, t, s, a, r, n);\n              } catch (i) {\n                r(i);\n              }\n            }, r) : this._forEachImpl(e, t, s, a, r, n);\n          }\n        } catch (l) {\n          r(l);\n        }\n      }, r);\n    } catch (i) {\n      r(i);\n    }\n  }\n\n  convertToJSON(e) {\n    const t = {\n      layerDefinition: {\n        geometryType: this.geometryType,\n        fields: []\n      },\n      featureSet: {\n        features: [],\n        geometryType: this.geometryType\n      }\n    };\n\n    for (let s = 0; s < this.fields.length; s++) t.layerDefinition.fields.push(c(this.fields[s]));\n\n    return this.reduce((e, s) => {\n      const a = {\n        geometry: s.geometry && s.geometry.toJSON(),\n        attributes: {}\n      };\n\n      for (const t in s.attributes) a.attributes[t] = s.attributes[t];\n\n      return t.featureSet.features.push(a), 1;\n    }, 0, e).then(() => t);\n  }\n\n  castToText(e = !1) {\n    return \"object, FeatureSet\";\n  }\n\n  queryAttachments(e, t, s, a, r) {\n    return this._parent.queryAttachments(e, t, s, a, r);\n  }\n\n  serviceUrl() {\n    return this._parent.serviceUrl();\n  }\n\n  subtypes() {\n    return this.typeIdField ? {\n      subtypeField: this.typeIdField,\n      subtypes: this.types ? this.types.map(e => ({\n        name: e.name,\n        code: e.id\n      })) : []\n    } : null;\n  }\n\n  relationshipMetaData() {\n    return this._parent.relationshipMetaData();\n  }\n\n  get gdbVersion() {\n    return this._parent ? this._parent.gdbVersion : \"\";\n  }\n\n  schema() {\n    const e = [];\n\n    for (const t of this.fields) e.push(c(t));\n\n    return {\n      objectIdField: this.objectIdField,\n      globalIdField: this.globalIdField,\n      geometryType: void 0 === o[this.geometryType] ? \"\" : o[this.geometryType],\n      fields: e\n    };\n  }\n\n  async convertToText(e, t) {\n    if (\"schema\" === e) return await this._ensureLoaded(), JSON.stringify(this.schema());\n\n    if (\"featureset\" === e) {\n      await this._ensureLoaded();\n      const e = [];\n      await this.reduce((t, s) => {\n        const a = {\n          geometry: s.geometry ? s.geometry.toJSON() : null,\n          attributes: s.attributes\n        };\n        return null !== a.geometry && a.geometry.spatialReference && delete a.geometry.spatialReference, e.push(a), 1;\n      }, 0, t);\n      const s = this.schema();\n      return s.features = e, s.spatialReference = this.spatialReference.toJSON(), JSON.stringify(s);\n    }\n\n    return this.castToText();\n  }\n\n  getFeatureByObjectId(e, t) {\n    return this._parent.getFeatureByObjectId(e, t);\n  }\n\n  getOwningSystemUrl() {\n    return this._parent.getOwningSystemUrl();\n  }\n\n  getIdentityUser() {\n    return this._parent.getIdentityUser();\n  }\n\n  getRootFeatureSet() {\n    return null !== this._parent ? this._parent.getRootFeatureSet() : this;\n  }\n\n  getDataSourceFeatureSet() {\n    return null !== this._parent ? this._parent.getDataSourceFeatureSet() : this;\n  }\n\n  castAsJson(e = null) {\n    return \"keeptype\" === e?.featureset ? this : \"none\" === e?.featureset ? null : {\n      type: \"FeatureSet\"\n    };\n  }\n\n  async castAsJsonAsync(e = null, t = null) {\n    if (\"keeptype\" === t?.featureset) return this;\n    if (\"schema\" === t?.featureset) return await this._ensureLoaded(), JSON.parse(JSON.stringify(this.schema()));\n    if (\"none\" === t?.featureset) return null;\n    await this._ensureLoaded();\n    const s = [];\n    await this.reduce((e, a) => {\n      const r = {\n        geometry: a.geometry ? !0 === t?.keepGeometryType ? a.geometry : a.geometry.toJSON() : null,\n        attributes: a.attributes\n      };\n      return null !== r.geometry && r.geometry.spatialReference && !0 !== t?.keepGeometryType && delete r.geometry.spatialReference, s.push(r), 1;\n    }, 0, e);\n    const a = this.schema();\n    return a.features = s, a.spatialReference = !0 === t?.keepGeometryType ? this.spatialReference : this.spatialReference?.toJSON(), a;\n  }\n\n}\n\nC._featuresetFunctions = {};\nexport { C as default };","map":{"version":3,"names":["e","FeatureSetError","t","FeatureSetErrorCodes","s","a","r","FeatureServiceDatabaseType","n","layerGeometryEsriConstants","i","IdState","l","convertSquareUnitsToCode","u","convertLinearUnitsToCode","h","esriFieldToJson","c","layerGeometryEsriRestConstants","o","max","d","min","_","sum","p","variance","f","stdev","g","mean","y","distinct","m","count","b","isPromiseLike","F","WhereClause","w","union","S","geodesicArea","I","planarArea","T","geodesicLength","P","planarLength","D","k","x","C","constructor","recentlyUsedQueries","featureSetQueryInterceptor","_idstates","_parent","_wset","_mainSetInUse","_maxProcessing","_maxQuery","_totalCount","_databaseType","NotEvaluated","_databaseTypeProbed","declaredRootClass","_featureCache","typeIdField","types","fields","geometryType","objectIdField","globalIdField","spatialReference","hasM","hasZ","_transparent","loaded","_loadPromise","_fieldsIndex","lrucache","interceptor","optimisePagingFeatureQueries","_hasMemorySource","prop","end","_ensureLoaded","load","loadImpl","_initialiseFeatureSet","slice","wkid","point","getField","toLowerCase","some","name","getFieldsIndex","_maxProcessingRate","Math","_maxQueryRate","_checkCancelled","aborted","Cancelled","nativeCapabilities","_canDoAggregates","_getAggregatePagesDataSourceDefinition","NeverReach","_getAgregagtePhysicalPage","databaseType","applicationCache","getDatabaseType","_cacheableFeatureSetSourceKey","_getDatabaseTypeImpl","setDatabaseType","clearDatabaseType","thetype","SqlServer","testwhere","Oracle","StandardisedNoInterval","_runDatabaseProbe","NotImplemented","isTable","_featureFromCache","_isInFeatureSet","Unknown","_getSet","_getFeature","_getFeatures","MissingFeatures","_getFeatureBatch","length","push","_getFilteredSet","_refineSetBlock","_checkIfNeedToExpandCandidatePage","_expandPagedSet","_candidates","_refineKnowns","_refineIfParentKnown","_prepareFetchAndRefineSet","_fetchAndRefineFeatures","_isPhysicalFeature","_candidateIdTransform","InFeatureSet","_known","includes","start","NotInFeatureSet","_ordered","splice","_checkIfNeedToExpandKnownPage","pagesDefinition","_lastFetchedIndex","_expandPagedSetFeatureSet","_getPage","internal","set","resultOffset","fullyResolved","resultRecordCount","_getPhysicalPage","_clonePageDefinition","_first","iterator","next","first","calculateStatistic","_stat","calculated","_manualStat","result","_unionAllGeomSelf","_defaultTracker","Promise","_unionShapeInBatches","_unionAllGeom","then","geometry","intersection","_featuresetFunctions","bind","difference","symmetricDifference","morphShape","morphShapeAndAttributes","intersects","envelopeIntersects","contains","overlaps","relate","within","touches","top","crosses","buffer","filter","orderBy","dissolve","groupby","reduce","_reduceImpl","setTimeout","removeField","addField","sumArea","sumLength","_substituteVars","parameters","create","avg","forEach","_forEachImpl","convertToJSON","layerDefinition","featureSet","features","toJSON","attributes","castToText","queryAttachments","serviceUrl","subtypes","subtypeField","map","code","id","relationshipMetaData","gdbVersion","schema","convertToText","JSON","stringify","getFeatureByObjectId","getOwningSystemUrl","getIdentityUser","getRootFeatureSet","getDataSourceFeatureSet","castAsJson","featureset","type","castAsJsonAsync","parse","keepGeometryType","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureset/support/FeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"./cache.js\";import{FeatureSetError as t,FeatureSetErrorCodes as s}from\"./errorsupport.js\";import a from\"./FeatureSetIterator.js\";import r from\"./IdSet.js\";import{FeatureServiceDatabaseType as n,layerGeometryEsriConstants as i,IdState as l,convertSquareUnitsToCode as u,convertLinearUnitsToCode as h,esriFieldToJson as c,layerGeometryEsriRestConstants as o}from\"./shared.js\";import{max as d,min as _,sum as p,variance as f,stdev as g,mean as y,distinct as m,count as b}from\"./stats.js\";import{isPromiseLike as F}from\"../../../core/promiseUtils.js\";import{WhereClause as w}from\"../../../core/sql/WhereClause.js\";import{union as S,geodesicArea as I,planarArea as T,geodesicLength as P,planarLength as D}from\"../../../geometry/geometryEngineAsync.js\";import k from\"../../../geometry/SpatialReference.js\";import x from\"../../../layers/support/FieldsIndex.js\";class C{constructor(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=n.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass=\"esri.arcade.featureset.support.FeatureSet\",this._featureCache=[],this.typeIdField=null,this.types=null,this.fields=null,this.geometryType=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,e&&e.lrucache&&(this.recentlyUsedQueries=e.lrucache),e&&e.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}optimisePagingFeatureQueries(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}_hasMemorySource(){return!0}prop(e,t){return void 0===t?this[e]:(void 0!==this[e]&&(this[e]=t),this)}end(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}_ensureLoaded(){return this.load()}load(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise}async loadImpl(){return!0===this._parent?.loaded?(this._initialiseFeatureSet(),this):(await(this._parent?.load()),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField=\"\",this.objectIdField=\"\",this.globalIdField=\"\",this.spatialReference=new k({wkid:4326}),this.geometryType=i.point)}getField(e,t){let s;return(t=t||this.fields)&&(e=e.toLowerCase(),t.some((t=>(t&&t.name.toLowerCase()===e&&(s=t),!!s)))),s}getFieldsIndex(){return null===this._fieldsIndex&&(this._fieldsIndex=new x(this.fields)),this._fieldsIndex}_maxProcessingRate(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}_maxQueryRate(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}_checkCancelled(e){if(null!=e&&e.aborted)throw new t(s.Cancelled)}nativeCapabilities(){return this._parent.nativeCapabilities()}async _canDoAggregates(e,t,s,a,r){return null!==this._parent&&this._parent._canDoAggregates(e,t,s,a,r)}async _getAggregatePagesDataSourceDefinition(e,a,r,n,i,l,u){if(null===this._parent)throw new t(s.NeverReach);return this._parent._getAggregatePagesDataSourceDefinition(e,a,r,n,i,l,u)}async _getAgregagtePhysicalPage(e,a,r){if(null===this._parent)throw new t(s.NeverReach);return this._parent._getAgregagtePhysicalPage(e,a,r)}async databaseType(){if(this._databaseType===n.NotEvaluated){if(null!==e.applicationCache){const t=e.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());if(null!==t)return t}if(null!==this._databaseTypeProbed)return this._databaseTypeProbed;try{this._databaseTypeProbed=this._getDatabaseTypeImpl(),null!==e.applicationCache&&e.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(),this._databaseTypeProbed)}catch(t){throw null!==e.applicationCache&&e.applicationCache.clearDatabaseType(this._cacheableFeatureSetSourceKey()),t}return this._databaseTypeProbed}return this._databaseType}async _getDatabaseTypeImpl(){const e=[{thetype:n.SqlServer,testwhere:\"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0\"},{thetype:n.Oracle,testwhere:\"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0\"},{thetype:n.StandardisedNoInterval,testwhere:\"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0\"}];for(const t of e){if(!0===await this._runDatabaseProbe(t.testwhere))return t.thetype}return n.StandardisedNoInterval}_cacheableFeatureSetSourceKey(){return\"MUSTBESET\"}async _runDatabaseProbe(e){if(null!==this._parent)return this._parent._runDatabaseProbe(e);throw new t(s.NotImplemented)}isTable(){return this._parent?.isTable()??!1}_featureFromCache(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}_isInFeatureSet(e){return l.Unknown}_getSet(e){throw new t(s.NotImplemented)}async _getFeature(e,a,r){if(this._checkCancelled(r),void 0!==this._featureFromCache(a))return this._featureFromCache(a);if(await this._getFeatures(e,a,this._maxProcessingRate(),r),this._checkCancelled(r),void 0!==this._featureFromCache(a))return this._featureFromCache(a);throw new t(s.MissingFeatures)}async _getFeatureBatch(e,t){this._checkCancelled(t);const s=new r([],e,!1,null),a=[];await this._getFeatures(s,-1,e.length,t),this._checkCancelled(t);for(const r of e)void 0!==this._featureFromCache(r)&&a.push(this._featureFromCache(r));return a}async _getFeatures(e,t,s,a){return\"success\"}_getFilteredSet(e,a,r,n,i){throw new t(s.NotImplemented)}async _refineSetBlock(e,t,s){if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQueryRate()))return await this._expandPagedSet(e,this._maxQueryRate(),0,0,s),this._refineSetBlock(e,t,s);this._checkCancelled(s);const a=e._candidates.length;this._refineKnowns(e,t);let r=a-e._candidates.length;if(0===e._candidates.length)return e;if(r>=t)return e;if(await this._refineIfParentKnown(e,t-r,s),this._checkCancelled(s),this._refineKnowns(e,t-r),r=a-e._candidates.length,r<t&&e._candidates.length>0){const a=t-r,n=this._prepareFetchAndRefineSet(e._candidates);return await this._fetchAndRefineFeatures(n,n.length>a?a:e._candidates.length,s),this._checkCancelled(s),this._refineKnowns(e,t-r),e}return e}_fetchAndRefineFeatures(e,t,s){return null}_prepareFetchAndRefineSet(e){const t=[];for(let s=0;s<e.length;s++)this._isPhysicalFeature(e[s])&&t.push(e[s]);return t}_isPhysicalFeature(e){return null===this._parent||this._parent._isPhysicalFeature(e)}_refineKnowns(e,t){let s=0,a=null;const r=[];t=this._maxQueryRate();for(let n=0;n<e._candidates.length&&\"GETPAGES\"!==e._candidates[n];n++){let i=!1;const u=this._candidateIdTransform(e._candidates[n]);u!==e._candidates[n]&&(i=!0);const h=this._isInFeatureSet(u);if(h===l.InFeatureSet)!0===i?e._known.includes(u)||(e._known.push(u),s+=1):(e._known.push(e._candidates[n]),s+=1),null===a?a={start:n,end:n}:a.end===n-1?a.end=n:(r.push(a),a={start:n,end:n});else if(h===l.NotInFeatureSet)null===a?a={start:n,end:n}:a.end===n-1?a.end=n:(r.push(a),a={start:n,end:n}),s+=1;else if(h===l.Unknown&&(s+=1,!0===e._ordered))break;if(s>=t)break}null!==a&&r.push(a);for(let n=r.length-1;n>=0;n--)e._candidates.splice(r[n].start,r[n].end-r[n].start+1)}_refineIfParentKnown(e,t,s){const a=new r([],[],e._ordered,null);return a._candidates=e._candidates.slice(0),this._parent._refineSetBlock(a,t,s)}_candidateIdTransform(e){return this._parent._candidateIdTransform(e)}_checkIfNeedToExpandKnownPage(e,t){if(null===e.pagesDefinition)return!1;let s=0;for(let a=e._lastFetchedIndex;a<e._known.length;a++){if(\"GETPAGES\"===e._known[a])return!0;if(void 0===this._featureCache[e._known[a]]&&(s+=1,s>=t))break}return!1}_checkIfNeedToExpandCandidatePage(e,t){if(null===e.pagesDefinition)return!1;let s=0;for(let a=0;a<e._candidates.length;a++){if(\"GETPAGES\"===e._candidates[a])return!0;if(s+=1,s>=t)break}return!1}async _expandPagedSet(e,a,r,n,i){if(null===this._parent)throw new t(s.NotImplemented);return this._parent._expandPagedSet(e,a,r,n,i)}async _expandPagedSetFeatureSet(e,t,s,a,r){if(e._known.length>0&&\"GETPAGES\"===e._known[e._known.length-1]&&(a=1),0===a&&e._candidates.length>0&&\"GETPAGES\"===e._candidates[e._candidates.length-1]&&(a=2),0===a)return\"finished\";const n=await this._getPage(e,a,r);return s+n<t?this._expandPagedSet(e,t,s+n,0,r):\"success\"}async _getPage(e,t,s){const a=1===t?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){a.length=a.length-1;let t=0;for(let r=0;r<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+r>=e.pagesDefinition.internal.set.length);r++)a[a.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+r],t++;e.pagesDefinition.resultOffset+=t;let s=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(s=!0),!1===s&&a.push(\"GETPAGES\"),t}return await this._getPhysicalPage(e,t,s),this._getPage(e,t,s)}_getPhysicalPage(e,t,s){return null}_clonePageDefinition(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}_first(e){return this.iterator(e).next()}first(e){return this._first(e)}async calculateStatistic(e,t,s,a){await this._ensureLoaded();let r=await this._stat(e,t,\"\",null,null,s,a);return!1===r.calculated&&(r=await this._manualStat(e,t,s,a)),r.result}async _manualStat(e,t,s,a){let r=null;switch(e.toLowerCase()){case\"count\":return r=await b(this,a),{calculated:!0,result:r};case\"distinct\":return r=await m(this,t,s,a),{calculated:!0,result:r};case\"avg\":case\"mean\":return r=await y(this,t,a),{calculated:!0,result:r};case\"stdev\":return r=await g(this,t,a),{calculated:!0,result:r};case\"variance\":return r=await f(this,t,a),{calculated:!0,result:r};case\"sum\":return r=await p(this,t,a),{calculated:!0,result:r};case\"min\":return r=await _(this,t,a),{calculated:!0,result:r};case\"max\":return r=await d(this,t,a),{calculated:!0,result:r};default:return{calculated:!0,result:0}}}async _stat(e,t,s,a,r,n,i){const l=await this._parent._stat(e,t,s,a,r,n,i);return!1===l.calculated?null===r&&\"\"===s&&null===a?this._manualStat(e,t,n,i):{calculated:!1}:l}_unionAllGeomSelf(e){const t=this.iterator(this._defaultTracker(e)),s=[];return new Promise(((e,a)=>{this._unionShapeInBatches(s,t,e,a)}))}_unionAllGeom(e){return new Promise(((t,s)=>{const a=this.iterator(this._defaultTracker(e)),r=[];this._unionShapeInBatches(r,a,t,s)}))}_unionShapeInBatches(e,t,s,a){t.next().then((r=>{try{null!==r&&null!==r.geometry&&e.push(r.geometry),e.length>30||null===r&&e.length>1?S(e).then((n=>{try{null===r?s(n):(e=[n],this._unionShapeInBatches(e,t,s,a))}catch(i){a(i)}}),a):null===r?1===e.length?s(e[0]):s(null):this._unionShapeInBatches(e,t,s,a)}catch(n){a(n)}}),a)}iterator(e){return new a(this,e)}intersection(e,t=!1){return C._featuresetFunctions.intersection.bind(this)(e,t)}difference(e,t=!1,s=!0){return C._featuresetFunctions.difference.bind(this)(e,t,s)}symmetricDifference(e,t=!1,s=!0){return C._featuresetFunctions.symmetricDifference.bind(this)(e,t,s)}morphShape(e,t,s=\"unknown\",a=null){return C._featuresetFunctions.morphShape.bind(this)(e,t,s,a)}morphShapeAndAttributes(e,t,s=\"unknown\"){return C._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,t,s)}union(e,t=!1){return C._featuresetFunctions.union.bind(this)(e,t)}intersects(e){return C._featuresetFunctions.intersects.bind(this)(e)}envelopeIntersects(e){return C._featuresetFunctions.envelopeIntersects.bind(this)(e)}contains(e){return C._featuresetFunctions.contains.bind(this)(e)}overlaps(e){return C._featuresetFunctions.overlaps.bind(this)(e)}relate(e,t){return C._featuresetFunctions.relate.bind(this)(e,t)}within(e){return C._featuresetFunctions.within.bind(this)(e)}touches(e){return C._featuresetFunctions.touches.bind(this)(e)}top(e){return C._featuresetFunctions.top.bind(this)(e)}crosses(e){return C._featuresetFunctions.crosses.bind(this)(e)}buffer(e,t,s,a=!0){return C._featuresetFunctions.buffer.bind(this)(e,t,s,a)}filter(e,t=null){return C._featuresetFunctions.filter.bind(this)(e,t)}orderBy(e){return C._featuresetFunctions.orderBy.bind(this)(e)}dissolve(e,t){return C._featuresetFunctions.dissolve.bind(this)(e,t)}groupby(e,t){return C._featuresetFunctions.groupby.bind(this)(e,t)}reduce(e,t=null,s){return new Promise(((a,r)=>{this._reduceImpl(this.iterator(this._defaultTracker(s)),e,t,0,a,r,0)}))}_reduceImpl(e,t,s,a,r,n,i){try{if(++i>1e3)return void setTimeout((()=>{i=0,this._reduceImpl(e,t,s,a,r,n,i)}));e.next().then((l=>{try{if(null===l)r(s);else{const u=t(s,l,a,this);F(u)?u.then((s=>{this._reduceImpl(e,t,s,a+1,r,n,i)}),n):this._reduceImpl(e,t,u,a+1,r,n,i)}}catch(u){n(u)}}),n)}catch(l){n(l)}}removeField(e){return C._featuresetFunctions.removeField.bind(this)(e)}addField(e,t,s=null){return C._featuresetFunctions.addField.bind(this)(e,t,s)}sumArea(e,t=!1,s){const a=u(e);return this.reduce(((e,s)=>null===s.geometry?0:t?I(s.geometry,a).then((t=>e+t)):T(s.geometry,a).then((t=>e+t))),0,s)}sumLength(e,t=!1,s){const a=h(e);return this.reduce(((e,s)=>null===s.geometry?0:t?P(s.geometry,a).then((t=>e+t)):D(s.geometry,a).then((t=>e+t))),0,s)}_substituteVars(e,t){if(null!==t){const s={};for(const e in t)s[e.toLowerCase()]=t[e];e.parameters=s}}async distinct(e,t=1e3,s=null,a){await this.load();const r=w.create(e,this.getFieldsIndex());return this._substituteVars(r,s),this.calculateStatistic(\"distinct\",r,t,this._defaultTracker(a))}async min(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"min\",a,-1,this._defaultTracker(s))}async max(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"max\",a,-1,this._defaultTracker(s))}async avg(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"avg\",a,-1,this._defaultTracker(s))}async sum(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"sum\",a,-1,this._defaultTracker(s))}async stdev(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"stdev\",a,-1,this._defaultTracker(s))}async variance(e,t=null,s){await this.load();const a=w.create(e,this.getFieldsIndex());return this._substituteVars(a,t),this.calculateStatistic(\"variance\",a,-1,this._defaultTracker(s))}async count(e){return await this.load(),this.calculateStatistic(\"count\",w.create(\"1\",this.getFieldsIndex()),-1,this._defaultTracker(e))}_defaultTracker(e){return e||{aborted:!1}}forEach(e,t){return new Promise(((s,a)=>{this._forEachImpl(this.iterator(this._defaultTracker(t)),e,this,s,a,0)}))}_forEachImpl(e,t,s,a,r,n){try{if(++n>1e3)return void setTimeout((()=>{n=0,this._forEachImpl(e,t,s,a,r,n)}),0);e.next().then((i=>{try{if(null===i)a(s);else{const l=t(i);null==l?this._forEachImpl(e,t,s,a,r,n):F(l)?l.then((()=>{try{this._forEachImpl(e,t,s,a,r,n)}catch(i){r(i)}}),r):this._forEachImpl(e,t,s,a,r,n)}}catch(l){r(l)}}),r)}catch(i){r(i)}}convertToJSON(e){const t={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let s=0;s<this.fields.length;s++)t.layerDefinition.fields.push(c(this.fields[s]));return this.reduce(((e,s)=>{const a={geometry:s.geometry&&s.geometry.toJSON(),attributes:{}};for(const t in s.attributes)a.attributes[t]=s.attributes[t];return t.featureSet.features.push(a),1}),0,e).then((()=>t))}castToText(e=!1){return\"object, FeatureSet\"}queryAttachments(e,t,s,a,r){return this._parent.queryAttachments(e,t,s,a,r)}serviceUrl(){return this._parent.serviceUrl()}subtypes(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map((e=>({name:e.name,code:e.id}))):[]}:null}relationshipMetaData(){return this._parent.relationshipMetaData()}get gdbVersion(){return this._parent?this._parent.gdbVersion:\"\"}schema(){const e=[];for(const t of this.fields)e.push(c(t));return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===o[this.geometryType]?\"\":o[this.geometryType],fields:e}}async convertToText(e,t){if(\"schema\"===e)return await this._ensureLoaded(),JSON.stringify(this.schema());if(\"featureset\"===e){await this._ensureLoaded();const e=[];await this.reduce(((t,s)=>{const a={geometry:s.geometry?s.geometry.toJSON():null,attributes:s.attributes};return null!==a.geometry&&a.geometry.spatialReference&&delete a.geometry.spatialReference,e.push(a),1}),0,t);const s=this.schema();return s.features=e,s.spatialReference=this.spatialReference.toJSON(),JSON.stringify(s)}return this.castToText()}getFeatureByObjectId(e,t){return this._parent.getFeatureByObjectId(e,t)}getOwningSystemUrl(){return this._parent.getOwningSystemUrl()}getIdentityUser(){return this._parent.getIdentityUser()}getRootFeatureSet(){return null!==this._parent?this._parent.getRootFeatureSet():this}getDataSourceFeatureSet(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this}castAsJson(e=null){return\"keeptype\"===e?.featureset?this:\"none\"===e?.featureset?null:{type:\"FeatureSet\"}}async castAsJsonAsync(e=null,t=null){if(\"keeptype\"===t?.featureset)return this;if(\"schema\"===t?.featureset)return await this._ensureLoaded(),JSON.parse(JSON.stringify(this.schema()));if(\"none\"===t?.featureset)return null;await this._ensureLoaded();const s=[];await this.reduce(((e,a)=>{const r={geometry:a.geometry?!0===t?.keepGeometryType?a.geometry:a.geometry.toJSON():null,attributes:a.attributes};return null!==r.geometry&&r.geometry.spatialReference&&!0!==t?.keepGeometryType&&delete r.geometry.spatialReference,s.push(r),1}),0,e);const a=this.schema();return a.features=s,a.spatialReference=!0===t?.keepGeometryType?this.spatialReference:this.spatialReference?.toJSON(),a}}C._featuresetFunctions={};export{C as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}