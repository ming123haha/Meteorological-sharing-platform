{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { secondsFromMilliseconds as e } from \"../../../../core/time.js\";\nimport { f as t } from \"../../../../chunks/vec2f64.js\";\nimport { f as i } from \"../../../../chunks/vec4f64.js\";\nimport { ShaderOutput as r } from \"../core/shaderLibrary/ShaderOutputOptions.js\";\nimport { AnimationTimer as s } from \"../lib/AnimationTimer.js\";\nimport { outputFromPass as a } from \"../lib/GLMaterials.js\";\nimport { Material as n, MaterialParameters as o } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as h } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as c } from \"../lib/RenderSlot.js\";\nimport { WaterGLMaterial as p } from \"./WaterGLMaterial.js\";\nimport { WaterTechniqueConfiguration as l } from \"./WaterTechnique.js\";\nimport { DefaultBufferWriter as m, PositionUVLayout as u } from \"./internal/DefaultBufferWriter.js\";\nimport { intersectTriangleGeometry as f } from \"./internal/MaterialUtil.js\";\n\nclass d extends n {\n  constructor(e) {\n    super(e, new A()), this._techniqueConfig = new l(), this.animation = new s();\n  }\n\n  getConfiguration(e, t) {\n    return this._techniqueConfig.output = e, this._techniqueConfig.writeDepth = this.parameters.writeDepth, this._techniqueConfig.receiveShadows = this.parameters.receiveShadows, this._techniqueConfig.hasSlicePlane = this.parameters.hasSlicePlane, this._techniqueConfig.transparent = this.parameters.transparent, this._techniqueConfig.hasScreenSpaceReflections = this.parameters.hasScreenSpaceReflections, this._techniqueConfig.hasCloudsReflections = this.parameters.hasCloudsReflections, this._techniqueConfig.isDraped = this.parameters.isDraped, this._techniqueConfig.transparencyPassType = t.transparencyPassType, this._techniqueConfig.enableOffset = t.camera.relativeElevation < h, this._techniqueConfig.hasMultipassTerrain = t.multipassTerrain.enabled, this._techniqueConfig.cullAboveGround = t.multipassTerrain.cullAboveGround, this._techniqueConfig;\n  }\n\n  update(t) {\n    const i = Math.min(t.camera.relativeElevation, t.camera.distance);\n    this.animation.enabled = Math.sqrt(this.parameters.waveTextureRepeat / this.parameters.waveStrength) * i < R;\n    const r = this.animation.advance(t);\n    return this.setParameters({\n      timeElapsed: e(this.animation.time) * this.parameters.animationSpeed\n    }, !1), this.animation.enabled && r;\n  }\n\n  intersect(e, t, i, r, s, a, n) {\n    f(e, t, r, s, a, void 0, n);\n  }\n\n  requiresSlot(e, t) {\n    switch (a(t)) {\n      case r.Normal:\n        return e === c.DRAPED_WATER;\n\n      case r.Color:\n        if (this.parameters.isDraped) return e === c.DRAPED_MATERIAL;\n        break;\n\n      case r.Highlight:\n        return e === c.OPAQUE_MATERIAL || e === c.DRAPED_MATERIAL;\n    }\n\n    let i = c.OPAQUE_MATERIAL;\n    return this.parameters.transparent && (i = this.parameters.writeDepth ? c.TRANSPARENT_MATERIAL : c.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL), e === i;\n  }\n\n  createGLMaterial(e) {\n    if (e.output === r.Color && this.parameters.isDraped) return e.output = r.Draped, new p(e);\n\n    switch (e.output) {\n      case r.Color:\n      case r.Normal:\n      case r.Highlight:\n      case r.Alpha:\n        return new p(e);\n    }\n\n    return null;\n  }\n\n  createBufferWriter() {\n    return new m(u);\n  }\n\n}\n\nclass A extends o {\n  constructor() {\n    super(...arguments), this.waveStrength = .06, this.waveTextureRepeat = 32, this.waveDirection = t(1, 0), this.waveVelocity = .05, this.flowStrength = .015, this.flowOffset = -.5, this.animationSpeed = .35, this.timeElapsed = 0, this.color = i(0, 0, 0, 0), this.transparent = !0, this.writeDepth = !0, this.hasSlicePlane = !1, this.isDraped = !1, this.receiveShadows = !0, this.hasScreenSpaceReflections = !1, this.hasCloudsReflections = !1;\n  }\n\n}\n\nconst R = 35e3;\nexport { d as WaterMaterial, A as WaterMaterialParameters };","map":{"version":3,"names":["secondsFromMilliseconds","e","f","t","i","ShaderOutput","r","AnimationTimer","s","outputFromPass","a","Material","n","MaterialParameters","o","OITPolygonOffsetLimit","h","RenderSlot","c","WaterGLMaterial","p","WaterTechniqueConfiguration","l","DefaultBufferWriter","m","PositionUVLayout","u","intersectTriangleGeometry","d","constructor","A","_techniqueConfig","animation","getConfiguration","output","writeDepth","parameters","receiveShadows","hasSlicePlane","transparent","hasScreenSpaceReflections","hasCloudsReflections","isDraped","transparencyPassType","enableOffset","camera","relativeElevation","hasMultipassTerrain","multipassTerrain","enabled","cullAboveGround","update","Math","min","distance","sqrt","waveTextureRepeat","waveStrength","R","advance","setParameters","timeElapsed","time","animationSpeed","intersect","requiresSlot","Normal","DRAPED_WATER","Color","DRAPED_MATERIAL","Highlight","OPAQUE_MATERIAL","TRANSPARENT_MATERIAL","TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL","createGLMaterial","Draped","Alpha","createBufferWriter","arguments","waveDirection","waveVelocity","flowStrength","flowOffset","color","WaterMaterial","WaterMaterialParameters"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{secondsFromMilliseconds as e}from\"../../../../core/time.js\";import{f as t}from\"../../../../chunks/vec2f64.js\";import{f as i}from\"../../../../chunks/vec4f64.js\";import{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{AnimationTimer as s}from\"../lib/AnimationTimer.js\";import{outputFromPass as a}from\"../lib/GLMaterials.js\";import{Material as n,MaterialParameters as o}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as h}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as c}from\"../lib/RenderSlot.js\";import{WaterGLMaterial as p}from\"./WaterGLMaterial.js\";import{WaterTechniqueConfiguration as l}from\"./WaterTechnique.js\";import{DefaultBufferWriter as m,PositionUVLayout as u}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as f}from\"./internal/MaterialUtil.js\";class d extends n{constructor(e){super(e,new A),this._techniqueConfig=new l,this.animation=new s}getConfiguration(e,t){return this._techniqueConfig.output=e,this._techniqueConfig.writeDepth=this.parameters.writeDepth,this._techniqueConfig.receiveShadows=this.parameters.receiveShadows,this._techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this._techniqueConfig.transparent=this.parameters.transparent,this._techniqueConfig.hasScreenSpaceReflections=this.parameters.hasScreenSpaceReflections,this._techniqueConfig.hasCloudsReflections=this.parameters.hasCloudsReflections,this._techniqueConfig.isDraped=this.parameters.isDraped,this._techniqueConfig.transparencyPassType=t.transparencyPassType,this._techniqueConfig.enableOffset=t.camera.relativeElevation<h,this._techniqueConfig.hasMultipassTerrain=t.multipassTerrain.enabled,this._techniqueConfig.cullAboveGround=t.multipassTerrain.cullAboveGround,this._techniqueConfig}update(t){const i=Math.min(t.camera.relativeElevation,t.camera.distance);this.animation.enabled=Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*i<R;const r=this.animation.advance(t);return this.setParameters({timeElapsed:e(this.animation.time)*this.parameters.animationSpeed},!1),this.animation.enabled&&r}intersect(e,t,i,r,s,a,n){f(e,t,r,s,a,void 0,n)}requiresSlot(e,t){switch(a(t)){case r.Normal:return e===c.DRAPED_WATER;case r.Color:if(this.parameters.isDraped)return e===c.DRAPED_MATERIAL;break;case r.Highlight:return e===c.OPAQUE_MATERIAL||e===c.DRAPED_MATERIAL}let i=c.OPAQUE_MATERIAL;return this.parameters.transparent&&(i=this.parameters.writeDepth?c.TRANSPARENT_MATERIAL:c.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===i}createGLMaterial(e){if(e.output===r.Color&&this.parameters.isDraped)return e.output=r.Draped,new p(e);switch(e.output){case r.Color:case r.Normal:case r.Highlight:case r.Alpha:return new p(e)}return null}createBufferWriter(){return new m(u)}}class A extends o{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=t(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=i(0,0,0,0),this.transparent=!0,this.writeDepth=!0,this.hasSlicePlane=!1,this.isDraped=!1,this.receiveShadows=!0,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1}}const R=35e3;export{d as WaterMaterial,A as WaterMaterialParameters};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}