{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../../../core/maybe.js\";\nimport { TEXTURE_BINDING_BITMAP as t } from \"../definitions.js\";\nimport { createProgramDescriptor as r } from \"../Utils.js\";\nimport s from \"./WGLBrush.js\";\nimport { BlendFactor as o, CompareFunction as n, PrimitiveType as a, DataType as i } from \"../../../../webgl/enums.js\";\n\nconst m = () => r(\"overlay\", {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: i.FLOAT\n  }],\n  tex: [{\n    location: 1,\n    name: \"a_uv\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }]\n});\n\nclass u extends s {\n  constructor() {\n    super(...arguments), this._desc = {\n      vsPath: \"overlay/overlay\",\n      fsPath: \"overlay/overlay\",\n      attributes: new Map([[\"a_pos\", 0], [\"a_uv\", 1]])\n    };\n  }\n\n  dispose() {}\n\n  prepareState({\n    context: e\n  }) {\n    e.setBlendingEnabled(!0), e.setColorMask(!0, !0, !0, !0), e.setBlendFunctionSeparate(o.ONE, o.ONE_MINUS_SRC_ALPHA, o.ONE, o.ONE_MINUS_SRC_ALPHA), e.setStencilWriteMask(0), e.setStencilTestEnabled(!0), e.setStencilFunction(n.GREATER, 255, 255);\n  }\n\n  draw(r, s) {\n    const {\n      context: o,\n      painter: n,\n      requestRender: i,\n      allowDelayedRender: u\n    } = r;\n    if (!s.isReady) return;\n    const {\n      computedOpacity: c,\n      dvsMat3: d,\n      isWrapAround: l,\n      perspectiveTransform: p,\n      texture: f\n    } = s;\n    r.timeline.begin(this.name);\n\n    const _ = n.materialManager.getProgram(this._desc);\n\n    if (u && e(i) && !_.isCompiled) return void i();\n    const v = m(),\n          y = s.getVAO(o, v.bufferLayouts, v.attributes);\n    if (!y) return;\n    o.bindVAO(y), o.useProgram(_), o.bindTexture(f, t), _.setUniformMatrix3fv(\"u_dvsMat3\", d), _.setUniform1i(\"u_texture\", t), _.setUniform1f(\"u_opacity\", c), _.setUniform2fv(\"u_perspective\", p);\n    const A = l ? 10 : 4;\n    o.drawArrays(a.TRIANGLE_STRIP, 0, A), o.bindVAO(), r.timeline.end(this.name);\n  }\n\n}\n\nexport { u as default };","map":{"version":3,"names":["isSome","e","TEXTURE_BINDING_BITMAP","t","createProgramDescriptor","r","s","BlendFactor","o","CompareFunction","n","PrimitiveType","a","DataType","i","m","geometry","location","name","count","type","FLOAT","tex","UNSIGNED_SHORT","u","constructor","arguments","_desc","vsPath","fsPath","attributes","Map","dispose","prepareState","context","setBlendingEnabled","setColorMask","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","setStencilWriteMask","setStencilTestEnabled","setStencilFunction","GREATER","draw","painter","requestRender","allowDelayedRender","isReady","computedOpacity","c","dvsMat3","d","isWrapAround","l","perspectiveTransform","p","texture","f","timeline","begin","_","materialManager","getProgram","isCompiled","v","y","getVAO","bufferLayouts","bindVAO","useProgram","bindTexture","setUniformMatrix3fv","setUniform1i","setUniform1f","setUniform2fv","A","drawArrays","TRIANGLE_STRIP","end","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushOverlay.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../../core/maybe.js\";import{TEXTURE_BINDING_BITMAP as t}from\"../definitions.js\";import{createProgramDescriptor as r}from\"../Utils.js\";import s from\"./WGLBrush.js\";import{BlendFactor as o,CompareFunction as n,PrimitiveType as a,DataType as i}from\"../../../../webgl/enums.js\";const m=()=>r(\"overlay\",{geometry:[{location:0,name:\"a_pos\",count:2,type:i.FLOAT}],tex:[{location:1,name:\"a_uv\",count:2,type:i.UNSIGNED_SHORT}]});class u extends s{constructor(){super(...arguments),this._desc={vsPath:\"overlay/overlay\",fsPath:\"overlay/overlay\",attributes:new Map([[\"a_pos\",0],[\"a_uv\",1]])}}dispose(){}prepareState({context:e}){e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setBlendFunctionSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),e.setStencilWriteMask(0),e.setStencilTestEnabled(!0),e.setStencilFunction(n.GREATER,255,255)}draw(r,s){const{context:o,painter:n,requestRender:i,allowDelayedRender:u}=r;if(!s.isReady)return;const{computedOpacity:c,dvsMat3:d,isWrapAround:l,perspectiveTransform:p,texture:f}=s;r.timeline.begin(this.name);const _=n.materialManager.getProgram(this._desc);if(u&&e(i)&&!_.isCompiled)return void i();const v=m(),y=s.getVAO(o,v.bufferLayouts,v.attributes);if(!y)return;o.bindVAO(y),o.useProgram(_),o.bindTexture(f,t),_.setUniformMatrix3fv(\"u_dvsMat3\",d),_.setUniform1i(\"u_texture\",t),_.setUniform1f(\"u_opacity\",c),_.setUniform2fv(\"u_perspective\",p);const A=l?10:4;o.drawArrays(a.TRIANGLE_STRIP,0,A),o.bindVAO(),r.timeline.end(this.name)}}export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}