{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport { Milliseconds as e } from \"../../../../../core/time.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/set.js\";\nimport { subclass as i } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as o, b as s, n as a, e as r, l as n, a as m, g as c, h as p } from \"../../../../../chunks/vec3.js\";\nimport { c as h, f as l } from \"../../../../../chunks/vec3f64.js\";\nimport { applyAll as C } from \"../../../camera/constraintUtils.js\";\nimport { ConstraintTypes as y, InteractionType as u, TiltMode as f } from \"../../../camera/constraintUtils/common.js\";\nimport { PointToPointAnimationController as g } from \"../PointToPointAnimationController.js\";\nimport { Camera as j } from \"../../../webgl-engine/lib/Camera.js\";\nimport { newIntersector as w } from \"../../../webgl-engine/lib/Intersector.js\";\nimport { TERRAIN_ID as b } from \"../../../webgl-engine/lib/verticalOffsetUtils.js\";\nimport { outExpo as v } from \"../../../../animation/easing.js\";\nconst L = .6,\n      d = 4,\n      z = 60,\n      M = 14,\n      S = 200;\nlet F = class extends g {\n  constructor() {\n    super(...arguments), this.zoomLocation = h(), this.tmpCamera = new j(), this.tmpRayDir = h(), this.tmpCenter = h(), this.constraintOptions = {\n      selection: y.ALL,\n      interactionType: u.ZOOM,\n      interactionFactor: null,\n      interactionStartCamera: new j(),\n      interactionDirection: null,\n      tiltMode: f.TUMBLE\n    };\n  }\n\n  zoomStep(t, e) {\n    if (!this.active) return;\n    const i = this.view.state,\n          {\n      interactionStartCamera: p\n    } = this.constraintOptions;\n    this.animation.finished ? p.copyFrom(i.camera) : this.animation.cameraAt(1, p), this.tmpCamera.copyFrom(i.camera);\n    const l = w(this.view.state.viewingMode);\n    t > 0 ? (0 === this.view.map.ground.opacity ? this.intersectionHelper.intersectScreenFreePointFallback(e, this.zoomLocation, O) : this.intersectionHelper.intersectScreenFreePointFallback(e, this.zoomLocation), this.intersectionHelper.intersectRay(this.tmpCamera.ray, l, this.tmpCenter) && (this.tmpCamera.center = this.tmpCenter)) : this.intersectionHelper.intersectRay(this.tmpCamera.ray, l, this.zoomLocation) ? this.tmpCamera.center = this.zoomLocation : o(this.zoomLocation, this.tmpCamera.center);\n    const C = L ** t;\n\n    let y = this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm, e[0], e[1], this.view.state.camera, z);\n\n    s(x, this.tmpCamera.eye, this.zoomLocation), a(x, x);\n    const u = Math.max(Math.min(M, 1 / Math.abs(r(R, x))) * Math.abs(this.view.camera.position.z), S);\n\n    if (y = y ? Math.min(y, u) : u, y) {\n      const t = h();\n      s(t, this.zoomLocation, this.tmpCamera.eye), y < n(t) && (a(t, t), m(this.zoomLocation, this.tmpCamera.eye, c(t, t, y)));\n    }\n\n    this._updateCamera(this.tmpCamera, C, this.zoomLocation), this.begin(this.tmpCamera);\n  }\n\n  animationSettings() {\n    return {\n      apex: null,\n      duration: e(600),\n      easing: v\n    };\n  }\n\n  _updateCamera(t, e, i) {\n    s(this.tmpRayDir, i, t.eye);\n    const o = n(this.tmpRayDir);\n    let a = o * e;\n    const r = e <= 1,\n          m = Math.max(d, 1.01 * t.nearFar[0]);\n    r && a < m && (a = m, e = a / o), Math.abs(o - a) < 1e-6 || (c(this.tmpRayDir, this.tmpRayDir, e), t.eye = s(D, i, this.tmpRayDir), t.center = p(D, t.center, i, 1 - e), C(this.view, t, this.constraintOptions));\n  }\n\n};\nF = t([i(\"esri.views.3d.state.controllers.local.ZoomStepController\")], F);\nconst D = h(),\n      R = l(0, 0, 1),\n      x = h(),\n      O = {\n  exclude: new Set([b])\n};\nexport { F as ZoomStepController };","map":{"version":3,"names":["_","t","Milliseconds","e","subclass","i","c","o","b","s","n","a","r","l","m","g","h","p","f","applyAll","C","ConstraintTypes","y","InteractionType","u","TiltMode","PointToPointAnimationController","Camera","j","newIntersector","w","TERRAIN_ID","outExpo","v","L","d","z","M","S","F","constructor","arguments","zoomLocation","tmpCamera","tmpRayDir","tmpCenter","constraintOptions","selection","ALL","interactionType","ZOOM","interactionFactor","interactionStartCamera","interactionDirection","tiltMode","TUMBLE","zoomStep","active","view","state","animation","finished","copyFrom","camera","cameraAt","viewingMode","map","ground","opacity","intersectionHelper","intersectScreenFreePointFallback","O","intersectRay","ray","center","_stage","renderView","getMinimalDepthForArea","voxelWasm","x","eye","Math","max","min","abs","R","position","_updateCamera","begin","animationSettings","apex","duration","easing","nearFar","D","exclude","Set","ZoomStepController"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/state/controllers/local/ZoomStepController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import{Milliseconds as e}from\"../../../../../core/time.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/set.js\";import{subclass as i}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as o,b as s,n as a,e as r,l as n,a as m,g as c,h as p}from\"../../../../../chunks/vec3.js\";import{c as h,f as l}from\"../../../../../chunks/vec3f64.js\";import{applyAll as C}from\"../../../camera/constraintUtils.js\";import{ConstraintTypes as y,InteractionType as u,TiltMode as f}from\"../../../camera/constraintUtils/common.js\";import{PointToPointAnimationController as g}from\"../PointToPointAnimationController.js\";import{Camera as j}from\"../../../webgl-engine/lib/Camera.js\";import{newIntersector as w}from\"../../../webgl-engine/lib/Intersector.js\";import{TERRAIN_ID as b}from\"../../../webgl-engine/lib/verticalOffsetUtils.js\";import{outExpo as v}from\"../../../../animation/easing.js\";const L=.6,d=4,z=60,M=14,S=200;let F=class extends g{constructor(){super(...arguments),this.zoomLocation=h(),this.tmpCamera=new j,this.tmpRayDir=h(),this.tmpCenter=h(),this.constraintOptions={selection:y.ALL,interactionType:u.ZOOM,interactionFactor:null,interactionStartCamera:new j,interactionDirection:null,tiltMode:f.TUMBLE}}zoomStep(t,e){if(!this.active)return;const i=this.view.state,{interactionStartCamera:p}=this.constraintOptions;this.animation.finished?p.copyFrom(i.camera):this.animation.cameraAt(1,p),this.tmpCamera.copyFrom(i.camera);const l=w(this.view.state.viewingMode);t>0?(0===this.view.map.ground.opacity?this.intersectionHelper.intersectScreenFreePointFallback(e,this.zoomLocation,O):this.intersectionHelper.intersectScreenFreePointFallback(e,this.zoomLocation),this.intersectionHelper.intersectRay(this.tmpCamera.ray,l,this.tmpCenter)&&(this.tmpCamera.center=this.tmpCenter)):this.intersectionHelper.intersectRay(this.tmpCamera.ray,l,this.zoomLocation)?this.tmpCamera.center=this.zoomLocation:o(this.zoomLocation,this.tmpCamera.center);const C=L**t;let y=this.view._stage.renderView.getMinimalDepthForArea(this.view.voxelWasm,e[0],e[1],this.view.state.camera,z);s(x,this.tmpCamera.eye,this.zoomLocation),a(x,x);const u=Math.max(Math.min(M,1/Math.abs(r(R,x)))*Math.abs(this.view.camera.position.z),S);if(y=y?Math.min(y,u):u,y){const t=h();s(t,this.zoomLocation,this.tmpCamera.eye),y<n(t)&&(a(t,t),m(this.zoomLocation,this.tmpCamera.eye,c(t,t,y)))}this._updateCamera(this.tmpCamera,C,this.zoomLocation),this.begin(this.tmpCamera)}animationSettings(){return{apex:null,duration:e(600),easing:v}}_updateCamera(t,e,i){s(this.tmpRayDir,i,t.eye);const o=n(this.tmpRayDir);let a=o*e;const r=e<=1,m=Math.max(d,1.01*t.nearFar[0]);r&&a<m&&(a=m,e=a/o),Math.abs(o-a)<1e-6||(c(this.tmpRayDir,this.tmpRayDir,e),t.eye=s(D,i,this.tmpRayDir),t.center=p(D,t.center,i,1-e),C(this.view,t,this.constraintOptions))}};F=t([i(\"esri.views.3d.state.controllers.local.ZoomStepController\")],F);const D=h(),R=l(0,0,1),x=h(),O={exclude:new Set([b])};export{F as ZoomStepController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}