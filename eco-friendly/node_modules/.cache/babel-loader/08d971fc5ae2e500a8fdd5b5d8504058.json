{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { removeUnordered as e } from \"../../../core/arrayUtils.js\";\nimport t from \"../../../core/Handles.js\";\nimport { makeHandle as s } from \"../../../core/handleUtils.js\";\nimport { watch as i, sync as r } from \"../../../core/reactiveUtils.js\";\nimport { getReferenceEllipsoid as n } from \"../../../geometry/projectionEllipsoid.js\";\nimport { ClientType as c } from \"./index.js\";\nimport { StreamTextureCollection as a } from \"./StreamTextureCollection.js\";\nimport { getSettings as o, getLabelSettings as p } from \"../webgl-engine/lib/screenSizePerspectiveUtils.js\";\nimport { TextureWrapMode as l } from \"../../webgl/enums.js\";\n\nclass h {\n  constructor(e) {\n    this.textures = null, this.streamDataRequester = null, this.graphicsOwners = [], this.screenSizePerspectiveHandles = null, this.cimSymbolRasterizer = null, this.viewState = e.viewState, this.view = e.view, this.pointsOfInterest = e.pointsOfInterest, this.objectResourceCache = e.objectResourceCache, this.streamDataRequester = e.resourceController.createStreamDataRequester(c.SYMBOLOGY), this.textures = new a(this.streamDataRequester, e.view._stage, {\n      preMultiplyAlpha: !0,\n      wrap: {\n        s: l.CLAMP_TO_EDGE,\n        t: l.CLAMP_TO_EDGE\n      }\n    }, e.resourceController.scheduler);\n    const t = n(this.view.spatialReference).radius;\n    this.screenSizePerspectiveSettings = o(e.viewingMode, t), this.screenSizePerspectiveSettingsLabels = p(e.viewingMode, t);\n  }\n\n  destroy() {\n    this.textures.destroy(), this.textures = null, this.streamDataRequester = null;\n  }\n\n  addGraphicsOwner(t) {\n    if (!t) return s();\n    this.graphicsOwners.push(t);\n    const r = i(() => t.layer?.screenSizePerspectiveEnabled, () => this._updateScreenSizePerspectiveEnabled());\n    return this._updateScreenSizePerspectiveEnabled(), s(() => {\n      r.remove(), e(this.graphicsOwners, t), this._updateScreenSizePerspectiveEnabled();\n    });\n  }\n\n  _updateScreenSizePerspectiveEnabled() {\n    const e = this.graphicsOwners.some(e => !0 === e.layer?.screenSizePerspectiveEnabled);\n\n    if (e && !this.screenSizePerspectiveHandles) {\n      this.screenSizePerspectiveHandles = new t();\n\n      const e = () => this._updateScreenSizePerspectiveSettings();\n\n      this.screenSizePerspectiveHandles.add([i(() => this.pointsOfInterest.centerOnSurfaceInfrequent.distance, e, r), this.viewState.events.on(\"camera-projection-changed\", e)]), this._updateScreenSizePerspectiveSettings();\n    } else !e && this.screenSizePerspectiveHandles && (this.screenSizePerspectiveHandles.destroy(), this.screenSizePerspectiveHandles = null);\n  }\n\n  _updateScreenSizePerspectiveSettings() {\n    const e = this.pointsOfInterest;\n    S.distance = e.centerOnSurfaceInfrequent.distance, S.fovY = this.viewState.camera.fovY, this.screenSizePerspectiveSettings.update(S), this.screenSizePerspectiveSettingsLabels.update(S), this.view._stage.renderView.requestRender();\n  }\n\n  get test() {\n    return {\n      screenSizePerspectiveHandles: this.screenSizePerspectiveHandles\n    };\n  }\n\n}\n\nconst S = {\n  distance: 0,\n  fovY: 0\n};\nexport { h as SharedSymbolResources };","map":{"version":3,"names":["removeUnordered","e","t","makeHandle","s","watch","i","sync","r","getReferenceEllipsoid","n","ClientType","c","StreamTextureCollection","a","getSettings","o","getLabelSettings","p","TextureWrapMode","l","h","constructor","textures","streamDataRequester","graphicsOwners","screenSizePerspectiveHandles","cimSymbolRasterizer","viewState","view","pointsOfInterest","objectResourceCache","resourceController","createStreamDataRequester","SYMBOLOGY","_stage","preMultiplyAlpha","wrap","CLAMP_TO_EDGE","scheduler","spatialReference","radius","screenSizePerspectiveSettings","viewingMode","screenSizePerspectiveSettingsLabels","destroy","addGraphicsOwner","push","layer","screenSizePerspectiveEnabled","_updateScreenSizePerspectiveEnabled","remove","some","_updateScreenSizePerspectiveSettings","add","centerOnSurfaceInfrequent","distance","events","on","S","fovY","camera","update","renderView","requestRender","test","SharedSymbolResources"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/support/SharedSymbolResources.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{removeUnordered as e}from\"../../../core/arrayUtils.js\";import t from\"../../../core/Handles.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as i,sync as r}from\"../../../core/reactiveUtils.js\";import{getReferenceEllipsoid as n}from\"../../../geometry/projectionEllipsoid.js\";import{ClientType as c}from\"./index.js\";import{StreamTextureCollection as a}from\"./StreamTextureCollection.js\";import{getSettings as o,getLabelSettings as p}from\"../webgl-engine/lib/screenSizePerspectiveUtils.js\";import{TextureWrapMode as l}from\"../../webgl/enums.js\";class h{constructor(e){this.textures=null,this.streamDataRequester=null,this.graphicsOwners=[],this.screenSizePerspectiveHandles=null,this.cimSymbolRasterizer=null,this.viewState=e.viewState,this.view=e.view,this.pointsOfInterest=e.pointsOfInterest,this.objectResourceCache=e.objectResourceCache,this.streamDataRequester=e.resourceController.createStreamDataRequester(c.SYMBOLOGY),this.textures=new a(this.streamDataRequester,e.view._stage,{preMultiplyAlpha:!0,wrap:{s:l.CLAMP_TO_EDGE,t:l.CLAMP_TO_EDGE}},e.resourceController.scheduler);const t=n(this.view.spatialReference).radius;this.screenSizePerspectiveSettings=o(e.viewingMode,t),this.screenSizePerspectiveSettingsLabels=p(e.viewingMode,t)}destroy(){this.textures.destroy(),this.textures=null,this.streamDataRequester=null}addGraphicsOwner(t){if(!t)return s();this.graphicsOwners.push(t);const r=i((()=>t.layer?.screenSizePerspectiveEnabled),(()=>this._updateScreenSizePerspectiveEnabled()));return this._updateScreenSizePerspectiveEnabled(),s((()=>{r.remove(),e(this.graphicsOwners,t),this._updateScreenSizePerspectiveEnabled()}))}_updateScreenSizePerspectiveEnabled(){const e=this.graphicsOwners.some((e=>!0===e.layer?.screenSizePerspectiveEnabled));if(e&&!this.screenSizePerspectiveHandles){this.screenSizePerspectiveHandles=new t;const e=()=>this._updateScreenSizePerspectiveSettings();this.screenSizePerspectiveHandles.add([i((()=>this.pointsOfInterest.centerOnSurfaceInfrequent.distance),e,r),this.viewState.events.on(\"camera-projection-changed\",e)]),this._updateScreenSizePerspectiveSettings()}else!e&&this.screenSizePerspectiveHandles&&(this.screenSizePerspectiveHandles.destroy(),this.screenSizePerspectiveHandles=null)}_updateScreenSizePerspectiveSettings(){const e=this.pointsOfInterest;S.distance=e.centerOnSurfaceInfrequent.distance,S.fovY=this.viewState.camera.fovY,this.screenSizePerspectiveSettings.update(S),this.screenSizePerspectiveSettingsLabels.update(S),this.view._stage.renderView.requestRender()}get test(){return{screenSizePerspectiveHandles:this.screenSizePerspectiveHandles}}}const S={distance:0,fovY:0};export{h as SharedSymbolResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}