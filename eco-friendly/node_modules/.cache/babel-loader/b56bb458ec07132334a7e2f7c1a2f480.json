{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { unwrapOrThrow as t } from \"../../core/maybe.js\";\nimport { PixelType as r, TextureSamplingMode as a, PixelFormat as o, SizedPixelFormat as l } from \"./enums.js\";\n\nfunction n(n, i) {\n  const {\n    textureFloat: f,\n    colorBufferFloat: s\n  } = n.capabilities,\n        u = f?.textureFloat,\n        m = f?.textureFloatLinear,\n        _ = f?.textureHalfFloat,\n        p = f?.textureHalfFloatLinear,\n        d = f?.HALF_FLOAT,\n        x = s?.textureFloat,\n        b = s?.textureHalfFloat,\n        c = s?.floatBlend,\n        {\n    floatBufferBlendWorking: h\n  } = t(n.driverTest);\n\n  if (!u && !_) throw new e(\"heatmap:missing-texture-float\", \"HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.\");\n  if (!x && !b) throw new e(\"heatmap:missing-color-buffer-float\", \"HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.\");\n  if (!(c && h || b)) throw new e(\"heatmap:missing-float-blend\", \"HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float.\" + (h ? \"\" : \" This device claims support for EXT_float_blend, but does not actually support it.\"));\n  const E = u && x && c && h,\n        F = _ && b,\n        R = m,\n        L = p,\n        T = !!s?.R32F,\n        w = !!s?.R16F;\n  if (E && (R || !L)) return R || i.warnOnce(\"Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced.\"), {\n    dataType: r.FLOAT,\n    samplingMode: R ? a.LINEAR : a.NEAREST,\n    pixelFormat: T ? o.RED : o.RGBA,\n    internalFormat: T ? l.R32F : o.RGBA\n  };\n  if (F) return L || i.warnOnce(\"Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced.\"), {\n    dataType: d,\n    samplingMode: L ? a.LINEAR : a.NEAREST,\n    pixelFormat: w ? o.RED : o.RGBA,\n    internalFormat: w ? l.R16F : o.RGBA\n  };\n  throw new e(\"heatmap:missing-hardware-support\", \"HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.\");\n}\n\nexport { n as loadHeatmapTextureConfiguration };","map":{"version":3,"names":["e","unwrapOrThrow","t","PixelType","r","TextureSamplingMode","a","PixelFormat","o","SizedPixelFormat","l","n","i","textureFloat","f","colorBufferFloat","s","capabilities","u","m","textureFloatLinear","_","textureHalfFloat","p","textureHalfFloatLinear","d","HALF_FLOAT","x","b","c","floatBlend","floatBufferBlendWorking","h","driverTest","E","F","R","L","T","R32F","w","R16F","warnOnce","dataType","FLOAT","samplingMode","LINEAR","NEAREST","pixelFormat","RED","RGBA","internalFormat","loadHeatmapTextureConfiguration"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/webgl/heatmapTextureUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{unwrapOrThrow as t}from\"../../core/maybe.js\";import{PixelType as r,TextureSamplingMode as a,PixelFormat as o,SizedPixelFormat as l}from\"./enums.js\";function n(n,i){const{textureFloat:f,colorBufferFloat:s}=n.capabilities,u=f?.textureFloat,m=f?.textureFloatLinear,_=f?.textureHalfFloat,p=f?.textureHalfFloatLinear,d=f?.HALF_FLOAT,x=s?.textureFloat,b=s?.textureHalfFloat,c=s?.floatBlend,{floatBufferBlendWorking:h}=t(n.driverTest);if(!u&&!_)throw new e(\"heatmap:missing-texture-float\",\"HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.\");if(!x&&!b)throw new e(\"heatmap:missing-color-buffer-float\",\"HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.\");if(!(c&&h||b))throw new e(\"heatmap:missing-float-blend\",\"HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float.\"+(h?\"\":\" This device claims support for EXT_float_blend, but does not actually support it.\"));const E=u&&x&&c&&h,F=_&&b,R=m,L=p,T=!!s?.R32F,w=!!s?.R16F;if(E&&(R||!L))return R||i.warnOnce(\"Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced.\"),{dataType:r.FLOAT,samplingMode:R?a.LINEAR:a.NEAREST,pixelFormat:T?o.RED:o.RGBA,internalFormat:T?l.R32F:o.RGBA};if(F)return L||i.warnOnce(\"Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced.\"),{dataType:d,samplingMode:L?a.LINEAR:a.NEAREST,pixelFormat:w?o.RED:o.RGBA,internalFormat:w?l.R16F:o.RGBA};throw new e(\"heatmap:missing-hardware-support\",\"HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.\")}export{n as loadHeatmapTextureConfiguration};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}