{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { neverReached as t } from \"../../../../core/compilerUtils.js\";\nimport e from \"../../../../core/Error.js\";\nimport r from \"../../../../core/Evented.js\";\nimport { isPowerOfTwo as i, nextHighestPowerOfTwo as s } from \"../../../../core/mathUtils.js\";\nimport { isNone as a, isSome as o, removeMaybe as n } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as m, onAbort as h, createAbortError as l } from \"../../../../core/promiseUtils.js\";\nimport { isArrayBuffer as p, isUint8Array as d } from \"../../../../core/typedArrayUtil.js\";\nimport { isBlobProtocol as _, isDataProtocol as c } from \"../../../../core/urlUtils.js\";\nimport { requestImage as u } from \"../../../../support/requestImageUtils.js\";\nimport { loadImageAsync as T } from \"../../../../support/requestUtils.js\";\nimport { PowerOfTwoResizeMode as g } from \"./basicInterfaces.js\";\nimport { estimateMemoryKTX2 as f, estimateMemoryBasis as w, createTextureKTX2 as E, createTextureBasis as A } from \"./BasisUtil.js\";\nimport { ContentObject as x } from \"./ContentObject.js\";\nimport { ContentObjectType as D } from \"./ContentObjectType.js\";\nimport { createDDSTexture as I } from \"./DDSUtil.js\";\nimport { createQuadVAO as M } from \"./glUtil3D.js\";\nimport { assert as y } from \"./Util.js\";\nimport { TextureWrapMode as F, TextureType as O, PixelFormat as N, PixelType as R, TextureSamplingMode as U, TargetType as b, DepthStencilTargetType as C, PrimitiveType as P } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as S } from \"../../../webgl/FramebufferObject.js\";\nimport { Texture as H } from \"../../../webgl/Texture.js\";\nimport { vertexCount as v } from \"../../../webgl/Util.js\";\nimport V from \"../../../webgl/capabilities/isWebGL2Context.js\";\n\nclass L extends x {\n  constructor(t, e) {\n    super(), this.data = t, this.type = D.Texture, this._glTexture = null, this._powerOfTwoStretchInfo = null, this._loadingPromise = null, this._loadingController = null, this.events = new r(), this.params = e || {}, this.params.mipmap = !1 !== this.params.mipmap, this.params.noUnpackFlip = this.params.noUnpackFlip || !1, this.params.preMultiplyAlpha = this.params.preMultiplyAlpha || !1, this.params.wrap = this.params.wrap || {\n      s: F.REPEAT,\n      t: F.REPEAT\n    }, this.params.powerOfTwoResizeMode = this.params.powerOfTwoResizeMode || g.STRETCH, this.estimatedTexMemRequired = L._estimateTexMemRequired(this.data, this.params), this._startPreload();\n  }\n\n  _startPreload() {\n    const t = this.data;\n    a(t) || (t instanceof HTMLVideoElement ? this._startPreloadVideoElement(t) : t instanceof HTMLImageElement && this._startPreloadImageElement(t));\n  }\n\n  _startPreloadVideoElement(t) {\n    if (!(_(t.src) || \"auto\" === t.preload && t.crossOrigin)) {\n      t.preload = \"auto\", t.crossOrigin = \"anonymous\";\n      const e = !t.paused;\n\n      if (t.src = t.src, e && t.autoplay) {\n        const e = () => {\n          t.removeEventListener(\"canplay\", e), t.play();\n        };\n\n        t.addEventListener(\"canplay\", e);\n      }\n    }\n  }\n\n  _startPreloadImageElement(t) {\n    c(t.src) || _(t.src) || t.crossOrigin || (t.crossOrigin = \"anonymous\", t.src = t.src);\n  }\n\n  static _getDataDimensions(t) {\n    return t instanceof HTMLVideoElement ? {\n      width: t.videoWidth,\n      height: t.videoHeight\n    } : t;\n  }\n\n  static _estimateTexMemRequired(t, e) {\n    if (a(t)) return 0;\n    if (p(t) || d(t)) return e.encoding === L.KTX2_ENCODING ? f(t, e.mipmap) : e.encoding === L.BASIS_ENCODING ? w(t, e.mipmap) : t.byteLength;\n    const {\n      width: r,\n      height: i\n    } = t instanceof Image || t instanceof ImageData || t instanceof HTMLCanvasElement || t instanceof HTMLVideoElement ? L._getDataDimensions(t) : e;\n    return (e.mipmap ? 4 / 3 : 1) * r * i * (e.components || 4) || 0;\n  }\n\n  dispose() {\n    this.data = void 0;\n  }\n\n  get width() {\n    return this.params.width;\n  }\n\n  get height() {\n    return this.params.height;\n  }\n\n  _createDescriptor(t) {\n    return {\n      target: O.TEXTURE_2D,\n      pixelFormat: N.RGBA,\n      dataType: R.UNSIGNED_BYTE,\n      wrapMode: this.params.wrap,\n      flipped: !this.params.noUnpackFlip,\n      samplingMode: this.params.mipmap ? U.LINEAR_MIPMAP_LINEAR : U.LINEAR,\n      hasMipmap: this.params.mipmap,\n      preMultiplyAlpha: this.params.preMultiplyAlpha,\n      maxAnisotropy: this.params.maxAnisotropy ?? (this.params.mipmap ? t.parameters.maxMaxAnisotropy : 1)\n    };\n  }\n\n  get glTexture() {\n    return this._glTexture;\n  }\n\n  load(t, e) {\n    if (o(this._glTexture)) return this._glTexture;\n    if (o(this._loadingPromise)) return this._loadingPromise;\n    const r = this.data;\n    return a(r) ? (this._glTexture = new H(t, this._createDescriptor(t), null), this._glTexture) : \"string\" == typeof r ? this._loadFromURL(t, e, r) : r instanceof Image ? this._loadFromImageElement(t, e, r) : r instanceof HTMLVideoElement ? this._loadFromVideoElement(t, e, r) : r instanceof ImageData || r instanceof HTMLCanvasElement ? this._loadFromImage(t, r, e) : (p(r) || d(r)) && this.params.encoding === L.DDS_ENCODING ? (this.data = void 0, this._loadFromDDSData(t, r)) : (p(r) || d(r)) && this.params.encoding === L.KTX2_ENCODING ? (this.data = void 0, this._loadFromKTX2(t, r)) : (p(r) || d(r)) && this.params.encoding === L.BASIS_ENCODING ? (this.data = void 0, this._loadFromBasis(t, r)) : d(r) ? this._loadFromPixelData(t, r) : p(r) ? this._loadFromPixelData(t, new Uint8Array(r)) : null;\n  }\n\n  get requiresFrameUpdates() {\n    return this.data instanceof HTMLVideoElement;\n  }\n\n  frameUpdate(t, e, r) {\n    if (!(this.data instanceof HTMLVideoElement) || a(this._glTexture)) return r;\n    if (this.data.readyState < j.HAVE_CURRENT_DATA || r === this.data.currentTime) return r;\n\n    if (o(this._powerOfTwoStretchInfo)) {\n      const {\n        framebuffer: r,\n        vao: i,\n        sourceTexture: s\n      } = this._powerOfTwoStretchInfo;\n      s.setData(this.data), this._drawStretchedTexture(t, e, r, i, s, this._glTexture);\n    } else {\n      const {\n        videoWidth: t,\n        videoHeight: e\n      } = this.data,\n            {\n        width: r,\n        height: i\n      } = this._glTexture.descriptor;\n      t !== r || e !== i ? this._glTexture.updateData(0, 0, 0, Math.min(t, r), Math.min(e, i), this.data) : this._glTexture.setData(this.data);\n    }\n\n    return this._glTexture.descriptor.hasMipmap && this._glTexture.generateMipmap(), this.params.updateCallback && this.params.updateCallback(), this.data.currentTime;\n  }\n\n  _loadFromDDSData(t, e) {\n    return this._glTexture = I(t, this._createDescriptor(t), e), this._glTexture;\n  }\n\n  _loadFromKTX2(t, e) {\n    return this._loadAsync(() => E(t, this._createDescriptor(t), e).then(t => (this._glTexture = t, t)));\n  }\n\n  _loadFromBasis(t, e) {\n    return this._loadAsync(() => A(t, this._createDescriptor(t), e).then(t => (this._glTexture = t, t)));\n  }\n\n  _loadFromPixelData(t, e) {\n    y(this.params.width > 0 && this.params.height > 0);\n\n    const r = this._createDescriptor(t);\n\n    return r.pixelFormat = 1 === this.params.components ? N.LUMINANCE : 3 === this.params.components ? N.RGB : N.RGBA, r.width = this.params.width, r.height = this.params.height, this._glTexture = new H(t, r, e), this._glTexture;\n  }\n\n  _loadFromURL(t, e, r) {\n    return this._loadAsync(async i => {\n      const s = await u(r, {\n        signal: i\n      });\n      return m(i), this._loadFromImage(t, s, e);\n    });\n  }\n\n  _loadFromImageElement(t, e, r) {\n    return r.complete ? this._loadFromImage(t, r, e) : this._loadAsync(async i => {\n      const s = await T(r, r.src, !1, i);\n      return m(i), this._loadFromImage(t, s, e);\n    });\n  }\n\n  _loadFromVideoElement(t, e, r) {\n    return r.readyState >= j.HAVE_CURRENT_DATA ? this._loadFromImage(t, r, e) : this._loadFromVideoElementAsync(t, e, r);\n  }\n\n  _loadFromVideoElementAsync(t, r, i) {\n    return this._loadAsync(s => new Promise((a, o) => {\n      const m = () => {\n        i.removeEventListener(\"loadeddata\", p), i.removeEventListener(\"error\", d), n(_);\n      },\n            p = () => {\n        i.readyState >= j.HAVE_CURRENT_DATA && (m(), a(this._loadFromImage(t, i, r)));\n      },\n            d = t => {\n        m(), o(t || new e(\"Failed to load video\"));\n      };\n\n      i.addEventListener(\"loadeddata\", p), i.addEventListener(\"error\", d);\n\n      const _ = h(s, () => d(l()));\n    }));\n  }\n\n  _loadFromImage(t, e, r) {\n    const s = L._getDataDimensions(e);\n\n    this.params.width = s.width, this.params.height = s.height;\n\n    const a = this._createDescriptor(t);\n\n    return a.pixelFormat = 3 === this.params.components ? N.RGB : N.RGBA, !this._requiresPowerOfTwo(t, a) || i(s.width) && i(s.height) ? (a.width = s.width, a.height = s.height, this._glTexture = new H(t, a, e), this._glTexture) : (this._glTexture = this._makePowerOfTwoTexture(t, e, s, a, r), this._glTexture);\n  }\n\n  _loadAsync(t) {\n    const e = new AbortController();\n    this._loadingController = e;\n    const r = t(e.signal);\n    this._loadingPromise = r;\n\n    const i = () => {\n      this._loadingController === e && (this._loadingController = null), this._loadingPromise === r && (this._loadingPromise = null);\n    };\n\n    return r.then(i, i), r;\n  }\n\n  _requiresPowerOfTwo(t, e) {\n    const r = F.CLAMP_TO_EDGE,\n          i = \"number\" == typeof e.wrapMode ? e.wrapMode === r : e.wrapMode.s === r && e.wrapMode.t === r;\n    return !V(t.gl) && (e.hasMipmap || !i);\n  }\n\n  _makePowerOfTwoTexture(e, r, i, a, o) {\n    const {\n      width: n,\n      height: m\n    } = i,\n          h = s(n),\n          l = s(m);\n    let p;\n\n    switch (a.width = h, a.height = l, this.params.powerOfTwoResizeMode) {\n      case g.PAD:\n        a.textureCoordinateScaleFactor = [n / h, m / l], p = new H(e, a), p.updateData(0, 0, 0, n, m, r);\n        break;\n\n      case g.STRETCH:\n      case null:\n      case void 0:\n        p = this._stretchToPowerOfTwo(e, r, a, o());\n        break;\n\n      default:\n        t(this.params.powerOfTwoResizeMode);\n    }\n\n    return a.hasMipmap && p.generateMipmap(), p;\n  }\n\n  _stretchToPowerOfTwo(t, e, r, i) {\n    const s = new H(t, r),\n          a = new S(t, {\n      colorTarget: b.TEXTURE,\n      depthStencilTarget: C.NONE\n    }, s),\n          o = new H(t, {\n      target: O.TEXTURE_2D,\n      pixelFormat: r.pixelFormat,\n      dataType: R.UNSIGNED_BYTE,\n      wrapMode: F.CLAMP_TO_EDGE,\n      samplingMode: U.LINEAR,\n      flipped: !!r.flipped,\n      maxAnisotropy: 8,\n      preMultiplyAlpha: r.preMultiplyAlpha\n    }, e),\n          n = M(t),\n          m = t.getBoundFramebufferObject();\n    return this._drawStretchedTexture(t, i, a, n, o, s), this.requiresFrameUpdates ? this._powerOfTwoStretchInfo = {\n      vao: n,\n      sourceTexture: o,\n      framebuffer: a\n    } : (n.dispose(!0), o.dispose(), a.detachColorTexture(), a.dispose()), t.bindFramebuffer(m), s;\n  }\n\n  _drawStretchedTexture(t, e, r, i, s, a) {\n    t.bindFramebuffer(r);\n    const o = t.getViewport();\n    t.setViewport(0, 0, a.descriptor.width, a.descriptor.height);\n    const n = t.bindTechnique(e);\n    n.setUniform4f(\"uColor\", 1, 1, 1, 1), n.bindTexture(\"tex\", s), t.bindVAO(i), t.drawArrays(P.TRIANGLE_STRIP, 0, v(i, \"geometry\")), t.bindFramebuffer(null), t.setViewport(o.x, o.y, o.width, o.height);\n  }\n\n  unload() {\n    if (o(this._powerOfTwoStretchInfo)) {\n      const {\n        framebuffer: t,\n        vao: e,\n        sourceTexture: r\n      } = this._powerOfTwoStretchInfo;\n      e.dispose(!0), r.dispose(), t.dispose(), this._glTexture = null, this._powerOfTwoStretchInfo = null;\n    }\n\n    if (o(this._glTexture) && (this._glTexture.dispose(), this._glTexture = null), o(this._loadingController)) {\n      const t = this._loadingController;\n      this._loadingController = null, this._loadingPromise = null, t.abort();\n    }\n\n    this.events.emit(\"unloaded\");\n  }\n\n}\n\nvar j;\nL.DDS_ENCODING = \"image/vnd-ms.dds\", L.KTX2_ENCODING = \"image/ktx2\", L.BASIS_ENCODING = \"image/x.basis\", function (t) {\n  t[t.HAVE_NOTHING = 0] = \"HAVE_NOTHING\", t[t.HAVE_METADATA = 1] = \"HAVE_METADATA\", t[t.HAVE_CURRENT_DATA = 2] = \"HAVE_CURRENT_DATA\", t[t.HAVE_FUTURE_DATA = 3] = \"HAVE_FUTURE_DATA\", t[t.HAVE_ENOUGH_DATA = 4] = \"HAVE_ENOUGH_DATA\";\n}(j || (j = {}));\nexport { L as Texture };","map":{"version":3,"names":["neverReached","t","e","r","isPowerOfTwo","i","nextHighestPowerOfTwo","s","isNone","a","isSome","o","removeMaybe","n","throwIfAborted","m","onAbort","h","createAbortError","l","isArrayBuffer","p","isUint8Array","d","isBlobProtocol","_","isDataProtocol","c","requestImage","u","loadImageAsync","T","PowerOfTwoResizeMode","g","estimateMemoryKTX2","f","estimateMemoryBasis","w","createTextureKTX2","E","createTextureBasis","A","ContentObject","x","ContentObjectType","D","createDDSTexture","I","createQuadVAO","M","assert","y","TextureWrapMode","F","TextureType","O","PixelFormat","N","PixelType","R","TextureSamplingMode","U","TargetType","b","DepthStencilTargetType","C","PrimitiveType","P","FramebufferObject","S","Texture","H","vertexCount","v","V","L","constructor","data","type","_glTexture","_powerOfTwoStretchInfo","_loadingPromise","_loadingController","events","params","mipmap","noUnpackFlip","preMultiplyAlpha","wrap","REPEAT","powerOfTwoResizeMode","STRETCH","estimatedTexMemRequired","_estimateTexMemRequired","_startPreload","HTMLVideoElement","_startPreloadVideoElement","HTMLImageElement","_startPreloadImageElement","src","preload","crossOrigin","paused","autoplay","removeEventListener","play","addEventListener","_getDataDimensions","width","videoWidth","height","videoHeight","encoding","KTX2_ENCODING","BASIS_ENCODING","byteLength","Image","ImageData","HTMLCanvasElement","components","dispose","_createDescriptor","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","flipped","samplingMode","LINEAR_MIPMAP_LINEAR","LINEAR","hasMipmap","maxAnisotropy","parameters","maxMaxAnisotropy","glTexture","load","_loadFromURL","_loadFromImageElement","_loadFromVideoElement","_loadFromImage","DDS_ENCODING","_loadFromDDSData","_loadFromKTX2","_loadFromBasis","_loadFromPixelData","Uint8Array","requiresFrameUpdates","frameUpdate","readyState","j","HAVE_CURRENT_DATA","currentTime","framebuffer","vao","sourceTexture","setData","_drawStretchedTexture","descriptor","updateData","Math","min","generateMipmap","updateCallback","_loadAsync","then","LUMINANCE","RGB","signal","complete","_loadFromVideoElementAsync","Promise","_requiresPowerOfTwo","_makePowerOfTwoTexture","AbortController","CLAMP_TO_EDGE","gl","PAD","textureCoordinateScaleFactor","_stretchToPowerOfTwo","colorTarget","TEXTURE","depthStencilTarget","NONE","getBoundFramebufferObject","detachColorTexture","bindFramebuffer","getViewport","setViewport","bindTechnique","setUniform4f","bindTexture","bindVAO","drawArrays","TRIANGLE_STRIP","unload","abort","emit","HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../../core/compilerUtils.js\";import e from\"../../../../core/Error.js\";import r from\"../../../../core/Evented.js\";import{isPowerOfTwo as i,nextHighestPowerOfTwo as s}from\"../../../../core/mathUtils.js\";import{isNone as a,isSome as o,removeMaybe as n}from\"../../../../core/maybe.js\";import{throwIfAborted as m,onAbort as h,createAbortError as l}from\"../../../../core/promiseUtils.js\";import{isArrayBuffer as p,isUint8Array as d}from\"../../../../core/typedArrayUtil.js\";import{isBlobProtocol as _,isDataProtocol as c}from\"../../../../core/urlUtils.js\";import{requestImage as u}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as T}from\"../../../../support/requestUtils.js\";import{PowerOfTwoResizeMode as g}from\"./basicInterfaces.js\";import{estimateMemoryKTX2 as f,estimateMemoryBasis as w,createTextureKTX2 as E,createTextureBasis as A}from\"./BasisUtil.js\";import{ContentObject as x}from\"./ContentObject.js\";import{ContentObjectType as D}from\"./ContentObjectType.js\";import{createDDSTexture as I}from\"./DDSUtil.js\";import{createQuadVAO as M}from\"./glUtil3D.js\";import{assert as y}from\"./Util.js\";import{TextureWrapMode as F,TextureType as O,PixelFormat as N,PixelType as R,TextureSamplingMode as U,TargetType as b,DepthStencilTargetType as C,PrimitiveType as P}from\"../../../webgl/enums.js\";import{FramebufferObject as S}from\"../../../webgl/FramebufferObject.js\";import{Texture as H}from\"../../../webgl/Texture.js\";import{vertexCount as v}from\"../../../webgl/Util.js\";import V from\"../../../webgl/capabilities/isWebGL2Context.js\";class L extends x{constructor(t,e){super(),this.data=t,this.type=D.Texture,this._glTexture=null,this._powerOfTwoStretchInfo=null,this._loadingPromise=null,this._loadingController=null,this.events=new r,this.params=e||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:F.REPEAT,t:F.REPEAT},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||g.STRETCH,this.estimatedTexMemRequired=L._estimateTexMemRequired(this.data,this.params),this._startPreload()}_startPreload(){const t=this.data;a(t)||(t instanceof HTMLVideoElement?this._startPreloadVideoElement(t):t instanceof HTMLImageElement&&this._startPreloadImageElement(t))}_startPreloadVideoElement(t){if(!(_(t.src)||\"auto\"===t.preload&&t.crossOrigin)){t.preload=\"auto\",t.crossOrigin=\"anonymous\";const e=!t.paused;if(t.src=t.src,e&&t.autoplay){const e=()=>{t.removeEventListener(\"canplay\",e),t.play()};t.addEventListener(\"canplay\",e)}}}_startPreloadImageElement(t){c(t.src)||_(t.src)||t.crossOrigin||(t.crossOrigin=\"anonymous\",t.src=t.src)}static _getDataDimensions(t){return t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t}static _estimateTexMemRequired(t,e){if(a(t))return 0;if(p(t)||d(t))return e.encoding===L.KTX2_ENCODING?f(t,e.mipmap):e.encoding===L.BASIS_ENCODING?w(t,e.mipmap):t.byteLength;const{width:r,height:i}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?L._getDataDimensions(t):e;return(e.mipmap?4/3:1)*r*i*(e.components||4)||0}dispose(){this.data=void 0}get width(){return this.params.width}get height(){return this.params.height}_createDescriptor(t){return{target:O.TEXTURE_2D,pixelFormat:N.RGBA,dataType:R.UNSIGNED_BYTE,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?U.LINEAR_MIPMAP_LINEAR:U.LINEAR,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.maxAnisotropy??(this.params.mipmap?t.parameters.maxMaxAnisotropy:1)}}get glTexture(){return this._glTexture}load(t,e){if(o(this._glTexture))return this._glTexture;if(o(this._loadingPromise))return this._loadingPromise;const r=this.data;return a(r)?(this._glTexture=new H(t,this._createDescriptor(t),null),this._glTexture):\"string\"==typeof r?this._loadFromURL(t,e,r):r instanceof Image?this._loadFromImageElement(t,e,r):r instanceof HTMLVideoElement?this._loadFromVideoElement(t,e,r):r instanceof ImageData||r instanceof HTMLCanvasElement?this._loadFromImage(t,r,e):(p(r)||d(r))&&this.params.encoding===L.DDS_ENCODING?(this.data=void 0,this._loadFromDDSData(t,r)):(p(r)||d(r))&&this.params.encoding===L.KTX2_ENCODING?(this.data=void 0,this._loadFromKTX2(t,r)):(p(r)||d(r))&&this.params.encoding===L.BASIS_ENCODING?(this.data=void 0,this._loadFromBasis(t,r)):d(r)?this._loadFromPixelData(t,r):p(r)?this._loadFromPixelData(t,new Uint8Array(r)):null}get requiresFrameUpdates(){return this.data instanceof HTMLVideoElement}frameUpdate(t,e,r){if(!(this.data instanceof HTMLVideoElement)||a(this._glTexture))return r;if(this.data.readyState<j.HAVE_CURRENT_DATA||r===this.data.currentTime)return r;if(o(this._powerOfTwoStretchInfo)){const{framebuffer:r,vao:i,sourceTexture:s}=this._powerOfTwoStretchInfo;s.setData(this.data),this._drawStretchedTexture(t,e,r,i,s,this._glTexture)}else{const{videoWidth:t,videoHeight:e}=this.data,{width:r,height:i}=this._glTexture.descriptor;t!==r||e!==i?this._glTexture.updateData(0,0,0,Math.min(t,r),Math.min(e,i),this.data):this._glTexture.setData(this.data)}return this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this.params.updateCallback&&this.params.updateCallback(),this.data.currentTime}_loadFromDDSData(t,e){return this._glTexture=I(t,this._createDescriptor(t),e),this._glTexture}_loadFromKTX2(t,e){return this._loadAsync((()=>E(t,this._createDescriptor(t),e).then((t=>(this._glTexture=t,t)))))}_loadFromBasis(t,e){return this._loadAsync((()=>A(t,this._createDescriptor(t),e).then((t=>(this._glTexture=t,t)))))}_loadFromPixelData(t,e){y(this.params.width>0&&this.params.height>0);const r=this._createDescriptor(t);return r.pixelFormat=1===this.params.components?N.LUMINANCE:3===this.params.components?N.RGB:N.RGBA,r.width=this.params.width,r.height=this.params.height,this._glTexture=new H(t,r,e),this._glTexture}_loadFromURL(t,e,r){return this._loadAsync((async i=>{const s=await u(r,{signal:i});return m(i),this._loadFromImage(t,s,e)}))}_loadFromImageElement(t,e,r){return r.complete?this._loadFromImage(t,r,e):this._loadAsync((async i=>{const s=await T(r,r.src,!1,i);return m(i),this._loadFromImage(t,s,e)}))}_loadFromVideoElement(t,e,r){return r.readyState>=j.HAVE_CURRENT_DATA?this._loadFromImage(t,r,e):this._loadFromVideoElementAsync(t,e,r)}_loadFromVideoElementAsync(t,r,i){return this._loadAsync((s=>new Promise(((a,o)=>{const m=()=>{i.removeEventListener(\"loadeddata\",p),i.removeEventListener(\"error\",d),n(_)},p=()=>{i.readyState>=j.HAVE_CURRENT_DATA&&(m(),a(this._loadFromImage(t,i,r)))},d=t=>{m(),o(t||new e(\"Failed to load video\"))};i.addEventListener(\"loadeddata\",p),i.addEventListener(\"error\",d);const _=h(s,(()=>d(l())))}))))}_loadFromImage(t,e,r){const s=L._getDataDimensions(e);this.params.width=s.width,this.params.height=s.height;const a=this._createDescriptor(t);return a.pixelFormat=3===this.params.components?N.RGB:N.RGBA,!this._requiresPowerOfTwo(t,a)||i(s.width)&&i(s.height)?(a.width=s.width,a.height=s.height,this._glTexture=new H(t,a,e),this._glTexture):(this._glTexture=this._makePowerOfTwoTexture(t,e,s,a,r),this._glTexture)}_loadAsync(t){const e=new AbortController;this._loadingController=e;const r=t(e.signal);this._loadingPromise=r;const i=()=>{this._loadingController===e&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null)};return r.then(i,i),r}_requiresPowerOfTwo(t,e){const r=F.CLAMP_TO_EDGE,i=\"number\"==typeof e.wrapMode?e.wrapMode===r:e.wrapMode.s===r&&e.wrapMode.t===r;return!V(t.gl)&&(e.hasMipmap||!i)}_makePowerOfTwoTexture(e,r,i,a,o){const{width:n,height:m}=i,h=s(n),l=s(m);let p;switch(a.width=h,a.height=l,this.params.powerOfTwoResizeMode){case g.PAD:a.textureCoordinateScaleFactor=[n/h,m/l],p=new H(e,a),p.updateData(0,0,0,n,m,r);break;case g.STRETCH:case null:case void 0:p=this._stretchToPowerOfTwo(e,r,a,o());break;default:t(this.params.powerOfTwoResizeMode)}return a.hasMipmap&&p.generateMipmap(),p}_stretchToPowerOfTwo(t,e,r,i){const s=new H(t,r),a=new S(t,{colorTarget:b.TEXTURE,depthStencilTarget:C.NONE},s),o=new H(t,{target:O.TEXTURE_2D,pixelFormat:r.pixelFormat,dataType:R.UNSIGNED_BYTE,wrapMode:F.CLAMP_TO_EDGE,samplingMode:U.LINEAR,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},e),n=M(t),m=t.getBoundFramebufferObject();return this._drawStretchedTexture(t,i,a,n,o,s),this.requiresFrameUpdates?this._powerOfTwoStretchInfo={vao:n,sourceTexture:o,framebuffer:a}:(n.dispose(!0),o.dispose(),a.detachColorTexture(),a.dispose()),t.bindFramebuffer(m),s}_drawStretchedTexture(t,e,r,i,s,a){t.bindFramebuffer(r);const o=t.getViewport();t.setViewport(0,0,a.descriptor.width,a.descriptor.height);const n=t.bindTechnique(e);n.setUniform4f(\"uColor\",1,1,1,1),n.bindTexture(\"tex\",s),t.bindVAO(i),t.drawArrays(P.TRIANGLE_STRIP,0,v(i,\"geometry\")),t.bindFramebuffer(null),t.setViewport(o.x,o.y,o.width,o.height)}unload(){if(o(this._powerOfTwoStretchInfo)){const{framebuffer:t,vao:e,sourceTexture:r}=this._powerOfTwoStretchInfo;e.dispose(!0),r.dispose(),t.dispose(),this._glTexture=null,this._powerOfTwoStretchInfo=null}if(o(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null),o(this._loadingController)){const t=this._loadingController;this._loadingController=null,this._loadingPromise=null,t.abort()}this.events.emit(\"unloaded\")}}var j;L.DDS_ENCODING=\"image/vnd-ms.dds\",L.KTX2_ENCODING=\"image/ktx2\",L.BASIS_ENCODING=\"image/x.basis\",function(t){t[t.HAVE_NOTHING=0]=\"HAVE_NOTHING\",t[t.HAVE_METADATA=1]=\"HAVE_METADATA\",t[t.HAVE_CURRENT_DATA=2]=\"HAVE_CURRENT_DATA\",t[t.HAVE_FUTURE_DATA=3]=\"HAVE_FUTURE_DATA\",t[t.HAVE_ENOUGH_DATA=4]=\"HAVE_ENOUGH_DATA\"}(j||(j={}));export{L as Texture};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}