{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as t, unwrapOr as e } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as o, WGLSymbologyType as a } from \"../enums.js\";\nimport { createProgramDescriptor as r } from \"../Utils.js\";\nimport i from \"./WGLGeometryBrush.js\";\nimport { MarkerMaterialKey as n } from \"../materialKey/MaterialKey.js\";\nimport { getTechniqueFromMaterialKey as s } from \"../techniques/utils.js\";\nimport { DataType as m, PrimitiveType as l } from \"../../../../webgl/enums.js\";\nconst d = {\n  shader: \"materials/icon\",\n  vertexLayout: {\n    geometry: [{\n      location: 0,\n      name: \"a_pos\",\n      count: 2,\n      type: m.SHORT\n    }, {\n      location: 1,\n      name: \"a_vertexOffset\",\n      count: 2,\n      type: m.SHORT\n    }, {\n      location: 2,\n      name: \"a_texCoords\",\n      count: 2,\n      type: m.UNSIGNED_SHORT\n    }, {\n      location: 3,\n      name: \"a_bitSetAndDistRatio\",\n      count: 2,\n      type: m.UNSIGNED_SHORT\n    }, {\n      location: 4,\n      name: \"a_id\",\n      count: 4,\n      type: m.UNSIGNED_BYTE\n    }, {\n      location: 5,\n      name: \"a_color\",\n      count: 4,\n      type: m.UNSIGNED_BYTE,\n      normalized: !0\n    }, {\n      location: 6,\n      name: \"a_outlineColor\",\n      count: 4,\n      type: m.UNSIGNED_BYTE,\n      normalized: !0\n    }, {\n      location: 7,\n      name: \"a_sizeAndOutlineWidth\",\n      count: 4,\n      type: m.UNSIGNED_BYTE\n    }, {\n      location: 8,\n      name: \"a_zoomRange\",\n      count: 2,\n      type: m.UNSIGNED_SHORT\n    }]\n  },\n  hittestAttributes: [\"a_vertexOffset\", \"a_texCoords\"]\n};\n\nclass u extends i {\n  dispose() {}\n\n  getGeometryType() {\n    return o.MARKER;\n  }\n\n  supportsSymbology(t) {\n    return t !== a.HEATMAP && t !== a.PIE_CHART;\n  }\n\n  drawGeometry(o, a, i, m) {\n    const {\n      context: u,\n      painter: c,\n      rendererInfo: p,\n      state: y,\n      passOptions: _,\n      requestRender: f,\n      allowDelayedRender: E\n    } = o,\n          S = n.load(i.materialKey),\n          N = s(S.data),\n          T = t(_) && \"hittest\" === _.type,\n          {\n      shader: g,\n      vertexLayout: x,\n      hittestAttributes: R\n    } = e(N.programSpec, d);\n\n    let h = l.TRIANGLES,\n        U = r(S.data, x);\n    T && (U = this._getTriangleDesc(i.materialKey, U, R), h = l.POINTS);\n    const {\n      attributes: A,\n      bufferLayouts: O\n    } = U,\n          G = c.materialManager.getMaterialProgram(o, S, g, A, m);\n    if (E && t(f) && !G.isCompiled) return void f();\n    u.useProgram(G), S.textureBinding && c.textureManager.bindTextures(u, G, S, !0), this._setSharedUniforms(G, o, a);\n    const I = S.vvRotation ? y.displayViewMat3 : y.displayMat3;\n    G.setUniformMatrix3fv(\"u_displayMat3\", I), this._setSizeVVUniforms(S, G, p, a), this._setColorAndOpacityVVUniforms(S, G, p), this._setRotationVVUniforms(S, G, p);\n    const M = i.target.getVAO(u, O, A, T);\n    let b = i.indexCount,\n        D = i.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    T && (b /= 3, D /= 3), u.bindVAO(M), this._drawMarkers(o, a, G, h, b, D, T), u.bindVAO(null);\n  }\n\n  _drawMarkers(t, e, o, a, r, i, n) {\n    t.context.drawElements(a, r, m.UNSIGNED_INT, i);\n  }\n\n}\n\nexport { u as default };","map":{"version":3,"names":["isSome","t","unwrapOr","e","WGLGeometryType","o","WGLSymbologyType","a","createProgramDescriptor","r","i","MarkerMaterialKey","n","getTechniqueFromMaterialKey","s","DataType","m","PrimitiveType","l","d","shader","vertexLayout","geometry","location","name","count","type","SHORT","UNSIGNED_SHORT","UNSIGNED_BYTE","normalized","hittestAttributes","u","dispose","getGeometryType","MARKER","supportsSymbology","HEATMAP","PIE_CHART","drawGeometry","context","painter","c","rendererInfo","p","state","y","passOptions","_","requestRender","f","allowDelayedRender","E","S","load","materialKey","N","data","T","g","x","R","programSpec","h","TRIANGLES","U","_getTriangleDesc","POINTS","attributes","A","bufferLayouts","O","G","materialManager","getMaterialProgram","isCompiled","useProgram","textureBinding","textureManager","bindTextures","_setSharedUniforms","I","vvRotation","displayViewMat3","displayMat3","setUniformMatrix3fv","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","_setRotationVVUniforms","M","target","getVAO","b","indexCount","D","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","_drawMarkers","drawElements","UNSIGNED_INT","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as t,unwrapOr as e}from\"../../../../../core/maybe.js\";import{WGLGeometryType as o,WGLSymbologyType as a}from\"../enums.js\";import{createProgramDescriptor as r}from\"../Utils.js\";import i from\"./WGLGeometryBrush.js\";import{MarkerMaterialKey as n}from\"../materialKey/MaterialKey.js\";import{getTechniqueFromMaterialKey as s}from\"../techniques/utils.js\";import{DataType as m,PrimitiveType as l}from\"../../../../webgl/enums.js\";const d={shader:\"materials/icon\",vertexLayout:{geometry:[{location:0,name:\"a_pos\",count:2,type:m.SHORT},{location:1,name:\"a_vertexOffset\",count:2,type:m.SHORT},{location:2,name:\"a_texCoords\",count:2,type:m.UNSIGNED_SHORT},{location:3,name:\"a_bitSetAndDistRatio\",count:2,type:m.UNSIGNED_SHORT},{location:4,name:\"a_id\",count:4,type:m.UNSIGNED_BYTE},{location:5,name:\"a_color\",count:4,type:m.UNSIGNED_BYTE,normalized:!0},{location:6,name:\"a_outlineColor\",count:4,type:m.UNSIGNED_BYTE,normalized:!0},{location:7,name:\"a_sizeAndOutlineWidth\",count:4,type:m.UNSIGNED_BYTE},{location:8,name:\"a_zoomRange\",count:2,type:m.UNSIGNED_SHORT}]},hittestAttributes:[\"a_vertexOffset\",\"a_texCoords\"]};class u extends i{dispose(){}getGeometryType(){return o.MARKER}supportsSymbology(t){return t!==a.HEATMAP&&t!==a.PIE_CHART}drawGeometry(o,a,i,m){const{context:u,painter:c,rendererInfo:p,state:y,passOptions:_,requestRender:f,allowDelayedRender:E}=o,S=n.load(i.materialKey),N=s(S.data),T=t(_)&&\"hittest\"===_.type,{shader:g,vertexLayout:x,hittestAttributes:R}=e(N.programSpec,d);let h=l.TRIANGLES,U=r(S.data,x);T&&(U=this._getTriangleDesc(i.materialKey,U,R),h=l.POINTS);const{attributes:A,bufferLayouts:O}=U,G=c.materialManager.getMaterialProgram(o,S,g,A,m);if(E&&t(f)&&!G.isCompiled)return void f();u.useProgram(G),S.textureBinding&&c.textureManager.bindTextures(u,G,S,!0),this._setSharedUniforms(G,o,a);const I=S.vvRotation?y.displayViewMat3:y.displayMat3;G.setUniformMatrix3fv(\"u_displayMat3\",I),this._setSizeVVUniforms(S,G,p,a),this._setColorAndOpacityVVUniforms(S,G,p),this._setRotationVVUniforms(S,G,p);const M=i.target.getVAO(u,O,A,T);let b=i.indexCount,D=i.indexFrom*Uint32Array.BYTES_PER_ELEMENT;T&&(b/=3,D/=3),u.bindVAO(M),this._drawMarkers(o,a,G,h,b,D,T),u.bindVAO(null)}_drawMarkers(t,e,o,a,r,i,n){t.context.drawElements(a,r,m.UNSIGNED_INT,i)}}export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}