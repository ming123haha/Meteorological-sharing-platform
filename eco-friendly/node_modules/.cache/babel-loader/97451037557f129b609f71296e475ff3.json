{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as r } from \"../../chunks/tslib.es6.js\";\nimport { isSome as a } from \"../../core/maybe.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { reader as i } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as e } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as t } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { collectField as o, collectArcadeFieldNames as l } from \"../../layers/support/fieldUtils.js\";\nimport { matchRandomRotationExpression as u } from \"../support/randomRotationExpression.js\";\nimport p from \"../visualVariables/ColorVariable.js\";\nimport V from \"../visualVariables/OpacityVariable.js\";\nimport n from \"../visualVariables/RotationVariable.js\";\nimport c from \"../visualVariables/SizeVariable.js\";\nimport b from \"../visualVariables/VisualVariable.js\";\nimport m from \"../visualVariables/VisualVariableFactory.js\";\n\nconst v = {\n  base: b,\n  key: \"type\",\n  typeMap: {\n    opacity: V,\n    color: p,\n    rotation: n,\n    size: c\n  }\n},\n      y = a => {\n  let u = class extends a {\n    constructor() {\n      super(...arguments), this._vvFactory = new m();\n    }\n\n    set visualVariables(r) {\n      this._vvFactory.visualVariables = r, this._set(\"visualVariables\", this._vvFactory.visualVariables);\n    }\n\n    readVisualVariables(r, a, s) {\n      return this._vvFactory.readVariables(r, a, s);\n    }\n\n    writeVisualVariables(r, a, s, i) {\n      a[s] = this._vvFactory.writeVariables(r, i);\n    }\n\n    get arcadeRequiredForVisualVariables() {\n      if (!this.visualVariables) return !1;\n\n      for (const r of this.visualVariables) if (r.arcadeRequired) return !0;\n\n      return !1;\n    }\n\n    hasVisualVariables(r, a) {\n      return r ? this.getVisualVariablesForType(r, a).length > 0 : this.getVisualVariablesForType(\"size\", a).length > 0 || this.getVisualVariablesForType(\"color\", a).length > 0 || this.getVisualVariablesForType(\"opacity\", a).length > 0 || this.getVisualVariablesForType(\"rotation\", a).length > 0;\n    }\n\n    getVisualVariablesForType(r, a) {\n      const s = this.visualVariables;\n      return s ? s.filter(s => s.type === r && (\"string\" == typeof a ? s.target === a : !1 !== a || !s.target)) : [];\n    }\n\n    async collectVVRequiredFields(r, a) {\n      let s = [];\n      this.visualVariables && (s = s.concat(this.visualVariables));\n\n      for (const i of s) i && (i.field && o(r, a, i.field), i.normalizationField && o(r, a, i.normalizationField), i.valueExpression && (f(i.valueExpression, r, a) || (await l(r, a, i.valueExpression))));\n    }\n\n  };\n  return r([s({\n    types: [v],\n    value: null,\n    json: {\n      write: !0\n    }\n  })], u.prototype, \"visualVariables\", null), r([i(\"visualVariables\", [\"visualVariables\", \"rotationType\", \"rotationExpression\"])], u.prototype, \"readVisualVariables\", null), r([t(\"visualVariables\")], u.prototype, \"writeVisualVariables\", null), u = r([e(\"esri.renderers.mixins.VisualVariablesMixin\")], u), u;\n};\n\nfunction f(r, s, i) {\n  const e = u(r);\n  return !!a(e) && (o(s, i, e), !0);\n}\n\nexport { y as VisualVariablesMixin };","map":{"version":3,"names":["_","r","isSome","a","property","s","reader","i","subclass","e","writer","t","collectField","o","collectArcadeFieldNames","l","matchRandomRotationExpression","u","p","V","n","c","b","m","v","base","key","typeMap","opacity","color","rotation","size","y","constructor","arguments","_vvFactory","visualVariables","_set","readVisualVariables","readVariables","writeVisualVariables","writeVariables","arcadeRequiredForVisualVariables","arcadeRequired","hasVisualVariables","getVisualVariablesForType","length","filter","type","target","collectVVRequiredFields","concat","field","normalizationField","valueExpression","f","types","value","json","write","prototype","VisualVariablesMixin"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/renderers/mixins/VisualVariablesMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{isSome as a}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as t}from\"../../core/accessorSupport/decorators/writer.js\";import{collectField as o,collectArcadeFieldNames as l}from\"../../layers/support/fieldUtils.js\";import{matchRandomRotationExpression as u}from\"../support/randomRotationExpression.js\";import p from\"../visualVariables/ColorVariable.js\";import V from\"../visualVariables/OpacityVariable.js\";import n from\"../visualVariables/RotationVariable.js\";import c from\"../visualVariables/SizeVariable.js\";import b from\"../visualVariables/VisualVariable.js\";import m from\"../visualVariables/VisualVariableFactory.js\";const v={base:b,key:\"type\",typeMap:{opacity:V,color:p,rotation:n,size:c}},y=a=>{let u=class extends a{constructor(){super(...arguments),this._vvFactory=new m}set visualVariables(r){this._vvFactory.visualVariables=r,this._set(\"visualVariables\",this._vvFactory.visualVariables)}readVisualVariables(r,a,s){return this._vvFactory.readVariables(r,a,s)}writeVisualVariables(r,a,s,i){a[s]=this._vvFactory.writeVariables(r,i)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,a){return r?this.getVisualVariablesForType(r,a).length>0:this.getVisualVariablesForType(\"size\",a).length>0||this.getVisualVariablesForType(\"color\",a).length>0||this.getVisualVariablesForType(\"opacity\",a).length>0||this.getVisualVariablesForType(\"rotation\",a).length>0}getVisualVariablesForType(r,a){const s=this.visualVariables;return s?s.filter((s=>s.type===r&&(\"string\"==typeof a?s.target===a:!1!==a||!s.target))):[]}async collectVVRequiredFields(r,a){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const i of s)i&&(i.field&&o(r,a,i.field),i.normalizationField&&o(r,a,i.normalizationField),i.valueExpression&&(f(i.valueExpression,r,a)||await l(r,a,i.valueExpression)))}};return r([s({types:[v],value:null,json:{write:!0}})],u.prototype,\"visualVariables\",null),r([i(\"visualVariables\",[\"visualVariables\",\"rotationType\",\"rotationExpression\"])],u.prototype,\"readVisualVariables\",null),r([t(\"visualVariables\")],u.prototype,\"writeVisualVariables\",null),u=r([e(\"esri.renderers.mixins.VisualVariablesMixin\")],u),u};function f(r,s,i){const e=u(r);return!!a(e)&&(o(s,i,e),!0)}export{y as VisualVariablesMixin};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}