{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { ArcadeExecutionError as n, ExecutionErrorCodes as t } from \"../executionError.js\";\nimport { y as r, T as e, m as a, c as i, x as s, A as c } from \"../../chunks/languageUtils.js\";\nimport { calculateStat as u } from \"./fieldStats.js\";\nimport { WhereClause as o } from \"../../core/sql/WhereClause.js\";\n\nasync function f(n, t, r, i, f, d) {\n  if (1 === i.length) {\n    if (a(i[0])) return u(n, i[0], c(i[1], -1));\n    if (s(i[0])) return u(n, i[0].toArray(), c(i[1], -1));\n  } else if (2 === i.length) {\n    if (a(i[0])) return u(n, i[0], c(i[1], -1));\n    if (s(i[0])) return u(n, i[0].toArray(), c(i[1], -1));\n\n    if (e(i[0])) {\n      const r = await i[0].load(),\n            e = await l(o.create(i[1], r.getFieldsIndex()), d, f);\n      return i[0].calculateStatistic(n, e, c(i[2], 1e3), t.abortSignal);\n    }\n  } else if (3 === i.length && e(i[0])) {\n    const r = await i[0].load(),\n          e = await l(o.create(i[1], r.getFieldsIndex()), d, f);\n    return i[0].calculateStatistic(n, e, c(i[2], 1e3), t.abortSignal);\n  }\n\n  return u(n, i, -1);\n}\n\nasync function l(n, t, r) {\n  const e = n.getVariables();\n\n  if (e.length > 0) {\n    const a = [];\n\n    for (let n = 0; n < e.length; n++) {\n      const i = {\n        name: e[n]\n      };\n      a.push(await t.evaluateIdentifier(r, i));\n    }\n\n    const i = {};\n\n    for (let n = 0; n < e.length; n++) i[e[n]] = a[n];\n\n    return n.parameters = i, n;\n  }\n\n  return n;\n}\n\nfunction d(c) {\n  \"async\" === c.mode && (c.functions.stdev = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"stdev\", t, r, e, n, c));\n  }, c.functions.variance = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"variance\", t, r, e, n, c));\n  }, c.functions.average = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"mean\", t, r, e, n, c));\n  }, c.functions.mean = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"mean\", t, r, e, n, c));\n  }, c.functions.sum = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"sum\", t, r, e, n, c));\n  }, c.functions.min = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"min\", t, r, e, n, c));\n  }, c.functions.max = function (n, t) {\n    return c.standardFunctionAsync(n, t, (t, r, e) => f(\"max\", t, r, e, n, c));\n  }, c.functions.count = function (u, o) {\n    return c.standardFunctionAsync(u, o, (c, f, l) => {\n      if (r(l, 1, 1, u, o), e(l[0])) return l[0].count(c.abortSignal);\n      if (a(l[0]) || i(l[0])) return l[0].length;\n      if (s(l[0])) return l[0].length();\n      throw new n(u, t.InvalidParameter, o);\n    });\n  });\n}\n\nexport { d as registerFunctions };","map":{"version":3,"names":["ArcadeExecutionError","n","ExecutionErrorCodes","t","y","r","T","e","m","a","c","i","x","s","A","calculateStat","u","WhereClause","o","f","d","length","toArray","load","l","create","getFieldsIndex","calculateStatistic","abortSignal","getVariables","name","push","evaluateIdentifier","parameters","mode","functions","stdev","standardFunctionAsync","variance","average","mean","sum","min","max","count","InvalidParameter","registerFunctions"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/functions/featuresetstats.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ArcadeExecutionError as n,ExecutionErrorCodes as t}from\"../executionError.js\";import{y as r,T as e,m as a,c as i,x as s,A as c}from\"../../chunks/languageUtils.js\";import{calculateStat as u}from\"./fieldStats.js\";import{WhereClause as o}from\"../../core/sql/WhereClause.js\";async function f(n,t,r,i,f,d){if(1===i.length){if(a(i[0]))return u(n,i[0],c(i[1],-1));if(s(i[0]))return u(n,i[0].toArray(),c(i[1],-1))}else if(2===i.length){if(a(i[0]))return u(n,i[0],c(i[1],-1));if(s(i[0]))return u(n,i[0].toArray(),c(i[1],-1));if(e(i[0])){const r=await i[0].load(),e=await l(o.create(i[1],r.getFieldsIndex()),d,f);return i[0].calculateStatistic(n,e,c(i[2],1e3),t.abortSignal)}}else if(3===i.length&&e(i[0])){const r=await i[0].load(),e=await l(o.create(i[1],r.getFieldsIndex()),d,f);return i[0].calculateStatistic(n,e,c(i[2],1e3),t.abortSignal)}return u(n,i,-1)}async function l(n,t,r){const e=n.getVariables();if(e.length>0){const a=[];for(let n=0;n<e.length;n++){const i={name:e[n]};a.push(await t.evaluateIdentifier(r,i))}const i={};for(let n=0;n<e.length;n++)i[e[n]]=a[n];return n.parameters=i,n}return n}function d(c){\"async\"===c.mode&&(c.functions.stdev=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"stdev\",t,r,e,n,c)))},c.functions.variance=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"variance\",t,r,e,n,c)))},c.functions.average=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"mean\",t,r,e,n,c)))},c.functions.mean=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"mean\",t,r,e,n,c)))},c.functions.sum=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"sum\",t,r,e,n,c)))},c.functions.min=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"min\",t,r,e,n,c)))},c.functions.max=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"max\",t,r,e,n,c)))},c.functions.count=function(u,o){return c.standardFunctionAsync(u,o,((c,f,l)=>{if(r(l,1,1,u,o),e(l[0]))return l[0].count(c.abortSignal);if(a(l[0])||i(l[0]))return l[0].length;if(s(l[0]))return l[0].length();throw new n(u,t.InvalidParameter,o)}))})}export{d as registerFunctions};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,oBAAoB,IAAIC,CAA/B,EAAiCC,mBAAmB,IAAIC,CAAxD,QAA8D,sBAA9D;AAAqF,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,EAA4BC,CAAC,IAAIC,CAAjC,EAAmCC,CAAC,IAAIC,CAAxC,EAA0CC,CAAC,IAAIJ,CAA/C,QAAqD,+BAArD;AAAqF,SAAOK,aAAa,IAAIC,CAAxB,QAA8B,iBAA9B;AAAgD,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,+BAA5B;;AAA4D,eAAeC,CAAf,CAAiBlB,CAAjB,EAAmBE,CAAnB,EAAqBE,CAArB,EAAuBM,CAAvB,EAAyBQ,CAAzB,EAA2BC,CAA3B,EAA6B;EAAC,IAAG,MAAIT,CAAC,CAACU,MAAT,EAAgB;IAAC,IAAGZ,CAAC,CAACE,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW,OAAOK,CAAC,CAACf,CAAD,EAAGU,CAAC,CAAC,CAAD,CAAJ,EAAQD,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,CAAC,CAAP,CAAT,CAAR;IAA4B,IAAGE,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW,OAAOK,CAAC,CAACf,CAAD,EAAGU,CAAC,CAAC,CAAD,CAAD,CAAKW,OAAL,EAAH,EAAkBZ,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,CAAC,CAAP,CAAnB,CAAR;EAAsC,CAAzG,MAA8G,IAAG,MAAIA,CAAC,CAACU,MAAT,EAAgB;IAAC,IAAGZ,CAAC,CAACE,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW,OAAOK,CAAC,CAACf,CAAD,EAAGU,CAAC,CAAC,CAAD,CAAJ,EAAQD,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,CAAC,CAAP,CAAT,CAAR;IAA4B,IAAGE,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW,OAAOK,CAAC,CAACf,CAAD,EAAGU,CAAC,CAAC,CAAD,CAAD,CAAKW,OAAL,EAAH,EAAkBZ,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,CAAC,CAAP,CAAnB,CAAR;;IAAsC,IAAGJ,CAAC,CAACI,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW;MAAC,MAAMN,CAAC,GAAC,MAAMM,CAAC,CAAC,CAAD,CAAD,CAAKY,IAAL,EAAd;MAAA,MAA0BhB,CAAC,GAAC,MAAMiB,CAAC,CAACN,CAAC,CAACO,MAAF,CAASd,CAAC,CAAC,CAAD,CAAV,EAAcN,CAAC,CAACqB,cAAF,EAAd,CAAD,EAAmCN,CAAnC,EAAqCD,CAArC,CAAnC;MAA2E,OAAOR,CAAC,CAAC,CAAD,CAAD,CAAKgB,kBAAL,CAAwB1B,CAAxB,EAA0BM,CAA1B,EAA4BG,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,GAAN,CAA7B,EAAwCR,CAAC,CAACyB,WAA1C,CAAP;IAA8D;EAAC,CAA/P,MAAoQ,IAAG,MAAIjB,CAAC,CAACU,MAAN,IAAcd,CAAC,CAACI,CAAC,CAAC,CAAD,CAAF,CAAlB,EAAyB;IAAC,MAAMN,CAAC,GAAC,MAAMM,CAAC,CAAC,CAAD,CAAD,CAAKY,IAAL,EAAd;IAAA,MAA0BhB,CAAC,GAAC,MAAMiB,CAAC,CAACN,CAAC,CAACO,MAAF,CAASd,CAAC,CAAC,CAAD,CAAV,EAAcN,CAAC,CAACqB,cAAF,EAAd,CAAD,EAAmCN,CAAnC,EAAqCD,CAArC,CAAnC;IAA2E,OAAOR,CAAC,CAAC,CAAD,CAAD,CAAKgB,kBAAL,CAAwB1B,CAAxB,EAA0BM,CAA1B,EAA4BG,CAAC,CAACC,CAAC,CAAC,CAAD,CAAF,EAAM,GAAN,CAA7B,EAAwCR,CAAC,CAACyB,WAA1C,CAAP;EAA8D;;EAAA,OAAOZ,CAAC,CAACf,CAAD,EAAGU,CAAH,EAAK,CAAC,CAAN,CAAR;AAAiB;;AAAA,eAAea,CAAf,CAAiBvB,CAAjB,EAAmBE,CAAnB,EAAqBE,CAArB,EAAuB;EAAC,MAAME,CAAC,GAACN,CAAC,CAAC4B,YAAF,EAAR;;EAAyB,IAAGtB,CAAC,CAACc,MAAF,GAAS,CAAZ,EAAc;IAAC,MAAMZ,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACM,CAAC,CAACc,MAAhB,EAAuBpB,CAAC,EAAxB,EAA2B;MAAC,MAAMU,CAAC,GAAC;QAACmB,IAAI,EAACvB,CAAC,CAACN,CAAD;MAAP,CAAR;MAAoBQ,CAAC,CAACsB,IAAF,CAAO,MAAM5B,CAAC,CAAC6B,kBAAF,CAAqB3B,CAArB,EAAuBM,CAAvB,CAAb;IAAwC;;IAAA,MAAMA,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIV,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACM,CAAC,CAACc,MAAhB,EAAuBpB,CAAC,EAAxB,EAA2BU,CAAC,CAACJ,CAAC,CAACN,CAAD,CAAF,CAAD,GAAQQ,CAAC,CAACR,CAAD,CAAT;;IAAa,OAAOA,CAAC,CAACgC,UAAF,GAAatB,CAAb,EAAeV,CAAtB;EAAwB;;EAAA,OAAOA,CAAP;AAAS;;AAAA,SAASmB,CAAT,CAAWV,CAAX,EAAa;EAAC,YAAUA,CAAC,CAACwB,IAAZ,KAAmBxB,CAAC,CAACyB,SAAF,CAAYC,KAAZ,GAAkB,UAASnC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,OAAD,EAAShB,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAeN,CAAf,EAAiBS,CAAjB,CAAvC,CAAP;EAAoE,CAApG,EAAqGA,CAAC,CAACyB,SAAF,CAAYG,QAAZ,GAAqB,UAASrC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,UAAD,EAAYhB,CAAZ,EAAcE,CAAd,EAAgBE,CAAhB,EAAkBN,CAAlB,EAAoBS,CAApB,CAAvC,CAAP;EAAuE,CAA/M,EAAgNA,CAAC,CAACyB,SAAF,CAAYI,OAAZ,GAAoB,UAAStC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,MAAD,EAAQhB,CAAR,EAAUE,CAAV,EAAYE,CAAZ,EAAcN,CAAd,EAAgBS,CAAhB,CAAvC,CAAP;EAAmE,CAArT,EAAsTA,CAAC,CAACyB,SAAF,CAAYK,IAAZ,GAAiB,UAASvC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,MAAD,EAAQhB,CAAR,EAAUE,CAAV,EAAYE,CAAZ,EAAcN,CAAd,EAAgBS,CAAhB,CAAvC,CAAP;EAAmE,CAAxZ,EAAyZA,CAAC,CAACyB,SAAF,CAAYM,GAAZ,GAAgB,UAASxC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,KAAD,EAAOhB,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaN,CAAb,EAAeS,CAAf,CAAvC,CAAP;EAAkE,CAAzf,EAA0fA,CAAC,CAACyB,SAAF,CAAYO,GAAZ,GAAgB,UAASzC,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,KAAD,EAAOhB,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaN,CAAb,EAAeS,CAAf,CAAvC,CAAP;EAAkE,CAA1lB,EAA2lBA,CAAC,CAACyB,SAAF,CAAYQ,GAAZ,GAAgB,UAAS1C,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOO,CAAC,CAAC2B,qBAAF,CAAwBpC,CAAxB,EAA0BE,CAA1B,EAA6B,CAACA,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASY,CAAC,CAAC,KAAD,EAAOhB,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaN,CAAb,EAAeS,CAAf,CAAvC,CAAP;EAAkE,CAA3rB,EAA4rBA,CAAC,CAACyB,SAAF,CAAYS,KAAZ,GAAkB,UAAS5B,CAAT,EAAWE,CAAX,EAAa;IAAC,OAAOR,CAAC,CAAC2B,qBAAF,CAAwBrB,CAAxB,EAA0BE,CAA1B,EAA6B,CAACR,CAAD,EAAGS,CAAH,EAAKK,CAAL,KAAS;MAAC,IAAGnB,CAAC,CAACmB,CAAD,EAAG,CAAH,EAAK,CAAL,EAAOR,CAAP,EAASE,CAAT,CAAD,EAAaX,CAAC,CAACiB,CAAC,CAAC,CAAD,CAAF,CAAjB,EAAwB,OAAOA,CAAC,CAAC,CAAD,CAAD,CAAKoB,KAAL,CAAWlC,CAAC,CAACkB,WAAb,CAAP;MAAiC,IAAGnB,CAAC,CAACe,CAAC,CAAC,CAAD,CAAF,CAAD,IAASb,CAAC,CAACa,CAAC,CAAC,CAAD,CAAF,CAAb,EAAoB,OAAOA,CAAC,CAAC,CAAD,CAAD,CAAKH,MAAZ;MAAmB,IAAGR,CAAC,CAACW,CAAC,CAAC,CAAD,CAAF,CAAJ,EAAW,OAAOA,CAAC,CAAC,CAAD,CAAD,CAAKH,MAAL,EAAP;MAAqB,MAAM,IAAIpB,CAAJ,CAAMe,CAAN,EAAQb,CAAC,CAAC0C,gBAAV,EAA2B3B,CAA3B,CAAN;IAAoC,CAA3M,CAAP;EAAqN,CAAp8B;AAAs8B;;AAAA,SAAOE,CAAC,IAAI0B,iBAAZ"},"metadata":{},"sourceType":"module"}