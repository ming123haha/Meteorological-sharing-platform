{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/set.js\";\nimport { subclass as r } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport s from \"../../../geometry/Extent.js\";\nimport i from \"./DynamicLayerView3D.js\";\nimport o from \"../../layers/WMSLayerView.js\";\nlet a = class extends o(i) {\n  constructor() {\n    super(...arguments), this.type = \"wms-3d\";\n  }\n\n  initialize() {\n    this.layer.serviceSupportsSpatialReference(this.view.spatialReference) || this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\", \"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))), this.updatingHandles.add(() => this.exportImageParameters?.version, () => {\n      this.updatingHandles.addPromise(this.refreshDebounced());\n    });\n  }\n\n  createFetchPopupFeaturesQuery(e) {\n    const t = this.findExtentInfoAt(e),\n          r = t.extent,\n          i = new s(r[0], r[1], r[2], r[3], this._spatialReference),\n          o = t.imageSize,\n          a = o.width,\n          n = o.height,\n          p = i.width / a;\n    return {\n      extent: i,\n      width: a,\n      height: n,\n      x: Math.round((e.x - i.xmin) / p),\n      y: Math.round((i.ymax - e.y) / p)\n    };\n  }\n\n  getFetchOptions() {\n    return {\n      timeExtent: this.timeExtent\n    };\n  }\n\n};\na = e([r(\"esri.views.3d.layers.WMSLayerView3D\")], a);\nconst n = a;\nexport { n as default };","map":{"version":3,"names":["_","e","t","subclass","r","s","i","o","a","constructor","arguments","type","initialize","layer","serviceSupportsSpatialReference","view","spatialReference","addResolvingPromise","Promise","reject","updatingHandles","add","exportImageParameters","version","addPromise","refreshDebounced","createFetchPopupFeaturesQuery","findExtentInfoAt","extent","_spatialReference","imageSize","width","n","height","p","x","Math","round","xmin","y","ymax","getFetchOptions","timeExtent","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/WMSLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../geometry/Extent.js\";import i from\"./DynamicLayerView3D.js\";import o from\"../../layers/WMSLayerView.js\";let a=class extends(o(i)){constructor(){super(...arguments),this.type=\"wms-3d\"}initialize(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))),this.updatingHandles.add((()=>this.exportImageParameters?.version),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())}))}createFetchPopupFeaturesQuery(e){const t=this.findExtentInfoAt(e),r=t.extent,i=new s(r[0],r[1],r[2],r[3],this._spatialReference),o=t.imageSize,a=o.width,n=o.height,p=i.width/a;return{extent:i,width:a,height:n,x:Math.round((e.x-i.xmin)/p),y:Math.round((i.ymax-e.y)/p)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};a=e([r(\"esri.views.3d.layers.WMSLayerView3D\")],a);const n=a;export{n as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,wBAAb;AAAsC,OAAM,yBAAN;AAAgC,OAAM,6CAAN;AAAoD,OAAM,6BAAN;AAAoC,OAAM,sBAAN;AAA6B,OAAM,sCAAN;AAA6C,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAOC,CAAP,MAAa,6BAAb;AAA2C,OAAOC,CAAP,MAAa,yBAAb;AAAuC,OAAOC,CAAP,MAAa,8BAAb;AAA4C,IAAIC,CAAC,GAAC,cAAcD,CAAC,CAACD,CAAD,CAAf,CAAmB;EAACG,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,IAAL,GAAU,QAA9B;EAAuC;;EAAAC,UAAU,GAAE;IAAC,KAAKC,KAAL,CAAWC,+BAAX,CAA2C,KAAKC,IAAL,CAAUC,gBAArD,KAAwE,KAAKC,mBAAL,CAAyBC,OAAO,CAACC,MAAR,CAAe,IAAIjB,CAAJ,CAAM,0CAAN,EAAiD,4GAAjD,CAAf,CAAzB,CAAxE,EAAiR,KAAKkB,eAAL,CAAqBC,GAArB,CAA0B,MAAI,KAAKC,qBAAL,EAA4BC,OAA1D,EAAoE,MAAI;MAAC,KAAKH,eAAL,CAAqBI,UAArB,CAAgC,KAAKC,gBAAL,EAAhC;IAAyD,CAAlI,CAAjR;EAAsZ;;EAAAC,6BAA6B,CAACzB,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC,KAAKyB,gBAAL,CAAsB1B,CAAtB,CAAR;IAAA,MAAiCG,CAAC,GAACF,CAAC,CAAC0B,MAArC;IAAA,MAA4CtB,CAAC,GAAC,IAAID,CAAJ,CAAMD,CAAC,CAAC,CAAD,CAAP,EAAWA,CAAC,CAAC,CAAD,CAAZ,EAAgBA,CAAC,CAAC,CAAD,CAAjB,EAAqBA,CAAC,CAAC,CAAD,CAAtB,EAA0B,KAAKyB,iBAA/B,CAA9C;IAAA,MAAgGtB,CAAC,GAACL,CAAC,CAAC4B,SAApG;IAAA,MAA8GtB,CAAC,GAACD,CAAC,CAACwB,KAAlH;IAAA,MAAwHC,CAAC,GAACzB,CAAC,CAAC0B,MAA5H;IAAA,MAAmIC,CAAC,GAAC5B,CAAC,CAACyB,KAAF,GAAQvB,CAA7I;IAA+I,OAAM;MAACoB,MAAM,EAACtB,CAAR;MAAUyB,KAAK,EAACvB,CAAhB;MAAkByB,MAAM,EAACD,CAAzB;MAA2BG,CAAC,EAACC,IAAI,CAACC,KAAL,CAAW,CAACpC,CAAC,CAACkC,CAAF,GAAI7B,CAAC,CAACgC,IAAP,IAAaJ,CAAxB,CAA7B;MAAwDK,CAAC,EAACH,IAAI,CAACC,KAAL,CAAW,CAAC/B,CAAC,CAACkC,IAAF,GAAOvC,CAAC,CAACsC,CAAV,IAAaL,CAAxB;IAA1D,CAAN;EAA4F;;EAAAO,eAAe,GAAE;IAAC,OAAM;MAACC,UAAU,EAAC,KAAKA;IAAjB,CAAN;EAAmC;;AAA1xB,CAAzB;AAAqzBlC,CAAC,GAACP,CAAC,CAAC,CAACG,CAAC,CAAC,qCAAD,CAAF,CAAD,EAA4CI,CAA5C,CAAH;AAAkD,MAAMwB,CAAC,GAACxB,CAAR;AAAU,SAAOwB,CAAC,IAAIW,OAAZ"},"metadata":{},"sourceType":"module"}