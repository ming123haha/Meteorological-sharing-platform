{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/Evented.js\";\nimport { someMap as i } from \"../../../../core/MapUtils.js\";\nimport { nextHighestPowerOfTwo as r } from \"../../../../core/mathUtils.js\";\nimport { disposeMaybe as a, isSome as n, removeMaybe as h } from \"../../../../core/maybe.js\";\nimport { generateUID as o } from \"../../../../core/uid.js\";\nimport { property as l } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as d } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { ContentObjectType as c } from \"./ContentObjectType.js\";\nimport { textTextureAtlas as m } from \"./testUtils.js\";\nimport { VertexAttribute as p } from \"./VertexAttribute.js\";\nimport { TaskPriority as g, noBudget as u } from \"../../../support/Scheduler.js\";\nimport { TextureType as x, PixelFormat as T, PixelType as _, TextureWrapMode as A, TextureSamplingMode as f } from \"../../../webgl/enums.js\";\nimport { Texture as y } from \"../../../webgl/Texture.js\";\nconst v = 512,\n      z = 4096,\n      R = .85,\n      w = .95;\nlet b = class extends t {\n  constructor(e) {\n    super(e), this.type = c.Texture, this.id = o(), this.events = new s(), this._glTexture = null, this.needsClear = !1, this.elementsToAddOrUpdate = new Map(), this.elementsToRemove = new Map(), this.elementsToRender = new Map(), this.elements = new Map(), this.stageObjects = new Map(), this.updating = !1;\n  }\n\n  initialize() {\n    this.stage = this.view._stage, this.canvas = this._create2DCanvas(), this.ctx = this.canvas.getContext(\"2d\"), this.stage.add(this);\n\n    const e = this._computeAtlasResolution(this.view.width, this.view.height);\n\n    this._createAtlasRegion(e), this._update2DCanvasSize(), this._resetAtlasCursor();\n  }\n\n  unload() {\n    this._glTexture = a(this._glTexture), this.updating = !1, this.events.emit(\"unloaded\");\n  }\n\n  get width() {\n    return this.atlas.size.width;\n  }\n\n  get height() {\n    return this.atlas.size.height;\n  }\n\n  get requiresFrameUpdates() {\n    return !1;\n  }\n\n  _createDescriptor(e) {\n    return {\n      target: x.TEXTURE_2D,\n      pixelFormat: T.RGBA,\n      dataType: _.UNSIGNED_BYTE,\n      wrapMode: A.CLAMP_TO_EDGE,\n      flipped: !0,\n      samplingMode: f.LINEAR_MIPMAP_LINEAR,\n      hasMipmap: !0,\n      preMultiplyAlpha: !0,\n      maxAnisotropy: e.parameters.maxMaxAnisotropy\n    };\n  }\n\n  get glTexture() {\n    return this._glTexture;\n  }\n\n  load(e) {\n    return n(this._glTexture) || (this._glTexture = new y(e, this._createDescriptor(e), this.canvas), this.frameWorker = this.view.resourceController.scheduler.registerTask(g.TEXT_TEXTURE_ATLAS, this), this.setDirty()), this._glTexture;\n  }\n\n  dispose() {\n    this.elements = null, this.elementsToAddOrUpdate = null, this.elementsToRemove = null, this.elementsToRender = null, this.frameWorker = h(this.frameWorker), this._glTexture && (this.stage.remove(this), this._glTexture = a(this._glTexture)), this.canvas.width = 0, this.canvas.height = 0, this.canvas = null, this.ctx = null;\n  }\n\n  _create2DCanvas() {\n    const e = document.createElement(\"canvas\");\n    return e.setAttribute(\"id\", \"canvas2d\"), e.setAttribute(\"style\", \"display:none\"), e.setAttribute(\"width\", v.toString()), e.setAttribute(\"height\", v.toString()), e;\n  }\n\n  _update2DCanvasSize() {\n    this.canvas.setAttribute(\"width\", this.atlas.size.width.toString()), this.canvas.setAttribute(\"height\", this.atlas.size.height.toString());\n  }\n\n  _createAtlasRegion(e = v) {\n    this.atlas = {\n      size: {\n        width: e,\n        height: e\n      },\n      cursor: {\n        x: 0,\n        y: 0\n      },\n      lineHeight: 0\n    };\n  }\n\n  _computeAtlasResolution(e, t) {\n    let s = Math.max(e, t);\n    return s += 256, s = r(s), s = Math.min(s, z), s;\n  }\n\n  _resizeAtlas(e, t) {\n    t = t || e;\n    const s = this.atlas;\n    s.size.width = e, s.size.height = t, n(this._glTexture) && this._glTexture.resize(e, t), this._update2DCanvasSize();\n  }\n\n  _resetAtlasCursor() {\n    const e = this.atlas;\n    e.cursor.x = O, e.cursor.y = O + j, e.lineHeight = 0, this.needsClear = !0;\n  }\n\n  _getAtlasUsage() {\n    const e = this.atlas;\n    return (e.cursor.x + e.cursor.y * e.size.width) / (e.size.width * e.size.height);\n  }\n\n  _getExpectedAtlasUsage() {\n    const e = this.elementsToRemove.size,\n          t = this.elementsToAddOrUpdate.size,\n          s = this.elements.size;\n    return this._getAtlasUsage() / s * (s + t - e);\n  }\n\n  _addAtlasElement(e, t, s, i) {\n    const r = this.atlas,\n          {\n      renderedWidth: a,\n      renderedHeight: n,\n      displayWidth: h,\n      displayHeight: o\n    } = e.textRenderer;\n    e.placement.offset.x = r.cursor.x, e.placement.offset.y = r.cursor.y, e.placement.size.width = a, e.placement.size.height = n, e.placement.size.displayWidth = h, e.placement.size.displayHeight = o, e.placement.uvMinMax = [e.placement.offset.x / r.size.width, 1 - (e.placement.offset.y + n) / r.size.height, (e.placement.offset.x + a) / r.size.width, 1 - e.placement.offset.y / r.size.height], r.cursor.x += s, r.lineHeight = Math.max(r.lineHeight, i), this.elements.set(t, e);\n  }\n\n  _removeAtlasElement(e) {\n    if (e && this.elements.has(e.textId)) {\n      const t = e.placement.offset,\n            s = e.placement.size;\n      this.ctx.clearRect(t.x, t.y, s.width, s.height), this.elements.delete(e.textId);\n    }\n  }\n\n  _ensureStageObjects(e) {\n    const t = this.stageObjects.get(e);\n    if (t) return t;\n    const s = new Set();\n    return this.stageObjects.set(e, s), s;\n  }\n\n  _addStageObject(e, t) {\n    this._ensureStageObjects(e).add(t);\n  }\n\n  _removeStageObject(e, t) {\n    const s = this.stageObjects.get(e);\n    s && s.delete(t) && (t.geometries[0].vertexAttributes.get(p.SIZE).data = [0, 0], t.geometryVertexAttrsUpdated(t.geometryRecords[0]));\n  }\n\n  _processAddition(e, t) {\n    const s = this.atlas,\n          i = e.textId,\n          r = e.textRenderer.renderedWidth,\n          a = e.textRenderer.renderedHeight,\n          n = r + O,\n          h = a + O + j;\n    if (s.cursor.x + n < s.size.width && s.cursor.y + h < s.size.height) this._addAtlasElement(e, i, n, h), this.elementsToRender.set(i, e), this.elementsToAddOrUpdate.delete(i);else {\n      if (!(s.cursor.y + h + s.lineHeight < s.size.height)) {\n        const e = this._getExpectedAtlasUsage(),\n              i = e > R && s.size.width < z;\n\n        return i && this._resizeAtlas(2 * s.size.width, 2 * s.size.height), !t || !i && e > w && s.size.width === z ? (this._processRemovals(), E.OK) : (this._repack(), E.REPACK);\n      }\n\n      s.cursor.x = O, s.cursor.y += s.lineHeight, s.lineHeight = 0, this._addAtlasElement(e, i, n, h), this.elementsToRender.set(i, e), this.elementsToAddOrUpdate.delete(i);\n    }\n    return E.OK;\n  }\n\n  _processRemovals() {\n    this.elementsToRemove.forEach((e, t) => {\n      const s = this.stageObjects.get(t);\n      s && 0 !== s.size || this._removeAtlasElement(e), s && 0 === s.size && this.stageObjects.delete(t);\n    }), this.elementsToRemove.clear();\n  }\n\n  _repack() {\n    this._processRemovals(), this.elements.forEach((e, t) => {\n      e.rendered = !1, this.elementsToAddOrUpdate.set(t, e);\n    }), this.elements.clear(), this._resetAtlasCursor(), this.elementsToRender.clear();\n  }\n\n  _processRenderingRequest(e) {\n    this.ctx.clearRect(e.placement.offset.x, e.placement.offset.y, e.placement.size.width, e.placement.size.height), e.textRenderer.render(this.ctx, e.placement.offset.x, e.placement.offset.y);\n    const t = this.stageObjects.get(e.textId);\n    t && t.forEach(t => {\n      t.geometries[0].vertexAttributes.get(p.UV0).data = new Float32Array(e.placement.uvMinMax), t.geometries[0].vertexAttributes.get(p.SIZE).data = [e.placement.size.displayWidth, e.placement.size.displayHeight], t.geometryVertexAttrsUpdated(t.geometryRecords[0]);\n    }), e.rendered = !0;\n  }\n\n  get running() {\n    return this.updating;\n  }\n\n  runTask(e, t = !0) {\n    if (!this._glTexture) return;\n    let s = !1;\n    if (i(this.elementsToAddOrUpdate, (e, i) => {\n      const r = this.elements.get(i);\n\n      if (r && r.rendered) {\n        const e = this.stageObjects.get(i);\n        return e && e.forEach(e => {\n          const t = e.geometries[0].vertexAttributes,\n                s = this.elements.get(i);\n          t.get(p.UV0).data = new Float32Array(s.placement.uvMinMax), t.get(p.SIZE).data = new Float32Array([s.placement.size.displayWidth, s.placement.size.displayHeight]), e.geometryVertexAttrsUpdated(e.geometryRecords[0]);\n        }), this.elementsToAddOrUpdate.delete(i), !1;\n      }\n\n      return this._processAddition(this.elementsToAddOrUpdate.get(i), t) === E.REPACK && (s = !0, !0);\n    }), s) return void this.runTask(u, !1);\n    let r = !1;\n    this.elementsToRender.size > 0 && this.needsClear && (this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height), this.needsClear = !1), i(this.elementsToRender, (t, s) => (this._processRenderingRequest(t), this.elementsToRender.delete(s), r = !0, e.madeProgress(), e.done)), r && n(this._glTexture) && this._glTexture.setData(this.canvas), this.updating = this.elementsToRender.size > 0, !this.updating && m.orderedRepackingEnabled && this.repackOrdered();\n  }\n\n  addTextTexture(e, t) {\n    const s = e.key;\n    this.elementsToAddOrUpdate.has(s) || this.elementsToAddOrUpdate.set(s, {\n      textId: s,\n      placement: {\n        offset: {\n          x: 0,\n          y: 0\n        },\n        size: {\n          width: 0,\n          height: 0,\n          displayWidth: 0,\n          displayHeight: 0\n        },\n        uvMinMax: []\n      },\n      textRenderer: e,\n      rendered: !1\n    }), this._addStageObject(s, t), this.elementsToRemove.delete(s), this.setDirty();\n  }\n\n  removeTextTexture(e, t) {\n    const s = e.key;\n    this.elementsToRemove.set(s, this.elements.get(s)), this._removeStageObject(s, t);\n  }\n\n  setDirty() {\n    this._glTexture && (this.updating = !0);\n  }\n\n  repackOrdered() {\n    if (0 === this.elements.size) return;\n    const e = [];\n    this.elements.forEach((t, s) => e.push({\n      element: t,\n      key: s\n    }));\n    let t = !0;\n\n    for (let s = 0; s < e.length - 1; s++) if (e[s].key.localeCompare(e[s + 1].key) > 0) {\n      t = !1;\n      break;\n    }\n\n    if (!t || this.elementsToRemove.size) {\n      e.sort((e, t) => e.key.localeCompare(t.key)), this.elements.clear();\n\n      for (const {\n        element: t,\n        key: s\n      } of e) this.elements.set(s, t);\n\n      this._repack(), this.setDirty();\n    }\n  }\n\n  get test() {\n    const {\n      elements: e,\n      stageObjects: t,\n      elementsToRemove: s,\n      atlas: i\n    } = this,\n          r = this;\n    return {\n      elements: e,\n      stageObjects: t,\n      elementsToRemove: s,\n      atlas: i,\n      _resizeAtlas: (e, t) => r._resizeAtlas(e, t),\n      run: (e, t) => r.runTask(e, t)\n    };\n  }\n\n};\ne([l({\n  constructOnly: !0\n})], b.prototype, \"view\", void 0), e([l({\n  type: Boolean\n})], b.prototype, \"updating\", void 0), b = e([d(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")], b);\nconst O = 2,\n      j = 2;\nvar E;\n!function (e) {\n  e[e.OK = 0] = \"OK\", e[e.REPACK = 1] = \"REPACK\";\n}(E || (E = {}));\nexport { b as TextTextureAtlas };","map":{"version":3,"names":["_","e","t","s","someMap","i","nextHighestPowerOfTwo","r","disposeMaybe","a","isSome","n","removeMaybe","h","generateUID","o","property","l","subclass","d","ContentObjectType","c","textTextureAtlas","m","VertexAttribute","p","TaskPriority","g","noBudget","u","TextureType","x","PixelFormat","T","PixelType","TextureWrapMode","A","TextureSamplingMode","f","Texture","y","v","z","R","w","b","constructor","type","id","events","_glTexture","needsClear","elementsToAddOrUpdate","Map","elementsToRemove","elementsToRender","elements","stageObjects","updating","initialize","stage","view","_stage","canvas","_create2DCanvas","ctx","getContext","add","_computeAtlasResolution","width","height","_createAtlasRegion","_update2DCanvasSize","_resetAtlasCursor","unload","emit","atlas","size","requiresFrameUpdates","_createDescriptor","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","flipped","samplingMode","LINEAR_MIPMAP_LINEAR","hasMipmap","preMultiplyAlpha","maxAnisotropy","parameters","maxMaxAnisotropy","glTexture","load","frameWorker","resourceController","scheduler","registerTask","TEXT_TEXTURE_ATLAS","setDirty","dispose","remove","document","createElement","setAttribute","toString","cursor","lineHeight","Math","max","min","_resizeAtlas","resize","O","j","_getAtlasUsage","_getExpectedAtlasUsage","_addAtlasElement","renderedWidth","renderedHeight","displayWidth","displayHeight","textRenderer","placement","offset","uvMinMax","set","_removeAtlasElement","has","textId","clearRect","delete","_ensureStageObjects","get","Set","_addStageObject","_removeStageObject","geometries","vertexAttributes","SIZE","data","geometryVertexAttrsUpdated","geometryRecords","_processAddition","_processRemovals","E","OK","_repack","REPACK","forEach","clear","rendered","_processRenderingRequest","render","UV0","Float32Array","running","runTask","madeProgress","done","setData","orderedRepackingEnabled","repackOrdered","addTextTexture","key","removeTextTexture","push","element","length","localeCompare","sort","test","run","constructOnly","prototype","Boolean","TextTextureAtlas"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureAtlas.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Evented.js\";import{someMap as i}from\"../../../../core/MapUtils.js\";import{nextHighestPowerOfTwo as r}from\"../../../../core/mathUtils.js\";import{disposeMaybe as a,isSome as n,removeMaybe as h}from\"../../../../core/maybe.js\";import{generateUID as o}from\"../../../../core/uid.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ContentObjectType as c}from\"./ContentObjectType.js\";import{textTextureAtlas as m}from\"./testUtils.js\";import{VertexAttribute as p}from\"./VertexAttribute.js\";import{TaskPriority as g,noBudget as u}from\"../../../support/Scheduler.js\";import{TextureType as x,PixelFormat as T,PixelType as _,TextureWrapMode as A,TextureSamplingMode as f}from\"../../../webgl/enums.js\";import{Texture as y}from\"../../../webgl/Texture.js\";const v=512,z=4096,R=.85,w=.95;let b=class extends t{constructor(e){super(e),this.type=c.Texture,this.id=o(),this.events=new s,this._glTexture=null,this.needsClear=!1,this.elementsToAddOrUpdate=new Map,this.elementsToRemove=new Map,this.elementsToRender=new Map,this.elements=new Map,this.stageObjects=new Map,this.updating=!1}initialize(){this.stage=this.view._stage,this.canvas=this._create2DCanvas(),this.ctx=this.canvas.getContext(\"2d\"),this.stage.add(this);const e=this._computeAtlasResolution(this.view.width,this.view.height);this._createAtlasRegion(e),this._update2DCanvasSize(),this._resetAtlasCursor()}unload(){this._glTexture=a(this._glTexture),this.updating=!1,this.events.emit(\"unloaded\")}get width(){return this.atlas.size.width}get height(){return this.atlas.size.height}get requiresFrameUpdates(){return!1}_createDescriptor(e){return{target:x.TEXTURE_2D,pixelFormat:T.RGBA,dataType:_.UNSIGNED_BYTE,wrapMode:A.CLAMP_TO_EDGE,flipped:!0,samplingMode:f.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:e.parameters.maxMaxAnisotropy}}get glTexture(){return this._glTexture}load(e){return n(this._glTexture)||(this._glTexture=new y(e,this._createDescriptor(e),this.canvas),this.frameWorker=this.view.resourceController.scheduler.registerTask(g.TEXT_TEXTURE_ATLAS,this),this.setDirty()),this._glTexture}dispose(){this.elements=null,this.elementsToAddOrUpdate=null,this.elementsToRemove=null,this.elementsToRender=null,this.frameWorker=h(this.frameWorker),this._glTexture&&(this.stage.remove(this),this._glTexture=a(this._glTexture)),this.canvas.width=0,this.canvas.height=0,this.canvas=null,this.ctx=null}_create2DCanvas(){const e=document.createElement(\"canvas\");return e.setAttribute(\"id\",\"canvas2d\"),e.setAttribute(\"style\",\"display:none\"),e.setAttribute(\"width\",v.toString()),e.setAttribute(\"height\",v.toString()),e}_update2DCanvasSize(){this.canvas.setAttribute(\"width\",this.atlas.size.width.toString()),this.canvas.setAttribute(\"height\",this.atlas.size.height.toString())}_createAtlasRegion(e=v){this.atlas={size:{width:e,height:e},cursor:{x:0,y:0},lineHeight:0}}_computeAtlasResolution(e,t){let s=Math.max(e,t);return s+=256,s=r(s),s=Math.min(s,z),s}_resizeAtlas(e,t){t=t||e;const s=this.atlas;s.size.width=e,s.size.height=t,n(this._glTexture)&&this._glTexture.resize(e,t),this._update2DCanvasSize()}_resetAtlasCursor(){const e=this.atlas;e.cursor.x=O,e.cursor.y=O+j,e.lineHeight=0,this.needsClear=!0}_getAtlasUsage(){const e=this.atlas;return(e.cursor.x+e.cursor.y*e.size.width)/(e.size.width*e.size.height)}_getExpectedAtlasUsage(){const e=this.elementsToRemove.size,t=this.elementsToAddOrUpdate.size,s=this.elements.size;return this._getAtlasUsage()/s*(s+t-e)}_addAtlasElement(e,t,s,i){const r=this.atlas,{renderedWidth:a,renderedHeight:n,displayWidth:h,displayHeight:o}=e.textRenderer;e.placement.offset.x=r.cursor.x,e.placement.offset.y=r.cursor.y,e.placement.size.width=a,e.placement.size.height=n,e.placement.size.displayWidth=h,e.placement.size.displayHeight=o,e.placement.uvMinMax=[e.placement.offset.x/r.size.width,1-(e.placement.offset.y+n)/r.size.height,(e.placement.offset.x+a)/r.size.width,1-e.placement.offset.y/r.size.height],r.cursor.x+=s,r.lineHeight=Math.max(r.lineHeight,i),this.elements.set(t,e)}_removeAtlasElement(e){if(e&&this.elements.has(e.textId)){const t=e.placement.offset,s=e.placement.size;this.ctx.clearRect(t.x,t.y,s.width,s.height),this.elements.delete(e.textId)}}_ensureStageObjects(e){const t=this.stageObjects.get(e);if(t)return t;const s=new Set;return this.stageObjects.set(e,s),s}_addStageObject(e,t){this._ensureStageObjects(e).add(t)}_removeStageObject(e,t){const s=this.stageObjects.get(e);s&&s.delete(t)&&(t.geometries[0].vertexAttributes.get(p.SIZE).data=[0,0],t.geometryVertexAttrsUpdated(t.geometryRecords[0]))}_processAddition(e,t){const s=this.atlas,i=e.textId,r=e.textRenderer.renderedWidth,a=e.textRenderer.renderedHeight,n=r+O,h=a+O+j;if(s.cursor.x+n<s.size.width&&s.cursor.y+h<s.size.height)this._addAtlasElement(e,i,n,h),this.elementsToRender.set(i,e),this.elementsToAddOrUpdate.delete(i);else{if(!(s.cursor.y+h+s.lineHeight<s.size.height)){const e=this._getExpectedAtlasUsage(),i=e>R&&s.size.width<z;return i&&this._resizeAtlas(2*s.size.width,2*s.size.height),!t||!i&&e>w&&s.size.width===z?(this._processRemovals(),E.OK):(this._repack(),E.REPACK)}s.cursor.x=O,s.cursor.y+=s.lineHeight,s.lineHeight=0,this._addAtlasElement(e,i,n,h),this.elementsToRender.set(i,e),this.elementsToAddOrUpdate.delete(i)}return E.OK}_processRemovals(){this.elementsToRemove.forEach(((e,t)=>{const s=this.stageObjects.get(t);s&&0!==s.size||this._removeAtlasElement(e),s&&0===s.size&&this.stageObjects.delete(t)})),this.elementsToRemove.clear()}_repack(){this._processRemovals(),this.elements.forEach(((e,t)=>{e.rendered=!1,this.elementsToAddOrUpdate.set(t,e)})),this.elements.clear(),this._resetAtlasCursor(),this.elementsToRender.clear()}_processRenderingRequest(e){this.ctx.clearRect(e.placement.offset.x,e.placement.offset.y,e.placement.size.width,e.placement.size.height),e.textRenderer.render(this.ctx,e.placement.offset.x,e.placement.offset.y);const t=this.stageObjects.get(e.textId);t&&t.forEach((t=>{t.geometries[0].vertexAttributes.get(p.UV0).data=new Float32Array(e.placement.uvMinMax),t.geometries[0].vertexAttributes.get(p.SIZE).data=[e.placement.size.displayWidth,e.placement.size.displayHeight],t.geometryVertexAttrsUpdated(t.geometryRecords[0])})),e.rendered=!0}get running(){return this.updating}runTask(e,t=!0){if(!this._glTexture)return;let s=!1;if(i(this.elementsToAddOrUpdate,((e,i)=>{const r=this.elements.get(i);if(r&&r.rendered){const e=this.stageObjects.get(i);return e&&e.forEach((e=>{const t=e.geometries[0].vertexAttributes,s=this.elements.get(i);t.get(p.UV0).data=new Float32Array(s.placement.uvMinMax),t.get(p.SIZE).data=new Float32Array([s.placement.size.displayWidth,s.placement.size.displayHeight]),e.geometryVertexAttrsUpdated(e.geometryRecords[0])})),this.elementsToAddOrUpdate.delete(i),!1}return this._processAddition(this.elementsToAddOrUpdate.get(i),t)===E.REPACK&&(s=!0,!0)})),s)return void this.runTask(u,!1);let r=!1;this.elementsToRender.size>0&&this.needsClear&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.needsClear=!1),i(this.elementsToRender,((t,s)=>(this._processRenderingRequest(t),this.elementsToRender.delete(s),r=!0,e.madeProgress(),e.done))),r&&n(this._glTexture)&&this._glTexture.setData(this.canvas),this.updating=this.elementsToRender.size>0,!this.updating&&m.orderedRepackingEnabled&&this.repackOrdered()}addTextTexture(e,t){const s=e.key;this.elementsToAddOrUpdate.has(s)||this.elementsToAddOrUpdate.set(s,{textId:s,placement:{offset:{x:0,y:0},size:{width:0,height:0,displayWidth:0,displayHeight:0},uvMinMax:[]},textRenderer:e,rendered:!1}),this._addStageObject(s,t),this.elementsToRemove.delete(s),this.setDirty()}removeTextTexture(e,t){const s=e.key;this.elementsToRemove.set(s,this.elements.get(s)),this._removeStageObject(s,t)}setDirty(){this._glTexture&&(this.updating=!0)}repackOrdered(){if(0===this.elements.size)return;const e=[];this.elements.forEach(((t,s)=>e.push({element:t,key:s})));let t=!0;for(let s=0;s<e.length-1;s++)if(e[s].key.localeCompare(e[s+1].key)>0){t=!1;break}if(!t||this.elementsToRemove.size){e.sort(((e,t)=>e.key.localeCompare(t.key))),this.elements.clear();for(const{element:t,key:s}of e)this.elements.set(s,t);this._repack(),this.setDirty()}}get test(){const{elements:e,stageObjects:t,elementsToRemove:s,atlas:i}=this,r=this;return{elements:e,stageObjects:t,elementsToRemove:s,atlas:i,_resizeAtlas:(e,t)=>r._resizeAtlas(e,t),run:(e,t)=>r.runTask(e,t)}}};e([l({constructOnly:!0})],b.prototype,\"view\",void 0),e([l({type:Boolean})],b.prototype,\"updating\",void 0),b=e([d(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")],b);const O=2,j=2;var E;!function(e){e[e.OK=0]=\"OK\",e[e.REPACK=1]=\"REPACK\"}(E||(E={}));export{b as TextTextureAtlas};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}