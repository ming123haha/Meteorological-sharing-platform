{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport { result as e } from \"../../core/asyncUtils.js\";\nimport i from \"../../core/Collection.js\";\nimport { HandleOwner as r } from \"../../core/HandleOwner.js\";\nimport { watch as s, on as o, when as n } from \"../../core/reactiveUtils.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as c } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { extentContainsPoint as u } from \"../../geometry/support/contains.js\";\nimport { geographicToWebMercator as h, project as l } from \"../../geometry/support/webMercatorUtils.js\";\nimport d from \"../../geometry/SpatialReference.js\";\n\nfunction p(t, e) {\n  return t && \"copyright\" in t && (!e || \"function\" == typeof t.originOf && \"user\" === t.originOf(\"copyright\"));\n}\n\nfunction m(t, e) {\n  return t.length !== e.length || t.some((t, i) => t.text !== e[i].text);\n}\n\nfunction f(t, e, i) {\n  if (!i || !e) return;\n  t.find(t => t.layerView === e && t.text === i) || t.push({\n    text: i,\n    layerView: e\n  });\n}\n\nfunction y(t) {\n  return \"bing-maps\" === t.type;\n}\n\nconst b = [];\nlet g = class extends r {\n  constructor(t) {\n    super(t), this._clear = () => {\n      this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.handles.remove(\"suspension\"), this.notifyChange(\"state\");\n    }, this._pendingAttributions = new Set(), this._fetchedAttributionData = new Map(), this.items = new i(), this.view = null, this._allLayerViewsChange = t => {\n      this.handles.remove(\"suspension\");\n      const e = this.get(\"view.allLayerViews\");\n      e && this.handles.add(e.map(t => s(() => [t.suspended, t.layer?.attributionVisible], () => this._updateAttributionItems())), \"suspension\"), t && t.removed && t.removed.forEach(t => {\n        this._pendingAttributions.delete(t), this._fetchedAttributionData.delete(t);\n      }), this._updateAttributionItems();\n    }, this.handles.add([o(() => this.view?.allLayerViews, \"change\", t => this._allLayerViewsChange(t), {\n      onListenerAdd: () => this._allLayerViewsChange(),\n      onListenerRemove: this._clear\n    }), n(() => !0 === this.view?.stationary, () => this._updateAttributionItems())]);\n  }\n\n  destroy() {\n    this.view = null, this._fetchedAttributionData.clear(), this._pendingAttributions.clear(), this.items.removeAll();\n  }\n\n  get state() {\n    return this.get(\"view.ready\") ? this._pendingAttributions.size > 0 ? \"loading\" : \"ready\" : \"disabled\";\n  }\n\n  _updateAttributionItems() {\n    const t = this.get(\"view.allLayerViews\");\n    b.length = 0, t ? (t.forEach(t => {\n      if (t.suspended || !t.layer?.attributionVisible) return;\n      const e = t.layer;\n      if (p(e, \"user\")) return void f(b, t, e.copyright);\n\n      if (e.hasAttributionData) {\n        if (this._fetchedAttributionData.has(t)) {\n          const i = this._fetchedAttributionData.get(t);\n\n          return void (i ? f(b, t, this._getDynamicAttribution(i, this.view, e)) : p(e) && f(b, t, e.copyright));\n        }\n\n        return void this._fetchAttributionData(t);\n      }\n\n      const i = e.get(\"portalItem.accessInformation\");\n      f(b, t, i || e.copyright);\n    }), m(this.items, b) && (this.items.removeAll(), this.items.addMany(b)), b.length = 0, this.notifyChange(\"state\")) : this._clear();\n  }\n\n  async _fetchAttributionData(t) {\n    if (this._pendingAttributions.has(t)) return;\n\n    this._pendingAttributions.add(t);\n\n    const i = await e(t.layer.fetchAttributionData());\n\n    if (this._pendingAttributions.has(t)) {\n      const e = i.ok ? this._createContributionIndex(i.value, y(t.layer)) : null;\n      this._pendingAttributions.delete(t), this._fetchedAttributionData.set(t, e);\n    }\n\n    this._updateAttributionItems();\n  }\n\n  _createContributionIndex(t, e) {\n    const i = t.contributors,\n          r = {};\n    if (!i) return r;\n\n    for (let s = 0; s < i.length; s++) {\n      const t = i[s],\n            o = t.coverageAreas;\n      if (!o) return;\n\n      for (const i of o) {\n        const o = i.bbox,\n              n = i.zoomMin - (e && i.zoomMin ? 1 : 0),\n              a = i.zoomMax - (e && i.zoomMax ? 1 : 0),\n              c = {\n          xmin: o[1],\n          ymin: o[0],\n          xmax: o[3],\n          ymax: o[2],\n          spatialReference: d.WGS84\n        },\n              u = {\n          extent: h(c),\n          attribution: t.attribution || \"\",\n          score: null != i.score ? i.score : 100,\n          id: s\n        };\n\n        for (let t = n; t <= a; t++) r[t] = r[t] || [], r[t].push(u);\n      }\n    }\n\n    return r.maxKey = Math.max.apply(null, Object.keys(r)), r;\n  }\n\n  _getDynamicAttribution(t, e, i) {\n    const {\n      extent: r,\n      scale: s\n    } = e;\n    let o = i.tileInfo.scaleToZoom(s);\n    if (o = Math.min(t.maxKey, Math.round(o)), !r || null == o || o <= -1) return \"\";\n    const n = t[o],\n          a = l(r.center.clone().normalize(), e.spatialReference),\n          c = {};\n    return n ? n.filter(t => {\n      const e = !c[t.id] && a && u(t.extent, a);\n      return e && (c[t.id] = !0), e;\n    }).sort((t, e) => e.score - t.score || t.objectId - e.objectId).map(t => t.attribution).join(\", \") : \"\";\n  }\n\n};\nt([a({\n  readOnly: !0,\n  type: i\n})], g.prototype, \"items\", void 0), t([a({\n  readOnly: !0\n})], g.prototype, \"state\", null), t([a()], g.prototype, \"view\", void 0), g = t([c(\"esri.widgets.Attribution.AttributionViewModel\")], g);\nconst _ = g;\nexport { _ as default };","map":{"version":3,"names":["_","t","result","e","i","HandleOwner","r","watch","s","on","o","when","n","property","a","subclass","c","extentContainsPoint","u","geographicToWebMercator","h","project","l","d","p","originOf","m","length","some","text","f","find","layerView","push","y","type","b","g","constructor","_clear","_fetchedAttributionData","clear","_pendingAttributions","handles","remove","notifyChange","Set","Map","items","view","_allLayerViewsChange","get","add","map","suspended","layer","attributionVisible","_updateAttributionItems","removed","forEach","delete","allLayerViews","onListenerAdd","onListenerRemove","stationary","destroy","removeAll","state","size","copyright","hasAttributionData","has","_getDynamicAttribution","_fetchAttributionData","addMany","fetchAttributionData","ok","_createContributionIndex","value","set","contributors","coverageAreas","bbox","zoomMin","zoomMax","xmin","ymin","xmax","ymax","spatialReference","WGS84","extent","attribution","score","id","maxKey","Math","max","apply","Object","keys","scale","tileInfo","scaleToZoom","min","round","center","clone","normalize","filter","sort","objectId","join","readOnly","prototype","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/Attribution/AttributionViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{result as e}from\"../../core/asyncUtils.js\";import i from\"../../core/Collection.js\";import{HandleOwner as r}from\"../../core/HandleOwner.js\";import{watch as s,on as o,when as n}from\"../../core/reactiveUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import{extentContainsPoint as u}from\"../../geometry/support/contains.js\";import{geographicToWebMercator as h,project as l}from\"../../geometry/support/webMercatorUtils.js\";import d from\"../../geometry/SpatialReference.js\";function p(t,e){return t&&\"copyright\"in t&&(!e||\"function\"==typeof t.originOf&&\"user\"===t.originOf(\"copyright\"))}function m(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))}function f(t,e,i){if(!i||!e)return;t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e})}function y(t){return\"bing-maps\"===t.type}const b=[];let g=class extends r{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove(\"suspension\"),this.notifyChange(\"state\")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new i,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove(\"suspension\");const e=this.get(\"view.allLayerViews\");e&&this.handles.add(e.map((t=>s((()=>[t.suspended,t.layer?.attributionVisible]),(()=>this._updateAttributionItems())))),\"suspension\"),t&&t.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t)})),this._updateAttributionItems()},this.handles.add([o((()=>this.view?.allLayerViews),\"change\",(t=>this._allLayerViewsChange(t)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),n((()=>!0===this.view?.stationary),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get(\"view.ready\")?this._pendingAttributions.size>0?\"loading\":\"ready\":\"disabled\"}_updateAttributionItems(){const t=this.get(\"view.allLayerViews\");b.length=0,t?(t.forEach((t=>{if(t.suspended||!t.layer?.attributionVisible)return;const e=t.layer;if(p(e,\"user\"))return void f(b,t,e.copyright);if(e.hasAttributionData){if(this._fetchedAttributionData.has(t)){const i=this._fetchedAttributionData.get(t);return void(i?f(b,t,this._getDynamicAttribution(i,this.view,e)):p(e)&&f(b,t,e.copyright))}return void this._fetchAttributionData(t)}const i=e.get(\"portalItem.accessInformation\");f(b,t,i||e.copyright)})),m(this.items,b)&&(this.items.removeAll(),this.items.addMany(b)),b.length=0,this.notifyChange(\"state\")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await e(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const e=i.ok?this._createContributionIndex(i.value,y(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,e)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const t=i[s],o=t.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,n=i.zoomMin-(e&&i.zoomMin?1:0),a=i.zoomMax-(e&&i.zoomMax?1:0),c={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:d.WGS84},u={extent:h(c),attribution:t.attribution||\"\",score:null!=i.score?i.score:100,id:s};for(let t=n;t<=a;t++)r[t]=r[t]||[],r[t].push(u)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){const{extent:r,scale:s}=e;let o=i.tileInfo.scaleToZoom(s);if(o=Math.min(t.maxKey,Math.round(o)),!r||null==o||o<=-1)return\"\";const n=t[o],a=l(r.center.clone().normalize(),e.spatialReference),c={};return n?n.filter((t=>{const e=!c[t.id]&&a&&u(t.extent,a);return e&&(c[t.id]=!0),e})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(\", \"):\"\"}};t([a({readOnly:!0,type:i})],g.prototype,\"items\",void 0),t([a({readOnly:!0})],g.prototype,\"state\",null),t([a()],g.prototype,\"view\",void 0),g=t([c(\"esri.widgets.Attribution.AttributionViewModel\")],g);const _=g;export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}