{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { s as r } from \"../../../../../../chunks/vec2.js\";\nimport { a as o } from \"../../../../../../chunks/vec2f64.js\";\nimport { s as e } from \"../../../../../../chunks/vec4.js\";\nimport { c as a } from \"../../../../../../chunks/vec4f64.js\";\nimport { Float2PassUniform as t } from \"../../shaderModules/Float2PassUniform.js\";\nimport { Float4PassUniform as s } from \"../../shaderModules/Float4PassUniform.js\";\nimport { glsl as c } from \"../../shaderModules/interfaces.js\";\n\nfunction n(r) {\n  r.fragment.uniforms.add(new s(\"projInfo\", (r, o) => f(o))), r.fragment.uniforms.add(new t(\"zScale\", (r, o) => i(o))), r.fragment.code.add(c`vec3 reconstructPosition(vec2 fragCoord, float depth) {\nreturn vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}`);\n}\n\nfunction f(r) {\n  const o = r.camera.projectionMatrix;\n  return 0 === o[11] ? e(m, 2 / (r.camera.fullWidth * o[0]), 2 / (r.camera.fullHeight * o[5]), (1 + o[12]) / o[0], (1 + o[13]) / o[5]) : e(m, -2 / (r.camera.fullWidth * o[0]), -2 / (r.camera.fullHeight * o[5]), (1 - o[8]) / o[0], (1 - o[9]) / o[5]);\n}\n\nconst m = a();\n\nfunction i(o) {\n  return 0 === o.camera.projectionMatrix[11] ? r(d, 0, 1) : r(d, 1, 0);\n}\n\nconst d = o();\nexport { n as CameraSpace, i as getZScale };","map":{"version":3,"names":["s","r","a","o","e","c","Float2PassUniform","t","Float4PassUniform","glsl","n","fragment","uniforms","add","f","i","code","camera","projectionMatrix","m","fullWidth","fullHeight","d","CameraSpace","getZScale"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as r}from\"../../../../../../chunks/vec2.js\";import{a as o}from\"../../../../../../chunks/vec2f64.js\";import{s as e}from\"../../../../../../chunks/vec4.js\";import{c as a}from\"../../../../../../chunks/vec4f64.js\";import{Float2PassUniform as t}from\"../../shaderModules/Float2PassUniform.js\";import{Float4PassUniform as s}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";function n(r){r.fragment.uniforms.add(new s(\"projInfo\",((r,o)=>f(o)))),r.fragment.uniforms.add(new t(\"zScale\",((r,o)=>i(o)))),r.fragment.code.add(c`vec3 reconstructPosition(vec2 fragCoord, float depth) {\nreturn vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}`)}function f(r){const o=r.camera.projectionMatrix;return 0===o[11]?e(m,2/(r.camera.fullWidth*o[0]),2/(r.camera.fullHeight*o[5]),(1+o[12])/o[0],(1+o[13])/o[5]):e(m,-2/(r.camera.fullWidth*o[0]),-2/(r.camera.fullHeight*o[5]),(1-o[8])/o[0],(1-o[9])/o[5])}const m=a();function i(o){return 0===o.camera.projectionMatrix[11]?r(d,0,1):r(d,1,0)}const d=o();export{n as CameraSpace,i as getZScale};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,kCAAlB;AAAqD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOH,CAAC,IAAII,CAAZ,QAAkB,kCAAlB;AAAqD,SAAOC,CAAC,IAAIH,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOI,iBAAiB,IAAIC,CAA5B,QAAkC,0CAAlC;AAA6E,SAAOC,iBAAiB,IAAIR,CAA5B,QAAkC,0CAAlC;AAA6E,SAAOS,IAAI,IAAIJ,CAAf,QAAqB,mCAArB;;AAAyD,SAASK,CAAT,CAAWT,CAAX,EAAa;EAACA,CAAC,CAACU,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,IAAIb,CAAJ,CAAM,UAAN,EAAkB,CAACC,CAAD,EAAGE,CAAH,KAAOW,CAAC,CAACX,CAAD,CAA1B,CAAxB,GAAyDF,CAAC,CAACU,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,IAAIN,CAAJ,CAAM,QAAN,EAAgB,CAACN,CAAD,EAAGE,CAAH,KAAOY,CAAC,CAACZ,CAAD,CAAxB,CAAxB,CAAzD,EAAgHF,CAAC,CAACU,QAAF,CAAWK,IAAX,CAAgBH,GAAhB,CAAoBR,CAAE;AACjkB;AACA,EAF2iB,CAAhH;AAEvb;;AAAA,SAASS,CAAT,CAAWb,CAAX,EAAa;EAAC,MAAME,CAAC,GAACF,CAAC,CAACgB,MAAF,CAASC,gBAAjB;EAAkC,OAAO,MAAIf,CAAC,CAAC,EAAD,CAAL,GAAUC,CAAC,CAACe,CAAD,EAAG,KAAGlB,CAAC,CAACgB,MAAF,CAASG,SAAT,GAAmBjB,CAAC,CAAC,CAAD,CAAvB,CAAH,EAA+B,KAAGF,CAAC,CAACgB,MAAF,CAASI,UAAT,GAAoBlB,CAAC,CAAC,CAAD,CAAxB,CAA/B,EAA4D,CAAC,IAAEA,CAAC,CAAC,EAAD,CAAJ,IAAUA,CAAC,CAAC,CAAD,CAAvE,EAA2E,CAAC,IAAEA,CAAC,CAAC,EAAD,CAAJ,IAAUA,CAAC,CAAC,CAAD,CAAtF,CAAX,GAAsGC,CAAC,CAACe,CAAD,EAAG,CAAC,CAAD,IAAIlB,CAAC,CAACgB,MAAF,CAASG,SAAT,GAAmBjB,CAAC,CAAC,CAAD,CAAxB,CAAH,EAAgC,CAAC,CAAD,IAAIF,CAAC,CAACgB,MAAF,CAASI,UAAT,GAAoBlB,CAAC,CAAC,CAAD,CAAzB,CAAhC,EAA8D,CAAC,IAAEA,CAAC,CAAC,CAAD,CAAJ,IAASA,CAAC,CAAC,CAAD,CAAxE,EAA4E,CAAC,IAAEA,CAAC,CAAC,CAAD,CAAJ,IAASA,CAAC,CAAC,CAAD,CAAtF,CAA9G;AAAyM;;AAAA,MAAMgB,CAAC,GAACjB,CAAC,EAAT;;AAAY,SAASa,CAAT,CAAWZ,CAAX,EAAa;EAAC,OAAO,MAAIA,CAAC,CAACc,MAAF,CAASC,gBAAT,CAA0B,EAA1B,CAAJ,GAAkCjB,CAAC,CAACqB,CAAD,EAAG,CAAH,EAAK,CAAL,CAAnC,GAA2CrB,CAAC,CAACqB,CAAD,EAAG,CAAH,EAAK,CAAL,CAAnD;AAA2D;;AAAA,MAAMA,CAAC,GAACnB,CAAC,EAAT;AAAY,SAAOO,CAAC,IAAIa,WAAZ,EAAwBR,CAAC,IAAIS,SAA7B"},"metadata":{},"sourceType":"module"}