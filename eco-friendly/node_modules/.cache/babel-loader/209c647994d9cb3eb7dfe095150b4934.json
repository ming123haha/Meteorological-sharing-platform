{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/CircularArray.js\";\nimport has from \"../../../../core/has.js\";\nimport { isSome as t, unwrapOr as r, isNone as s } from \"../../../../core/maybe.js\";\nimport { c as i } from \"../../../../chunks/mat2df32.js\";\nimport { WGLGeometryType as a } from \"./enums.js\";\nimport { forEachGeometryType as n } from \"./Utils.js\";\nimport { WGLTile as h } from \"./WGLTile.js\";\nimport { MetricReader as d } from \"./collisions/MetricReader.js\";\nimport { Geometry as o } from \"./cpuMapped/Geometry.js\";\nconst c = 50,\n      u = 4,\n      _ = 100;\nlet p = 0;\n\nclass l extends h {\n  constructor(t, r, s, a, n, h) {\n    super(t, r, s, a), this.instanceId = p++, this.patchCount = 0, this._renderState = {\n      current: {\n        geometry: new Map(),\n        metrics: null\n      },\n      next: null,\n      swap: !1,\n      swapFrames: 0,\n      locked: !1\n    }, this._patches = new e(_), this._bufferPatches = new e(_), this._lastCommitTime = 0, this.transforms.labelMat2d = i(), this._store = n, this._requestLabelUpdate = h;\n  }\n\n  destroy() {\n    super.destroy(), this._renderState.current.geometry.forEach(e => e.destroy()), t(this._renderState.next) && this._renderState.next.geometry.forEach(e => e.destroy()), this._renderState.current = null, this._renderState.next = null;\n  }\n\n  get labelMetrics() {\n    return this._renderState.current.metrics;\n  }\n\n  get hasData() {\n    return !!this._renderState.current.geometry.size;\n  }\n\n  getGeometry(e) {\n    return this._renderState.current.geometry.get(e);\n  }\n\n  patch(e, t) {\n    this.patchCount++, e.clear && this._patches.size >= c && this._dropPatches();\n    const r = e,\n          s = r.addOrUpdate && this.key.id !== r.addOrUpdate.tileKeyOrigin;\n    t && s ? this._bufferPatches.enqueue(r) : (r.sort = r.sort && !t, this._patches.enqueue(r)), this.requestRender();\n  }\n\n  commit(e) {\n    if (this._lastCommitTime !== e.time) {\n      this._lastCommitTime = e.time;\n\n      for (let e = 0; e < u; e++) this._updateMesh(), this.isReady && this._updateBufferMesh();\n\n      this._renderState.swap && (this._swapRenderStates(), this.requestRender());\n    }\n  }\n\n  lock() {\n    this._renderState.locked = !0;\n  }\n\n  unlock() {\n    this._renderState.locked = !1, this._flushUpdates(), this._swap();\n  }\n\n  _swapRenderStates() {\n    if (this._renderState.next) {\n      if (this._renderState.locked) return this._renderState.swap = !0, void this.requestRender();\n      this._renderState.swap = !0, this._swap();\n    }\n  }\n\n  _swap() {\n    this._renderState.swap && (this._renderState.swap = !1, t(this._renderState.next) && (this._renderState.current.geometry.forEach(e => e.destroy()), this._renderState.current = this._renderState.next, this._renderState.next = null, this._requestLabelUpdate()));\n  }\n\n  _flushUpdates() {\n    let e = this._patches.maxSize;\n\n    for (; this._patches.size && e--;) this._updateMesh(), this._swap();\n  }\n\n  _updateBufferMesh() {\n    const e = this._bufferPatches.peek();\n\n    if (!t(e) || !e.clear || null === this._renderState.next) for (; this._bufferPatches.size;) {\n      const e = this._bufferPatches.dequeue();\n\n      t(e) && this._patchBuffer(e);\n    }\n  }\n\n  _updateMesh() {\n    const e = this._patches.dequeue();\n\n    if (t(e)) {\n      if (has(\"esri-2d-update-debug\")) {\n        const t = e,\n              r = t.addOrUpdate?.tileKeyOrigin,\n              s = this.key.id === r ? \"SELF\" : r;\n        let i = \"\";\n\n        for (let e = 0; e < 5; e++) i += t.addOrUpdate?.data[e]?.records?.byteLength ? 1 : 0;\n\n        console.debug(this.key.id, \"FeatureTile:patch\", `[clear: ${t.clear} origin: ${s}, end:${t.end} data:${i}]`);\n      }\n\n      !0 === e.clear && (t(this._renderState.next) && (this._renderState.next.geometry.forEach(e => e.destroy()), this._renderState.next = null), this._renderState.next = {\n        geometry: new Map(),\n        metrics: null\n      }, has(\"esri-2d-update-debug\") && console.debug(this.key.id, \"FeatureTile:_updateMesh - Creating new renderState\")), this.requestRender(), this._patch(e), e.end && (has(\"esri-2d-update-debug\") && console.debug(this.key.id, \"FeatureTile:_updateMesh - Encountered end message\"), this.ready(), this._swapRenderStates());\n    }\n  }\n\n  _patch(e) {\n    n(t => {\n      this._remove(t, e.remove), this._insert(t, e, !1);\n    });\n  }\n\n  _patchBuffer(e) {\n    n(t => {\n      this._insert(t, e, !0);\n    });\n  }\n\n  _insert(e, t, i) {\n    try {\n      const n = r(this._renderState.next, this._renderState.current),\n            h = t.addOrUpdate?.data[e],\n            d = n.geometry;\n      if (s(h)) return;\n      d.has(e) || (has(\"esri-2d-update-debug\") && console.debug(this.key.id, `FeatureTile:_insert - Creating geometry buffer ${e}`), d.set(e, new o(e, this.stage))), has(\"esri-2d-update-debug\") && console.debug(this.key.id, `FeatureTile:_insert - Inserting into ${e}, version=${t.addOrUpdate.version} stride=${h.stride}`), d.get(e).insert(h, t.sort, i), e === a.LABEL && this._insertLabelMetrics(t.type, h.metrics, t.clear);\n    } catch (n) {}\n  }\n\n  _insertLabelMetrics(e, t, i) {\n    const a = r(this._renderState.next, this._renderState.current);\n    if (s(t)) return;\n    const n = d.from(t);\n    if (s(a.metrics)) a.metrics = n;else {\n      if (\"update\" === e) {\n        const e = n.getCursor();\n\n        for (; e.next();) a.metrics.delete(e.id);\n      }\n\n      a.metrics.link(n);\n    }\n  }\n\n  _remove(e, t) {\n    const s = r(this._renderState.next, this._renderState.current).geometry.get(e);\n    t && t.length && s && (s.remove(t), this._removeLabelMetrics(t));\n  }\n\n  _removeLabelMetrics(e) {\n    const {\n      metrics: t\n    } = r(this._renderState.next, this._renderState.current);\n    if (!s(t) && e.length) for (const r of e) for (; t.delete(r););\n  }\n\n  _dropPatches() {\n    const e = new Array();\n    let t = !1;\n\n    for (; this._patches.size;) {\n      const r = this._patches.dequeue();\n\n      if (s(r)) break;\n\n      if (r.clear) {\n        if (t) break;\n        t = !0;\n      }\n\n      e.push(r);\n    }\n\n    this._patches.clear(), e.forEach(e => this._patches.enqueue(e));\n  }\n\n}\n\nexport { l as FeatureTile };","map":{"version":3,"names":["e","has","isSome","t","unwrapOr","r","isNone","s","c","i","WGLGeometryType","a","forEachGeometryType","n","WGLTile","h","MetricReader","d","Geometry","o","u","_","p","l","constructor","instanceId","patchCount","_renderState","current","geometry","Map","metrics","next","swap","swapFrames","locked","_patches","_bufferPatches","_lastCommitTime","transforms","labelMat2d","_store","_requestLabelUpdate","destroy","forEach","labelMetrics","hasData","size","getGeometry","get","patch","clear","_dropPatches","addOrUpdate","key","id","tileKeyOrigin","enqueue","sort","requestRender","commit","time","_updateMesh","isReady","_updateBufferMesh","_swapRenderStates","lock","unlock","_flushUpdates","_swap","maxSize","peek","dequeue","_patchBuffer","data","records","byteLength","console","debug","end","_patch","ready","_remove","remove","_insert","set","stage","version","stride","insert","LABEL","_insertLabelMetrics","type","from","getCursor","delete","link","length","_removeLabelMetrics","Array","push","FeatureTile"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/CircularArray.js\";import has from\"../../../../core/has.js\";import{isSome as t,unwrapOr as r,isNone as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat2df32.js\";import{WGLGeometryType as a}from\"./enums.js\";import{forEachGeometryType as n}from\"./Utils.js\";import{WGLTile as h}from\"./WGLTile.js\";import{MetricReader as d}from\"./collisions/MetricReader.js\";import{Geometry as o}from\"./cpuMapped/Geometry.js\";const c=50,u=4,_=100;let p=0;class l extends h{constructor(t,r,s,a,n,h){super(t,r,s,a),this.instanceId=p++,this.patchCount=0,this._renderState={current:{geometry:new Map,metrics:null},next:null,swap:!1,swapFrames:0,locked:!1},this._patches=new e(_),this._bufferPatches=new e(_),this._lastCommitTime=0,this.transforms.labelMat2d=i(),this._store=n,this._requestLabelUpdate=h}destroy(){super.destroy(),this._renderState.current.geometry.forEach((e=>e.destroy())),t(this._renderState.next)&&this._renderState.next.geometry.forEach((e=>e.destroy())),this._renderState.current=null,this._renderState.next=null}get labelMetrics(){return this._renderState.current.metrics}get hasData(){return!!this._renderState.current.geometry.size}getGeometry(e){return this._renderState.current.geometry.get(e)}patch(e,t){this.patchCount++,e.clear&&this._patches.size>=c&&this._dropPatches();const r=e,s=r.addOrUpdate&&this.key.id!==r.addOrUpdate.tileKeyOrigin;t&&s?this._bufferPatches.enqueue(r):(r.sort=r.sort&&!t,this._patches.enqueue(r)),this.requestRender()}commit(e){if(this._lastCommitTime!==e.time){this._lastCommitTime=e.time;for(let e=0;e<u;e++)this._updateMesh(),this.isReady&&this._updateBufferMesh();this._renderState.swap&&(this._swapRenderStates(),this.requestRender())}}lock(){this._renderState.locked=!0}unlock(){this._renderState.locked=!1,this._flushUpdates(),this._swap()}_swapRenderStates(){if(this._renderState.next){if(this._renderState.locked)return this._renderState.swap=!0,void this.requestRender();this._renderState.swap=!0,this._swap()}}_swap(){this._renderState.swap&&(this._renderState.swap=!1,t(this._renderState.next)&&(this._renderState.current.geometry.forEach((e=>e.destroy())),this._renderState.current=this._renderState.next,this._renderState.next=null,this._requestLabelUpdate()))}_flushUpdates(){let e=this._patches.maxSize;for(;this._patches.size&&e--;)this._updateMesh(),this._swap()}_updateBufferMesh(){const e=this._bufferPatches.peek();if(!t(e)||!e.clear||null===this._renderState.next)for(;this._bufferPatches.size;){const e=this._bufferPatches.dequeue();t(e)&&this._patchBuffer(e)}}_updateMesh(){const e=this._patches.dequeue();if(t(e)){if(has(\"esri-2d-update-debug\")){const t=e,r=t.addOrUpdate?.tileKeyOrigin,s=this.key.id===r?\"SELF\":r;let i=\"\";for(let e=0;e<5;e++)i+=t.addOrUpdate?.data[e]?.records?.byteLength?1:0;console.debug(this.key.id,\"FeatureTile:patch\",`[clear: ${t.clear} origin: ${s}, end:${t.end} data:${i}]`)}!0===e.clear&&(t(this._renderState.next)&&(this._renderState.next.geometry.forEach((e=>e.destroy())),this._renderState.next=null),this._renderState.next={geometry:new Map,metrics:null},has(\"esri-2d-update-debug\")&&console.debug(this.key.id,\"FeatureTile:_updateMesh - Creating new renderState\")),this.requestRender(),this._patch(e),e.end&&(has(\"esri-2d-update-debug\")&&console.debug(this.key.id,\"FeatureTile:_updateMesh - Encountered end message\"),this.ready(),this._swapRenderStates())}}_patch(e){n((t=>{this._remove(t,e.remove),this._insert(t,e,!1)}))}_patchBuffer(e){n((t=>{this._insert(t,e,!0)}))}_insert(e,t,i){try{const n=r(this._renderState.next,this._renderState.current),h=t.addOrUpdate?.data[e],d=n.geometry;if(s(h))return;d.has(e)||(has(\"esri-2d-update-debug\")&&console.debug(this.key.id,`FeatureTile:_insert - Creating geometry buffer ${e}`),d.set(e,new o(e,this.stage))),has(\"esri-2d-update-debug\")&&console.debug(this.key.id,`FeatureTile:_insert - Inserting into ${e}, version=${t.addOrUpdate.version} stride=${h.stride}`),d.get(e).insert(h,t.sort,i),e===a.LABEL&&this._insertLabelMetrics(t.type,h.metrics,t.clear)}catch(n){}}_insertLabelMetrics(e,t,i){const a=r(this._renderState.next,this._renderState.current);if(s(t))return;const n=d.from(t);if(s(a.metrics))a.metrics=n;else{if(\"update\"===e){const e=n.getCursor();for(;e.next();)a.metrics.delete(e.id)}a.metrics.link(n)}}_remove(e,t){const s=r(this._renderState.next,this._renderState.current).geometry.get(e);t&&t.length&&s&&(s.remove(t),this._removeLabelMetrics(t))}_removeLabelMetrics(e){const{metrics:t}=r(this._renderState.next,this._renderState.current);if(!s(t)&&e.length)for(const r of e)for(;t.delete(r););}_dropPatches(){const e=new Array;let t=!1;for(;this._patches.size;){const r=this._patches.dequeue();if(s(r))break;if(r.clear){if(t)break;t=!0}e.push(r)}this._patches.clear(),e.forEach((e=>this._patches.enqueue(e)))}}export{l as FeatureTile};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}