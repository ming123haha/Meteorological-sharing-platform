{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { eventKey as t } from \"../../core/events.js\";\nimport { watch as i, initial as r } from \"../../core/reactiveUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { getColorsFromRenderer as o } from \"../../renderers/support/utils.js\";\nimport n from \"../Widget.js\";\nimport l from \"./FeatureMedia/FeatureMediaViewModel.js\";\nimport d from \"./support/FeatureElementInfo.js\";\nimport { shouldOpenInNewTab as c } from \"./support/featureUtils.js\";\nimport { loadChartsModule as m, getColorSet as u } from \"../support/chartUtils.js\";\nimport { isRTL as p } from \"../support/widgetUtils.js\";\nimport { messageBundle as h } from \"../support/decorators/messageBundle.js\";\nimport { tsx as f } from \"../support/jsxFactory.js\";\nimport { isDarkTheme as v } from \"../../support/themeUtils.js\";\nconst M = {\n  base: \"esri-feature-media\",\n  mediaContainer: \"esri-feature-media__container\",\n  mediaItemContainer: \"esri-feature-media__item-container\",\n  mediaItem: \"esri-feature-media__item\",\n  mediaItemTitle: \"esri-feature-media__item-title\",\n  mediaItemCaption: \"esri-feature-media__item-caption\",\n  mediaPrevious: \"esri-feature-media__previous\",\n  mediaPreviousIconLTR: \"esri-feature-media__previous-icon\",\n  mediaPreviousIconRTL: \"esri-feature-media__previous-icon--rtl\",\n  mediaNext: \"esri-feature-media__next\",\n  mediaNextIconLTR: \"esri-feature-media__next-icon\",\n  mediaNextIconRTL: \"esri-feature-media__next-icon--rtl\",\n  mediaChart: \"esri-feature-media__chart\",\n  mediaButton: \"esri-feature-media__button\",\n  mediaIcon: \"esri-feature-media__icon\",\n  iconLeftTriangleArrow: \"esri-icon-left-triangle-arrow\",\n  iconRightTriangleArrow: \"esri-icon-right-triangle-arrow\"\n},\n      I = .05,\n      _ = .95,\n      w = 15,\n      g = \"color\",\n      y = \"tooltip\",\n      T = \"value\",\n      b = \"default-line-value\";\nlet C = class extends n {\n  constructor(e, t) {\n    super(e, t), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this.viewModel = new l(), this.messages = null, this._getChartDependencies = async e => {\n      const t = await m(),\n            {\n        destroyed: i,\n        viewModel: r\n      } = this;\n      if (i || !r || !e) return;\n      const {\n        activeMediaInfo: s\n      } = r,\n            a = await this._getRendererColors(t);\n\n      this._renderChart({\n        chartDiv: e,\n        mediaInfo: s,\n        chartsModule: t,\n        colorMap: a\n      });\n    };\n  }\n\n  initialize() {\n    this._featureElementInfo = new d(), this.addHandles([i(() => [this.viewModel?.activeMediaInfo, this.viewModel?.activeMediaInfoIndex], () => this._setupMediaRefreshTimer(), r), i(() => [this.viewModel?.description, this.viewModel?.title], () => this._setupFeatureElementInfo(), r)]);\n  }\n\n  destroy() {\n    this._clearMediaRefreshTimer(), this._featureElementInfo.destroy();\n  }\n\n  get attributes() {\n    return this.viewModel.attributes;\n  }\n\n  set attributes(e) {\n    this.viewModel.attributes = e;\n  }\n\n  get activeMediaInfoIndex() {\n    return this.viewModel.activeMediaInfoIndex;\n  }\n\n  set activeMediaInfoIndex(e) {\n    this.viewModel.activeMediaInfoIndex = e;\n  }\n\n  get description() {\n    return this.viewModel.description;\n  }\n\n  set description(e) {\n    this.viewModel.description = e;\n  }\n\n  get fieldInfoMap() {\n    return this.viewModel.fieldInfoMap;\n  }\n\n  set fieldInfoMap(e) {\n    this.viewModel.fieldInfoMap = e;\n  }\n\n  get layer() {\n    return this.viewModel.layer;\n  }\n\n  set layer(e) {\n    this.viewModel.layer = e;\n  }\n\n  get mediaInfos() {\n    return this.viewModel.mediaInfos;\n  }\n\n  set mediaInfos(e) {\n    this.viewModel.mediaInfos = e;\n  }\n\n  get popupTemplate() {\n    return this.viewModel.popupTemplate;\n  }\n\n  set popupTemplate(e) {\n    this.viewModel.popupTemplate = e;\n  }\n\n  get relatedInfos() {\n    return this.viewModel.relatedInfos;\n  }\n\n  set relatedInfos(e) {\n    this.viewModel.relatedInfos = e;\n  }\n\n  get title() {\n    return this.viewModel.title;\n  }\n\n  set title(e) {\n    this.viewModel.title = e;\n  }\n\n  render() {\n    return f(\"div\", {\n      bind: this,\n      class: M.base,\n      onkeyup: this._handleMediaKeyup\n    }, this._featureElementInfo?.render(), this.renderMedia());\n  }\n\n  renderMedia() {\n    const {\n      formattedMediaInfoCount: e\n    } = this.viewModel;\n    return e ? f(\"div\", {\n      key: \"media-element-container\",\n      class: M.mediaContainer\n    }, this.renderMediaPageButton(\"previous\"), this.renderMediaInfo(), this.renderMediaPageButton(\"next\")) : null;\n  }\n\n  renderImageMediaInfo(e) {\n    const {\n      _refreshIntervalInfo: t\n    } = this,\n          {\n      activeMediaInfoIndex: i,\n      formattedMediaInfoCount: r\n    } = this.viewModel,\n          {\n      value: s,\n      refreshInterval: a,\n      altText: o,\n      title: n,\n      type: l\n    } = e,\n          {\n      sourceURL: d,\n      linkURL: m\n    } = s,\n          u = c(m) ? \"_blank\" : \"_self\",\n          p = \"_blank\" === u ? \"noreferrer\" : \"\",\n          h = a ? t : null,\n          v = h ? h.timestamp : 0,\n          M = h ? h.sourceURL : d,\n          I = f(\"img\", {\n      alt: o || n,\n      key: `media-${l}-${i}-${r}-${v}`,\n      src: M\n    }),\n          _ = m ? f(\"a\", {\n      title: n,\n      href: m,\n      rel: p,\n      target: u\n    }, I) : null;\n\n    return _ || I;\n  }\n\n  renderChartMediaInfo(e) {\n    const {\n      activeMediaInfoIndex: t,\n      formattedMediaInfoCount: i\n    } = this.viewModel;\n    return f(\"div\", {\n      key: `media-${e.type}-${t}-${i}`,\n      bind: this,\n      class: M.mediaChart,\n      afterCreate: this._getChartDependencies\n    });\n  }\n\n  renderMediaInfoType() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    return e ? \"image\" === e.type ? this.renderImageMediaInfo(e) : e.type.includes(\"chart\") ? this.renderChartMediaInfo(e) : null : null;\n  }\n\n  renderMediaInfo() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    if (!e) return null;\n    const t = e.title ? f(\"div\", {\n      key: \"media-title\",\n      class: M.mediaItemTitle,\n      innerHTML: e.title\n    }) : null,\n          i = e.caption ? f(\"div\", {\n      key: \"media-caption\",\n      class: M.mediaItemCaption,\n      innerHTML: e.caption\n    }) : null;\n    return f(\"div\", {\n      key: \"media-container\",\n      class: M.mediaItemContainer\n    }, f(\"div\", {\n      key: \"media-item-container\",\n      class: M.mediaItem\n    }, this.renderMediaInfoType()), t, i);\n  }\n\n  renderMediaPageButton(e) {\n    if (this.viewModel.formattedMediaInfoCount < 2) return null;\n    const t = \"previous\" === e,\n          i = t ? this.messages.previous : this.messages.next,\n          r = t ? this.classes(M.mediaButton, M.mediaPrevious) : this.classes(M.mediaButton, M.mediaNext),\n          s = t ? this.classes(M.mediaIcon, M.mediaPreviousIconLTR, M.iconLeftTriangleArrow) : this.classes(M.mediaIcon, M.mediaNextIconLTR, M.iconRightTriangleArrow),\n          a = t ? this.classes(M.mediaIcon, M.mediaPreviousIconRTL, M.iconRightTriangleArrow) : this.classes(M.mediaIcon, M.mediaNextIconRTL, M.iconLeftTriangleArrow),\n          o = t ? \"media-previous\" : \"media-next\",\n          n = t ? this._previous : this._next;\n    return f(\"button\", {\n      type: \"button\",\n      key: o,\n      title: i,\n      \"aria-label\": i,\n      tabIndex: 0,\n      class: r,\n      bind: this,\n      onclick: n\n    }, f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: s\n    }), f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: a\n    }));\n  }\n\n  _setupFeatureElementInfo() {\n    const {\n      description: e,\n      title: t\n    } = this;\n\n    this._featureElementInfo.set({\n      description: e,\n      title: t\n    });\n  }\n\n  _next() {\n    this.viewModel.next();\n  }\n\n  _previous() {\n    this.viewModel.previous();\n  }\n\n  async _getRendererColors(e) {\n    const {\n      am4core: t\n    } = e,\n          i = new Map(),\n          r = this.viewModel?.layer?.renderer,\n          s = \"default\";\n    if (!r) return i;\n    const a = await o(r);\n    a.delete(s);\n    return Array.from(a.values()).every(e => 1 === e?.length) ? (i.set(b, t.color({\n      r: 50,\n      g: 50,\n      b: 50,\n      a: 1\n    })), Array.from(a.keys()).forEach(e => {\n      e && i.set(e, t.color(a.get(e)[0].toCss(!0)));\n    }), i) : i;\n  }\n\n  _handleMediaKeyup(e) {\n    const i = t(e);\n    \"ArrowLeft\" === i && (e.stopPropagation(), this.viewModel.previous()), \"ArrowRight\" === i && (e.stopPropagation(), this.viewModel.next());\n  }\n\n  _renderChart(e) {\n    const {\n      abilities: t\n    } = this.viewModel,\n          {\n      chartsModule: i,\n      chartDiv: r,\n      mediaInfo: s,\n      colorMap: a\n    } = e,\n          {\n      value: o,\n      type: n\n    } = s,\n          {\n      am4core: l\n    } = i,\n          d = u(l);\n\n    function c(e) {\n      e instanceof l.ColorSet && d && (e.list = d);\n    }\n\n    v() && l.useTheme(i.am4themes_dark);\n    const m = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    t.chartAnimation && !m.matches ? l.useTheme(i.am4themes_animated) : l.unuseTheme(i.am4themes_animated), l.useTheme(c);\n    const p = \"pie-chart\" === n ? this._createPieChart(e) : this._createXYChart(e);\n    r.setAttribute(\"aria-label\", s.altText || s.title), p.data = o.series.map(e => ({\n      [y]: e.tooltip,\n      [T]: e.value,\n      [g]: a.get(e.fieldName)\n    })).filter(e => \"pie-chart\" !== n || e.value > 0);\n  }\n\n  _customizeChartTooltip(e, t) {\n    e.label.wrap = !0, e.label.maxWidth = 200, e.autoTextColor = !1, e.getFillFromObject = !1, e.label.fill = t.color(\"#ffffff\"), e.background.fill = t.color({\n      r: 0,\n      g: 0,\n      b: 0,\n      a: .7\n    });\n  }\n\n  _createPieChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i\n    } = e,\n          {\n      am4core: r,\n      am4charts: s\n    } = i,\n          a = r.create(t, s.PieChart);\n    a.rtl = p(this.container);\n    const o = a.series.push(new s.PieSeries());\n    return o.labels.template.disabled = !0, o.ticks.template.disabled = !0, o.dataFields.value = T, o.dataFields.category = y, this._customizeChartTooltip(o.tooltip, r), o.slices.template.propertyFields.fill = g, o.slices.template.propertyFields.stroke = g, a;\n  }\n\n  _getMinSeriesValue(e) {\n    let t = 0;\n    return e.forEach(e => t = Math.min(e.value, t)), t;\n  }\n\n  _createColumnChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = e.xAxes.push(new o.CategoryAxis());\n    n.dataFields.category = y, n.renderer.labels.template.disabled = !0, this._customizeChartTooltip(n.tooltip, a), n.tooltip.events.on(\"sizechanged\", () => {\n      n.tooltip.dy = -n.tooltip.contentHeight;\n    });\n    const l = e.yAxes.push(new o.ValueAxis()),\n          d = l.renderer.labels.template;\n    l.renderer.minLabelPosition = I, l.renderer.maxLabelPosition = _, l.min = this._getMinSeriesValue(s.series), this._customizeChartTooltip(l.tooltip, a), d.wrap = !0;\n    const c = e.series.push(new o.ColumnSeries());\n    c.dataFields.valueY = T, c.dataFields.categoryX = y, c.columns.template.propertyFields.fill = g, c.columns.template.propertyFields.stroke = g, e.cursor = new o.XYCursor(), s.series.length > w && (e.scrollbarX = new a.Scrollbar());\n  }\n\n  _createBarChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = e.yAxes.push(new o.CategoryAxis());\n    n.dataFields.category = y, n.renderer.inversed = !0, n.renderer.labels.template.disabled = !0, this._customizeChartTooltip(n.tooltip, a), n.tooltip.events.on(\"sizechanged\", () => {\n      n.tooltip.dx = n.tooltip.contentWidth;\n    });\n    const l = e.xAxes.push(new o.ValueAxis()),\n          d = l.renderer.labels.template;\n    l.renderer.minLabelPosition = I, l.renderer.maxLabelPosition = _, l.min = this._getMinSeriesValue(s.series), this._customizeChartTooltip(l.tooltip, a), d.wrap = !0;\n    const c = e.series.push(new o.ColumnSeries());\n    c.dataFields.valueX = T, c.dataFields.categoryY = y, c.columns.template.propertyFields.fill = g, c.columns.template.propertyFields.stroke = g, e.cursor = new o.XYCursor(), s.series.length > w && (e.scrollbarY = new a.Scrollbar());\n  }\n\n  _createLineChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r,\n      colorMap: s\n    } = t,\n          {\n      value: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: n\n    } = i,\n          l = e.xAxes.push(new n.CategoryAxis());\n    l.dataFields.category = y, l.renderer.labels.template.disabled = !0, this._customizeChartTooltip(l.tooltip, o), l.tooltip.events.on(\"sizechanged\", () => {\n      l.tooltip.dy = -l.tooltip.contentHeight;\n    });\n    const d = e.yAxes.push(new n.ValueAxis()),\n          c = d.renderer.labels.template;\n    d.renderer.minLabelPosition = I, d.renderer.maxLabelPosition = _, d.min = this._getMinSeriesValue(a.series), this._customizeChartTooltip(d.tooltip, o), c.wrap = !0;\n    const m = e.series.push(new n.LineSeries());\n    m.dataFields.categoryX = y, m.dataFields.valueY = T, m.strokeWidth = 1;\n    const u = s.get(b);\n    u && (m.stroke = u);\n    const p = m.bullets.push(new n.CircleBullet());\n    p.propertyFields.fill = g, p.propertyFields.stroke = g, e.cursor = new n.XYCursor(), a.series.length > w && (e.scrollbarX = new o.Scrollbar());\n  }\n\n  _createXYChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i,\n      mediaInfo: r\n    } = e,\n          {\n      type: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = a.create(t, o.XYChart);\n    return n.rtl = p(this.container), \"column-chart\" === s && this._createColumnChart(n, e), \"bar-chart\" === s && this._createBarChart(n, e), \"line-chart\" === s && this._createLineChart(n, e), n;\n  }\n\n  _clearMediaRefreshTimer() {\n    const {\n      _refreshTimer: e\n    } = this;\n    e && (clearTimeout(e), this._refreshTimer = null);\n  }\n\n  _updateMediaInfoTimestamp(e) {\n    const t = Date.now();\n    this._refreshIntervalInfo = {\n      timestamp: t,\n      sourceURL: this._getImageSource(e, t)\n    }, this.scheduleRender();\n  }\n\n  _setupMediaRefreshTimer() {\n    this._clearMediaRefreshTimer();\n\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    e && \"image\" === e.type && e.refreshInterval && this._setRefreshTimeout(e);\n  }\n\n  _setRefreshTimeout(e) {\n    const {\n      refreshInterval: t,\n      value: i\n    } = e;\n    if (!t) return;\n    const r = 6e4 * t;\n\n    this._updateMediaInfoTimestamp(i.sourceURL);\n\n    const s = setInterval(() => {\n      this._updateMediaInfoTimestamp(i.sourceURL);\n    }, r);\n    this._refreshTimer = s;\n  }\n\n  _getImageSource(e, t) {\n    const i = e.includes(\"?\") ? \"&\" : \"?\",\n          [r, s = \"\"] = e.split(\"#\");\n    return `${r}${i}timestamp=${t}${s ? \"#\" : \"\"}${s}`;\n  }\n\n};\ne([s()], C.prototype, \"attributes\", null), e([s()], C.prototype, \"activeMediaInfoIndex\", null), e([s()], C.prototype, \"description\", null), e([s()], C.prototype, \"fieldInfoMap\", null), e([s()], C.prototype, \"layer\", null), e([s()], C.prototype, \"mediaInfos\", null), e([s()], C.prototype, \"popupTemplate\", null), e([s()], C.prototype, \"relatedInfos\", null), e([s()], C.prototype, \"title\", null), e([s({\n  type: l\n})], C.prototype, \"viewModel\", void 0), e([s(), h(\"esri/widgets/Feature/t9n/Feature\")], C.prototype, \"messages\", void 0), C = e([a(\"esri.widgets.Feature.FeatureMedia\")], C);\nconst x = C;\nexport { x as default };","map":{"version":3,"names":["_","e","eventKey","t","watch","i","initial","r","property","s","subclass","a","getColorsFromRenderer","o","n","l","d","shouldOpenInNewTab","c","loadChartsModule","m","getColorSet","u","isRTL","p","messageBundle","h","tsx","f","isDarkTheme","v","M","base","mediaContainer","mediaItemContainer","mediaItem","mediaItemTitle","mediaItemCaption","mediaPrevious","mediaPreviousIconLTR","mediaPreviousIconRTL","mediaNext","mediaNextIconLTR","mediaNextIconRTL","mediaChart","mediaButton","mediaIcon","iconLeftTriangleArrow","iconRightTriangleArrow","I","w","g","y","T","b","C","constructor","_refreshTimer","_refreshIntervalInfo","_featureElementInfo","viewModel","messages","_getChartDependencies","destroyed","activeMediaInfo","_getRendererColors","_renderChart","chartDiv","mediaInfo","chartsModule","colorMap","initialize","addHandles","activeMediaInfoIndex","_setupMediaRefreshTimer","description","title","_setupFeatureElementInfo","destroy","_clearMediaRefreshTimer","attributes","fieldInfoMap","layer","mediaInfos","popupTemplate","relatedInfos","render","bind","class","onkeyup","_handleMediaKeyup","renderMedia","formattedMediaInfoCount","key","renderMediaPageButton","renderMediaInfo","renderImageMediaInfo","value","refreshInterval","altText","type","sourceURL","linkURL","timestamp","alt","src","href","rel","target","renderChartMediaInfo","afterCreate","renderMediaInfoType","includes","innerHTML","caption","previous","next","classes","_previous","_next","tabIndex","onclick","set","am4core","Map","renderer","delete","Array","from","values","every","length","color","keys","forEach","get","toCss","stopPropagation","abilities","ColorSet","list","useTheme","am4themes_dark","window","matchMedia","chartAnimation","matches","am4themes_animated","unuseTheme","_createPieChart","_createXYChart","setAttribute","data","series","map","tooltip","fieldName","filter","_customizeChartTooltip","label","wrap","maxWidth","autoTextColor","getFillFromObject","fill","background","am4charts","create","PieChart","rtl","container","push","PieSeries","labels","template","disabled","ticks","dataFields","category","slices","propertyFields","stroke","_getMinSeriesValue","Math","min","_createColumnChart","xAxes","CategoryAxis","events","on","dy","contentHeight","yAxes","ValueAxis","minLabelPosition","maxLabelPosition","ColumnSeries","valueY","categoryX","columns","cursor","XYCursor","scrollbarX","Scrollbar","_createBarChart","inversed","dx","contentWidth","valueX","categoryY","scrollbarY","_createLineChart","LineSeries","strokeWidth","bullets","CircleBullet","XYChart","clearTimeout","_updateMediaInfoTimestamp","Date","now","_getImageSource","scheduleRender","_setRefreshTimeout","setInterval","split","prototype","x","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{eventKey as t}from\"../../core/events.js\";import{watch as i,initial as r}from\"../../core/reactiveUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{getColorsFromRenderer as o}from\"../../renderers/support/utils.js\";import n from\"../Widget.js\";import l from\"./FeatureMedia/FeatureMediaViewModel.js\";import d from\"./support/FeatureElementInfo.js\";import{shouldOpenInNewTab as c}from\"./support/featureUtils.js\";import{loadChartsModule as m,getColorSet as u}from\"../support/chartUtils.js\";import{isRTL as p}from\"../support/widgetUtils.js\";import{messageBundle as h}from\"../support/decorators/messageBundle.js\";import{tsx as f}from\"../support/jsxFactory.js\";import{isDarkTheme as v}from\"../../support/themeUtils.js\";const M={base:\"esri-feature-media\",mediaContainer:\"esri-feature-media__container\",mediaItemContainer:\"esri-feature-media__item-container\",mediaItem:\"esri-feature-media__item\",mediaItemTitle:\"esri-feature-media__item-title\",mediaItemCaption:\"esri-feature-media__item-caption\",mediaPrevious:\"esri-feature-media__previous\",mediaPreviousIconLTR:\"esri-feature-media__previous-icon\",mediaPreviousIconRTL:\"esri-feature-media__previous-icon--rtl\",mediaNext:\"esri-feature-media__next\",mediaNextIconLTR:\"esri-feature-media__next-icon\",mediaNextIconRTL:\"esri-feature-media__next-icon--rtl\",mediaChart:\"esri-feature-media__chart\",mediaButton:\"esri-feature-media__button\",mediaIcon:\"esri-feature-media__icon\",iconLeftTriangleArrow:\"esri-icon-left-triangle-arrow\",iconRightTriangleArrow:\"esri-icon-right-triangle-arrow\"},I=.05,_=.95,w=15,g=\"color\",y=\"tooltip\",T=\"value\",b=\"default-line-value\";let C=class extends n{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new l,this.messages=null,this._getChartDependencies=async e=>{const t=await m(),{destroyed:i,viewModel:r}=this;if(i||!r||!e)return;const{activeMediaInfo:s}=r,a=await this._getRendererColors(t);this._renderChart({chartDiv:e,mediaInfo:s,chartsModule:t,colorMap:a})}}initialize(){this._featureElementInfo=new d,this.addHandles([i((()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex]),(()=>this._setupMediaRefreshTimer()),r),i((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),r)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){return f(\"div\",{bind:this,class:M.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?f(\"div\",{key:\"media-element-container\",class:M.mediaContainer},this.renderMediaPageButton(\"previous\"),this.renderMediaInfo(),this.renderMediaPageButton(\"next\")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:a,altText:o,title:n,type:l}=e,{sourceURL:d,linkURL:m}=s,u=c(m)?\"_blank\":\"_self\",p=\"_blank\"===u?\"noreferrer\":\"\",h=a?t:null,v=h?h.timestamp:0,M=h?h.sourceURL:d,I=f(\"img\",{alt:o||n,key:`media-${l}-${i}-${r}-${v}`,src:M}),_=m?f(\"a\",{title:n,href:m,rel:p,target:u},I):null;return _||I}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return f(\"div\",{key:`media-${e.type}-${t}-${i}`,bind:this,class:M.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?\"image\"===e.type?this.renderImageMediaInfo(e):e.type.includes(\"chart\")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?f(\"div\",{key:\"media-title\",class:M.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?f(\"div\",{key:\"media-caption\",class:M.mediaItemCaption,innerHTML:e.caption}):null;return f(\"div\",{key:\"media-container\",class:M.mediaItemContainer},f(\"div\",{key:\"media-item-container\",class:M.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=\"previous\"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(M.mediaButton,M.mediaPrevious):this.classes(M.mediaButton,M.mediaNext),s=t?this.classes(M.mediaIcon,M.mediaPreviousIconLTR,M.iconLeftTriangleArrow):this.classes(M.mediaIcon,M.mediaNextIconLTR,M.iconRightTriangleArrow),a=t?this.classes(M.mediaIcon,M.mediaPreviousIconRTL,M.iconRightTriangleArrow):this.classes(M.mediaIcon,M.mediaNextIconRTL,M.iconLeftTriangleArrow),o=t?\"media-previous\":\"media-next\",n=t?this._previous:this._next;return f(\"button\",{type:\"button\",key:o,title:i,\"aria-label\":i,tabIndex:0,class:r,bind:this,onclick:n},f(\"span\",{\"aria-hidden\":\"true\",class:s}),f(\"span\",{\"aria-hidden\":\"true\",class:a}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){const{am4core:t}=e,i=new Map,r=this.viewModel?.layer?.renderer,s=\"default\";if(!r)return i;const a=await o(r);a.delete(s);return Array.from(a.values()).every((e=>1===e?.length))?(i.set(b,t.color({r:50,g:50,b:50,a:1})),Array.from(a.keys()).forEach((e=>{e&&i.set(e,t.color(a.get(e)[0].toCss(!0)))})),i):i}_handleMediaKeyup(e){const i=t(e);\"ArrowLeft\"===i&&(e.stopPropagation(),this.viewModel.previous()),\"ArrowRight\"===i&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:a}=e,{value:o,type:n}=s,{am4core:l}=i,d=u(l);function c(e){e instanceof l.ColorSet&&d&&(e.list=d)}v()&&l.useTheme(i.am4themes_dark);const m=window.matchMedia(\"(prefers-reduced-motion: reduce)\");t.chartAnimation&&!m.matches?l.useTheme(i.am4themes_animated):l.unuseTheme(i.am4themes_animated),l.useTheme(c);const p=\"pie-chart\"===n?this._createPieChart(e):this._createXYChart(e);r.setAttribute(\"aria-label\",s.altText||s.title),p.data=o.series.map((e=>({[y]:e.tooltip,[T]:e.value,[g]:a.get(e.fieldName)}))).filter((e=>\"pie-chart\"!==n||e.value>0))}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color(\"#ffffff\"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,a=r.create(t,s.PieChart);a.rtl=p(this.container);const o=a.series.push(new s.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=T,o.dataFields.category=y,this._customizeChartTooltip(o.tooltip,r),o.slices.template.propertyFields.fill=g,o.slices.template.propertyFields.stroke=g,a}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.xAxes.push(new o.CategoryAxis);n.dataFields.category=y,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,a),n.tooltip.events.on(\"sizechanged\",(()=>{n.tooltip.dy=-n.tooltip.contentHeight}));const l=e.yAxes.push(new o.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=I,l.renderer.maxLabelPosition=_,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,a),d.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueY=T,c.dataFields.categoryX=y,c.columns.template.propertyFields.fill=g,c.columns.template.propertyFields.stroke=g,e.cursor=new o.XYCursor,s.series.length>w&&(e.scrollbarX=new a.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.yAxes.push(new o.CategoryAxis);n.dataFields.category=y,n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,a),n.tooltip.events.on(\"sizechanged\",(()=>{n.tooltip.dx=n.tooltip.contentWidth}));const l=e.xAxes.push(new o.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=I,l.renderer.maxLabelPosition=_,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,a),d.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueX=T,c.dataFields.categoryY=y,c.columns.template.propertyFields.fill=g,c.columns.template.propertyFields.stroke=g,e.cursor=new o.XYCursor,s.series.length>w&&(e.scrollbarY=new a.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:a}=r,{am4core:o,am4charts:n}=i,l=e.xAxes.push(new n.CategoryAxis);l.dataFields.category=y,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,o),l.tooltip.events.on(\"sizechanged\",(()=>{l.tooltip.dy=-l.tooltip.contentHeight}));const d=e.yAxes.push(new n.ValueAxis),c=d.renderer.labels.template;d.renderer.minLabelPosition=I,d.renderer.maxLabelPosition=_,d.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(d.tooltip,o),c.wrap=!0;const m=e.series.push(new n.LineSeries);m.dataFields.categoryX=y,m.dataFields.valueY=T,m.strokeWidth=1;const u=s.get(b);u&&(m.stroke=u);const p=m.bullets.push(new n.CircleBullet);p.propertyFields.fill=g,p.propertyFields.stroke=g,e.cursor=new n.XYCursor,a.series.length>w&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:a,am4charts:o}=i,n=a.create(t,o.XYChart);return n.rtl=p(this.container),\"column-chart\"===s&&this._createColumnChart(n,e),\"bar-chart\"===s&&this._createBarChart(n,e),\"line-chart\"===s&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&\"image\"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes(\"?\")?\"&\":\"?\",[r,s=\"\"]=e.split(\"#\");return`${r}${i}timestamp=${t}${s?\"#\":\"\"}${s}`}};e([s()],C.prototype,\"attributes\",null),e([s()],C.prototype,\"activeMediaInfoIndex\",null),e([s()],C.prototype,\"description\",null),e([s()],C.prototype,\"fieldInfoMap\",null),e([s()],C.prototype,\"layer\",null),e([s()],C.prototype,\"mediaInfos\",null),e([s()],C.prototype,\"popupTemplate\",null),e([s()],C.prototype,\"relatedInfos\",null),e([s()],C.prototype,\"title\",null),e([s({type:l})],C.prototype,\"viewModel\",void 0),e([s(),h(\"esri/widgets/Feature/t9n/Feature\")],C.prototype,\"messages\",void 0),C=e([a(\"esri.widgets.Feature.FeatureMedia\")],C);const x=C;export{x as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}