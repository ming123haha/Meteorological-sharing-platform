{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { pt2px as t } from \"../../../../../../core/screenUtils.js\";\nimport { premultiplyAlphaRGBAArray as e, premultiplyAlphaRGBA as i } from \"../../color.js\";\nimport { BITSET_GENERIC_LOCK_COLOR as r, BITSET_FILL_RANDOM_PATTERN_OFFSET as o, BITSET_GENERIC_CONSIDER_ALPHA_ONLY as s, SPRITE_PADDING as l, MIN_MAX_ZOOM_PRECISION_FACTOR as a, PICTURE_FILL_COLOR as n } from \"../../definitions.js\";\nimport { degToByte as m } from \"../../GeometryUtils.js\";\nimport { i1616to32 as f, i8888to32 as c } from \"../../number.js\";\nimport { FillMaterialKey as h } from \"../../materialKey/MaterialKey.js\";\nimport { getMinMaxZoom as u, DEFAULT_MIN_ZOOM as d, DEFAULT_MAX_ZOOM as p } from \"./util.js\";\nimport y from \"./WGLBaseFillTemplate.js\";\nimport x from \"./WGLMeshTemplate.js\";\nconst M = 128;\n\nclass j extends y(x) {\n  constructor(t, e, i, r, o, s, l, n, m, u, d, p, y, x, M, j) {\n    super(), this._effects = x;\n    const w = h.load(t);\n    e && (w.sdf = e.sdf, w.pattern = !0, w.textureBinding = e.textureBinding), this.fillColor = i, this.tl = r, this.br = o, this.aux21 = f(s, l), this.aux22 = f(n, m), this.aux3 = c(u, d, p, 0), this._bitset = y, this._minMaxZoom = f(Math.round(M * a), Math.round(j * a)), this._materialKey = w.data;\n  }\n\n  static fromCIMFill(e, a, n) {\n    const c = e.color,\n          h = c && i(c) || 0,\n          d = e.materialKey,\n          [p, y] = u(e.scaleInfo, n),\n          x = (e.colorLocked ? r : 0) | (e.applyRandomOffset ? o : 0) | (e.sampleAlphaOnly ? s : 0);\n    if (!a) return new j(d, null, h, 0, 0, 0, 0, 0, 0, 0, 0, 0, x, e.effects, p, y);\n\n    const {\n      rect: w,\n      width: g,\n      height: K\n    } = a,\n          _ = e.scaleX || 1,\n          b = w.x + l,\n          F = w.y + l,\n          L = b + g,\n          T = F + K,\n          A = t(e.height),\n          B = _ * A;\n\n    let G = Math.round(A);\n    G <= 0 && (G = T - F);\n    let S = Math.round(B);\n    S <= 0 && (S = L - b);\n    const C = t(e.offsetX || 0),\n          I = t(-e.offsetY || 0),\n          O = f(b, F),\n          R = f(L, T);\n    return new j(d, a, h, O, R, S, G, C, I, M, M, m(e.angle), x, e.effects, p, y);\n  }\n\n  static fromSimpleFill(t, i, o = !1) {\n    const {\n      color: s\n    } = t,\n          a = s && \"esriSFSNull\" !== t.style && e(s) || 0,\n          n = o ? r : 0,\n          m = t.materialKey;\n    let c;\n\n    if (i) {\n      const {\n        rect: t,\n        width: e,\n        height: r,\n        pixelRatio: o\n      } = i,\n            s = t.x + l,\n            h = t.y + l,\n            u = s + e,\n            y = h + r,\n            x = f(s, h),\n            w = f(u, y);\n      c = new j(m, i, a, x, w, e / o, r / o, 0, 0, M, M, 0, n, null, d, p);\n    } else c = new j(m, null, a, 0, 0, 0, 0, 0, 0, 0, 0, 0, n, null, d, p);\n\n    return c._maybeAddLineTemplate(t), c;\n  }\n\n  static fromPictureFill(e, i, o = !1) {\n    const s = n,\n          {\n      rect: a,\n      width: m,\n      height: c\n    } = i,\n          h = a.x + l,\n          u = a.y + l,\n          y = h + m,\n          x = u + c,\n          w = f(h, u),\n          g = f(y, x),\n          K = Math.round(t(e.width)),\n          _ = Math.round(t(e.height)),\n          b = t(e.xoffset),\n          F = t(-e.yoffset),\n          L = e.materialKey,\n          T = o ? r : 0,\n          A = new j(L, i, s, w, g, K, _, b, F, M * e.xscale, M * e.yscale, 0, T, null, d, p);\n\n    return A._maybeAddLineTemplate(e), A;\n  }\n\n}\n\nexport { j as default };","map":{"version":3,"names":["pt2px","t","premultiplyAlphaRGBAArray","e","premultiplyAlphaRGBA","i","BITSET_GENERIC_LOCK_COLOR","r","BITSET_FILL_RANDOM_PATTERN_OFFSET","o","BITSET_GENERIC_CONSIDER_ALPHA_ONLY","s","SPRITE_PADDING","l","MIN_MAX_ZOOM_PRECISION_FACTOR","a","PICTURE_FILL_COLOR","n","degToByte","m","i1616to32","f","i8888to32","c","FillMaterialKey","h","getMinMaxZoom","u","DEFAULT_MIN_ZOOM","d","DEFAULT_MAX_ZOOM","p","y","x","M","j","constructor","_effects","w","load","sdf","pattern","textureBinding","fillColor","tl","br","aux21","aux22","aux3","_bitset","_minMaxZoom","Math","round","_materialKey","data","fromCIMFill","color","materialKey","scaleInfo","colorLocked","applyRandomOffset","sampleAlphaOnly","effects","rect","width","g","height","K","_","scaleX","b","F","L","T","A","B","G","S","C","offsetX","I","offsetY","O","R","angle","fromSimpleFill","style","pixelRatio","_maybeAddLineTemplate","fromPictureFill","xoffset","yoffset","xscale","yscale","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLFillTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlphaRGBAArray as e,premultiplyAlphaRGBA as i}from\"../../color.js\";import{BITSET_GENERIC_LOCK_COLOR as r,BITSET_FILL_RANDOM_PATTERN_OFFSET as o,BITSET_GENERIC_CONSIDER_ALPHA_ONLY as s,SPRITE_PADDING as l,MIN_MAX_ZOOM_PRECISION_FACTOR as a,PICTURE_FILL_COLOR as n}from\"../../definitions.js\";import{degToByte as m}from\"../../GeometryUtils.js\";import{i1616to32 as f,i8888to32 as c}from\"../../number.js\";import{FillMaterialKey as h}from\"../../materialKey/MaterialKey.js\";import{getMinMaxZoom as u,DEFAULT_MIN_ZOOM as d,DEFAULT_MAX_ZOOM as p}from\"./util.js\";import y from\"./WGLBaseFillTemplate.js\";import x from\"./WGLMeshTemplate.js\";const M=128;class j extends(y(x)){constructor(t,e,i,r,o,s,l,n,m,u,d,p,y,x,M,j){super(),this._effects=x;const w=h.load(t);e&&(w.sdf=e.sdf,w.pattern=!0,w.textureBinding=e.textureBinding),this.fillColor=i,this.tl=r,this.br=o,this.aux21=f(s,l),this.aux22=f(n,m),this.aux3=c(u,d,p,0),this._bitset=y,this._minMaxZoom=f(Math.round(M*a),Math.round(j*a)),this._materialKey=w.data}static fromCIMFill(e,a,n){const c=e.color,h=c&&i(c)||0,d=e.materialKey,[p,y]=u(e.scaleInfo,n),x=(e.colorLocked?r:0)|(e.applyRandomOffset?o:0)|(e.sampleAlphaOnly?s:0);if(!a)return new j(d,null,h,0,0,0,0,0,0,0,0,0,x,e.effects,p,y);const{rect:w,width:g,height:K}=a,_=e.scaleX||1,b=w.x+l,F=w.y+l,L=b+g,T=F+K,A=t(e.height),B=_*A;let G=Math.round(A);G<=0&&(G=T-F);let S=Math.round(B);S<=0&&(S=L-b);const C=t(e.offsetX||0),I=t(-e.offsetY||0),O=f(b,F),R=f(L,T);return new j(d,a,h,O,R,S,G,C,I,M,M,m(e.angle),x,e.effects,p,y)}static fromSimpleFill(t,i,o=!1){const{color:s}=t,a=s&&\"esriSFSNull\"!==t.style&&e(s)||0,n=o?r:0,m=t.materialKey;let c;if(i){const{rect:t,width:e,height:r,pixelRatio:o}=i,s=t.x+l,h=t.y+l,u=s+e,y=h+r,x=f(s,h),w=f(u,y);c=new j(m,i,a,x,w,e/o,r/o,0,0,M,M,0,n,null,d,p)}else c=new j(m,null,a,0,0,0,0,0,0,0,0,0,n,null,d,p);return c._maybeAddLineTemplate(t),c}static fromPictureFill(e,i,o=!1){const s=n,{rect:a,width:m,height:c}=i,h=a.x+l,u=a.y+l,y=h+m,x=u+c,w=f(h,u),g=f(y,x),K=Math.round(t(e.width)),_=Math.round(t(e.height)),b=t(e.xoffset),F=t(-e.yoffset),L=e.materialKey,T=o?r:0,A=new j(L,i,s,w,g,K,_,b,F,M*e.xscale,M*e.yscale,0,T,null,d,p);return A._maybeAddLineTemplate(e),A}}export{j as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}