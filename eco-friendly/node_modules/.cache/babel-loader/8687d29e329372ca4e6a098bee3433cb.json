{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../core/maybe.js\";\nimport { vtlBrushes as t } from \"../brushes.js\";\nimport r from \"./shaders/VTLMaterialManager.js\";\nimport { Visibility as s, StyleLayerType as a } from \"./style/StyleDefinition.js\";\nimport { CompareFunction as i, BlendFactor as n } from \"../../../webgl/enums.js\";\nconst l = 1e-6;\n\nclass o {\n  constructor(e, t) {\n    this.spriteMosaic = e, this.glyphMosaic = t, this._brushCache = new Map(), this._vtlMaterialManager = new r();\n  }\n\n  dispose() {\n    this._brushCache && (this._brushCache.forEach(e => e.dispose()), this._brushCache = null), this._vtlMaterialManager = e(this._vtlMaterialManager), this.spriteMosaic.dispose(), this.glyphMosaic.dispose();\n  }\n\n  get vectorTilesMaterialManager() {\n    return this._vtlMaterialManager;\n  }\n\n  drawTile(e, t, r) {\n    const {\n      context: s\n    } = e,\n          a = r.layers;\n    r.backgroundBucketIds.length > 0 && (e.renderPass = \"background\", r.backgroundBucketIds.forEach(s => this._renderStyleLayer(r.getLayerById(s), e, t, !0))), s.setBlendingEnabled(!1), s.setDepthTestEnabled(!0), s.setDepthWriteEnabled(!0), s.setDepthFunction(i.LEQUAL), e.renderPass = \"opaque\";\n\n    for (let i = a.length - 1; i >= 0; i--) this._renderStyleLayer(a[i], e, t, !1);\n\n    s.setDepthWriteEnabled(!1), s.setBlendingEnabled(!0), s.setBlendFunctionSeparate(n.ONE, n.ONE_MINUS_SRC_ALPHA, n.ONE, n.ONE_MINUS_SRC_ALPHA), e.renderPass = \"translucent\";\n\n    for (let i = 0; i < a.length; i++) this._renderStyleLayer(a[i], e, t, !1);\n\n    s.setDepthTestEnabled(!1), e.renderPass = \"symbol\";\n\n    for (let i = 0; i < a.length; i++) this._renderStyleLayer(a[i], e, t, !1);\n\n    s.bindVAO();\n  }\n\n  _renderStyleLayer(e, t, r, i = !1) {\n    if (!(i || e && r.layerData.has(e.uid))) return;\n    const n = e.getLayoutProperty(\"visibility\");\n    if (n && n.getValue() === s.NONE) return;\n    const {\n      renderPass: o\n    } = t;\n    let h;\n\n    switch (e.type) {\n      case a.BACKGROUND:\n        if (\"background\" !== o) return;\n        h = \"vtlBackground\";\n        break;\n\n      case a.FILL:\n        if (\"opaque\" !== o && \"translucent\" !== t.renderPass) return;\n        h = \"vtlFill\";\n        break;\n\n      case a.LINE:\n        if (\"translucent\" !== o) return;\n        h = \"vtlLine\";\n        break;\n\n      case a.CIRCLE:\n        if (\"symbol\" !== o) return;\n        h = \"vtlCircle\";\n        break;\n\n      case a.SYMBOL:\n        if (\"symbol\" !== o) return;\n        h = \"vtlSymbol\";\n    }\n\n    const c = t.displayLevel;\n    void 0 !== e.minzoom && e.minzoom > c + l || void 0 !== e.maxzoom && e.maxzoom <= c - l || (t.styleLayerUID = e.uid, t.styleLayer = e, this._drawWithBrush(t, r, h));\n  }\n\n  _drawWithBrush(e, r, s) {\n    if (!this._brushCache.has(s)) {\n      const e = t[s];\n\n      this._brushCache.set(s, new e());\n    }\n\n    this._brushCache.get(s).drawMany(e, [r]);\n  }\n\n}\n\nexport { o as default };","map":{"version":3,"names":["disposeMaybe","e","vtlBrushes","t","r","Visibility","s","StyleLayerType","a","CompareFunction","i","BlendFactor","n","l","o","constructor","spriteMosaic","glyphMosaic","_brushCache","Map","_vtlMaterialManager","dispose","forEach","vectorTilesMaterialManager","drawTile","context","layers","backgroundBucketIds","length","renderPass","_renderStyleLayer","getLayerById","setBlendingEnabled","setDepthTestEnabled","setDepthWriteEnabled","setDepthFunction","LEQUAL","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","bindVAO","layerData","has","uid","getLayoutProperty","getValue","NONE","h","type","BACKGROUND","FILL","LINE","CIRCLE","SYMBOL","c","displayLevel","minzoom","maxzoom","styleLayerUID","styleLayer","_drawWithBrush","set","get","drawMany","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/vectorTiles/VTLPainter3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../core/maybe.js\";import{vtlBrushes as t}from\"../brushes.js\";import r from\"./shaders/VTLMaterialManager.js\";import{Visibility as s,StyleLayerType as a}from\"./style/StyleDefinition.js\";import{CompareFunction as i,BlendFactor as n}from\"../../../webgl/enums.js\";const l=1e-6;class o{constructor(e,t){this.spriteMosaic=e,this.glyphMosaic=t,this._brushCache=new Map,this._vtlMaterialManager=new r}dispose(){this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache=null),this._vtlMaterialManager=e(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawTile(e,t,r){const{context:s}=e,a=r.layers;r.backgroundBucketIds.length>0&&(e.renderPass=\"background\",r.backgroundBucketIds.forEach((s=>this._renderStyleLayer(r.getLayerById(s),e,t,!0)))),s.setBlendingEnabled(!1),s.setDepthTestEnabled(!0),s.setDepthWriteEnabled(!0),s.setDepthFunction(i.LEQUAL),e.renderPass=\"opaque\";for(let i=a.length-1;i>=0;i--)this._renderStyleLayer(a[i],e,t,!1);s.setDepthWriteEnabled(!1),s.setBlendingEnabled(!0),s.setBlendFunctionSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),e.renderPass=\"translucent\";for(let i=0;i<a.length;i++)this._renderStyleLayer(a[i],e,t,!1);s.setDepthTestEnabled(!1),e.renderPass=\"symbol\";for(let i=0;i<a.length;i++)this._renderStyleLayer(a[i],e,t,!1);s.bindVAO()}_renderStyleLayer(e,t,r,i=!1){if(!(i||e&&r.layerData.has(e.uid)))return;const n=e.getLayoutProperty(\"visibility\");if(n&&n.getValue()===s.NONE)return;const{renderPass:o}=t;let h;switch(e.type){case a.BACKGROUND:if(\"background\"!==o)return;h=\"vtlBackground\";break;case a.FILL:if(\"opaque\"!==o&&\"translucent\"!==t.renderPass)return;h=\"vtlFill\";break;case a.LINE:if(\"translucent\"!==o)return;h=\"vtlLine\";break;case a.CIRCLE:if(\"symbol\"!==o)return;h=\"vtlCircle\";break;case a.SYMBOL:if(\"symbol\"!==o)return;h=\"vtlSymbol\"}const c=t.displayLevel;void 0!==e.minzoom&&e.minzoom>c+l||void 0!==e.maxzoom&&e.maxzoom<=c-l||(t.styleLayerUID=e.uid,t.styleLayer=e,this._drawWithBrush(t,r,h))}_drawWithBrush(e,r,s){if(!this._brushCache.has(s)){const e=t[s];this._brushCache.set(s,new e)}this._brushCache.get(s).drawMany(e,[r])}}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}