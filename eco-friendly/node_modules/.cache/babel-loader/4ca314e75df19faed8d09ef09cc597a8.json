{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport i from \"../../core/Accessor.js\";\nimport { ByteSizeUnit as r } from \"../../core/byteSizeEstimations.js\";\nimport s from \"../../core/Error.js\";\nimport { HandleOwnerMixin as l } from \"../../core/HandleOwner.js\";\nimport a from \"../../core/Logger.js\";\nimport o from \"../../core/LRUCache.js\";\nimport n from \"../../core/PooledArray.js\";\nimport { onAbort as c, isAbortError as h, isAborted as p, createAbortError as m } from \"../../core/promiseUtils.js\";\nimport { watch as f, syncAndInitial as u } from \"../../core/reactiveUtils.js\";\nimport { waitTicks as v } from \"../../core/scheduling.js\";\nimport { objectToQuery as y } from \"../../core/urlUtils.js\";\nimport { property as b } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport { cast as d } from \"../../core/accessorSupport/decorators/cast.js\";\nimport { subclass as _ } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { TileKey as g } from \"./TileKey.js\";\nimport { tilemapDefinitionId as w, Tilemap as T } from \"./Tilemap.js\";\nvar j;\nlet z = j = class extends l(i) {\n  constructor(e) {\n    super(e), this._pendingTilemapRequests = {}, this._availableLevels = {}, this.levels = 5, this.cacheByteSize = 2 * r.MEGABYTES, this.request = t, this._prefetchingEnabled = !0;\n  }\n\n  initialize() {\n    this._tilemapCache = new o(this.cacheByteSize), this.addHandles([f(() => {\n      const {\n        layer: e\n      } = this;\n      return [e?.parsedUrl, e?.tileServers, e?.apiKey, e?.customParameters];\n    }, () => this._initializeTilemapDefinition()), f(() => this.layer?.tileInfo?.lods, e => this._initializeAvailableLevels(e), u)]), this._initializeTilemapDefinition();\n  }\n\n  castLevels(e) {\n    return e <= 2 ? (a.getLogger(this.declaredClass).error(\"Minimum levels for Tilemap is 3, but got \", e), 3) : e;\n  }\n\n  get size() {\n    return 1 << this.levels;\n  }\n\n  fetchTilemap(e, t, i, r) {\n    if (!this._availableLevels[e]) return Promise.reject(new s(\"tilemap-cache:level-unavailable\", `Level ${e} is unavailable in the service`));\n\n    const l = this._tmpTilemapDefinition,\n          a = this._tilemapFromCache(e, t, i, l);\n\n    if (a) return Promise.resolve(a);\n    const o = r && r.signal;\n    return r = { ...r,\n      signal: null\n    }, new Promise((e, t) => {\n      c(o, () => t(m()));\n      const i = w(l);\n      let s = this._pendingTilemapRequests[i];\n\n      if (!s) {\n        s = T.fromDefinition(l, r).then(e => (this._tilemapCache.put(i, e, e.byteSize), e));\n\n        const e = () => delete this._pendingTilemapRequests[i];\n\n        this._pendingTilemapRequests[i] = s, s.then(e, e);\n      }\n\n      s.then(e, t);\n    });\n  }\n\n  getAvailability(e, t, i) {\n    if (!this._availableLevels[e]) return \"unavailable\";\n\n    const r = this._tilemapFromCache(e, t, i, this._tmpTilemapDefinition);\n\n    return r ? r.getAvailability(t, i) : \"unknown\";\n  }\n\n  fetchAvailability(e, t, i, r) {\n    return this._availableLevels[e] ? this.fetchTilemap(e, t, i, r).catch(e => e).then(r => {\n      if (r instanceof T) {\n        const l = r.getAvailability(t, i);\n        if (\"unavailable\" === l) throw new s(\"tile-map:tile-unavailable\", \"Tile is not available\", {\n          level: e,\n          row: t,\n          col: i\n        });\n        return l;\n      }\n\n      if (h(r)) throw r;\n      return \"unknown\";\n    }) : Promise.reject(new s(\"tilemap-cache:level-unavailable\", `Level ${e} is unavailable in the service`));\n  }\n\n  fetchAvailabilityUpsample(e, t, i, r, s) {\n    r.level = e, r.row = t, r.col = i;\n    const l = this.layer.tileInfo;\n    l.updateTileInfo(r);\n    const a = this.fetchAvailability(e, t, i, s).catch(e => {\n      if (h(e)) throw e;\n      if (l.upsampleTile(r)) return this.fetchAvailabilityUpsample(r.level, r.row, r.col, r);\n      throw e;\n    });\n    return this._fetchAvailabilityUpsamplePrefetch(r.id, e, t, i, s, a), a;\n  }\n\n  async _fetchAvailabilityUpsamplePrefetch(e, t, i, r, s, l) {\n    if (!this._prefetchingEnabled) return;\n    const a = `prefetch-${e}`;\n    if (this.handles.has(a)) return;\n    const o = new AbortController();\n    l.then(() => o.abort(), () => o.abort());\n    let n = !1;\n    const c = {\n      remove() {\n        n || (n = !0, o.abort());\n      }\n\n    };\n    if (this.handles.add(c, a), await v(10, o.signal).catch(() => {}), n || (n = !0, this.handles.remove(a)), p(o)) return;\n    const h = new g(e, t, i, r),\n          m = { ...s,\n      signal: o.signal\n    },\n          f = this.layer.tileInfo;\n\n    for (let p = 0; j._prefetches.length < j._maxPrefetch && f.upsampleTile(h); ++p) {\n      const e = this.fetchAvailability(h.level, h.row, h.col, m);\n\n      j._prefetches.push(e);\n\n      const t = () => {\n        j._prefetches.removeUnordered(e);\n      };\n\n      e.then(t, t);\n    }\n  }\n\n  _initializeTilemapDefinition() {\n    if (!this.layer.parsedUrl) return;\n    const {\n      parsedUrl: e,\n      apiKey: t,\n      customParameters: i\n    } = this.layer;\n    this._tilemapCache.clear(), this._tmpTilemapDefinition = {\n      service: {\n        url: e.path,\n        query: y({ ...e.query,\n          ...i,\n          token: t ?? e.query?.token\n        }),\n        tileServers: this.layer.tileServers,\n        request: this.request,\n        type: this.layer.type\n      },\n      width: this.size,\n      height: this.size,\n      level: 0,\n      row: 0,\n      col: 0\n    };\n  }\n\n  _tilemapFromCache(e, t, i, r) {\n    r.level = e, r.row = t - t % this.size, r.col = i - i % this.size;\n    const s = w(r);\n    return this._tilemapCache.get(s);\n  }\n\n  _initializeAvailableLevels(e) {\n    this._availableLevels = {}, e && e.forEach(e => this._availableLevels[e.level] = !0);\n  }\n\n  get test() {\n    const e = this;\n    return {\n      get prefetchingEnabled() {\n        return e._prefetchingEnabled;\n      },\n\n      set prefetchingEnabled(t) {\n        e._prefetchingEnabled = t;\n      },\n\n      hasTilemap: (t, i, r) => !!e._tilemapFromCache(t, i, r, e._tmpTilemapDefinition)\n    };\n  }\n\n};\nz._maxPrefetch = 4, z._prefetches = new n({\n  initialSize: j._maxPrefetch\n}), e([b({\n  constructOnly: !0,\n  type: Number\n})], z.prototype, \"levels\", void 0), e([d(\"levels\")], z.prototype, \"castLevels\", null), e([b({\n  readOnly: !0,\n  type: Number\n})], z.prototype, \"size\", null), e([b({\n  constructOnly: !0,\n  type: Number\n})], z.prototype, \"cacheByteSize\", void 0), e([b({\n  constructOnly: !0\n})], z.prototype, \"layer\", void 0), e([b({\n  constructOnly: !0\n})], z.prototype, \"request\", void 0), z = j = e([_(\"esri.layers.support.TilemapCache\")], z);\nexport { z as TilemapCache };","map":{"version":3,"names":["_","e","t","i","ByteSizeUnit","r","s","HandleOwnerMixin","l","a","o","n","onAbort","c","isAbortError","h","isAborted","p","createAbortError","m","watch","f","syncAndInitial","u","waitTicks","v","objectToQuery","y","property","b","cast","d","subclass","TileKey","g","tilemapDefinitionId","w","Tilemap","T","j","z","constructor","_pendingTilemapRequests","_availableLevels","levels","cacheByteSize","MEGABYTES","request","_prefetchingEnabled","initialize","_tilemapCache","addHandles","layer","parsedUrl","tileServers","apiKey","customParameters","_initializeTilemapDefinition","tileInfo","lods","_initializeAvailableLevels","castLevels","getLogger","declaredClass","error","size","fetchTilemap","Promise","reject","_tmpTilemapDefinition","_tilemapFromCache","resolve","signal","fromDefinition","then","put","byteSize","getAvailability","fetchAvailability","catch","level","row","col","fetchAvailabilityUpsample","updateTileInfo","upsampleTile","_fetchAvailabilityUpsamplePrefetch","id","handles","has","AbortController","abort","remove","add","_prefetches","length","_maxPrefetch","push","removeUnordered","clear","service","url","path","query","token","type","width","height","get","forEach","test","prefetchingEnabled","hasTilemap","initialSize","constructOnly","Number","prototype","readOnly","TilemapCache"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/TilemapCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import i from\"../../core/Accessor.js\";import{ByteSizeUnit as r}from\"../../core/byteSizeEstimations.js\";import s from\"../../core/Error.js\";import{HandleOwnerMixin as l}from\"../../core/HandleOwner.js\";import a from\"../../core/Logger.js\";import o from\"../../core/LRUCache.js\";import n from\"../../core/PooledArray.js\";import{onAbort as c,isAbortError as h,isAborted as p,createAbortError as m}from\"../../core/promiseUtils.js\";import{watch as f,syncAndInitial as u}from\"../../core/reactiveUtils.js\";import{waitTicks as v}from\"../../core/scheduling.js\";import{objectToQuery as y}from\"../../core/urlUtils.js\";import{property as b}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import{cast as d}from\"../../core/accessorSupport/decorators/cast.js\";import{subclass as _}from\"../../core/accessorSupport/decorators/subclass.js\";import{TileKey as g}from\"./TileKey.js\";import{tilemapDefinitionId as w,Tilemap as T}from\"./Tilemap.js\";var j;let z=j=class extends(l(i)){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*r.MEGABYTES,this.request=t,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new o(this.cacheByteSize),this.addHandles([f((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition())),f((()=>this.layer?.tileInfo?.lods),(e=>this._initializeAvailableLevels(e)),u)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(a.getLogger(this.declaredClass).error(\"Minimum levels for Tilemap is 3, but got \",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Promise.reject(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const l=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,i,l);if(a)return Promise.resolve(a);const o=r&&r.signal;return r={...r,signal:null},new Promise(((e,t)=>{c(o,(()=>t(m())));const i=w(l);let s=this._pendingTilemapRequests[i];if(!s){s=T.fromDefinition(l,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this._availableLevels[e])return\"unavailable\";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):\"unknown\"}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof T){const l=r.getAvailability(t,i);if(\"unavailable\"===l)throw new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i});return l}if(h(r))throw r;return\"unknown\"})):Promise.reject(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,s){r.level=e,r.row=t,r.col=i;const l=this.layer.tileInfo;l.updateTileInfo(r);const a=this.fetchAvailability(e,t,i,s).catch((e=>{if(h(e))throw e;if(l.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,s,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,s,l){if(!this._prefetchingEnabled)return;const a=`prefetch-${e}`;if(this.handles.has(a))return;const o=new AbortController;l.then((()=>o.abort()),(()=>o.abort()));let n=!1;const c={remove(){n||(n=!0,o.abort())}};if(this.handles.add(c,a),await v(10,o.signal).catch((()=>{})),n||(n=!0,this.handles.remove(a)),p(o))return;const h=new g(e,t,i,r),m={...s,signal:o.signal},f=this.layer.tileInfo;for(let p=0;j._prefetches.length<j._maxPrefetch&&f.upsampleTile(h);++p){const e=this.fetchAvailability(h.level,h.row,h.col,m);j._prefetches.push(e);const t=()=>{j._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:y({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const s=w(r);return this._tilemapCache.get(s)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach((e=>this._availableLevels[e.level]=!0))}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};z._maxPrefetch=4,z._prefetches=new n({initialSize:j._maxPrefetch}),e([b({constructOnly:!0,type:Number})],z.prototype,\"levels\",void 0),e([d(\"levels\")],z.prototype,\"castLevels\",null),e([b({readOnly:!0,type:Number})],z.prototype,\"size\",null),e([b({constructOnly:!0,type:Number})],z.prototype,\"cacheByteSize\",void 0),e([b({constructOnly:!0})],z.prototype,\"layer\",void 0),e([b({constructOnly:!0})],z.prototype,\"request\",void 0),z=j=e([_(\"esri.layers.support.TilemapCache\")],z);export{z as TilemapCache};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,2BAAlB;AAA8C,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,mCAA7B;AAAiE,OAAOC,CAAP,MAAa,qBAAb;AAAmC,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,2BAAjC;AAA6D,OAAOC,CAAP,MAAa,sBAAb;AAAoC,OAAOC,CAAP,MAAa,wBAAb;AAAsC,OAAOC,CAAP,MAAa,2BAAb;AAAyC,SAAOC,OAAO,IAAIC,CAAlB,EAAoBC,YAAY,IAAIC,CAApC,EAAsCC,SAAS,IAAIC,CAAnD,EAAqDC,gBAAgB,IAAIC,CAAzE,QAA+E,4BAA/E;AAA4G,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,cAAc,IAAIC,CAApC,QAA0C,6BAA1C;AAAwE,SAAOC,SAAS,IAAIC,CAApB,QAA0B,0BAA1B;AAAqD,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,wBAA9B;AAAuD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,OAAM,0BAAN;AAAiC,SAAOC,IAAI,IAAIC,CAAf,QAAqB,+CAArB;AAAqE,SAAOC,QAAQ,IAAIhC,CAAnB,QAAyB,mDAAzB;AAA6E,SAAOiC,OAAO,IAAIC,CAAlB,QAAwB,cAAxB;AAAuC,SAAOC,mBAAmB,IAAIC,CAA9B,EAAgCC,OAAO,IAAIC,CAA3C,QAAiD,cAAjD;AAAgE,IAAIC,CAAJ;AAAM,IAAIC,CAAC,GAACD,CAAC,GAAC,cAAc/B,CAAC,CAACL,CAAD,CAAf,CAAmB;EAACsC,WAAW,CAACxC,CAAD,EAAG;IAAC,MAAMA,CAAN,GAAS,KAAKyC,uBAAL,GAA6B,EAAtC,EAAyC,KAAKC,gBAAL,GAAsB,EAA/D,EAAkE,KAAKC,MAAL,GAAY,CAA9E,EAAgF,KAAKC,aAAL,GAAmB,IAAExC,CAAC,CAACyC,SAAvG,EAAiH,KAAKC,OAAL,GAAa7C,CAA9H,EAAgI,KAAK8C,mBAAL,GAAyB,CAAC,CAA1J;EAA4J;;EAAAC,UAAU,GAAE;IAAC,KAAKC,aAAL,GAAmB,IAAIxC,CAAJ,CAAM,KAAKmC,aAAX,CAAnB,EAA6C,KAAKM,UAAL,CAAgB,CAAC9B,CAAC,CAAE,MAAI;MAAC,MAAK;QAAC+B,KAAK,EAACnD;MAAP,IAAU,IAAf;MAAoB,OAAM,CAACA,CAAC,EAAEoD,SAAJ,EAAcpD,CAAC,EAAEqD,WAAjB,EAA6BrD,CAAC,EAAEsD,MAAhC,EAAuCtD,CAAC,EAAEuD,gBAA1C,CAAN;IAAkE,CAA7F,EAAgG,MAAI,KAAKC,4BAAL,EAApG,CAAF,EAA4IpC,CAAC,CAAE,MAAI,KAAK+B,KAAL,EAAYM,QAAZ,EAAsBC,IAA5B,EAAmC1D,CAAC,IAAE,KAAK2D,0BAAL,CAAgC3D,CAAhC,CAAtC,EAA0EsB,CAA1E,CAA7I,CAAhB,CAA7C,EAAyR,KAAKkC,4BAAL,EAAzR;EAA6T;;EAAAI,UAAU,CAAC5D,CAAD,EAAG;IAAC,OAAOA,CAAC,IAAE,CAAH,IAAMQ,CAAC,CAACqD,SAAF,CAAY,KAAKC,aAAjB,EAAgCC,KAAhC,CAAsC,2CAAtC,EAAkF/D,CAAlF,GAAqF,CAA3F,IAA8FA,CAArG;EAAuG;;EAAQ,IAAJgE,IAAI,GAAE;IAAC,OAAO,KAAG,KAAKrB,MAAf;EAAsB;;EAAAsB,YAAY,CAACjE,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOE,CAAP,EAAS;IAAC,IAAG,CAAC,KAAKsC,gBAAL,CAAsB1C,CAAtB,CAAJ,EAA6B,OAAOkE,OAAO,CAACC,MAAR,CAAe,IAAI9D,CAAJ,CAAM,iCAAN,EAAyC,SAAQL,CAAE,gCAAnD,CAAf,CAAP;;IAA2G,MAAMO,CAAC,GAAC,KAAK6D,qBAAb;IAAA,MAAmC5D,CAAC,GAAC,KAAK6D,iBAAL,CAAuBrE,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6BK,CAA7B,CAArC;;IAAqE,IAAGC,CAAH,EAAK,OAAO0D,OAAO,CAACI,OAAR,CAAgB9D,CAAhB,CAAP;IAA0B,MAAMC,CAAC,GAACL,CAAC,IAAEA,CAAC,CAACmE,MAAb;IAAoB,OAAOnE,CAAC,GAAC,EAAC,GAAGA,CAAJ;MAAMmE,MAAM,EAAC;IAAb,CAAF,EAAqB,IAAIL,OAAJ,CAAa,CAAClE,CAAD,EAAGC,CAAH,KAAO;MAACW,CAAC,CAACH,CAAD,EAAI,MAAIR,CAAC,CAACiB,CAAC,EAAF,CAAT,CAAD;MAAkB,MAAMhB,CAAC,GAACiC,CAAC,CAAC5B,CAAD,CAAT;MAAa,IAAIF,CAAC,GAAC,KAAKoC,uBAAL,CAA6BvC,CAA7B,CAAN;;MAAsC,IAAG,CAACG,CAAJ,EAAM;QAACA,CAAC,GAACgC,CAAC,CAACmC,cAAF,CAAiBjE,CAAjB,EAAmBH,CAAnB,EAAsBqE,IAAtB,CAA4BzE,CAAC,KAAG,KAAKiD,aAAL,CAAmByB,GAAnB,CAAuBxE,CAAvB,EAAyBF,CAAzB,EAA2BA,CAAC,CAAC2E,QAA7B,GAAuC3E,CAA1C,CAA7B,CAAF;;QAA8E,MAAMA,CAAC,GAAC,MAAI,OAAO,KAAKyC,uBAAL,CAA6BvC,CAA7B,CAAnB;;QAAmD,KAAKuC,uBAAL,CAA6BvC,CAA7B,IAAgCG,CAAhC,EAAkCA,CAAC,CAACoE,IAAF,CAAOzE,CAAP,EAASA,CAAT,CAAlC;MAA8C;;MAAAK,CAAC,CAACoE,IAAF,CAAOzE,CAAP,EAASC,CAAT;IAAY,CAA5R,CAA5B;EAA2T;;EAAA2E,eAAe,CAAC5E,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAO;IAAC,IAAG,CAAC,KAAKwC,gBAAL,CAAsB1C,CAAtB,CAAJ,EAA6B,OAAM,aAAN;;IAAoB,MAAMI,CAAC,GAAC,KAAKiE,iBAAL,CAAuBrE,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6B,KAAKkE,qBAAlC,CAAR;;IAAiE,OAAOhE,CAAC,GAACA,CAAC,CAACwE,eAAF,CAAkB3E,CAAlB,EAAoBC,CAApB,CAAD,GAAwB,SAAhC;EAA0C;;EAAA2E,iBAAiB,CAAC7E,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOE,CAAP,EAAS;IAAC,OAAO,KAAKsC,gBAAL,CAAsB1C,CAAtB,IAAyB,KAAKiE,YAAL,CAAkBjE,CAAlB,EAAoBC,CAApB,EAAsBC,CAAtB,EAAwBE,CAAxB,EAA2B0E,KAA3B,CAAkC9E,CAAC,IAAEA,CAArC,EAAyCyE,IAAzC,CAA+CrE,CAAC,IAAE;MAAC,IAAGA,CAAC,YAAYiC,CAAhB,EAAkB;QAAC,MAAM9B,CAAC,GAACH,CAAC,CAACwE,eAAF,CAAkB3E,CAAlB,EAAoBC,CAApB,CAAR;QAA+B,IAAG,kBAAgBK,CAAnB,EAAqB,MAAM,IAAIF,CAAJ,CAAM,2BAAN,EAAkC,uBAAlC,EAA0D;UAAC0E,KAAK,EAAC/E,CAAP;UAASgF,GAAG,EAAC/E,CAAb;UAAegF,GAAG,EAAC/E;QAAnB,CAA1D,CAAN;QAAuF,OAAOK,CAAP;MAAS;;MAAA,IAAGO,CAAC,CAACV,CAAD,CAAJ,EAAQ,MAAMA,CAAN;MAAQ,OAAM,SAAN;IAAgB,CAA1P,CAAzB,GAAsR8D,OAAO,CAACC,MAAR,CAAe,IAAI9D,CAAJ,CAAM,iCAAN,EAAyC,SAAQL,CAAE,gCAAnD,CAAf,CAA7R;EAAiY;;EAAAkF,yBAAyB,CAAClF,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOE,CAAP,EAASC,CAAT,EAAW;IAACD,CAAC,CAAC2E,KAAF,GAAQ/E,CAAR,EAAUI,CAAC,CAAC4E,GAAF,GAAM/E,CAAhB,EAAkBG,CAAC,CAAC6E,GAAF,GAAM/E,CAAxB;IAA0B,MAAMK,CAAC,GAAC,KAAK4C,KAAL,CAAWM,QAAnB;IAA4BlD,CAAC,CAAC4E,cAAF,CAAiB/E,CAAjB;IAAoB,MAAMI,CAAC,GAAC,KAAKqE,iBAAL,CAAuB7E,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6BG,CAA7B,EAAgCyE,KAAhC,CAAuC9E,CAAC,IAAE;MAAC,IAAGc,CAAC,CAACd,CAAD,CAAJ,EAAQ,MAAMA,CAAN;MAAQ,IAAGO,CAAC,CAAC6E,YAAF,CAAehF,CAAf,CAAH,EAAqB,OAAO,KAAK8E,yBAAL,CAA+B9E,CAAC,CAAC2E,KAAjC,EAAuC3E,CAAC,CAAC4E,GAAzC,EAA6C5E,CAAC,CAAC6E,GAA/C,EAAmD7E,CAAnD,CAAP;MAA6D,MAAMJ,CAAN;IAAQ,CAArJ,CAAR;IAAgK,OAAO,KAAKqF,kCAAL,CAAwCjF,CAAC,CAACkF,EAA1C,EAA6CtF,CAA7C,EAA+CC,CAA/C,EAAiDC,CAAjD,EAAmDG,CAAnD,EAAqDG,CAArD,GAAwDA,CAA/D;EAAiE;;EAAwC,MAAlC6E,kCAAkC,CAACrF,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOE,CAAP,EAASC,CAAT,EAAWE,CAAX,EAAa;IAAC,IAAG,CAAC,KAAKwC,mBAAT,EAA6B;IAAO,MAAMvC,CAAC,GAAE,YAAWR,CAAE,EAAtB;IAAwB,IAAG,KAAKuF,OAAL,CAAaC,GAAb,CAAiBhF,CAAjB,CAAH,EAAuB;IAAO,MAAMC,CAAC,GAAC,IAAIgF,eAAJ,EAAR;IAA4BlF,CAAC,CAACkE,IAAF,CAAQ,MAAIhE,CAAC,CAACiF,KAAF,EAAZ,EAAwB,MAAIjF,CAAC,CAACiF,KAAF,EAA5B;IAAwC,IAAIhF,CAAC,GAAC,CAAC,CAAP;IAAS,MAAME,CAAC,GAAC;MAAC+E,MAAM,GAAE;QAACjF,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAH,EAAKD,CAAC,CAACiF,KAAF,EAAR,CAAD;MAAoB;;IAA9B,CAAR;IAAwC,IAAG,KAAKH,OAAL,CAAaK,GAAb,CAAiBhF,CAAjB,EAAmBJ,CAAnB,GAAsB,MAAMgB,CAAC,CAAC,EAAD,EAAIf,CAAC,CAAC8D,MAAN,CAAD,CAAeO,KAAf,CAAsB,MAAI,CAAE,CAA5B,CAA5B,EAA2DpE,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAH,EAAK,KAAK6E,OAAL,CAAaI,MAAb,CAAoBnF,CAApB,CAAR,CAA5D,EAA4FQ,CAAC,CAACP,CAAD,CAAhG,EAAoG;IAAO,MAAMK,CAAC,GAAC,IAAImB,CAAJ,CAAMjC,CAAN,EAAQC,CAAR,EAAUC,CAAV,EAAYE,CAAZ,CAAR;IAAA,MAAuBc,CAAC,GAAC,EAAC,GAAGb,CAAJ;MAAMkE,MAAM,EAAC9D,CAAC,CAAC8D;IAAf,CAAzB;IAAA,MAAgDnD,CAAC,GAAC,KAAK+B,KAAL,CAAWM,QAA7D;;IAAsE,KAAI,IAAIzC,CAAC,GAAC,CAAV,EAAYsB,CAAC,CAACuD,WAAF,CAAcC,MAAd,GAAqBxD,CAAC,CAACyD,YAAvB,IAAqC3E,CAAC,CAACgE,YAAF,CAAetE,CAAf,CAAjD,EAAmE,EAAEE,CAArE,EAAuE;MAAC,MAAMhB,CAAC,GAAC,KAAK6E,iBAAL,CAAuB/D,CAAC,CAACiE,KAAzB,EAA+BjE,CAAC,CAACkE,GAAjC,EAAqClE,CAAC,CAACmE,GAAvC,EAA2C/D,CAA3C,CAAR;;MAAsDoB,CAAC,CAACuD,WAAF,CAAcG,IAAd,CAAmBhG,CAAnB;;MAAsB,MAAMC,CAAC,GAAC,MAAI;QAACqC,CAAC,CAACuD,WAAF,CAAcI,eAAd,CAA8BjG,CAA9B;MAAiC,CAA9C;;MAA+CA,CAAC,CAACyE,IAAF,CAAOxE,CAAP,EAASA,CAAT;IAAY;EAAC;;EAAAuD,4BAA4B,GAAE;IAAC,IAAG,CAAC,KAAKL,KAAL,CAAWC,SAAf,EAAyB;IAAO,MAAK;MAACA,SAAS,EAACpD,CAAX;MAAasD,MAAM,EAACrD,CAApB;MAAsBsD,gBAAgB,EAACrD;IAAvC,IAA0C,KAAKiD,KAApD;IAA0D,KAAKF,aAAL,CAAmBiD,KAAnB,IAA2B,KAAK9B,qBAAL,GAA2B;MAAC+B,OAAO,EAAC;QAACC,GAAG,EAACpG,CAAC,CAACqG,IAAP;QAAYC,KAAK,EAAC5E,CAAC,CAAC,EAAC,GAAG1B,CAAC,CAACsG,KAAN;UAAY,GAAGpG,CAAf;UAAiBqG,KAAK,EAACtG,CAAC,IAAED,CAAC,CAACsG,KAAF,EAASC;QAAnC,CAAD,CAAnB;QAA+DlD,WAAW,EAAC,KAAKF,KAAL,CAAWE,WAAtF;QAAkGP,OAAO,EAAC,KAAKA,OAA/G;QAAuH0D,IAAI,EAAC,KAAKrD,KAAL,CAAWqD;MAAvI,CAAT;MAAsJC,KAAK,EAAC,KAAKzC,IAAjK;MAAsK0C,MAAM,EAAC,KAAK1C,IAAlL;MAAuLe,KAAK,EAAC,CAA7L;MAA+LC,GAAG,EAAC,CAAnM;MAAqMC,GAAG,EAAC;IAAzM,CAAtD;EAAkQ;;EAAAZ,iBAAiB,CAACrE,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOE,CAAP,EAAS;IAACA,CAAC,CAAC2E,KAAF,GAAQ/E,CAAR,EAAUI,CAAC,CAAC4E,GAAF,GAAM/E,CAAC,GAACA,CAAC,GAAC,KAAK+D,IAAzB,EAA8B5D,CAAC,CAAC6E,GAAF,GAAM/E,CAAC,GAACA,CAAC,GAAC,KAAK8D,IAA7C;IAAkD,MAAM3D,CAAC,GAAC8B,CAAC,CAAC/B,CAAD,CAAT;IAAa,OAAO,KAAK6C,aAAL,CAAmB0D,GAAnB,CAAuBtG,CAAvB,CAAP;EAAiC;;EAAAsD,0BAA0B,CAAC3D,CAAD,EAAG;IAAC,KAAK0C,gBAAL,GAAsB,EAAtB,EAAyB1C,CAAC,IAAEA,CAAC,CAAC4G,OAAF,CAAW5G,CAAC,IAAE,KAAK0C,gBAAL,CAAsB1C,CAAC,CAAC+E,KAAxB,IAA+B,CAAC,CAA9C,CAA5B;EAA8E;;EAAQ,IAAJ8B,IAAI,GAAE;IAAC,MAAM7G,CAAC,GAAC,IAAR;IAAa,OAAM;MAAC,IAAI8G,kBAAJ,GAAwB;QAAC,OAAO9G,CAAC,CAAC+C,mBAAT;MAA6B,CAAvD;;MAAwD,IAAI+D,kBAAJ,CAAuB7G,CAAvB,EAAyB;QAACD,CAAC,CAAC+C,mBAAF,GAAsB9C,CAAtB;MAAwB,CAA1G;;MAA2G8G,UAAU,EAAC,CAAC9G,CAAD,EAAGC,CAAH,EAAKE,CAAL,KAAS,CAAC,CAACJ,CAAC,CAACqE,iBAAF,CAAoBpE,CAApB,EAAsBC,CAAtB,EAAwBE,CAAxB,EAA0BJ,CAAC,CAACoE,qBAA5B;IAAjI,CAAN;EAA2L;;AAAvjH,CAA3B;AAAolH7B,CAAC,CAACwD,YAAF,GAAe,CAAf,EAAiBxD,CAAC,CAACsD,WAAF,GAAc,IAAInF,CAAJ,CAAM;EAACsG,WAAW,EAAC1E,CAAC,CAACyD;AAAf,CAAN,CAA/B,EAAmE/F,CAAC,CAAC,CAAC4B,CAAC,CAAC;EAACqF,aAAa,EAAC,CAAC,CAAhB;EAAkBT,IAAI,EAACU;AAAvB,CAAD,CAAF,CAAD,EAAqC3E,CAAC,CAAC4E,SAAvC,EAAiD,QAAjD,EAA0D,KAAK,CAA/D,CAApE,EAAsInH,CAAC,CAAC,CAAC8B,CAAC,CAAC,QAAD,CAAF,CAAD,EAAeS,CAAC,CAAC4E,SAAjB,EAA2B,YAA3B,EAAwC,IAAxC,CAAvI,EAAqLnH,CAAC,CAAC,CAAC4B,CAAC,CAAC;EAACwF,QAAQ,EAAC,CAAC,CAAX;EAAaZ,IAAI,EAACU;AAAlB,CAAD,CAAF,CAAD,EAAgC3E,CAAC,CAAC4E,SAAlC,EAA4C,MAA5C,EAAmD,IAAnD,CAAtL,EAA+OnH,CAAC,CAAC,CAAC4B,CAAC,CAAC;EAACqF,aAAa,EAAC,CAAC,CAAhB;EAAkBT,IAAI,EAACU;AAAvB,CAAD,CAAF,CAAD,EAAqC3E,CAAC,CAAC4E,SAAvC,EAAiD,eAAjD,EAAiE,KAAK,CAAtE,CAAhP,EAAyTnH,CAAC,CAAC,CAAC4B,CAAC,CAAC;EAACqF,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB1E,CAAC,CAAC4E,SAA3B,EAAqC,OAArC,EAA6C,KAAK,CAAlD,CAA1T,EAA+WnH,CAAC,CAAC,CAAC4B,CAAC,CAAC;EAACqF,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB1E,CAAC,CAAC4E,SAA3B,EAAqC,SAArC,EAA+C,KAAK,CAApD,CAAhX,EAAua5E,CAAC,GAACD,CAAC,GAACtC,CAAC,CAAC,CAACD,CAAC,CAAC,kCAAD,CAAF,CAAD,EAAyCwC,CAAzC,CAA5a;AAAwd,SAAOA,CAAC,IAAI8E,YAAZ"},"metadata":{},"sourceType":"module"}