{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../Color.js\";\nimport a from \"../../../Graphic.js\";\nimport { neverReached as r } from \"../../../core/compilerUtils.js\";\nimport i from \"../../../core/Logger.js\";\nimport { isNone as n, isSome as t } from \"../../../core/maybe.js\";\nimport { meterIn as s } from \"../../support/lengthUtils.js\";\nimport { isSizeVariable as l, isValidNumber as o, TransformationType as c, InputValueType as u } from \"./sizeVariableUtils.js\";\nconst f = i.getLogger(\"esri.renderers.visualVariables.support.visualVariableUtils\"),\n      p = new a(),\n      d = Math.PI,\n      v = /^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i;\n\nfunction b(a, r, i) {\n  const s = \"visualVariables\" in a && a.visualVariables ? a.visualVariables.find(e => \"color\" === e.type) : a;\n  if (!s) return;\n  if (\"esri.renderers.visualVariables.ColorVariable\" !== s.declaredClass) return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable\");\n  const l = \"number\" == typeof r,\n        o = l ? null : r,\n        c = o && o.attributes;\n  let u = l ? r : null;\n  const p = s.field,\n        {\n    ipData: d,\n    hasExpression: v\n  } = s.cache;\n  let b = s.cache.compiledFunc;\n\n  if (!p && !v) {\n    const e = s.stops;\n    return e && e[0] && e[0].color;\n  }\n\n  if (\"number\" != typeof u) if (v) {\n    if (n(i) || n(i.arcade)) return void f.error(\"Use of arcade expressions requires an arcade context\");\n    const e = {\n      viewingMode: i.viewingMode,\n      scale: i.scale,\n      spatialReference: i.spatialReference\n    },\n          a = i.arcade.arcadeUtils,\n          r = a.getViewInfo(e),\n          t = a.createExecContext(o, r);\n\n    if (!b) {\n      const e = a.createSyntaxTree(s.valueExpression);\n      b = a.createFunction(e), s.cache.compiledFunc = b;\n    }\n\n    u = a.executeFunction(b, t);\n  } else c && (u = c[p]);\n  const h = s.normalizationField,\n        m = null != c && null != h ? parseFloat(c[h]) : void 0;\n\n  if (null != u && (!h || l || !isNaN(m) && 0 !== m)) {\n    isNaN(m) || l || (u /= m);\n    const a = R(u, d);\n\n    if (a) {\n      const r = a[0],\n            n = a[1],\n            l = r === n ? s.stops[r].color : e.blendColors(s.stops[r].color, s.stops[n].color, a[2], t(i) ? i.color : void 0);\n      return new e(l);\n    }\n  }\n}\n\nfunction h(e, a, r) {\n  const i = \"visualVariables\" in e && e.visualVariables ? e.visualVariables.find(e => \"opacity\" === e.type) : e;\n  if (!i) return;\n  if (\"esri.renderers.visualVariables.OpacityVariable\" !== i.declaredClass) return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable\");\n  const t = \"number\" == typeof a,\n        s = t ? null : a,\n        l = s && s.attributes;\n  let o = t ? a : null;\n  const c = i.field,\n        {\n    ipData: u,\n    hasExpression: p\n  } = i.cache;\n  let d = i.cache.compiledFunc;\n\n  if (!c && !p) {\n    const e = i.stops;\n    return e && e[0] && e[0].opacity;\n  }\n\n  if (\"number\" != typeof o) if (p) {\n    if (n(r) || n(r.arcade)) return void f.error(\"Use of arcade expressions requires an arcade context\");\n    const e = {\n      viewingMode: r.viewingMode,\n      scale: r.scale,\n      spatialReference: r.spatialReference\n    },\n          a = r.arcade.arcadeUtils,\n          t = a.getViewInfo(e),\n          l = a.createExecContext(s, t);\n\n    if (!d) {\n      const e = a.createSyntaxTree(i.valueExpression);\n      d = a.createFunction(e), i.cache.compiledFunc = d;\n    }\n\n    o = a.executeFunction(d, l);\n  } else l && (o = l[c]);\n  const v = i.normalizationField,\n        b = null != l && null != v ? parseFloat(l[v]) : void 0;\n\n  if (null != o && (!v || t || !isNaN(b) && 0 !== b)) {\n    isNaN(b) || t || (o /= b);\n    const e = R(o, u);\n\n    if (e) {\n      const a = e[0],\n            r = e[1];\n      if (a === r) return i.stops[a].opacity;\n      {\n        const n = i.stops[a].opacity;\n        return n + (i.stops[r].opacity - n) * e[2];\n      }\n    }\n  }\n}\n\nfunction m(e, a, r) {\n  const i = \"visualVariables\" in e && e.visualVariables ? e.visualVariables.find(e => \"rotation\" === e.type) : e;\n  if (!i) return;\n  if (\"esri.renderers.visualVariables.RotationVariable\" !== i.declaredClass) return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable\");\n  const t = i.axis || \"heading\",\n        s = \"heading\" === t && \"arithmetic\" === i.rotationType ? 90 : 0,\n        l = \"heading\" === t && \"arithmetic\" === i.rotationType ? -1 : 1,\n        o = \"number\" == typeof a ? null : a,\n        c = o && o.attributes,\n        u = i.field,\n        {\n    hasExpression: p\n  } = i.cache;\n  let d = i.cache.compiledFunc,\n      v = 0;\n  if (!u && !p) return v;\n\n  if (p) {\n    if (n(r) || n(r.arcade)) return void f.error(\"Use of arcade expressions requires an arcade context\");\n    const e = {\n      viewingMode: r.viewingMode,\n      scale: r.scale,\n      spatialReference: r.spatialReference\n    },\n          a = r.arcade.arcadeUtils,\n          t = a.getViewInfo(e),\n          s = a.createExecContext(o, t);\n\n    if (!d) {\n      const e = a.createSyntaxTree(i.valueExpression);\n      d = a.createFunction(e), i.cache.compiledFunc = d;\n    }\n\n    v = a.executeFunction(d, s);\n  } else c && (v = c[u] || 0);\n\n  return v = \"number\" != typeof v || isNaN(v) ? null : s + l * v, v;\n}\n\nfunction V(e, a, r) {\n  const i = \"number\" == typeof a,\n        s = i ? null : a,\n        l = s && s.attributes;\n  let c = i ? a : null;\n  const {\n    isScaleDriven: p\n  } = e.cache;\n  let d = e.cache.compiledFunc;\n\n  if (p) {\n    const a = t(r) ? r.scale : void 0,\n          i = t(r) ? r.view : void 0;\n    c = null == a || \"3d\" === i ? x(e) : a;\n  } else if (!i) switch (e.inputValueType) {\n    case u.Expression:\n      {\n        if (n(r) || n(r.arcade)) return void f.error(\"Use of arcade expressions requires an arcade context\");\n        const a = {\n          viewingMode: r.viewingMode,\n          scale: r.scale,\n          spatialReference: r.spatialReference\n        },\n              i = r.arcade.arcadeUtils,\n              t = i.getViewInfo(a),\n              l = i.createExecContext(s, t);\n\n        if (!d) {\n          const a = i.createSyntaxTree(e.valueExpression);\n          d = i.createFunction(a), e.cache.compiledFunc = d;\n        }\n\n        c = i.executeFunction(d, l);\n        break;\n      }\n\n    case u.Field:\n      l && (c = l[e.field]);\n      break;\n\n    case u.Unknown:\n      c = null;\n  }\n\n  if (!o(c)) return null;\n  if (i || !e.normalizationField) return c;\n  const v = l ? parseFloat(l[e.normalizationField]) : null;\n  return o(v) && 0 !== v ? c / v : null;\n}\n\nfunction x(e) {\n  let a = null,\n      r = null;\n  const i = e.stops;\n  return i ? (a = i[0].value, r = i[i.length - 1].value) : (a = e.minDataValue || 0, r = e.maxDataValue || 0), (a + r) / 2;\n}\n\nfunction y(e, a, r) {\n  const i = \"visualVariables\" in e && e.visualVariables ? e.visualVariables.find(e => \"size\" === e.type) : e;\n  if (!i) return;\n  if (\"esri.renderers.visualVariables.SizeVariable\" !== i.declaredClass) return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable\");\n  const n = M(V(i, a, r), i, a, r, i.cache.ipData);\n  return null == n || isNaN(n) ? 0 : n;\n}\n\nfunction w(e, a, r) {\n  return null == e ? null : l(e) ? y(e, a, r) : o(e) ? e : null;\n}\n\nfunction g(e, a, r) {\n  return o(r) && e > r ? r : o(a) && e < a ? a : e;\n}\n\nfunction z(e, a, r, i) {\n  return e + ((w(a.minSize, r, i) || a.minDataValue) ?? 0);\n}\n\nfunction F(e, a, r) {\n  const i = e.stops;\n  let n = i && i.length && i[0].size;\n  return null == n && (n = e.minSize), w(n, a, r);\n}\n\nfunction S(e, a, r, i) {\n  const n = (e - a.minDataValue) / (a.maxDataValue - a.minDataValue),\n        s = w(a.minSize, r, i),\n        l = w(a.maxSize, r, i),\n        o = t(i) ? i.shape : void 0;\n  if (e <= a.minDataValue) return s;\n  if (e >= a.maxDataValue) return l;\n  if (null == s || null == l) return null;\n\n  if (\"area\" === a.scaleBy && o) {\n    const e = \"circle\" === o,\n          a = e ? d * (s / 2) ** 2 : s * s,\n          r = a + n * ((e ? d * (l / 2) ** 2 : l * l) - a);\n    return e ? 2 * Math.sqrt(r / d) : Math.sqrt(r);\n  }\n\n  return s + n * (l - s);\n}\n\nfunction E(e, a, r, i) {\n  const n = t(i) ? i.shape : void 0,\n        s = e / a.minDataValue,\n        l = w(a.minSize, r, i),\n        o = w(a.maxSize, r, i);\n  let c = null;\n  return c = \"circle\" === n ? 2 * Math.sqrt(s * (l / 2) ** 2) : \"square\" === n || \"diamond\" === n || \"image\" === n ? Math.sqrt(s * l ** 2) : s * l, g(c, l, o);\n}\n\nfunction U(e, a, r, i, n) {\n  const [t, s, l] = R(e, n);\n  if (t === s) return w(a.stops?.[t].size, r, i);\n  {\n    const e = w(a.stops?.[t].size, r, i);\n    return e + (w(a.stops?.[s].size, r, i) - e) * l;\n  }\n}\n\nfunction C(e, a, r, i) {\n  const n = (t(i) && i.resolution ? i.resolution : 1) * s[a.valueUnit],\n        l = w(a.minSize, r, i),\n        o = w(a.maxSize, r, i),\n        {\n    valueRepresentation: c\n  } = a;\n  let u = null;\n  return u = \"area\" === c ? 2 * Math.sqrt(e / d) / n : \"radius\" === c || \"distance\" === c ? 2 * e / n : e / n, g(u, l, o);\n}\n\nfunction D(e) {\n  return e;\n}\n\nfunction M(e, a, r, i, n) {\n  switch (a.transformationType) {\n    case c.Additive:\n      return z(e, a, r, i);\n\n    case c.Constant:\n      return F(a, r, i);\n\n    case c.ClampedLinear:\n      return S(e, a, r, i);\n\n    case c.Proportional:\n      return E(e, a, r, i);\n\n    case c.Stops:\n      return U(e, a, r, i, n);\n\n    case c.RealWorldSize:\n      return C(e, a, r, i);\n\n    case c.Identity:\n      return D(e);\n\n    case c.Unknown:\n      return null;\n  }\n}\n\nfunction k(e, a, r) {\n  const {\n    isScaleDriven: i\n  } = e.cache;\n  if (!(i && \"3d\" === r || a)) return null;\n  const n = {\n    scale: a,\n    view: r\n  };\n  let t = w(e.minSize, p, n),\n      s = w(e.maxSize, p, n);\n\n  if (null != t || null != s) {\n    if (t > s) {\n      const e = s;\n      s = t, t = e;\n    }\n\n    return {\n      minSize: t,\n      maxSize: s\n    };\n  }\n}\n\nfunction N(e, a, r) {\n  if (!e.visualVariables) return;\n  const i = [],\n        n = [],\n        t = [],\n        s = [],\n        l = [];\n\n  for (const o of e.visualVariables) switch (o.type) {\n    case \"color\":\n      n.push(o);\n      break;\n\n    case \"opacity\":\n      t.push(o);\n      break;\n\n    case \"rotation\":\n      l.push(o);\n      break;\n\n    case \"size\":\n      s.push(o);\n  }\n\n  return n.forEach(e => {\n    const n = b(e, a, r);\n    i.push({\n      variable: e,\n      value: n\n    });\n  }), t.forEach(e => {\n    const n = h(e, a, r);\n    i.push({\n      variable: e,\n      value: n\n    });\n  }), l.forEach(e => {\n    const n = m(e, a, r);\n    i.push({\n      variable: e,\n      value: n\n    });\n  }), s.forEach(e => {\n    const n = y(e, a, r);\n    i.push({\n      variable: e,\n      value: n\n    });\n  }), i.filter(e => null != e.value);\n}\n\nfunction R(e, a) {\n  if (!a) return;\n  let r = 0,\n      i = a.length - 1;\n  return a.some((a, n) => e < a ? (i = n, !0) : (r = n, !1)), [r, i, (e - a[r]) / (a[i] - a[r])];\n}\n\nfunction T(e, a, i) {\n  const n = [\"proportional\", \"proportional\", \"proportional\"];\n\n  for (const t of e) {\n    const e = t.useSymbolValue ? \"symbol-value\" : y(t, a, i);\n\n    switch (t.axis) {\n      case \"width\":\n        n[0] = e;\n        break;\n\n      case \"depth\":\n        n[1] = e;\n        break;\n\n      case \"height\":\n        n[2] = e;\n        break;\n\n      case \"width-and-depth\":\n        n[0] = e, n[1] = e;\n        break;\n\n      case \"all\":\n      case void 0:\n      case null:\n        n[0] = e, n[1] = e, n[2] = e;\n        break;\n\n      default:\n        r(t.axis);\n    }\n  }\n\n  return n;\n}\n\nexport { T as getAllSizes, b as getColor, h as getOpacity, m as getRotationAngle, y as getSize, M as getSizeForValue, w as getSizeFromNumberOrVariable, k as getSizeRangeAtScale, N as getVisualVariableValues, v as viewScaleRE };","map":{"version":3,"names":["e","a","neverReached","r","i","isNone","n","isSome","t","meterIn","s","isSizeVariable","l","isValidNumber","o","TransformationType","c","InputValueType","u","f","getLogger","p","d","Math","PI","v","b","visualVariables","find","type","declaredClass","warn","attributes","field","ipData","hasExpression","cache","compiledFunc","stops","color","arcade","error","viewingMode","scale","spatialReference","arcadeUtils","getViewInfo","createExecContext","createSyntaxTree","valueExpression","createFunction","executeFunction","h","normalizationField","m","parseFloat","isNaN","R","blendColors","opacity","axis","rotationType","V","isScaleDriven","view","x","inputValueType","Expression","Field","Unknown","value","length","minDataValue","maxDataValue","y","M","w","g","z","minSize","F","size","S","maxSize","shape","scaleBy","sqrt","E","U","C","resolution","valueUnit","valueRepresentation","D","transformationType","Additive","Constant","ClampedLinear","Proportional","Stops","RealWorldSize","Identity","k","N","push","forEach","variable","filter","some","T","useSymbolValue","getAllSizes","getColor","getOpacity","getRotationAngle","getSize","getSizeForValue","getSizeFromNumberOrVariable","getSizeRangeAtScale","getVisualVariableValues","viewScaleRE"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import a from\"../../../Graphic.js\";import{neverReached as r}from\"../../../core/compilerUtils.js\";import i from\"../../../core/Logger.js\";import{isNone as n,isSome as t}from\"../../../core/maybe.js\";import{meterIn as s}from\"../../support/lengthUtils.js\";import{isSizeVariable as l,isValidNumber as o,TransformationType as c,InputValueType as u}from\"./sizeVariableUtils.js\";const f=i.getLogger(\"esri.renderers.visualVariables.support.visualVariableUtils\"),p=new a,d=Math.PI,v=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i;function b(a,r,i){const s=\"visualVariables\"in a&&a.visualVariables?a.visualVariables.find((e=>\"color\"===e.type)):a;if(!s)return;if(\"esri.renderers.visualVariables.ColorVariable\"!==s.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable\");const l=\"number\"==typeof r,o=l?null:r,c=o&&o.attributes;let u=l?r:null;const p=s.field,{ipData:d,hasExpression:v}=s.cache;let b=s.cache.compiledFunc;if(!p&&!v){const e=s.stops;return e&&e[0]&&e[0].color}if(\"number\"!=typeof u)if(v){if(n(i)||n(i.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),t=a.createExecContext(o,r);if(!b){const e=a.createSyntaxTree(s.valueExpression);b=a.createFunction(e),s.cache.compiledFunc=b}u=a.executeFunction(b,t)}else c&&(u=c[p]);const h=s.normalizationField,m=null!=c&&null!=h?parseFloat(c[h]):void 0;if(null!=u&&(!h||l||!isNaN(m)&&0!==m)){isNaN(m)||l||(u/=m);const a=R(u,d);if(a){const r=a[0],n=a[1],l=r===n?s.stops[r].color:e.blendColors(s.stops[r].color,s.stops[n].color,a[2],t(i)?i.color:void 0);return new e(l)}}}function h(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"opacity\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.OpacityVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable\");const t=\"number\"==typeof a,s=t?null:a,l=s&&s.attributes;let o=t?a:null;const c=i.field,{ipData:u,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!c&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if(\"number\"!=typeof o)if(p){if(n(r)||n(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,t=a.getViewInfo(e),l=a.createExecContext(s,t);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d}o=a.executeFunction(d,l)}else l&&(o=l[c]);const v=i.normalizationField,b=null!=l&&null!=v?parseFloat(l[v]):void 0;if(null!=o&&(!v||t||!isNaN(b)&&0!==b)){isNaN(b)||t||(o/=b);const e=R(o,u);if(e){const a=e[0],r=e[1];if(a===r)return i.stops[a].opacity;{const n=i.stops[a].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function m(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"rotation\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.RotationVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable\");const t=i.axis||\"heading\",s=\"heading\"===t&&\"arithmetic\"===i.rotationType?90:0,l=\"heading\"===t&&\"arithmetic\"===i.rotationType?-1:1,o=\"number\"==typeof a?null:a,c=o&&o.attributes,u=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,v=0;if(!u&&!p)return v;if(p){if(n(r)||n(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,t=a.getViewInfo(e),s=a.createExecContext(o,t);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d}v=a.executeFunction(d,s)}else c&&(v=c[u]||0);return v=\"number\"!=typeof v||isNaN(v)?null:s+l*v,v}function V(e,a,r){const i=\"number\"==typeof a,s=i?null:a,l=s&&s.attributes;let c=i?a:null;const{isScaleDriven:p}=e.cache;let d=e.cache.compiledFunc;if(p){const a=t(r)?r.scale:void 0,i=t(r)?r.view:void 0;c=null==a||\"3d\"===i?x(e):a}else if(!i)switch(e.inputValueType){case u.Expression:{if(n(r)||n(r.arcade))return void f.error(\"Use of arcade expressions requires an arcade context\");const a={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,t=i.getViewInfo(a),l=i.createExecContext(s,t);if(!d){const a=i.createSyntaxTree(e.valueExpression);d=i.createFunction(a),e.cache.compiledFunc=d}c=i.executeFunction(d,l);break}case u.Field:l&&(c=l[e.field]);break;case u.Unknown:c=null}if(!o(c))return null;if(i||!e.normalizationField)return c;const v=l?parseFloat(l[e.normalizationField]):null;return o(v)&&0!==v?c/v:null}function x(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}function y(e,a,r){const i=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.find((e=>\"size\"===e.type)):e;if(!i)return;if(\"esri.renderers.visualVariables.SizeVariable\"!==i.declaredClass)return void f.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable\");const n=M(V(i,a,r),i,a,r,i.cache.ipData);return null==n||isNaN(n)?0:n}function w(e,a,r){return null==e?null:l(e)?y(e,a,r):o(e)?e:null}function g(e,a,r){return o(r)&&e>r?r:o(a)&&e<a?a:e}function z(e,a,r,i){return e+((w(a.minSize,r,i)||a.minDataValue)??0)}function F(e,a,r){const i=e.stops;let n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),w(n,a,r)}function S(e,a,r,i){const n=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),s=w(a.minSize,r,i),l=w(a.maxSize,r,i),o=t(i)?i.shape:void 0;if(e<=a.minDataValue)return s;if(e>=a.maxDataValue)return l;if(null==s||null==l)return null;if(\"area\"===a.scaleBy&&o){const e=\"circle\"===o,a=e?d*(s/2)**2:s*s,r=a+n*((e?d*(l/2)**2:l*l)-a);return e?2*Math.sqrt(r/d):Math.sqrt(r)}return s+n*(l-s)}function E(e,a,r,i){const n=t(i)?i.shape:void 0,s=e/a.minDataValue,l=w(a.minSize,r,i),o=w(a.maxSize,r,i);let c=null;return c=\"circle\"===n?2*Math.sqrt(s*(l/2)**2):\"square\"===n||\"diamond\"===n||\"image\"===n?Math.sqrt(s*l**2):s*l,g(c,l,o)}function U(e,a,r,i,n){const[t,s,l]=R(e,n);if(t===s)return w(a.stops?.[t].size,r,i);{const e=w(a.stops?.[t].size,r,i);return e+(w(a.stops?.[s].size,r,i)-e)*l}}function C(e,a,r,i){const n=(t(i)&&i.resolution?i.resolution:1)*s[a.valueUnit],l=w(a.minSize,r,i),o=w(a.maxSize,r,i),{valueRepresentation:c}=a;let u=null;return u=\"area\"===c?2*Math.sqrt(e/d)/n:\"radius\"===c||\"distance\"===c?2*e/n:e/n,g(u,l,o)}function D(e){return e}function M(e,a,r,i,n){switch(a.transformationType){case c.Additive:return z(e,a,r,i);case c.Constant:return F(a,r,i);case c.ClampedLinear:return S(e,a,r,i);case c.Proportional:return E(e,a,r,i);case c.Stops:return U(e,a,r,i,n);case c.RealWorldSize:return C(e,a,r,i);case c.Identity:return D(e);case c.Unknown:return null}}function k(e,a,r){const{isScaleDriven:i}=e.cache;if(!(i&&\"3d\"===r||a))return null;const n={scale:a,view:r};let t=w(e.minSize,p,n),s=w(e.maxSize,p,n);if(null!=t||null!=s){if(t>s){const e=s;s=t,t=e}return{minSize:t,maxSize:s}}}function N(e,a,r){if(!e.visualVariables)return;const i=[],n=[],t=[],s=[],l=[];for(const o of e.visualVariables)switch(o.type){case\"color\":n.push(o);break;case\"opacity\":t.push(o);break;case\"rotation\":l.push(o);break;case\"size\":s.push(o)}return n.forEach((e=>{const n=b(e,a,r);i.push({variable:e,value:n})})),t.forEach((e=>{const n=h(e,a,r);i.push({variable:e,value:n})})),l.forEach((e=>{const n=m(e,a,r);i.push({variable:e,value:n})})),s.forEach((e=>{const n=y(e,a,r);i.push({variable:e,value:n})})),i.filter((e=>null!=e.value))}function R(e,a){if(!a)return;let r=0,i=a.length-1;return a.some(((a,n)=>e<a?(i=n,!0):(r=n,!1))),[r,i,(e-a[r])/(a[i]-a[r])]}function T(e,a,i){const n=[\"proportional\",\"proportional\",\"proportional\"];for(const t of e){const e=t.useSymbolValue?\"symbol-value\":y(t,a,i);switch(t.axis){case\"width\":n[0]=e;break;case\"depth\":n[1]=e;break;case\"height\":n[2]=e;break;case\"width-and-depth\":n[0]=e,n[1]=e;break;case\"all\":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:r(t.axis)}}return n}export{T as getAllSizes,b as getColor,h as getOpacity,m as getRotationAngle,y as getSize,M as getSizeForValue,w as getSizeFromNumberOrVariable,k as getSizeRangeAtScale,N as getVisualVariableValues,v as viewScaleRE};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}