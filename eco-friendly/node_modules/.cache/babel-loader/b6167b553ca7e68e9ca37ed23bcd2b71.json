{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { clock as e } from \"../../../core/clock.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\nimport { removeMaybe as i } from \"../../../core/maybe.js\";\nimport { InputHandler as o } from \"../InputHandler.js\";\nimport { manhattanDistance as n, getPointerId as s } from \"./support.js\";\nconst l = {\n  maximumDoubleClickDelay: 250,\n  maximumDoubleClickDistance: 10,\n  maximumDoubleTouchDelay: 350,\n  maximumDoubleTouchDistance: 35\n};\n\nclass m extends o {\n  constructor(t = l.maximumDoubleClickDelay, i = l.maximumDoubleClickDistance, o = l.maximumDoubleTouchDelay, n = l.maximumDoubleTouchDistance, s = e) {\n    super(!1), this._maximumDoubleClickDelay = t, this._maximumDoubleClickDistance = i, this._maximumDoubleTouchDelay = o, this._maximumDoubleTouchDistance = n, this._clock = s, this._pointerState = new Map(), this._click = this.registerOutgoing(\"click\"), this._doubleClick = this.registerOutgoing(\"double-click\"), this.registerIncoming(\"immediate-click\", this._handleImmediateClick.bind(this)), this.registerIncoming(\"pointer-down\", this._handlePointerDown.bind(this));\n  }\n\n  onUninstall() {\n    this._pointerState.forEach(e => e.doubleClickTimer = i(e.doubleClickTimer));\n  }\n\n  get hasPendingInputs() {\n    return t(this._pointerState, e => null != e.doubleClickTimer);\n  }\n\n  _clearDoubleClickTimer(e, t) {\n    const o = this._pointerState.get(e);\n\n    o && (o.doubleClickTimer = i(o.doubleClickTimer), t && this._click.emit(o.event.data, void 0, o.event.modifiers), this._pointerState.delete(e), this.refreshHasPendingInputs());\n  }\n\n  _doubleClickTimeoutExceeded(e) {\n    const t = this._pointerState.get(e);\n\n    1 === t.pointerDownCount && this._click.emit(t.event.data, void 0, t.event.modifiers), t.doubleClickTimer = null, this._pointerState.delete(e), this.refreshHasPendingInputs();\n  }\n\n  _getPointerId(e) {\n    const {\n      pointerId: t,\n      pointerType: i,\n      button: o\n    } = e.native;\n    return \"mouse\" === i ? `${t}:${o}` : `${i}`;\n  }\n\n  _handleImmediateClick(e) {\n    const t = e.data,\n          {\n      pointerType: i\n    } = t.native,\n          o = this._getPointerId(t);\n\n    if (!this._pointerState.has(o)) return void this._startClick(e);\n\n    const s = this._pointerState.get(o),\n          {\n      data: l,\n      modifiers: m\n    } = s.event,\n          c = \"touch\" === i ? this._maximumDoubleTouchDistance : this._maximumDoubleClickDistance;\n\n    n(l, t) > c ? (this._clearDoubleClickTimer(o, !0), this._startClick(e)) : (this._clearDoubleClickTimer(o, !1), 2 === s.pointerDownCount && this._doubleClick.emit(l, void 0, m));\n  }\n\n  _handlePointerDown(e) {\n    const t = s(e.data),\n          i = this._pointerState.get(t);\n\n    i && (i.pointerDownCount += 1);\n  }\n\n  _startClick(e) {\n    const {\n      data: t\n    } = e,\n          {\n      native: {\n        pointerType: i\n      }\n    } = t,\n          o = s(t),\n          n = \"touch\" === i ? this._maximumDoubleTouchDelay : this._maximumDoubleClickDelay,\n          l = this._clock.setTimeout(() => this._doubleClickTimeoutExceeded(o), n),\n          m = 1;\n\n    this._pointerState.set(o, {\n      event: e,\n      doubleClickTimer: l,\n      pointerDownCount: m\n    }), this.refreshHasPendingInputs();\n  }\n\n}\n\nexport { l as DefaultParameters, m as SingleAndDoubleClick };","map":{"version":3,"names":["clock","e","someMap","t","removeMaybe","i","InputHandler","o","manhattanDistance","n","getPointerId","s","l","maximumDoubleClickDelay","maximumDoubleClickDistance","maximumDoubleTouchDelay","maximumDoubleTouchDistance","m","constructor","_maximumDoubleClickDelay","_maximumDoubleClickDistance","_maximumDoubleTouchDelay","_maximumDoubleTouchDistance","_clock","_pointerState","Map","_click","registerOutgoing","_doubleClick","registerIncoming","_handleImmediateClick","bind","_handlePointerDown","onUninstall","forEach","doubleClickTimer","hasPendingInputs","_clearDoubleClickTimer","get","emit","event","data","modifiers","delete","refreshHasPendingInputs","_doubleClickTimeoutExceeded","pointerDownCount","_getPointerId","pointerId","pointerType","button","native","has","_startClick","c","setTimeout","set","DefaultParameters","SingleAndDoubleClick"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/input/recognizers/SingleAndDoubleClick.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{clock as e}from\"../../../core/clock.js\";import{someMap as t}from\"../../../core/MapUtils.js\";import{removeMaybe as i}from\"../../../core/maybe.js\";import{InputHandler as o}from\"../InputHandler.js\";import{manhattanDistance as n,getPointerId as s}from\"./support.js\";const l={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class m extends o{constructor(t=l.maximumDoubleClickDelay,i=l.maximumDoubleClickDistance,o=l.maximumDoubleTouchDelay,n=l.maximumDoubleTouchDistance,s=e){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=o,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing(\"click\"),this._doubleClick=this.registerOutgoing(\"double-click\"),this.registerIncoming(\"immediate-click\",this._handleImmediateClick.bind(this)),this.registerIncoming(\"pointer-down\",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=i(e.doubleClickTimer)))}get hasPendingInputs(){return t(this._pointerState,(e=>null!=e.doubleClickTimer))}_clearDoubleClickTimer(e,t){const o=this._pointerState.get(e);o&&(o.doubleClickTimer=i(o.doubleClickTimer),t&&this._click.emit(o.event.data,void 0,o.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);1===t.pointerDownCount&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:i,button:o}=e.native;return\"mouse\"===i?`${t}:${o}`:`${i}`}_handleImmediateClick(e){const t=e.data,{pointerType:i}=t.native,o=this._getPointerId(t);if(!this._pointerState.has(o))return void this._startClick(e);const s=this._pointerState.get(o),{data:l,modifiers:m}=s.event,c=\"touch\"===i?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n(l,t)>c?(this._clearDoubleClickTimer(o,!0),this._startClick(e)):(this._clearDoubleClickTimer(o,!1),2===s.pointerDownCount&&this._doubleClick.emit(l,void 0,m))}_handlePointerDown(e){const t=s(e.data),i=this._pointerState.get(t);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:i}}=t,o=s(t),n=\"touch\"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,l=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(o)),n),m=1;this._pointerState.set(o,{event:e,doubleClickTimer:l,pointerDownCount:m}),this.refreshHasPendingInputs()}}export{l as DefaultParameters,m as SingleAndDoubleClick};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}