{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../core/maybe.js\";\nimport { PrimitiveType as e } from \"./basicInterfaces.js\";\nimport { BoundingInfo as i } from \"./BoundingInfo.js\";\nimport { ContentObject as n } from \"./ContentObject.js\";\nimport { ContentObjectType as s } from \"./ContentObjectType.js\";\nimport { computeAttachmentOriginTriangles as r, computeAttachmentOriginPoints as o } from \"./geometryDataUtils.js\";\nimport { generateDefaultIndexArray as h, compactIndices as u } from \"./Indices.js\";\nimport { assert as c } from \"./Util.js\";\nimport { VertexAttribute as g } from \"./VertexAttribute.js\";\n\nclass d extends n {\n  constructor(t, i = [], n = e.Triangle, r = null, o = -1) {\n    super(), this._primitiveType = n, this.objectAndLayerIdColor = r, this.edgeIndicesLength = o, this.type = s.Geometry, this._vertexAttributes = new Map(), this._indices = new Map(), this._boundingInfo = null;\n\n    for (const [e, s] of t) s && this._vertexAttributes.set(e, { ...s\n    });\n\n    if (null == i || 0 === i.length) {\n      const t = l(this._vertexAttributes),\n            e = h(t);\n      this.edgeIndicesLength = this.edgeIndicesLength < 0 ? t : this.edgeIndicesLength;\n\n      for (const i of this._vertexAttributes.keys()) this._indices.set(i, e);\n    } else for (const [e, s] of i) s && (this._indices.set(e, u(s)), e === g.POSITION && (this.edgeIndicesLength = this.edgeIndicesLength < 0 ? this._indices.get(e).length : this.edgeIndicesLength));\n  }\n\n  cloneShallow() {\n    const t = new d([], void 0, this._primitiveType, this.objectAndLayerIdColor, void 0),\n          {\n      _vertexAttributes: e,\n      _indices: i\n    } = t;\n    return this._vertexAttributes.forEach((t, i) => e.set(i, t)), this._indices.forEach((t, e) => i.set(e, t)), t.screenToWorldRatio = this.screenToWorldRatio, t._boundingInfo = this._boundingInfo, t;\n  }\n\n  get vertexAttributes() {\n    return this._vertexAttributes;\n  }\n\n  getMutableAttribute(t) {\n    const e = this._vertexAttributes.get(t);\n\n    return e && !e.exclusive && (e.data = Array.from(e.data), e.exclusive = !0), e;\n  }\n\n  get indices() {\n    return this._indices;\n  }\n\n  get indexCount() {\n    const t = this._indices.values().next().value;\n\n    return t ? t.length : 0;\n  }\n\n  get primitiveType() {\n    return this._primitiveType;\n  }\n\n  get faceCount() {\n    return this.indexCount / 3;\n  }\n\n  get boundingInfo() {\n    return t(this._boundingInfo) && (this._boundingInfo = this._calculateBoundingInfo()), this._boundingInfo;\n  }\n\n  computeAttachmentOrigin(t) {\n    return this.primitiveType === e.Triangle ? this._computeAttachmentOriginTriangles(t) : this._computeAttachmentOriginPoints(t);\n  }\n\n  _computeAttachmentOriginTriangles(t) {\n    const e = this.indices.get(g.POSITION),\n          i = this.vertexAttributes.get(g.POSITION);\n    return r(i, e, t);\n  }\n\n  _computeAttachmentOriginPoints(t) {\n    const e = this.indices.get(g.POSITION),\n          i = this.vertexAttributes.get(g.POSITION);\n    return o(i, e, t);\n  }\n\n  invalidateBoundingInfo() {\n    this._boundingInfo = null;\n  }\n\n  _calculateBoundingInfo() {\n    const t = this.indices.get(g.POSITION);\n    if (!t || 0 === t.length) return null;\n    const n = this.primitiveType === e.Triangle ? 3 : 1;\n    c(t.length % n == 0, \"Indexing error: \" + t.length + \" not divisible by \" + n);\n    const s = h(t.length / n),\n          r = this.vertexAttributes.get(g.POSITION);\n    return r ? new i(s, n, t, r) : null;\n  }\n\n}\n\nfunction l(t) {\n  const e = t.values().next().value;\n  return null == e ? 0 : e.data.length / e.size;\n}\n\nexport { d as Geometry };","map":{"version":3,"names":["isNone","t","PrimitiveType","e","BoundingInfo","i","ContentObject","n","ContentObjectType","s","computeAttachmentOriginTriangles","r","computeAttachmentOriginPoints","o","generateDefaultIndexArray","h","compactIndices","u","assert","c","VertexAttribute","g","d","constructor","Triangle","_primitiveType","objectAndLayerIdColor","edgeIndicesLength","type","Geometry","_vertexAttributes","Map","_indices","_boundingInfo","set","length","l","keys","POSITION","get","cloneShallow","forEach","screenToWorldRatio","vertexAttributes","getMutableAttribute","exclusive","data","Array","from","indices","indexCount","values","next","value","primitiveType","faceCount","boundingInfo","_calculateBoundingInfo","computeAttachmentOrigin","_computeAttachmentOriginTriangles","_computeAttachmentOriginPoints","invalidateBoundingInfo","size"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../core/maybe.js\";import{PrimitiveType as e}from\"./basicInterfaces.js\";import{BoundingInfo as i}from\"./BoundingInfo.js\";import{ContentObject as n}from\"./ContentObject.js\";import{ContentObjectType as s}from\"./ContentObjectType.js\";import{computeAttachmentOriginTriangles as r,computeAttachmentOriginPoints as o}from\"./geometryDataUtils.js\";import{generateDefaultIndexArray as h,compactIndices as u}from\"./Indices.js\";import{assert as c}from\"./Util.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";class d extends n{constructor(t,i=[],n=e.Triangle,r=null,o=-1){super(),this._primitiveType=n,this.objectAndLayerIdColor=r,this.edgeIndicesLength=o,this.type=s.Geometry,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[e,s]of t)s&&this._vertexAttributes.set(e,{...s});if(null==i||0===i.length){const t=l(this._vertexAttributes),e=h(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const i of this._vertexAttributes.keys())this._indices.set(i,e)}else for(const[e,s]of i)s&&(this._indices.set(e,u(s)),e===g.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(e).length:this.edgeIndicesLength))}cloneShallow(){const t=new d([],void 0,this._primitiveType,this.objectAndLayerIdColor,void 0),{_vertexAttributes:e,_indices:i}=t;return this._vertexAttributes.forEach(((t,i)=>e.set(i,t))),this._indices.forEach(((t,e)=>i.set(e,t))),t.screenToWorldRatio=this.screenToWorldRatio,t._boundingInfo=this._boundingInfo,t}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return t(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return this.primitiveType===e.Triangle?this._computeAttachmentOriginTriangles(t):this._computeAttachmentOriginPoints(t)}_computeAttachmentOriginTriangles(t){const e=this.indices.get(g.POSITION),i=this.vertexAttributes.get(g.POSITION);return r(i,e,t)}_computeAttachmentOriginPoints(t){const e=this.indices.get(g.POSITION),i=this.vertexAttributes.get(g.POSITION);return o(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get(g.POSITION);if(!t||0===t.length)return null;const n=this.primitiveType===e.Triangle?3:1;c(t.length%n==0,\"Indexing error: \"+t.length+\" not divisible by \"+n);const s=h(t.length/n),r=this.vertexAttributes.get(g.POSITION);return r?new i(s,n,t,r):null}}function l(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}export{d as Geometry};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}