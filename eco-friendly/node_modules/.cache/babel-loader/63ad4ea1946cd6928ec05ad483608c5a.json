{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../../../core/maybe.js\";\nimport t from \"../../../../../core/PooledArray.js\";\nimport { TransparencyPassType as r } from \"../../lib/basicInterfaces.js\";\nimport { DataType as i } from \"../../../../webgl/enums.js\";\nvar s;\n!function (e) {\n  e[e.FrontToBack = 0] = \"FrontToBack\", e[e.BackToFront = 1] = \"BackToFront\";\n}(s || (s = {}));\n\nclass o {\n  constructor(e, r, i = s.FrontToBack) {\n    this._rctx = e, this._techniqueRepository = r, this._sorting = i, this._draws = new t({\n      initialSize: 32,\n      allocator: e => e || {\n        material: null,\n        geometry: null,\n        geometryRanges: null,\n        bindDrawParams: null,\n        depthSquaredHint: 0,\n        indexType: 0\n      }\n    }), this._previouslyBoundDraw = new Map();\n  }\n\n  submitDraw(t, r, i, s) {\n    const o = this._draws.pushNew();\n\n    o.geometry = r, o.geometryRanges = i, o.material = t, o.depthSquaredHint = s, o.indexType = r.indexed ? e(r.vao.indexBuffer).indexType : 0;\n  }\n\n  dispatch(e, t) {\n    const i = this._rctx;\n\n    this._previouslyBoundDraw.clear();\n\n    let s = null;\n\n    const o = this._draws.map(r => r.material.prepareTechnique(this._techniqueRepository, e, t, r.geometry.parameters)),\n          n = this._draws.length;\n\n    for (let c = 0; c < n; c++) {\n      const n = o[c];\n      n === s && n.configuration.transparencyPassType === r.NONE || (i.bindTechnique(n, e, t), s = n);\n      const d = this._draws.data[c],\n            l = d.geometry;\n      i.bindVAO(l.vao), this._previouslyBoundDraw.get(n) !== d.material && (n.bindDraw(d.material, t), this._previouslyBoundDraw.set(n, d.material));\n      const p = d.geometryRanges,\n            m = p.length;\n\n      if (0 !== d.indexType) {\n        const e = a.get(d.indexType);\n\n        for (let t = 0; t < m; t += 2) {\n          const r = p[t],\n                s = p[t + 1];\n          i.drawElements(l.primitiveType, s, d.indexType, r * e);\n        }\n      } else for (let e = 0; e < m; e += 2) {\n        const t = p[e],\n              r = p[e + 1];\n        i.drawArrays(l.primitiveType, t, r);\n      }\n    }\n  }\n\n  prepareSubmit() {\n    this._draws.clear();\n  }\n\n  finishSubmit() {\n    const e = this._sorting === s.FrontToBack ? 1 : -1;\n\n    this._draws.sort((t, r) => {\n      const i = e * (t.depthSquaredHint - r.depthSquaredHint);\n      return 0 !== i ? i : t.geometry.vao.size - r.geometry.vao.size;\n    });\n  }\n\n  get count() {\n    return this._draws.length;\n  }\n\n}\n\nconst a = new Map();\na.set(i.UNSIGNED_BYTE, 1), a.set(i.UNSIGNED_SHORT, 2), a.set(i.UNSIGNED_INT, 4);\nexport { o as RenderPass, s as RenderPassSorting };","map":{"version":3,"names":["unwrap","e","t","TransparencyPassType","r","DataType","i","s","FrontToBack","BackToFront","o","constructor","_rctx","_techniqueRepository","_sorting","_draws","initialSize","allocator","material","geometry","geometryRanges","bindDrawParams","depthSquaredHint","indexType","_previouslyBoundDraw","Map","submitDraw","pushNew","indexed","vao","indexBuffer","dispatch","clear","map","prepareTechnique","parameters","n","length","c","configuration","transparencyPassType","NONE","bindTechnique","d","data","l","bindVAO","get","bindDraw","set","p","m","a","drawElements","primitiveType","drawArrays","prepareSubmit","finishSubmit","sort","size","count","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","RenderPass","RenderPassSorting"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/renderPasses/RenderPass.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../../../core/maybe.js\";import t from\"../../../../../core/PooledArray.js\";import{TransparencyPassType as r}from\"../../lib/basicInterfaces.js\";import{DataType as i}from\"../../../../webgl/enums.js\";var s;!function(e){e[e.FrontToBack=0]=\"FrontToBack\",e[e.BackToFront=1]=\"BackToFront\"}(s||(s={}));class o{constructor(e,r,i=s.FrontToBack){this._rctx=e,this._techniqueRepository=r,this._sorting=i,this._draws=new t({initialSize:32,allocator:e=>e||{material:null,geometry:null,geometryRanges:null,bindDrawParams:null,depthSquaredHint:0,indexType:0}}),this._previouslyBoundDraw=new Map}submitDraw(t,r,i,s){const o=this._draws.pushNew();o.geometry=r,o.geometryRanges=i,o.material=t,o.depthSquaredHint=s,o.indexType=r.indexed?e(r.vao.indexBuffer).indexType:0}dispatch(e,t){const i=this._rctx;this._previouslyBoundDraw.clear();let s=null;const o=this._draws.map((r=>r.material.prepareTechnique(this._techniqueRepository,e,t,r.geometry.parameters))),n=this._draws.length;for(let c=0;c<n;c++){const n=o[c];n===s&&n.configuration.transparencyPassType===r.NONE||(i.bindTechnique(n,e,t),s=n);const d=this._draws.data[c],l=d.geometry;i.bindVAO(l.vao),this._previouslyBoundDraw.get(n)!==d.material&&(n.bindDraw(d.material,t),this._previouslyBoundDraw.set(n,d.material));const p=d.geometryRanges,m=p.length;if(0!==d.indexType){const e=a.get(d.indexType);for(let t=0;t<m;t+=2){const r=p[t],s=p[t+1];i.drawElements(l.primitiveType,s,d.indexType,r*e)}}else for(let e=0;e<m;e+=2){const t=p[e],r=p[e+1];i.drawArrays(l.primitiveType,t,r)}}}prepareSubmit(){this._draws.clear()}finishSubmit(){const e=this._sorting===s.FrontToBack?1:-1;this._draws.sort(((t,r)=>{const i=e*(t.depthSquaredHint-r.depthSquaredHint);return 0!==i?i:t.geometry.vao.size-r.geometry.vao.size}))}get count(){return this._draws.length}}const a=new Map;a.set(i.UNSIGNED_BYTE,1),a.set(i.UNSIGNED_SHORT,2),a.set(i.UNSIGNED_INT,4);export{o as RenderPass,s as RenderPassSorting};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}