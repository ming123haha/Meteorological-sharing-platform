{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Handles.js\";\nimport { watch as i, initial as e } from \"../../../../core/reactiveUtils.js\";\nimport { addFrameTask as a } from \"../../../../core/scheduling.js\";\nimport { translateBy as s, scaleAndRotateBy as n } from \"../../viewpointUtils.js\";\nimport { InputHandler as r } from \"../../../input/InputHandler.js\";\nimport { resetTransformation as o, extractTransformation as h, isZeroTransformation as l } from \"../../../navigation/gamepadAndKeyboardUtils.js\";\n\nclass d extends r {\n  constructor(i) {\n    super(!0), this.view = i, this.frameTask = null, this.watchHandles = new t(), this.currentDevice = null, this.transformation = {\n      translation: [0, 0, 0],\n      heading: 0,\n      tilt: 0,\n      zoom: 0\n    }, this.handle = this.registerIncoming(\"gamepad\", t => this._handleGamePadEvent(t)), this.handle.pause();\n  }\n\n  onInstall(t) {\n    super.onInstall(t), this.watchHandles.add([i(() => this.view.navigation.gamepad?.enabled, t => {\n      t ? (this.handle.resume(), this.frameTask || (this.frameTask = a({\n        update: t => this._frameUpdate(t.deltaTime)\n      }))) : (this.handle.pause(), this.frameTask && (this.frameTask.remove(), this.frameTask = null));\n    }, e)]);\n  }\n\n  onUninstall() {\n    this.watchHandles.removeAll(), this.frameTask && (this.frameTask.remove(), this.frameTask = null), super.onUninstall();\n  }\n\n  _handleGamePadEvent(t) {\n    const i = this.view.navigation.gamepad.device;\n    i && t.data.device !== i || this.currentDevice && this.currentDevice !== t.data.device || (\"end\" === t.data.action ? (this.currentDevice = null, o(this.transformation)) : (this.currentDevice = t.data.device, h(t.data, this.view.navigation.gamepad, this.transformation)));\n  }\n\n  _frameUpdate(t) {\n    const i = this.transformation;\n    if (l(i)) return;\n    const e = this.view.viewpoint.clone(),\n          a = this.view.navigation.gamepad.velocityFactor,\n          r = c * a * t;\n    s(e, e, [i.translation[0] * r, -i.translation[1] * r]);\n    const o = 1 + i.translation[2] * v * t,\n          h = this.view.constraints.rotationEnabled ? -i.heading * m * t : 0,\n          d = this.view.size,\n          p = [d[0] / 2, d[1]];\n    n(e, e, o, h, p, d);\n    const f = this.view.constraints.constrain(e, this.view.viewpoint);\n    this.view.viewpoint = f;\n  }\n\n}\n\nconst m = .06,\n      c = .7,\n      v = 6e-4;\nexport { d as GamepadNavigation };","map":{"version":3,"names":["t","watch","i","initial","e","addFrameTask","a","translateBy","s","scaleAndRotateBy","n","InputHandler","r","resetTransformation","o","extractTransformation","h","isZeroTransformation","l","d","constructor","view","frameTask","watchHandles","currentDevice","transformation","translation","heading","tilt","zoom","handle","registerIncoming","_handleGamePadEvent","pause","onInstall","add","navigation","gamepad","enabled","resume","update","_frameUpdate","deltaTime","remove","onUninstall","removeAll","device","data","action","viewpoint","clone","velocityFactor","c","v","constraints","rotationEnabled","m","size","p","f","constrain","GamepadNavigation"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/input/handlers/GamepadNavigation.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Handles.js\";import{watch as i,initial as e}from\"../../../../core/reactiveUtils.js\";import{addFrameTask as a}from\"../../../../core/scheduling.js\";import{translateBy as s,scaleAndRotateBy as n}from\"../../viewpointUtils.js\";import{InputHandler as r}from\"../../../input/InputHandler.js\";import{resetTransformation as o,extractTransformation as h,isZeroTransformation as l}from\"../../../navigation/gamepadAndKeyboardUtils.js\";class d extends r{constructor(i){super(!0),this.view=i,this.frameTask=null,this.watchHandles=new t,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming(\"gamepad\",(t=>this._handleGamePadEvent(t))),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([i((()=>this.view.navigation.gamepad?.enabled),(t=>{t?(this.handle.resume(),this.frameTask||(this.frameTask=a({update:t=>this._frameUpdate(t.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))}),e)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(\"end\"===t.data.action?(this.currentDevice=null,o(this.transformation)):(this.currentDevice=t.data.device,h(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(l(i))return;const e=this.view.viewpoint.clone(),a=this.view.navigation.gamepad.velocityFactor,r=c*a*t;s(e,e,[i.translation[0]*r,-i.translation[1]*r]);const o=1+i.translation[2]*v*t,h=this.view.constraints.rotationEnabled?-i.heading*m*t:0,d=this.view.size,p=[d[0]/2,d[1]];n(e,e,o,h,p,d);const f=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=f}}const m=.06,c=.7,v=6e-4;export{d as GamepadNavigation};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}