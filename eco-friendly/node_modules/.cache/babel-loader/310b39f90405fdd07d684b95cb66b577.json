{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { isSome as r, releaseMaybe as i, disposeMaybe as s, isNone as h } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport { f as n } from \"../../../chunks/vec2f32.js\";\nimport { NoiseTextureRenderMode as a, NoiseTextureAtlasTechniqueConfiguration as u } from \"./NoiseTextureAtlasConfiguration.js\";\nimport { ATLAS_SIZE as c } from \"./NoiseTextureAtlasDimensions.js\";\nimport { NoiseTextureAtlasTechnique as l } from \"./NoiseTextureAtlasTechnique.js\";\nimport { createQuadVAO as f } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { TargetType as p, TextureType as _, PixelFormat as T, PixelType as d, TextureWrapMode as m, TextureSamplingMode as w } from \"../../webgl/enums.js\";\nimport { FramebufferObject as q } from \"../../webgl/FramebufferObject.js\";\n\nclass x extends t {\n  constructor(e) {\n    let t;\n    super(e), this._weatherTile = n(0, 0), this._needsRender = !0, this._frameBuffer = new q(e.context.renderContext.rctx, {\n      colorTarget: p.TEXTURE,\n      width: c,\n      height: c\n    }, {\n      target: _.TEXTURE_2D,\n      pixelFormat: T.RGBA,\n      dataType: d.UNSIGNED_BYTE,\n      wrapMode: m.CLAMP_TO_EDGE,\n      samplingMode: w.LINEAR,\n      hasMipmap: !1,\n      width: c,\n      height: c\n    }), this._vao = f(e.context.renderContext.rctx), this._shaderTechniqueRepository = e.context.shaderTechniqueRepository, this._ensureRendered = () => (r(t) ? r(this.weatherMapTechnique) && this.weatherMapTechnique.compiled && this._needsRender && (t = this._render(e.context.renderContext.rctx, a.WeatherMap)) : r(this.fullTechnique) && this.fullTechnique.compiled && (t = this._render(e.context.renderContext.rctx, a.Full)), t);\n  }\n\n  get textureAtlas() {\n    return this._ensureRendered();\n  }\n\n  _setDirty() {\n    this._needsRender = !0;\n  }\n\n  updateWeatherMap(e) {\n    this._weatherTile[0] === e[0] && this._weatherTile[1] === e[1] || (this._weatherTile = e, this._setDirty());\n  }\n\n  destroy() {\n    this._fullTechnique = i(this._fullTechnique), this._weatherMapTechnique = i(this._weatherMapTechnique), this._frameBuffer = s(this._frameBuffer), this._vao = s(this._vao);\n  }\n\n  get fullTechnique() {\n    if (h(this._fullTechnique)) {\n      const e = new u();\n      e.mode = a.Full, this._fullTechnique = this._shaderTechniqueRepository.acquire(l, e);\n    }\n\n    return this._fullTechnique;\n  }\n\n  get weatherMapTechnique() {\n    if (h(this._weatherMapTechnique)) {\n      const e = new u();\n      e.mode = a.WeatherMap, this._weatherMapTechnique = this._shaderTechniqueRepository.acquire(l, e);\n    }\n\n    return this._weatherMapTechnique;\n  }\n\n  _render(e, t) {\n    if (h(this._vao) || h(this._frameBuffer)) return null;\n    const r = t === a.Full ? this.fullTechnique : this.weatherMapTechnique;\n    if (h(r)) return null;\n    const i = e.getViewport();\n    e.setViewport(0, 0, c, c), e.bindFramebuffer(this._frameBuffer);\n    const s = e.bindTechnique(r);\n    return s.setUniform2f(\"weatherTile\", this._weatherTile[0], this._weatherTile[1]), e.bindVAO(this._vao), s.assertCompatibleVertexAttributeLocations(this._vao), e.gl.drawArrays(e.gl.TRIANGLE_STRIP, 0, 4), e.setViewport(i.x, i.y, i.width, i.height), this._needsRender = !1, this._frameBuffer.colorTexture;\n  }\n\n}\n\ne([o({\n  constructOnly: !0\n})], x.prototype, \"context\", void 0);\nexport { x as NoiseTextureAtlas };","map":{"version":3,"names":["_","e","t","isSome","r","releaseMaybe","i","disposeMaybe","s","isNone","h","property","o","f","n","NoiseTextureRenderMode","a","NoiseTextureAtlasTechniqueConfiguration","u","ATLAS_SIZE","c","NoiseTextureAtlasTechnique","l","createQuadVAO","TargetType","p","TextureType","PixelFormat","T","PixelType","d","TextureWrapMode","m","TextureSamplingMode","w","FramebufferObject","q","x","constructor","_weatherTile","_needsRender","_frameBuffer","context","renderContext","rctx","colorTarget","TEXTURE","width","height","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","LINEAR","hasMipmap","_vao","_shaderTechniqueRepository","shaderTechniqueRepository","_ensureRendered","weatherMapTechnique","compiled","_render","WeatherMap","fullTechnique","Full","textureAtlas","_setDirty","updateWeatherMap","destroy","_fullTechnique","_weatherMapTechnique","mode","acquire","getViewport","setViewport","bindFramebuffer","bindTechnique","setUniform2f","bindVAO","assertCompatibleVertexAttributeLocations","gl","drawArrays","TRIANGLE_STRIP","y","colorTexture","constructOnly","prototype","NoiseTextureAtlas"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/environment/NoiseTextureAtlas.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r,releaseMaybe as i,disposeMaybe as s,isNone as h}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import{NoiseTextureRenderMode as a,NoiseTextureAtlasTechniqueConfiguration as u}from\"./NoiseTextureAtlasConfiguration.js\";import{ATLAS_SIZE as c}from\"./NoiseTextureAtlasDimensions.js\";import{NoiseTextureAtlasTechnique as l}from\"./NoiseTextureAtlasTechnique.js\";import{createQuadVAO as f}from\"../webgl-engine/lib/glUtil3D.js\";import{TargetType as p,TextureType as _,PixelFormat as T,PixelType as d,TextureWrapMode as m,TextureSamplingMode as w}from\"../../webgl/enums.js\";import{FramebufferObject as q}from\"../../webgl/FramebufferObject.js\";class x extends t{constructor(e){let t;super(e),this._weatherTile=n(0,0),this._needsRender=!0,this._frameBuffer=new q(e.context.renderContext.rctx,{colorTarget:p.TEXTURE,width:c,height:c},{target:_.TEXTURE_2D,pixelFormat:T.RGBA,dataType:d.UNSIGNED_BYTE,wrapMode:m.CLAMP_TO_EDGE,samplingMode:w.LINEAR,hasMipmap:!1,width:c,height:c}),this._vao=f(e.context.renderContext.rctx),this._shaderTechniqueRepository=e.context.shaderTechniqueRepository,this._ensureRendered=()=>(r(t)?r(this.weatherMapTechnique)&&this.weatherMapTechnique.compiled&&this._needsRender&&(t=this._render(e.context.renderContext.rctx,a.WeatherMap)):r(this.fullTechnique)&&this.fullTechnique.compiled&&(t=this._render(e.context.renderContext.rctx,a.Full)),t)}get textureAtlas(){return this._ensureRendered()}_setDirty(){this._needsRender=!0}updateWeatherMap(e){this._weatherTile[0]===e[0]&&this._weatherTile[1]===e[1]||(this._weatherTile=e,this._setDirty())}destroy(){this._fullTechnique=i(this._fullTechnique),this._weatherMapTechnique=i(this._weatherMapTechnique),this._frameBuffer=s(this._frameBuffer),this._vao=s(this._vao)}get fullTechnique(){if(h(this._fullTechnique)){const e=new u;e.mode=a.Full,this._fullTechnique=this._shaderTechniqueRepository.acquire(l,e)}return this._fullTechnique}get weatherMapTechnique(){if(h(this._weatherMapTechnique)){const e=new u;e.mode=a.WeatherMap,this._weatherMapTechnique=this._shaderTechniqueRepository.acquire(l,e)}return this._weatherMapTechnique}_render(e,t){if(h(this._vao)||h(this._frameBuffer))return null;const r=t===a.Full?this.fullTechnique:this.weatherMapTechnique;if(h(r))return null;const i=e.getViewport();e.setViewport(0,0,c,c),e.bindFramebuffer(this._frameBuffer);const s=e.bindTechnique(r);return s.setUniform2f(\"weatherTile\",this._weatherTile[0],this._weatherTile[1]),e.bindVAO(this._vao),s.assertCompatibleVertexAttributeLocations(this._vao),e.gl.drawArrays(e.gl.TRIANGLE_STRIP,0,4),e.setViewport(i.x,i.y,i.width,i.height),this._needsRender=!1,this._frameBuffer.colorTexture}}e([o({constructOnly:!0})],x.prototype,\"context\",void 0);export{x as NoiseTextureAtlas};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,2BAAb;AAAyC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,YAAY,IAAIC,CAAnC,EAAqCC,YAAY,IAAIC,CAArD,EAAuDC,MAAM,IAAIC,CAAjE,QAAuE,wBAAvE;AAAgG,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOC,sBAAsB,IAAIC,CAAjC,EAAmCC,uCAAuC,IAAIC,CAA9E,QAAoF,qCAApF;AAA0H,SAAOC,UAAU,IAAIC,CAArB,QAA2B,kCAA3B;AAA8D,SAAOC,0BAA0B,IAAIC,CAArC,QAA2C,iCAA3C;AAA6E,SAAOC,aAAa,IAAIV,CAAxB,QAA8B,iCAA9B;AAAgE,SAAOW,UAAU,IAAIC,CAArB,EAAuBC,WAAW,IAAI1B,CAAtC,EAAwC2B,WAAW,IAAIC,CAAvD,EAAyDC,SAAS,IAAIC,CAAtE,EAAwEC,eAAe,IAAIC,CAA3F,EAA6FC,mBAAmB,IAAIC,CAApH,QAA0H,sBAA1H;AAAiJ,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,kCAAlC;;AAAqE,MAAMC,CAAN,SAAgBnC,CAAhB,CAAiB;EAACoC,WAAW,CAACrC,CAAD,EAAG;IAAC,IAAIC,CAAJ;IAAM,MAAMD,CAAN,GAAS,KAAKsC,YAAL,GAAkBzB,CAAC,CAAC,CAAD,EAAG,CAAH,CAA5B,EAAkC,KAAK0B,YAAL,GAAkB,CAAC,CAArD,EAAuD,KAAKC,YAAL,GAAkB,IAAIL,CAAJ,CAAMnC,CAAC,CAACyC,OAAF,CAAUC,aAAV,CAAwBC,IAA9B,EAAmC;MAACC,WAAW,EAACpB,CAAC,CAACqB,OAAf;MAAuBC,KAAK,EAAC3B,CAA7B;MAA+B4B,MAAM,EAAC5B;IAAtC,CAAnC,EAA4E;MAAC6B,MAAM,EAACjD,CAAC,CAACkD,UAAV;MAAqBC,WAAW,EAACvB,CAAC,CAACwB,IAAnC;MAAwCC,QAAQ,EAACvB,CAAC,CAACwB,aAAnD;MAAiEC,QAAQ,EAACvB,CAAC,CAACwB,aAA5E;MAA0FC,YAAY,EAACvB,CAAC,CAACwB,MAAzG;MAAgHC,SAAS,EAAC,CAAC,CAA3H;MAA6HZ,KAAK,EAAC3B,CAAnI;MAAqI4B,MAAM,EAAC5B;IAA5I,CAA5E,CAAzE,EAAqS,KAAKwC,IAAL,GAAU/C,CAAC,CAACZ,CAAC,CAACyC,OAAF,CAAUC,aAAV,CAAwBC,IAAzB,CAAhT,EAA+U,KAAKiB,0BAAL,GAAgC5D,CAAC,CAACyC,OAAF,CAAUoB,yBAAzX,EAAmZ,KAAKC,eAAL,GAAqB,OAAK3D,CAAC,CAACF,CAAD,CAAD,GAAKE,CAAC,CAAC,KAAK4D,mBAAN,CAAD,IAA6B,KAAKA,mBAAL,CAAyBC,QAAtD,IAAgE,KAAKzB,YAArE,KAAoFtC,CAAC,GAAC,KAAKgE,OAAL,CAAajE,CAAC,CAACyC,OAAF,CAAUC,aAAV,CAAwBC,IAArC,EAA0C5B,CAAC,CAACmD,UAA5C,CAAtF,CAAL,GAAoJ/D,CAAC,CAAC,KAAKgE,aAAN,CAAD,IAAuB,KAAKA,aAAL,CAAmBH,QAA1C,KAAqD/D,CAAC,GAAC,KAAKgE,OAAL,CAAajE,CAAC,CAACyC,OAAF,CAAUC,aAAV,CAAwBC,IAArC,EAA0C5B,CAAC,CAACqD,IAA5C,CAAvD,CAApJ,EAA8PnE,CAAnQ,CAAxa;EAA8qB;;EAAgB,IAAZoE,YAAY,GAAE;IAAC,OAAO,KAAKP,eAAL,EAAP;EAA8B;;EAAAQ,SAAS,GAAE;IAAC,KAAK/B,YAAL,GAAkB,CAAC,CAAnB;EAAqB;;EAAAgC,gBAAgB,CAACvE,CAAD,EAAG;IAAC,KAAKsC,YAAL,CAAkB,CAAlB,MAAuBtC,CAAC,CAAC,CAAD,CAAxB,IAA6B,KAAKsC,YAAL,CAAkB,CAAlB,MAAuBtC,CAAC,CAAC,CAAD,CAArD,KAA2D,KAAKsC,YAAL,GAAkBtC,CAAlB,EAAoB,KAAKsE,SAAL,EAA/E;EAAiG;;EAAAE,OAAO,GAAE;IAAC,KAAKC,cAAL,GAAoBpE,CAAC,CAAC,KAAKoE,cAAN,CAArB,EAA2C,KAAKC,oBAAL,GAA0BrE,CAAC,CAAC,KAAKqE,oBAAN,CAAtE,EAAkG,KAAKlC,YAAL,GAAkBjC,CAAC,CAAC,KAAKiC,YAAN,CAArH,EAAyI,KAAKmB,IAAL,GAAUpD,CAAC,CAAC,KAAKoD,IAAN,CAApJ;EAAgK;;EAAiB,IAAbQ,aAAa,GAAE;IAAC,IAAG1D,CAAC,CAAC,KAAKgE,cAAN,CAAJ,EAA0B;MAAC,MAAMzE,CAAC,GAAC,IAAIiB,CAAJ,EAAR;MAAcjB,CAAC,CAAC2E,IAAF,GAAO5D,CAAC,CAACqD,IAAT,EAAc,KAAKK,cAAL,GAAoB,KAAKb,0BAAL,CAAgCgB,OAAhC,CAAwCvD,CAAxC,EAA0CrB,CAA1C,CAAlC;IAA+E;;IAAA,OAAO,KAAKyE,cAAZ;EAA2B;;EAAuB,IAAnBV,mBAAmB,GAAE;IAAC,IAAGtD,CAAC,CAAC,KAAKiE,oBAAN,CAAJ,EAAgC;MAAC,MAAM1E,CAAC,GAAC,IAAIiB,CAAJ,EAAR;MAAcjB,CAAC,CAAC2E,IAAF,GAAO5D,CAAC,CAACmD,UAAT,EAAoB,KAAKQ,oBAAL,GAA0B,KAAKd,0BAAL,CAAgCgB,OAAhC,CAAwCvD,CAAxC,EAA0CrB,CAA1C,CAA9C;IAA2F;;IAAA,OAAO,KAAK0E,oBAAZ;EAAiC;;EAAAT,OAAO,CAACjE,CAAD,EAAGC,CAAH,EAAK;IAAC,IAAGQ,CAAC,CAAC,KAAKkD,IAAN,CAAD,IAAclD,CAAC,CAAC,KAAK+B,YAAN,CAAlB,EAAsC,OAAO,IAAP;IAAY,MAAMrC,CAAC,GAACF,CAAC,KAAGc,CAAC,CAACqD,IAAN,GAAW,KAAKD,aAAhB,GAA8B,KAAKJ,mBAA3C;IAA+D,IAAGtD,CAAC,CAACN,CAAD,CAAJ,EAAQ,OAAO,IAAP;IAAY,MAAME,CAAC,GAACL,CAAC,CAAC6E,WAAF,EAAR;IAAwB7E,CAAC,CAAC8E,WAAF,CAAc,CAAd,EAAgB,CAAhB,EAAkB3D,CAAlB,EAAoBA,CAApB,GAAuBnB,CAAC,CAAC+E,eAAF,CAAkB,KAAKvC,YAAvB,CAAvB;IAA4D,MAAMjC,CAAC,GAACP,CAAC,CAACgF,aAAF,CAAgB7E,CAAhB,CAAR;IAA2B,OAAOI,CAAC,CAAC0E,YAAF,CAAe,aAAf,EAA6B,KAAK3C,YAAL,CAAkB,CAAlB,CAA7B,EAAkD,KAAKA,YAAL,CAAkB,CAAlB,CAAlD,GAAwEtC,CAAC,CAACkF,OAAF,CAAU,KAAKvB,IAAf,CAAxE,EAA6FpD,CAAC,CAAC4E,wCAAF,CAA2C,KAAKxB,IAAhD,CAA7F,EAAmJ3D,CAAC,CAACoF,EAAF,CAAKC,UAAL,CAAgBrF,CAAC,CAACoF,EAAF,CAAKE,cAArB,EAAoC,CAApC,EAAsC,CAAtC,CAAnJ,EAA4LtF,CAAC,CAAC8E,WAAF,CAAczE,CAAC,CAAC+B,CAAhB,EAAkB/B,CAAC,CAACkF,CAApB,EAAsBlF,CAAC,CAACyC,KAAxB,EAA8BzC,CAAC,CAAC0C,MAAhC,CAA5L,EAAoO,KAAKR,YAAL,GAAkB,CAAC,CAAvP,EAAyP,KAAKC,YAAL,CAAkBgD,YAAlR;EAA+R;;AAAj8D;;AAAk8DxF,CAAC,CAAC,CAACW,CAAC,CAAC;EAAC8E,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyBrD,CAAC,CAACsD,SAA3B,EAAqC,SAArC,EAA+C,KAAK,CAApD,CAAD;AAAwD,SAAOtD,CAAC,IAAIuD,iBAAZ"},"metadata":{},"sourceType":"module"}