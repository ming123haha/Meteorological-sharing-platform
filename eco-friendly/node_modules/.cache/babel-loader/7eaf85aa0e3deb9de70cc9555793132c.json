{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport t from \"../../../../core/Error.js\";\nimport s from \"../../../../core/Handles.js\";\nimport { isNone as n } from \"../../../../core/maybe.js\";\nimport { property as o } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../../../../geometry/Extent.js\";\nimport { QueryEngine as u } from \"../../../../layers/graphics/data/QueryEngine.js\";\nimport y from \"../../../../rest/support/FeatureSet.js\";\nimport c from \"../../../../rest/support/Query.js\";\nconst l = u;\nlet p = class extends r {\n  constructor(e) {\n    super(e), this._dataQueryEngineInstance = null, this._handles = new s();\n  }\n\n  get defaultQueryJSON() {\n    return new c({\n      outSpatialReference: this.spatialReference\n    }).toJSON();\n  }\n\n  get dataQueryEngine() {\n    return this._ensureDataQueryEngine();\n  }\n\n  initialize() {\n    this._handles.add(this.layerView.on(\"visible-geometry-changed\", () => this.spatialIndex.events.emit(\"changed\")));\n  }\n\n  destroy() {\n    this._dataQueryEngineInstance && (this._dataQueryEngineInstance.destroy(), this._dataQueryEngineInstance = null), this._handles && (this._handles.destroy(), this._handles = null), this._set(\"layerView\", null);\n  }\n\n  async executeQueryForCount(e, r) {\n    return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e), r);\n  }\n\n  async executeQueryForExtent(e, r) {\n    const {\n      count: t,\n      extent: s\n    } = await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e), r);\n    return {\n      count: t,\n      extent: a.fromJSON(s)\n    };\n  }\n\n  async executeQueryForIds(e, r) {\n    return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e), r);\n  }\n\n  async executeQuery(e, r) {\n    const s = this._ensureQueryJSON(e);\n\n    if (s.returnGeometry) throw new t(\"feature-store:unsupported-query\", \"returnGeometry is not yet supported for mesh scene layer queries\");\n    if (s.returnCentroid) throw new t(\"feature-store:unsupported-query\", \"returnCentroid is not yet supported for mesh scene layer queries\");\n    const n = await this.dataQueryEngine.executeQuery(s, r),\n          o = y.fromJSON(n);\n    return o.features.forEach(e => {\n      e.geometry = null;\n    }), o;\n  }\n\n  _ensureQueryJSON(e) {\n    return n(e) ? this.defaultQueryJSON : e.toJSON();\n  }\n\n  _ensureDataQueryEngine() {\n    if (this._dataQueryEngineInstance) return this._dataQueryEngineInstance;\n    const e = this.layer.objectIdField || \"OBJECTID\",\n          r = \"esriGeometryPolygon\",\n          t = this.layer.fields.map(e => e.toJSON()),\n          s = this.layerView.view.resourceController.scheduler,\n          n = this.spatialReference.toJSON(),\n          o = this.priority,\n          i = this.spatialIndex;\n    return this._dataQueryEngineInstance = new l({\n      hasZ: !0,\n      hasM: !1,\n      geometryType: r,\n      fields: t,\n      timeInfo: null,\n      spatialReference: n,\n      objectIdField: e,\n      featureStore: i,\n      scheduler: s,\n      priority: o\n    }), this._dataQueryEngineInstance;\n  }\n\n};\ne([o({\n  constructOnly: !0\n})], p.prototype, \"layerView\", void 0), e([o({\n  constructOnly: !0\n})], p.prototype, \"priority\", void 0), e([o({\n  constructOnly: !0\n})], p.prototype, \"spatialIndex\", void 0), e([o({\n  readOnly: !0,\n  aliasOf: \"layerView.view.spatialReference\"\n})], p.prototype, \"spatialReference\", void 0), e([o({\n  readOnly: !0,\n  aliasOf: \"layerView.i3slayer\"\n})], p.prototype, \"layer\", void 0), e([o({\n  readOnly: !0\n})], p.prototype, \"defaultQueryJSON\", null), p = e([i(\"esri.views.3d.layers.i3s.I3SQueryEngine\")], p);\nexport { p as I3SQueryEngine };","map":{"version":3,"names":["_","e","r","t","s","isNone","n","property","o","subclass","i","a","QueryEngine","u","y","c","l","p","constructor","_dataQueryEngineInstance","_handles","defaultQueryJSON","outSpatialReference","spatialReference","toJSON","dataQueryEngine","_ensureDataQueryEngine","initialize","add","layerView","on","spatialIndex","events","emit","destroy","_set","executeQueryForCount","_ensureQueryJSON","executeQueryForExtent","count","extent","fromJSON","executeQueryForIds","executeQuery","returnGeometry","returnCentroid","features","forEach","geometry","layer","objectIdField","fields","map","view","resourceController","scheduler","priority","hasZ","hasM","geometryType","timeInfo","featureStore","constructOnly","prototype","readOnly","aliasOf","I3SQueryEngine"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{isNone as n}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/Extent.js\";import{QueryEngine as u}from\"../../../../layers/graphics/data/QueryEngine.js\";import y from\"../../../../rest/support/FeatureSet.js\";import c from\"../../../../rest/support/Query.js\";const l=u;let p=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null,this._handles=new s}get defaultQueryJSON(){return new c({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this._ensureDataQueryEngine()}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null),this._handles&&(this._handles.destroy(),this._handles=null),this._set(\"layerView\",null)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:a.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new t(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(s.returnCentroid)throw new t(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const n=await this.dataQueryEngine.executeQuery(s,r),o=y.fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){return n(e)?this.defaultQueryJSON:e.toJSON()}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||\"OBJECTID\",r=\"esriGeometryPolygon\",t=this.layer.fields.map((e=>e.toJSON())),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,i=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:r,fields:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:i,scheduler:s,priority:o}),this._dataQueryEngineInstance}};e([o({constructOnly:!0})],p.prototype,\"layerView\",void 0),e([o({constructOnly:!0})],p.prototype,\"priority\",void 0),e([o({constructOnly:!0})],p.prototype,\"spatialIndex\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],p.prototype,\"spatialReference\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.i3slayer\"})],p.prototype,\"layer\",void 0),e([o({readOnly:!0})],p.prototype,\"defaultQueryJSON\",null),p=e([i(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],p);export{p as I3SQueryEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}