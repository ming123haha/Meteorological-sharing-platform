{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../Graphic.js\";\nimport \"../../intl.js\";\nimport i from \"../../core/Evented.js\";\nimport { HandleOwnerMixin as n } from \"../../core/HandleOwner.js\";\nimport { makeHandle as s } from \"../../core/handleUtils.js\";\nimport o from \"../../core/Logger.js\";\nimport { destroyMaybe as r, isNone as a, isSome as l } from \"../../core/maybe.js\";\nimport { EsriPromiseMixin as u } from \"../../core/Promise.js\";\nimport { watch as c } from \"../../core/reactiveUtils.js\";\nimport { property as p } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as d } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport h from \"../../form/FormTemplate.js\";\nimport f from \"../../layers/support/ContingentValue.js\";\nimport m from \"../../layers/support/LayerContingentValuesCache.js\";\nimport { loadArcade as g } from \"../../support/arcadeOnDemand.js\";\nimport y from \"./InputField.js\";\nimport _ from \"./InputFieldGroup.js\";\nimport { onLocaleChange as F } from \"../../intl/locale.js\";\nimport { fetchMessageBundle as C } from \"../../intl/messages.js\";\nconst v = new t({\n  attributes: {}\n}),\n      b = \"esri.widgets.FeatureForm.FeatureFormViewModel\",\n      E = o.getLogger(b),\n      V = [\"editable\", \"required\", \"value\", \"visibility\"],\n      x = \"#JSAPI_CONTINGENT_VALUE_EMPTY_HASH\",\n      j = \"#JSAPI_CONTINGENT_VALUE_ANY_HASH\",\n      w = \"#JSAPI_CONTINGENT_VALUE_NULL_HASH\";\nlet I = class extends n(u(i.EventedAccessor)) {\n  constructor(e) {\n    super(e), this._arcade = null, this._compiledExpressionLookup = new Map(), this._expressionLookup = new Map(), this._expressionInvalidationCallbacks = new Set(), this._contingentValuesCache = null, this._featureClone = v.clone(), this._initialFeature = v.clone(), this._arcadeGeometryOperationsEnabled = !1, this._inputFieldCache = [], this.contingencyConstraintViolations = new Map(), this.messages = null, this.strict = !1;\n  }\n\n  initialize() {\n    const e = async () => this.messages = await C(\"esri/widgets/FeatureForm/t9n/FeatureForm\");\n\n    e();\n    const t = c(() => this.layer, e => {\n      \"feature\" === e?.type && this.addResolvingPromise(m.createLoadedLayerContingentValuesCache(e).then(e => {\n        this._contingentValuesCache = e, this.notifyChange(\"fieldsWithContingentValues\");\n      }));\n    }, {\n      initial: !0\n    }),\n          i = c(() => this.feature?.geometry, e => {\n      this._featureClone.geometry = e;\n\n      for (const t of this._expressionInvalidationCallbacks) t();\n    });\n    this.handles.add([F(e), t, i]);\n  }\n\n  destroy() {\n    this.feature = null, this.layer = null, this._contingentValuesCache = r(this._contingentValuesCache);\n  }\n\n  get allInputFields() {\n    return this.inputFields.reduce((e, t) => T(t) ? [...e, ...t.inputFields] : [...e, t], []);\n  }\n\n  get _layerFieldsByName() {\n    return new Map(this.layer.fields.map(e => [e.name, e]));\n  }\n\n  get feature() {\n    return this._get(\"feature\");\n  }\n\n  set feature(e) {\n    this._featureClone = e ? e.clone() : v.clone(), this._initialFeature = this._featureClone.clone(), this.contingencyConstraintViolations.clear(), this._clearInputFieldCache(), this._set(\"feature\", e);\n  }\n\n  get fieldsWithContingentValues() {\n    if (a(this._contingentValuesCache)) return new Set();\n\n    const e = this._contingentValuesCache.fieldGroups.flatMap(e => e.fields);\n\n    return new Set(e);\n  }\n\n  get formTemplate() {\n    return this.layer && \"formTemplate\" in this.layer ? this.layer.formTemplate : null;\n  }\n\n  set formTemplate(e) {\n    null != e ? this._override(\"formTemplate\", e) : this._clearOverride(\"formTemplate\");\n  }\n\n  get inputFields() {\n    const {\n      _arcade: e,\n      _featureClone: t,\n      _initialFeature: i,\n      _inputFieldCache: n,\n      formTemplate: s,\n      messages: o,\n      layer: r,\n      state: a,\n      spatialReference: u\n    } = this;\n    if (\"ready\" !== a) return [];\n    const c = {\n      arcade: e,\n      feature: t,\n      initialFeature: i,\n      layer: r,\n      messages: o,\n      expressionTrackingProvider: {\n        registerExpression: this._registerExpression.bind(this)\n      },\n      spatialReference: u\n    },\n          p = l(s) && s.elements.length > 0 ? this._updateInputFieldsFromElements(n, s.elements, c) : this._updateInputFieldsFromLayerFields(n, r?.fields, c);\n    return this._inputFieldCache = p, p;\n  }\n\n  get joinedContingentValues() {\n    return this._joinContingentValues();\n  }\n\n  get layer() {\n    return this.feature?.sourceLayer && \"applyEdits\" in this.feature.sourceLayer ? this.feature.sourceLayer : null;\n  }\n\n  set layer(e) {\n    e ? this._override(\"layer\", e) : this._clearOverride(\"layer\");\n  }\n\n  get spatialReference() {\n    return this.layer?.spatialReference || null;\n  }\n\n  set spatialReference(e) {\n    void 0 === e ? this._clearOverride(\"spatialReference\") : this._override(\"spatialReference\", e);\n  }\n\n  get state() {\n    return this.messages && this.get(\"layer.loaded\") ? \"ready\" : \"disabled\";\n  }\n\n  get submittable() {\n    return !!this.valid || this.allInputFields.filter(e => !e.valid).every(({\n      submittable: e\n    }) => e);\n  }\n\n  get valid() {\n    const e = this.allInputFields;\n    return e.length > 0 && e.every(({\n      valid: e\n    }) => e);\n  }\n\n  findField(e) {\n    return this.allInputFields.find(t => t.name === e);\n  }\n\n  getValue(e) {\n    const {\n      _featureClone: t,\n      layer: i\n    } = this,\n          n = !!i?.getField(e);\n    return t.getAttribute(e) ?? (n ? null : void 0);\n  }\n\n  setValue(e, t) {\n    const {\n      _featureClone: i,\n      strict: n\n    } = this,\n          s = this.findField(e);\n    t = \"\" === t ? null : t, s && i.getAttribute(e) !== t && (s.value = t, n && !s.valid || this._afterValueChange(s));\n  }\n\n  getValues() {\n    return { ...this._featureClone.attributes\n    };\n  }\n\n  submit() {\n    const e = this.allInputFields,\n          t = new Set(e.filter(e => e.valid).map(({\n      name: e\n    }) => e)),\n          i = e.filter(e => !e.valid).map(({\n      name: e\n    }) => e),\n          n = this.getValues();\n    if (this.validateContingencyConstraints(n, {\n      includeIncompleteViolations: !0\n    }).length > 0) for (const [s, o] of this.contingencyConstraintViolations.entries()) \"error\" === o.type && (t.delete(s), i.push(s));\n    this.emit(\"submit\", {\n      valid: [...t],\n      invalid: i,\n      values: n\n    });\n  }\n\n  validateContingencyConstraints(e, t) {\n    const {\n      _contingentValuesCache: i\n    } = this,\n          n = new Map();\n    if (this.contingencyConstraintViolations = n, a(i)) return [];\n    const {\n      invalid: s,\n      incomplete: o\n    } = i.validateContingencyConstraints(e),\n          r = [...s, ...(t?.includeIncompleteViolations ? o : [])];\n\n    for (const a of r) for (const e of a.fieldGroup.fields) n.set(e, a);\n\n    return r;\n  }\n\n  _emitChangeEvent({\n    name: e,\n    valid: t,\n    value: i\n  }) {\n    this.emit(\"value-change\", {\n      layer: this.layer,\n      feature: this.feature,\n      fieldName: e,\n      value: i,\n      valid: t\n    });\n  }\n\n  _updateInputFieldsFromElements(e, t, i) {\n    const n = new Map();\n\n    for (const o of e) if (T(o)) {\n      A(n, o.groupElement, o);\n\n      for (const e of o.inputFields) A(n, e.fieldElement, e);\n    } else A(n, o.fieldElement, o);\n\n    const s = this._updateInputFieldsRecursive(n, t.filter(this._isSupportedElement), i);\n\n    for (const [o, r] of n.entries()) n.delete(o), r.destroy();\n\n    return s;\n  }\n\n  _updateInputFieldsRecursive(e, t, i, n = null) {\n    const s = [];\n\n    for (const o of t) {\n      const t = e.has(o),\n            r = t ? e.get(o) : k(o) ? this._makeInputFieldGroupFromGroupElement(o, i) : this._makeInputFieldFromFieldElement(o, i, n);\n      if (s.push(r), t) if (e.delete(o), T(r)) {\n        const {\n          arcade: e,\n          feature: t,\n          expressionTrackingProvider: n,\n          spatialReference: s\n        } = i;\n        r.set({\n          arcade: e,\n          feature: t,\n          expressionTrackingProvider: n,\n          spatialReference: s\n        });\n      } else r.set(i);\n\n      if (k(o)) {\n        const t = o.elements.filter(e => this._isSupportedElement(e));\n        r.inputFields = this._updateInputFieldsRecursive(e, t, i, r);\n      }\n    }\n\n    return s;\n  }\n\n  _updateInputFieldsFromLayerFields(e, t, i) {\n    if (!Array.isArray(t)) return E.warn(b, \"No attribute fields found.\"), [];\n    const n = new Map();\n\n    for (const c of e) if (T(c)) {\n      for (const e of c.inputFields) e.destroy();\n\n      c.inputFields.length = 0, c.destroy();\n    } else n.set(c.field, c);\n\n    const s = [],\n          {\n      feature: o,\n      initialFeature: r,\n      layer: a,\n      messages: l,\n      spatialReference: u\n    } = i;\n\n    for (const c of t) {\n      const e = n.get(c) ?? new y({\n        field: c,\n        feature: o,\n        initialFeature: r,\n        layer: a,\n        messages: l,\n        spatialReference: u,\n        value: o.getAttribute(c.name)\n      });\n      e.set({\n        fieldElement: null,\n        requiredFunction: null,\n        visibilityFunction: null,\n        valueFunction: null,\n        editableFunction: null\n      }), s.push(e), n.delete(c);\n    }\n\n    for (const [c, p] of n.entries()) n.delete(c), p.destroy();\n\n    return s;\n  }\n\n  _makeInputFieldFromFieldElement(e, t, i = null) {\n    const {\n      arcade: n,\n      expressionTrackingProvider: o,\n      feature: r,\n      initialFeature: a,\n      layer: u,\n      messages: p,\n      spatialReference: d\n    } = t,\n          h = new y({\n      fieldElement: e,\n      field: this._layerFieldsByName.get(e.fieldName),\n      requiredFunction: this._getCompiledExpression(e.requiredExpression),\n      visibilityFunction: this._getCompiledExpression(e.visibilityExpression),\n      valueFunction: this._getCompiledExpression(e.valueExpression),\n      editableFunction: this._getCompiledExpression(e.editableExpression),\n      group: i,\n      arcade: n,\n      expressionTrackingProvider: o,\n      feature: r,\n      initialFeature: a,\n      layer: u,\n      messages: p,\n      spatialReference: d,\n      value: r.getAttribute(e.fieldName)\n    }),\n          f = `watch-expression-field-${h.id}`,\n          m = c(() => h.fieldElement, e => {\n      this.handles.remove(f), l(e) && this.handles.add(V.map(t => c(() => e[`${t}Expression`], async e => {\n        e && \"\" !== e && (h[`${t}Function`] = await this._getOrMakeCompiledExpression(e), h.arcade = this._arcade);\n      }, {\n        initial: !0,\n        sync: !0\n      })), f);\n    }, {\n      initial: !0,\n      sync: !0\n    }),\n          g = s(() => this.handles.remove(f)),\n          _ = c(() => h.value, () => this._afterValueChange(h));\n\n    return h.own([m, g, _]), h;\n  }\n\n  _makeInputFieldGroupFromGroupElement(e, t) {\n    const {\n      arcade: i,\n      feature: n,\n      expressionTrackingProvider: s,\n      spatialReference: o\n    } = t,\n          r = new _({\n      groupElement: e,\n      visibilityFunction: this._getCompiledExpression(e.visibilityExpression),\n      inputFields: [],\n      arcade: i,\n      feature: n,\n      expressionTrackingProvider: s,\n      spatialReference: o\n    });\n    return r.own(c(() => r.groupElement, e => l(e) && e.own(c(() => e.visibilityExpression, async e => {\n      e && \"\" !== e && (r.visibilityFunction = await this._getOrMakeCompiledExpression(e), r.arcade = this._arcade);\n    }, {\n      initial: !0\n    })), {\n      initial: !0\n    })), r;\n  }\n\n  _clearInputFieldCache() {\n    for (const e of this._inputFieldCache) {\n      if (T(e)) for (const t of e.inputFields) t.destroy();\n      e.destroy();\n    }\n\n    this._inputFieldCache = [];\n  }\n\n  _afterValueChange(e) {\n    const {\n      name: t,\n      value: i\n    } = e;\n\n    if (this.get(\"layer.typeIdField\") === t && \"types\" in this.layer) {\n      const e = new Set();\n      this.layer.types.forEach(t => Object.keys(t.domains).forEach(t => e.add(t))), e.forEach(e => {\n        const t = this.findField(e);\n        t && t.notifyChange(\"domain\");\n      });\n    }\n\n    this._featureClone.setAttribute(t, i);\n\n    for (const n of this._expressionInvalidationCallbacks) n();\n\n    this._emitChangeEvent(e);\n  }\n\n  _registerExpression(e) {\n    const {\n      _expressionInvalidationCallbacks: t\n    } = this;\n    return t.add(e), s(() => t.delete(e));\n  }\n\n  _getCompiledExpression(e) {\n    return this._compiledExpressionLookup.get(this._expressionLookup.get(e));\n  }\n\n  async _getOrMakeCompiledExpression(e) {\n    {\n      if (a(e) || \"\" === e) return null;\n\n      const t = this._expressionLookup.get(e) ?? this._addToExpressionLookup(e);\n\n      if (this._compiledExpressionLookup.has(t)) return this._compiledExpressionLookup.get(t);\n      this._arcade || (this._arcade = await g());\n      const i = this._arcade.arcadeUtils;\n      return !this._arcadeGeometryOperationsEnabled && i.hasGeometryOperations(t) && (await i.enableGeometryOperations(), this._arcadeGeometryOperationsEnabled = !0), this._addToCompiledExpressionLookup(t);\n    }\n  }\n\n  _addToCompiledExpressionLookup(e) {\n    const {\n      _arcade: {\n        arcadeUtils: t\n      },\n      _compiledExpressionLookup: i\n    } = this,\n          n = t.createFunction(e);\n    return i.set(e, n), n;\n  }\n\n  _addToExpressionLookup(e) {\n    const {\n      _expressionLookup: t,\n      formTemplate: i\n    } = this,\n          n = (l(i) && l(i.expressionInfos) ? Object.values(i.expressionInfos).find(t => t.name === e) : null)?.expression ?? e;\n    return t.set(e, n), e !== n && t.set(n, n), n;\n  }\n\n  _isSupportedElement(e) {\n    return \"field\" === e.type || \"group\" === e.type || (E.warn(\"form-info::unsupported-element-type\", \"Only element types 'field' and 'group' are supported\", `Element ${e.label} has unsupported type '${e.type}'`), !1);\n  }\n\n  _joinContingentValues() {\n    const e = this._contingentValuesCache;\n    if (a(e)) return [];\n    const t = \"typeIdField\" in this.layer ? this.layer.typeIdField : null,\n          i = t ? this.getValue(t) : null,\n          n = [];\n\n    for (const r of e.fieldGroups) {\n      const {\n        contingencies: e,\n        fields: t,\n        name: s\n      } = r,\n            o = [];\n\n      for (const n of e) n.isRetired || l(n.subtype) && n.subtype.code !== i || o.push({\n        values: n.values\n      });\n\n      o.length > 0 && n.push({\n        name: s,\n        fields: t,\n        contingencies: o\n      });\n    }\n\n    const [s, o] = this._generateJoinPlan(n);\n\n    return [...s.flatMap(e => this._joinFieldGroupContingencies(e)), ...o.flatMap(e => e.contingencies)];\n  }\n\n  _generateJoinPlan(e) {\n    const t = new Map(),\n          i = [],\n          n = new Set();\n\n    for (const l of e) for (const e of l.fields) if (t.has(e)) {\n      const s = t.get(e),\n            o = l,\n            r = [s.name, o.name].sort().join(\"|\");\n      if (n.has(r)) continue;\n      i.push([s, o]), n.add(r), t.set(e, o);\n    } else t.set(e, l);\n\n    const s = new Set(i.flat()),\n          o = new Set(e);\n\n    for (const l of s) o.delete(l);\n\n    const r = new Map(),\n          a = new Map();\n\n    for (const l of new Set(i.flat())) {\n      const e = Symbol(l.name);\n      r.set(e, new Set([l])), a.set(l, e);\n    }\n\n    for (const [l, u] of i) {\n      const e = a.get(l),\n            t = a.get(u);\n      if (e === t) continue;\n      const i = r.get(e),\n            n = r.get(t);\n\n      for (const s of n) i.add(s), a.set(s, e);\n\n      r.delete(t);\n    }\n\n    return [[...r.values()].map(e => [...e]), [...o]];\n  }\n\n  _joinFieldGroupContingencies(e) {\n    const t = e.slice(),\n          i = t.shift();\n\n    let n = t.shift(),\n        s = this._generateJoinKey(i.fields, n.fields),\n        o = new Set([...i.fields, ...n.fields]),\n        r = new Map();\n\n    for (const a of i.contingencies) {\n      const [e] = this._hashContingency(a, s.codedValueFields, !0);\n\n      r.has(e) ? r.get(e).push(a) : r.set(e, [a]);\n    }\n\n    for (; t.length > 0;) {\n      const e = new Map(),\n            i = t.shift(),\n            l = this._generateJoinKey(o, i.fields);\n\n      for (const t of n.contingencies) {\n        const [i, n] = this._hashContingency(t, s.codedValueFields),\n              o = n ? this._findMatchingContingenciesWithAnyHashMask(r, i) : r.get(i);\n\n        if (r.has(j) && o.push(...this._findMatchingContingenciesContainingAny(t, r.get(j), s.codedValueFields)), !a(o)) for (const r of o) {\n          const i = s.rangeFields.length > 0 ? this._joinContingenciesWithRangeDomains(r, t, s.rangeFields) : this._joinContingencies(r, t);\n          if (a(i)) break;\n\n          const [n] = this._hashContingency(i, l.codedValueFields, !0);\n\n          e.has(n) ? e.get(n).push(i) : e.set(n, [i]);\n        }\n      }\n\n      r = e, n = i, s = l, o = new Set([...o, ...n.fields]);\n    }\n\n    const u = [];\n\n    for (const c of n.contingencies) {\n      const [e, t] = this._hashContingency(c, s.codedValueFields),\n            i = t ? this._findMatchingContingenciesWithAnyHashMask(r, e) : r.get(e);\n\n      if (r.has(j) && i.push(...this._findMatchingContingenciesContainingAny(c, r.get(j), s.codedValueFields)), !a(i)) for (const n of i) {\n        const e = s.rangeFields.length > 0 ? this._joinContingenciesWithRangeDomains(n, c, s.rangeFields) : this._joinContingencies(n, c);\n        l(e) && u.push(e);\n      }\n    }\n\n    return u;\n  }\n\n  _joinContingencies(e, t) {\n    const i = {\n      values: { ...e.values,\n        ...t.values\n      }\n    };\n\n    for (const [n, s] of Object.entries(i.values)) \"any\" === s.objectType && l(e.values[n]) && (i.values[n] = e.values[n]);\n\n    return i;\n  }\n\n  _joinContingenciesWithRangeDomains(e, t, i) {\n    const n = this._joinContingencies(e, t);\n\n    for (const s of i) {\n      const i = e.values[s],\n            o = t.values[s],\n            {\n        leftIsNull: r,\n        rightIsNull: a,\n        bothAreNull: l,\n        leftIsAny: u,\n        rightIsAny: c,\n        bothAreAny: p,\n        leftIsRange: d,\n        rightIsRange: h\n      } = this._compareObjectTypes(i.objectType, o.objectType);\n\n      if (l || p) continue;\n\n      if (r && c || a && u) {\n        n.values[s] = new f({\n          objectType: \"null\"\n        });\n        continue;\n      }\n\n      if (r && h || a && d) return null;\n      u ? (i.minValue = -1 / 0, i.maxValue = 1 / 0) : c && (o.minValue = -1 / 0, o.maxValue = 1 / 0);\n      const m = Math.max(i.minValue, o.minValue),\n            g = Math.min(i.maxValue, o.maxValue);\n      if (m > g) return null;\n      n.values[s] = new f({\n        objectType: \"range\",\n        minValue: m,\n        maxValue: g\n      });\n    }\n\n    return n;\n  }\n\n  _findMatchingContingenciesContainingAny(e, t, i) {\n    return t.filter(t => i.every(i => {\n      const n = t.values[i],\n            s = e.values[i];\n      return \"any\" === n.objectType || \"any\" === s.objectType || n.codedValue?.code === s.codedValue?.code;\n    }));\n  }\n\n  _findMatchingContingenciesWithAnyHashMask(e, t) {\n    const i = RegExp(`${t}$`),\n          n = [];\n\n    for (const [s, o] of e) {\n      if (s === j) break;\n      i.test(s) && n.push(...o);\n    }\n\n    return n;\n  }\n\n  _generateJoinKey(e, t) {\n    const i = Array.isArray(e) ? new Set(e) : e,\n          n = Array.isArray(t) ? new Set(t) : t,\n          s = i.size < n.size ? i : n,\n          o = s === i ? n : i,\n          r = new Set(),\n          l = new Set();\n\n    for (const u of s) if (o.has(u)) {\n      const e = this.layer.getFieldDomain(u, {\n        feature: this.feature\n      });\n      if (a(e)) continue;\n\n      switch (e.type) {\n        case \"coded-value\":\n          r.add(u);\n          break;\n\n        case \"range\":\n          l.add(u);\n      }\n    }\n\n    return {\n      codedValueFields: [...r],\n      rangeFields: [...l]\n    };\n  }\n\n  _hashContingency(e, t, i = !1) {\n    if (t.length < 1) return [x, !1];\n    const n = [];\n    let s = !1;\n\n    for (const o of t) {\n      const t = e.values[o];\n\n      if (\"any\" === t.objectType) {\n        if (i) return [j, !0];\n        s = !0, n.push(`${o}:.*`);\n      } else \"null\" === t.objectType ? n.push(`${o}:${w}`) : n.push(`${o}:${t.codedValue?.code}`);\n    }\n\n    return [n.sort().join(\"&\"), s];\n  }\n\n  _compareObjectTypes(e, t) {\n    return {\n      leftIsNull: \"null\" === e,\n      rightIsNull: \"null\" === t,\n      bothAreNull: \"null\" === e && \"null\" === t,\n      leftIsAny: \"any\" === e,\n      rightIsAny: \"any\" === t,\n      bothAreAny: \"any\" === e && \"any\" === t,\n      leftIsRange: \"range\" === e,\n      rightIsRange: \"range\" === t\n    };\n  }\n\n};\ne([p({\n  readOnly: !0\n})], I.prototype, \"allInputFields\", null), e([p()], I.prototype, \"_layerFieldsByName\", null), e([p()], I.prototype, \"_inputFieldCache\", void 0), e([p()], I.prototype, \"contingencyConstraintViolations\", void 0), e([p()], I.prototype, \"feature\", null), e([p()], I.prototype, \"fieldsWithContingentValues\", null), e([p({\n  type: h\n})], I.prototype, \"formTemplate\", null), e([p({\n  readOnly: !0\n})], I.prototype, \"inputFields\", null), e([p()], I.prototype, \"joinedContingentValues\", null), e([p()], I.prototype, \"layer\", null), e([p()], I.prototype, \"messages\", void 0), e([p()], I.prototype, \"spatialReference\", null), e([p()], I.prototype, \"state\", null), e([p()], I.prototype, \"strict\", void 0), e([p()], I.prototype, \"submittable\", null), e([p()], I.prototype, \"valid\", null), e([p()], I.prototype, \"getValues\", null), e([p()], I.prototype, \"submit\", null), I = e([d(b)], I);\n\nconst T = e => !!e.inputFields,\n      k = e => \"group\" === e.type,\n      A = (e, t, i) => {\n  l(t) && e.set(t, i);\n},\n      M = I;\n\nexport { M as default };","map":{"version":3,"names":["_","e","t","i","HandleOwnerMixin","n","makeHandle","s","o","destroyMaybe","r","isNone","a","isSome","l","EsriPromiseMixin","u","watch","c","property","p","subclass","d","h","f","m","loadArcade","g","y","onLocaleChange","F","fetchMessageBundle","C","v","attributes","b","E","getLogger","V","x","j","w","I","EventedAccessor","constructor","_arcade","_compiledExpressionLookup","Map","_expressionLookup","_expressionInvalidationCallbacks","Set","_contingentValuesCache","_featureClone","clone","_initialFeature","_arcadeGeometryOperationsEnabled","_inputFieldCache","contingencyConstraintViolations","messages","strict","initialize","layer","type","addResolvingPromise","createLoadedLayerContingentValuesCache","then","notifyChange","initial","feature","geometry","handles","add","destroy","allInputFields","inputFields","reduce","T","_layerFieldsByName","fields","map","name","_get","clear","_clearInputFieldCache","_set","fieldsWithContingentValues","fieldGroups","flatMap","formTemplate","_override","_clearOverride","state","spatialReference","arcade","initialFeature","expressionTrackingProvider","registerExpression","_registerExpression","bind","elements","length","_updateInputFieldsFromElements","_updateInputFieldsFromLayerFields","joinedContingentValues","_joinContingentValues","sourceLayer","get","submittable","valid","filter","every","findField","find","getValue","getField","getAttribute","setValue","value","_afterValueChange","getValues","submit","validateContingencyConstraints","includeIncompleteViolations","entries","delete","push","emit","invalid","values","incomplete","fieldGroup","set","_emitChangeEvent","fieldName","A","groupElement","fieldElement","_updateInputFieldsRecursive","_isSupportedElement","has","k","_makeInputFieldGroupFromGroupElement","_makeInputFieldFromFieldElement","Array","isArray","warn","field","requiredFunction","visibilityFunction","valueFunction","editableFunction","_getCompiledExpression","requiredExpression","visibilityExpression","valueExpression","editableExpression","group","id","remove","_getOrMakeCompiledExpression","sync","own","types","forEach","Object","keys","domains","setAttribute","_addToExpressionLookup","arcadeUtils","hasGeometryOperations","enableGeometryOperations","_addToCompiledExpressionLookup","createFunction","expressionInfos","expression","label","typeIdField","contingencies","isRetired","subtype","code","_generateJoinPlan","_joinFieldGroupContingencies","sort","join","flat","Symbol","slice","shift","_generateJoinKey","_hashContingency","codedValueFields","_findMatchingContingenciesWithAnyHashMask","_findMatchingContingenciesContainingAny","rangeFields","_joinContingenciesWithRangeDomains","_joinContingencies","objectType","leftIsNull","rightIsNull","bothAreNull","leftIsAny","rightIsAny","bothAreAny","leftIsRange","rightIsRange","_compareObjectTypes","minValue","maxValue","Math","max","min","codedValue","RegExp","test","size","getFieldDomain","readOnly","prototype","M","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/FeatureForm/FeatureFormViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import\"../../intl.js\";import i from\"../../core/Evented.js\";import{HandleOwnerMixin as n}from\"../../core/HandleOwner.js\";import{makeHandle as s}from\"../../core/handleUtils.js\";import o from\"../../core/Logger.js\";import{destroyMaybe as r,isNone as a,isSome as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as u}from\"../../core/Promise.js\";import{watch as c}from\"../../core/reactiveUtils.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../form/FormTemplate.js\";import f from\"../../layers/support/ContingentValue.js\";import m from\"../../layers/support/LayerContingentValuesCache.js\";import{loadArcade as g}from\"../../support/arcadeOnDemand.js\";import y from\"./InputField.js\";import _ from\"./InputFieldGroup.js\";import{onLocaleChange as F}from\"../../intl/locale.js\";import{fetchMessageBundle as C}from\"../../intl/messages.js\";const v=new t({attributes:{}}),b=\"esri.widgets.FeatureForm.FeatureFormViewModel\",E=o.getLogger(b),V=[\"editable\",\"required\",\"value\",\"visibility\"],x=\"#JSAPI_CONTINGENT_VALUE_EMPTY_HASH\",j=\"#JSAPI_CONTINGENT_VALUE_ANY_HASH\",w=\"#JSAPI_CONTINGENT_VALUE_NULL_HASH\";let I=class extends(n(u(i.EventedAccessor))){constructor(e){super(e),this._arcade=null,this._compiledExpressionLookup=new Map,this._expressionLookup=new Map,this._expressionInvalidationCallbacks=new Set,this._contingentValuesCache=null,this._featureClone=v.clone(),this._initialFeature=v.clone(),this._arcadeGeometryOperationsEnabled=!1,this._inputFieldCache=[],this.contingencyConstraintViolations=new Map,this.messages=null,this.strict=!1}initialize(){const e=async()=>this.messages=await C(\"esri/widgets/FeatureForm/t9n/FeatureForm\");e();const t=c((()=>this.layer),(e=>{\"feature\"===e?.type&&this.addResolvingPromise(m.createLoadedLayerContingentValuesCache(e).then((e=>{this._contingentValuesCache=e,this.notifyChange(\"fieldsWithContingentValues\")})))}),{initial:!0}),i=c((()=>this.feature?.geometry),(e=>{this._featureClone.geometry=e;for(const t of this._expressionInvalidationCallbacks)t()}));this.handles.add([F(e),t,i])}destroy(){this.feature=null,this.layer=null,this._contingentValuesCache=r(this._contingentValuesCache)}get allInputFields(){return this.inputFields.reduce(((e,t)=>T(t)?[...e,...t.inputFields]:[...e,t]),[])}get _layerFieldsByName(){return new Map(this.layer.fields.map((e=>[e.name,e])))}get feature(){return this._get(\"feature\")}set feature(e){this._featureClone=e?e.clone():v.clone(),this._initialFeature=this._featureClone.clone(),this.contingencyConstraintViolations.clear(),this._clearInputFieldCache(),this._set(\"feature\",e)}get fieldsWithContingentValues(){if(a(this._contingentValuesCache))return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap((e=>e.fields));return new Set(e)}get formTemplate(){return this.layer&&\"formTemplate\"in this.layer?this.layer.formTemplate:null}set formTemplate(e){null!=e?this._override(\"formTemplate\",e):this._clearOverride(\"formTemplate\")}get inputFields(){const{_arcade:e,_featureClone:t,_initialFeature:i,_inputFieldCache:n,formTemplate:s,messages:o,layer:r,state:a,spatialReference:u}=this;if(\"ready\"!==a)return[];const c={arcade:e,feature:t,initialFeature:i,layer:r,messages:o,expressionTrackingProvider:{registerExpression:this._registerExpression.bind(this)},spatialReference:u},p=l(s)&&s.elements.length>0?this._updateInputFieldsFromElements(n,s.elements,c):this._updateInputFieldsFromLayerFields(n,r?.fields,c);return this._inputFieldCache=p,p}get joinedContingentValues(){return this._joinContingentValues()}get layer(){return this.feature?.sourceLayer&&\"applyEdits\"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(e){e?this._override(\"layer\",e):this._clearOverride(\"layer\")}get spatialReference(){return this.layer?.spatialReference||null}set spatialReference(e){void 0===e?this._clearOverride(\"spatialReference\"):this._override(\"spatialReference\",e)}get state(){return this.messages&&this.get(\"layer.loaded\")?\"ready\":\"disabled\"}get submittable(){return!!this.valid||this.allInputFields.filter((e=>!e.valid)).every((({submittable:e})=>e))}get valid(){const e=this.allInputFields;return e.length>0&&e.every((({valid:e})=>e))}findField(e){return this.allInputFields.find((t=>t.name===e))}getValue(e){const{_featureClone:t,layer:i}=this,n=!!i?.getField(e);return t.getAttribute(e)??(n?null:void 0)}setValue(e,t){const{_featureClone:i,strict:n}=this,s=this.findField(e);t=\"\"===t?null:t,s&&i.getAttribute(e)!==t&&(s.value=t,n&&!s.valid||this._afterValueChange(s))}getValues(){return{...this._featureClone.attributes}}submit(){const e=this.allInputFields,t=new Set(e.filter((e=>e.valid)).map((({name:e})=>e))),i=e.filter((e=>!e.valid)).map((({name:e})=>e)),n=this.getValues();if(this.validateContingencyConstraints(n,{includeIncompleteViolations:!0}).length>0)for(const[s,o]of this.contingencyConstraintViolations.entries())\"error\"===o.type&&(t.delete(s),i.push(s));this.emit(\"submit\",{valid:[...t],invalid:i,values:n})}validateContingencyConstraints(e,t){const{_contingentValuesCache:i}=this,n=new Map;if(this.contingencyConstraintViolations=n,a(i))return[];const{invalid:s,incomplete:o}=i.validateContingencyConstraints(e),r=[...s,...t?.includeIncompleteViolations?o:[]];for(const a of r)for(const e of a.fieldGroup.fields)n.set(e,a);return r}_emitChangeEvent({name:e,valid:t,value:i}){this.emit(\"value-change\",{layer:this.layer,feature:this.feature,fieldName:e,value:i,valid:t})}_updateInputFieldsFromElements(e,t,i){const n=new Map;for(const o of e)if(T(o)){A(n,o.groupElement,o);for(const e of o.inputFields)A(n,e.fieldElement,e)}else A(n,o.fieldElement,o);const s=this._updateInputFieldsRecursive(n,t.filter(this._isSupportedElement),i);for(const[o,r]of n.entries())n.delete(o),r.destroy();return s}_updateInputFieldsRecursive(e,t,i,n=null){const s=[];for(const o of t){const t=e.has(o),r=t?e.get(o):k(o)?this._makeInputFieldGroupFromGroupElement(o,i):this._makeInputFieldFromFieldElement(o,i,n);if(s.push(r),t)if(e.delete(o),T(r)){const{arcade:e,feature:t,expressionTrackingProvider:n,spatialReference:s}=i;r.set({arcade:e,feature:t,expressionTrackingProvider:n,spatialReference:s})}else r.set(i);if(k(o)){const t=o.elements.filter((e=>this._isSupportedElement(e)));r.inputFields=this._updateInputFieldsRecursive(e,t,i,r)}}return s}_updateInputFieldsFromLayerFields(e,t,i){if(!Array.isArray(t))return E.warn(b,\"No attribute fields found.\"),[];const n=new Map;for(const c of e)if(T(c)){for(const e of c.inputFields)e.destroy();c.inputFields.length=0,c.destroy()}else n.set(c.field,c);const s=[],{feature:o,initialFeature:r,layer:a,messages:l,spatialReference:u}=i;for(const c of t){const e=n.get(c)??new y({field:c,feature:o,initialFeature:r,layer:a,messages:l,spatialReference:u,value:o.getAttribute(c.name)});e.set({fieldElement:null,requiredFunction:null,visibilityFunction:null,valueFunction:null,editableFunction:null}),s.push(e),n.delete(c)}for(const[c,p]of n.entries())n.delete(c),p.destroy();return s}_makeInputFieldFromFieldElement(e,t,i=null){const{arcade:n,expressionTrackingProvider:o,feature:r,initialFeature:a,layer:u,messages:p,spatialReference:d}=t,h=new y({fieldElement:e,field:this._layerFieldsByName.get(e.fieldName),requiredFunction:this._getCompiledExpression(e.requiredExpression),visibilityFunction:this._getCompiledExpression(e.visibilityExpression),valueFunction:this._getCompiledExpression(e.valueExpression),editableFunction:this._getCompiledExpression(e.editableExpression),group:i,arcade:n,expressionTrackingProvider:o,feature:r,initialFeature:a,layer:u,messages:p,spatialReference:d,value:r.getAttribute(e.fieldName)}),f=`watch-expression-field-${h.id}`,m=c((()=>h.fieldElement),(e=>{this.handles.remove(f),l(e)&&this.handles.add(V.map((t=>c((()=>e[`${t}Expression`]),(async e=>{e&&\"\"!==e&&(h[`${t}Function`]=await this._getOrMakeCompiledExpression(e),h.arcade=this._arcade)}),{initial:!0,sync:!0}))),f)}),{initial:!0,sync:!0}),g=s((()=>this.handles.remove(f))),_=c((()=>h.value),(()=>this._afterValueChange(h)));return h.own([m,g,_]),h}_makeInputFieldGroupFromGroupElement(e,t){const{arcade:i,feature:n,expressionTrackingProvider:s,spatialReference:o}=t,r=new _({groupElement:e,visibilityFunction:this._getCompiledExpression(e.visibilityExpression),inputFields:[],arcade:i,feature:n,expressionTrackingProvider:s,spatialReference:o});return r.own(c((()=>r.groupElement),(e=>l(e)&&e.own(c((()=>e.visibilityExpression),(async e=>{e&&\"\"!==e&&(r.visibilityFunction=await this._getOrMakeCompiledExpression(e),r.arcade=this._arcade)}),{initial:!0}))),{initial:!0})),r}_clearInputFieldCache(){for(const e of this._inputFieldCache){if(T(e))for(const t of e.inputFields)t.destroy();e.destroy()}this._inputFieldCache=[]}_afterValueChange(e){const{name:t,value:i}=e;if(this.get(\"layer.typeIdField\")===t&&\"types\"in this.layer){const e=new Set;this.layer.types.forEach((t=>Object.keys(t.domains).forEach((t=>e.add(t))))),e.forEach((e=>{const t=this.findField(e);t&&t.notifyChange(\"domain\")}))}this._featureClone.setAttribute(t,i);for(const n of this._expressionInvalidationCallbacks)n();this._emitChangeEvent(e)}_registerExpression(e){const{_expressionInvalidationCallbacks:t}=this;return t.add(e),s((()=>t.delete(e)))}_getCompiledExpression(e){return this._compiledExpressionLookup.get(this._expressionLookup.get(e))}async _getOrMakeCompiledExpression(e){{if(a(e)||\"\"===e)return null;const t=this._expressionLookup.get(e)??this._addToExpressionLookup(e);if(this._compiledExpressionLookup.has(t))return this._compiledExpressionLookup.get(t);this._arcade||(this._arcade=await g());const i=this._arcade.arcadeUtils;return!this._arcadeGeometryOperationsEnabled&&i.hasGeometryOperations(t)&&(await i.enableGeometryOperations(),this._arcadeGeometryOperationsEnabled=!0),this._addToCompiledExpressionLookup(t)}}_addToCompiledExpressionLookup(e){const{_arcade:{arcadeUtils:t},_compiledExpressionLookup:i}=this,n=t.createFunction(e);return i.set(e,n),n}_addToExpressionLookup(e){const{_expressionLookup:t,formTemplate:i}=this,n=(l(i)&&l(i.expressionInfos)?Object.values(i.expressionInfos).find((t=>t.name===e)):null)?.expression??e;return t.set(e,n),e!==n&&t.set(n,n),n}_isSupportedElement(e){return\"field\"===e.type||\"group\"===e.type||(E.warn(\"form-info::unsupported-element-type\",\"Only element types 'field' and 'group' are supported\",`Element ${e.label} has unsupported type '${e.type}'`),!1)}_joinContingentValues(){const e=this._contingentValuesCache;if(a(e))return[];const t=\"typeIdField\"in this.layer?this.layer.typeIdField:null,i=t?this.getValue(t):null,n=[];for(const r of e.fieldGroups){const{contingencies:e,fields:t,name:s}=r,o=[];for(const n of e)n.isRetired||l(n.subtype)&&n.subtype.code!==i||o.push({values:n.values});o.length>0&&n.push({name:s,fields:t,contingencies:o})}const[s,o]=this._generateJoinPlan(n);return[...s.flatMap((e=>this._joinFieldGroupContingencies(e))),...o.flatMap((e=>e.contingencies))]}_generateJoinPlan(e){const t=new Map,i=[],n=new Set;for(const l of e)for(const e of l.fields)if(t.has(e)){const s=t.get(e),o=l,r=[s.name,o.name].sort().join(\"|\");if(n.has(r))continue;i.push([s,o]),n.add(r),t.set(e,o)}else t.set(e,l);const s=new Set(i.flat()),o=new Set(e);for(const l of s)o.delete(l);const r=new Map,a=new Map;for(const l of new Set(i.flat())){const e=Symbol(l.name);r.set(e,new Set([l])),a.set(l,e)}for(const[l,u]of i){const e=a.get(l),t=a.get(u);if(e===t)continue;const i=r.get(e),n=r.get(t);for(const s of n)i.add(s),a.set(s,e);r.delete(t)}return[[...r.values()].map((e=>[...e])),[...o]]}_joinFieldGroupContingencies(e){const t=e.slice(),i=t.shift();let n=t.shift(),s=this._generateJoinKey(i.fields,n.fields),o=new Set([...i.fields,...n.fields]),r=new Map;for(const a of i.contingencies){const[e]=this._hashContingency(a,s.codedValueFields,!0);r.has(e)?r.get(e).push(a):r.set(e,[a])}for(;t.length>0;){const e=new Map,i=t.shift(),l=this._generateJoinKey(o,i.fields);for(const t of n.contingencies){const[i,n]=this._hashContingency(t,s.codedValueFields),o=n?this._findMatchingContingenciesWithAnyHashMask(r,i):r.get(i);if(r.has(j)&&o.push(...this._findMatchingContingenciesContainingAny(t,r.get(j),s.codedValueFields)),!a(o))for(const r of o){const i=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(r,t,s.rangeFields):this._joinContingencies(r,t);if(a(i))break;const[n]=this._hashContingency(i,l.codedValueFields,!0);e.has(n)?e.get(n).push(i):e.set(n,[i])}}r=e,n=i,s=l,o=new Set([...o,...n.fields])}const u=[];for(const c of n.contingencies){const[e,t]=this._hashContingency(c,s.codedValueFields),i=t?this._findMatchingContingenciesWithAnyHashMask(r,e):r.get(e);if(r.has(j)&&i.push(...this._findMatchingContingenciesContainingAny(c,r.get(j),s.codedValueFields)),!a(i))for(const n of i){const e=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(n,c,s.rangeFields):this._joinContingencies(n,c);l(e)&&u.push(e)}}return u}_joinContingencies(e,t){const i={values:{...e.values,...t.values}};for(const[n,s]of Object.entries(i.values))\"any\"===s.objectType&&l(e.values[n])&&(i.values[n]=e.values[n]);return i}_joinContingenciesWithRangeDomains(e,t,i){const n=this._joinContingencies(e,t);for(const s of i){const i=e.values[s],o=t.values[s],{leftIsNull:r,rightIsNull:a,bothAreNull:l,leftIsAny:u,rightIsAny:c,bothAreAny:p,leftIsRange:d,rightIsRange:h}=this._compareObjectTypes(i.objectType,o.objectType);if(l||p)continue;if(r&&c||a&&u){n.values[s]=new f({objectType:\"null\"});continue}if(r&&h||a&&d)return null;u?(i.minValue=-1/0,i.maxValue=1/0):c&&(o.minValue=-1/0,o.maxValue=1/0);const m=Math.max(i.minValue,o.minValue),g=Math.min(i.maxValue,o.maxValue);if(m>g)return null;n.values[s]=new f({objectType:\"range\",minValue:m,maxValue:g})}return n}_findMatchingContingenciesContainingAny(e,t,i){return t.filter((t=>i.every((i=>{const n=t.values[i],s=e.values[i];return\"any\"===n.objectType||\"any\"===s.objectType||n.codedValue?.code===s.codedValue?.code}))))}_findMatchingContingenciesWithAnyHashMask(e,t){const i=RegExp(`${t}$`),n=[];for(const[s,o]of e){if(s===j)break;i.test(s)&&n.push(...o)}return n}_generateJoinKey(e,t){const i=Array.isArray(e)?new Set(e):e,n=Array.isArray(t)?new Set(t):t,s=i.size<n.size?i:n,o=s===i?n:i,r=new Set,l=new Set;for(const u of s)if(o.has(u)){const e=this.layer.getFieldDomain(u,{feature:this.feature});if(a(e))continue;switch(e.type){case\"coded-value\":r.add(u);break;case\"range\":l.add(u)}}return{codedValueFields:[...r],rangeFields:[...l]}}_hashContingency(e,t,i=!1){if(t.length<1)return[x,!1];const n=[];let s=!1;for(const o of t){const t=e.values[o];if(\"any\"===t.objectType){if(i)return[j,!0];s=!0,n.push(`${o}:.*`)}else\"null\"===t.objectType?n.push(`${o}:${w}`):n.push(`${o}:${t.codedValue?.code}`)}return[n.sort().join(\"&\"),s]}_compareObjectTypes(e,t){return{leftIsNull:\"null\"===e,rightIsNull:\"null\"===t,bothAreNull:\"null\"===e&&\"null\"===t,leftIsAny:\"any\"===e,rightIsAny:\"any\"===t,bothAreAny:\"any\"===e&&\"any\"===t,leftIsRange:\"range\"===e,rightIsRange:\"range\"===t}}};e([p({readOnly:!0})],I.prototype,\"allInputFields\",null),e([p()],I.prototype,\"_layerFieldsByName\",null),e([p()],I.prototype,\"_inputFieldCache\",void 0),e([p()],I.prototype,\"contingencyConstraintViolations\",void 0),e([p()],I.prototype,\"feature\",null),e([p()],I.prototype,\"fieldsWithContingentValues\",null),e([p({type:h})],I.prototype,\"formTemplate\",null),e([p({readOnly:!0})],I.prototype,\"inputFields\",null),e([p()],I.prototype,\"joinedContingentValues\",null),e([p()],I.prototype,\"layer\",null),e([p()],I.prototype,\"messages\",void 0),e([p()],I.prototype,\"spatialReference\",null),e([p()],I.prototype,\"state\",null),e([p()],I.prototype,\"strict\",void 0),e([p()],I.prototype,\"submittable\",null),e([p()],I.prototype,\"valid\",null),e([p()],I.prototype,\"getValues\",null),e([p()],I.prototype,\"submit\",null),I=e([d(b)],I);const T=e=>!!e.inputFields,k=e=>\"group\"===e.type,A=(e,t,i)=>{l(t)&&e.set(t,i)},M=I;export{M as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}