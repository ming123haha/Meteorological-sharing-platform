{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport { isSome as r } from \"../core/maybe.js\";\nimport { eachAlwaysValues as s } from \"../core/promiseUtils.js\";\nimport \"../core/Logger.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/set.js\";\nimport { subclass as i } from \"../core/accessorSupport/decorators/subclass.js\";\n\nconst p = p => {\n  let a = class extends p {\n    async fetchPopupFeatures(e, r) {\n      await this.when();\n\n      const {\n        location: i,\n        queryArea: p,\n        layerViewsAndGraphics: a,\n        clientOnlyGraphics: t\n      } = await this._prepareFetchPopupFeatures(e, r),\n            o = Promise.resolve(t),\n            c = this._queryLayerPopupFeatures(p, a, r),\n            n = c.map(e => e.promise);\n\n      return {\n        location: i,\n        clientOnlyGraphics: t,\n        allGraphicsPromise: s([o, ...n]).then(e => Array.from(new Set(e.flat()))),\n        promisesPerLayerView: c\n      };\n    }\n\n    _queryLayerPopupFeatures(e, s, i) {\n      return s.map(({\n        layerView: s,\n        graphics: p\n      }) => {\n        const a = {\n          clientGraphics: p,\n          event: r(i) ? i.event : null,\n          signal: r(i) ? i.signal : null,\n          defaultPopupTemplateEnabled: !!r(i) && !!i.defaultPopupTemplateEnabled\n        },\n              t = s.fetchPopupFeatures(e, a);\n        return {\n          layerView: s,\n          promise: t\n        };\n      });\n    }\n\n    _isValidPopupGraphic(e, s) {\n      return e && !!e.getEffectivePopupTemplate(r(s) && s.defaultPopupTemplateEnabled);\n    }\n\n    async _prepareFetchPopupFeatures(e, r) {\n      const {\n        clientGraphics: s,\n        queryArea: i,\n        location: p\n      } = await this._popupHitTestGraphics(e, r),\n            a = this._getFetchPopupLayerViews(),\n            {\n        layerViewsAndGraphics: t,\n        clientOnlyGraphics: o\n      } = this._graphicsPerFetchPopupLayerView(s, a);\n\n      return {\n        clientOnlyGraphics: o,\n        layerViewsAndGraphics: t,\n        queryArea: i,\n        location: p\n      };\n    }\n\n    async _popupHitTestGraphics(e, r) {\n      const {\n        results: s,\n        mapPoint: i\n      } = await this.popupHitTest(e),\n            p = s.filter(e => \"graphic\" === e.type && this._isValidPopupGraphic(e.graphic, r)),\n            a = p.length ? p[0].mapPoint : null;\n      return {\n        clientGraphics: p.map(e => e.graphic),\n        queryArea: i,\n        location: i || a\n      };\n    }\n\n    _getFetchPopupLayerViews() {\n      const e = [];\n      return this.allLayerViews.forEach(r => {\n        this._isValidPopupLayerView(r) && e.push(r);\n      }), r(this.graphicsView) && this._isValidPopupLayerView(this.graphicsView) && e.push(this.graphicsView), e.reverse();\n    }\n\n    _isValidPopupLayerView(e) {\n      return r(e) && (!(\"layer\" in e) || !e.suspended) && \"fetchPopupFeatures\" in e;\n    }\n\n    _graphicsPerFetchPopupLayerView(e, r) {\n      const s = [],\n            i = new Map(),\n            p = r.map(e => {\n        const r = [];\n        return \"layer\" in e ? i.set(e.layer, r) : i.set(e.graphics, r), {\n          layerView: e,\n          graphics: r\n        };\n      });\n\n      for (const a of e) {\n        const e = i.get(a.layer) || i.get(a.sourceLayer) || null;\n        e ? e.push(a) : s.push(a);\n      }\n\n      return {\n        layerViewsAndGraphics: p,\n        clientOnlyGraphics: s\n      };\n    }\n\n  };\n  return a = e([i(\"esri.views.PopupView\")], a), a;\n};\n\nexport { p as PopupView };","map":{"version":3,"names":["_","e","isSome","r","eachAlwaysValues","s","subclass","i","p","a","fetchPopupFeatures","when","location","queryArea","layerViewsAndGraphics","clientOnlyGraphics","t","_prepareFetchPopupFeatures","o","Promise","resolve","c","_queryLayerPopupFeatures","n","map","promise","allGraphicsPromise","then","Array","from","Set","flat","promisesPerLayerView","layerView","graphics","clientGraphics","event","signal","defaultPopupTemplateEnabled","_isValidPopupGraphic","getEffectivePopupTemplate","_popupHitTestGraphics","_getFetchPopupLayerViews","_graphicsPerFetchPopupLayerView","results","mapPoint","popupHitTest","filter","type","graphic","length","allLayerViews","forEach","_isValidPopupLayerView","push","graphicsView","reverse","suspended","Map","set","layer","get","sourceLayer","PopupView"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/PopupView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{isSome as r}from\"../core/maybe.js\";import{eachAlwaysValues as s}from\"../core/promiseUtils.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/set.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";const p=p=>{let a=class extends p{async fetchPopupFeatures(e,r){await this.when();const{location:i,queryArea:p,layerViewsAndGraphics:a,clientOnlyGraphics:t}=await this._prepareFetchPopupFeatures(e,r),o=Promise.resolve(t),c=this._queryLayerPopupFeatures(p,a,r),n=c.map((e=>e.promise));return{location:i,clientOnlyGraphics:t,allGraphicsPromise:s([o,...n]).then((e=>Array.from(new Set(e.flat())))),promisesPerLayerView:c}}_queryLayerPopupFeatures(e,s,i){return s.map((({layerView:s,graphics:p})=>{const a={clientGraphics:p,event:r(i)?i.event:null,signal:r(i)?i.signal:null,defaultPopupTemplateEnabled:!!r(i)&&!!i.defaultPopupTemplateEnabled},t=s.fetchPopupFeatures(e,a);return{layerView:s,promise:t}}))}_isValidPopupGraphic(e,s){return e&&!!e.getEffectivePopupTemplate(r(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,r){const{clientGraphics:s,queryArea:i,location:p}=await this._popupHitTestGraphics(e,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:t,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(s,a);return{clientOnlyGraphics:o,layerViewsAndGraphics:t,queryArea:i,location:p}}async _popupHitTestGraphics(e,r){const{results:s,mapPoint:i}=await this.popupHitTest(e),p=s.filter((e=>\"graphic\"===e.type&&this._isValidPopupGraphic(e.graphic,r))),a=p.length?p[0].mapPoint:null;return{clientGraphics:p.map((e=>e.graphic)),queryArea:i,location:i||a}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((r=>{this._isValidPopupLayerView(r)&&e.push(r)})),r(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return r(e)&&(!(\"layer\"in e)||!e.suspended)&&\"fetchPopupFeatures\"in e}_graphicsPerFetchPopupLayerView(e,r){const s=[],i=new Map,p=r.map((e=>{const r=[];return\"layer\"in e?i.set(e.layer,r):i.set(e.graphics,r),{layerView:e,graphics:r}}));for(const a of e){const e=i.get(a.layer)||i.get(a.sourceLayer)||null;e?e.push(a):s.push(a)}return{layerViewsAndGraphics:p,clientOnlyGraphics:s}}};return a=e([i(\"esri.views.PopupView\")],a),a};export{p as PopupView};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,wBAAlB;AAA2C,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,kBAAvB;AAA0C,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,yBAAjC;AAA2D,OAAM,mBAAN;AAA0B,OAAM,uCAAN;AAA8C,OAAM,uBAAN;AAA8B,OAAM,gBAAN;AAAuB,OAAM,gCAAN;AAAuC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,gDAAzB;;AAA0E,MAAMC,CAAC,GAACA,CAAC,IAAE;EAAC,IAAIC,CAAC,GAAC,cAAcD,CAAd,CAAe;IAAyB,MAAlBE,kBAAkB,CAACT,CAAD,EAAGE,CAAH,EAAK;MAAC,MAAM,KAAKQ,IAAL,EAAN;;MAAkB,MAAK;QAACC,QAAQ,EAACL,CAAV;QAAYM,SAAS,EAACL,CAAtB;QAAwBM,qBAAqB,EAACL,CAA9C;QAAgDM,kBAAkB,EAACC;MAAnE,IAAsE,MAAM,KAAKC,0BAAL,CAAgChB,CAAhC,EAAkCE,CAAlC,CAAjF;MAAA,MAAsHe,CAAC,GAACC,OAAO,CAACC,OAAR,CAAgBJ,CAAhB,CAAxH;MAAA,MAA2IK,CAAC,GAAC,KAAKC,wBAAL,CAA8Bd,CAA9B,EAAgCC,CAAhC,EAAkCN,CAAlC,CAA7I;MAAA,MAAkLoB,CAAC,GAACF,CAAC,CAACG,GAAF,CAAOvB,CAAC,IAAEA,CAAC,CAACwB,OAAZ,CAApL;;MAA0M,OAAM;QAACb,QAAQ,EAACL,CAAV;QAAYQ,kBAAkB,EAACC,CAA/B;QAAiCU,kBAAkB,EAACrB,CAAC,CAAC,CAACa,CAAD,EAAG,GAAGK,CAAN,CAAD,CAAD,CAAYI,IAAZ,CAAkB1B,CAAC,IAAE2B,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQ7B,CAAC,CAAC8B,IAAF,EAAR,CAAX,CAArB,CAApD;QAAyGC,oBAAoB,EAACX;MAA9H,CAAN;IAAuI;;IAAAC,wBAAwB,CAACrB,CAAD,EAAGI,CAAH,EAAKE,CAAL,EAAO;MAAC,OAAOF,CAAC,CAACmB,GAAF,CAAO,CAAC;QAACS,SAAS,EAAC5B,CAAX;QAAa6B,QAAQ,EAAC1B;MAAtB,CAAD,KAA4B;QAAC,MAAMC,CAAC,GAAC;UAAC0B,cAAc,EAAC3B,CAAhB;UAAkB4B,KAAK,EAACjC,CAAC,CAACI,CAAD,CAAD,GAAKA,CAAC,CAAC6B,KAAP,GAAa,IAArC;UAA0CC,MAAM,EAAClC,CAAC,CAACI,CAAD,CAAD,GAAKA,CAAC,CAAC8B,MAAP,GAAc,IAA/D;UAAoEC,2BAA2B,EAAC,CAAC,CAACnC,CAAC,CAACI,CAAD,CAAH,IAAQ,CAAC,CAACA,CAAC,CAAC+B;QAA5G,CAAR;QAAA,MAAiJtB,CAAC,GAACX,CAAC,CAACK,kBAAF,CAAqBT,CAArB,EAAuBQ,CAAvB,CAAnJ;QAA6K,OAAM;UAACwB,SAAS,EAAC5B,CAAX;UAAaoB,OAAO,EAACT;QAArB,CAAN;MAA8B,CAA/O,CAAP;IAAyP;;IAAAuB,oBAAoB,CAACtC,CAAD,EAAGI,CAAH,EAAK;MAAC,OAAOJ,CAAC,IAAE,CAAC,CAACA,CAAC,CAACuC,yBAAF,CAA4BrC,CAAC,CAACE,CAAD,CAAD,IAAMA,CAAC,CAACiC,2BAApC,CAAZ;IAA6E;;IAAgC,MAA1BrB,0BAA0B,CAAChB,CAAD,EAAGE,CAAH,EAAK;MAAC,MAAK;QAACgC,cAAc,EAAC9B,CAAhB;QAAkBQ,SAAS,EAACN,CAA5B;QAA8BK,QAAQ,EAACJ;MAAvC,IAA0C,MAAM,KAAKiC,qBAAL,CAA2BxC,CAA3B,EAA6BE,CAA7B,CAArD;MAAA,MAAqFM,CAAC,GAAC,KAAKiC,wBAAL,EAAvF;MAAA,MAAuH;QAAC5B,qBAAqB,EAACE,CAAvB;QAAyBD,kBAAkB,EAACG;MAA5C,IAA+C,KAAKyB,+BAAL,CAAqCtC,CAArC,EAAuCI,CAAvC,CAAtK;;MAAgN,OAAM;QAACM,kBAAkB,EAACG,CAApB;QAAsBJ,qBAAqB,EAACE,CAA5C;QAA8CH,SAAS,EAACN,CAAxD;QAA0DK,QAAQ,EAACJ;MAAnE,CAAN;IAA4E;;IAA2B,MAArBiC,qBAAqB,CAACxC,CAAD,EAAGE,CAAH,EAAK;MAAC,MAAK;QAACyC,OAAO,EAACvC,CAAT;QAAWwC,QAAQ,EAACtC;MAApB,IAAuB,MAAM,KAAKuC,YAAL,CAAkB7C,CAAlB,CAAlC;MAAA,MAAuDO,CAAC,GAACH,CAAC,CAAC0C,MAAF,CAAU9C,CAAC,IAAE,cAAYA,CAAC,CAAC+C,IAAd,IAAoB,KAAKT,oBAAL,CAA0BtC,CAAC,CAACgD,OAA5B,EAAoC9C,CAApC,CAAjC,CAAzD;MAAA,MAAmIM,CAAC,GAACD,CAAC,CAAC0C,MAAF,GAAS1C,CAAC,CAAC,CAAD,CAAD,CAAKqC,QAAd,GAAuB,IAA5J;MAAiK,OAAM;QAACV,cAAc,EAAC3B,CAAC,CAACgB,GAAF,CAAOvB,CAAC,IAAEA,CAAC,CAACgD,OAAZ,CAAhB;QAAsCpC,SAAS,EAACN,CAAhD;QAAkDK,QAAQ,EAACL,CAAC,IAAEE;MAA9D,CAAN;IAAuE;;IAAAiC,wBAAwB,GAAE;MAAC,MAAMzC,CAAC,GAAC,EAAR;MAAW,OAAO,KAAKkD,aAAL,CAAmBC,OAAnB,CAA4BjD,CAAC,IAAE;QAAC,KAAKkD,sBAAL,CAA4BlD,CAA5B,KAAgCF,CAAC,CAACqD,IAAF,CAAOnD,CAAP,CAAhC;MAA0C,CAA1E,GAA6EA,CAAC,CAAC,KAAKoD,YAAN,CAAD,IAAsB,KAAKF,sBAAL,CAA4B,KAAKE,YAAjC,CAAtB,IAAsEtD,CAAC,CAACqD,IAAF,CAAO,KAAKC,YAAZ,CAAnJ,EAA6KtD,CAAC,CAACuD,OAAF,EAApL;IAAgM;;IAAAH,sBAAsB,CAACpD,CAAD,EAAG;MAAC,OAAOE,CAAC,CAACF,CAAD,CAAD,KAAO,EAAE,WAAUA,CAAZ,KAAgB,CAACA,CAAC,CAACwD,SAA1B,KAAsC,wBAAuBxD,CAApE;IAAsE;;IAAA0C,+BAA+B,CAAC1C,CAAD,EAAGE,CAAH,EAAK;MAAC,MAAME,CAAC,GAAC,EAAR;MAAA,MAAWE,CAAC,GAAC,IAAImD,GAAJ,EAAb;MAAA,MAAqBlD,CAAC,GAACL,CAAC,CAACqB,GAAF,CAAOvB,CAAC,IAAE;QAAC,MAAME,CAAC,GAAC,EAAR;QAAW,OAAM,WAAUF,CAAV,GAAYM,CAAC,CAACoD,GAAF,CAAM1D,CAAC,CAAC2D,KAAR,EAAczD,CAAd,CAAZ,GAA6BI,CAAC,CAACoD,GAAF,CAAM1D,CAAC,CAACiC,QAAR,EAAiB/B,CAAjB,CAA7B,EAAiD;UAAC8B,SAAS,EAAChC,CAAX;UAAaiC,QAAQ,EAAC/B;QAAtB,CAAvD;MAAgF,CAAtG,CAAvB;;MAAgI,KAAI,MAAMM,CAAV,IAAeR,CAAf,EAAiB;QAAC,MAAMA,CAAC,GAACM,CAAC,CAACsD,GAAF,CAAMpD,CAAC,CAACmD,KAAR,KAAgBrD,CAAC,CAACsD,GAAF,CAAMpD,CAAC,CAACqD,WAAR,CAAhB,IAAsC,IAA9C;QAAmD7D,CAAC,GAACA,CAAC,CAACqD,IAAF,CAAO7C,CAAP,CAAD,GAAWJ,CAAC,CAACiD,IAAF,CAAO7C,CAAP,CAAZ;MAAsB;;MAAA,OAAM;QAACK,qBAAqB,EAACN,CAAvB;QAAyBO,kBAAkB,EAACV;MAA5C,CAAN;IAAqD;;EAAx8D,CAArB;EAA+9D,OAAOI,CAAC,GAACR,CAAC,CAAC,CAACM,CAAC,CAAC,sBAAD,CAAF,CAAD,EAA6BE,CAA7B,CAAH,EAAmCA,CAA1C;AAA4C,CAAvhE;;AAAwhE,SAAOD,CAAC,IAAIuD,SAAZ"},"metadata":{},"sourceType":"module"}