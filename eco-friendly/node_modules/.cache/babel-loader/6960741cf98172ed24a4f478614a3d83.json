{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as o } from \"../Utils.js\";\nimport a from \"./WGLGeometryBrush.js\";\nimport { TextMaterialKey as r } from \"../materialKey/MaterialKey.js\";\nimport { PrimitiveType as n, DataType as i } from \"../../../../webgl/enums.js\";\n\nconst s = t => o(t.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: i.SHORT\n  }, {\n    location: 1,\n    name: \"a_id\",\n    count: 4,\n    type: i.UNSIGNED_BYTE\n  }, {\n    location: 2,\n    name: \"a_color\",\n    count: 4,\n    type: i.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 3,\n    name: \"a_haloColor\",\n    count: 4,\n    type: i.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 4,\n    name: \"a_texFontSize\",\n    count: 4,\n    type: i.UNSIGNED_BYTE\n  }, {\n    location: 5,\n    name: \"a_aux\",\n    count: 4,\n    type: i.BYTE\n  }, {\n    location: 6,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 7,\n    name: \"a_vertexOffset\",\n    count: 2,\n    type: i.SHORT\n  }, {\n    location: 8,\n    name: \"a_texCoords\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }]\n});\n\nclass m extends a {\n  dispose() {}\n\n  getGeometryType() {\n    return e.TEXT;\n  }\n\n  supportsSymbology(t) {\n    return !0;\n  }\n\n  drawGeometry(e, o, a, m) {\n    const {\n      context: l,\n      painter: p,\n      rendererInfo: u,\n      state: d,\n      passOptions: y,\n      requestRender: _,\n      allowDelayedRender: c\n    } = e,\n          f = r.load(a.materialKey),\n          E = t(y) && \"hittest\" === y.type,\n          {\n      bufferLayouts: N,\n      attributes: S\n    } = s(f),\n          T = p.materialManager.getMaterialProgram(e, f, \"materials/text\", S, m);\n    if (c && t(_) && !T.isCompiled) return void _();\n    l.useProgram(T);\n    let U = n.TRIANGLES;\n    E && (U = n.POINTS), this._setSharedUniforms(T, e, o), p.textureManager.bindTextures(l, T, f), T.setUniformMatrix3fv(\"u_displayMat3\", d.displayMat3), T.setUniformMatrix3fv(\"u_displayViewMat3\", d.displayViewMat3), this._setSizeVVUniforms(f, T, u, o), this._setColorAndOpacityVVUniforms(f, T, u), this._setRotationVVUniforms(f, T, u), T.setUniform1f(\"u_isHalo\", 1);\n    const x = a.target.getVAO(l, N, S),\n          G = a.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    l.bindVAO(x), l.drawElements(n.TRIANGLES, a.indexCount, i.UNSIGNED_INT, G), T.setUniform1f(\"u_isHalo\", 0), l.drawElements(U, a.indexCount, i.UNSIGNED_INT, G);\n  }\n\n}\n\nexport { m as default };","map":{"version":3,"names":["isSome","t","WGLGeometryType","e","createProgramDescriptor","o","a","TextMaterialKey","r","PrimitiveType","n","DataType","i","s","data","geometry","location","name","count","type","SHORT","UNSIGNED_BYTE","normalized","BYTE","UNSIGNED_SHORT","m","dispose","getGeometryType","TEXT","supportsSymbology","drawGeometry","context","l","painter","p","rendererInfo","u","state","d","passOptions","y","requestRender","_","allowDelayedRender","c","f","load","materialKey","E","bufferLayouts","N","attributes","S","T","materialManager","getMaterialProgram","isCompiled","useProgram","U","TRIANGLES","POINTS","_setSharedUniforms","textureManager","bindTextures","setUniformMatrix3fv","displayMat3","displayViewMat3","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","_setRotationVVUniforms","setUniform1f","x","target","getVAO","G","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","drawElements","indexCount","UNSIGNED_INT","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushText.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as o}from\"../Utils.js\";import a from\"./WGLGeometryBrush.js\";import{TextMaterialKey as r}from\"../materialKey/MaterialKey.js\";import{PrimitiveType as n,DataType as i}from\"../../../../webgl/enums.js\";const s=t=>o(t.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:i.SHORT},{location:1,name:\"a_id\",count:4,type:i.UNSIGNED_BYTE},{location:2,name:\"a_color\",count:4,type:i.UNSIGNED_BYTE,normalized:!0},{location:3,name:\"a_haloColor\",count:4,type:i.UNSIGNED_BYTE,normalized:!0},{location:4,name:\"a_texFontSize\",count:4,type:i.UNSIGNED_BYTE},{location:5,name:\"a_aux\",count:4,type:i.BYTE},{location:6,name:\"a_zoomRange\",count:2,type:i.UNSIGNED_SHORT},{location:7,name:\"a_vertexOffset\",count:2,type:i.SHORT},{location:8,name:\"a_texCoords\",count:2,type:i.UNSIGNED_SHORT}]});class m extends a{dispose(){}getGeometryType(){return e.TEXT}supportsSymbology(t){return!0}drawGeometry(e,o,a,m){const{context:l,painter:p,rendererInfo:u,state:d,passOptions:y,requestRender:_,allowDelayedRender:c}=e,f=r.load(a.materialKey),E=t(y)&&\"hittest\"===y.type,{bufferLayouts:N,attributes:S}=s(f),T=p.materialManager.getMaterialProgram(e,f,\"materials/text\",S,m);if(c&&t(_)&&!T.isCompiled)return void _();l.useProgram(T);let U=n.TRIANGLES;E&&(U=n.POINTS),this._setSharedUniforms(T,e,o),p.textureManager.bindTextures(l,T,f),T.setUniformMatrix3fv(\"u_displayMat3\",d.displayMat3),T.setUniformMatrix3fv(\"u_displayViewMat3\",d.displayViewMat3),this._setSizeVVUniforms(f,T,u,o),this._setColorAndOpacityVVUniforms(f,T,u),this._setRotationVVUniforms(f,T,u),T.setUniform1f(\"u_isHalo\",1);const x=a.target.getVAO(l,N,S),G=a.indexFrom*Uint32Array.BYTES_PER_ELEMENT;l.bindVAO(x),l.drawElements(n.TRIANGLES,a.indexCount,i.UNSIGNED_INT,G),T.setUniform1f(\"u_isHalo\",0),l.drawElements(U,a.indexCount,i.UNSIGNED_INT,G)}}export{m as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}