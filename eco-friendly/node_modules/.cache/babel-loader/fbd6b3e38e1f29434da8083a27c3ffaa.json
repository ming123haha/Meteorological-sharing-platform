{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { s as e } from \"../../../chunks/vec2.js\";\n\nclass t {\n  constructor(e, t, i) {\n    this.maxSize = e, this.tileInfoView = t, this.removedFunc = i, this._tilePerId = new Map(), this._tileKeysPerLevel = [];\n  }\n\n  has(e) {\n    return this._tilePerId.has(e);\n  }\n\n  get(e) {\n    return this._tilePerId.get(e);\n  }\n\n  pop(e) {\n    const t = this._tilePerId.get(e);\n\n    if (!t) return null;\n    const s = t.key.level,\n          r = this._tileKeysPerLevel[s];\n    i(this._tilePerId, e);\n\n    for (let i = 0; i < r.length; i++) if (r[i].id === e) {\n      r.splice(i, 1);\n      break;\n    }\n\n    return t.visible = !0, t;\n  }\n\n  add(e) {\n    e.visible = !1;\n    const t = e.key,\n          i = t.id;\n    if (this._tilePerId.has(i)) return;\n\n    this._tilePerId.set(i, e);\n\n    const s = t.level;\n    this._tileKeysPerLevel[s] || (this._tileKeysPerLevel[s] = []), this._tileKeysPerLevel[s].push(t);\n  }\n\n  prune(e, t, i) {\n    let s = this._tilePerId.size;\n    if (s <= this.maxSize) return;\n    let r = this._tileKeysPerLevel.length - 1;\n\n    for (; s > this.maxSize && r >= 0;) r !== e && (s = this._pruneAroundCenterTile(s, t, i, r)), r--;\n\n    s > this.maxSize && (s = this._pruneAroundCenterTile(s, t, i, e));\n  }\n\n  _pruneAroundCenterTile(t, i, s, r) {\n    const l = this._tileKeysPerLevel[r];\n    if (!l || 0 === l.length) return t;\n    const {\n      size: n,\n      origin: h\n    } = this.tileInfoView.tileInfo,\n          o = s * n[0],\n          u = s * n[1],\n          d = [0, 0],\n          _ = [0, 0];\n\n    for (l.sort((t, s) => (d[0] = h.x + o * (t.col + .5), d[1] = h.y - u * (t.row + .5), _[0] = h.x + o * (s.col + .5), _[1] = h.y - u * (s.row + .5), e(d, i) - e(_, i))); l.length > 0;) {\n      const e = l.pop();\n      if (this._removeTile(e.id), --t === this.maxSize) break;\n    }\n\n    return t;\n  }\n\n  _removeTile(e) {\n    const t = this._tilePerId.get(e);\n\n    this.removedFunc && this.removedFunc(t), i(this._tilePerId, e);\n  }\n\n}\n\nfunction i(e, t) {\n  e.delete(t);\n}\n\nexport { t as default };","map":{"version":3,"names":["s","e","t","constructor","i","maxSize","tileInfoView","removedFunc","_tilePerId","Map","_tileKeysPerLevel","has","get","pop","key","level","r","length","id","splice","visible","add","set","push","prune","size","_pruneAroundCenterTile","l","n","origin","h","tileInfo","o","u","d","_","sort","x","col","y","row","_removeTile","delete","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/tiling/TileCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../chunks/vec2.js\";class t{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const s=t.key.level,r=this._tileKeysPerLevel[s];i(this._tilePerId,e);for(let i=0;i<r.length;i++)if(r[i].id===e){r.splice(i,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t)}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&r>=0;)r!==e&&(s=this._pruneAroundCenterTile(s,t,i,r)),r--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e))}_pruneAroundCenterTile(t,i,s,r){const l=this._tileKeysPerLevel[r];if(!l||0===l.length)return t;const{size:n,origin:h}=this.tileInfoView.tileInfo,o=s*n[0],u=s*n[1],d=[0,0],_=[0,0];for(l.sort(((t,s)=>(d[0]=h.x+o*(t.col+.5),d[1]=h.y-u*(t.row+.5),_[0]=h.x+o*(s.col+.5),_[1]=h.y-u*(s.row+.5),e(d,i)-e(_,i))));l.length>0;){const e=l.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),i(this._tilePerId,e)}}function i(e,t){e.delete(t)}export{t as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}