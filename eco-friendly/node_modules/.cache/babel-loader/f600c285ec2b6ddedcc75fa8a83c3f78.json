{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { getAssetUrl as e } from \"../../assets.js\";\nimport t from \"../../Color.js\";\nimport r from \"../../request.js\";\nimport o from \"../../core/ItemCache.js\";\nimport { pt2px as s } from \"../../core/screenUtils.js\";\nimport { getCIMSymbolColor as i } from \"./cimSymbolUtils.js\";\nconst n = \"picture-fill\",\n      l = \"simple-fill\",\n      c = \"simple-line\",\n      a = \"simple-marker\",\n      m = \"text\",\n      p = \"cim\",\n      u = new o(1e3);\n\nfunction f(t) {\n  const r = t.style;\n  let o = null;\n  if (t) switch (t.type) {\n    case a:\n      \"cross\" !== r && \"x\" !== r && (o = t.color);\n      break;\n\n    case l:\n      \"solid\" === r ? o = t.color : \"none\" !== r && (o = {\n        type: \"pattern\",\n        x: 0,\n        y: 0,\n        src: e(`esri/symbols/patterns/${r}.png`),\n        width: 5,\n        height: 5\n      });\n      break;\n\n    case n:\n      o = {\n        type: \"pattern\",\n        src: t.url,\n        width: s(t.width) * t.xscale,\n        height: s(t.height) * t.yscale,\n        x: s(t.xoffset),\n        y: s(t.yoffset)\n      };\n      break;\n\n    case m:\n      o = t.color;\n      break;\n\n    case p:\n      o = i(t);\n  }\n  return o;\n}\n\nfunction h(e, t) {\n  const o = e + \"-\" + t;\n  return void 0 !== u.get(o) ? Promise.resolve(u.get(o)) : r(e, {\n    responseType: \"image\"\n  }).then(e => {\n    const r = e.data,\n          s = r.naturalWidth,\n          i = r.naturalHeight,\n          n = document.createElement(\"canvas\");\n    n.width = s, n.height = i;\n    const l = n.getContext(\"2d\");\n    l.fillStyle = t, l.fillRect(0, 0, s, i), l.globalCompositeOperation = \"destination-in\", l.drawImage(r, 0, 0);\n    const c = n.toDataURL();\n    return u.put(o, c), c;\n  });\n}\n\nfunction y(e) {\n  if (!e) return null;\n  let t = null;\n\n  switch (e.type) {\n    case l:\n    case n:\n    case a:\n      t = y(e.outline);\n      break;\n\n    case c:\n      {\n        const r = s(e.width);\n        null != e.style && \"none\" !== e.style && 0 !== r && (t = {\n          color: e.color,\n          style: d(e.style),\n          width: r,\n          cap: e.cap,\n          join: \"miter\" === e.join ? s(e.miterLimit) : e.join\n        });\n        break;\n      }\n\n    default:\n      t = null;\n  }\n\n  return t;\n}\n\nconst d = (() => {\n  const e = {};\n  return t => {\n    if (e[t]) return e[t];\n    const r = t.replace(/-/g, \"\");\n    return e[t] = r, r;\n  };\n})(),\n      g = new t([128, 128, 128]);\n\nexport { g as defaultThematicColor, d as dekebabifyLineStyle, f as getFill, h as getPatternUrlWithColor, y as getStroke };","map":{"version":3,"names":["getAssetUrl","e","t","r","o","pt2px","s","getCIMSymbolColor","i","n","l","c","a","m","p","u","f","style","type","color","x","y","src","width","height","url","xscale","yscale","xoffset","yoffset","h","get","Promise","resolve","responseType","then","data","naturalWidth","naturalHeight","document","createElement","getContext","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","put","outline","d","cap","join","miterLimit","replace","g","defaultThematicColor","dekebabifyLineStyle","getFill","getPatternUrlWithColor","getStroke"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/support/gfxUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import t from\"../../Color.js\";import r from\"../../request.js\";import o from\"../../core/ItemCache.js\";import{pt2px as s}from\"../../core/screenUtils.js\";import{getCIMSymbolColor as i}from\"./cimSymbolUtils.js\";const n=\"picture-fill\",l=\"simple-fill\",c=\"simple-line\",a=\"simple-marker\",m=\"text\",p=\"cim\",u=new o(1e3);function f(t){const r=t.style;let o=null;if(t)switch(t.type){case a:\"cross\"!==r&&\"x\"!==r&&(o=t.color);break;case l:\"solid\"===r?o=t.color:\"none\"!==r&&(o={type:\"pattern\",x:0,y:0,src:e(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case n:o={type:\"pattern\",src:t.url,width:s(t.width)*t.xscale,height:s(t.height)*t.yscale,x:s(t.xoffset),y:s(t.yoffset)};break;case m:o=t.color;break;case p:o=i(t)}return o}function h(e,t){const o=e+\"-\"+t;return void 0!==u.get(o)?Promise.resolve(u.get(o)):r(e,{responseType:\"image\"}).then((e=>{const r=e.data,s=r.naturalWidth,i=r.naturalHeight,n=document.createElement(\"canvas\");n.width=s,n.height=i;const l=n.getContext(\"2d\");l.fillStyle=t,l.fillRect(0,0,s,i),l.globalCompositeOperation=\"destination-in\",l.drawImage(r,0,0);const c=n.toDataURL();return u.put(o,c),c}))}function y(e){if(!e)return null;let t=null;switch(e.type){case l:case n:case a:t=y(e.outline);break;case c:{const r=s(e.width);null!=e.style&&\"none\"!==e.style&&0!==r&&(t={color:e.color,style:d(e.style),width:r,cap:e.cap,join:\"miter\"===e.join?s(e.miterLimit):e.join});break}default:t=null}return t}const d=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replace(/-/g,\"\");return e[t]=r,r}})(),g=new t([128,128,128]);export{g as defaultThematicColor,d as dekebabifyLineStyle,f as getFill,h as getPatternUrlWithColor,y as getStroke};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}