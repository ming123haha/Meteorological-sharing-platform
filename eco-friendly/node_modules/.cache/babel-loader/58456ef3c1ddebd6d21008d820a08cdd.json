{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isSome as s, isNone as r } from \"../../../core/maybe.js\";\nimport { property as e } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"./BaseRasterFunction.js\";\nimport i from \"./ExtractBandFunctionArguments.js\";\nimport { MissingBandAction as a } from \"./pixelUtils.js\";\nlet c = class extends n {\n  constructor() {\n    super(...arguments), this.functionName = \"ExtractBand\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"];\n  }\n\n  _bindSourceRasters() {\n    const {\n      sourceRasterInfos: t\n    } = this,\n          r = t[0],\n          {\n      bandCount: e\n    } = r,\n          {\n      bandIDs: o,\n      missingBandAction: n\n    } = this.functionArguments;\n    if (n === a.fail && o.some(t => t < 0 || t >= e)) return {\n      success: !1,\n      error: \"extract-band-function: invalid bandIDs\"\n    };\n    this.outputPixelType = this._getOutputPixelType(\"f32\");\n    const i = r.clone();\n    i.pixelType = this.outputPixelType;\n    const {\n      statistics: c,\n      histograms: u\n    } = i;\n    return s(c) && c.length && (i.statistics = o.map(t => c[t] || c[c.length - 1])), s(u) && u.length && (i.histograms = o.map(t => u[t] || u[u.length - 1])), this.rasterInfo = i, {\n      success: !0\n    };\n  }\n\n  _processPixels(t) {\n    const s = t.pixelBlocks?.[0];\n    if (r(s)) return null;\n    const e = s.pixels.length,\n          o = this.functionArguments.bandIDs.map(t => t >= e ? e - 1 : t);\n    return s.extractBands(o);\n  }\n\n};\nt([e({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], c.prototype, \"functionName\", void 0), t([e({\n  type: i,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], c.prototype, \"functionArguments\", void 0), t([e()], c.prototype, \"rasterArgumentNames\", void 0), c = t([o(\"esri.layers.support.rasterFunctions.ExtractBandFunction\")], c);\nconst u = c;\nexport { u as default };","map":{"version":3,"names":["_","t","isSome","s","isNone","r","property","e","subclass","o","n","i","MissingBandAction","a","c","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","bandCount","bandIDs","missingBandAction","fail","some","success","error","outputPixelType","_getOutputPixelType","clone","pixelType","statistics","histograms","u","length","map","rasterInfo","_processPixels","pixelBlocks","pixels","extractBands","json","write","name","prototype","type","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/ExtractBandFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isSome as s,isNone as r}from\"../../../core/maybe.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"./BaseRasterFunction.js\";import i from\"./ExtractBandFunctionArguments.js\";import{MissingBandAction as a}from\"./pixelUtils.js\";let c=class extends n{constructor(){super(...arguments),this.functionName=\"ExtractBand\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,r=t[0],{bandCount:e}=r,{bandIDs:o,missingBandAction:n}=this.functionArguments;if(n===a.fail&&o.some((t=>t<0||t>=e)))return{success:!1,error:\"extract-band-function: invalid bandIDs\"};this.outputPixelType=this._getOutputPixelType(\"f32\");const i=r.clone();i.pixelType=this.outputPixelType;const{statistics:c,histograms:u}=i;return s(c)&&c.length&&(i.statistics=o.map((t=>c[t]||c[c.length-1]))),s(u)&&u.length&&(i.histograms=o.map((t=>u[t]||u[u.length-1]))),this.rasterInfo=i,{success:!0}}_processPixels(t){const s=t.pixelBlocks?.[0];if(r(s))return null;const e=s.pixels.length,o=this.functionArguments.bandIDs.map((t=>t>=e?e-1:t));return s.extractBands(o)}};t([e({json:{write:!0,name:\"rasterFunction\"}})],c.prototype,\"functionName\",void 0),t([e({type:i,json:{write:!0,name:\"rasterFunctionArguments\"}})],c.prototype,\"functionArguments\",void 0),t([e()],c.prototype,\"rasterArgumentNames\",void 0),c=t([o(\"esri.layers.support.rasterFunctions.ExtractBandFunction\")],c);const u=c;export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}