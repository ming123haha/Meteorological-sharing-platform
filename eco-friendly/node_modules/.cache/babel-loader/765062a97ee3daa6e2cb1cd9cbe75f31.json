{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { s as e } from \"../../../../../../chunks/vec4.js\";\nimport { c as a } from \"../../../../../../chunks/vec4f64.js\";\nimport { Float4PassUniform as r } from \"../../shaderModules/Float4PassUniform.js\";\nimport { glsl as s } from \"../../shaderModules/interfaces.js\";\n\nfunction c(e) {\n  e.vertex.code.add(s`float screenSizePerspectiveMinSize(float size, vec4 factor) {\nfloat nonZeroSize = 1.0 - step(size, 0.0);\nreturn (\nfactor.z * (\n1.0 +\nnonZeroSize *\n2.0 * factor.w / (\nsize + (1.0 - nonZeroSize)\n)\n)\n);\n}`), e.vertex.code.add(s`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`), e.vertex.code.add(s`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\nreturn vec4(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z,\nparams.w\n);\n}`), e.vertex.code.add(s`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\nreturn max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}`), e.vertex.code.add(s`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`), e.vertex.code.add(s`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\nreturn mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / max(1e-5, size.y), 1.0), size, factor.y);\n}`), e.vertex.code.add(s`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`);\n}\n\nfunction t(e) {\n  e.uniforms.add(new r(\"screenSizePerspective\", e => o(e.screenSizePerspective)));\n}\n\nfunction i(e) {\n  e.uniforms.add(new r(\"screenSizePerspectiveAlignment\", e => o(e.screenSizePerspectiveAlignment || e.screenSizePerspective)));\n}\n\nfunction o(a) {\n  return e(n, a.parameters.divisor, a.parameters.offset, a.parameters.minPixelSize, a.paddingPixelsOverride);\n}\n\nconst n = a();\nexport { c as ScreenSizePerspective, t as addScreenSizePerspective, i as addScreenSizePerspectiveAlignment };","map":{"version":3,"names":["s","e","c","a","Float4PassUniform","r","glsl","vertex","code","add","t","uniforms","o","screenSizePerspective","i","screenSizePerspectiveAlignment","n","parameters","divisor","offset","minPixelSize","paddingPixelsOverride","ScreenSizePerspective","addScreenSizePerspective","addScreenSizePerspectiveAlignment"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../../../chunks/vec4.js\";import{c as a}from\"../../../../../../chunks/vec4f64.js\";import{Float4PassUniform as r}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";function c(e){e.vertex.code.add(s`float screenSizePerspectiveMinSize(float size, vec4 factor) {\nfloat nonZeroSize = 1.0 - step(size, 0.0);\nreturn (\nfactor.z * (\n1.0 +\nnonZeroSize *\n2.0 * factor.w / (\nsize + (1.0 - nonZeroSize)\n)\n)\n);\n}`),e.vertex.code.add(s`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`),e.vertex.code.add(s`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\nreturn vec4(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z,\nparams.w\n);\n}`),e.vertex.code.add(s`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\nreturn max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}`),e.vertex.code.add(s`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`),e.vertex.code.add(s`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\nreturn mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / max(1e-5, size.y), 1.0), size, factor.y);\n}`),e.vertex.code.add(s`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`)}function t(e){e.uniforms.add(new r(\"screenSizePerspective\",(e=>o(e.screenSizePerspective))))}function i(e){e.uniforms.add(new r(\"screenSizePerspectiveAlignment\",(e=>o(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function o(a){return e(n,a.parameters.divisor,a.parameters.offset,a.parameters.minPixelSize,a.paddingPixelsOverride)}const n=a();export{c as ScreenSizePerspective,t as addScreenSizePerspective,i as addScreenSizePerspectiveAlignment};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,kCAAlB;AAAqD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,0CAAlC;AAA6E,SAAOC,IAAI,IAAIN,CAAf,QAAqB,mCAArB;;AAAyD,SAASE,CAAT,CAAWD,CAAX,EAAa;EAACA,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACrR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAXiQ,GAW7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA,EAFI,CAX6P,EAa7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,EAPI,CAb6P,EAoB7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA,EAFI,CApB6P,EAsB7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA;AACA;AACA;AACA,EALI,CAtB6P,EA2B7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA,EAFI,CA3B6P,EA6B7PC,CAAC,CAACM,MAAF,CAASC,IAAT,CAAcC,GAAd,CAAkBT,CAAE;AACxB;AACA,EAFI,CA7B6P;AA+B7P;;AAAA,SAASU,CAAT,CAAWT,CAAX,EAAa;EAACA,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,IAAIJ,CAAJ,CAAM,uBAAN,EAA+BJ,CAAC,IAAEW,CAAC,CAACX,CAAC,CAACY,qBAAH,CAAnC,CAAf;AAA+E;;AAAA,SAASC,CAAT,CAAWb,CAAX,EAAa;EAACA,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,IAAIJ,CAAJ,CAAM,gCAAN,EAAwCJ,CAAC,IAAEW,CAAC,CAACX,CAAC,CAACc,8BAAF,IAAkCd,CAAC,CAACY,qBAArC,CAA5C,CAAf;AAA0H;;AAAA,SAASD,CAAT,CAAWT,CAAX,EAAa;EAAC,OAAOF,CAAC,CAACe,CAAD,EAAGb,CAAC,CAACc,UAAF,CAAaC,OAAhB,EAAwBf,CAAC,CAACc,UAAF,CAAaE,MAArC,EAA4ChB,CAAC,CAACc,UAAF,CAAaG,YAAzD,EAAsEjB,CAAC,CAACkB,qBAAxE,CAAR;AAAuG;;AAAA,MAAML,CAAC,GAACb,CAAC,EAAT;AAAY,SAAOD,CAAC,IAAIoB,qBAAZ,EAAkCZ,CAAC,IAAIa,wBAAvC,EAAgET,CAAC,IAAIU,iCAArE"},"metadata":{},"sourceType":"module"}