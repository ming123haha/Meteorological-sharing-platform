{"ast":null,"code":"import AMapLoader from '@amap/amap-jsapi-loader';\nexport default {\n  data() {\n    return {\n      marker: null,\n      value1: true,\n      map: null,\n      heatMap: null,\n      markers: [],\n      data: [{\n        \"lng\": 118.3093,\n        \"lat\": 32.3153,\n        //滁州市老年大学监测站\n        \"count\": 41\n      }, {\n        \"lng\": 118.3244,\n        \"lat\": 32.2786,\n        //滁州市人大宾馆\n        \"count\": 79\n      }, {\n        \"lng\": 118.3118,\n        \"lat\": 32.3038,\n        //滁州市市政府原办公楼\"\n        \"count\": 89\n      }, {\n        \"lng\": 110.35,\n        \"lat\": 20.02,\n        //滁州市市政府原办公楼\"\n        \"count\": 100\n      }, {\n        \"lng\": 110.33,\n        \"lat\": 19.98,\n        //滁州市市政府原办公楼\"\n        \"count\": 99\n      }, {\n        \"lng\": 110.72,\n        \"lat\": 19.61,\n        //滁州市市政府原办公楼\"\n        \"count\": 98\n      }, {\n        \"lng\": 110.31,\n        \"lat\": 19.68,\n        //滁州市市政府原办公楼\"\n        \"count\": 90\n      }]\n    };\n  },\n\n  mounted() {\n    //DOM初始化完成进行地图初始化\n    this.initMap();\n  },\n\n  methods: {\n    changValue() {\n      if (!this.value1) {\n        let data = [];\n        this.heatMap.setDataSet({\n          data: data,\n          max: 100\n        });\n      } else {\n        this.heatMap.setDataSet({\n          data: this.data,\n          max: 100\n        });\n      }\n    },\n\n    initMap() {\n      AMapLoader.load({\n        key: \"0e5904b2829e2e25ffcdecc5685b2209\",\n        // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: \"2.0\",\n        // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: ['AMap.ToolBar', 'AMap.Scale', 'AMap.MapType', 'AMap.Geolocation', 'AMap.HawkEye', 'AMap.HeatMap'] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n\n      }).then(AMap => {\n        this.map = new AMap.Map(\"container\", {\n          //设置地图容器id\n          resizeEnable: true,\n          //mapStyle: 'amap://styles/normal',\n          //viewMode:\"3D\",    //是否为3D地图模式\n          zoom: 10,\n          //初始化地图级别\n          center: [103.157403, 31.010268] //初始化地图中心点位置\n          // doubleClickZoom: true,\n          // 是否允许鼠标拖拽\n          //dragEnable: true,\n          //keyboardEnable: false,\n\n        }); // this.marker=new AMap.Map(\"container\",{  //设置地图容器id\n        //   resizeEnable: true,\n        //   mapStyle: 'amap://styles/normal',\n        //   viewMode:\"3D\",    //是否为3D地图模式\n        //   zoom:10,           //初始化地图级别\n        //   center:[118.3093\t,32.3153], //初始化地图中心点位置\n        //   doubleClickZoom: true,\n        //   // 是否允许鼠标拖拽\n        //   dragEnable: true,\n        //   keyboardEnable: false,\n        // });\n\n        var lnglats = [[103.157403, 31.010268], [103.165235, 31.013777], [103.164076, 31.012876], [103.16575, 31.013427], [103.166244, 31.014329], [103.166244, 31.014329], [103.167102, 31.01705], [103.167102, 31.01705], [103.170042, 31.020324], [103.172831, 31.022438], [103.178366, 31.025399], [103.179482, 31.030069]];\n        this.marker = new AMap.Marker({\n          position: new AMap.LngLat(103.157403, 31.010268),\n          map: this.map,\n          anchor: 'center',\n          //设置锚点\n          icon: '//vdata.amap.com/icons/b18/1/2.png' //offset: new AMap.Pixel(-15, -20), //设置偏移\n\n        });\n        console.log([this.marker]);\n        this.map.add([this.marker]); // 创建一个 Marker 实例：\n        // this.marker = new AMap.Marker(this.map,{\n        //   position: [118.3093, 32.3153], // 经纬度对象，也可以是经纬度构成的一维数组[116.39, 39.9]\n        //   title: '滁州'\n        // });\n        //\n        // this.map.add(this.marker)\n        // console.log(this.marker)\n        // 将 markers 添加到地图\n        //this.markers.push(marker)\n        // console.log(marker)\n        // // 将创建的点标记添加到已有的地图实例：\n        //this.map.add(marker);\n        // 移除已创建的 marker\n        //this.map.remove(marker);\n\n        this.heatMap = new AMap.HeatMap(this.map, {\n          radius: 50,\n          //给定半径\n          opacity: [0, 1],\n          gradient: {\n            1: '#FF4C2F',\n            0.8: '#FAA53F',\n            0.6: '#FFF100',\n            0.5: '#7DF675',\n            0.4: '#5CE182',\n            0.2: '#29CF6F'\n          }\n        });\n        this.heatMap.setDataSet({\n          data: this.data,\n          max: 100\n        }); // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件\n\n        this.map.addControl(new AMap.ToolBar()); // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺\n\n        this.map.addControl(new AMap.Scale()); // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图\n\n        this.map.addControl(new AMap.HawkEye({\n          isOpen: true\n        })); // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置\n\n        this.map.addControl(new AMap.Geolocation());\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiBA;AAEA;EACAA;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,aAJA;MAKAC,WALA;MAMAL;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,GAKA;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,CALA,EAUA;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,CAVA,EAeA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CAfA,EAoBA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CApBA,EAyBA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CAzBA,EA8BA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CA9BA;IANA;EA0CA,CA5CA;;EA6CAM;IACA;IACA;EAEA,CAjDA;;EAkDAC;IACAC;MACA;QACA;QACA;UACAR,UADA;UAEAS;QAFA;MAIA,CANA,MAMA;QACA;UACAT,eADA;UAEAS;QAFA;MAIA;IACA,CAdA;;IAiBAC;MACAC;QACAC,uCADA;QACA;QACAC,cAFA;QAEA;QACAC,2GAHA,CAGA;;MAHA,GAIAC,IAJA,CAIAC;QAEA;UAAA;UACAC,kBADA;UAEA;UACA;UACAC,QAJA;UAIA;UACAC,+BALA,CAKA;UACA;UACA;UACA;UACA;;QATA,GAFA,CAcA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAGA,eACA,uBADA,EAEA,uBAFA,EAGA,uBAHA,EAIA,sBAJA,EAKA,uBALA,EAMA,uBANA,EAOA,sBAPA,EAQA,sBARA,EASA,uBATA,EAUA,uBAVA,EAWA,uBAXA,EAYA,uBAZA;QAiBA;UACAC,gDADA;UAEAjB,aAFA;UAGAkB,gBAHA;UAGA;UACAC,0CAJA,CAKA;;QALA;QAQAC;QACA,4BArDA,CAuDA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;QACA;QAEA;QACA;QACA;QAEA;QACA;;QAEA;UACAC,UADA;UACA;UACAC,eAFA;UAGAC;YACA,YADA;YAEA,cAFA;YAGA,cAHA;YAIA,cAJA;YAKA,cALA;YAMA;UANA;QAHA;QAYA;UACA1B,eADA;UAEAS;QAFA,GAtFA,CA0FA;;QACA,wCA3FA,CA6FA;;QACA,sCA9FA,CAgGA;;QACA;UAAAkB;QAAA,IAjGA,CAoGA;;QACA;MAMA,CA/GA,EA+GAC,KA/GA,CA+GAC;QACAN;MACA,CAjHA;IAkHA;;EApIA;AAlDA","names":["data","marker","value1","map","heatMap","markers","mounted","methods","changValue","max","initMap","AMapLoader","key","version","plugins","then","AMap","resizeEnable","zoom","center","position","anchor","icon","console","radius","opacity","gradient","isOpen","catch","e"],"sourceRoot":"src/views","sources":["TrackingOfPollutants.vue"],"sourcesContent":["<template>\r\n  <div class=\"home_div\">\r\n    <div class=\"map_title\">\r\n      <el-switch\r\n          v-model=\"value1\"\r\n          active-text=\"显示热力图\"\r\n          inactive-text=\"\"\r\n          @change=\"changValue()\">\r\n      </el-switch>\r\n    </div>\r\n    <div id=\"container\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport AMapLoader from '@amap/amap-jsapi-loader';\r\n\r\nexport default{\r\n  data(){\r\n    return{\r\n      marker:null,\r\n      value1: true,\r\n      map:null,\r\n      heatMap:null,\r\n      markers: [],\r\n      data:[{\r\n        \"lng\": 118.3093,\r\n        \"lat\": 32.3153,  //滁州市老年大学监测站\r\n        \"count\": 41\r\n      },\r\n        {\r\n          \"lng\": 118.3244,\r\n          \"lat\": 32.2786,  //滁州市人大宾馆\r\n          \"count\": 79\r\n        },\r\n        {\r\n          \"lng\": 118.3118,\r\n          \"lat\": 32.3038,  //滁州市市政府原办公楼\"\r\n          \"count\": 89\r\n        },\r\n        {\r\n          \"lng\": 110.35,\r\n          \"lat\": 20.02,  //滁州市市政府原办公楼\"\r\n          \"count\": 100\r\n        },\r\n        {\r\n          \"lng\": 110.33,\r\n          \"lat\": 19.98,  //滁州市市政府原办公楼\"\r\n          \"count\": 99\r\n        },\r\n        {\r\n          \"lng\": 110.72,\r\n          \"lat\": 19.61,  //滁州市市政府原办公楼\"\r\n          \"count\": 98\r\n        },\r\n        {\r\n          \"lng\": 110.31,\r\n          \"lat\": 19.68,  //滁州市市政府原办公楼\"\r\n          \"count\": 90\r\n        }]\r\n    }\r\n  },\r\n  mounted(){\r\n    //DOM初始化完成进行地图初始化\r\n    this.initMap();\r\n\r\n  },\r\n  methods:{\r\n    changValue(){\r\n      if(!this.value1){\r\n        let data=[]\r\n        this.heatMap.setDataSet({\r\n          data: data,\r\n          max: 100\r\n        });\r\n      }else{\r\n        this.heatMap.setDataSet({\r\n          data: this.data,\r\n          max: 100\r\n        });\r\n      }\r\n    },\r\n\r\n\r\n    initMap(){\r\n      AMapLoader.load({\r\n        key:\"0e5904b2829e2e25ffcdecc5685b2209\",             // 申请好的Web端开发者Key，首次调用 load 时必填\r\n        version:\"2.0\",      // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\r\n        plugins:['AMap.ToolBar','AMap.Scale','AMap.MapType','AMap.Geolocation','AMap.HawkEye','AMap.HeatMap'],       // 需要使用的的插件列表，如比例尺'AMap.Scale'等\r\n      }).then((AMap)=>{\r\n\r\n        this.map = new AMap.Map(\"container\",{  //设置地图容器id\r\n          resizeEnable: true,\r\n          //mapStyle: 'amap://styles/normal',\r\n          //viewMode:\"3D\",    //是否为3D地图模式\r\n          zoom:10,           //初始化地图级别\r\n          center:[103.157403\t,31.010268], //初始化地图中心点位置\r\n         // doubleClickZoom: true,\r\n          // 是否允许鼠标拖拽\r\n          //dragEnable: true,\r\n          //keyboardEnable: false,\r\n        });\r\n\r\n        // this.marker=new AMap.Map(\"container\",{  //设置地图容器id\r\n        //   resizeEnable: true,\r\n        //   mapStyle: 'amap://styles/normal',\r\n        //   viewMode:\"3D\",    //是否为3D地图模式\r\n        //   zoom:10,           //初始化地图级别\r\n        //   center:[118.3093\t,32.3153], //初始化地图中心点位置\r\n        //   doubleClickZoom: true,\r\n        //   // 是否允许鼠标拖拽\r\n        //   dragEnable: true,\r\n        //   keyboardEnable: false,\r\n        // });\r\n\r\n\r\n        var lnglats = [\r\n          [103.157403,31.010268],\r\n          [103.165235,31.013777],\r\n          [103.164076,31.012876],\r\n          [103.16575,31.013427],\r\n          [103.166244,31.014329],\r\n          [103.166244,31.014329],\r\n          [103.167102,31.01705],\r\n          [103.167102,31.01705],\r\n          [103.170042,31.020324],\r\n          [103.172831,31.022438],\r\n          [103.178366,31.025399],\r\n          [103.179482,31.030069],\r\n\r\n        ];\r\n\r\n\r\n        this.marker = new AMap.Marker({\r\n            position: new AMap.LngLat(103.157403,31.010268),\r\n            map: this.map,\r\n            anchor: 'center', //设置锚点\r\n            icon:'//vdata.amap.com/icons/b18/1/2.png',\r\n            //offset: new AMap.Pixel(-15, -20), //设置偏移\r\n          })\r\n\r\n        console.log([this.marker])\r\n        this.map.add([this.marker]);\r\n\r\n        // 创建一个 Marker 实例：\r\n        // this.marker = new AMap.Marker(this.map,{\r\n        //   position: [118.3093, 32.3153], // 经纬度对象，也可以是经纬度构成的一维数组[116.39, 39.9]\r\n        //   title: '滁州'\r\n        // });\r\n        //\r\n        // this.map.add(this.marker)\r\n        // console.log(this.marker)\r\n\r\n        // 将 markers 添加到地图\r\n        //this.markers.push(marker)\r\n\r\n        // console.log(marker)\r\n        // // 将创建的点标记添加到已有的地图实例：\r\n        //this.map.add(marker);\r\n\r\n        // 移除已创建的 marker\r\n        //this.map.remove(marker);\r\n\r\n        this.heatMap = new AMap.HeatMap(this.map, {\r\n          radius: 50, //给定半径\r\n          opacity: [0, 1],\r\n          gradient:{\r\n            1: '#FF4C2F',\r\n            0.8: '#FAA53F',\r\n            0.6: '#FFF100',\r\n            0.5: '#7DF675',\r\n            0.4: '#5CE182',\r\n            0.2: '#29CF6F',\r\n          }\r\n        });\r\n        this.heatMap.setDataSet({\r\n          data: this.data,\r\n          max: 100\r\n        });\r\n        // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件\r\n        this.map.addControl(new AMap.ToolBar());\r\n\r\n        // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺\r\n        this.map.addControl(new AMap.Scale());\r\n\r\n        // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图\r\n        this.map.addControl(new AMap.HawkEye({isOpen:true}));\r\n\r\n\r\n        // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置\r\n        this.map.addControl(new AMap.Geolocation());\r\n\r\n\r\n\r\n\r\n\r\n      }).catch(e=>{\r\n        console.log(e);\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n.home_div{\r\n  padding:0px;\r\n  margin: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n#container{\r\n  padding:0px;\r\n  margin: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  position:absolute;\r\n}\r\n.map_title{\r\n  position:absolute;\r\n  z-index: 1;\r\n  width: 100%;\r\n  height: 50px;\r\n\r\n}\r\n.amap-logo{\r\n  display: none;\r\n}\r\n.amap-copyright {\r\n  opacity:0;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}