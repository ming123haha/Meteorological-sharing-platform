{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from \"../../Color.js\";\n\nclass a {\n  applyColorSubstituition(t, a) {\n    if (!a) return t;\n    this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement(\"canvas\"));\n    const {\n      width: e,\n      height: n\n    } = t,\n          o = this._rasterizationCanvas,\n          r = o.getContext(\"2d\");\n    t !== o && (o.width = e, o.height = n, r.drawImage(t, 0, 0, e, n));\n    const i = r.getImageData(0, 0, e, n).data;\n    if (a) for (const l of a) if (l && l.oldColor && 4 === l.oldColor.length && l.newColor && 4 === l.newColor.length) {\n      const [t, a, e, n] = l.oldColor,\n            [o, r, s, g] = l.newColor;\n      if (t === o && a === r && e === s && n === g) continue;\n\n      for (let l = 0; l < i.length; l += 4) t === i[l] && a === i[l + 1] && e === i[l + 2] && n === i[l + 3] && (i[l] = o, i[l + 1] = r, i[l + 2] = s, i[l + 3] = g);\n    }\n    const s = new ImageData(i, e, n);\n    return r.putImageData(s, 0, 0), o;\n  }\n\n  tintImageData(a, e) {\n    if (!e) return a;\n    this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement(\"canvas\"));\n    const {\n      width: n,\n      height: o\n    } = a,\n          r = this._rasterizationCanvas,\n          i = r.getContext(\"2d\");\n    a !== r && (r.width = n, r.height = o, i.drawImage(a, 0, 0, n, o));\n    const s = i.getImageData(0, 0, n, o),\n          l = new Uint8Array(s.data),\n          g = new t(e),\n          h = [g.r / 255, g.g / 255, g.b / 255, g.a];\n\n    for (let t = 0; t < l.length; t += 4) l[t + 0] *= h[0], l[t + 1] *= h[1], l[t + 2] *= h[2], l[t + 3] *= h[3];\n\n    const d = new ImageData(new Uint8ClampedArray(l.buffer), n, o);\n    return i.putImageData(d, 0, 0), r;\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"names":["t","a","applyColorSubstituition","_rasterizationCanvas","document","createElement","width","e","height","n","o","r","getContext","drawImage","i","getImageData","data","l","oldColor","length","newColor","s","g","ImageData","putImageData","tintImageData","Uint8Array","h","b","d","Uint8ClampedArray","buffer","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/CIMImageColorSubstitutionHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../Color.js\";class a{applyColorSubstituition(t,a){if(!a)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\"));const{width:e,height:n}=t,o=this._rasterizationCanvas,r=o.getContext(\"2d\");t!==o&&(o.width=e,o.height=n,r.drawImage(t,0,0,e,n));const i=r.getImageData(0,0,e,n).data;if(a)for(const l of a)if(l&&l.oldColor&&4===l.oldColor.length&&l.newColor&&4===l.newColor.length){const[t,a,e,n]=l.oldColor,[o,r,s,g]=l.newColor;if(t===o&&a===r&&e===s&&n===g)continue;for(let l=0;l<i.length;l+=4)t===i[l]&&a===i[l+1]&&e===i[l+2]&&n===i[l+3]&&(i[l]=o,i[l+1]=r,i[l+2]=s,i[l+3]=g)}const s=new ImageData(i,e,n);return r.putImageData(s,0,0),o}tintImageData(a,e){if(!e)return a;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\"));const{width:n,height:o}=a,r=this._rasterizationCanvas,i=r.getContext(\"2d\");a!==r&&(r.width=n,r.height=o,i.drawImage(a,0,0,n,o));const s=i.getImageData(0,0,n,o),l=new Uint8Array(s.data),g=new t(e),h=[g.r/255,g.g/255,g.b/255,g.a];for(let t=0;t<l.length;t+=4)l[t+0]*=h[0],l[t+1]*=h[1],l[t+2]*=h[2],l[t+3]*=h[3];const d=new ImageData(new Uint8ClampedArray(l.buffer),n,o);return i.putImageData(d,0,0),r}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}