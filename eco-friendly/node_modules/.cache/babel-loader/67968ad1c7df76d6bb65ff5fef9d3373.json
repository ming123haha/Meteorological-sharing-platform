{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../request.js\";\nimport e from \"../../core/Error.js\";\nimport i from \"../../core/Logger.js\";\nimport { urlToObject as s, objectToQuery as a } from \"../../core/urlUtils.js\";\nconst h = i.getLogger(\"esri.layers.support.SpriteSource\"),\n      r = 1.15;\n\nclass o {\n  constructor(t, e, i, s) {\n    this.baseURL = t, this.devicePixelRatio = e, this.maxTextureSize = i, this._spriteImageFormat = s, this._isRetina = !1, this._spritesData = {}, this.image = null, this.width = null, this.height = null, this.loadStatus = \"not-loaded\";\n  }\n\n  get spriteNames() {\n    const t = [];\n\n    for (const e in this._spritesData) t.push(e);\n\n    return t.sort(), t;\n  }\n\n  getSpriteInfo(t) {\n    return this._spritesData[t];\n  }\n\n  async load(t) {\n    if (this.baseURL) {\n      this.loadStatus = \"loading\";\n\n      try {\n        await this._loadSprites(t), this.loadStatus = \"loaded\";\n      } catch {\n        this.loadStatus = \"failed\";\n      }\n    } else this.loadStatus = \"failed\";\n  }\n\n  _loadSprites(i) {\n    this._isRetina = this.devicePixelRatio > r;\n    const o = s(this.baseURL),\n          l = o.query ? \"?\" + a(o.query) : \"\",\n          n = this._isRetina ? \"@2x\" : \"\",\n          d = `${o.path}${n}.${this._spriteImageFormat}${l}`,\n          g = `${o.path}${n}.json${l}`;\n    return Promise.all([t(g, i), t(d, {\n      responseType: \"image\",\n      ...i\n    })]).then(([t, i]) => {\n      const s = Object.keys(t.data);\n      if (!s || 0 === s.length || 1 === s.length && \"_ssl\" === s[0] || !i || !i.data) return this._spritesData = this.image = null, this.width = this.height = 0, null;\n      this._spritesData = t.data;\n      const a = i.data,\n            r = Math.max(this.maxTextureSize, 4096);\n\n      if (a.width > r || a.height > r) {\n        const t = `Sprite resource for style ${o.path} is bigger than the maximum allowed of ${r} pixels}`;\n        throw h.error(t), new e(\"SpriteSource\", t);\n      }\n\n      this.width = a.width, this.height = a.height;\n      const l = document.createElement(\"canvas\"),\n            n = l.getContext(\"2d\");\n      l.width = a.width, l.height = a.height, n.drawImage(a, 0, 0, a.width, a.height);\n      const d = n.getImageData(0, 0, a.width, a.height),\n            g = new Uint8Array(d.data);\n      let u;\n\n      for (let e = 0; e < g.length; e += 4) u = g[e + 3] / 255, g[e] = g[e] * u, g[e + 1] = g[e + 1] * u, g[e + 2] = g[e + 2] * u;\n\n      this.image = g;\n    });\n  }\n\n}\n\nexport { o as default };","map":{"version":3,"names":["t","e","i","urlToObject","s","objectToQuery","a","h","getLogger","r","o","constructor","baseURL","devicePixelRatio","maxTextureSize","_spriteImageFormat","_isRetina","_spritesData","image","width","height","loadStatus","spriteNames","push","sort","getSpriteInfo","load","_loadSprites","l","query","n","d","path","g","Promise","all","responseType","then","Object","keys","data","length","Math","max","error","document","createElement","getContext","drawImage","getImageData","Uint8Array","u","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/SpriteSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{urlToObject as s,objectToQuery as a}from\"../../core/urlUtils.js\";const h=i.getLogger(\"esri.layers.support.SpriteSource\"),r=1.15;class o{constructor(t,e,i,s){this.baseURL=t,this.devicePixelRatio=e,this.maxTextureSize=i,this._spriteImageFormat=s,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus=\"not-loaded\"}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData[t]}async load(t){if(this.baseURL){this.loadStatus=\"loading\";try{await this._loadSprites(t),this.loadStatus=\"loaded\"}catch{this.loadStatus=\"failed\"}}else this.loadStatus=\"failed\"}_loadSprites(i){this._isRetina=this.devicePixelRatio>r;const o=s(this.baseURL),l=o.query?\"?\"+a(o.query):\"\",n=this._isRetina?\"@2x\":\"\",d=`${o.path}${n}.${this._spriteImageFormat}${l}`,g=`${o.path}${n}.json${l}`;return Promise.all([t(g,i),t(d,{responseType:\"image\",...i})]).then((([t,i])=>{const s=Object.keys(t.data);if(!s||0===s.length||1===s.length&&\"_ssl\"===s[0]||!i||!i.data)return this._spritesData=this.image=null,this.width=this.height=0,null;this._spritesData=t.data;const a=i.data,r=Math.max(this.maxTextureSize,4096);if(a.width>r||a.height>r){const t=`Sprite resource for style ${o.path} is bigger than the maximum allowed of ${r} pixels}`;throw h.error(t),new e(\"SpriteSource\",t)}this.width=a.width,this.height=a.height;const l=document.createElement(\"canvas\"),n=l.getContext(\"2d\");l.width=a.width,l.height=a.height,n.drawImage(a,0,0,a.width,a.height);const d=n.getImageData(0,0,a.width,a.height),g=new Uint8Array(d.data);let u;for(let e=0;e<g.length;e+=4)u=g[e+3]/255,g[e]=g[e]*u,g[e+1]=g[e+1]*u,g[e+2]=g[e+2]*u;this.image=g}))}}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}