{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from \"../../../core/RandomLCG.js\";\nimport { Placement as s } from \"../CIMPlacements.js\";\nimport { PlacementGridType as i } from \"../enums.js\";\n\nfunction h(t) {\n  return void 0 !== t.rings;\n}\n\nclass e {\n  static local() {\n    return null === e.instance && (e.instance = new e()), e.instance;\n  }\n\n  execute(t, s, i, h) {\n    return new n(t, s, i, h);\n  }\n\n}\n\ne.instance = null;\n\nclass n {\n  constructor(e, n, _, r) {\n    if (this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, this._currentX = 0, this._currentY = 0, this._stepX = Math.abs(n.stepX ?? 16) * _, this._stepY = Math.abs(n.stepY ?? 16) * _, 0 !== this._stepX && 0 !== this._stepY && e && h(e) && e.rings) {\n      if (this._gridType = n.gridType ?? i.Fixed, this._gridType === i.Random) {\n        const s = n.seed ?? 13,\n              i = 1;\n        this._randomLCG = new t(s * i), this._randomness = (n.randomness ?? 100) / 100, this._gridAngle = 0, this._shiftOddRows = !1, this._cosAngle = 1, this._sinAngle = 0, this._offsetX = 0, this._offsetY = 0;\n      } else {\n        if (this._randomness = 0, this._gridAngle = n.gridAngle ?? 0, this._shiftOddRows = n.shiftOddRows ?? !1, this._offsetX = (n.offsetX ?? 0) * _, this._offsetY = (n.offsetY ?? 0) * _, this._cosAngle = Math.cos(this._gridAngle / 180 * Math.PI), this._sinAngle = -Math.sin(this._gridAngle / 180 * Math.PI), this._stepX) if (this._offsetX < 0) for (; this._offsetX < -.5 * this._stepX;) this._offsetX += this._stepX;else for (; this._offsetX >= .5 * this._stepX;) this._offsetX -= this._stepX;\n        if (this._stepY) if (this._offsetY < 0) for (; this._offsetY < -.5 * this._stepY;) this._offsetY += this._stepY;else for (; this._offsetY >= .5 * this._stepY;) this._offsetY -= this._stepY;\n      }\n\n      this._graphicOriginX = 0, this._graphicOriginY = 0, this._internalPlacement = new s(), this._calculateMinMax(e), this._geometry = e;\n    }\n  }\n\n  next() {\n    return this._geometry ? this._nextInside() : null;\n  }\n\n  _calculateMinMax(t) {\n    let s, i, h, e, n, _, r, o;\n\n    this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, n = _ = Number.MAX_VALUE, r = o = -Number.MAX_VALUE;\n\n    for (const a of t.rings) {\n      const t = a ? a.length : 0;\n\n      for (let f = 0; f < t; ++f) s = a[f][0] - this._graphicOriginX - this._offsetX, i = a[f][1] - this._graphicOriginY - this._offsetY, h = this._cosAngle * s - this._sinAngle * i, e = this._sinAngle * s + this._cosAngle * i, n = Math.min(n, h), r = Math.max(r, h), _ = Math.min(_, e), o = Math.max(o, e);\n    }\n\n    n += this._graphicOriginX, r += this._graphicOriginX, _ += this._graphicOriginY, o += this._graphicOriginY, this._xMin = Math.round(n / this._stepX), this._xMax = Math.round(r / this._stepX), this._yMin = Math.round(_ / this._stepY), this._yMax = Math.round(o / this._stepY), this._currentX = this._xMax + 1, this._currentY = this._yMin - 1;\n  }\n\n  _nextInside() {\n    for (;;) {\n      if (this._currentX > this._xMax) {\n        if (this._currentY++, this._currentY > this._yMax) return null;\n        this._currentX = this._xMin, this._shiftOddRows && this._currentY % 2 && this._currentX--;\n      }\n\n      let t = this._currentX * this._stepX + this._offsetX;\n      this._shiftOddRows && this._currentY % 2 && (t += .5 * this._stepX);\n      const s = this._currentY * this._stepY + this._offsetY;\n      let h, e;\n      return this._currentX++, this._gridType === i.Random ? (h = this._graphicOriginX + t + this._stepX * this._randomness * (.5 - this._randomLCG.getFloat()) * 2 / 3, e = this._graphicOriginY + s + this._stepY * this._randomness * (.5 - this._randomLCG.getFloat()) * 2 / 3) : (h = this._graphicOriginX + this._cosAngle * t + this._sinAngle * s, e = this._graphicOriginY - this._sinAngle * t + this._cosAngle * s), this._internalPlacement.setTranslate(h, e), this._internalPlacement;\n    }\n  }\n\n}\n\nexport { e as PlacementInsidePolygon };","map":{"version":3,"names":["t","Placement","s","PlacementGridType","i","h","rings","e","local","instance","execute","n","constructor","_","r","_xMin","_xMax","_yMin","_yMax","_currentX","_currentY","_stepX","Math","abs","stepX","_stepY","stepY","_gridType","gridType","Fixed","Random","seed","_randomLCG","_randomness","randomness","_gridAngle","_shiftOddRows","_cosAngle","_sinAngle","_offsetX","_offsetY","gridAngle","shiftOddRows","offsetX","offsetY","cos","PI","sin","_graphicOriginX","_graphicOriginY","_internalPlacement","_calculateMinMax","_geometry","next","_nextInside","o","Number","MAX_VALUE","a","length","f","min","max","round","getFloat","setTranslate","PlacementInsidePolygon"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/placements/PlacementInsidePolygon.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/RandomLCG.js\";import{Placement as s}from\"../CIMPlacements.js\";import{PlacementGridType as i}from\"../enums.js\";function h(t){return void 0!==t.rings}class e{static local(){return null===e.instance&&(e.instance=new e),e.instance}execute(t,s,i,h){return new n(t,s,i,h)}}e.instance=null;class n{constructor(e,n,_,r){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=Math.abs(n.stepX??16)*_,this._stepY=Math.abs(n.stepY??16)*_,0!==this._stepX&&0!==this._stepY&&e&&h(e)&&e.rings){if(this._gridType=n.gridType??i.Fixed,this._gridType===i.Random){const s=n.seed??13,i=1;this._randomLCG=new t(s*i),this._randomness=(n.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0}else{if(this._randomness=0,this._gridAngle=n.gridAngle??0,this._shiftOddRows=n.shiftOddRows??!1,this._offsetX=(n.offsetX??0)*_,this._offsetY=(n.offsetY??0)*_,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new s,this._calculateMinMax(e),this._geometry=e}}next(){return this._geometry?this._nextInside():null}_calculateMinMax(t){let s,i,h,e,n,_,r,o;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,n=_=Number.MAX_VALUE,r=o=-Number.MAX_VALUE;for(const a of t.rings){const t=a?a.length:0;for(let f=0;f<t;++f)s=a[f][0]-this._graphicOriginX-this._offsetX,i=a[f][1]-this._graphicOriginY-this._offsetY,h=this._cosAngle*s-this._sinAngle*i,e=this._sinAngle*s+this._cosAngle*i,n=Math.min(n,h),r=Math.max(r,h),_=Math.min(_,e),o=Math.max(o,e)}n+=this._graphicOriginX,r+=this._graphicOriginX,_+=this._graphicOriginY,o+=this._graphicOriginY,this._xMin=Math.round(n/this._stepX),this._xMax=Math.round(r/this._stepX),this._yMin=Math.round(_/this._stepY),this._yMax=Math.round(o/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);const s=this._currentY*this._stepY+this._offsetY;let h,e;return this._currentX++,this._gridType===i.Random?(h=this._graphicOriginX+t+this._stepX*this._randomness*(.5-this._randomLCG.getFloat())*2/3,e=this._graphicOriginY+s+this._stepY*this._randomness*(.5-this._randomLCG.getFloat())*2/3):(h=this._graphicOriginX+this._cosAngle*t+this._sinAngle*s,e=this._graphicOriginY-this._sinAngle*t+this._cosAngle*s),this._internalPlacement.setTranslate(h,e),this._internalPlacement}}}export{e as PlacementInsidePolygon};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}