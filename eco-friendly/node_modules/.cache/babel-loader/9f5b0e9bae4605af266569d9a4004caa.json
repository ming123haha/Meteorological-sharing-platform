{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport t from \"../../request.js\";\nimport { unwrapOrThrow as a } from \"../../core/maybe.js\";\nimport { throwIfAborted as i } from \"../../core/promiseUtils.js\";\nimport { pt2px as r } from \"../../core/screenUtils.js\";\nimport { analyzeCIMSymbol as s, analyzeCIMResource as o } from \"./cimAnalyzer.js\";\nimport n from \"./CIMResourceManager.js\";\nimport { Transformation as c, CanvasDrawHelper as h } from \"./CIMSymbolDrawHelper.js\";\nimport { OverrideHelper as l, CIMSymbolHelper as m } from \"./CIMSymbolHelper.js\";\nimport g from \"./Rasterizer.js\";\nimport u from \"./TextRasterizer.js\";\nimport { mapCIMSymbolToGeometryType as f, createLabelOverrideFunction as d, evaluateValueOrFunction as p, colorToArray as y } from \"./utils.js\";\nimport { scaleCIMMarker as w } from \"../support/cimSymbolUtils.js\";\nimport { Symbol3DAnchorPosition2D as C } from \"../support/Symbol3DAnchorPosition2D.js\";\nvar M;\n!function (e) {\n  e.Legend = \"legend\", e.Preview = \"preview\";\n}(M || (M = {}));\n\nconst _ = e => e && e.scaleFactor ? e.scaleFactor : 1,\n      v = 96 / 72;\n\nclass z {\n  constructor(e, t) {\n    this._spatialReference = e, this._avoidSDF = t, this._resourceCache = new Map(), this._imageDataCanvas = null, this._pictureMarkerCache = new Map(), this._textRasterizer = new u(), this._cimResourceManager = new n(), this._rasterizer = new g(this._cimResourceManager);\n  }\n\n  get resourceManager() {\n    return this._cimResourceManager;\n  }\n\n  async rasterizeCIMSymbolAsync(e, t, a, i, r, s, o, n) {\n    if (!e) return null;\n    const {\n      data: g\n    } = e;\n    if (!g || \"CIMSymbolReference\" !== g.type || !g.symbol) return null;\n    const {\n      symbol: u\n    } = g;\n    s || (s = f(u));\n    const d = await l.resolveSymbolOverrides(g, t, this._spatialReference, r, s, o, n);\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const p = this._imageDataCanvas,\n          y = this._cimResourceManager,\n          w = [];\n    m.fetchResources(d, y, w), w.length > 0 && (await Promise.all(w));\n\n    const {\n      width: C,\n      height: M\n    } = a,\n          _ = I(s, C, M, i),\n          z = m.getEnvelope(d, _, y);\n\n    if (!z) return null;\n    const x = (window.devicePixelRatio || 1) * v;\n    let R = 1,\n        b = 0,\n        P = 0;\n\n    switch (u.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMTextSymbol\":\n        {\n          let e = 1;\n          z.width > C && (e = C / z.width);\n          let t = 1;\n          z.height > M && (t = M / z.height), \"preview\" === i && (z.width < C && (e = C / z.width), z.height < M && (t = M / z.height)), R = Math.min(e, t), b = z.x + z.width / 2, P = z.y + z.height / 2;\n        }\n        break;\n\n      case \"CIMLineSymbol\":\n        {\n          let e = 1;\n          z.height > M && (e = M / z.height), R = e, P = z.y + z.height / 2;\n          const t = z.x * R + C / 2,\n                a = (z.x + z.width) * R + C / 2;\n\n          if (t < 0) {\n            const {\n              paths: e\n            } = _;\n            e[0][0][0] -= t;\n          }\n\n          if (a > C) {\n            const {\n              paths: e\n            } = _;\n            e[0][2][0] -= a - C;\n          }\n        }\n        break;\n\n      case \"CIMPolygonSymbol\":\n        {\n          b = z.x + z.width / 2, P = z.y + z.height / 2;\n          const e = z.x * R + C / 2,\n                t = (z.x + z.width) * R + C / 2,\n                a = z.y * R + M / 2,\n                i = (z.y + z.height) * R + M / 2,\n                {\n            rings: r\n          } = _;\n          e < 0 && (r[0][0][0] -= e, r[0][3][0] -= e, r[0][4][0] -= e), a < 0 && (r[0][0][1] += a, r[0][1][1] += a, r[0][4][1] += a), t > C && (r[0][1][0] -= t - C, r[0][2][0] -= t - C), i > M && (r[0][2][1] += i - M, r[0][3][1] += i - M);\n        }\n    }\n\n    p.width = C * x, p.height = M * x;\n    const D = 1;\n    p.width += 2 * D, p.height += 2 * D;\n    const S = p.getContext(\"2d\"),\n          k = c.createIdentity();\n    k.translate(-b, -P), k.scale(R * x, -R * x), k.translate(C * x / 2 + D, M * x / 2 + D), S.clearRect(0, 0, p.width, p.height);\n    return new h(S, y, k, !0).drawSymbol(d, _), S.getImageData(0, 0, p.width, p.height);\n  }\n\n  async analyzeCIMSymbol(e, t, a, r, o) {\n    const n = [],\n          c = t ? {\n      geometryType: r,\n      spatialReference: this._spatialReference,\n      fields: t\n    } : null;\n    let h;\n    await s(e.data, c, this._cimResourceManager, n, this._avoidSDF), i(o);\n\n    for (const i of n) \"CIMPictureMarker\" !== i.cim.type && \"CIMPictureFill\" !== i.cim.type && \"CIMPictureStroke\" !== i.cim.type || (h || (h = []), h.push(this._fetchPictureMarkerResource(i, o))), a && \"text\" === i.type && \"string\" == typeof i.text && i.text.includes(\"[\") && (i.text = d(a, i.text, i.cim.textCase));\n\n    return h && (await Promise.all(h)), n;\n  }\n\n  rasterizeCIMSymbol3D(e, t, a, i, r, s) {\n    const o = [];\n\n    for (const n of e) {\n      i && \"function\" == typeof i.scaleFactor && (i.scaleFactor = i.scaleFactor(t, r, s));\n\n      const e = this._getRasterizedResource(n, t, a, i, r, s);\n\n      if (!e) continue;\n      let c = 0,\n          h = e.anchorX || 0,\n          l = e.anchorY || 0,\n          m = !1,\n          g = 0,\n          u = 0;\n\n      if (\"esriGeometryPoint\" === a) {\n        const e = _(i);\n\n        if (g = p(n.offsetX, t, r, s) * e || 0, u = p(n.offsetY, t, r, s) * e || 0, \"marker\" === n.type) c = p(n.rotation, t, r, s) || 0, m = !!n.rotateClockwise && n.rotateClockwise;else if (\"text\" === n.type) {\n          if (c = p(n.angle, t, r, s) || 0, void 0 !== n.horizontalAlignment) switch (n.horizontalAlignment) {\n            case \"left\":\n              h = -.5;\n              break;\n\n            case \"right\":\n              h = .5;\n              break;\n\n            default:\n              h = 0;\n          }\n          if (void 0 !== n.verticalAlignment) switch (n.verticalAlignment) {\n            case \"top\":\n              l = .5;\n              break;\n\n            case \"bottom\":\n              l = -.5;\n              break;\n\n            case \"baseline\":\n              l = -.25;\n              break;\n\n            default:\n              l = 0;\n          }\n        }\n      }\n\n      null != e && o.push({\n        angle: c,\n        rotateClockWise: m,\n        anchorX: h,\n        anchorY: l,\n        offsetX: g,\n        offsetY: u,\n        rasterizedResource: e\n      });\n    }\n\n    return this.getSymbolImage(o);\n  }\n\n  getSymbolImage(e) {\n    const t = document.createElement(\"canvas\"),\n          i = a(t.getContext(\"2d\"));\n    let s = 0,\n        o = 0,\n        n = 0,\n        c = 0;\n    const h = [];\n\n    for (let a = 0; a < e.length; a++) {\n      const t = e[a],\n            l = t.rasterizedResource;\n      if (!l) continue;\n      const m = l.size,\n            g = t.offsetX,\n            u = t.offsetY,\n            f = t.anchorX,\n            d = t.anchorY,\n            p = t.rotateClockWise || !1;\n\n      let y = t.angle,\n          w = r(g) - m[0] * (.5 + f),\n          C = r(u) - m[1] * (.5 + d),\n          M = w + m[0],\n          _ = C + m[1];\n\n      if (y) {\n        p && (y = -y);\n        const e = Math.sin(y * Math.PI / 180),\n              t = Math.cos(y * Math.PI / 180),\n              a = w * t - C * e,\n              i = w * e + C * t,\n              r = w * t - _ * e,\n              s = w * e + _ * t,\n              o = M * t - _ * e,\n              n = M * e + _ * t,\n              c = M * t - C * e,\n              h = M * e + C * t;\n        w = Math.min(a, r, o, c), C = Math.min(i, s, n, h), M = Math.max(a, r, o, c), _ = Math.max(i, s, n, h);\n      }\n\n      s = w < s ? w : s, o = C < o ? C : o, n = M > n ? M : n, c = _ > c ? _ : c;\n      const v = i.createImageData(l.size[0], l.size[1]);\n      v.data.set(new Uint8ClampedArray(l.image.buffer));\n      const z = {\n        offsetX: g,\n        offsetY: u,\n        rotateClockwise: p,\n        angle: y,\n        rasterizedImage: v,\n        anchorX: f,\n        anchorY: d\n      };\n      h.push(z);\n    }\n\n    t.width = n - s, t.height = c - o;\n    const l = -s,\n          m = c;\n\n    for (let a = 0; a < h.length; a++) {\n      const e = h[a],\n            t = this._imageDataToCanvas(e.rasterizedImage),\n            s = e.rasterizedImage.width,\n            o = e.rasterizedImage.height,\n            n = l - s * (.5 + e.anchorX),\n            c = m - o * (.5 - e.anchorY);\n\n      if (e.angle) {\n        const a = (360 - e.angle) * Math.PI / 180;\n        i.save(), i.translate(r(e.offsetX), -r(e.offsetY)), i.translate(l, m), i.rotate(a), i.translate(-l, -m), i.drawImage(t, n, c), i.restore();\n      } else i.drawImage(t, n + r(e.offsetX), c - r(e.offsetY));\n    }\n\n    const g = new C({\n      x: l / t.width - .5,\n      y: m / t.height - .5\n    });\n    return {\n      imageData: 0 !== t.width && 0 !== t.height ? i.getImageData(0, 0, t.width, t.height) : i.createImageData(1, 1),\n      anchorPosition: g\n    };\n  }\n\n  async _fetchPictureMarkerResource(e, a) {\n    const i = e.materialHash;\n\n    if (!this._pictureMarkerCache.get(i)) {\n      const r = (await t(e.cim.url, {\n        responseType: \"image\",\n        signal: a && a.signal\n      })).data;\n\n      this._pictureMarkerCache.set(i, r);\n    }\n  }\n\n  _imageDataToCanvas(e) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const t = this._imageDataCanvas,\n          i = a(t.getContext(\"2d\"));\n    return t.width = e.width, t.height = e.height, i.putImageData(e, 0, 0), t;\n  }\n\n  _imageTo32Array(t, i, r, s) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const o = this._imageDataCanvas,\n          n = a(o.getContext(\"2d\"));\n\n    if (o.width = i, o.height = r, n.drawImage(t, 0, 0, i, r), s) {\n      n.save();\n      const a = new e(s);\n      n.fillStyle = a.toHex(), n.globalCompositeOperation = \"multiply\", n.fillRect(0, 0, i, r), n.globalCompositeOperation = \"destination-atop\", n.drawImage(t, 0, 0, i, r), n.restore();\n    }\n\n    return new Uint32Array(n.getImageData(0, 0, i, r).data.buffer);\n  }\n\n  _getRasterizedResource(e, t, i, r, s, o) {\n    let n, c, h;\n    const l = null,\n          m = null;\n    if (\"text\" === e.type) return this._rasterizeTextResource(e, t, r, s, o);\n    ({\n      analyzedCIM: n,\n      hash: c\n    } = x(e, t, s, o));\n\n    const g = _(r);\n\n    if (\"CIMPictureMarker\" === e.cim.type) {\n      const i = p(e.size, t, s, o) * g,\n            {\n        image: r,\n        width: n,\n        height: c\n      } = a(this._getPictureResource(e, i, p(e.color, t, s, o)));\n      return h = {\n        image: r,\n        size: [n, c],\n        sdf: !1,\n        simplePattern: !1,\n        anchorX: e.anchorPoint ? e.anchorPoint.x : 0,\n        anchorY: e.anchorPoint ? e.anchorPoint.y : 0\n      }, h;\n    }\n\n    w(n, g, {\n      preserveOutlineWidth: !1\n    });\n    const u = n;\n    c += i, r && (c += JSON.stringify(r));\n    const f = this._resourceCache;\n    return f.has(c) ? f.get(c) : (h = this._rasterizer.rasterizeJSONResource({\n      cim: u,\n      type: e.type,\n      url: e.url,\n      mosaicHash: c,\n      size: l,\n      path: m\n    }, window.devicePixelRatio || 1, this._avoidSDF), f.set(c, h), h);\n  }\n\n  _rasterizeTextResource(e, t, a, i, r) {\n    const s = _(a),\n          o = p(e.text, t, i, r);\n\n    if (!o || 0 === o.length) return null;\n    const n = p(e.fontName, t, i, r),\n          c = p(e.style, t, i, r),\n          h = p(e.weight, t, i, r),\n          l = p(e.decoration, t, i, r),\n          m = p(e.size, t, i, r) * s,\n          g = p(e.horizontalAlignment, t, i, r),\n          u = p(e.verticalAlignment, t, i, r),\n          f = y(p(e.color, t, i, r)),\n          d = y(p(e.outlineColor, t, i, r)),\n          w = {\n      color: f,\n      size: m,\n      horizontalAlignment: g,\n      verticalAlignment: u,\n      font: {\n        family: n,\n        style: c,\n        weight: h,\n        decoration: l\n      },\n      halo: {\n        size: p(e.outlineSize, t, i, r) || 0,\n        color: d,\n        style: c\n      },\n      pixelRatio: 1,\n      premultiplyColors: !this._avoidSDF\n    };\n    return this._textRasterizer.rasterizeText(o, w);\n  }\n\n  _getPictureResource(e, t, a) {\n    const i = this._pictureMarkerCache.get(e.materialHash);\n\n    if (!i) return null;\n    const s = i.height / i.width,\n          o = t ? s > 1 ? r(t) : r(t) / s : i.width,\n          n = t ? s > 1 ? r(t) * s : r(t) : i.height;\n    return {\n      image: this._imageTo32Array(i, o, n, a),\n      width: o,\n      height: n\n    };\n  }\n\n}\n\nfunction I(e, t, a, i) {\n  const r = 1,\n        s = -t / 2 + r,\n        o = t / 2 - r,\n        n = a / 2 - r,\n        c = -a / 2 + r;\n\n  switch (e) {\n    case \"esriGeometryPoint\":\n      return {\n        x: 0,\n        y: 0\n      };\n\n    case \"esriGeometryPolyline\":\n      return {\n        paths: [[[s, 0], [0, 0], [o, 0]]]\n      };\n\n    default:\n      return \"legend\" === i ? {\n        rings: [[[s, n], [o, 0], [o, c], [s, c], [s, n]]]\n      } : {\n        rings: [[[s, n], [o, n], [o, c], [s, c], [s, n]]]\n      };\n  }\n}\n\nfunction x(e, t, a, i) {\n  let r, s;\n\n  if (\"function\" == typeof e.materialHash) {\n    r = (0, e.materialHash)(t, a, i), s = o(e.cim, e.materialOverrides);\n  } else r = e.materialHash, s = e.cim;\n\n  return {\n    analyzedCIM: s,\n    hash: r\n  };\n}\n\nexport { z as CIMSymbolRasterizer, M as GeometryStyle };","map":{"version":3,"names":["e","t","unwrapOrThrow","a","throwIfAborted","i","pt2px","r","analyzeCIMSymbol","s","analyzeCIMResource","o","n","Transformation","c","CanvasDrawHelper","h","OverrideHelper","l","CIMSymbolHelper","m","g","u","mapCIMSymbolToGeometryType","f","createLabelOverrideFunction","d","evaluateValueOrFunction","p","colorToArray","y","scaleCIMMarker","w","Symbol3DAnchorPosition2D","C","M","Legend","Preview","_","scaleFactor","v","z","constructor","_spatialReference","_avoidSDF","_resourceCache","Map","_imageDataCanvas","_pictureMarkerCache","_textRasterizer","_cimResourceManager","_rasterizer","resourceManager","rasterizeCIMSymbolAsync","data","type","symbol","resolveSymbolOverrides","document","createElement","fetchResources","length","Promise","all","width","height","I","getEnvelope","x","window","devicePixelRatio","R","b","P","Math","min","paths","rings","D","S","getContext","k","createIdentity","translate","scale","clearRect","drawSymbol","getImageData","geometryType","spatialReference","fields","cim","push","_fetchPictureMarkerResource","text","includes","textCase","rasterizeCIMSymbol3D","_getRasterizedResource","anchorX","anchorY","offsetX","offsetY","rotation","rotateClockwise","angle","horizontalAlignment","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","size","sin","PI","cos","max","createImageData","set","Uint8ClampedArray","image","buffer","rasterizedImage","_imageDataToCanvas","save","rotate","drawImage","restore","imageData","anchorPosition","materialHash","get","url","responseType","signal","putImageData","_imageTo32Array","fillStyle","toHex","globalCompositeOperation","fillRect","Uint32Array","_rasterizeTextResource","analyzedCIM","hash","_getPictureResource","color","sdf","simplePattern","anchorPoint","preserveOutlineWidth","JSON","stringify","has","rasterizeJSONResource","mosaicHash","path","fontName","style","weight","decoration","outlineColor","font","family","halo","outlineSize","pixelRatio","premultiplyColors","rasterizeText","materialOverrides","CIMSymbolRasterizer","GeometryStyle"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import{unwrapOrThrow as a}from\"../../core/maybe.js\";import{throwIfAborted as i}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{analyzeCIMSymbol as s,analyzeCIMResource as o}from\"./cimAnalyzer.js\";import n from\"./CIMResourceManager.js\";import{Transformation as c,CanvasDrawHelper as h}from\"./CIMSymbolDrawHelper.js\";import{OverrideHelper as l,CIMSymbolHelper as m}from\"./CIMSymbolHelper.js\";import g from\"./Rasterizer.js\";import u from\"./TextRasterizer.js\";import{mapCIMSymbolToGeometryType as f,createLabelOverrideFunction as d,evaluateValueOrFunction as p,colorToArray as y}from\"./utils.js\";import{scaleCIMMarker as w}from\"../support/cimSymbolUtils.js\";import{Symbol3DAnchorPosition2D as C}from\"../support/Symbol3DAnchorPosition2D.js\";var M;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(M||(M={}));const _=e=>e&&e.scaleFactor?e.scaleFactor:1,v=96/72;class z{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new u,this._cimResourceManager=new n,this._rasterizer=new g(this._cimResourceManager)}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,a,i,r,s,o,n){if(!e)return null;const{data:g}=e;if(!g||\"CIMSymbolReference\"!==g.type||!g.symbol)return null;const{symbol:u}=g;s||(s=f(u));const d=await l.resolveSymbolOverrides(g,t,this._spatialReference,r,s,o,n);this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const p=this._imageDataCanvas,y=this._cimResourceManager,w=[];m.fetchResources(d,y,w),w.length>0&&await Promise.all(w);const{width:C,height:M}=a,_=I(s,C,M,i),z=m.getEnvelope(d,_,y);if(!z)return null;const x=(window.devicePixelRatio||1)*v;let R=1,b=0,P=0;switch(u.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":{let e=1;z.width>C&&(e=C/z.width);let t=1;z.height>M&&(t=M/z.height),\"preview\"===i&&(z.width<C&&(e=C/z.width),z.height<M&&(t=M/z.height)),R=Math.min(e,t),b=z.x+z.width/2,P=z.y+z.height/2}break;case\"CIMLineSymbol\":{let e=1;z.height>M&&(e=M/z.height),R=e,P=z.y+z.height/2;const t=z.x*R+C/2,a=(z.x+z.width)*R+C/2;if(t<0){const{paths:e}=_;e[0][0][0]-=t}if(a>C){const{paths:e}=_;e[0][2][0]-=a-C}}break;case\"CIMPolygonSymbol\":{b=z.x+z.width/2,P=z.y+z.height/2;const e=z.x*R+C/2,t=(z.x+z.width)*R+C/2,a=z.y*R+M/2,i=(z.y+z.height)*R+M/2,{rings:r}=_;e<0&&(r[0][0][0]-=e,r[0][3][0]-=e,r[0][4][0]-=e),a<0&&(r[0][0][1]+=a,r[0][1][1]+=a,r[0][4][1]+=a),t>C&&(r[0][1][0]-=t-C,r[0][2][0]-=t-C),i>M&&(r[0][2][1]+=i-M,r[0][3][1]+=i-M)}}p.width=C*x,p.height=M*x;const D=1;p.width+=2*D,p.height+=2*D;const S=p.getContext(\"2d\"),k=c.createIdentity();k.translate(-b,-P),k.scale(R*x,-R*x),k.translate(C*x/2+D,M*x/2+D),S.clearRect(0,0,p.width,p.height);return new h(S,y,k,!0).drawSymbol(d,_),S.getImageData(0,0,p.width,p.height)}async analyzeCIMSymbol(e,t,a,r,o){const n=[],c=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let h;await s(e.data,c,this._cimResourceManager,n,this._avoidSDF),i(o);for(const i of n)\"CIMPictureMarker\"!==i.cim.type&&\"CIMPictureFill\"!==i.cim.type&&\"CIMPictureStroke\"!==i.cim.type||(h||(h=[]),h.push(this._fetchPictureMarkerResource(i,o))),a&&\"text\"===i.type&&\"string\"==typeof i.text&&i.text.includes(\"[\")&&(i.text=d(a,i.text,i.cim.textCase));return h&&await Promise.all(h),n}rasterizeCIMSymbol3D(e,t,a,i,r,s){const o=[];for(const n of e){i&&\"function\"==typeof i.scaleFactor&&(i.scaleFactor=i.scaleFactor(t,r,s));const e=this._getRasterizedResource(n,t,a,i,r,s);if(!e)continue;let c=0,h=e.anchorX||0,l=e.anchorY||0,m=!1,g=0,u=0;if(\"esriGeometryPoint\"===a){const e=_(i);if(g=p(n.offsetX,t,r,s)*e||0,u=p(n.offsetY,t,r,s)*e||0,\"marker\"===n.type)c=p(n.rotation,t,r,s)||0,m=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=p(n.angle,t,r,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":h=-.5;break;case\"right\":h=.5;break;default:h=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":l=.5;break;case\"bottom\":l=-.5;break;case\"baseline\":l=-.25;break;default:l=0}}}null!=e&&o.push({angle:c,rotateClockWise:m,anchorX:h,anchorY:l,offsetX:g,offsetY:u,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),i=a(t.getContext(\"2d\"));let s=0,o=0,n=0,c=0;const h=[];for(let a=0;a<e.length;a++){const t=e[a],l=t.rasterizedResource;if(!l)continue;const m=l.size,g=t.offsetX,u=t.offsetY,f=t.anchorX,d=t.anchorY,p=t.rotateClockWise||!1;let y=t.angle,w=r(g)-m[0]*(.5+f),C=r(u)-m[1]*(.5+d),M=w+m[0],_=C+m[1];if(y){p&&(y=-y);const e=Math.sin(y*Math.PI/180),t=Math.cos(y*Math.PI/180),a=w*t-C*e,i=w*e+C*t,r=w*t-_*e,s=w*e+_*t,o=M*t-_*e,n=M*e+_*t,c=M*t-C*e,h=M*e+C*t;w=Math.min(a,r,o,c),C=Math.min(i,s,n,h),M=Math.max(a,r,o,c),_=Math.max(i,s,n,h)}s=w<s?w:s,o=C<o?C:o,n=M>n?M:n,c=_>c?_:c;const v=i.createImageData(l.size[0],l.size[1]);v.data.set(new Uint8ClampedArray(l.image.buffer));const z={offsetX:g,offsetY:u,rotateClockwise:p,angle:y,rasterizedImage:v,anchorX:f,anchorY:d};h.push(z)}t.width=n-s,t.height=c-o;const l=-s,m=c;for(let a=0;a<h.length;a++){const e=h[a],t=this._imageDataToCanvas(e.rasterizedImage),s=e.rasterizedImage.width,o=e.rasterizedImage.height,n=l-s*(.5+e.anchorX),c=m-o*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;i.save(),i.translate(r(e.offsetX),-r(e.offsetY)),i.translate(l,m),i.rotate(a),i.translate(-l,-m),i.drawImage(t,n,c),i.restore()}else i.drawImage(t,n+r(e.offsetX),c-r(e.offsetY))}const g=new C({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?i.getImageData(0,0,t.width,t.height):i.createImageData(1,1),anchorPosition:g}}async _fetchPictureMarkerResource(e,a){const i=e.materialHash;if(!this._pictureMarkerCache.get(i)){const r=(await t(e.cim.url,{responseType:\"image\",signal:a&&a.signal})).data;this._pictureMarkerCache.set(i,r)}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,i=a(t.getContext(\"2d\"));return t.width=e.width,t.height=e.height,i.putImageData(e,0,0),t}_imageTo32Array(t,i,r,s){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const o=this._imageDataCanvas,n=a(o.getContext(\"2d\"));if(o.width=i,o.height=r,n.drawImage(t,0,0,i,r),s){n.save();const a=new e(s);n.fillStyle=a.toHex(),n.globalCompositeOperation=\"multiply\",n.fillRect(0,0,i,r),n.globalCompositeOperation=\"destination-atop\",n.drawImage(t,0,0,i,r),n.restore()}return new Uint32Array(n.getImageData(0,0,i,r).data.buffer)}_getRasterizedResource(e,t,i,r,s,o){let n,c,h;const l=null,m=null;if(\"text\"===e.type)return this._rasterizeTextResource(e,t,r,s,o);({analyzedCIM:n,hash:c}=x(e,t,s,o));const g=_(r);if(\"CIMPictureMarker\"===e.cim.type){const i=p(e.size,t,s,o)*g,{image:r,width:n,height:c}=a(this._getPictureResource(e,i,p(e.color,t,s,o)));return h={image:r,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},h}w(n,g,{preserveOutlineWidth:!1});const u=n;c+=i,r&&(c+=JSON.stringify(r));const f=this._resourceCache;return f.has(c)?f.get(c):(h=this._rasterizer.rasterizeJSONResource({cim:u,type:e.type,url:e.url,mosaicHash:c,size:l,path:m},window.devicePixelRatio||1,this._avoidSDF),f.set(c,h),h)}_rasterizeTextResource(e,t,a,i,r){const s=_(a),o=p(e.text,t,i,r);if(!o||0===o.length)return null;const n=p(e.fontName,t,i,r),c=p(e.style,t,i,r),h=p(e.weight,t,i,r),l=p(e.decoration,t,i,r),m=p(e.size,t,i,r)*s,g=p(e.horizontalAlignment,t,i,r),u=p(e.verticalAlignment,t,i,r),f=y(p(e.color,t,i,r)),d=y(p(e.outlineColor,t,i,r)),w={color:f,size:m,horizontalAlignment:g,verticalAlignment:u,font:{family:n,style:c,weight:h,decoration:l},halo:{size:p(e.outlineSize,t,i,r)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,w)}_getPictureResource(e,t,a){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const s=i.height/i.width,o=t?s>1?r(t):r(t)/s:i.width,n=t?s>1?r(t)*s:r(t):i.height;return{image:this._imageTo32Array(i,o,n,a),width:o,height:n}}}function I(e,t,a,i){const r=1,s=-t/2+r,o=t/2-r,n=a/2-r,c=-a/2+r;switch(e){case\"esriGeometryPoint\":return{x:0,y:0};case\"esriGeometryPolyline\":return{paths:[[[s,0],[0,0],[o,0]]]};default:return\"legend\"===i?{rings:[[[s,n],[o,0],[o,c],[s,c],[s,n]]]}:{rings:[[[s,n],[o,n],[o,c],[s,c],[s,n]]]}}}function x(e,t,a,i){let r,s;if(\"function\"==typeof e.materialHash){r=(0,e.materialHash)(t,a,i),s=o(e.cim,e.materialOverrides)}else r=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:r}}export{z as CIMSymbolRasterizer,M as GeometryStyle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}