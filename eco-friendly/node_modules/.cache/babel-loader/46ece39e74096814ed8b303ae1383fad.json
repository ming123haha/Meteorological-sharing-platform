{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isAborted as s, createAbortError as t, isPromiseLike as e } from \"../../core/promiseUtils.js\";\nimport { ObservableValue as r } from \"../../core/accessorSupport/tracking/ObservableValue.js\";\n\nclass n {\n  constructor() {\n    this._tasks = new Array(), this._running = new r(!1);\n  }\n\n  get length() {\n    return this._tasks.length;\n  }\n\n  get running() {\n    return this._running.get();\n  }\n\n  destroy() {\n    this.cancelAll();\n  }\n\n  runTask(s) {\n    for (; !s.done && this._process(s);) s.madeProgress();\n  }\n\n  push(s, t, e) {\n    return this._running.set(!0), new Promise((r, n) => this._tasks.push(new i(r, n, s, t, e)));\n  }\n\n  unshift(s, t, e) {\n    return this._running.set(!0), new Promise((r, n) => this._tasks.unshift(new i(r, n, s, t, e)));\n  }\n\n  _process(r) {\n    if (0 === this._tasks.length) return !1;\n\n    const n = this._tasks.shift();\n\n    try {\n      const i = s(n.signal);\n      if (i && !n.abortCallback) n.reject(t());else {\n        const s = i ? n.abortCallback?.(t()) : n.callback(r);\n        e(s) ? s.then(n.resolve, n.reject) : n.resolve(s);\n      }\n    } catch (i) {\n      n.reject(i);\n    }\n\n    return this._running.set(this._tasks.length > 0), !0;\n  }\n\n  cancelAll() {\n    const s = t();\n\n    for (const t of this._tasks) if (t.abortCallback) {\n      const e = t.abortCallback(s);\n      t.resolve(e);\n    } else t.reject(s);\n\n    this._tasks.length = 0, this._running.set(!1);\n  }\n\n}\n\nclass i {\n  constructor(s, t, e, r, n) {\n    this.resolve = s, this.reject = t, this.callback = e, this.signal = r, this.abortCallback = n;\n  }\n\n}\n\nexport { n as PromiseQueue };","map":{"version":3,"names":["isAborted","s","createAbortError","t","isPromiseLike","e","ObservableValue","r","n","constructor","_tasks","Array","_running","length","running","get","destroy","cancelAll","runTask","done","_process","madeProgress","push","set","Promise","i","unshift","shift","signal","abortCallback","reject","callback","then","resolve","PromiseQueue"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/PromiseQueue.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isAborted as s,createAbortError as t,isPromiseLike as e}from\"../../core/promiseUtils.js\";import{ObservableValue as r}from\"../../core/accessorSupport/tracking/ObservableValue.js\";class n{constructor(){this._tasks=new Array,this._running=new r(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(s){for(;!s.done&&this._process(s);)s.madeProgress()}push(s,t,e){return this._running.set(!0),new Promise(((r,n)=>this._tasks.push(new i(r,n,s,t,e))))}unshift(s,t,e){return this._running.set(!0),new Promise(((r,n)=>this._tasks.unshift(new i(r,n,s,t,e))))}_process(r){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const i=s(n.signal);if(i&&!n.abortCallback)n.reject(t());else{const s=i?n.abortCallback?.(t()):n.callback(r);e(s)?s.then(n.resolve,n.reject):n.resolve(s)}}catch(i){n.reject(i)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const s=t();for(const t of this._tasks)if(t.abortCallback){const e=t.abortCallback(s);t.resolve(e)}else t.reject(s);this._tasks.length=0,this._running.set(!1)}}class i{constructor(s,t,e,r,n){this.resolve=s,this.reject=t,this.callback=e,this.signal=r,this.abortCallback=n}}export{n as PromiseQueue};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}