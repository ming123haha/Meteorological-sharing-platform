{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport s from \"../../../core/Evented.js\";\nimport { destroyMaybe as r, isNone as i, isSome as o } from \"../../../core/maybe.js\";\nimport { createResolver as n, isAbortError as a } from \"../../../core/promiseUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as c } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { ElevationQuery as h } from \"../layers/graphics/ElevationQuery.js\";\nlet u = class extends s.EventedMixin(t) {\n  constructor(e) {\n    super(e), this.im = new Array(), this.ground = new Array(), this.scene = new Array(), this.handles = new Map(), this.lastElevationQuery = null, this.elevationCacheEnabled = !1;\n  }\n\n  destroy() {\n    this._elevationQuery = r(this._elevationQuery);\n  }\n\n  get elevationQuery() {\n    return i(this._elevationQuery) && (this._elevationQuery = new h(this.view.resourceController.scheduler, this.view.spatialReference, () => this.view.map && this.view.map.ground, {\n      maximumAutoTileRequests: 4\n    })), this._elevationQuery;\n  }\n\n  enableElevationCache(e) {\n    e || (this.lastElevationQuery = null), this.elevationCacheEnabled = e;\n  }\n\n  getElevation(e, t, s, r, o) {\n    if (this.elevationCacheEnabled && null != this.lastElevationQuery) {\n      const i = this.lastElevationQuery;\n      if (e === i.x && t === i.y && s === i.z && r.equals(i.spatialReference) && o === i.queryContext) return i.result;\n    }\n\n    let n = null;\n    return n = p(n, this.im, e, t, s, r, o), i(n) && (n = p(n, this.ground, e, t, s, r, o)), \"scene\" === o && (n = p(n, this.scene, e, t, s, r, o)), this.elevationCacheEnabled && (this.lastElevationQuery = {\n      x: e,\n      y: t,\n      z: s,\n      spatialReference: r,\n      queryContext: o,\n      result: n\n    }), n;\n  }\n\n  queryElevation(e, t, s, r, i, o = null, l = 0) {\n    const c = n();\n    return this.elevationQuery.queryElevation(e, t, o, l).then(o => {\n      \"scene\" === i && (o = p(o, this.scene, e, t, s, r, i)), c.resolve(o);\n    }).catch(o => {\n      a(o) ? c.reject(o) : c.resolve(this.getElevation(e, t, s, r, i));\n    }), c.promise;\n  }\n\n  register(e, t) {\n    this.handles.set(t, t.on(\"elevation-change\", e => this.emit(\"elevation-change\", e))), this[e].push(t);\n  }\n\n  unregister(e) {\n    this.handles.has(e) && (this.handles.get(e).remove(), this.handles.delete(e));\n\n    for (const t of [this.im, this.ground, this.scene]) {\n      const s = t.indexOf(e);\n      s > -1 && t.splice(s, 1);\n    }\n  }\n\n};\n\nfunction p(e, t, s, r, i, n, a) {\n  for (const l of t) {\n    const t = l.getElevation(s, r, i, n, a);\n    o(t) && (e = o(e) ? Math.max(t, e) : t);\n  }\n\n  return e;\n}\n\ne([l({\n  constructOnly: !0\n})], u.prototype, \"view\", void 0), e([l({\n  readOnly: !0,\n  aliasOf: \"view.basemapTerrain.spatialReference\"\n})], u.prototype, \"spatialReference\", void 0), u = e([c(\"esri.views.3d.support.CombinedElevationProvider\")], u);\nexport { u as CombinedElevationProvider };","map":{"version":3,"names":["_","e","t","s","destroyMaybe","r","isNone","i","isSome","o","createResolver","n","isAbortError","a","property","l","subclass","c","ElevationQuery","h","u","EventedMixin","constructor","im","Array","ground","scene","handles","Map","lastElevationQuery","elevationCacheEnabled","destroy","_elevationQuery","elevationQuery","view","resourceController","scheduler","spatialReference","map","maximumAutoTileRequests","enableElevationCache","getElevation","x","y","z","equals","queryContext","result","p","queryElevation","then","resolve","catch","reject","promise","register","set","on","emit","push","unregister","has","get","remove","delete","indexOf","splice","Math","max","constructOnly","prototype","readOnly","aliasOf","CombinedElevationProvider"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/support/CombinedElevationProvider.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import s from\"../../../core/Evented.js\";import{destroyMaybe as r,isNone as i,isSome as o}from\"../../../core/maybe.js\";import{createResolver as n,isAbortError as a}from\"../../../core/promiseUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ElevationQuery as h}from\"../layers/graphics/ElevationQuery.js\";let u=class extends(s.EventedMixin(t)){constructor(e){super(e),this.im=new Array,this.ground=new Array,this.scene=new Array,this.handles=new Map,this.lastElevationQuery=null,this.elevationCacheEnabled=!1}destroy(){this._elevationQuery=r(this._elevationQuery)}get elevationQuery(){return i(this._elevationQuery)&&(this._elevationQuery=new h(this.view.resourceController.scheduler,this.view.spatialReference,(()=>this.view.map&&this.view.map.ground),{maximumAutoTileRequests:4})),this._elevationQuery}enableElevationCache(e){e||(this.lastElevationQuery=null),this.elevationCacheEnabled=e}getElevation(e,t,s,r,o){if(this.elevationCacheEnabled&&null!=this.lastElevationQuery){const i=this.lastElevationQuery;if(e===i.x&&t===i.y&&s===i.z&&r.equals(i.spatialReference)&&o===i.queryContext)return i.result}let n=null;return n=p(n,this.im,e,t,s,r,o),i(n)&&(n=p(n,this.ground,e,t,s,r,o)),\"scene\"===o&&(n=p(n,this.scene,e,t,s,r,o)),this.elevationCacheEnabled&&(this.lastElevationQuery={x:e,y:t,z:s,spatialReference:r,queryContext:o,result:n}),n}queryElevation(e,t,s,r,i,o=null,l=0){const c=n();return this.elevationQuery.queryElevation(e,t,o,l).then((o=>{\"scene\"===i&&(o=p(o,this.scene,e,t,s,r,i)),c.resolve(o)})).catch((o=>{a(o)?c.reject(o):c.resolve(this.getElevation(e,t,s,r,i))})),c.promise}register(e,t){this.handles.set(t,t.on(\"elevation-change\",(e=>this.emit(\"elevation-change\",e)))),this[e].push(t)}unregister(e){this.handles.has(e)&&(this.handles.get(e).remove(),this.handles.delete(e));for(const t of[this.im,this.ground,this.scene]){const s=t.indexOf(e);s>-1&&t.splice(s,1)}}};function p(e,t,s,r,i,n,a){for(const l of t){const t=l.getElevation(s,r,i,n,a);o(t)&&(e=o(e)?Math.max(t,e):t)}return e}e([l({constructOnly:!0})],u.prototype,\"view\",void 0),e([l({readOnly:!0,aliasOf:\"view.basemapTerrain.spatialReference\"})],u.prototype,\"spatialReference\",void 0),u=e([c(\"esri.views.3d.support.CombinedElevationProvider\")],u);export{u as CombinedElevationProvider};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}