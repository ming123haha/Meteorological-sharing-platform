{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../../core/maybe.js\";\nimport { pt2px as e } from \"../../../../../../core/screenUtils.js\";\nimport { premultiplyAlphaRGBA as s } from \"../../color.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as i, BITSET_GENERIC_LOCK_COLOR as o, BITSET_FILL_RANDOM_PATTERN_OFFSET as r, BITSET_GENERIC_CONSIDER_ALPHA_ONLY as a, SPRITE_PADDING as l } from \"../../definitions.js\";\nimport { radToByte as h } from \"../../GeometryUtils.js\";\nimport { i1616to32 as n, i8888to32 as c } from \"../../number.js\";\nimport { FillMaterialKey as f } from \"../../materialKey/MaterialKey.js\";\nimport { isFunction as m, getMinMaxZoom as p } from \"./util.js\";\nimport _ from \"./WGLBaseFillTemplate.js\";\nimport y from \"./WGLDynamicMeshTemplate.js\";\nimport { ok as d } from \"../../util/Result.js\";\n\nclass u extends _(y) {\n  constructor(l, c, p) {\n    if (super(l), this._minMaxZoom = n(Math.round(c * i), Math.round(p * i)), m(l.color)) {\n      const t = (t, e, i) => {\n        const o = l.color(t, e, i);\n        return o && s(o) || 0;\n      };\n\n      this._dynamicPropertyMap.set(\"fillColor\", t);\n    } else {\n      const t = l.color;\n      this.fillColor = t && s(t) || 0;\n    }\n\n    const _ = \"CIMMarkerPlacementInsidePolygon\" === l.cim.placement?.type && l.cim.placement.shiftOddRows ? 2 : 1,\n          y = l.height;\n\n    if (m(y)) {\n      const t = (t, e, s) => y(t, e, s) * _;\n\n      this._dynamicPropertyMap.set(\"_height\", t);\n    } else this._height = (y || 0) * _;\n\n    const d = l.offsetX;\n\n    if (m(d)) {\n      const t = (t, s, i) => e(d(t, s, i));\n\n      this._dynamicPropertyMap.set(\"_offsetX\", t);\n    } else this._offsetX = e(d || 0);\n\n    const u = l.offsetY;\n\n    if (m(u)) {\n      const t = (t, s, i) => e(-u(t, s, i));\n\n      this._dynamicPropertyMap.set(\"_offsetY\", t);\n    } else this._offsetY = e(-u || 0);\n\n    const M = l.scaleX;\n    m(M) ? this._dynamicPropertyMap.set(\"_scaleX\", M) : this._scaleX = M || 1;\n    const g = l.angle;\n\n    if (m(g)) {\n      const t = (t, e, s) => h(g(t, e, s));\n\n      this._dynamicPropertyMap.set(\"_angle\", t);\n    } else this._angle = h(g) || 0;\n\n    if (t(l.effects)) {\n      const t = l.effects;\n      m(t) ? this._dynamicPropertyMap.set(\"_effects\", t) : this._effects = t;\n    }\n\n    this._cimFillLayer = l, this._bitset = (l.colorLocked ? o : 0) | (l.applyRandomOffset ? r : 0) | (l.sampleAlphaOnly ? a : 0), this._fillMaterialKey = f.load(l.materialKey);\n  }\n\n  static fromCIMFill(t, e) {\n    const [s, i] = p(t.scaleInfo, e);\n    return new u(t, s, i);\n  }\n\n  bindFeature(t, s, i) {\n    const o = t.readLegacyFeature();\n\n    this._dynamicPropertyMap.forEach((t, e) => {\n      this[e] = t(o, s, i);\n    });\n\n    const r = this._fillMaterialKey,\n          a = this._materialCache,\n          h = (0, this._cimFillLayer.materialHash)(o, s, i),\n          f = a.get(h);\n    let m = null;\n\n    if (f && d(f.spriteMosaicItem) && (m = f.spriteMosaicItem), m) {\n      const {\n        rect: t,\n        width: s,\n        height: i\n      } = m,\n            o = t.x + l,\n            a = t.y + l,\n            h = o + s,\n            f = a + i;\n      let p = Math.round(e(this._height));\n      p <= 0 && (p = f - a);\n\n      let _ = Math.round(e(this._height / i * s || 0));\n\n      _ <= 0 && (_ = h - o);\n      const y = this._scaleX,\n            d = 1;\n      this.tl = n(o, a), this.br = n(h, f), this.aux2_1 = n(_, p), this.aux2_2 = n(this._offsetX, this._offsetY), this.aux3 = c(y, d, this._angle, 0), r.sdf = m.sdf, r.pattern = !0, r.textureBinding = m.textureBinding;\n    } else this.tl = 0, this.br = 0, this.aux2_1 = 0, this.aux2_2 = 0, this.aux3 = 0, r.sdf = !1, r.pattern = !1, r.textureBinding = 0;\n\n    this._materialKey = r.data;\n  }\n\n}\n\nexport { u as default };","map":{"version":3,"names":["isSome","t","pt2px","e","premultiplyAlphaRGBA","s","MIN_MAX_ZOOM_PRECISION_FACTOR","i","BITSET_GENERIC_LOCK_COLOR","o","BITSET_FILL_RANDOM_PATTERN_OFFSET","r","BITSET_GENERIC_CONSIDER_ALPHA_ONLY","a","SPRITE_PADDING","l","radToByte","h","i1616to32","n","i8888to32","c","FillMaterialKey","f","isFunction","m","getMinMaxZoom","p","_","y","ok","d","u","constructor","_minMaxZoom","Math","round","color","_dynamicPropertyMap","set","fillColor","cim","placement","type","shiftOddRows","height","_height","offsetX","_offsetX","offsetY","_offsetY","M","scaleX","_scaleX","g","angle","_angle","effects","_effects","_cimFillLayer","_bitset","colorLocked","applyRandomOffset","sampleAlphaOnly","_fillMaterialKey","load","materialKey","fromCIMFill","scaleInfo","bindFeature","readLegacyFeature","forEach","_materialCache","materialHash","get","spriteMosaicItem","rect","width","x","tl","br","aux2_1","aux2_2","aux3","sdf","pattern","textureBinding","_materialKey","data","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../../core/maybe.js\";import{pt2px as e}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlphaRGBA as s}from\"../../color.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as i,BITSET_GENERIC_LOCK_COLOR as o,BITSET_FILL_RANDOM_PATTERN_OFFSET as r,BITSET_GENERIC_CONSIDER_ALPHA_ONLY as a,SPRITE_PADDING as l}from\"../../definitions.js\";import{radToByte as h}from\"../../GeometryUtils.js\";import{i1616to32 as n,i8888to32 as c}from\"../../number.js\";import{FillMaterialKey as f}from\"../../materialKey/MaterialKey.js\";import{isFunction as m,getMinMaxZoom as p}from\"./util.js\";import _ from\"./WGLBaseFillTemplate.js\";import y from\"./WGLDynamicMeshTemplate.js\";import{ok as d}from\"../../util/Result.js\";class u extends(_(y)){constructor(l,c,p){if(super(l),this._minMaxZoom=n(Math.round(c*i),Math.round(p*i)),m(l.color)){const t=(t,e,i)=>{const o=l.color(t,e,i);return o&&s(o)||0};this._dynamicPropertyMap.set(\"fillColor\",t)}else{const t=l.color;this.fillColor=t&&s(t)||0}const _=\"CIMMarkerPlacementInsidePolygon\"===l.cim.placement?.type&&l.cim.placement.shiftOddRows?2:1,y=l.height;if(m(y)){const t=(t,e,s)=>y(t,e,s)*_;this._dynamicPropertyMap.set(\"_height\",t)}else this._height=(y||0)*_;const d=l.offsetX;if(m(d)){const t=(t,s,i)=>e(d(t,s,i));this._dynamicPropertyMap.set(\"_offsetX\",t)}else this._offsetX=e(d||0);const u=l.offsetY;if(m(u)){const t=(t,s,i)=>e(-u(t,s,i));this._dynamicPropertyMap.set(\"_offsetY\",t)}else this._offsetY=e(-u||0);const M=l.scaleX;m(M)?this._dynamicPropertyMap.set(\"_scaleX\",M):this._scaleX=M||1;const g=l.angle;if(m(g)){const t=(t,e,s)=>h(g(t,e,s));this._dynamicPropertyMap.set(\"_angle\",t)}else this._angle=h(g)||0;if(t(l.effects)){const t=l.effects;m(t)?this._dynamicPropertyMap.set(\"_effects\",t):this._effects=t}this._cimFillLayer=l,this._bitset=(l.colorLocked?o:0)|(l.applyRandomOffset?r:0)|(l.sampleAlphaOnly?a:0),this._fillMaterialKey=f.load(l.materialKey)}static fromCIMFill(t,e){const[s,i]=p(t.scaleInfo,e);return new u(t,s,i)}bindFeature(t,s,i){const o=t.readLegacyFeature();this._dynamicPropertyMap.forEach(((t,e)=>{this[e]=t(o,s,i)}));const r=this._fillMaterialKey,a=this._materialCache,h=(0,this._cimFillLayer.materialHash)(o,s,i),f=a.get(h);let m=null;if(f&&d(f.spriteMosaicItem)&&(m=f.spriteMosaicItem),m){const{rect:t,width:s,height:i}=m,o=t.x+l,a=t.y+l,h=o+s,f=a+i;let p=Math.round(e(this._height));p<=0&&(p=f-a);let _=Math.round(e(this._height/i*s||0));_<=0&&(_=h-o);const y=this._scaleX,d=1;this.tl=n(o,a),this.br=n(h,f),this.aux2_1=n(_,p),this.aux2_2=n(this._offsetX,this._offsetY),this.aux3=c(y,d,this._angle,0),r.sdf=m.sdf,r.pattern=!0,r.textureBinding=m.textureBinding}else this.tl=0,this.br=0,this.aux2_1=0,this.aux2_2=0,this.aux3=0,r.sdf=!1,r.pattern=!1,r.textureBinding=0;this._materialKey=r.data}}export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}