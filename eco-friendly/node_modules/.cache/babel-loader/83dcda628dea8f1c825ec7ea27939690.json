{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/has.js\";\nimport { isAbortError as i } from \"../../../../../core/promiseUtils.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/accessorSupport/set.js\";\nimport { subclass as s } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as r } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { FeatureTile as a } from \"../../../engine/webgl/FeatureTile.js\";\nimport { simplifyVVRenderer as o } from \"../support/rendererUtils.js\";\nimport l from \"./BaseTileRenderer.js\";\nimport { convertVisualVariables as n } from \"./support/visualVariablesUtils.js\";\nimport { WGLFeatureView as u } from \"./support/WGLFeatureView.js\";\nlet p = class extends l {\n  constructor() {\n    super(...arguments), this.type = \"symbol\";\n  }\n\n  install(e) {\n    const t = () => this.notifyChange(\"updating\"),\n          i = new u(this.tileInfoView, this.layerView, this.layer, t);\n\n    this.featuresView = i, e.addChild(i);\n  }\n\n  uninstall(e) {\n    e.removeChild(this.featuresView), this.featuresView.destroy(), this.featuresView = null;\n  }\n\n  fetchResource(e, t) {\n    const {\n      url: s\n    } = e,\n          r = this.featuresView.stage;\n\n    try {\n      return r.resourceManager.fetchResource(s, {\n        signal: t.signal\n      });\n    } catch (a) {\n      return i(a) ? Promise.resolve({\n        width: 0,\n        height: 0\n      }) : Promise.reject(a);\n    }\n  }\n\n  isUpdating() {\n    const e = super.isUpdating(),\n          i = !this.featuresView || this.featuresView.isUpdating(),\n          s = this.featuresView?.hasEmptyAttributeView(),\n          r = e || i || e && s;\n    return t(\"esri-2d-log-updating\") && console.log(`Updating SymbolTileRenderer ${r}\\n  -> updatingTiles ${e}\\n  -> hasFeaturesView ${!!this.featuresView}\\n  -> updatingFeaturesView ${i}`), r;\n  }\n\n  hitTest(e) {\n    return this.featuresView.hitTest(e);\n  }\n\n  supportsRenderer(e) {\n    return null != e && [\"simple\", \"class-breaks\", \"unique-value\", \"dot-density\", \"dictionary\", \"heatmap\", \"pie-chart\"].includes(e.type);\n  }\n\n  onConfigUpdate(e) {\n    let t = null;\n\n    if (\"visualVariables\" in e) {\n      const i = (o(e).visualVariables || []).map(e => {\n        const t = e.clone();\n        return \"normalizationField\" in e && (t.normalizationField = null), e.valueExpression && \"$view.scale\" !== e.valueExpression && (t.valueExpression = null, t.field = \"nop\"), t;\n      });\n      t = n(i);\n    }\n\n    this.featuresView.setRendererInfo(e, t, this.layerView.featureEffect);\n  }\n\n  onTileData(e) {\n    const t = this.tiles.get(e.tileKey);\n    t && e.data && this.featuresView.onTileData(t, e.data), this.layerView.view.labelManager.requestUpdate();\n  }\n\n  onTileError(e) {\n    const t = this.tiles.get(e.tileKey);\n    t && this.featuresView.onTileError(t);\n  }\n\n  forceAttributeTextureUpload() {\n    this.featuresView.attributeView.forceTextureUpload();\n  }\n\n  lockGPUUploads() {\n    this.featuresView.attributeView.lockTextureUpload(), this.tiles.forEach(e => e.lock());\n  }\n\n  unlockGPUUploads() {\n    this.featuresView.attributeView.unlockTextureUpload(), this.tiles.forEach(e => e.unlock());\n  }\n\n  async getMaterialItems(e) {\n    return this.featuresView.getMaterialItems(e);\n  }\n\n  invalidateLabels() {\n    this.featuresView.hasLabels && this.layerView.view.labelManager.requestUpdate();\n  }\n\n  createTile(e) {\n    const t = this.tileInfoView.getTileBounds(r(), e),\n          i = () => this.layerView.view.labelManager.requestUpdate();\n\n    return new a(e, t[0], t[3], this.featuresView.attributeView, i);\n  }\n\n  disposeTile(e) {\n    this.featuresView.removeChild(e), e.destroy(), this.layerView.view.labelManager.requestUpdate();\n  }\n\n};\np = e([s(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")], p);\nconst c = p;\nexport { c as default };","map":{"version":3,"names":["_","e","t","isAbortError","i","subclass","s","create","r","FeatureTile","a","simplifyVVRenderer","o","l","convertVisualVariables","n","WGLFeatureView","u","p","constructor","arguments","type","install","notifyChange","tileInfoView","layerView","layer","featuresView","addChild","uninstall","removeChild","destroy","fetchResource","url","stage","resourceManager","signal","Promise","resolve","width","height","reject","isUpdating","hasEmptyAttributeView","console","log","hitTest","supportsRenderer","includes","onConfigUpdate","visualVariables","map","clone","normalizationField","valueExpression","field","setRendererInfo","featureEffect","onTileData","tiles","get","tileKey","data","view","labelManager","requestUpdate","onTileError","forceAttributeTextureUpload","attributeView","forceTextureUpload","lockGPUUploads","lockTextureUpload","forEach","lock","unlockGPUUploads","unlockTextureUpload","unlock","getMaterialItems","invalidateLabels","hasLabels","createTile","getTileBounds","disposeTile","c","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/has.js\";import{isAbortError as i}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/set.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as r}from\"../../../../../geometry/support/aaBoundingRect.js\";import{FeatureTile as a}from\"../../../engine/webgl/FeatureTile.js\";import{simplifyVVRenderer as o}from\"../support/rendererUtils.js\";import l from\"./BaseTileRenderer.js\";import{convertVisualVariables as n}from\"./support/visualVariablesUtils.js\";import{WGLFeatureView as u}from\"./support/WGLFeatureView.js\";let p=class extends l{constructor(){super(...arguments),this.type=\"symbol\"}install(e){const t=()=>this.notifyChange(\"updating\"),i=new u(this.tileInfoView,this.layerView,this.layer,t);this.featuresView=i,e.addChild(i)}uninstall(e){e.removeChild(this.featuresView),this.featuresView.destroy(),this.featuresView=null}fetchResource(e,t){const{url:s}=e,r=this.featuresView.stage;try{return r.resourceManager.fetchResource(s,{signal:t.signal})}catch(a){return i(a)?Promise.resolve({width:0,height:0}):Promise.reject(a)}}isUpdating(){const e=super.isUpdating(),i=!this.featuresView||this.featuresView.isUpdating(),s=this.featuresView?.hasEmptyAttributeView(),r=e||i||e&&s;return t(\"esri-2d-log-updating\")&&console.log(`Updating SymbolTileRenderer ${r}\\n  -> updatingTiles ${e}\\n  -> hasFeaturesView ${!!this.featuresView}\\n  -> updatingFeaturesView ${i}`),r}hitTest(e){return this.featuresView.hitTest(e)}supportsRenderer(e){return null!=e&&[\"simple\",\"class-breaks\",\"unique-value\",\"dot-density\",\"dictionary\",\"heatmap\",\"pie-chart\"].includes(e.type)}onConfigUpdate(e){let t=null;if(\"visualVariables\"in e){const i=(o(e).visualVariables||[]).map((e=>{const t=e.clone();return\"normalizationField\"in e&&(t.normalizationField=null),e.valueExpression&&\"$view.scale\"!==e.valueExpression&&(t.valueExpression=null,t.field=\"nop\"),t}));t=n(i)}this.featuresView.setRendererInfo(e,t,this.layerView.featureEffect)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&e.data&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach((e=>e.lock()))}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach((e=>e.unlock()))}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&this.layerView.view.labelManager.requestUpdate()}createTile(e){const t=this.tileInfoView.getTileBounds(r(),e),i=()=>this.layerView.view.labelManager.requestUpdate();return new a(e,t[0],t[3],this.featuresView.attributeView,i)}disposeTile(e){this.featuresView.removeChild(e),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};p=e([s(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")],p);const c=p;export{c as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}