{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { equals as r } from \"../../../../../core/arrayUtils.js\";\nimport s from \"../../../../../core/Logger.js\";\nimport { clamp as o } from \"../../../../../core/mathUtils.js\";\nimport { disposeMaybe as n, destroyMaybe as i, isNone as a, isSome as c } from \"../../../../../core/maybe.js\";\nimport { createAbortError as d } from \"../../../../../core/promiseUtils.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as m } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { f as g, t as u, e as h } from \"../../../../../chunks/mat3.js\";\nimport { c as p } from \"../../../../../chunks/mat3f64.js\";\nimport { I as f, c as b } from \"../../../../../chunks/mat4f64.js\";\nimport { s as y, c as j, v as O, e as v } from \"../../../../../chunks/vec3.js\";\nimport { c as w } from \"../../../../../chunks/vec3f64.js\";\nimport { WatchUpdatingTracking as E } from \"../../../../../core/support/WatchUpdatingTracking.js\";\nimport { g as R, d as x } from \"../../../../../chunks/sphere.js\";\nimport { c as T } from \"../../../../../chunks/vec33.js\";\nimport { ViewingMode as _ } from \"../../../../ViewingMode.js\";\nimport { encodeElevationOffset as M } from \"../../collections/Component/Material/shader/ComponentData.glsl.js\";\nimport { TwoVectorPosition as C } from \"../../core/util/TwoVectorPosition.js\";\nimport { GridLocalOriginFactory as D } from \"../GridLocalOriginFactory.js\";\nimport { applyToModelMatrix as P } from \"../localOriginHelper.js\";\nimport { LocalOriginManager as S } from \"../LocalOriginManager.js\";\nimport { Object3D as A } from \"../Object3D.js\";\nimport { VertexAttribute as k } from \"../VertexAttribute.js\";\nimport { VertexLayout as B, EdgeShaderAttributeLocations as I, glVertexLayout as U, EdgeInputBufferLayout as L } from \"./bufferLayouts.js\";\nimport { RegularEdgeBufferWriter as V, SilhouetteEdgeBufferWriter as N } from \"./edgeBufferWriters.js\";\nimport { EdgeType as H } from \"./edgePreprocessing.js\";\nimport { EdgeRenderer as z, LINE_WIDTH_FRACTION_FACTOR as W, EXTENSION_LENGTH_OFFSET as q } from \"./EdgeRenderer.js\";\nimport { EdgePassParameters as G } from \"./EdgeShaderParameters.js\";\nimport K from \"./EdgeWorkerHandle.js\";\nimport { Transparency as F } from \"./interfaces.js\";\nimport { generateStrokesTexture as Q } from \"./strokes.js\";\nimport { determineRendererType as J, determineEdgeTransparency as X, determineObjectTransparency as Y, fillComponenBufferIndices as Z, computeEdgeCount as $ } from \"./util.js\";\nimport { BufferManager as ee } from \"../TextureBackedBuffer/BufferManager.js\";\nimport { BufferObject as te } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as re } from \"../../../../webgl/enums.js\";\nimport { VertexArrayObject as se } from \"../../../../webgl/VertexArrayObject.js\";\nconst oe = s.getLogger(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\");\nlet ne = class extends t {\n  constructor(e) {\n    super(e), this.updatingHandles = new E(), this.perObjectData = new Map(), this.perObjectDataEvictionCache = new Set(), this.renderers = new Map(), this.numberOfRenderedEdges = {\n      [F.TRANSPARENT]: 0,\n      [F.OPAQUE]: 0\n    }, this.gpuMemoryUsage = 0, this.workerAbort = new AbortController(), this.tmpModelPosition = w(), this.localOrigins = new S(new D(e.renderSR));\n  }\n\n  initialize() {\n    this.worker = new K(this.schedule), this.componentColorManager = new ee(this.rctx, 3);\n    const e = B.createBuffer(4);\n\n    for (let t = 0; t < 4; t++) e.sideness.set(t, 0, 0 === t || 3 === t ? 0 : 1), e.sideness.set(t, 1, 0 === t || 1 === t ? 0 : 1);\n\n    this.verticesBufferObject = te.createVertex(this.rctx, re.STATIC_DRAW, e.buffer);\n  }\n\n  destroy() {\n    this.destroyed || (this.perObjectData.forEach(e => this._discardObjectEntry(e)), this.perObjectData.clear(), this.strokesTexture = n(this.strokesTexture), this.componentColorManager = i(this.componentColorManager), this.workerAbort.abort(), this.worker.destroy(), this.verticesBufferObject = n(this.verticesBufferObject), this.renderers.clear(), this.updatingHandles.destroy());\n  }\n\n  get updating() {\n    return this.updatingHandles.updating;\n  }\n\n  get usedMemory() {\n    return this.gpuMemoryUsage;\n  }\n\n  get numberOfRenderedPrimitives() {\n    return this.numberOfRenderedEdges[F.TRANSPARENT] + this.numberOfRenderedEdges[F.OPAQUE];\n  }\n\n  shouldRender() {\n    return this.renderers.size > 0;\n  }\n\n  async addComponentObject(e, t, r, s, o, n, i, a) {\n    if (this.hasObject(e)) return this.getObjectMemoryUsage(e);\n    let c;\n    const d = new ce(new Promise(e => c = e), r.center, r.radius);\n    this.perObjectData.set(e, d);\n    const l = await this.updatingHandles.addPromise(this._addComponentGeometry(t, d, s, o, n, i, a));\n    return this.setNeedsRender(), c(), l;\n  }\n\n  async addOrUpdateObject3D(e, t, r, s) {\n    if (this.destroyed) return void oe.warn(\"Attempt to add an object to a destroyed instance\");\n    const o = this.perObjectData.get(e);\n    let n;\n    o?.renderables.length > 0 && this.perObjectDataEvictionCache.add(o);\n    const i = e.boundingVolumeWorldSpace.bounds,\n          a = new ce(new Promise(e => n = e), R(i), x(i));\n    this.perObjectData.set(e, a);\n    const c = new Array();\n    if (r.mergeGeometries && e.geometries.length > 1 && ae(e)) c.push(this._addObjectMergedGeometries(e, a, t, r, s));else for (let d = 0; d < e.geometries.length; d++) {\n      const o = e.geometryRecords[d];\n      if (!o.material.supportsEdges) continue;\n      const n = e.geometries[d];\n      c.push(this._addGeometry(e, a, n, o, t[0], r, s));\n    }\n    await this.updatingHandles.addPromise(Promise.all(c)), this.perObjectDataEvictionCache.delete(a), this._discardObjectEntry(o), this.setNeedsRender(), n();\n  }\n\n  _discardObjectEntry(e) {\n    e && (e.renderables.length && (e.renderables.forEach(e => this._removeRenderable(e)), this.setNeedsRender()), e.loaded = null);\n  }\n\n  hasObject(e) {\n    return this.perObjectData.has(e);\n  }\n\n  async updateAllComponentOpacities(e, t) {\n    const r = t instanceof Array ? e => t[e] : () => t;\n    (await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach(e => {\n      const t = e.components.meta.length;\n\n      for (let s = 0; s < t; s++) {\n        const t = r(s),\n              o = e.components.meta[s],\n              n = o.index;\n        o.material.opacity = t, e.components.buffer.textureBuffer.setDataElement(n, 1, 3, 255 * t);\n      }\n\n      this._updateTransparency(e);\n    }), this.setNeedsRender();\n  }\n\n  async getObjectMemoryUsage(e) {\n    return (await this._getObjectEntry(e)).renderables.reduce((e, t) => e + t.statistics.gpuMemoryUsage, 0);\n  }\n\n  async updateAllComponentMaterials(e, t, r, s) {\n    const o = e instanceof A,\n          n = !!r.hasSlicePlane,\n          i = J(t),\n          a = z.getKey(i, n, o);\n    (await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach(e => {\n      if (a !== e.rendererKey) {\n        const t = this.renderers.get(e.rendererKey),\n              r = this._acquireRenderer(i, n, o);\n\n        t.removeRenderable(e), t.refCount.decrement(), e.rendererKey = a, r.addRenderable(e);\n      }\n\n      for (let r = 0; r < t.length; r++) e.components.meta[r].material = t[r];\n\n      s && this._updateComponentBuffer(e.components), this._updateTransparency(e);\n    }), this.setNeedsRender();\n  }\n\n  async updateAllVerticalOffsets(e, t) {\n    (await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach(e => {\n      const r = e.components.meta;\n\n      for (let s = 0; s < r.length; s++) e.components.meta[s].verticalOffset = t?.[s] ?? 0;\n\n      this._updateComponentBuffer(e.components);\n    }), this.setNeedsRender();\n  }\n\n  async updateObjectVisibility(e, t) {\n    (await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach(e => e.visible = t), this.setNeedsRender();\n  }\n\n  removeObject(e) {\n    const t = this.perObjectData.get(e);\n    t && (this.perObjectData.delete(e), this._discardObjectEntry(t));\n  }\n\n  async _getObjectEntry(e) {\n    const t = this.perObjectData.get(e);\n    if (!t) throw \"no object\";\n    if (await t.loaded, null == t.loaded) throw d();\n    return t;\n  }\n\n  removeAll() {\n    this.perObjectData.forEach((e, t) => this.removeObject(t));\n  }\n\n  render(e, t) {\n    if (this.numberOfRenderedEdges[t] = 0, a(this.componentColorManager)) return;\n    this.localOrigins.updateViewMatrices(e.camera.viewMatrix);\n    const r = e.camera.viewInverseTransposeMatrix,\n          s = w(),\n          o = new C();\n    let n = 0,\n        i = 0;\n    if (this.renderers.forEach(r => {\n      0 === r.refCount.value ? (this.renderers.delete(r.key), r.dispose()) : r.forEachRenderable(t => {\n        t.visible && (n += t.statistics.averageEdgeLength, i++, t.regular && r.updateTechnique(e, !1), t.silhouette && r.updateTechnique(e, !0));\n      }, t);\n    }), this.componentColorManager.garbageCollect(), this.componentColorManager.updateTextures(), 0 === i) return;\n    const c = 40 * n / i,\n          d = e.camera.perScreenPixelRatio,\n          l = new G(c, d, t);\n    y(s, r[3], r[7], r[11]), o.set(s), j(l.transformWorldFromViewTH, o.high), j(l.transformWorldFromViewTL, o.low), g(l.transformViewFromCameraRelativeRS, e.camera.viewMatrix), u(de, l.transformViewFromCameraRelativeRS), h(l.transformNormalViewFromGlobal, de), l.transformProjFromView = e.camera.projectionMatrix, this._updateObjectCameraDistances(e), this.renderers.forEach(t => {\n      this._renderRegularEdges(t, e, l), this._renderSilhouetteEdges(t, e, l);\n    });\n  }\n\n  _updateTransparency(e) {\n    const t = X(e.components.meta),\n          r = Y(e.components.meta);\n    t === e.edgeTransparency && r === e.objectTransparency || (e.edgeTransparency = t, e.objectTransparency = r, this.renderers.get(e.rendererKey).setRenderablesDirty());\n  }\n\n  _computeModelTransformWithLocalOrigin(e, t, r) {\n    if (e.getCombinedStaticTransformation(t, r), c(t.origin)) this.localOrigins.register(t.origin);else {\n      const e = y(this.tmpModelPosition, r[12], r[13], r[14]);\n      t.origin = this.localOrigins.acquire(e);\n    }\n    return P(t.origin.vec3, r), t.origin;\n  }\n\n  _updateComponentBuffer(e) {\n    const {\n      meta: t,\n      buffer: r\n    } = e,\n          s = new Uint8Array(4);\n\n    for (let n = 0; n < t.length; n++) {\n      const e = t[n].material,\n            i = t[n].index,\n            a = o(Math.round(e.size * W), 0, 255),\n            c = o(e.extensionLength, -q, 255 - q) + q,\n            d = \"solid\" === e.type ? H.SOLID : H.SKETCH,\n            l = 255 * e.opacity,\n            m = e.color,\n            g = 255 * m[0],\n            u = 255 * m[1],\n            h = 255 * m[2],\n            p = 255 * m[3];\n      r.textureBuffer.setData(i, 0, g, u, h, p), r.textureBuffer.setData(i, 1, a, c, d, l), M(t[n].verticalOffset, s), r.textureBuffer.setData(i, 2, s[0], s[1], s[2], s[3]);\n    }\n  }\n\n  _createComponentBuffers(e) {\n    if (a(this.componentColorManager)) return null;\n    const t = new Array(),\n          r = this.componentColorManager.getBuffer(e.length);\n\n    for (let o = 0; o < e.length; o++) {\n      const s = e[o],\n            n = r.acquireIndex();\n      t.push({\n        index: n,\n        verticalOffset: 0,\n        material: s\n      });\n    }\n\n    const s = {\n      meta: t,\n      buffer: r\n    };\n    return this._updateComponentBuffer(s), s;\n  }\n\n  _extractEdges(e, t, r, s, o, n = o.length) {\n    return this.worker.process({\n      data: t,\n      indices: o,\n      indicesLength: n,\n      writerSettings: e,\n      skipDeduplicate: r\n    }, this.workerAbort.signal, s);\n  }\n\n  _createEdgeResources(e) {\n    const t = {};\n    if (a(this.verticesBufferObject)) return t;\n\n    if (e.regular.lodInfo.lengths.length > 0) {\n      const r = new se(this.rctx, I, {\n        vertices: U,\n        instances: V.glLayout\n      }, {\n        vertices: this.verticesBufferObject,\n        instances: te.createVertex(this.rctx, re.STATIC_DRAW, e.regular.instancesData.buffer)\n      });\n      t.regular = {\n        vao: r,\n        lod: e.regular.lodInfo\n      };\n    }\n\n    if (e.silhouette.lodInfo.lengths.length > 0) {\n      const r = new se(this.rctx, I, {\n        vertices: U,\n        instances: N.glLayout\n      }, {\n        vertices: this.verticesBufferObject,\n        instances: te.createVertex(this.rctx, re.STATIC_DRAW, e.silhouette.instancesData.buffer)\n      });\n      t.silhouette = {\n        vao: r,\n        lod: e.silhouette.lodInfo\n      };\n    }\n\n    return t;\n  }\n\n  async _addGeometry(e, t, r, s, o, n, i) {\n    const a = r.vertexAttributes.get(k.POSITION),\n          c = r.indices.get(k.POSITION),\n          d = b(),\n          l = {\n      position: a,\n      indices: c,\n      modelTransform: d,\n      origin: this._computeModelTransformWithLocalOrigin(e, s, d)\n    };\n    return this._addPositionData(t, l, r.edgeIndicesLength, o, n, i);\n  }\n\n  async _addPositionData(e, t, r, s, o, n = !1) {\n    if (null == e.loaded) return;\n\n    const i = this._createComponentBuffers([s]);\n\n    if (a(i) || r <= 0) return;\n\n    const c = this._acquireRenderer(s.type, !!o.hasSlicePlane, !0),\n          {\n      modelTransform: d,\n      origin: l\n    } = t,\n          m = t.indices,\n          g = t.position,\n          u = g.data.length / g.size,\n          h = L.createBuffer(u);\n\n    for (let a = 0; a < u; a++) h.position.set(a, 0, g.data[a * g.size + 0]), h.position.set(a, 1, g.data[a * g.size + 1]), h.position.set(a, 2, g.data[a * g.size + 2]);\n\n    Z(i.meta, [0, h.componentIndex.count], h.componentIndex);\n    const p = await this.updatingHandles.addPromise(this._extractEdges(c.writerSettings, h, !1, n, m, r));\n    if (null == e.loaded) return;\n\n    const {\n      regular: f,\n      silhouette: b\n    } = this._createEdgeResources(p),\n          y = (f ? f.vao.size : 0) + (b ? b.vao.size : 0),\n          j = {\n      regular: f,\n      silhouette: b,\n      transform: {\n        modelMatrix: d,\n        origin: l\n      },\n      statistics: {\n        gpuMemoryUsage: y,\n        externalMemoryUsage: !1,\n        averageEdgeLength: p.averageEdgeLength\n      },\n      components: i,\n      visible: !0,\n      edgeTransparency: X(i.meta),\n      objectTransparency: Y(i.meta),\n      distanceToCamera: 0,\n      rendererKey: c.key\n    };\n\n    e.renderables.push(j), c.addRenderable(j), this.gpuMemoryUsage += y;\n  }\n\n  async _addComponentGeometry(e, t, r, s, o, n, i) {\n    if (null == t.loaded) return 0;\n\n    const c = this._createComponentBuffers(n);\n\n    if (a(c)) return 0;\n\n    const d = J(n),\n          l = this._acquireRenderer(d, i.hasSlicePlane || !1, !1),\n          m = L.createBuffer(r.count);\n\n    T(m.position, r), Z(c.meta, o, m.componentIndex, s);\n    const g = !0,\n          u = l.writerSettings,\n          h = await this.updatingHandles.addPromise(this._extractEdges(u, m, g, !1, s));\n    if (null == t.loaded) return 0;\n\n    const {\n      regular: p,\n      silhouette: f\n    } = this._createEdgeResources(h),\n          b = (p ? p.vao.size : 0) + (f ? f.vao.size : 0),\n          y = {\n      regular: p,\n      silhouette: f,\n      transform: e,\n      statistics: {\n        gpuMemoryUsage: b,\n        externalMemoryUsage: !0,\n        averageEdgeLength: h.averageEdgeLength\n      },\n      components: c,\n      visible: !0,\n      edgeTransparency: X(c.meta),\n      objectTransparency: Y(c.meta),\n      distanceToCamera: 0,\n      rendererKey: l.key\n    };\n\n    return t.renderables.push(y), l.addRenderable(y), b;\n  }\n\n  async _addObjectMergedGeometries(e, t, r, s, o) {\n    const n = new Map();\n    let i = 0,\n        a = null,\n        c = 0;\n\n    for (let b = 0; b < e.geometries.length; b++) {\n      const t = e.geometries[b],\n            r = e.geometryRecords[b];\n      if (!r.material.supportsEdges) continue;\n      !a && r.origin && (a = r);\n      const s = t.vertexAttributes.get(k.POSITION);\n      c += s.data.length / s.size, i += t.edgeIndicesLength;\n    }\n\n    const d = c >= 65536 ? Uint32Array : Uint16Array,\n          l = i ? new d(i) : null,\n          m = [];\n    let g = 0;\n\n    for (let b = 0; b < e.geometries.length; b++) {\n      const t = e.geometries[b];\n      if (!e.geometryRecords[b].material.supportsEdges) continue;\n      const r = t.vertexAttributes.get(k.POSITION),\n            s = t.indices.get(k.POSITION);\n      let o = n.get(r.data);\n\n      if (null == o) {\n        o = m.length / 3;\n\n        for (let e = 0; e < r.data.length; e += r.size) m.push(r.data[e + 0]), m.push(r.data[e + 1]), m.push(r.data[e + 2]);\n\n        n.set(r.data, o);\n      }\n\n      if (s) for (let e = 0; e < t.edgeIndicesLength; e++) l[g++] = o + s[e];\n    }\n\n    const u = a || e.geometryRecords[0],\n          h = b(),\n          p = this._computeModelTransformWithLocalOrigin(e, u, h);\n\n    for (let b = 0; b < e.geometryRecords.length; b++) e.geometryRecords[b].origin = p;\n\n    const f = {\n      position: {\n        data: m,\n        size: 3\n      },\n      indices: l,\n      modelTransform: h,\n      origin: p\n    };\n    await this.updatingHandles.addPromise(this._addPositionData(t, f, l.length, r[0], s, o));\n  }\n\n  _acquireRenderer(e, t, r) {\n    const s = z.getKey(e, t, r);\n    let o = this.renderers.get(s);\n    return a(this.strokesTexture) && (this.strokesTexture = Q(this.rctx)), o || (o = new z(this.rctx, this.techniqueRepository, {\n      type: e,\n      hasSlicePlane: t,\n      strokesTexture: this.strokesTexture,\n      legacy: r,\n      spherical: this.viewingMode === _.Global\n    }), this.renderers.set(s, o)), o.refCount.increment(), o;\n  }\n\n  _removeRenderable(e) {\n    ie(e);\n    const t = this.renderers.get(e.rendererKey);\n\n    if (t) {\n      t.removeRenderable(e), t.refCount.decrement(), \"origin\" in e.transform && this.localOrigins.release(e.transform.origin), this.gpuMemoryUsage -= e.statistics.externalMemoryUsage ? 0 : e.statistics.gpuMemoryUsage;\n\n      for (const t of e.components.meta) e.components.buffer.releaseIndex(t.index);\n    }\n  }\n\n  _updateObjectCameraDistances(e) {\n    const t = e.camera.eye,\n          r = e.camera.viewForward,\n          s = w(),\n          o = e => {\n      const {\n        center: o,\n        radius: n\n      } = e;\n      O(s, o, t);\n      const i = v(s, r),\n            a = i < -n ? 1 / 0 : i < n ? 0 : i - n;\n      e.renderables.forEach(e => e.distanceToCamera = a);\n    };\n\n    this.perObjectData.forEach(o), this.perObjectDataEvictionCache.forEach(o);\n  }\n\n  _renderRegularEdges(e, t, r) {\n    const s = e.bindRegularEdges(r, t),\n          o = r.transparency;\n    e.forEachRenderable(n => {\n      if (!n.visible || !n.regular) return;\n      const i = $(n.regular.lod.lengths, n.distanceToCamera, r),\n            a = \"origin\" in n.transform ? this.localOrigins.getViewMatrix(n.transform.origin) : f;\n      e.renderRegularEdges(s, n, t, i, a), this.numberOfRenderedEdges[o] += i;\n    }, o);\n  }\n\n  _renderSilhouetteEdges(e, t, r) {\n    const s = e.bindSilhouetteEdges(r, t),\n          o = r.transparency;\n    e.forEachRenderable(n => {\n      if (!n.visible || !n.silhouette) return;\n      const i = $(n.silhouette.lod.lengths, n.distanceToCamera, r),\n            a = \"origin\" in n.transform ? this.localOrigins.getViewMatrix(n.transform.origin) : f;\n      e.renderSilhouetteEdges(s, n, t, i, a), this.numberOfRenderedEdges[o] += i;\n    }, o);\n  }\n\n};\n\nfunction ie(e) {\n  e.regular && (e.regular.vao.vertexBuffers.instances.dispose(), e.regular.vao.dispose(!1), e.regular.vao = null), e.silhouette && (e.silhouette.vao.vertexBuffers.instances.dispose(), e.silhouette.vao.dispose(!1), e.silhouette.vao = null);\n}\n\nfunction ae(e) {\n  let t = null,\n      s = null;\n\n  for (let o = 0; o < e.geometries.length; o++) {\n    const n = e.geometryRecords[o];\n\n    if (n.material.supportsEdges) {\n      if (t) {\n        if (!r(t, n.transformation)) return !1;\n      } else t = n.transformation;\n\n      if (!s && c(n.origin)) s = n;else if (c(s?.origin) && c(n.origin) && s.origin.id !== n.origin.id) return !1;\n    }\n  }\n\n  return !0;\n}\n\ne([l({\n  constructOnly: !0\n})], ne.prototype, \"rctx\", void 0), e([l({\n  constructOnly: !0\n})], ne.prototype, \"renderSR\", void 0), e([l({\n  constructOnly: !0\n})], ne.prototype, \"viewingMode\", void 0), e([l({\n  constructOnly: !0\n})], ne.prototype, \"techniqueRepository\", void 0), e([l({\n  constructOnly: !0\n})], ne.prototype, \"setNeedsRender\", void 0), e([l({\n  constructOnly: !0\n})], ne.prototype, \"schedule\", void 0), e([l({\n  readOnly: !0\n})], ne.prototype, \"updatingHandles\", void 0), e([l({\n  readOnly: !0\n})], ne.prototype, \"updating\", null), ne = e([m(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\")], ne);\n\nclass ce {\n  constructor(e, t, r) {\n    this.center = t, this.radius = r, this.renderables = new Array(), this.loaded = e, this.loaded.then(() => {\n      null != this.loaded && (this.loaded = !0);\n    });\n  }\n\n}\n\nconst de = p();\nexport { ne as EdgeView };","map":{"version":3,"names":["_","e","t","equals","r","s","clamp","o","disposeMaybe","n","destroyMaybe","i","isNone","a","isSome","c","createAbortError","d","property","l","subclass","m","f","g","u","h","p","I","b","y","j","v","O","w","WatchUpdatingTracking","E","R","x","T","ViewingMode","encodeElevationOffset","M","TwoVectorPosition","C","GridLocalOriginFactory","D","applyToModelMatrix","P","LocalOriginManager","S","Object3D","A","VertexAttribute","k","VertexLayout","B","EdgeShaderAttributeLocations","glVertexLayout","U","EdgeInputBufferLayout","L","RegularEdgeBufferWriter","V","SilhouetteEdgeBufferWriter","N","EdgeType","H","EdgeRenderer","z","LINE_WIDTH_FRACTION_FACTOR","W","EXTENSION_LENGTH_OFFSET","q","EdgePassParameters","G","K","Transparency","F","generateStrokesTexture","Q","determineRendererType","J","determineEdgeTransparency","X","determineObjectTransparency","Y","fillComponenBufferIndices","Z","computeEdgeCount","$","BufferManager","ee","BufferObject","te","Usage","re","VertexArrayObject","se","oe","getLogger","ne","constructor","updatingHandles","perObjectData","Map","perObjectDataEvictionCache","Set","renderers","numberOfRenderedEdges","TRANSPARENT","OPAQUE","gpuMemoryUsage","workerAbort","AbortController","tmpModelPosition","localOrigins","renderSR","initialize","worker","schedule","componentColorManager","rctx","createBuffer","sideness","set","verticesBufferObject","createVertex","STATIC_DRAW","buffer","destroy","destroyed","forEach","_discardObjectEntry","clear","strokesTexture","abort","updating","usedMemory","numberOfRenderedPrimitives","shouldRender","size","addComponentObject","hasObject","getObjectMemoryUsage","ce","Promise","center","radius","addPromise","_addComponentGeometry","setNeedsRender","addOrUpdateObject3D","warn","get","renderables","length","add","boundingVolumeWorldSpace","bounds","Array","mergeGeometries","geometries","ae","push","_addObjectMergedGeometries","geometryRecords","material","supportsEdges","_addGeometry","all","delete","_removeRenderable","loaded","has","updateAllComponentOpacities","_getObjectEntry","components","meta","index","opacity","textureBuffer","setDataElement","_updateTransparency","reduce","statistics","updateAllComponentMaterials","hasSlicePlane","getKey","rendererKey","_acquireRenderer","removeRenderable","refCount","decrement","addRenderable","_updateComponentBuffer","updateAllVerticalOffsets","verticalOffset","updateObjectVisibility","visible","removeObject","removeAll","render","updateViewMatrices","camera","viewMatrix","viewInverseTransposeMatrix","value","key","dispose","forEachRenderable","averageEdgeLength","regular","updateTechnique","silhouette","garbageCollect","updateTextures","perScreenPixelRatio","transformWorldFromViewTH","high","transformWorldFromViewTL","low","transformViewFromCameraRelativeRS","de","transformNormalViewFromGlobal","transformProjFromView","projectionMatrix","_updateObjectCameraDistances","_renderRegularEdges","_renderSilhouetteEdges","edgeTransparency","objectTransparency","setRenderablesDirty","_computeModelTransformWithLocalOrigin","getCombinedStaticTransformation","origin","register","acquire","vec3","Uint8Array","Math","round","extensionLength","type","SOLID","SKETCH","color","setData","_createComponentBuffers","getBuffer","acquireIndex","_extractEdges","process","data","indices","indicesLength","writerSettings","skipDeduplicate","signal","_createEdgeResources","lodInfo","lengths","vertices","instances","glLayout","instancesData","vao","lod","vertexAttributes","POSITION","position","modelTransform","_addPositionData","edgeIndicesLength","componentIndex","count","transform","modelMatrix","externalMemoryUsage","distanceToCamera","Uint32Array","Uint16Array","techniqueRepository","legacy","spherical","viewingMode","Global","increment","ie","release","releaseIndex","eye","viewForward","bindRegularEdges","transparency","getViewMatrix","renderRegularEdges","bindSilhouetteEdges","renderSilhouetteEdges","vertexBuffers","transformation","id","constructOnly","prototype","readOnly","then","EdgeView"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{equals as r}from\"../../../../../core/arrayUtils.js\";import s from\"../../../../../core/Logger.js\";import{clamp as o}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as n,destroyMaybe as i,isNone as a,isSome as c}from\"../../../../../core/maybe.js\";import{createAbortError as d}from\"../../../../../core/promiseUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as m}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{f as g,t as u,e as h}from\"../../../../../chunks/mat3.js\";import{c as p}from\"../../../../../chunks/mat3f64.js\";import{I as f,c as b}from\"../../../../../chunks/mat4f64.js\";import{s as y,c as j,v as O,e as v}from\"../../../../../chunks/vec3.js\";import{c as w}from\"../../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as E}from\"../../../../../core/support/WatchUpdatingTracking.js\";import{g as R,d as x}from\"../../../../../chunks/sphere.js\";import{c as T}from\"../../../../../chunks/vec33.js\";import{ViewingMode as _}from\"../../../../ViewingMode.js\";import{encodeElevationOffset as M}from\"../../collections/Component/Material/shader/ComponentData.glsl.js\";import{TwoVectorPosition as C}from\"../../core/util/TwoVectorPosition.js\";import{GridLocalOriginFactory as D}from\"../GridLocalOriginFactory.js\";import{applyToModelMatrix as P}from\"../localOriginHelper.js\";import{LocalOriginManager as S}from\"../LocalOriginManager.js\";import{Object3D as A}from\"../Object3D.js\";import{VertexAttribute as k}from\"../VertexAttribute.js\";import{VertexLayout as B,EdgeShaderAttributeLocations as I,glVertexLayout as U,EdgeInputBufferLayout as L}from\"./bufferLayouts.js\";import{RegularEdgeBufferWriter as V,SilhouetteEdgeBufferWriter as N}from\"./edgeBufferWriters.js\";import{EdgeType as H}from\"./edgePreprocessing.js\";import{EdgeRenderer as z,LINE_WIDTH_FRACTION_FACTOR as W,EXTENSION_LENGTH_OFFSET as q}from\"./EdgeRenderer.js\";import{EdgePassParameters as G}from\"./EdgeShaderParameters.js\";import K from\"./EdgeWorkerHandle.js\";import{Transparency as F}from\"./interfaces.js\";import{generateStrokesTexture as Q}from\"./strokes.js\";import{determineRendererType as J,determineEdgeTransparency as X,determineObjectTransparency as Y,fillComponenBufferIndices as Z,computeEdgeCount as $}from\"./util.js\";import{BufferManager as ee}from\"../TextureBackedBuffer/BufferManager.js\";import{BufferObject as te}from\"../../../../webgl/BufferObject.js\";import{Usage as re}from\"../../../../webgl/enums.js\";import{VertexArrayObject as se}from\"../../../../webgl/VertexArrayObject.js\";const oe=s.getLogger(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\");let ne=class extends t{constructor(e){super(e),this.updatingHandles=new E,this.perObjectData=new Map,this.perObjectDataEvictionCache=new Set,this.renderers=new Map,this.numberOfRenderedEdges={[F.TRANSPARENT]:0,[F.OPAQUE]:0},this.gpuMemoryUsage=0,this.workerAbort=new AbortController,this.tmpModelPosition=w(),this.localOrigins=new S(new D(e.renderSR))}initialize(){this.worker=new K(this.schedule),this.componentColorManager=new ee(this.rctx,3);const e=B.createBuffer(4);for(let t=0;t<4;t++)e.sideness.set(t,0,0===t||3===t?0:1),e.sideness.set(t,1,0===t||1===t?0:1);this.verticesBufferObject=te.createVertex(this.rctx,re.STATIC_DRAW,e.buffer)}destroy(){this.destroyed||(this.perObjectData.forEach((e=>this._discardObjectEntry(e))),this.perObjectData.clear(),this.strokesTexture=n(this.strokesTexture),this.componentColorManager=i(this.componentColorManager),this.workerAbort.abort(),this.worker.destroy(),this.verticesBufferObject=n(this.verticesBufferObject),this.renderers.clear(),this.updatingHandles.destroy())}get updating(){return this.updatingHandles.updating}get usedMemory(){return this.gpuMemoryUsage}get numberOfRenderedPrimitives(){return this.numberOfRenderedEdges[F.TRANSPARENT]+this.numberOfRenderedEdges[F.OPAQUE]}shouldRender(){return this.renderers.size>0}async addComponentObject(e,t,r,s,o,n,i,a){if(this.hasObject(e))return this.getObjectMemoryUsage(e);let c;const d=new ce(new Promise((e=>c=e)),r.center,r.radius);this.perObjectData.set(e,d);const l=await this.updatingHandles.addPromise(this._addComponentGeometry(t,d,s,o,n,i,a));return this.setNeedsRender(),c(),l}async addOrUpdateObject3D(e,t,r,s){if(this.destroyed)return void oe.warn(\"Attempt to add an object to a destroyed instance\");const o=this.perObjectData.get(e);let n;o?.renderables.length>0&&this.perObjectDataEvictionCache.add(o);const i=e.boundingVolumeWorldSpace.bounds,a=new ce(new Promise((e=>n=e)),R(i),x(i));this.perObjectData.set(e,a);const c=new Array;if(r.mergeGeometries&&e.geometries.length>1&&ae(e))c.push(this._addObjectMergedGeometries(e,a,t,r,s));else for(let d=0;d<e.geometries.length;d++){const o=e.geometryRecords[d];if(!o.material.supportsEdges)continue;const n=e.geometries[d];c.push(this._addGeometry(e,a,n,o,t[0],r,s))}await this.updatingHandles.addPromise(Promise.all(c)),this.perObjectDataEvictionCache.delete(a),this._discardObjectEntry(o),this.setNeedsRender(),n()}_discardObjectEntry(e){e&&(e.renderables.length&&(e.renderables.forEach((e=>this._removeRenderable(e))),this.setNeedsRender()),e.loaded=null)}hasObject(e){return this.perObjectData.has(e)}async updateAllComponentOpacities(e,t){const r=t instanceof Array?e=>t[e]:()=>t;(await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach((e=>{const t=e.components.meta.length;for(let s=0;s<t;s++){const t=r(s),o=e.components.meta[s],n=o.index;o.material.opacity=t,e.components.buffer.textureBuffer.setDataElement(n,1,3,255*t)}this._updateTransparency(e)})),this.setNeedsRender()}async getObjectMemoryUsage(e){return(await this._getObjectEntry(e)).renderables.reduce(((e,t)=>e+t.statistics.gpuMemoryUsage),0)}async updateAllComponentMaterials(e,t,r,s){const o=e instanceof A,n=!!r.hasSlicePlane,i=J(t),a=z.getKey(i,n,o);(await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach((e=>{if(a!==e.rendererKey){const t=this.renderers.get(e.rendererKey),r=this._acquireRenderer(i,n,o);t.removeRenderable(e),t.refCount.decrement(),e.rendererKey=a,r.addRenderable(e)}for(let r=0;r<t.length;r++)e.components.meta[r].material=t[r];s&&this._updateComponentBuffer(e.components),this._updateTransparency(e)})),this.setNeedsRender()}async updateAllVerticalOffsets(e,t){(await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach((e=>{const r=e.components.meta;for(let s=0;s<r.length;s++)e.components.meta[s].verticalOffset=t?.[s]??0;this._updateComponentBuffer(e.components)})),this.setNeedsRender()}async updateObjectVisibility(e,t){(await this.updatingHandles.addPromise(this._getObjectEntry(e))).renderables.forEach((e=>e.visible=t)),this.setNeedsRender()}removeObject(e){const t=this.perObjectData.get(e);t&&(this.perObjectData.delete(e),this._discardObjectEntry(t))}async _getObjectEntry(e){const t=this.perObjectData.get(e);if(!t)throw\"no object\";if(await t.loaded,null==t.loaded)throw d();return t}removeAll(){this.perObjectData.forEach(((e,t)=>this.removeObject(t)))}render(e,t){if(this.numberOfRenderedEdges[t]=0,a(this.componentColorManager))return;this.localOrigins.updateViewMatrices(e.camera.viewMatrix);const r=e.camera.viewInverseTransposeMatrix,s=w(),o=new C;let n=0,i=0;if(this.renderers.forEach((r=>{0===r.refCount.value?(this.renderers.delete(r.key),r.dispose()):r.forEachRenderable((t=>{t.visible&&(n+=t.statistics.averageEdgeLength,i++,t.regular&&r.updateTechnique(e,!1),t.silhouette&&r.updateTechnique(e,!0))}),t)})),this.componentColorManager.garbageCollect(),this.componentColorManager.updateTextures(),0===i)return;const c=40*n/i,d=e.camera.perScreenPixelRatio,l=new G(c,d,t);y(s,r[3],r[7],r[11]),o.set(s),j(l.transformWorldFromViewTH,o.high),j(l.transformWorldFromViewTL,o.low),g(l.transformViewFromCameraRelativeRS,e.camera.viewMatrix),u(de,l.transformViewFromCameraRelativeRS),h(l.transformNormalViewFromGlobal,de),l.transformProjFromView=e.camera.projectionMatrix,this._updateObjectCameraDistances(e),this.renderers.forEach((t=>{this._renderRegularEdges(t,e,l),this._renderSilhouetteEdges(t,e,l)}))}_updateTransparency(e){const t=X(e.components.meta),r=Y(e.components.meta);t===e.edgeTransparency&&r===e.objectTransparency||(e.edgeTransparency=t,e.objectTransparency=r,this.renderers.get(e.rendererKey).setRenderablesDirty())}_computeModelTransformWithLocalOrigin(e,t,r){if(e.getCombinedStaticTransformation(t,r),c(t.origin))this.localOrigins.register(t.origin);else{const e=y(this.tmpModelPosition,r[12],r[13],r[14]);t.origin=this.localOrigins.acquire(e)}return P(t.origin.vec3,r),t.origin}_updateComponentBuffer(e){const{meta:t,buffer:r}=e,s=new Uint8Array(4);for(let n=0;n<t.length;n++){const e=t[n].material,i=t[n].index,a=o(Math.round(e.size*W),0,255),c=o(e.extensionLength,-q,255-q)+q,d=\"solid\"===e.type?H.SOLID:H.SKETCH,l=255*e.opacity,m=e.color,g=255*m[0],u=255*m[1],h=255*m[2],p=255*m[3];r.textureBuffer.setData(i,0,g,u,h,p),r.textureBuffer.setData(i,1,a,c,d,l),M(t[n].verticalOffset,s),r.textureBuffer.setData(i,2,s[0],s[1],s[2],s[3])}}_createComponentBuffers(e){if(a(this.componentColorManager))return null;const t=new Array,r=this.componentColorManager.getBuffer(e.length);for(let o=0;o<e.length;o++){const s=e[o],n=r.acquireIndex();t.push({index:n,verticalOffset:0,material:s})}const s={meta:t,buffer:r};return this._updateComponentBuffer(s),s}_extractEdges(e,t,r,s,o,n=o.length){return this.worker.process({data:t,indices:o,indicesLength:n,writerSettings:e,skipDeduplicate:r},this.workerAbort.signal,s)}_createEdgeResources(e){const t={};if(a(this.verticesBufferObject))return t;if(e.regular.lodInfo.lengths.length>0){const r=new se(this.rctx,I,{vertices:U,instances:V.glLayout},{vertices:this.verticesBufferObject,instances:te.createVertex(this.rctx,re.STATIC_DRAW,e.regular.instancesData.buffer)});t.regular={vao:r,lod:e.regular.lodInfo}}if(e.silhouette.lodInfo.lengths.length>0){const r=new se(this.rctx,I,{vertices:U,instances:N.glLayout},{vertices:this.verticesBufferObject,instances:te.createVertex(this.rctx,re.STATIC_DRAW,e.silhouette.instancesData.buffer)});t.silhouette={vao:r,lod:e.silhouette.lodInfo}}return t}async _addGeometry(e,t,r,s,o,n,i){const a=r.vertexAttributes.get(k.POSITION),c=r.indices.get(k.POSITION),d=b(),l={position:a,indices:c,modelTransform:d,origin:this._computeModelTransformWithLocalOrigin(e,s,d)};return this._addPositionData(t,l,r.edgeIndicesLength,o,n,i)}async _addPositionData(e,t,r,s,o,n=!1){if(null==e.loaded)return;const i=this._createComponentBuffers([s]);if(a(i)||r<=0)return;const c=this._acquireRenderer(s.type,!!o.hasSlicePlane,!0),{modelTransform:d,origin:l}=t,m=t.indices,g=t.position,u=g.data.length/g.size,h=L.createBuffer(u);for(let a=0;a<u;a++)h.position.set(a,0,g.data[a*g.size+0]),h.position.set(a,1,g.data[a*g.size+1]),h.position.set(a,2,g.data[a*g.size+2]);Z(i.meta,[0,h.componentIndex.count],h.componentIndex);const p=await this.updatingHandles.addPromise(this._extractEdges(c.writerSettings,h,!1,n,m,r));if(null==e.loaded)return;const{regular:f,silhouette:b}=this._createEdgeResources(p),y=(f?f.vao.size:0)+(b?b.vao.size:0),j={regular:f,silhouette:b,transform:{modelMatrix:d,origin:l},statistics:{gpuMemoryUsage:y,externalMemoryUsage:!1,averageEdgeLength:p.averageEdgeLength},components:i,visible:!0,edgeTransparency:X(i.meta),objectTransparency:Y(i.meta),distanceToCamera:0,rendererKey:c.key};e.renderables.push(j),c.addRenderable(j),this.gpuMemoryUsage+=y}async _addComponentGeometry(e,t,r,s,o,n,i){if(null==t.loaded)return 0;const c=this._createComponentBuffers(n);if(a(c))return 0;const d=J(n),l=this._acquireRenderer(d,i.hasSlicePlane||!1,!1),m=L.createBuffer(r.count);T(m.position,r),Z(c.meta,o,m.componentIndex,s);const g=!0,u=l.writerSettings,h=await this.updatingHandles.addPromise(this._extractEdges(u,m,g,!1,s));if(null==t.loaded)return 0;const{regular:p,silhouette:f}=this._createEdgeResources(h),b=(p?p.vao.size:0)+(f?f.vao.size:0),y={regular:p,silhouette:f,transform:e,statistics:{gpuMemoryUsage:b,externalMemoryUsage:!0,averageEdgeLength:h.averageEdgeLength},components:c,visible:!0,edgeTransparency:X(c.meta),objectTransparency:Y(c.meta),distanceToCamera:0,rendererKey:l.key};return t.renderables.push(y),l.addRenderable(y),b}async _addObjectMergedGeometries(e,t,r,s,o){const n=new Map;let i=0,a=null,c=0;for(let b=0;b<e.geometries.length;b++){const t=e.geometries[b],r=e.geometryRecords[b];if(!r.material.supportsEdges)continue;!a&&r.origin&&(a=r);const s=t.vertexAttributes.get(k.POSITION);c+=s.data.length/s.size,i+=t.edgeIndicesLength}const d=c>=65536?Uint32Array:Uint16Array,l=i?new d(i):null,m=[];let g=0;for(let b=0;b<e.geometries.length;b++){const t=e.geometries[b];if(!e.geometryRecords[b].material.supportsEdges)continue;const r=t.vertexAttributes.get(k.POSITION),s=t.indices.get(k.POSITION);let o=n.get(r.data);if(null==o){o=m.length/3;for(let e=0;e<r.data.length;e+=r.size)m.push(r.data[e+0]),m.push(r.data[e+1]),m.push(r.data[e+2]);n.set(r.data,o)}if(s)for(let e=0;e<t.edgeIndicesLength;e++)l[g++]=o+s[e]}const u=a||e.geometryRecords[0],h=b(),p=this._computeModelTransformWithLocalOrigin(e,u,h);for(let b=0;b<e.geometryRecords.length;b++)e.geometryRecords[b].origin=p;const f={position:{data:m,size:3},indices:l,modelTransform:h,origin:p};await this.updatingHandles.addPromise(this._addPositionData(t,f,l.length,r[0],s,o))}_acquireRenderer(e,t,r){const s=z.getKey(e,t,r);let o=this.renderers.get(s);return a(this.strokesTexture)&&(this.strokesTexture=Q(this.rctx)),o||(o=new z(this.rctx,this.techniqueRepository,{type:e,hasSlicePlane:t,strokesTexture:this.strokesTexture,legacy:r,spherical:this.viewingMode===_.Global}),this.renderers.set(s,o)),o.refCount.increment(),o}_removeRenderable(e){ie(e);const t=this.renderers.get(e.rendererKey);if(t){t.removeRenderable(e),t.refCount.decrement(),\"origin\"in e.transform&&this.localOrigins.release(e.transform.origin),this.gpuMemoryUsage-=e.statistics.externalMemoryUsage?0:e.statistics.gpuMemoryUsage;for(const t of e.components.meta)e.components.buffer.releaseIndex(t.index)}}_updateObjectCameraDistances(e){const t=e.camera.eye,r=e.camera.viewForward,s=w(),o=e=>{const{center:o,radius:n}=e;O(s,o,t);const i=v(s,r),a=i<-n?1/0:i<n?0:i-n;e.renderables.forEach((e=>e.distanceToCamera=a))};this.perObjectData.forEach(o),this.perObjectDataEvictionCache.forEach(o)}_renderRegularEdges(e,t,r){const s=e.bindRegularEdges(r,t),o=r.transparency;e.forEachRenderable((n=>{if(!n.visible||!n.regular)return;const i=$(n.regular.lod.lengths,n.distanceToCamera,r),a=\"origin\"in n.transform?this.localOrigins.getViewMatrix(n.transform.origin):f;e.renderRegularEdges(s,n,t,i,a),this.numberOfRenderedEdges[o]+=i}),o)}_renderSilhouetteEdges(e,t,r){const s=e.bindSilhouetteEdges(r,t),o=r.transparency;e.forEachRenderable((n=>{if(!n.visible||!n.silhouette)return;const i=$(n.silhouette.lod.lengths,n.distanceToCamera,r),a=\"origin\"in n.transform?this.localOrigins.getViewMatrix(n.transform.origin):f;e.renderSilhouetteEdges(s,n,t,i,a),this.numberOfRenderedEdges[o]+=i}),o)}};function ie(e){e.regular&&(e.regular.vao.vertexBuffers.instances.dispose(),e.regular.vao.dispose(!1),e.regular.vao=null),e.silhouette&&(e.silhouette.vao.vertexBuffers.instances.dispose(),e.silhouette.vao.dispose(!1),e.silhouette.vao=null)}function ae(e){let t=null,s=null;for(let o=0;o<e.geometries.length;o++){const n=e.geometryRecords[o];if(n.material.supportsEdges){if(t){if(!r(t,n.transformation))return!1}else t=n.transformation;if(!s&&c(n.origin))s=n;else if(c(s?.origin)&&c(n.origin)&&s.origin.id!==n.origin.id)return!1}}return!0}e([l({constructOnly:!0})],ne.prototype,\"rctx\",void 0),e([l({constructOnly:!0})],ne.prototype,\"renderSR\",void 0),e([l({constructOnly:!0})],ne.prototype,\"viewingMode\",void 0),e([l({constructOnly:!0})],ne.prototype,\"techniqueRepository\",void 0),e([l({constructOnly:!0})],ne.prototype,\"setNeedsRender\",void 0),e([l({constructOnly:!0})],ne.prototype,\"schedule\",void 0),e([l({readOnly:!0})],ne.prototype,\"updatingHandles\",void 0),e([l({readOnly:!0})],ne.prototype,\"updating\",null),ne=e([m(\"esri.views.3d.webgl-engine.lib.edgeRendering.EdgeView\")],ne);class ce{constructor(e,t,r){this.center=t,this.radius=r,this.renderables=new Array,this.loaded=e,this.loaded.then((()=>{null!=this.loaded&&(this.loaded=!0)}))}}const de=p();export{ne as EdgeView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}