{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../core/maybe.js\";\nimport { create as e, containsPointWithMargin as s } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { polygonCentroid as r } from \"../../../../geometry/support/centroid.js\";\nimport { isPolygon as o, getJsonType as i } from \"../../../../geometry/support/jsonUtils.js\";\nimport { quantizePoint as n, quantizeGeometry as l } from \"../../../../geometry/support/quantizationUtils.js\";\nimport { getInfo as a } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromPolyline as h, generalizeOptimizedGeometry as u, quantizeOptimizedGeometry as m, convertToPolyline as p } from \"../../../../layers/graphics/featureConversionUtils.js\";\nimport c from \"../../../../layers/graphics/OptimizedGeometry.js\";\nconst y = new c(),\n      g = new c(),\n      f = \"esriGeometryPolyline\";\n\nfunction d(t) {\n  t.coords.length = 0, t.lengths.length = 0;\n}\n\nclass b {\n  constructor() {\n    this.bounds = e(), this.graphic = null;\n  }\n\n  static acquire(t = null, e, s, r, o) {\n    let i;\n    return 0 === b._pool.length ? i = new b() : (i = b._pool.pop(), this._set.delete(i)), i.acquire(t, e, s, r, o), i;\n  }\n\n  static release(t) {\n    t && !this._set.has(t) && (t.release(), this._pool.push(t), this._set.add(t));\n  }\n\n  static getCentroidQuantized(e, s) {\n    if (o(e.geometry)) {\n      const o = e.symbol;\n      if (t(o)) return null;\n\n      if (o?.layers.length > 0 && o.layers.some(t => \"text\" === t.type || \"marker\" === t.type)) {\n        const t = r(e.geometry);\n        return null !== t ? n(s, {}, {\n          x: t[0],\n          y: t[1]\n        }, !1, !1) : null;\n      }\n    }\n\n    return null;\n  }\n\n  acquire(t = null, e, s, r, o) {\n    t && this.set(t, e, s, r, o);\n  }\n\n  release() {\n    this.graphic = null, this.symbolResource = null, this.geometry = null;\n  }\n\n  get symbol() {\n    return this.symbolResource.symbol;\n  }\n\n  set(t, e, s, r, o) {\n    this.graphic = t, this.geometry = s, this.symbolResource = e, this.bounds = r, o && (this.size = o);\n  }\n\n  getGeometryQuantized(e, r, o, n) {\n    const c = this.geometry,\n          b = i(c);\n    if (t(b)) return null;\n\n    switch (b) {\n      case \"esriGeometryPolygon\":\n        {\n          const t = c,\n                {\n            rings: s\n          } = t;\n          if (!s || 0 === s.length) return null;\n          let r;\n\n          if (r = 1 === s.length && 2 === s[0].length ? l(e, {\n            paths: [[s[0][0], s[0][1]]]\n          }) : l(e, this.geometry), !r) {\n            const t = {\n              x: s[0][0][0],\n              y: s[0][0][1]\n            };\n\n            if (r = l(e, t), r) {\n              const {\n                x: t,\n                y: e\n              } = r;\n              return {\n                rings: [[[t - 1, e], [1, -1], [1, 1], [-1, 1], [-1, -1]]]\n              };\n            }\n          }\n\n          return r;\n        }\n\n      case \"esriGeometryPolyline\":\n        {\n          const t = c;\n          return d(y), d(g), h(y, t), u(g, y, t.hasZ, t.hasM, f, e.scale[0]), m(y, g, t.hasZ, t.hasM, f, e), p(y, t.hasZ, t.hasM);\n        }\n\n      case \"esriGeometryMultipoint\":\n        {\n          const t = c,\n                i = .5 * n * Math.max(Math.abs(this.size[0]) + this.size[2] - this.size[0], Math.abs(this.size[1]) + this.size[3] - this.size[1]),\n                h = a(o);\n          let u = t.points;\n\n          if (h) {\n            const [t, e] = h.valid,\n                  o = e - t;\n            u = u.filter(n => {\n              if (n[0] + i > e || n[0] - i < t) {\n                const t = [...n];\n                return n[0] + i > e ? t[0] -= o : t[0] += o, s(r, n, i) || s(r, t, i);\n              }\n\n              return s(r, n, i);\n            });\n          }\n\n          return 0 === u.length ? {\n            points: u\n          } : l(e, {\n            points: u\n          });\n        }\n    }\n\n    return l(e, this.geometry);\n  }\n\n}\n\nb._pool = [], b._set = new Set();\nexport { b as default };","map":{"version":3,"names":["isNone","t","create","e","containsPointWithMargin","s","polygonCentroid","r","isPolygon","o","getJsonType","i","quantizePoint","n","quantizeGeometry","l","getInfo","a","convertFromPolyline","h","generalizeOptimizedGeometry","u","quantizeOptimizedGeometry","m","convertToPolyline","p","c","y","g","f","d","coords","length","lengths","b","constructor","bounds","graphic","acquire","_pool","pop","_set","delete","release","has","push","add","getCentroidQuantized","geometry","symbol","layers","some","type","x","set","symbolResource","size","getGeometryQuantized","rings","paths","hasZ","hasM","scale","Math","max","abs","points","valid","filter","Set","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStoreItem.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../core/maybe.js\";import{create as e,containsPointWithMargin as s}from\"../../../../geometry/support/aaBoundingRect.js\";import{polygonCentroid as r}from\"../../../../geometry/support/centroid.js\";import{isPolygon as o,getJsonType as i}from\"../../../../geometry/support/jsonUtils.js\";import{quantizePoint as n,quantizeGeometry as l}from\"../../../../geometry/support/quantizationUtils.js\";import{getInfo as a}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{convertFromPolyline as h,generalizeOptimizedGeometry as u,quantizeOptimizedGeometry as m,convertToPolyline as p}from\"../../../../layers/graphics/featureConversionUtils.js\";import c from\"../../../../layers/graphics/OptimizedGeometry.js\";const y=new c,g=new c,f=\"esriGeometryPolyline\";function d(t){t.coords.length=0,t.lengths.length=0}class b{constructor(){this.bounds=e(),this.graphic=null}static acquire(t=null,e,s,r,o){let i;return 0===b._pool.length?i=new b:(i=b._pool.pop(),this._set.delete(i)),i.acquire(t,e,s,r,o),i}static release(t){t&&!this._set.has(t)&&(t.release(),this._pool.push(t),this._set.add(t))}static getCentroidQuantized(e,s){if(o(e.geometry)){const o=e.symbol;if(t(o))return null;if(o?.layers.length>0&&o.layers.some((t=>\"text\"===t.type||\"marker\"===t.type))){const t=r(e.geometry);return null!==t?n(s,{},{x:t[0],y:t[1]},!1,!1):null}}return null}acquire(t=null,e,s,r,o){t&&this.set(t,e,s,r,o)}release(){this.graphic=null,this.symbolResource=null,this.geometry=null}get symbol(){return this.symbolResource.symbol}set(t,e,s,r,o){this.graphic=t,this.geometry=s,this.symbolResource=e,this.bounds=r,o&&(this.size=o)}getGeometryQuantized(e,r,o,n){const c=this.geometry,b=i(c);if(t(b))return null;switch(b){case\"esriGeometryPolygon\":{const t=c,{rings:s}=t;if(!s||0===s.length)return null;let r;if(r=1===s.length&&2===s[0].length?l(e,{paths:[[s[0][0],s[0][1]]]}):l(e,this.geometry),!r){const t={x:s[0][0][0],y:s[0][0][1]};if(r=l(e,t),r){const{x:t,y:e}=r;return{rings:[[[t-1,e],[1,-1],[1,1],[-1,1],[-1,-1]]]}}}return r}case\"esriGeometryPolyline\":{const t=c;return d(y),d(g),h(y,t),u(g,y,t.hasZ,t.hasM,f,e.scale[0]),m(y,g,t.hasZ,t.hasM,f,e),p(y,t.hasZ,t.hasM)}case\"esriGeometryMultipoint\":{const t=c,i=.5*n*Math.max(Math.abs(this.size[0])+this.size[2]-this.size[0],Math.abs(this.size[1])+this.size[3]-this.size[1]),h=a(o);let u=t.points;if(h){const[t,e]=h.valid,o=e-t;u=u.filter((n=>{if(n[0]+i>e||n[0]-i<t){const t=[...n];return n[0]+i>e?t[0]-=o:t[0]+=o,s(r,n,i)||s(r,t,i)}return s(r,n,i)}))}return 0===u.length?{points:u}:l(e,{points:u})}}return l(e,this.geometry)}}b._pool=[],b._set=new Set;export{b as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}