{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { lerp as e, clamp as t } from \"../../../core/mathUtils.js\";\nimport { isSome as i } from \"../../../core/maybe.js\";\nimport { getMetersPerUnitForSR as r } from \"../../../core/unitUtils.js\";\nimport { b as n, n as s, e as a, l as o } from \"../../../chunks/vec3.js\";\nimport { c as m } from \"../../../chunks/vec3f64.js\";\nimport h from \"../../../geometry/Extent.js\";\nimport { getReferenceEllipsoid as l } from \"../../../geometry/projectionEllipsoid.js\";\nimport { ViewingMode as x } from \"../../ViewingMode.js\";\n\nfunction c(e, t, i) {\n  return e === x.Global ? new M(i) : new u(t, i);\n}\n\nclass u {\n  constructor(e, t) {\n    this.elevationProvider = e, this._referenceEllipsoid = l(t), this.unitInMeters = r(t, this._referenceEllipsoid.metersPerDegree);\n  }\n\n  compute(r, o, m, l, x) {\n    x || (x = {\n      near: 0,\n      far: 0\n    });\n    let c = r[2] * this.unitInMeters;\n    const u = c,\n          M = c - l,\n          d = this.elevationProvider ? this.elevationProvider.elevationBounds : null;\n    d && (c = M >= 0 ? u - this.unitInMeters * d.min : this.unitInMeters * d.max - u);\n    const E = {\n      x: (m = i(m) ? m : new h({\n        xmin: 0,\n        ymin: 0,\n        zmin: 0,\n        xmax: 0,\n        ymax: 0,\n        zmax: 0\n      })).xmax - m.xmin,\n      y: m.ymax - m.ymin,\n      z: 4 * Math.max(m.xmax - m.xmin, m.ymax - m.ymin)\n    },\n          b = Math.max(E.x, E.y, E.z);\n    n(I, o, r), v[0] = I[0] > 0 ? m.xmax : m.xmin, v[1] = I[1] > 0 ? m.ymax : m.ymin, v[2] = I[2] > 0 ? b / 2 : -b / 2, n(v, v, r), s(I, I);\n\n    const g = 1.1 * a(v, I) * this.unitInMeters,\n          _ = Math.sqrt(c * (c + 2 * this._referenceEllipsoid.radius)),\n          w = Math.max(m.xmax - m.xmin, m.ymax - m.ymin),\n          z = w * y * this.unitInMeters,\n          P = w * j * this.unitInMeters;\n\n    let k = t((c - P) / (z - P), 0, 1);\n    k *= k * k;\n    let q = e(_, g, k);\n    return q *= Math.max(Math.log(Math.abs(M)), 1), q = Math.min(q, Math.max(34064e4, b)), q /= this.unitInMeters, f(q, p, this.unitInMeters, x);\n  }\n\n}\n\nclass M {\n  constructor(e) {\n    this._referenceEllipsoid = l(e);\n  }\n\n  compute(e, i, r, n, s) {\n    s || (s = {\n      near: 0,\n      far: 0\n    });\n\n    const a = o(e) - this._referenceEllipsoid.radius,\n          m = this._referenceEllipsoid.radius + Math.min(0, n),\n          h = Math.abs(a - n),\n          l = Math.max(h, Math.abs(a));\n\n    return f(1.2 * Math.sqrt(l * (l + 2 * m)), t(2e4 - (Math.log(l) - 7.983) / 9.011 * 19e3, 1e3, 2e4), 1, s);\n  }\n\n}\n\nfunction f(e, t, i, r) {\n  const n = d / i;\n  return e / t > n ? (r.far = e, r.near = r.far / t) : (r.near = n, r.far = r.near * t), r;\n}\n\nconst p = 2e4,\n      d = 2,\n      y = .001,\n      j = 1e-4,\n      v = m(),\n      I = m();\nexport { c as createNearFarHeuristic };","map":{"version":3,"names":["lerp","e","clamp","t","isSome","i","getMetersPerUnitForSR","r","b","n","s","a","l","o","c","m","h","getReferenceEllipsoid","ViewingMode","x","Global","M","u","constructor","elevationProvider","_referenceEllipsoid","unitInMeters","metersPerDegree","compute","near","far","d","elevationBounds","min","max","E","xmin","ymin","zmin","xmax","ymax","zmax","y","z","Math","I","v","g","_","sqrt","radius","w","P","j","k","q","log","abs","f","p","createNearFarHeuristic"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/state/NearFarHeuristic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{lerp as e,clamp as t}from\"../../../core/mathUtils.js\";import{isSome as i}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../../core/unitUtils.js\";import{b as n,n as s,e as a,l as o}from\"../../../chunks/vec3.js\";import{c as m}from\"../../../chunks/vec3f64.js\";import h from\"../../../geometry/Extent.js\";import{getReferenceEllipsoid as l}from\"../../../geometry/projectionEllipsoid.js\";import{ViewingMode as x}from\"../../ViewingMode.js\";function c(e,t,i){return e===x.Global?new M(i):new u(t,i)}class u{constructor(e,t){this.elevationProvider=e,this._referenceEllipsoid=l(t),this.unitInMeters=r(t,this._referenceEllipsoid.metersPerDegree)}compute(r,o,m,l,x){x||(x={near:0,far:0});let c=r[2]*this.unitInMeters;const u=c,M=c-l,d=this.elevationProvider?this.elevationProvider.elevationBounds:null;d&&(c=M>=0?u-this.unitInMeters*d.min:this.unitInMeters*d.max-u);const E={x:(m=i(m)?m:new h({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0})).xmax-m.xmin,y:m.ymax-m.ymin,z:4*Math.max(m.xmax-m.xmin,m.ymax-m.ymin)},b=Math.max(E.x,E.y,E.z);n(I,o,r),v[0]=I[0]>0?m.xmax:m.xmin,v[1]=I[1]>0?m.ymax:m.ymin,v[2]=I[2]>0?b/2:-b/2,n(v,v,r),s(I,I);const g=1.1*a(v,I)*this.unitInMeters,_=Math.sqrt(c*(c+2*this._referenceEllipsoid.radius)),w=Math.max(m.xmax-m.xmin,m.ymax-m.ymin),z=w*y*this.unitInMeters,P=w*j*this.unitInMeters;let k=t((c-P)/(z-P),0,1);k*=k*k;let q=e(_,g,k);return q*=Math.max(Math.log(Math.abs(M)),1),q=Math.min(q,Math.max(34064e4,b)),q/=this.unitInMeters,f(q,p,this.unitInMeters,x)}}class M{constructor(e){this._referenceEllipsoid=l(e)}compute(e,i,r,n,s){s||(s={near:0,far:0});const a=o(e)-this._referenceEllipsoid.radius,m=this._referenceEllipsoid.radius+Math.min(0,n),h=Math.abs(a-n),l=Math.max(h,Math.abs(a));return f(1.2*Math.sqrt(l*(l+2*m)),t(2e4-(Math.log(l)-7.983)/9.011*19e3,1e3,2e4),1,s)}}function f(e,t,i,r){const n=d/i;return e/t>n?(r.far=e,r.near=r.far/t):(r.near=n,r.far=r.near*t),r}const p=2e4,d=2,y=.001,j=1e-4,v=m(),I=m();export{c as createNearFarHeuristic};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}