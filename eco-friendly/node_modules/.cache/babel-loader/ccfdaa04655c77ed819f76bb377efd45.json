{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../core/Logger.js\";\nimport { isSome as e, disposeMaybe as i } from \"../../core/maybe.js\";\nimport { ResourceType as r } from \"./enums.js\";\nimport { bindVertexBufferLayout as s, unbindVertexBufferLayout as n } from \"./Util.js\";\nconst o = t.getLogger(\"esri.views.webgl.VertexArrayObject\");\n\nclass f {\n  constructor(t, e, i, s, n = null) {\n    this._context = t, this._locations = e, this._layout = i, this._buffers = s, this._indexBuffer = n, this._glName = null, this._initialized = !1, t.instanceCounter.increment(r.VertexArrayObject, this);\n  }\n\n  get glName() {\n    return this._glName;\n  }\n\n  get context() {\n    return this._context;\n  }\n\n  get vertexBuffers() {\n    return this._buffers;\n  }\n\n  get indexBuffer() {\n    return this._indexBuffer;\n  }\n\n  get size() {\n    return Object.keys(this._buffers).reduce((t, e) => t + this._buffers[e].size, e(this._indexBuffer) ? this._indexBuffer.size : 0);\n  }\n\n  get layout() {\n    return this._layout;\n  }\n\n  get locations() {\n    return this._locations;\n  }\n\n  dispose(t = !0) {\n    if (!this._context) return void ((this._glName || t && Object.getOwnPropertyNames(this._buffers).length > 0) && o.warn(\"Leaked WebGL VAO\"));\n\n    if (this._glName) {\n      const t = this._context?.capabilities?.vao;\n      t ? (t.deleteVertexArray(this._glName), this._glName = null) : o.warn(\"Leaked WebGL VAO\");\n    }\n\n    if (this._context.getBoundVAO() === this && this._context.bindVAO(null), t) {\n      for (const t in this._buffers) this._buffers[t].dispose(), delete this._buffers[t];\n\n      this._indexBuffer = i(this._indexBuffer);\n    }\n\n    this._context.instanceCounter.decrement(r.VertexArrayObject, this), this._context = null;\n  }\n\n  initialize() {\n    if (this._initialized) return;\n    const t = this._context.capabilities.vao;\n\n    if (t) {\n      const e = t.createVertexArray();\n      t.bindVertexArray(e), this._bindLayout(), t.bindVertexArray(null), this._glName = e;\n    }\n\n    this._initialized = !0;\n  }\n\n  bind() {\n    this.initialize();\n    const t = this._context.capabilities.vao;\n    t ? t.bindVertexArray(this.glName) : (this._context.bindVAO(null), this._bindLayout());\n  }\n\n  _bindLayout() {\n    const {\n      _buffers: t,\n      _layout: i,\n      _indexBuffer: r\n    } = this;\n    t || o.error(\"Vertex buffer dictionary is empty!\");\n    const n = this._context.gl;\n\n    for (const e in t) {\n      const r = t[e];\n      r || o.error(\"Vertex buffer is uninitialized!\");\n      const n = i[e];\n      n || o.error(\"Vertex element descriptor is empty!\"), s(this._context, this._locations, r, n);\n    }\n\n    if (e(r)) {\n      !!this._context.capabilities.vao ? n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, r.glName) : this._context.bindBuffer(r);\n    }\n  }\n\n  unbind() {\n    this.initialize();\n    const t = this._context.capabilities.vao;\n    t ? t.bindVertexArray(null) : this._unbindLayout();\n  }\n\n  _unbindLayout() {\n    const {\n      _buffers: t,\n      _layout: i\n    } = this;\n    t || o.error(\"Vertex buffer dictionary is empty!\");\n\n    for (const e in t) {\n      const r = t[e];\n      r || o.error(\"Vertex buffer is uninitialized!\");\n      const s = i[e];\n      n(this._context, this._locations, r, s);\n    }\n\n    e(this._indexBuffer) && this._context.unbindBuffer(this._indexBuffer.bufferType);\n  }\n\n}\n\nexport { f as VertexArrayObject };","map":{"version":3,"names":["t","isSome","e","disposeMaybe","i","ResourceType","r","bindVertexBufferLayout","s","unbindVertexBufferLayout","n","o","getLogger","f","constructor","_context","_locations","_layout","_buffers","_indexBuffer","_glName","_initialized","instanceCounter","increment","VertexArrayObject","glName","context","vertexBuffers","indexBuffer","size","Object","keys","reduce","layout","locations","dispose","getOwnPropertyNames","length","warn","capabilities","vao","deleteVertexArray","getBoundVAO","bindVAO","decrement","initialize","createVertexArray","bindVertexArray","_bindLayout","bind","error","gl","bindBuffer","ELEMENT_ARRAY_BUFFER","unbind","_unbindLayout","unbindBuffer","bufferType"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/webgl/VertexArrayObject.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Logger.js\";import{isSome as e,disposeMaybe as i}from\"../../core/maybe.js\";import{ResourceType as r}from\"./enums.js\";import{bindVertexBufferLayout as s,unbindVertexBufferLayout as n}from\"./Util.js\";const o=t.getLogger(\"esri.views.webgl.VertexArrayObject\");class f{constructor(t,e,i,s,n=null){this._context=t,this._locations=e,this._layout=i,this._buffers=s,this._indexBuffer=n,this._glName=null,this._initialized=!1,t.instanceCounter.increment(r.VertexArrayObject,this)}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].size),e(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(t=!0){if(!this._context)return void((this._glName||t&&Object.getOwnPropertyNames(this._buffers).length>0)&&o.warn(\"Leaked WebGL VAO\"));if(this._glName){const t=this._context?.capabilities?.vao;t?(t.deleteVertexArray(this._glName),this._glName=null):o.warn(\"Leaked WebGL VAO\")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),t){for(const t in this._buffers)this._buffers[t].dispose(),delete this._buffers[t];this._indexBuffer=i(this._indexBuffer)}this._context.instanceCounter.decrement(r.VertexArrayObject,this),this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:t,_layout:i,_indexBuffer:r}=this;t||o.error(\"Vertex buffer dictionary is empty!\");const n=this._context.gl;for(const e in t){const r=t[e];r||o.error(\"Vertex buffer is uninitialized!\");const n=i[e];n||o.error(\"Vertex element descriptor is empty!\"),s(this._context,this._locations,r,n)}if(e(r)){!!this._context.capabilities.vao?n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.glName):this._context.bindBuffer(r)}}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:t,_layout:i}=this;t||o.error(\"Vertex buffer dictionary is empty!\");for(const e in t){const r=t[e];r||o.error(\"Vertex buffer is uninitialized!\");const s=i[e];n(this._context,this._locations,r,s)}e(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}export{f as VertexArrayObject};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}