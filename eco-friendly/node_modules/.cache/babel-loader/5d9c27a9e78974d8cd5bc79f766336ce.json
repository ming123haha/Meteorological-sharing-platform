{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Evented.js\";\nimport t from \"../../../../core/Handles.js\";\nimport { isSome as s, isNone as r, destroyMaybe as i } from \"../../../../core/maybe.js\";\nimport a from \"../../../../core/PooledArray.js\";\nimport { UpdatePolicy as o } from \"./basicInterfaces.js\";\nimport { ContentObject as c } from \"./ContentObject.js\";\nimport { ContentObjectType as h } from \"./ContentObjectType.js\";\nimport { DirtyEventNames as n } from \"./DirtyEvents.js\";\nimport d from \"./Octree.js\";\n\nclass l extends c {\n  constructor(s, r = \"\") {\n    super(), this.apiLayerUid = r, this.type = h.Layer, this.events = new e(), this.isSliceable = !1, this._objects = new a(), this._stageHandles = new t(), this.apiLayerUid = r, this.isVisible = s?.isVisible ?? !0, this.isPickable = s?.isPickable ?? !0, this.updatePolicy = s?.updatePolicy ?? o.ASYNC;\n  }\n\n  get objects() {\n    return this._objects;\n  }\n\n  destroy() {\n    this.detachStage(), this._stage = null;\n  }\n\n  attachStage(e) {\n    this.detachStage(), this._stage = e;\n\n    for (const t of n) this._stageHandles.add(this.events.on(t, s => e.handleEvent(t, s)));\n  }\n\n  detachStage() {\n    this._stageHandles.removeAll(), this.invalidateSpatialQueryAccelerator();\n  }\n\n  add(e) {\n    this._objects.push(e), e.parentLayer = this, this.events.emit(\"layerObjectAdded\", {\n      layer: this,\n      object: e\n    }), s(this._octree) && this._octree.add([e]);\n  }\n\n  remove(e) {\n    this._objects.removeUnordered(e) && (e.parentLayer = null, this.events.emit(\"layerObjectRemoved\", {\n      layer: this,\n      object: e\n    }), s(this._octree) && this._octree.remove([e]));\n  }\n\n  addMany(e) {\n    this._objects.pushArray(e);\n\n    for (const t of e) t.parentLayer = this;\n\n    this.events.emit(\"layerObjectsAdded\", {\n      layer: this,\n      objects: e\n    }), s(this._octree) && this._octree.add(e);\n  }\n\n  removeMany(e) {\n    const t = new Array();\n\n    if (this._objects.removeUnorderedMany(e, e.length, t), 0 !== t.length) {\n      for (const e of t) e.parentLayer = null;\n\n      this.events.emit(\"layerObjectsRemoved\", {\n        layer: this,\n        objects: t\n      }), s(this._octree) && this._octree.remove(t);\n    }\n  }\n\n  sync() {\n    s(this._stage) && this.updatePolicy !== o.SYNC && this._stage.syncLayer(this.id);\n  }\n\n  notifyObjectBBChanged(e, t) {\n    s(this._octree) && this._octree.update(e, t);\n  }\n\n  getSpatialQueryAccelerator() {\n    return r(this._octree) && this._objects.length > 50 && this._createOctree(), this._octree;\n  }\n\n  shaderTransformationChanged() {\n    this.invalidateSpatialQueryAccelerator(), this.events.emit(\"shaderTransformationChanged\", this);\n  }\n\n  invalidateSpatialQueryAccelerator() {\n    this._octree = i(this._octree);\n  }\n\n  _createOctree() {\n    this._octree = new d(e => e.boundingVolumeWorldSpace.bounds), this._octree.add(this._objects.data, this._objects.length);\n  }\n\n}\n\nfunction y(e) {\n  return s(e) && e.type === h.Layer;\n}\n\nexport { l as WebGLLayer, y as isWebGLLayer };","map":{"version":3,"names":["e","t","isSome","s","isNone","r","destroyMaybe","i","a","UpdatePolicy","o","ContentObject","c","ContentObjectType","h","DirtyEventNames","n","d","l","constructor","apiLayerUid","type","Layer","events","isSliceable","_objects","_stageHandles","isVisible","isPickable","updatePolicy","ASYNC","objects","destroy","detachStage","_stage","attachStage","add","on","handleEvent","removeAll","invalidateSpatialQueryAccelerator","push","parentLayer","emit","layer","object","_octree","remove","removeUnordered","addMany","pushArray","removeMany","Array","removeUnorderedMany","length","sync","SYNC","syncLayer","id","notifyObjectBBChanged","update","getSpatialQueryAccelerator","_createOctree","shaderTransformationChanged","boundingVolumeWorldSpace","bounds","data","y","WebGLLayer","isWebGLLayer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import t from\"../../../../core/Handles.js\";import{isSome as s,isNone as r,destroyMaybe as i}from\"../../../../core/maybe.js\";import a from\"../../../../core/PooledArray.js\";import{UpdatePolicy as o}from\"./basicInterfaces.js\";import{ContentObject as c}from\"./ContentObject.js\";import{ContentObjectType as h}from\"./ContentObjectType.js\";import{DirtyEventNames as n}from\"./DirtyEvents.js\";import d from\"./Octree.js\";class l extends c{constructor(s,r=\"\"){super(),this.apiLayerUid=r,this.type=h.Layer,this.events=new e,this.isSliceable=!1,this._objects=new a,this._stageHandles=new t,this.apiLayerUid=r,this.isVisible=s?.isVisible??!0,this.isPickable=s?.isPickable??!0,this.updatePolicy=s?.updatePolicy??o.ASYNC}get objects(){return this._objects}destroy(){this.detachStage(),this._stage=null}attachStage(e){this.detachStage(),this._stage=e;for(const t of n)this._stageHandles.add(this.events.on(t,(s=>e.handleEvent(t,s))))}detachStage(){this._stageHandles.removeAll(),this.invalidateSpatialQueryAccelerator()}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit(\"layerObjectAdded\",{layer:this,object:e}),s(this._octree)&&this._octree.add([e])}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit(\"layerObjectRemoved\",{layer:this,object:e}),s(this._octree)&&this._octree.remove([e]))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit(\"layerObjectsAdded\",{layer:this,objects:e}),s(this._octree)&&this._octree.add(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;this.events.emit(\"layerObjectsRemoved\",{layer:this,objects:t}),s(this._octree)&&this._octree.remove(t)}}sync(){s(this._stage)&&this.updatePolicy!==o.SYNC&&this._stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){s(this._octree)&&this._octree.update(e,t)}getSpatialQueryAccelerator(){return r(this._octree)&&this._objects.length>50&&this._createOctree(),this._octree}shaderTransformationChanged(){this.invalidateSpatialQueryAccelerator(),this.events.emit(\"shaderTransformationChanged\",this)}invalidateSpatialQueryAccelerator(){this._octree=i(this._octree)}_createOctree(){this._octree=new d((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)}}function y(e){return s(e)&&e.type===h.Layer}export{l as WebGLLayer,y as isWebGLLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}