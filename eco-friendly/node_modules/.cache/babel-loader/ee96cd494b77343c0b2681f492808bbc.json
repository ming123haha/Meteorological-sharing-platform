{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport s from \"../Accessor.js\";\nimport t from \"../Handles.js\";\nimport { isNone as i } from \"../maybe.js\";\nimport { watch as n, when as d, on as a, sync as r } from \"../reactiveUtils.js\";\nimport { schedule as h } from \"../scheduling.js\";\nimport { property as o } from \"../accessorSupport/decorators/property.js\";\nimport { subclass as l } from \"../accessorSupport/decorators/subclass.js\";\nlet c = class extends s {\n  constructor() {\n    super(...arguments), this.updating = !1, this.handleId = 0, this.handles = new t(), this.scheduleHandleId = 0, this.pendingPromises = new Set();\n  }\n\n  destroy() {\n    this.removeAll(), this.handles.destroy();\n  }\n\n  add(e, s, t = {}) {\n    return this._installWatch(e, s, t, n);\n  }\n\n  addWhen(e, s, t = {}) {\n    return this._installWatch(e, s, t, d);\n  }\n\n  addOnCollectionChange(e, s, {\n    initial: t = !1,\n    final: i = !1\n  } = {}) {\n    const n = ++this.handleId;\n    return this.handles.add([a(e, \"after-changes\", this._createSyncUpdatingCallback(), r), a(e, \"change\", s, {\n      onListenerAdd: t ? e => s({\n        added: e.toArray(),\n        removed: []\n      }) : void 0,\n      onListenerRemove: i ? e => s({\n        added: [],\n        removed: e.toArray()\n      }) : void 0\n    })], n), {\n      remove: () => this.handles.remove(n)\n    };\n  }\n\n  addPromise(e) {\n    if (i(e)) return e;\n    const s = ++this.handleId;\n    this.handles.add({\n      remove: () => {\n        this.pendingPromises.delete(e) && (0 !== this.pendingPromises.size || this.handles.has(p) || this._set(\"updating\", !1));\n      }\n    }, s), this.pendingPromises.add(e), this._set(\"updating\", !0);\n\n    const t = () => this.handles.remove(s);\n\n    return e.then(t, t), e;\n  }\n\n  removeAll() {\n    this.pendingPromises.clear(), this.handles.removeAll(), this._set(\"updating\", !1);\n  }\n\n  _installWatch(e, s, t = {}, i) {\n    const n = ++this.handleId;\n    t.sync || this._installSyncUpdatingWatch(e, n);\n    const d = i(e, s, t);\n    return this.handles.add(d, n), {\n      remove: () => this.handles.remove(n)\n    };\n  }\n\n  _installSyncUpdatingWatch(e, s) {\n    const t = this._createSyncUpdatingCallback(),\n          i = n(e, t, {\n      sync: !0,\n      equals: () => !1\n    });\n\n    return this.handles.add(i, s), i;\n  }\n\n  _createSyncUpdatingCallback() {\n    return () => {\n      this.handles.remove(p), ++this.scheduleHandleId;\n      const e = this.scheduleHandleId;\n      this._get(\"updating\") || this._set(\"updating\", !0), this.handles.add(h(() => {\n        e === this.scheduleHandleId && (this._set(\"updating\", this.pendingPromises.size > 0), this.handles.remove(p));\n      }), p);\n    };\n  }\n\n};\ne([o({\n  readOnly: !0\n})], c.prototype, \"updating\", void 0), c = e([l(\"esri.core.support.WatchUpdatingTracking\")], c);\nconst p = -42;\nvar m;\n!function (e) {\n  e[e.NONE = 0] = \"NONE\", e[e.SYNC = 1] = \"SYNC\", e[e.INIT = 2] = \"INIT\";\n}(m || (m = {}));\nexport { m as WatchFlags, c as WatchUpdatingTracking };","map":{"version":3,"names":["_","e","s","t","isNone","i","watch","n","when","d","on","a","sync","r","schedule","h","property","o","subclass","l","c","constructor","arguments","updating","handleId","handles","scheduleHandleId","pendingPromises","Set","destroy","removeAll","add","_installWatch","addWhen","addOnCollectionChange","initial","final","_createSyncUpdatingCallback","onListenerAdd","added","toArray","removed","onListenerRemove","remove","addPromise","delete","size","has","p","_set","then","clear","_installSyncUpdatingWatch","equals","_get","readOnly","prototype","m","NONE","SYNC","INIT","WatchFlags","WatchUpdatingTracking"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/support/WatchUpdatingTracking.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import s from\"../Accessor.js\";import t from\"../Handles.js\";import{isNone as i}from\"../maybe.js\";import{watch as n,when as d,on as a,sync as r}from\"../reactiveUtils.js\";import{schedule as h}from\"../scheduling.js\";import{property as o}from\"../accessorSupport/decorators/property.js\";import{subclass as l}from\"../accessorSupport/decorators/subclass.js\";let c=class extends s{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new t,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,s,t={}){return this._installWatch(e,s,t,n)}addWhen(e,s,t={}){return this._installWatch(e,s,t,d)}addOnCollectionChange(e,s,{initial:t=!1,final:i=!1}={}){const n=++this.handleId;return this.handles.add([a(e,\"after-changes\",this._createSyncUpdatingCallback(),r),a(e,\"change\",s,{onListenerAdd:t?e=>s({added:e.toArray(),removed:[]}):void 0,onListenerRemove:i?e=>s({added:[],removed:e.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(i(e))return e;const s=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(p)||this._set(\"updating\",!1))}},s),this.pendingPromises.add(e),this._set(\"updating\",!0);const t=()=>this.handles.remove(s);return e.then(t,t),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set(\"updating\",!1)}_installWatch(e,s,t={},i){const n=++this.handleId;t.sync||this._installSyncUpdatingWatch(e,n);const d=i(e,s,t);return this.handles.add(d,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,s){const t=this._createSyncUpdatingCallback(),i=n(e,t,{sync:!0,equals:()=>!1});return this.handles.add(i,s),i}_createSyncUpdatingCallback(){return()=>{this.handles.remove(p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get(\"updating\")||this._set(\"updating\",!0),this.handles.add(h((()=>{e===this.scheduleHandleId&&(this._set(\"updating\",this.pendingPromises.size>0),this.handles.remove(p))})),p)}}};e([o({readOnly:!0})],c.prototype,\"updating\",void 0),c=e([l(\"esri.core.support.WatchUpdatingTracking\")],c);const p=-42;var m;!function(e){e[e.NONE=0]=\"NONE\",e[e.SYNC=1]=\"SYNC\",e[e.INIT=2]=\"INIT\"}(m||(m={}));export{m as WatchFlags,c as WatchUpdatingTracking};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}