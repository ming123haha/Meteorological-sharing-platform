{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../../../core/mathUtils.js\";\nimport { TILE_SIZE as s } from \"../definitions.js\";\nimport { StaticBitSet as e } from \"../../../layers/features/support/StaticBitSet.js\";\nconst i = 2,\n      o = 1,\n      h = 0,\n      r = 1,\n      n = 2;\n\nclass c {\n  constructor(t, s) {\n    this.width = t, this.height = s;\n    const i = Math.ceil(t / o),\n          h = Math.ceil(s / o);\n    this._cols = i, this._rows = h, this._cells = e.create(i * h);\n  }\n\n  insertMetrics(t) {\n    const s = this._hasCollision(t);\n\n    return s === h && this._markMetrics(t), s;\n  }\n\n  getCellId(t, s) {\n    return t + s * this._cols;\n  }\n\n  has(t) {\n    return this._cells.has(t);\n  }\n\n  hasRange(t, s) {\n    return this._cells.hasRange(t, s);\n  }\n\n  set(t) {\n    this._cells.set(t);\n  }\n\n  setRange(t, s) {\n    this._cells.setRange(t, s);\n  }\n\n  _hasCollision(t) {\n    const s = t.id;\n    let e = 0,\n        o = 0;\n    t.save();\n\n    do {\n      const s = t.boundsCount;\n      e += s;\n\n      for (let e = 0; e < s; e++) {\n        const s = t.boundsComputedAnchorX(e),\n              h = t.boundsComputedAnchorY(e),\n              c = t.boundsWidth(e) + i,\n              l = t.boundsHeight(e) + i;\n\n        switch (this._collide(s, h, c, l)) {\n          case n:\n            return n;\n\n          case r:\n            o++;\n        }\n      }\n    } while (t.peekId() === s && t.next());\n\n    return t.restore(), e === o ? r : h;\n  }\n\n  _collide(s, e, i, c) {\n    const l = s - i / 2,\n          _ = e - c / 2,\n          a = l + i,\n          u = _ + c;\n\n    if (a < 0 || u < 0 || l > this.width || _ > this.height) return r;\n    const d = t(Math.floor(l / o), 0, this._cols),\n          g = t(Math.floor(_ / o), 0, this._rows),\n          f = t(Math.ceil(a / o), 0, this._cols),\n          m = t(Math.ceil(u / o), 0, this._rows);\n\n    for (let t = g; t <= m; t++) for (let s = d; s <= f; s++) {\n      const e = this.getCellId(s, t);\n      if (this.has(e)) return n;\n    }\n\n    return h;\n  }\n\n  _mark(s, e, i, h) {\n    const r = s - i / 2,\n          n = e - h / 2,\n          c = r + i,\n          l = n + h,\n          _ = t(Math.floor(r / o), 0, this._cols),\n          a = t(Math.floor(n / o), 0, this._rows),\n          u = t(Math.ceil(c / o), 0, this._cols),\n          d = t(Math.ceil(l / o), 0, this._rows);\n\n    for (let t = a; t <= d; t++) for (let s = _; s <= u; s++) {\n      const e = this.getCellId(s, t);\n      this.set(e);\n    }\n\n    return !1;\n  }\n\n  _markMetrics(t) {\n    const s = t.id;\n\n    do {\n      const s = t.boundsCount;\n\n      for (let e = 0; e < s; e++) {\n        const s = t.boundsComputedAnchorX(e),\n              o = t.boundsComputedAnchorY(e),\n              h = t.boundsWidth(e) + i,\n              r = t.boundsHeight(e) + i;\n\n        this._mark(s, o, h, r);\n      }\n    } while (t.peekId() === s && t.next());\n  }\n\n}\n\nclass l {\n  constructor(t, e = 2) {\n    this._bucketSize = t, this._rowsLength = s / t, this._colsLength = s / t, this._elementsPerBucket = e, this._grid = this._initGrid();\n  }\n\n  checkOverlap(t, s) {\n    const e = Math.floor(t / this._bucketSize),\n          i = Math.floor(s / this._bucketSize);\n    return e < 0 || e >= this._rowsLength || i < 0 || i >= this._colsLength || this._grid[i * this._colsLength + e] >= this._elementsPerBucket;\n  }\n\n  markUsed(t, s) {\n    const e = Math.floor(t / this._bucketSize),\n          i = Math.floor(s / this._bucketSize);\n    this._grid[i * this._colsLength + e] += 1;\n  }\n\n  reset() {\n    this._grid = this._initGrid();\n  }\n\n  _initGrid() {\n    return new Uint8Array(this._rowsLength * this._colsLength);\n  }\n\n}\n\nexport { c as CollisionBitsetGrid, l as CollisionGrid, n as HAS_COLLISION, h as NONE, r as OUTSIDE_EXTENT };","map":{"version":3,"names":["clamp","t","TILE_SIZE","s","StaticBitSet","e","i","o","h","r","n","c","constructor","width","height","Math","ceil","_cols","_rows","_cells","create","insertMetrics","_hasCollision","_markMetrics","getCellId","has","hasRange","set","setRange","id","save","boundsCount","boundsComputedAnchorX","boundsComputedAnchorY","boundsWidth","l","boundsHeight","_collide","peekId","next","restore","_","a","u","d","floor","g","f","m","_mark","_bucketSize","_rowsLength","_colsLength","_elementsPerBucket","_grid","_initGrid","checkOverlap","markUsed","reset","Uint8Array","CollisionBitsetGrid","CollisionGrid","HAS_COLLISION","NONE","OUTSIDE_EXTENT"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../../core/mathUtils.js\";import{TILE_SIZE as s}from\"../definitions.js\";import{StaticBitSet as e}from\"../../../layers/features/support/StaticBitSet.js\";const i=2,o=1,h=0,r=1,n=2;class c{constructor(t,s){this.width=t,this.height=s;const i=Math.ceil(t/o),h=Math.ceil(s/o);this._cols=i,this._rows=h,this._cells=e.create(i*h)}insertMetrics(t){const s=this._hasCollision(t);return s===h&&this._markMetrics(t),s}getCellId(t,s){return t+s*this._cols}has(t){return this._cells.has(t)}hasRange(t,s){return this._cells.hasRange(t,s)}set(t){this._cells.set(t)}setRange(t,s){this._cells.setRange(t,s)}_hasCollision(t){const s=t.id;let e=0,o=0;t.save();do{const s=t.boundsCount;e+=s;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),h=t.boundsComputedAnchorY(e),c=t.boundsWidth(e)+i,l=t.boundsHeight(e)+i;switch(this._collide(s,h,c,l)){case n:return n;case r:o++}}}while(t.peekId()===s&&t.next());return t.restore(),e===o?r:h}_collide(s,e,i,c){const l=s-i/2,_=e-c/2,a=l+i,u=_+c;if(a<0||u<0||l>this.width||_>this.height)return r;const d=t(Math.floor(l/o),0,this._cols),g=t(Math.floor(_/o),0,this._rows),f=t(Math.ceil(a/o),0,this._cols),m=t(Math.ceil(u/o),0,this._rows);for(let t=g;t<=m;t++)for(let s=d;s<=f;s++){const e=this.getCellId(s,t);if(this.has(e))return n}return h}_mark(s,e,i,h){const r=s-i/2,n=e-h/2,c=r+i,l=n+h,_=t(Math.floor(r/o),0,this._cols),a=t(Math.floor(n/o),0,this._rows),u=t(Math.ceil(c/o),0,this._cols),d=t(Math.ceil(l/o),0,this._rows);for(let t=a;t<=d;t++)for(let s=_;s<=u;s++){const e=this.getCellId(s,t);this.set(e)}return!1}_markMetrics(t){const s=t.id;do{const s=t.boundsCount;for(let e=0;e<s;e++){const s=t.boundsComputedAnchorX(e),o=t.boundsComputedAnchorY(e),h=t.boundsWidth(e)+i,r=t.boundsHeight(e)+i;this._mark(s,o,h,r)}}while(t.peekId()===s&&t.next())}}class l{constructor(t,e=2){this._bucketSize=t,this._rowsLength=s/t,this._colsLength=s/t,this._elementsPerBucket=e,this._grid=this._initGrid()}checkOverlap(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);return e<0||e>=this._rowsLength||i<0||i>=this._colsLength||this._grid[i*this._colsLength+e]>=this._elementsPerBucket}markUsed(t,s){const e=Math.floor(t/this._bucketSize),i=Math.floor(s/this._bucketSize);this._grid[i*this._colsLength+e]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}export{c as CollisionBitsetGrid,l as CollisionGrid,n as HAS_COLLISION,h as NONE,r as OUTSIDE_EXTENT};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}