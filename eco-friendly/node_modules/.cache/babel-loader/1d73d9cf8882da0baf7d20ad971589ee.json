{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../core/maybe.js\";\nimport { b as e, c as i, r as s, j as r, m as h } from \"../../../chunks/mat3.js\";\nimport { c as n } from \"../../../chunks/mat3f32.js\";\nimport { f as o } from \"../../../chunks/vec2f32.js\";\nimport { DisplayObject as u } from \"./DisplayObject.js\";\nimport a from \"./ImageryBitmapSource.js\";\nimport { TextureType as d, PixelFormat as c, PixelType as l, TextureWrapMode as _ } from \"../../webgl/enums.js\";\nimport { Texture as x } from \"../../webgl/Texture.js\";\n\nfunction m(t) {\n  return t && \"render\" in t;\n}\n\nfunction g(t) {\n  return t && !(\"render\" in t);\n}\n\nfunction p(t) {\n  const e = document.createElement(\"canvas\");\n  return e.width = t.width, e.height = t.height, t.render(e.getContext(\"2d\")), e;\n}\n\nfunction f(t, e, i) {\n  const s = {\n    target: d.TEXTURE_2D,\n    pixelFormat: c.RGBA,\n    internalFormat: c.RGBA,\n    dataType: l.UNSIGNED_BYTE,\n    wrapMode: _.CLAMP_TO_EDGE\n  };\n  return e && i && (s.width = e, s.height = i), new x(t, s);\n}\n\nclass v extends u {\n  constructor(t = null, e, i = !0) {\n    super(), this.requestRenderOnSourceChangedEnabled = i, this._textureInvalidated = !0, this.stencilRef = 0, this.coordScale = [1, 1], this._height = void 0, this.pixelRatio = 1, this.resolution = 0, this.rotation = 0, this._source = null, this._width = void 0, this.x = 0, this.y = 0, this.blendFunction = e, this.source = t, this.requestRender = this.requestRender.bind(this);\n  }\n\n  destroy() {\n    this._texture && (this._texture.dispose(), this._texture = null);\n  }\n\n  get isSourceScaled() {\n    return this.width !== this.sourceWidth || this.height !== this.sourceHeight;\n  }\n\n  get height() {\n    return void 0 !== this._height ? this._height : this.sourceHeight;\n  }\n\n  set height(t) {\n    this._height = t;\n  }\n\n  get source() {\n    return this._source;\n  }\n\n  set source(t) {\n    this._source = t, this.invalidateTexture();\n  }\n\n  get sourceHeight() {\n    return this._source instanceof HTMLImageElement ? this._source.naturalHeight : this._source.height;\n  }\n\n  get sourceWidth() {\n    return this._source instanceof HTMLImageElement ? this._source.naturalWidth : this._source.width;\n  }\n\n  get width() {\n    return void 0 !== this._width ? this._width : this.sourceWidth;\n  }\n\n  set width(t) {\n    this._width = t;\n  }\n\n  beforeRender(t) {\n    super.beforeRender(t), this.updateTexture(t.context);\n  }\n\n  invalidateTexture() {\n    this._textureInvalidated || (this._textureInvalidated = !0, this.requestRenderOnSourceChangedEnabled && this.requestRender());\n  }\n\n  _createTransforms() {\n    return {\n      dvs: n()\n    };\n  }\n\n  setTransform(t) {\n    const n = e(this.transforms.dvs),\n          [u, a] = t.toScreenNoRotation([0, 0], [this.x, this.y]),\n          d = this.resolution / this.pixelRatio / t.resolution,\n          c = d * this.width,\n          l = d * this.height,\n          _ = Math.PI * this.rotation / 180;\n\n    i(n, n, o(u, a)), i(n, n, o(c / 2, l / 2)), s(n, n, -_), i(n, n, o(-c / 2, -l / 2)), r(n, n, o(c, l)), h(this.transforms.dvs, t.displayViewMat3, n);\n  }\n\n  setSamplingProfile(t) {\n    this._texture && (t.mips && !this._texture.descriptor.hasMipmap && this._texture.generateMipmap(), this._texture.setSamplingMode(t.samplingMode));\n  }\n\n  bind(t, e) {\n    this._texture && t.bindTexture(this._texture, e);\n  }\n\n  updateTexture(e) {\n    if (!this.stage) return this._texture?.dispose(), void (this._texture = null);\n    if (!this._textureInvalidated) return;\n    this._textureInvalidated = !1, this._texture || (this.source ? this._texture = f(e, this.sourceWidth, this.sourceHeight) : this._texture = f(e));\n    const i = this.source;\n\n    if (i) {\n      if (this._texture.resize(this.sourceWidth, this.sourceHeight), m(i)) {\n        if (i instanceof a) {\n          const e = i.getRenderedRasterPixels();\n\n          this._texture.setData(t(e) ? e.renderedRasterPixels : null);\n        } else this._texture.setData(p(i));\n      } else g(i) && this._texture.setData(i);\n      this.ready();\n    } else this._texture.setData(null);\n  }\n\n  onAttach() {\n    this.invalidateTexture();\n  }\n\n  onDetach() {\n    this.invalidateTexture();\n  }\n\n}\n\nexport { v as Bitmap, m as isImageSource, p as rasterize };","map":{"version":3,"names":["isSome","t","b","e","c","i","r","s","j","m","h","n","f","o","DisplayObject","u","a","TextureType","d","PixelFormat","PixelType","l","TextureWrapMode","_","Texture","x","g","p","document","createElement","width","height","render","getContext","target","TEXTURE_2D","pixelFormat","RGBA","internalFormat","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","v","constructor","requestRenderOnSourceChangedEnabled","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","y","blendFunction","source","requestRender","bind","destroy","_texture","dispose","isSourceScaled","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","beforeRender","updateTexture","context","_createTransforms","dvs","setTransform","transforms","toScreenNoRotation","Math","PI","displayViewMat3","setSamplingProfile","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","stage","resize","getRenderedRasterPixels","setData","renderedRasterPixels","ready","onAttach","onDetach","Bitmap","isImageSource","rasterize"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/Bitmap.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{b as e,c as i,r as s,j as r,m as h}from\"../../../chunks/mat3.js\";import{c as n}from\"../../../chunks/mat3f32.js\";import{f as o}from\"../../../chunks/vec2f32.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";import{TextureType as d,PixelFormat as c,PixelType as l,TextureWrapMode as _}from\"../../webgl/enums.js\";import{Texture as x}from\"../../webgl/Texture.js\";function m(t){return t&&\"render\"in t}function g(t){return t&&!(\"render\"in t)}function p(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function f(t,e,i){const s={target:d.TEXTURE_2D,pixelFormat:c.RGBA,internalFormat:c.RGBA,dataType:l.UNSIGNED_BYTE,wrapMode:_.CLAMP_TO_EDGE};return e&&i&&(s.width=e,s.height=i),new x(t,s)}class v extends u{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:n()}}setTransform(t){const n=e(this.transforms.dvs),[u,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,c=d*this.width,l=d*this.height,_=Math.PI*this.rotation/180;i(n,n,o(u,a)),i(n,n,o(c/2,l/2)),s(n,n,-_),i(n,n,o(-c/2,-l/2)),r(n,n,o(c,l)),h(this.transforms.dvs,t.displayViewMat3,n)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}updateTexture(e){if(!this.stage)return this._texture?.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=f(e,this.sourceWidth,this.sourceHeight):this._texture=f(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),m(i))if(i instanceof a){const e=i.getRenderedRasterPixels();this._texture.setData(t(e)?e.renderedRasterPixels:null)}else this._texture.setData(p(i));else g(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{v as Bitmap,m as isImageSource,p as rasterize};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}