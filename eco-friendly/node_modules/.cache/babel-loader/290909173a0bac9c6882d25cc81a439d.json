{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSymbol3D as t } from \"../../symbols.js\";\nimport { isDevEnvironment as e, adjustStaticAGOUrl as r } from \"../../core/devEnvironmentUtils.js\";\nimport o from \"../../core/Error.js\";\nimport { unwrapOrThrow as l, isSome as n } from \"../../core/maybe.js\";\nimport { urlToObject as m, removeFile as s } from \"../../core/urlUtils.js\";\nimport a from \"../../portal/Portal.js\";\nimport { f as i } from \"../../chunks/persistableUrlUtils.js\";\nimport { fromJSON as p } from \"./jsonUtils.js\";\nimport u from \"./StyleOrigin.js\";\nimport { fetchStyle as f, symbolUrlFromStyleItem as y, requestJSON as c, makeCIMSymbolRef as b, Style2DUrlTemplate as g } from \"./styleUtils.js\";\nimport { Thumbnail as j } from \"./Thumbnail.js\";\n\nfunction h(t, e, r, n) {\n  return t.name ? t.styleName && \"Esri2DPointSymbolsStyle\" === t.styleName ? U(t, e, n) : f(t, e, n).then(o => d(l(o), t.name, e, r, n)) : Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\"));\n}\n\nfunction d(l, f, g, h, d) {\n  const U = l.data,\n        N = g && n(g.portal) ? g.portal : a.getDefault(),\n        w = {\n    portal: N,\n    url: m(l.baseUrl),\n    origin: \"portal-item\"\n  },\n        S = U.items.find(t => t.name === f);\n\n  if (!S) {\n    const t = `The symbol name '${f}' could not be found`;\n    return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\", t, {\n      symbolName: f\n    }));\n  }\n\n  let D = i(y(S, h), w),\n      O = S.thumbnail?.href ?? null;\n  const P = S.thumbnail && S.thumbnail.imageData;\n  e() && (D = r(D) ?? \"\", O = r(O));\n  const E = {\n    portal: N,\n    url: m(s(D)),\n    origin: \"portal-item\"\n  };\n  return c(D, d).then(e => {\n    const r = \"cimRef\" === h ? b(e.data) : e.data,\n          o = p(r, E);\n\n    if (o && t(o)) {\n      if (O) {\n        const t = i(O, w);\n        o.thumbnail = new j({\n          url: t\n        });\n      } else P && (o.thumbnail = new j({\n        url: `data:image/png;base64,${P}`\n      }));\n\n      l.styleUrl ? o.styleOrigin = new u({\n        portal: g.portal,\n        styleUrl: l.styleUrl,\n        name: f\n      }) : l.styleName && (o.styleOrigin = new u({\n        portal: g.portal,\n        styleName: l.styleName,\n        name: f\n      }));\n    }\n\n    return o;\n  });\n}\n\nfunction U(t, e, r) {\n  const o = g.replace(/\\{SymbolName\\}/gi, t.name),\n        l = n(e.portal) ? e.portal : a.getDefault();\n  return c(o, r).then(t => {\n    const e = b(t.data);\n    return p(e, {\n      portal: l,\n      url: m(s(o)),\n      origin: \"portal-item\"\n    });\n  });\n}\n\nexport { d as fetchSymbolFromStyle, h as resolveWebStyleSymbol };","map":{"version":3,"names":["isSymbol3D","t","isDevEnvironment","e","adjustStaticAGOUrl","r","o","unwrapOrThrow","l","isSome","n","urlToObject","m","removeFile","s","a","f","i","fromJSON","p","u","fetchStyle","symbolUrlFromStyleItem","y","requestJSON","c","makeCIMSymbolRef","b","Style2DUrlTemplate","g","Thumbnail","j","h","name","styleName","U","then","d","Promise","reject","data","N","portal","getDefault","w","url","baseUrl","origin","S","items","find","symbolName","D","O","thumbnail","href","P","imageData","E","styleUrl","styleOrigin","replace","fetchSymbolFromStyle","resolveWebStyleSymbol"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import o from\"../../core/Error.js\";import{unwrapOrThrow as l,isSome as n}from\"../../core/maybe.js\";import{urlToObject as m,removeFile as s}from\"../../core/urlUtils.js\";import a from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as p}from\"./jsonUtils.js\";import u from\"./StyleOrigin.js\";import{fetchStyle as f,symbolUrlFromStyleItem as y,requestJSON as c,makeCIMSymbolRef as b,Style2DUrlTemplate as g}from\"./styleUtils.js\";import{Thumbnail as j}from\"./Thumbnail.js\";function h(t,e,r,n){return t.name?t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?U(t,e,n):f(t,e,n).then((o=>d(l(o),t.name,e,r,n))):Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"))}function d(l,f,g,h,d){const U=l.data,N=g&&n(g.portal)?g.portal:a.getDefault(),w={portal:N,url:m(l.baseUrl),origin:\"portal-item\"},S=U.items.find((t=>t.name===f));if(!S){const t=`The symbol name '${f}' could not be found`;return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:f}))}let D=i(y(S,h),w),O=S.thumbnail?.href??null;const P=S.thumbnail&&S.thumbnail.imageData;e()&&(D=r(D)??\"\",O=r(O));const E={portal:N,url:m(s(D)),origin:\"portal-item\"};return c(D,d).then((e=>{const r=\"cimRef\"===h?b(e.data):e.data,o=p(r,E);if(o&&t(o)){if(O){const t=i(O,w);o.thumbnail=new j({url:t})}else P&&(o.thumbnail=new j({url:`data:image/png;base64,${P}`}));l.styleUrl?o.styleOrigin=new u({portal:g.portal,styleUrl:l.styleUrl,name:f}):l.styleName&&(o.styleOrigin=new u({portal:g.portal,styleName:l.styleName,name:f}))}return o}))}function U(t,e,r){const o=g.replace(/\\{SymbolName\\}/gi,t.name),l=n(e.portal)?e.portal:a.getDefault();return c(o,r).then((t=>{const e=b(t.data);return p(e,{portal:l,url:m(s(o)),origin:\"portal-item\"})}))}export{d as fetchSymbolFromStyle,h as resolveWebStyleSymbol};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}