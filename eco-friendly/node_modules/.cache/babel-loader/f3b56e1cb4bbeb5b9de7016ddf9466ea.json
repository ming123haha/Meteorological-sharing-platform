{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport { acosClamped as t, reciprocalClamped as r } from \"../../../../core/mathUtils.js\";\nimport { isSome as i, get as s } from \"../../../../core/maybe.js\";\nimport { s as a } from \"../../../../chunks/mat2.js\";\nimport { a as o, f as n } from \"../../../../chunks/vec2.js\";\nimport { f as l, b as h } from \"../../../../chunks/vec2f64.js\";\nimport { s as c, a as p, e as m, f, g as d, n as u, o as g, b as y } from \"../../../../chunks/vec3.js\";\nimport { c as _ } from \"../../../../chunks/vec3f32.js\";\nimport { d as b, c as v } from \"../../../../chunks/vec3f64.js\";\nimport { projectBuffer as x } from \"../../../../geometry/projection.js\";\nimport { create as w, empty as S, expandWithBuffer as R, intersectsClippingArea as D } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { makeDehydratedPoint as P } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport { needsElevationUpdates3D as j, evaluateElevationAlignmentAtPoint as C, SampleElevationInfo as A, evaluateElevationInfoAtPoint as V } from \"./elevationAlignmentUtils.js\";\nimport { ElevationContext as L } from \"./ElevationContext.js\";\nimport { Graphics3DObject3DGraphicLayer as z } from \"./Graphics3DObject3DGraphicLayer.js\";\nimport { Graphics3DSymbolLayer as E, getAttributeValue as U } from \"./Graphics3DSymbolLayer.js\";\nimport { isValidSize as k } from \"./graphicUtils.js\";\nimport { ApplyRendererDiffResult as F } from \"./interfaces.js\";\nimport { initFastSymbolUpdatesState as G, updateFastSymbolUpdatesState as I } from \"../support/FastSymbolUpdates.js\";\nimport { CullFaceOptions as M } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Object3D as B } from \"../../webgl-engine/lib/Object3D.js\";\nimport { PathGeometry as O, isPathGeometry as q } from \"../../webgl-engine/lib/PathGeometry.js\";\nimport { Profile as H, SimpleExtruder as T, MiterExtruder as N, RoundCapBuilder as W, TriangulationCapBuilder as Z, NoCapBuilder as J, PathVertex as K, Path as Q, Builder as X, FastUpdatePathGeometry as Y, StaticPathGeometry as $, computeMinimumRotationTangentFrame as ee, vertexSpaceToProfileSpace as te } from \"../../webgl-engine/lib/pathGeometryUtils.js\";\nimport { DefaultMaterial as re } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { PathMaterial as ie } from \"../../webgl-engine/materials/PathMaterial.js\";\nconst se = [\"polyline\"];\n\nclass ae extends E {\n  constructor(e, t, r, i) {\n    super(e, t, r, i), this._intrinsicSize = l(1, 1), this.upVectorAlignment = \"path\", this.stencilWidth = .1, this.ensureDrapedStatus(!1);\n  }\n\n  async doLoad() {\n    const t = i(this.symbolLayer.width) ? this.symbolLayer.width : this.symbolLayer.height,\n          r = i(this.symbolLayer.height) ? this.symbolLayer.height : t;\n    this._vvConvertOptions = {\n      modelSize: [1, 1, 1],\n      symbolSize: [t, 1, r],\n      unitInMeters: this._context.renderCoordsHelper.unitInMeters,\n      transformation: {\n        anchor: [0, 0, 0],\n        scale: [1, 1, 1],\n        rotation: [0, 0, 0]\n      },\n      supportedTypes: {\n        size: !0,\n        color: !0,\n        opacity: !0,\n        rotation: !1\n      }\n    }, this._context.renderer && this._context.renderer.visualVariables && this._context.renderer.visualVariables.length > 0 ? this._fastUpdates = G(this._context.renderer, this._vvConvertOptions) : this._fastUpdates = {\n      enabled: !1\n    };\n    const a = this.symbolLayer.anchor || \"center\";\n    this.upVectorAlignment = \"path\", \"heading\" === this.symbolLayer.profileRotation && (this.upVectorAlignment = \"world\");\n    const l = this.symbolLayer.profile || \"circle\";\n\n    switch (l) {\n      case \"circle\":\n      default:\n        this._profile = H.circle(_e);\n        break;\n\n      case \"quad\":\n        this._profile = H.rect();\n    }\n\n    let c = [0, 0];\n    \"center\" !== a && (c = {\n      left: [.5, 0],\n      right: [-.5, 0],\n      top: [0, -.5],\n      bottom: [0, .5]\n    }[a], this._profile.translate(c[0], c[1]));\n\n    switch (this.symbolLayer.join || \"simple\") {\n      case \"round\":\n        this._extruder = new N(0, ge);\n        break;\n\n      case \"bevel\":\n        this._extruder = new N(0, 1);\n        break;\n\n      case \"miter\":\n        this._extruder = new N(.8 * Math.PI, 1);\n        break;\n\n      default:\n        this._extruder = new T();\n    }\n\n    const p = this.symbolLayer.cap || \"butt\";\n\n    switch (p) {\n      case \"none\":\n        this._startCap = new J(), this._endCap = new J();\n        break;\n\n      case \"butt\":\n      default:\n        this._startCap = new Z(this._profile, 0), this._endCap = new Z(this._profile, 0, !0);\n        break;\n\n      case \"square\":\n        this._startCap = new Z(this._profile, -.5), this._endCap = new Z(this._profile, .5, !0);\n        break;\n\n      case \"round\":\n        {\n          const e = \"quad\" === l;\n          this._startCap = new W({\n            profile: this._profile,\n            flip: !1,\n            breakNormals: e,\n            subdivisions: ye\n          }), this._endCap = new W({\n            profile: this._profile,\n            flip: !0,\n            breakNormals: e,\n            subdivisions: ye\n          });\n          break;\n        }\n    }\n\n    const m = s(this.symbolLayer, \"material\", \"color\"),\n          f = this._getCombinedOpacityAndColor(m),\n          d = b(f),\n          u = f[3],\n          g = u < 1 || this.needsDrivenTransparentPass,\n          y = {\n      diffuse: d,\n      ambient: d,\n      opacity: u,\n      transparent: g,\n      hasVertexColors: !1,\n      hasSlicePlane: this._context.slicePlaneEnabled,\n      castShadows: this.symbolLayer.castShadows,\n      cullFace: g || \"none\" === p ? M.None : M.Back,\n      offsetTransparentBackfaces: !0\n    };\n\n    if (!this._drivenProperties.size && (o(this._intrinsicSize, t, r), !k(this._intrinsicSize[0]) || !k(this._intrinsicSize[1]))) throw new e(\"graphics3dpathsymbollayer:invalid-size\", \"Symbol sizes may not be negative values\");\n\n    if (this._fastUpdates.enabled && this._fastUpdates.visualVariables.size || n(this._intrinsicSize, this._intrinsicSize, 1 / this._context.renderCoordsHelper.unitInMeters), this._fastUpdates.enabled) {\n      const e = { ...y,\n        ...this._fastUpdates.materialParameters,\n        size: h(this._intrinsicSize)\n      };\n      this._material = new ie(e);\n    } else y.hasVertexColors = this._drivenProperties.color || this._drivenProperties.opacity, this._material = new re(y);\n\n    this._material.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), this._context.stage.add(this._material);\n  }\n\n  destroy() {\n    super.destroy(), this._context.stage.remove(this._material), this._material = null;\n  }\n\n  createGraphics3DGraphic(e) {\n    const t = e.graphic;\n    if (!this._validateGeometry(t.geometry, se, this.symbolLayer.type)) return null;\n    const r = this.setGraphicElevationContext(t, new L()),\n          i = e.renderingInfo;\n    return this._createAs3DShape(t, i, r, t.uid);\n  }\n\n  layerOpacityChanged() {\n    const e = s(this.symbolLayer, \"material\", \"color\"),\n          t = this._getCombinedOpacity(e),\n          r = t < 1 || this.needsDrivenTransparentPass;\n\n    return this._material.setParameters({\n      opacity: t,\n      transparent: r\n    }), !0;\n  }\n\n  layerElevationInfoChanged(e, t) {\n    return this.updateGraphics3DGraphicElevationInfo(e, t, j);\n  }\n\n  slicePlaneEnabledChanged() {\n    return this._material.setParameters({\n      hasSlicePlane: this._context.slicePlaneEnabled\n    }), !0;\n  }\n\n  physicalBasedRenderingChanged() {\n    return this._material.setParameters({\n      usePBR: this._context.physicalBasedRenderingEnabled,\n      isSchematic: !0\n    }), !0;\n  }\n\n  pixelRatioChanged() {\n    return !0;\n  }\n\n  applyRendererDiff(e, t) {\n    for (const r in e.diff) {\n      if (\"visualVariables\" !== r) return F.Recreate_Symbol;\n      if (!I(this._fastUpdates, t, this._vvConvertOptions)) return F.Recreate_Symbol;\n\n      this._material.setParameters(this._fastUpdates.materialParameters);\n    }\n\n    return F.Fast_Update;\n  }\n\n  getVertexData(e) {\n    let t = 0;\n    const r = e.paths,\n          i = [],\n          s = e.spatialReference,\n          a = this._context.elevationProvider.spatialReference,\n          o = this._context.renderCoordsHelper.spatialReference;\n\n    for (const m of r) t += m.length;\n\n    const n = new Float64Array(3 * t),\n          l = new Float64Array(3 * t),\n          h = new Float64Array(3 * t);\n    let c = 0;\n\n    for (const m of r) {\n      i.push({\n        index: c,\n        numVertices: m.length\n      });\n\n      for (const t of m) n[c++] = t[0], n[c++] = t[1], n[c++] = e.hasZ ? t[2] : 0;\n    }\n\n    let p = !0;\n    return s.equals(a) ? this._copyVertices(n, 0, l, 0, t) : p = x(n, s, 0, l, a, 0, t), a.equals(o) ? this._copyVertices(l, 0, h, 0, t) : x(l, a, 0, h, o, 0, t), {\n      pathVertexDataInfos: i,\n      vertexDataGS: n,\n      vertexDataES: l,\n      vertexDataRS: h,\n      projectionSuccess: p,\n      terrainElevation: 0\n    };\n  }\n\n  _copyVertices(e, t, r, i, s) {\n    t *= 3, i *= 3;\n\n    for (let a = 0; a < s; ++a) r[i++] = e[t++], r[i++] = e[t++], r[i++] = e[t++];\n  }\n\n  _createAs3DShape(e, t, r, s) {\n    const a = e.geometry,\n          o = new Array(),\n          n = new Array(),\n          l = new Array(),\n          h = a.spatialReference,\n          p = w(),\n          m = this._context.renderCoordsHelper;\n    pe.spatialReference = h;\n    const f = this.getVertexData(a);\n    if (!f.projectionSuccess) return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"), null;\n\n    if (f.pathVertexDataInfos.length > 0) {\n      for (let s = 0; s < f.pathVertexDataInfos.length; ++s) {\n        const a = f.pathVertexDataInfos[s],\n              d = a.index,\n              u = a.numVertices;\n        if (u < 2) continue;\n        if (i(this._context.clippingExtent) && (S(p), R(p, f.vertexDataES, 3 * d, u), !D(p, this._context.clippingExtent))) continue;\n        const g = [];\n\n        for (let e = d; e < d + 3 * u;) {\n          const t = e++,\n                i = e++,\n                s = e++,\n                a = new K();\n          c(a.posGS, f.vertexDataGS[t], f.vertexDataGS[i], f.vertexDataGS[s]), c(a.posES, f.vertexDataES[t], f.vertexDataES[i], f.vertexDataES[s]);\n          const o = C(a.posES, this._context.elevationProvider, r, m);\n          c(me, f.vertexDataRS[t], f.vertexDataRS[i], f.vertexDataRS[s]), m.setAltitude(me, o), c(a.pos, me[0], me[1], me[2]), g.push(a);\n        }\n\n        const y = new Q(g);\n        oe(y, this.upVectorAlignment, this._context.renderCoordsHelper);\n\n        const _ = new X(y, this._profile, this._extruder, this._startCap, this._endCap);\n\n        let b = null;\n\n        if (this._fastUpdates.enabled) {\n          const t = this._fastUpdates.visualVariables,\n                r = t.size ? U(t.size.field, e) : 0,\n                i = t.color ? U(t.color.field, e) : 0,\n                s = t.opacity ? U(t.opacity.field, e) : 0;\n          b = new Y(_, r, i, s);\n        } else {\n          const e = [this._intrinsicSize[0], this._intrinsicSize[1]];\n          this._drivenProperties.size && (e[0] *= ne(t.size[0], \"symbol-value\" === t.size[2] ? this.symbolLayer.height || 0 : t.size[2], this.symbolLayer.width || 0), e[1] *= ne(t.size[2], \"symbol-value\" === t.size[0] ? this.symbolLayer.width || 0 : t.size[0], this.symbolLayer.height || 0));\n          let r = null;\n          this._drivenProperties.color && (r = t.color), this._drivenProperties.opacity && null != t.opacity && (r = r ? [r[0], r[1], r[2], t.opacity] : [1, 1, 1, t.opacity]);\n          const i = new $(_);\n          i.bake(e), r && i.bakeVertexColors(r), b = i;\n        }\n\n        const {\n          vertexAttributes: v,\n          indices: x\n        } = b.createGeometryData(),\n              w = new O(v, x, b, h, this.upVectorAlignment, this.stencilWidth);\n        o.push(w), n.push(this._material), l.push(b.xform);\n      }\n\n      if (o.length > 0) {\n        const e = {\n          layerUid: this._context.layer.uid,\n          graphicUid: s\n        },\n              t = new B({\n          geometries: o,\n          materials: n,\n          transformations: l,\n          metadata: e\n        }),\n              i = new z(this, t, o, null, null, he, r);\n        return i.alignedSampledElevation = f.terrainElevation, i.needsElevationUpdates = j(r.mode), i;\n      }\n    } else 0 !== a.paths.length && a.paths.some(e => e.length > 0) || this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\");\n\n    return null;\n  }\n\n}\n\nfunction oe(e, i, s) {\n  switch (i) {\n    case \"world\":\n      for (const t of e.vertices) p(fe, t.pos, e.offset), s.worldUpAtPosition(fe, me), t.setFrameFromUpVector(me), t.computeRotationAxisAndAngleFromUpVector();\n\n      break;\n\n    case \"path\":\n      p(fe, e.vertices[0].pos, e.offset), s.worldUpAtPosition(fe, me), ee(e, me);\n\n      for (const i of e.vertices) {\n        const e = Math.sign(m(i.frame.right, i.vRight));\n        f(i.rotationFrame.up, i.vRight, i.vLeft), d(i.rotationFrame.up, i.rotationFrame.up, e), u(i.rotationFrame.up, i.rotationFrame.up);\n        const s = m(i.rotationFrame.up, i.frame.up),\n              o = m(i.rotationFrame.up, i.frame.right);\n\n        if (d(fe, i.frame.up, -o), d(de, i.frame.right, s), p(fe, fe, de), u(i.rotationFrame.right, fe), te(i.rotationRight, i.frame, i.rotationFrame.right), g(fe, i.vLeft), i.rotationAngle = -e * (Math.PI - t(m(fe, i.vRight))), Math.abs(i.rotationAngle) > 0) {\n          const e = r(Math.cos(.5 * i.rotationAngle));\n          a(i.miterStretch, 1 + (e - 1) * i.rotationRight[0] * i.rotationRight[0], (e - 1) * i.rotationRight[0] * i.rotationRight[1], (e - 1) * i.rotationRight[0] * i.rotationRight[1], 1 + (e - 1) * i.rotationRight[1] * i.rotationRight[1]);\n        }\n\n        const n = Math.PI - i.rotationAngle;\n        i.maxStretchDistance = Math.abs(Math.min(i.vLeftLength, i.vRightLength) * r(Math.cos(.5 * n)));\n      }\n\n  }\n}\n\nfunction ne(e, t, r) {\n  switch (e) {\n    case \"symbol-value\":\n      return r;\n\n    case \"proportional\":\n      return t;\n\n    default:\n      return e;\n  }\n}\n\nfunction le(e, t, r, i) {\n  let s = 0;\n\n  for (const a of e.vertices) V(a.posES, r, t, i, ue), s += ue.sampledElevation, p(me, a.pos, e.offset), i.setAltitude(me, ue.z), y(a.pos, me, e.offset);\n\n  return e.updatePathVertexInformation(), s / e.vertices.length;\n}\n\nfunction he(e, t, r, i) {\n  const s = e.stageObject,\n        a = s.geometryRecords;\n  let o = 0;\n  ce.spatialReference = i.spatialReference;\n\n  for (const n of a) {\n    const e = n.geometry;\n    if (!q(e)) continue;\n    const a = e.path,\n          l = a.builder.path,\n          h = e.geometrySR;\n    pe.spatialReference = h, o += le(l, t, r, i), \"world\" !== e.upVectorAlignment && oe(l, e.upVectorAlignment, i), a.onPathChanged(), e.invalidateBoundingInfo(), s.geometryVertexAttrsUpdated(n);\n  }\n\n  return o / a.length;\n}\n\nconst ce = P(0, 0, 0, null),\n      pe = P(0, 0, 0, null),\n      me = v(),\n      fe = _(),\n      de = _(),\n      ue = new A(),\n      ge = 3,\n      ye = 3,\n      _e = 10;\n\nexport { ae as Graphics3DPathSymbolLayer, _e as NUM_CIRCLE_PROFILE_SUBDIVISIONS, ye as NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS, ge as NUM_ROUND_JOIN_SUBDIVISIONS };","map":{"version":3,"names":["e","acosClamped","t","reciprocalClamped","r","isSome","i","get","s","a","o","f","n","l","b","h","c","p","m","g","d","u","y","_","v","projectBuffer","x","create","w","empty","S","expandWithBuffer","R","intersectsClippingArea","D","makeDehydratedPoint","P","needsElevationUpdates3D","j","evaluateElevationAlignmentAtPoint","C","SampleElevationInfo","A","evaluateElevationInfoAtPoint","V","ElevationContext","L","Graphics3DObject3DGraphicLayer","z","Graphics3DSymbolLayer","E","getAttributeValue","U","isValidSize","k","ApplyRendererDiffResult","F","initFastSymbolUpdatesState","G","updateFastSymbolUpdatesState","I","CullFaceOptions","M","Object3D","B","PathGeometry","O","isPathGeometry","q","Profile","H","SimpleExtruder","T","MiterExtruder","N","RoundCapBuilder","W","TriangulationCapBuilder","Z","NoCapBuilder","J","PathVertex","K","Path","Q","Builder","X","FastUpdatePathGeometry","Y","StaticPathGeometry","$","computeMinimumRotationTangentFrame","ee","vertexSpaceToProfileSpace","te","DefaultMaterial","re","PathMaterial","ie","se","ae","constructor","_intrinsicSize","upVectorAlignment","stencilWidth","ensureDrapedStatus","doLoad","symbolLayer","width","height","_vvConvertOptions","modelSize","symbolSize","unitInMeters","_context","renderCoordsHelper","transformation","anchor","scale","rotation","supportedTypes","size","color","opacity","renderer","visualVariables","length","_fastUpdates","enabled","profileRotation","profile","_profile","circle","_e","rect","left","right","top","bottom","translate","join","_extruder","ge","Math","PI","cap","_startCap","_endCap","flip","breakNormals","subdivisions","ye","_getCombinedOpacityAndColor","needsDrivenTransparentPass","diffuse","ambient","transparent","hasVertexColors","hasSlicePlane","slicePlaneEnabled","castShadows","cullFace","None","Back","offsetTransparentBackfaces","_drivenProperties","materialParameters","_material","setParameters","usePBR","physicalBasedRenderingEnabled","isSchematic","stage","add","destroy","remove","createGraphics3DGraphic","graphic","_validateGeometry","geometry","type","setGraphicElevationContext","renderingInfo","_createAs3DShape","uid","layerOpacityChanged","_getCombinedOpacity","layerElevationInfoChanged","updateGraphics3DGraphicElevationInfo","slicePlaneEnabledChanged","physicalBasedRenderingChanged","pixelRatioChanged","applyRendererDiff","diff","Recreate_Symbol","Fast_Update","getVertexData","paths","spatialReference","elevationProvider","Float64Array","push","index","numVertices","hasZ","equals","_copyVertices","pathVertexDataInfos","vertexDataGS","vertexDataES","vertexDataRS","projectionSuccess","terrainElevation","Array","pe","logger","warn","clippingExtent","posGS","posES","me","setAltitude","pos","oe","field","ne","bake","bakeVertexColors","vertexAttributes","indices","createGeometryData","xform","layerUid","layer","graphicUid","geometries","materials","transformations","metadata","he","alignedSampledElevation","needsElevationUpdates","mode","some","vertices","fe","offset","worldUpAtPosition","setFrameFromUpVector","computeRotationAxisAndAngleFromUpVector","sign","frame","vRight","rotationFrame","up","vLeft","de","rotationRight","rotationAngle","abs","cos","miterStretch","maxStretchDistance","min","vLeftLength","vRightLength","le","ue","sampledElevation","updatePathVertexInformation","stageObject","geometryRecords","ce","path","builder","geometrySR","onPathChanged","invalidateBoundingInfo","geometryVertexAttrsUpdated","Graphics3DPathSymbolLayer","NUM_CIRCLE_PROFILE_SUBDIVISIONS","NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS","NUM_ROUND_JOIN_SUBDIVISIONS"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{acosClamped as t,reciprocalClamped as r}from\"../../../../core/mathUtils.js\";import{isSome as i,get as s}from\"../../../../core/maybe.js\";import{s as a}from\"../../../../chunks/mat2.js\";import{a as o,f as n}from\"../../../../chunks/vec2.js\";import{f as l,b as h}from\"../../../../chunks/vec2f64.js\";import{s as c,a as p,e as m,f,g as d,n as u,o as g,b as y}from\"../../../../chunks/vec3.js\";import{c as _}from\"../../../../chunks/vec3f32.js\";import{d as b,c as v}from\"../../../../chunks/vec3f64.js\";import{projectBuffer as x}from\"../../../../geometry/projection.js\";import{create as w,empty as S,expandWithBuffer as R,intersectsClippingArea as D}from\"../../../../geometry/support/aaBoundingBox.js\";import{makeDehydratedPoint as P}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{needsElevationUpdates3D as j,evaluateElevationAlignmentAtPoint as C,SampleElevationInfo as A,evaluateElevationInfoAtPoint as V}from\"./elevationAlignmentUtils.js\";import{ElevationContext as L}from\"./ElevationContext.js\";import{Graphics3DObject3DGraphicLayer as z}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as E,getAttributeValue as U}from\"./Graphics3DSymbolLayer.js\";import{isValidSize as k}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as F}from\"./interfaces.js\";import{initFastSymbolUpdatesState as G,updateFastSymbolUpdatesState as I}from\"../support/FastSymbolUpdates.js\";import{CullFaceOptions as M}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3D as B}from\"../../webgl-engine/lib/Object3D.js\";import{PathGeometry as O,isPathGeometry as q}from\"../../webgl-engine/lib/PathGeometry.js\";import{Profile as H,SimpleExtruder as T,MiterExtruder as N,RoundCapBuilder as W,TriangulationCapBuilder as Z,NoCapBuilder as J,PathVertex as K,Path as Q,Builder as X,FastUpdatePathGeometry as Y,StaticPathGeometry as $,computeMinimumRotationTangentFrame as ee,vertexSpaceToProfileSpace as te}from\"../../webgl-engine/lib/pathGeometryUtils.js\";import{DefaultMaterial as re}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{PathMaterial as ie}from\"../../webgl-engine/materials/PathMaterial.js\";const se=[\"polyline\"];class ae extends E{constructor(e,t,r,i){super(e,t,r,i),this._intrinsicSize=l(1,1),this.upVectorAlignment=\"path\",this.stencilWidth=.1,this.ensureDrapedStatus(!1)}async doLoad(){const t=i(this.symbolLayer.width)?this.symbolLayer.width:this.symbolLayer.height,r=i(this.symbolLayer.height)?this.symbolLayer.height:t;this._vvConvertOptions={modelSize:[1,1,1],symbolSize:[t,1,r],unitInMeters:this._context.renderCoordsHelper.unitInMeters,transformation:{anchor:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},supportedTypes:{size:!0,color:!0,opacity:!0,rotation:!1}},this._context.renderer&&this._context.renderer.visualVariables&&this._context.renderer.visualVariables.length>0?this._fastUpdates=G(this._context.renderer,this._vvConvertOptions):this._fastUpdates={enabled:!1};const a=this.symbolLayer.anchor||\"center\";this.upVectorAlignment=\"path\",\"heading\"===this.symbolLayer.profileRotation&&(this.upVectorAlignment=\"world\");const l=this.symbolLayer.profile||\"circle\";switch(l){case\"circle\":default:this._profile=H.circle(_e);break;case\"quad\":this._profile=H.rect()}let c=[0,0];\"center\"!==a&&(c={left:[.5,0],right:[-.5,0],top:[0,-.5],bottom:[0,.5]}[a],this._profile.translate(c[0],c[1]));switch(this.symbolLayer.join||\"simple\"){case\"round\":this._extruder=new N(0,ge);break;case\"bevel\":this._extruder=new N(0,1);break;case\"miter\":this._extruder=new N(.8*Math.PI,1);break;default:this._extruder=new T}const p=this.symbolLayer.cap||\"butt\";switch(p){case\"none\":this._startCap=new J,this._endCap=new J;break;case\"butt\":default:this._startCap=new Z(this._profile,0),this._endCap=new Z(this._profile,0,!0);break;case\"square\":this._startCap=new Z(this._profile,-.5),this._endCap=new Z(this._profile,.5,!0);break;case\"round\":{const e=\"quad\"===l;this._startCap=new W({profile:this._profile,flip:!1,breakNormals:e,subdivisions:ye}),this._endCap=new W({profile:this._profile,flip:!0,breakNormals:e,subdivisions:ye});break}}const m=s(this.symbolLayer,\"material\",\"color\"),f=this._getCombinedOpacityAndColor(m),d=b(f),u=f[3],g=u<1||this.needsDrivenTransparentPass,y={diffuse:d,ambient:d,opacity:u,transparent:g,hasVertexColors:!1,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:g||\"none\"===p?M.None:M.Back,offsetTransparentBackfaces:!0};if(!this._drivenProperties.size&&(o(this._intrinsicSize,t,r),!k(this._intrinsicSize[0])||!k(this._intrinsicSize[1])))throw new e(\"graphics3dpathsymbollayer:invalid-size\",\"Symbol sizes may not be negative values\");if(this._fastUpdates.enabled&&this._fastUpdates.visualVariables.size||n(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters),this._fastUpdates.enabled){const e={...y,...this._fastUpdates.materialParameters,size:h(this._intrinsicSize)};this._material=new ie(e)}else y.hasVertexColors=this._drivenProperties.color||this._drivenProperties.opacity,this._material=new re(y);this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._context.stage.add(this._material)}destroy(){super.destroy(),this._context.stage.remove(this._material),this._material=null}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,se,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t,new L),i=e.renderingInfo;return this._createAs3DShape(t,i,r,t.uid)}layerOpacityChanged(){const e=s(this.symbolLayer,\"material\",\"color\"),t=this._getCombinedOpacity(e),r=t<1||this.needsDrivenTransparentPass;return this._material.setParameters({opacity:t,transparent:r}),!0}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,j)}slicePlaneEnabledChanged(){return this._material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return this._material.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}pixelRatioChanged(){return!0}applyRendererDiff(e,t){for(const r in e.diff){if(\"visualVariables\"!==r)return F.Recreate_Symbol;if(!I(this._fastUpdates,t,this._vvConvertOptions))return F.Recreate_Symbol;this._material.setParameters(this._fastUpdates.materialParameters)}return F.Fast_Update}getVertexData(e){let t=0;const r=e.paths,i=[],s=e.spatialReference,a=this._context.elevationProvider.spatialReference,o=this._context.renderCoordsHelper.spatialReference;for(const m of r)t+=m.length;const n=new Float64Array(3*t),l=new Float64Array(3*t),h=new Float64Array(3*t);let c=0;for(const m of r){i.push({index:c,numVertices:m.length});for(const t of m)n[c++]=t[0],n[c++]=t[1],n[c++]=e.hasZ?t[2]:0}let p=!0;return s.equals(a)?this._copyVertices(n,0,l,0,t):p=x(n,s,0,l,a,0,t),a.equals(o)?this._copyVertices(l,0,h,0,t):x(l,a,0,h,o,0,t),{pathVertexDataInfos:i,vertexDataGS:n,vertexDataES:l,vertexDataRS:h,projectionSuccess:p,terrainElevation:0}}_copyVertices(e,t,r,i,s){t*=3,i*=3;for(let a=0;a<s;++a)r[i++]=e[t++],r[i++]=e[t++],r[i++]=e[t++]}_createAs3DShape(e,t,r,s){const a=e.geometry,o=new Array,n=new Array,l=new Array,h=a.spatialReference,p=w(),m=this._context.renderCoordsHelper;pe.spatialReference=h;const f=this.getVertexData(a);if(!f.projectionSuccess)return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"),null;if(f.pathVertexDataInfos.length>0){for(let s=0;s<f.pathVertexDataInfos.length;++s){const a=f.pathVertexDataInfos[s],d=a.index,u=a.numVertices;if(u<2)continue;if(i(this._context.clippingExtent)&&(S(p),R(p,f.vertexDataES,3*d,u),!D(p,this._context.clippingExtent)))continue;const g=[];for(let e=d;e<d+3*u;){const t=e++,i=e++,s=e++,a=new K;c(a.posGS,f.vertexDataGS[t],f.vertexDataGS[i],f.vertexDataGS[s]),c(a.posES,f.vertexDataES[t],f.vertexDataES[i],f.vertexDataES[s]);const o=C(a.posES,this._context.elevationProvider,r,m);c(me,f.vertexDataRS[t],f.vertexDataRS[i],f.vertexDataRS[s]),m.setAltitude(me,o),c(a.pos,me[0],me[1],me[2]),g.push(a)}const y=new Q(g);oe(y,this.upVectorAlignment,this._context.renderCoordsHelper);const _=new X(y,this._profile,this._extruder,this._startCap,this._endCap);let b=null;if(this._fastUpdates.enabled){const t=this._fastUpdates.visualVariables,r=t.size?U(t.size.field,e):0,i=t.color?U(t.color.field,e):0,s=t.opacity?U(t.opacity.field,e):0;b=new Y(_,r,i,s)}else{const e=[this._intrinsicSize[0],this._intrinsicSize[1]];this._drivenProperties.size&&(e[0]*=ne(t.size[0],\"symbol-value\"===t.size[2]?this.symbolLayer.height||0:t.size[2],this.symbolLayer.width||0),e[1]*=ne(t.size[2],\"symbol-value\"===t.size[0]?this.symbolLayer.width||0:t.size[0],this.symbolLayer.height||0));let r=null;this._drivenProperties.color&&(r=t.color),this._drivenProperties.opacity&&null!=t.opacity&&(r=r?[r[0],r[1],r[2],t.opacity]:[1,1,1,t.opacity]);const i=new $(_);i.bake(e),r&&i.bakeVertexColors(r),b=i}const{vertexAttributes:v,indices:x}=b.createGeometryData(),w=new O(v,x,b,h,this.upVectorAlignment,this.stencilWidth);o.push(w),n.push(this._material),l.push(b.xform)}if(o.length>0){const e={layerUid:this._context.layer.uid,graphicUid:s},t=new B({geometries:o,materials:n,transformations:l,metadata:e}),i=new z(this,t,o,null,null,he,r);return i.alignedSampledElevation=f.terrainElevation,i.needsElevationUpdates=j(r.mode),i}}else 0!==a.paths.length&&a.paths.some((e=>e.length>0))||this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\");return null}}function oe(e,i,s){switch(i){case\"world\":for(const t of e.vertices)p(fe,t.pos,e.offset),s.worldUpAtPosition(fe,me),t.setFrameFromUpVector(me),t.computeRotationAxisAndAngleFromUpVector();break;case\"path\":p(fe,e.vertices[0].pos,e.offset),s.worldUpAtPosition(fe,me),ee(e,me);for(const i of e.vertices){const e=Math.sign(m(i.frame.right,i.vRight));f(i.rotationFrame.up,i.vRight,i.vLeft),d(i.rotationFrame.up,i.rotationFrame.up,e),u(i.rotationFrame.up,i.rotationFrame.up);const s=m(i.rotationFrame.up,i.frame.up),o=m(i.rotationFrame.up,i.frame.right);if(d(fe,i.frame.up,-o),d(de,i.frame.right,s),p(fe,fe,de),u(i.rotationFrame.right,fe),te(i.rotationRight,i.frame,i.rotationFrame.right),g(fe,i.vLeft),i.rotationAngle=-e*(Math.PI-t(m(fe,i.vRight))),Math.abs(i.rotationAngle)>0){const e=r(Math.cos(.5*i.rotationAngle));a(i.miterStretch,1+(e-1)*i.rotationRight[0]*i.rotationRight[0],(e-1)*i.rotationRight[0]*i.rotationRight[1],(e-1)*i.rotationRight[0]*i.rotationRight[1],1+(e-1)*i.rotationRight[1]*i.rotationRight[1])}const n=Math.PI-i.rotationAngle;i.maxStretchDistance=Math.abs(Math.min(i.vLeftLength,i.vRightLength)*r(Math.cos(.5*n)))}}}function ne(e,t,r){switch(e){case\"symbol-value\":return r;case\"proportional\":return t;default:return e}}function le(e,t,r,i){let s=0;for(const a of e.vertices)V(a.posES,r,t,i,ue),s+=ue.sampledElevation,p(me,a.pos,e.offset),i.setAltitude(me,ue.z),y(a.pos,me,e.offset);return e.updatePathVertexInformation(),s/e.vertices.length}function he(e,t,r,i){const s=e.stageObject,a=s.geometryRecords;let o=0;ce.spatialReference=i.spatialReference;for(const n of a){const e=n.geometry;if(!q(e))continue;const a=e.path,l=a.builder.path,h=e.geometrySR;pe.spatialReference=h,o+=le(l,t,r,i),\"world\"!==e.upVectorAlignment&&oe(l,e.upVectorAlignment,i),a.onPathChanged(),e.invalidateBoundingInfo(),s.geometryVertexAttrsUpdated(n)}return o/a.length}const ce=P(0,0,0,null),pe=P(0,0,0,null),me=v(),fe=_(),de=_(),ue=new A,ge=3,ye=3,_e=10;export{ae as Graphics3DPathSymbolLayer,_e as NUM_CIRCLE_PROFILE_SUBDIVISIONS,ye as NUM_ROUND_CAP_EXTRUSION_SUBDIVISIONS,ge as NUM_ROUND_JOIN_SUBDIVISIONS};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}