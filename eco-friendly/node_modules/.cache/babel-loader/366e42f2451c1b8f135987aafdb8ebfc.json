{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport t from \"../../../../request.js\";\nimport r from \"../../../../core/Error.js\";\nimport o from \"../../../../core/Logger.js\";\nimport { isSome as s, isNone as i, unwrapOr as n, get as a } from \"../../../../core/maybe.js\";\nimport { createResolver as c } from \"../../../../core/promiseUtils.js\";\nimport { addQueryParameters as u } from \"../../../../core/urlUtils.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/set.js\";\nimport { subclass as f } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { WebSocketConnection as d } from \"./WebSocketConnection.js\";\nimport { executeQuery as h } from \"../../../../rest/query/operations/query.js\";\nimport l from \"../../../../rest/support/Query.js\";\nimport { fromJSON as y } from \"../../../../geometry/support/jsonUtils.js\";\nimport m from \"../../../../geometry/SpatialReference.js\";\nconst p = o.getLogger(\"esri.layers.graphics.sources.connections.GeoEventConnection\"),\n      g = 1e4,\n      _ = {\n  maxQueryDepth: 5,\n  maxRecordCountFactor: 3\n};\nlet w = class extends d {\n  constructor(e) {\n    super({ ..._,\n      ...e\n    });\n  }\n\n  async _open() {\n    const e = await this._fetchServiceDefinition(this._config.source);\n    e.timeInfo.trackIdField || p.warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");\n\n    const t = this._fetchWebSocketUrl(e.streamUrls, this._config.spatialReference);\n\n    this._buddyServicesQuery || (this._buddyServicesQuery = this._queryBuddyServices()), await this._buddyServicesQuery, await this._tryCreateWebSocket(t);\n    const {\n      filter: r,\n      outFields: o\n    } = this._config;\n    this.destroyed || this._setFilter(r, o);\n  }\n\n  _onMessage(e) {\n    let t;\n\n    try {\n      t = this._enrich(JSON.parse(e.data)), s(this._featureZScaler) && this._featureZScaler(t.geometry);\n    } catch (o) {\n      return void p.error(new r(\"geoevent-connection\", \"Failed to parse message\", o));\n    }\n\n    this.onFeature(t);\n  }\n\n  async _fetchServiceDefinition(e) {\n    const r = {\n      f: \"json\",\n      ...this._config.customParameters\n    },\n          o = t(e.path, {\n      query: r,\n      responseType: \"json\"\n    }),\n          s = (await o).data;\n    return this._serviceDefinition = s, s;\n  }\n\n  _fetchWebSocketUrl(e, t) {\n    const r = e[0],\n          {\n      urls: o,\n      token: s\n    } = r,\n          i = this._inferWebSocketBaseUrl(o);\n\n    return u(`${i}/subscribe`, {\n      outSR: \"\" + t.wkid,\n      token: s\n    });\n  }\n\n  _inferWebSocketBaseUrl(e) {\n    if (1 === e.length) return e[0];\n\n    for (const t of e) if (t.includes(\"wss\")) return t;\n\n    return p.error(new r(\"geoevent-connection\", \"Unable to infer WebSocket url\", e)), null;\n  }\n\n  async _setFilter(e, t) {\n    const o = this._websocket;\n    if (i(o) || i(e) && i(t)) return;\n    const s = JSON.stringify({\n      filter: this._serializeFilter(e, t)\n    });\n    let n = !1;\n\n    const a = c(),\n          u = () => {\n      n || (this.destroyed || this._websocket !== o || p.error(new r(\"geoevent-connection\", \"Server timed out when setting filter\")), a.reject());\n    },\n          f = e => {\n      const t = JSON.parse(e.data);\n      t.filter && (t.error && (p.error(new r(\"geoevent-connection\", \"Failed to set service filter\", t.error)), this._set(\"errorString\", `Could not set service filter - ${t.error}`), a.reject(t.error)), o.onmessage = this._onMessage.bind(this), n = !0, a.resolve());\n    };\n\n    return o.onmessage = f, o.send(s), setTimeout(u, g), a.promise;\n  }\n\n  _serializeFilter(e, t) {\n    const o = {};\n    if (i(e) && i(t)) return o;\n    if (s(e) && e.geometry) try {\n      const t = y(e.geometry);\n      if (\"extent\" !== t.type) throw new r(`Expected extent but found type ${t.type}`);\n      o.geometry = JSON.stringify(t.shiftCentralMeridian());\n    } catch (n) {\n      p.error(new r(\"geoevent-connection\", \"Encountered an error when setting connection geometryDefinition\", n));\n    }\n    return s(e) && e.where && \"1 = 1\" !== e.where && (o.where = e.where), s(t) && (o.outFields = t.join(\",\")), o;\n  }\n\n  _enrich(e) {\n    if (!this._relatedFeatures) return e;\n    const t = this._serviceDefinition.relatedFeatures.joinField,\n          o = e.attributes[t];\n    if (!this._relatedFeatures.has(o)) return p.warn(\"geoevent-connection\", \"Feature join failed. Is the join field configured correctly?\", e), e;\n\n    const {\n      attributes: s,\n      geometry: i\n    } = this._relatedFeatures.get(o);\n\n    for (const r in s) e.attributes[r] = s[r];\n\n    return i && (e.geometry = i), e.geometry || e.centroid || p.error(new r(\"geoevent-connection\", \"Found malformed feature - no geometry found\", e)), e;\n  }\n\n  async _queryBuddyServices() {\n    try {\n      const {\n        relatedFeatures: e,\n        keepLatestArchive: t\n      } = this._serviceDefinition,\n            r = this._queryRelatedFeatures(e),\n            o = this._queryArchive(t);\n\n      await r;\n      const s = await o;\n      if (!s) return;\n\n      for (const i of s.features) this.onFeature(this._enrich(i));\n    } catch (e) {\n      p.error(new r(\"geoevent-connection\", \"Encountered an error when querying buddy services\", {\n        error: e\n      }));\n    }\n  }\n\n  async _queryRelatedFeatures(e) {\n    if (!e) return;\n    const t = await this._queryBuddy(e.featuresUrl);\n\n    this._addRelatedFeatures(t);\n  }\n\n  async _queryArchive(e) {\n    if (e) return this._queryBuddy(e.featuresUrl);\n  }\n\n  async _queryBuddy(e) {\n    const t = new (await import(\"../../../FeatureLayer.js\")).default({\n      url: e\n    }),\n          {\n      capabilities: r\n    } = await t.load(),\n          o = r.query.supportsMaxRecordCountFactor,\n          s = r.query.supportsPagination,\n          i = r.query.supportsCentroid,\n          c = this._config.maxRecordCountFactor,\n          u = t.capabilities.query.maxRecordCount,\n          f = o ? u * c : u,\n          d = new l();\n    if (d.outFields = n(this._config.outFields, [\"*\"]), d.where = n(a(this._config.filter, \"where\"), \"1=1\"), d.returnGeometry = !0, d.returnExceededLimitFeatures = !0, d.outSpatialReference = m.fromJSON(this._config.spatialReference), i && (d.returnCentroid = !0), o && (d.maxRecordCountFactor = c), s) return d.num = f, t.destroy(), this._queryPages(e, d);\n    const y = await h(e, d, this._config.sourceSpatialReference);\n    return t.destroy(), y.data;\n  }\n\n  async _queryPages(e, t, r = [], o = 0) {\n    t.start = s(t.num) ? o * t.num : null;\n    const {\n      data: i\n    } = await h(e, t, this._config.sourceSpatialReference);\n    return i.exceededTransferLimit && o < this._config.maxQueryDepth ? (i.features.forEach(e => r.push(e)), this._queryPages(e, t, r, o + 1)) : (r.forEach(e => i.features.push(e)), i);\n  }\n\n  _addRelatedFeatures(e) {\n    const t = new Map(),\n          r = e.features,\n          o = this._serviceDefinition.relatedFeatures.joinField;\n\n    for (const s of r) {\n      const e = s.attributes[o];\n      t.set(e, s);\n    }\n\n    this._relatedFeatures = t;\n  }\n\n};\nw = e([f(\"esri.layers.graphics.sources.connections.GeoEventConnection\")], w);\nconst F = w;\nexport { F as default };","map":{"version":3,"names":["_","e","t","r","o","isSome","s","isNone","i","unwrapOr","n","get","a","createResolver","c","addQueryParameters","u","subclass","f","WebSocketConnection","d","executeQuery","h","l","fromJSON","y","m","p","getLogger","g","maxQueryDepth","maxRecordCountFactor","w","constructor","_open","_fetchServiceDefinition","_config","source","timeInfo","trackIdField","warn","_fetchWebSocketUrl","streamUrls","spatialReference","_buddyServicesQuery","_queryBuddyServices","_tryCreateWebSocket","filter","outFields","destroyed","_setFilter","_onMessage","_enrich","JSON","parse","data","_featureZScaler","geometry","error","onFeature","customParameters","path","query","responseType","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","outSR","wkid","length","includes","_websocket","stringify","_serializeFilter","reject","_set","onmessage","bind","resolve","send","setTimeout","promise","type","shiftCentralMeridian","where","join","_relatedFeatures","relatedFeatures","joinField","attributes","has","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","features","_queryBuddy","featuresUrl","_addRelatedFeatures","default","url","capabilities","load","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","returnCentroid","num","destroy","_queryPages","sourceSpatialReference","start","exceededTransferLimit","forEach","push","Map","set","F"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{isSome as s,isNone as i,unwrapOr as n,get as a}from\"../../../../core/maybe.js\";import{createResolver as c}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as u}from\"../../../../core/urlUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WebSocketConnection as d}from\"./WebSocketConnection.js\";import{executeQuery as h}from\"../../../../rest/query/operations/query.js\";import l from\"../../../../rest/support/Query.js\";import{fromJSON as y}from\"../../../../geometry/support/jsonUtils.js\";import m from\"../../../../geometry/SpatialReference.js\";const p=o.getLogger(\"esri.layers.graphics.sources.connections.GeoEventConnection\"),g=1e4,_={maxQueryDepth:5,maxRecordCountFactor:3};let w=class extends d{constructor(e){super({..._,...e})}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||p.warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){let t;try{t=this._enrich(JSON.parse(e.data)),s(this._featureZScaler)&&this._featureZScaler(t.geometry)}catch(o){return void p.error(new r(\"geoevent-connection\",\"Failed to parse message\",o))}this.onFeature(t)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},o=t(e.path,{query:r,responseType:\"json\"}),s=(await o).data;return this._serviceDefinition=s,s}_fetchWebSocketUrl(e,t){const r=e[0],{urls:o,token:s}=r,i=this._inferWebSocketBaseUrl(o);return u(`${i}/subscribe`,{outSR:\"\"+t.wkid,token:s})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return p.error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const o=this._websocket;if(i(o)||i(e)&&i(t))return;const s=JSON.stringify({filter:this._serializeFilter(e,t)});let n=!1;const a=c(),u=()=>{n||(this.destroyed||this._websocket!==o||p.error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),a.reject())},f=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(p.error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),a.reject(t.error)),o.onmessage=this._onMessage.bind(this),n=!0,a.resolve())};return o.onmessage=f,o.send(s),setTimeout(u,g),a.promise}_serializeFilter(e,t){const o={};if(i(e)&&i(t))return o;if(s(e)&&e.geometry)try{const t=y(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(n){p.error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",n))}return s(e)&&e.where&&\"1 = 1\"!==e.where&&(o.where=e.where),s(t)&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t];if(!this._relatedFeatures.has(o))return p.warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:s,geometry:i}=this._relatedFeatures.get(o);for(const r in s)e.attributes[r]=s[r];return i&&(e.geometry=i),e.geometry||e.centroid||p.error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),o=this._queryArchive(t);await r;const s=await o;if(!s)return;for(const i of s.features)this.onFeature(this._enrich(i))}catch(e){p.error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),o=r.query.supportsMaxRecordCountFactor,s=r.query.supportsPagination,i=r.query.supportsCentroid,c=this._config.maxRecordCountFactor,u=t.capabilities.query.maxRecordCount,f=o?u*c:u,d=new l;if(d.outFields=n(this._config.outFields,[\"*\"]),d.where=n(a(this._config.filter,\"where\"),\"1=1\"),d.returnGeometry=!0,d.returnExceededLimitFeatures=!0,d.outSpatialReference=m.fromJSON(this._config.spatialReference),i&&(d.returnCentroid=!0),o&&(d.maxRecordCountFactor=c),s)return d.num=f,t.destroy(),this._queryPages(e,d);const y=await h(e,d,this._config.sourceSpatialReference);return t.destroy(),y.data}async _queryPages(e,t,r=[],o=0){t.start=s(t.num)?o*t.num:null;const{data:i}=await h(e,t,this._config.sourceSpatialReference);return i.exceededTransferLimit&&o<this._config.maxQueryDepth?(i.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,o+1)):(r.forEach((e=>i.features.push(e))),i)}_addRelatedFeatures(e){const t=new Map,r=e.features,o=this._serviceDefinition.relatedFeatures.joinField;for(const s of r){const e=s.attributes[o];t.set(e,s)}this._relatedFeatures=t}};w=e([f(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],w);const F=w;export{F as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}