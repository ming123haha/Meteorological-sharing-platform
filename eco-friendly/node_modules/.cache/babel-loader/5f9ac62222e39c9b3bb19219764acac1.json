{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { assumeNonNull as e } from \"./maybe.js\";\nimport { nextTick as t } from \"./nextTick.js\";\nimport r from \"./PerformanceSampler.js\";\nimport s from \"./PooledArray.js\";\nimport { createResolver as o, isAborted as n, createAbortError as a } from \"./promiseUtils.js\";\nimport { Milliseconds as i } from \"./time.js\";\n\nclass c {\n  constructor(e) {\n    this.phases = e, this.paused = !1, this.ticks = -1, this.removed = !1;\n  }\n\n}\n\nclass m {\n  constructor(e) {\n    this.callback = e, this.isActive = !0;\n  }\n\n  remove() {\n    this.isActive = !1;\n  }\n\n}\n\nlet l = 0,\n    p = 0;\nconst u = {\n  time: i(0),\n  deltaTime: i(0),\n  elapsedFrameTime: i(0),\n  frameDuration: i(0)\n},\n      f = [\"prepare\", \"preRender\", \"render\", \"postRender\", \"update\", \"finish\"],\n      h = [],\n      d = new s();\n\nclass w {\n  constructor(e) {\n    this._task = e;\n  }\n\n  remove() {\n    this._task.removed = !0;\n  }\n\n  pause() {\n    this._task.paused = !0;\n  }\n\n  resume() {\n    this._task.paused = !1;\n  }\n\n}\n\nconst k = {\n  frameTasks: d,\n  willDispatch: !1,\n  clearFrameTasks: j,\n  dispatch: b,\n  executeFrameTasks: D\n};\n\nfunction v(e) {\n  const r = new m(e);\n  return h.push(r), k.willDispatch || (k.willDispatch = !0, t(b)), r;\n}\n\nfunction A(e) {\n  const t = new c(e);\n  return d.push(t), null == T && (l = performance.now(), T = requestAnimationFrame(x)), new w(t);\n}\n\nlet T = null;\n\nfunction j(e = !1) {\n  d.forAll(e => {\n    e.removed = !0;\n  }), e && _();\n}\n\nfunction F(e) {\n  p = Math.max(0, e);\n}\n\nfunction x() {\n  const e = performance.now();\n  T = null, T = d.length > 0 ? requestAnimationFrame(x) : null, k.executeFrameTasks(e);\n}\n\nfunction D(e) {\n  const t = i(e - l);\n  l = e;\n  const r = p > 0 ? p : 1e3 / 60,\n        s = Math.max(0, t - r);\n\n  for (let o = 0; o < f.length; o++) {\n    const n = performance.now(),\n          a = f[o];\n    d.forAll(n => {\n      if (n.paused || n.removed) return;\n      0 === o && n.ticks++;\n      n.phases[a] && (u.time = e, u.deltaTime = 0 === n.ticks ? i(0) : t, u.elapsedFrameTime = i(performance.now() - e), u.frameDuration = i(r - s), n.phases[a]?.call(n, u));\n    }), R[o].record(performance.now() - n);\n  }\n\n  _(), q.record(performance.now() - e);\n}\n\nconst g = new s();\n\nfunction _() {\n  d.forAll(e => {\n    e.removed && g.push(e);\n  }), d.removeUnorderedMany(g.data, g.length), g.clear();\n}\n\nfunction b() {\n  for (; h.length;) {\n    const t = e(h.shift());\n    t.isActive && t.callback();\n  }\n\n  k.willDispatch = !1;\n}\n\nfunction y(e = 1, r) {\n  const s = o(),\n        i = () => {\n    n(r) ? s.reject(a()) : 0 === e ? s() : (--e, t(() => i()));\n  };\n\n  return i(), s.promise;\n}\n\nfunction M() {\n  const e = o(),\n        t = A({\n    postRender: () => {\n      t.remove(), v(e);\n    }\n  });\n  return e.promise;\n}\n\nconst R = f.map(e => new r(e)),\n      q = new r(\"total\");\nexport { w as FrameTaskHandle, A as addFrameTask, k as debug, R as performanceInfo, q as performanceTotal, v as schedule, F as setFrameDuration, M as waitAnimationFrame, y as waitTicks };","map":{"version":3,"names":["assumeNonNull","e","nextTick","t","r","s","createResolver","o","isAborted","n","createAbortError","a","Milliseconds","i","c","constructor","phases","paused","ticks","removed","m","callback","isActive","remove","l","p","u","time","deltaTime","elapsedFrameTime","frameDuration","f","h","d","w","_task","pause","resume","k","frameTasks","willDispatch","clearFrameTasks","j","dispatch","b","executeFrameTasks","D","v","push","A","T","performance","now","requestAnimationFrame","x","forAll","_","F","Math","max","length","call","R","record","q","g","removeUnorderedMany","data","clear","shift","y","reject","promise","M","postRender","map","FrameTaskHandle","addFrameTask","debug","performanceInfo","performanceTotal","schedule","setFrameDuration","waitAnimationFrame","waitTicks"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/scheduling.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";import{nextTick as t}from\"./nextTick.js\";import r from\"./PerformanceSampler.js\";import s from\"./PooledArray.js\";import{createResolver as o,isAborted as n,createAbortError as a}from\"./promiseUtils.js\";import{Milliseconds as i}from\"./time.js\";class c{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}class m{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let l=0,p=0;const u={time:i(0),deltaTime:i(0),elapsedFrameTime:i(0),frameDuration:i(0)},f=[\"prepare\",\"preRender\",\"render\",\"postRender\",\"update\",\"finish\"],h=[],d=new s;class w{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const k={frameTasks:d,willDispatch:!1,clearFrameTasks:j,dispatch:b,executeFrameTasks:D};function v(e){const r=new m(e);return h.push(r),k.willDispatch||(k.willDispatch=!0,t(b)),r}function A(e){const t=new c(e);return d.push(t),null==T&&(l=performance.now(),T=requestAnimationFrame(x)),new w(t)}let T=null;function j(e=!1){d.forAll((e=>{e.removed=!0})),e&&_()}function F(e){p=Math.max(0,e)}function x(){const e=performance.now();T=null,T=d.length>0?requestAnimationFrame(x):null,k.executeFrameTasks(e)}function D(e){const t=i(e-l);l=e;const r=p>0?p:1e3/60,s=Math.max(0,t-r);for(let o=0;o<f.length;o++){const n=performance.now(),a=f[o];d.forAll((n=>{if(n.paused||n.removed)return;0===o&&n.ticks++;n.phases[a]&&(u.time=e,u.deltaTime=0===n.ticks?i(0):t,u.elapsedFrameTime=i(performance.now()-e),u.frameDuration=i(r-s),n.phases[a]?.call(n,u))})),R[o].record(performance.now()-n)}_(),q.record(performance.now()-e)}const g=new s;function _(){d.forAll((e=>{e.removed&&g.push(e)})),d.removeUnorderedMany(g.data,g.length),g.clear()}function b(){for(;h.length;){const t=e(h.shift());t.isActive&&t.callback()}k.willDispatch=!1}function y(e=1,r){const s=o(),i=()=>{n(r)?s.reject(a()):0===e?s():(--e,t((()=>i())))};return i(),s.promise}function M(){const e=o(),t=A({postRender:()=>{t.remove(),v(e)}});return e.promise}const R=f.map((e=>new r(e))),q=new r(\"total\");export{w as FrameTaskHandle,A as addFrameTask,k as debug,R as performanceInfo,q as performanceTotal,v as schedule,F as setFrameDuration,M as waitAnimationFrame,y as waitTicks};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}