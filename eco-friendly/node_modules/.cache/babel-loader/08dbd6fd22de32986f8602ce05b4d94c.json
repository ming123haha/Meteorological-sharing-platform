{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { BackgroundGrid as e } from \"./BackgroundGrid.glsl.js\";\nimport { TileBlendInput as t } from \"./TileBlendInput.js\";\nimport { Float3Uniform as o } from \"../../shaderModules/Float3Uniform.js\";\nimport { Float4Uniform as r } from \"../../shaderModules/Float4Uniform.js\";\nimport { FloatUniform as a } from \"../../shaderModules/FloatUniform.js\";\nimport { glsl as c } from \"../../shaderModules/interfaces.js\";\nimport { Texture2DUniform as n } from \"../../shaderModules/Texture2DUniform.js\";\n\nfunction i(i, d) {\n  i.varyings.add(\"vtc\", \"vec2\"), i.vertex.uniforms.add(new r(\"texOffsetAndScale\")), i.fragment.uniforms.add(new n(\"tex\")), i.fragment.uniforms.add(new o(\"textureOpacities\"));\n  const s = d.textureFadingEnabled && !d.renderOccluded;\n  s && (i.vertex.uniforms.add(new r(\"nextTexOffsetAndScale\")), i.varyings.add(\"nvtc\", \"vec2\"), i.fragment.uniforms.add(new n(\"texNext\")), i.fragment.uniforms.add(new o(\"nextTexOpacities\")), i.fragment.uniforms.add(new a(\"fadeFactor\")));\n  const l = d.tileBlendInput === t.ColorComposite,\n        f = d.tileBlendInput === t.GridComposite;\n  f && i.fragment.include(e), l && i.fragment.uniforms.add(new o(\"backgroundColor\")), i.vertex.code.add(c`\n  void forwardTextureCoordinates(in vec2 uv) {\n    vtc = uv * texOffsetAndScale.zw + texOffsetAndScale.xy;\n    ${s ? c`nvtc = uv * nextTexOffsetAndScale.zw + nextTexOffsetAndScale.xy;` : c``}\n  }`), i.fragment.code.add(c`\n    vec4 applyBaseOpacity(vec4 _color, vec3 _opacities) {\n      return _opacities.z <= 0.0 ? _color : _color * _opacities.x;\n    }\n\n    vec4 getColor(vec4 color, vec2 uv, vec3 opacities) {\n      ${f || l ? c`\n              if (opacities.y <= 0.0) {\n                return color * opacities.z * opacities.x;\n              }\n              vec4 bg = ${l ? c`vec4(backgroundColor, 1.0)` : c`gridColor(uv)`} * opacities.y;\n              float alpha = opacities.z * color.a;\n              return mix(bg, color, alpha) * opacities.x;` : c`return color;`}\n    }`), s ? i.fragment.code.add(c`vec4 getTileColor() {\nvec4 color = getColor(texture2D(tex, vtc), vtc, textureOpacities);\nif (fadeFactor >= 1.0) {\nreturn color;\n}\nvec4 nextColor = getColor(texture2D(texNext, nvtc), nvtc, nextTexOpacities);\nreturn mix(nextColor, color, fadeFactor);\n}`) : i.fragment.code.add(c`vec4 getTileColor() {\nreturn getColor(texture2D(tex, vtc), vtc, textureOpacities);\n}`);\n}\n\nexport { i as TerrainTexture };","map":{"version":3,"names":["BackgroundGrid","e","TileBlendInput","t","Float3Uniform","o","Float4Uniform","r","FloatUniform","a","glsl","c","Texture2DUniform","n","i","d","varyings","add","vertex","uniforms","fragment","s","textureFadingEnabled","renderOccluded","l","tileBlendInput","ColorComposite","f","GridComposite","include","code","TerrainTexture"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/terrain/TerrainTexture.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{BackgroundGrid as e}from\"./BackgroundGrid.glsl.js\";import{TileBlendInput as t}from\"./TileBlendInput.js\";import{Float3Uniform as o}from\"../../shaderModules/Float3Uniform.js\";import{Float4Uniform as r}from\"../../shaderModules/Float4Uniform.js\";import{FloatUniform as a}from\"../../shaderModules/FloatUniform.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";import{Texture2DUniform as n}from\"../../shaderModules/Texture2DUniform.js\";function i(i,d){i.varyings.add(\"vtc\",\"vec2\"),i.vertex.uniforms.add(new r(\"texOffsetAndScale\")),i.fragment.uniforms.add(new n(\"tex\")),i.fragment.uniforms.add(new o(\"textureOpacities\"));const s=d.textureFadingEnabled&&!d.renderOccluded;s&&(i.vertex.uniforms.add(new r(\"nextTexOffsetAndScale\")),i.varyings.add(\"nvtc\",\"vec2\"),i.fragment.uniforms.add(new n(\"texNext\")),i.fragment.uniforms.add(new o(\"nextTexOpacities\")),i.fragment.uniforms.add(new a(\"fadeFactor\")));const l=d.tileBlendInput===t.ColorComposite,f=d.tileBlendInput===t.GridComposite;f&&i.fragment.include(e),l&&i.fragment.uniforms.add(new o(\"backgroundColor\")),i.vertex.code.add(c`\n  void forwardTextureCoordinates(in vec2 uv) {\n    vtc = uv * texOffsetAndScale.zw + texOffsetAndScale.xy;\n    ${s?c`nvtc = uv * nextTexOffsetAndScale.zw + nextTexOffsetAndScale.xy;`:c``}\n  }`),i.fragment.code.add(c`\n    vec4 applyBaseOpacity(vec4 _color, vec3 _opacities) {\n      return _opacities.z <= 0.0 ? _color : _color * _opacities.x;\n    }\n\n    vec4 getColor(vec4 color, vec2 uv, vec3 opacities) {\n      ${f||l?c`\n              if (opacities.y <= 0.0) {\n                return color * opacities.z * opacities.x;\n              }\n              vec4 bg = ${l?c`vec4(backgroundColor, 1.0)`:c`gridColor(uv)`} * opacities.y;\n              float alpha = opacities.z * color.a;\n              return mix(bg, color, alpha) * opacities.x;`:c`return color;`}\n    }`),s?i.fragment.code.add(c`vec4 getTileColor() {\nvec4 color = getColor(texture2D(tex, vtc), vtc, textureOpacities);\nif (fadeFactor >= 1.0) {\nreturn color;\n}\nvec4 nextColor = getColor(texture2D(texNext, nvtc), nvtc, nextTexOpacities);\nreturn mix(nextColor, color, fadeFactor);\n}`):i.fragment.code.add(c`vec4 getTileColor() {\nreturn getColor(texture2D(tex, vtc), vtc, textureOpacities);\n}`)}export{i as TerrainTexture};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}