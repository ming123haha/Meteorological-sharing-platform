{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport { ByteSizeUnit as s, estimateAttributesObjectSize as i, estimateFixedArraySize as r } from \"../../../../../core/byteSizeEstimations.js\";\nimport { isNone as o, isSome as n } from \"../../../../../core/maybe.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as c, intersects as h, fromExtent as u, area as d } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as f } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { BoundsStore as _ } from \"../../../../../layers/graphics/data/BoundsStore.js\";\nimport p from \"../../../../../layers/support/TileInfo.js\";\nimport { TileKey as m } from \"../../../../../layers/support/TileKey.js\";\nimport { executeQueryForCount as g } from \"../../../../../rest/query/operations/query.js\";\nimport { FeatureServiceTileCache as y } from \"./FeatureServiceTileCache.js\";\nlet v = class extends t {\n  constructor(e) {\n    super(e), this.tileInfo = null, this.extent = null, this.maximumByteSize = 10 * s.MEGABYTES, this._tileBounds = new _(), this._tiles = new y(), this._refCounts = new Map(), this._tileFeatureCounts = new Map(), this._tmpBoundingRect = c();\n  }\n\n  add(e, t) {\n    const s = [];\n\n    for (const i of t) this._referenceFeature(i.objectId) === x.ADDED && s.push(i);\n\n    this._addTileStorage(e, new Set(t.map(({\n      objectId: e\n    }) => e)), C(t)), this.featureStore.addMany(s), this._tiles.applyByteSizeLimit(this.maximumByteSize, e => this._removeTileStorage(e));\n  }\n\n  destroy() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n\n  clear() {\n    this.featureStore.clear(), this._tileBounds.clear(), this._tiles.clear(), this._refCounts.clear();\n  }\n\n  refresh() {\n    this.clear(), this._tileFeatureCounts.clear();\n  }\n\n  processEdits(e, t, s) {\n    return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)), this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures), t, s);\n  }\n\n  _addTileStorage(e, t, s) {\n    this._tiles.set(e.id, new T(e, t, s)), this._tileBounds.set(e.id, e.extent), this._tileFeatureCounts.set(e.id, t.size);\n  }\n\n  _remove({\n    id: e\n  }) {\n    const t = this._tiles.get(e);\n\n    t && this._removeTileStorage(t);\n  }\n\n  _removeTileStorage(e) {\n    const t = [];\n\n    for (const i of e.objectIds) this._unreferenceFeature(i) === x.REMOVED && t.push(i);\n\n    this.featureStore.removeManyById(t);\n    const s = e.data.id;\n    this._tiles.delete(s), this._tileBounds.delete(s);\n  }\n\n  _processEditsDelete(e) {\n    this.featureStore.removeManyById(e);\n\n    for (const [, t] of this._tiles) {\n      for (const s of e) t.objectIds.delete(s);\n\n      this._tileFeatureCounts.set(t.data.id, t.objectIds.size);\n    }\n\n    for (const t of e) this._refCounts.delete(t);\n  }\n\n  async _processEditsRefetch(e, t, s) {\n    const i = (await t(e, s)).features,\n          {\n      hasZ: r,\n      hasM: n\n    } = this.featureStore;\n\n    for (const l of i) {\n      const e = f(this._tmpBoundingRect, l.geometry, r, n);\n      o(e) || this._tileBounds.forEachInBounds(e, e => {\n        const t = this._tiles.get(e);\n\n        this.featureStore.add(l), t.objectIds.has(l.objectId) || (t.objectIds.add(l.objectId), this._referenceFeature(l.objectId), this._tileFeatureCounts.set(t.data.id, t.objectIds.size));\n      });\n    }\n  }\n\n  process(e, t = () => !0) {\n    if (o(this.tileInfo) || !e.extent || n(this.extent) && !h(u(this.extent, this._tmpBoundingRect), e.extent)) return new j(e);\n    if (this._tiles.has(e.id)) return new j(e);\n\n    const s = this._createTileTree(e, this.tileInfo);\n\n    return this._simplify(s, t, null, 0, 1), this._collectMissingTiles(e, s, this.tileInfo);\n  }\n\n  get debugInfo() {\n    return Array.from(this._tiles.values()).map(({\n      data: e\n    }) => ({\n      data: e,\n      featureCount: this._tileFeatureCounts.get(e.id) || 0\n    }));\n  }\n\n  getFeatureCount(e) {\n    return this._tileFeatureCounts.get(e.id) ?? 0;\n  }\n\n  async fetchCount(e, t, s, i) {\n    const r = this._tileFeatureCounts.get(e.id);\n\n    if (null != r) return r;\n    const o = await g(t, s, i);\n    return this._tileFeatureCounts.set(e.id, o.data.count), o.data.count;\n  }\n\n  _createTileTree(e, t) {\n    const s = new I(e.level, e.row, e.col);\n    return t.updateTileInfo(s, p.ExtrapolateOptions.POWER_OF_TWO), this._tileBounds.forEachInBounds(e.extent, i => {\n      const r = this._tiles.get(i).data;\n\n      this._tilesAreRelated(e, r) && this._populateChildren(s, r, t, this._tileFeatureCounts.get(r.id) || 0);\n    }), s;\n  }\n\n  _tilesAreRelated(e, t) {\n    if (!e || !t) return !1;\n    if (e.level === t.level) return e.row === t.row && e.col === t.col;\n    const s = e.level < t.level,\n          i = s ? e : t,\n          r = s ? t : e,\n          o = 1 << r.level - i.level;\n    return Math.floor(r.row / o) === i.row && Math.floor(r.col / o) === i.col;\n  }\n\n  _populateChildren(e, t, s, i) {\n    const r = t.level - e.level - 1;\n    if (r < 0) return void (e.isLeaf = !0);\n    const o = t.row >> r,\n          l = t.col >> r,\n          a = e.row << 1,\n          c = l - (e.col << 1) + (o - a << 1),\n          h = e.children[c];\n    if (n(h)) this._populateChildren(h, t, s, i);else {\n      const r = new I(e.level + 1, o, l);\n      s.updateTileInfo(r, p.ExtrapolateOptions.POWER_OF_TWO), e.children[c] = r, this._populateChildren(r, t, s, i);\n    }\n  }\n\n  _simplify(e, t, s, i, r) {\n    const o = r * r;\n    if (e.isLeaf) return t(this.getFeatureCount(e), r) ? 0 : (this._remove(e), n(s) && (s.children[i] = null), o);\n    const l = r / 2,\n          a = l * l;\n    let c = 0;\n\n    for (let h = 0; h < e.children.length; h++) {\n      const s = e.children[h];\n      c += n(s) ? this._simplify(s, t, e, h, l) : a;\n    }\n\n    return 0 === c ? this._mergeChildren(e) : 1 - c / o < w && (this._purge(e), n(s) && (s.children[i] = null), c = o), c;\n  }\n\n  _mergeChildren(e) {\n    const t = new Set();\n    let s = 0;\n    this._forEachLeaf(e, e => {\n      const i = this._tiles.get(e.id);\n\n      if (i) {\n        s += i.byteSize;\n\n        for (const e of i.objectIds) t.has(e) || (t.add(e), this._referenceFeature(e));\n\n        this._remove(e);\n      }\n    }), this._addTileStorage(e, t, s), e.isLeaf = !0, e.children[0] = e.children[1] = e.children[2] = e.children[3] = null, this._tileFeatureCounts.set(e.id, t.size);\n  }\n\n  _forEachLeaf(e, t) {\n    for (const s of e.children) o(s) || (s.isLeaf ? t(s) : this._forEachLeaf(s, t));\n  }\n\n  _purge(e) {\n    if (!o(e)) if (e.isLeaf) this._remove(e);else for (let t = 0; t < e.children.length; t++) {\n      const s = e.children[t];\n      this._purge(s), e.children[t] = null;\n    }\n  }\n\n  _collectMissingTiles(e, t, s) {\n    const i = new F(s, e, this.extent);\n    return this._collectMissingTilesRecurse(t, i, 1), i.info;\n  }\n\n  _collectMissingTilesRecurse(e, t, s) {\n    if (e.isLeaf) return;\n    if (!e.hasChildren) return void t.addMissing(e.level, e.row, e.col, s);\n    const i = s / 2;\n\n    for (let r = 0; r < e.children.length; r++) {\n      const s = e.children[r];\n      o(s) ? t.addMissing(e.level + 1, (e.row << 1) + ((2 & r) >> 1), (e.col << 1) + (1 & r), i) : this._collectMissingTilesRecurse(s, t, i);\n    }\n  }\n\n  _referenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) + 1;\n    return this._refCounts.set(e, t), 1 === t ? x.ADDED : x.UNCHANGED;\n  }\n\n  _unreferenceFeature(e) {\n    const t = (this._refCounts.get(e) || 0) - 1;\n    return 0 === t ? (this._refCounts.delete(e), x.REMOVED) : (t > 0 && this._refCounts.set(e, t), x.UNCHANGED);\n  }\n\n  get test() {\n    return {\n      tiles: Array.from(this._tiles.values()).map(e => `${e.data.id}:[${Array.from(e.objectIds)}]`),\n      featureReferences: Array.from(this._refCounts.keys()).map(e => `${e}:${this._refCounts.get(e)}`)\n    };\n  }\n\n};\n\nfunction C(e) {\n  return e.reduce((e, t) => e + E(t), 0);\n}\n\nfunction E(e) {\n  return 32 + S(e.geometry) + i(e.attributes);\n}\n\nfunction S(e) {\n  if (o(e)) return 0;\n  const t = r(e.lengths, 4);\n  return 32 + r(e.coords, 8) + t;\n}\n\ne([l({\n  constructOnly: !0\n})], v.prototype, \"featureStore\", void 0), e([l()], v.prototype, \"tileInfo\", void 0), e([l()], v.prototype, \"extent\", void 0), e([l()], v.prototype, \"maximumByteSize\", void 0), v = e([a(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")], v);\n\nclass T {\n  constructor(e, t, s) {\n    this.data = e, this.objectIds = t, this.byteSize = s;\n  }\n\n}\n\nclass I {\n  constructor(e, t, s) {\n    this.level = e, this.row = t, this.col = s, this.isLeaf = !1, this.extent = null, this.children = [null, null, null, null];\n  }\n\n  get hasChildren() {\n    return !this.isLeaf && (n(this.children[0]) || n(this.children[1]) || n(this.children[2]) || n(this.children[3]));\n  }\n\n}\n\nclass j {\n  constructor(e, t = []) {\n    this.missingTiles = t, this.fullArea = 0, this.coveredArea = 0, this.fullArea = d(e.extent), this.coveredArea = this.fullArea;\n  }\n\n  prepend(e) {\n    this.missingTiles = e.missingTiles.concat(this.missingTiles), this.coveredArea += e.coveredArea, this.fullArea += e.fullArea;\n  }\n\n}\n\nclass F {\n  constructor(e, t, s) {\n    this._tileInfo = e, this._extent = null, this.info = new j(t), n(s) && (this._extent = u(s));\n  }\n\n  addMissing(e, t, s, i) {\n    const r = new m(null, e, t, s);\n    this._tileInfo.updateTileInfo(r, p.ExtrapolateOptions.POWER_OF_TWO), o(r.extent) || n(this._extent) && !h(this._extent, r.extent) || (this.info.missingTiles.push({\n      data: r,\n      resolution: i\n    }), this.info.coveredArea -= d(r.extent));\n  }\n\n}\n\nconst w = .18751;\nvar x;\n!function (e) {\n  e[e.ADDED = 0] = \"ADDED\", e[e.REMOVED = 1] = \"REMOVED\", e[e.UNCHANGED = 2] = \"UNCHANGED\";\n}(x || (x = {}));\nexport { v as FeatureServiceTileStore, j as ProcessResult };","map":{"version":3,"names":["_","e","t","ByteSizeUnit","s","estimateAttributesObjectSize","i","estimateFixedArraySize","r","isNone","o","isSome","n","property","l","subclass","a","create","c","intersects","h","fromExtent","u","area","d","getBoundsOptimizedGeometry","f","BoundsStore","p","TileKey","m","executeQueryForCount","g","FeatureServiceTileCache","y","v","constructor","tileInfo","extent","maximumByteSize","MEGABYTES","_tileBounds","_tiles","_refCounts","Map","_tileFeatureCounts","_tmpBoundingRect","add","_referenceFeature","objectId","x","ADDED","push","_addTileStorage","Set","map","C","featureStore","addMany","applyByteSizeLimit","_removeTileStorage","destroy","clear","refresh","processEdits","_processEditsDelete","deletedFeatures","concat","updatedFeatures","_processEditsRefetch","addedFeatures","set","id","T","size","_remove","get","objectIds","_unreferenceFeature","REMOVED","removeManyById","data","delete","features","hasZ","hasM","geometry","forEachInBounds","has","process","j","_createTileTree","_simplify","_collectMissingTiles","debugInfo","Array","from","values","featureCount","getFeatureCount","fetchCount","count","I","level","row","col","updateTileInfo","ExtrapolateOptions","POWER_OF_TWO","_tilesAreRelated","_populateChildren","Math","floor","isLeaf","children","length","_mergeChildren","w","_purge","_forEachLeaf","byteSize","F","_collectMissingTilesRecurse","info","hasChildren","addMissing","UNCHANGED","test","tiles","featureReferences","keys","reduce","E","S","attributes","lengths","coords","constructOnly","prototype","missingTiles","fullArea","coveredArea","prepend","_tileInfo","_extent","resolution","FeatureServiceTileStore","ProcessResult"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import{ByteSizeUnit as s,estimateAttributesObjectSize as i,estimateFixedArraySize as r}from\"../../../../../core/byteSizeEstimations.js\";import{isNone as o,isSome as n}from\"../../../../../core/maybe.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as c,intersects as h,fromExtent as u,area as d}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as f}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{BoundsStore as _}from\"../../../../../layers/graphics/data/BoundsStore.js\";import p from\"../../../../../layers/support/TileInfo.js\";import{TileKey as m}from\"../../../../../layers/support/TileKey.js\";import{executeQueryForCount as g}from\"../../../../../rest/query/operations/query.js\";import{FeatureServiceTileCache as y}from\"./FeatureServiceTileCache.js\";let v=class extends t{constructor(e){super(e),this.tileInfo=null,this.extent=null,this.maximumByteSize=10*s.MEGABYTES,this._tileBounds=new _,this._tiles=new y,this._refCounts=new Map,this._tileFeatureCounts=new Map,this._tmpBoundingRect=c()}add(e,t){const s=[];for(const i of t)this._referenceFeature(i.objectId)===x.ADDED&&s.push(i);this._addTileStorage(e,new Set(t.map((({objectId:e})=>e))),C(t)),this.featureStore.addMany(s),this._tiles.applyByteSizeLimit(this.maximumByteSize,(e=>this._removeTileStorage(e)))}destroy(){this.clear(),this._tileFeatureCounts.clear()}clear(){this.featureStore.clear(),this._tileBounds.clear(),this._tiles.clear(),this._refCounts.clear()}refresh(){this.clear(),this._tileFeatureCounts.clear()}processEdits(e,t,s){return this._processEditsDelete(e.deletedFeatures.concat(e.updatedFeatures)),this._processEditsRefetch(e.addedFeatures.concat(e.updatedFeatures),t,s)}_addTileStorage(e,t,s){this._tiles.set(e.id,new T(e,t,s)),this._tileBounds.set(e.id,e.extent),this._tileFeatureCounts.set(e.id,t.size)}_remove({id:e}){const t=this._tiles.get(e);t&&this._removeTileStorage(t)}_removeTileStorage(e){const t=[];for(const i of e.objectIds)this._unreferenceFeature(i)===x.REMOVED&&t.push(i);this.featureStore.removeManyById(t);const s=e.data.id;this._tiles.delete(s),this._tileBounds.delete(s)}_processEditsDelete(e){this.featureStore.removeManyById(e);for(const[,t]of this._tiles){for(const s of e)t.objectIds.delete(s);this._tileFeatureCounts.set(t.data.id,t.objectIds.size)}for(const t of e)this._refCounts.delete(t)}async _processEditsRefetch(e,t,s){const i=(await t(e,s)).features,{hasZ:r,hasM:n}=this.featureStore;for(const l of i){const e=f(this._tmpBoundingRect,l.geometry,r,n);o(e)||this._tileBounds.forEachInBounds(e,(e=>{const t=this._tiles.get(e);this.featureStore.add(l),t.objectIds.has(l.objectId)||(t.objectIds.add(l.objectId),this._referenceFeature(l.objectId),this._tileFeatureCounts.set(t.data.id,t.objectIds.size))}))}}process(e,t=(()=>!0)){if(o(this.tileInfo)||!e.extent||n(this.extent)&&!h(u(this.extent,this._tmpBoundingRect),e.extent))return new j(e);if(this._tiles.has(e.id))return new j(e);const s=this._createTileTree(e,this.tileInfo);return this._simplify(s,t,null,0,1),this._collectMissingTiles(e,s,this.tileInfo)}get debugInfo(){return Array.from(this._tiles.values()).map((({data:e})=>({data:e,featureCount:this._tileFeatureCounts.get(e.id)||0})))}getFeatureCount(e){return this._tileFeatureCounts.get(e.id)??0}async fetchCount(e,t,s,i){const r=this._tileFeatureCounts.get(e.id);if(null!=r)return r;const o=await g(t,s,i);return this._tileFeatureCounts.set(e.id,o.data.count),o.data.count}_createTileTree(e,t){const s=new I(e.level,e.row,e.col);return t.updateTileInfo(s,p.ExtrapolateOptions.POWER_OF_TWO),this._tileBounds.forEachInBounds(e.extent,(i=>{const r=this._tiles.get(i).data;this._tilesAreRelated(e,r)&&this._populateChildren(s,r,t,this._tileFeatureCounts.get(r.id)||0)})),s}_tilesAreRelated(e,t){if(!e||!t)return!1;if(e.level===t.level)return e.row===t.row&&e.col===t.col;const s=e.level<t.level,i=s?e:t,r=s?t:e,o=1<<r.level-i.level;return Math.floor(r.row/o)===i.row&&Math.floor(r.col/o)===i.col}_populateChildren(e,t,s,i){const r=t.level-e.level-1;if(r<0)return void(e.isLeaf=!0);const o=t.row>>r,l=t.col>>r,a=e.row<<1,c=l-(e.col<<1)+(o-a<<1),h=e.children[c];if(n(h))this._populateChildren(h,t,s,i);else{const r=new I(e.level+1,o,l);s.updateTileInfo(r,p.ExtrapolateOptions.POWER_OF_TWO),e.children[c]=r,this._populateChildren(r,t,s,i)}}_simplify(e,t,s,i,r){const o=r*r;if(e.isLeaf)return t(this.getFeatureCount(e),r)?0:(this._remove(e),n(s)&&(s.children[i]=null),o);const l=r/2,a=l*l;let c=0;for(let h=0;h<e.children.length;h++){const s=e.children[h];c+=n(s)?this._simplify(s,t,e,h,l):a}return 0===c?this._mergeChildren(e):1-c/o<w&&(this._purge(e),n(s)&&(s.children[i]=null),c=o),c}_mergeChildren(e){const t=new Set;let s=0;this._forEachLeaf(e,(e=>{const i=this._tiles.get(e.id);if(i){s+=i.byteSize;for(const e of i.objectIds)t.has(e)||(t.add(e),this._referenceFeature(e));this._remove(e)}})),this._addTileStorage(e,t,s),e.isLeaf=!0,e.children[0]=e.children[1]=e.children[2]=e.children[3]=null,this._tileFeatureCounts.set(e.id,t.size)}_forEachLeaf(e,t){for(const s of e.children)o(s)||(s.isLeaf?t(s):this._forEachLeaf(s,t))}_purge(e){if(!o(e))if(e.isLeaf)this._remove(e);else for(let t=0;t<e.children.length;t++){const s=e.children[t];this._purge(s),e.children[t]=null}}_collectMissingTiles(e,t,s){const i=new F(s,e,this.extent);return this._collectMissingTilesRecurse(t,i,1),i.info}_collectMissingTilesRecurse(e,t,s){if(e.isLeaf)return;if(!e.hasChildren)return void t.addMissing(e.level,e.row,e.col,s);const i=s/2;for(let r=0;r<e.children.length;r++){const s=e.children[r];o(s)?t.addMissing(e.level+1,(e.row<<1)+((2&r)>>1),(e.col<<1)+(1&r),i):this._collectMissingTilesRecurse(s,t,i)}}_referenceFeature(e){const t=(this._refCounts.get(e)||0)+1;return this._refCounts.set(e,t),1===t?x.ADDED:x.UNCHANGED}_unreferenceFeature(e){const t=(this._refCounts.get(e)||0)-1;return 0===t?(this._refCounts.delete(e),x.REMOVED):(t>0&&this._refCounts.set(e,t),x.UNCHANGED)}get test(){return{tiles:Array.from(this._tiles.values()).map((e=>`${e.data.id}:[${Array.from(e.objectIds)}]`)),featureReferences:Array.from(this._refCounts.keys()).map((e=>`${e}:${this._refCounts.get(e)}`))}}};function C(e){return e.reduce(((e,t)=>e+E(t)),0)}function E(e){return 32+S(e.geometry)+i(e.attributes)}function S(e){if(o(e))return 0;const t=r(e.lengths,4);return 32+r(e.coords,8)+t}e([l({constructOnly:!0})],v.prototype,\"featureStore\",void 0),e([l()],v.prototype,\"tileInfo\",void 0),e([l()],v.prototype,\"extent\",void 0),e([l()],v.prototype,\"maximumByteSize\",void 0),v=e([a(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore\")],v);class T{constructor(e,t,s){this.data=e,this.objectIds=t,this.byteSize=s}}class I{constructor(e,t,s){this.level=e,this.row=t,this.col=s,this.isLeaf=!1,this.extent=null,this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(n(this.children[0])||n(this.children[1])||n(this.children[2])||n(this.children[3]))}}class j{constructor(e,t=[]){this.missingTiles=t,this.fullArea=0,this.coveredArea=0,this.fullArea=d(e.extent),this.coveredArea=this.fullArea}prepend(e){this.missingTiles=e.missingTiles.concat(this.missingTiles),this.coveredArea+=e.coveredArea,this.fullArea+=e.fullArea}}class F{constructor(e,t,s){this._tileInfo=e,this._extent=null,this.info=new j(t),n(s)&&(this._extent=u(s))}addMissing(e,t,s,i){const r=new m(null,e,t,s);this._tileInfo.updateTileInfo(r,p.ExtrapolateOptions.POWER_OF_TWO),o(r.extent)||n(this._extent)&&!h(this._extent,r.extent)||(this.info.missingTiles.push({data:r,resolution:i}),this.info.coveredArea-=d(r.extent))}}const w=.18751;var x;!function(e){e[e.ADDED=0]=\"ADDED\",e[e.REMOVED=1]=\"REMOVED\",e[e.UNCHANGED=2]=\"UNCHANGED\"}(x||(x={}));export{v as FeatureServiceTileStore,j as ProcessResult};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}