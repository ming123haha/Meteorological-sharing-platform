{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../request.js\";\nimport s from \"../../../core/Accessor.js\";\nimport { removeUnordered as r } from \"../../../core/arrayUtils.js\";\nimport o from \"../../../core/Error.js\";\nimport { clone as a } from \"../../../core/lang.js\";\nimport { removeMaybe as n, abortMaybe as i, destroyMaybe as u, isSome as l } from \"../../../core/maybe.js\";\nimport { createResolver as h, onAbort as c, createAbortError as d, throwIfAborted as p, isAbortError as m } from \"../../../core/promiseUtils.js\";\nimport { property as _ } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as g } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { AsyncWorkerQueue as f, BaseTask as k } from \"./AsyncWorkerQueue.js\";\nimport { assert as L } from \"../webgl-engine/lib/Util.js\";\nimport { TaskPriority as D } from \"../../support/Scheduler.js\";\nlet y = class extends s {\n  constructor() {\n    super(...arguments), this._tasks = new Map(), this._onLoadQueue = new Array(), this._doneQueue = new Array(), this.updating = !1;\n  }\n\n  setup(e, t, s) {\n    this._loadQueue = new f((e, t) => this._startLoading(e, t), (e, t) => this._doneLoadingCB(e, t), e, t), s && (this._frameTask = s.registerTask(D.STREAM_DATA_LOADER, this));\n  }\n\n  destroy() {\n    this._frameTask = n(this._frameTask), this._tasks.forEach(e => i(e.abortController)), this._loadQueue = u(this._loadQueue), this._onLoadQueue = null, this._doneQueue = null, this._tasks = null;\n  }\n\n  hasDownloadSlots(e) {\n    return this._loadQueue.hasQuota(e);\n  }\n\n  request(e, t, s, r = {}) {\n    const o = h();\n    o.__signal = l(r) ? r.signal : null;\n\n    const a = this._createOrUpdateTask(e, t, s, r, o);\n\n    return c(r, () => this._cancelRequest(a, o)), o.promise;\n  }\n\n  _createTask(e, t, s, r, o, a) {\n    const n = new Q(e, t, s, r, o);\n    return this._updateTask(n, a), this._tasks.set(o, n), 1 === this._tasks.size && this._set(\"updating\", !0), this._loadQueue.push(n), n;\n  }\n\n  _cancelRequest(e, t) {\n    r(e.resolvers, t), t.reject(d()), 0 === e.resolvers.length && (e.status === E.DOWNLOADING && (e.status = E.CANCELLED, this._loadQueue.cancel(e), e.abortController?.abort(), e.request = null, e.abortController = null), e.status = E.CANCELLED, this._tasks.delete(e.key), 0 === this._tasks.size && this._set(\"updating\", !1));\n  }\n\n  _updateTask(e, t) {\n    e.resolvers.push(t);\n  }\n\n  _createOrUpdateTask(e, t, s, r, o) {\n    const a = T(l(r) && r.uid || e, t, s),\n          n = this._tasks.get(a);\n\n    return n ? (this._updateTask(n, o), n) : this._createTask(e, r, t, s, a, o);\n  }\n\n  _doneLoadingCB(e, t) {\n    this._loadQueue && (L(e.status === E.DOWNLOADING), e.status = E.DOWNLOADED, this._frameTask ? this._doneQueue.push({\n      task: e,\n      err: t\n    }) : this._doneLoading(e, t));\n  }\n\n  get running() {\n    return this._doneQueue.length > 0 || this._onLoadQueue.length > 0;\n  }\n\n  runTask(e) {\n    for (; !e.done && this._onLoadQueue.length > 0;) {\n      const t = this._onLoadQueue.shift();\n\n      p(t.task.abortController), t.task.abortController = null, t.callback(t.task), e.madeProgress();\n    }\n\n    for (; !e.done && this._doneQueue.length > 0;) {\n      const t = this._doneQueue.shift();\n\n      t.task.status !== E.DOWNLOADED && (t.err = t.err || d()), this._doneLoading(t.task, t.err), e.madeProgress();\n    }\n  }\n\n  _doneLoading(e, t) {\n    if (t && !m(t) && e.numRetries > 0) return --e.numRetries, void this._loadQueue.push(e);\n    let s = e.result instanceof HTMLImageElement ? 0 : e.resolvers.length;\n\n    for (const r of e.resolvers) if (t) m(t) ? r.reject(t) : r.reject(new o(\"stream-data-loader:request-error\", `Failed to request resource at '${e.url}'. ${t}`, {\n      url: e.url,\n      error: t\n    }));else {\n      --s;\n      const t = s <= 0 ? e.result : a(e.result);\n      r.resolve(t);\n    }\n\n    this._tasks.delete(e.key), 0 === this._tasks.size && this._set(\"updating\", !1);\n  }\n\n  _startLoading(e, s) {\n    if (e.status === E.CANCELLED) return !1;\n    let r, o;\n\n    switch (e.startTime = performance.now(), e.status = E.DOWNLOADING, e.docType) {\n      case \"binary\":\n        o = \"array-buffer\", r = 0;\n        break;\n\n      case \"image\":\n        o = \"image\";\n        break;\n\n      case \"image+type\":\n        o = \"array-buffer\";\n        break;\n\n      default:\n        o = \"json\";\n    }\n\n    e.abortController = new AbortController();\n    const a = e.abortController.signal;\n    e.request = t(e.url, { ...e.options,\n      responseType: o,\n      timeout: r,\n      signal: a\n    });\n\n    let n = () => {};\n\n    const i = t => {\n      e.duration = performance.now() - e.startTime, e.size = t instanceof ArrayBuffer ? t.byteLength : e.size || 0, e.result = t, this._frameTask ? this._onLoadQueue.push({\n        callback: s,\n        task: e\n      }) : (e.abortController = null, s(e));\n    },\n          u = t => {\n      e.status === E.DOWNLOADING && s(e, t), n();\n    };\n\n    return \"image+type\" !== e.docType ? (e.request.then(e => i(e.data), u), !0) : (e.request.then(s => {\n      const l = s.data,\n            h = A(l);\n      if (o = \"image\", e.size = l.byteLength, \"unknown\" === h) return e.request = t(e.url, {\n        responseType: o,\n        timeout: r,\n        signal: a\n      }), void e.request.then(e => i(e.data), u);\n      const c = new Blob([l], {\n        type: h\n      }),\n            d = window.URL.createObjectURL(c);\n      n = () => window.URL.revokeObjectURL(d), e.request = t(d, {\n        responseType: o,\n        timeout: r,\n        signal: a\n      }), e.request.then(e => i(new O(e.data, h, n)), u);\n    }, u), !0);\n  }\n\n  get test() {\n    return {\n      loadQueue: this._loadQueue\n    };\n  }\n\n};\ne([_({\n  readOnly: !0\n})], y.prototype, \"updating\", void 0), y = e([g(\"esri.views.3d.support.StreamDataLoader\")], y);\nconst b = {\n  numRetries: 0\n};\n\nfunction A(e) {\n  if (e.byteLength < 2) return \"unknown\";\n  const t = new Uint8Array(e, 0, e.byteLength);\n  return 137 === t[0] && 80 === t[1] ? \"image/png\" : 71 === t[0] && 73 === t[1] ? \"image/gif\" : 66 === t[0] && 77 === t[1] ? \"image/bmp\" : 255 === t[0] && 216 === t[1] ? \"image/jpeg\" : \"unknown\";\n}\n\nclass O {\n  constructor(e, t, s) {\n    this.image = e, this.type = t, this.release = s;\n  }\n\n  get isOpaque() {\n    return \"image/jpeg\" === this.type;\n  }\n\n}\n\nclass Q extends k {\n  constructor(e, t, s, r, o) {\n    super(r), this.url = e, this.options = t, this.docType = s, this.key = o, this.result = null, this.status = E.QUEUED, this.request = null, this.abortController = null, this.resolvers = new Array(), this.startTime = 0, this.numRetries = b.numRetries;\n  }\n\n}\n\nfunction T(e, t, s) {\n  return `${e}:${t}:${s}`;\n}\n\nvar E;\n!function (e) {\n  e[e.QUEUED = 1] = \"QUEUED\", e[e.DOWNLOADING = 2] = \"DOWNLOADING\", e[e.DOWNLOADED = 3] = \"DOWNLOADED\", e[e.CANCELLED = 4] = \"CANCELLED\";\n}(E || (E = {}));\nexport { O as ImageWithType, y as StreamDataLoader, E as TaskStatus, b as test };","map":{"version":3,"names":["_","e","t","s","removeUnordered","r","o","clone","a","removeMaybe","n","abortMaybe","i","destroyMaybe","u","isSome","l","createResolver","h","onAbort","c","createAbortError","d","throwIfAborted","p","isAbortError","m","property","subclass","g","AsyncWorkerQueue","f","BaseTask","k","assert","L","TaskPriority","D","y","constructor","arguments","_tasks","Map","_onLoadQueue","Array","_doneQueue","updating","setup","_loadQueue","_startLoading","_doneLoadingCB","_frameTask","registerTask","STREAM_DATA_LOADER","destroy","forEach","abortController","hasDownloadSlots","hasQuota","request","__signal","signal","_createOrUpdateTask","_cancelRequest","promise","_createTask","Q","_updateTask","set","size","_set","push","resolvers","reject","length","status","E","DOWNLOADING","CANCELLED","cancel","abort","delete","key","T","uid","get","DOWNLOADED","task","err","_doneLoading","running","runTask","done","shift","callback","madeProgress","numRetries","result","HTMLImageElement","url","error","resolve","startTime","performance","now","docType","AbortController","options","responseType","timeout","duration","ArrayBuffer","byteLength","then","data","A","Blob","type","window","URL","createObjectURL","revokeObjectURL","O","test","loadQueue","readOnly","prototype","b","Uint8Array","image","release","isOpaque","QUEUED","ImageWithType","StreamDataLoader","TaskStatus"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/support/StreamDataLoader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../request.js\";import s from\"../../../core/Accessor.js\";import{removeUnordered as r}from\"../../../core/arrayUtils.js\";import o from\"../../../core/Error.js\";import{clone as a}from\"../../../core/lang.js\";import{removeMaybe as n,abortMaybe as i,destroyMaybe as u,isSome as l}from\"../../../core/maybe.js\";import{createResolver as h,onAbort as c,createAbortError as d,throwIfAborted as p,isAbortError as m}from\"../../../core/promiseUtils.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import{AsyncWorkerQueue as f,BaseTask as k}from\"./AsyncWorkerQueue.js\";import{assert as L}from\"../webgl-engine/lib/Util.js\";import{TaskPriority as D}from\"../../support/Scheduler.js\";let y=class extends s{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,s){this._loadQueue=new f(((e,t)=>this._startLoading(e,t)),((e,t)=>this._doneLoadingCB(e,t)),e,t),s&&(this._frameTask=s.registerTask(D.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=n(this._frameTask),this._tasks.forEach((e=>i(e.abortController))),this._loadQueue=u(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,s,r={}){const o=h();o.__signal=l(r)?r.signal:null;const a=this._createOrUpdateTask(e,t,s,r,o);return c(r,(()=>this._cancelRequest(a,o))),o.promise}_createTask(e,t,s,r,o,a){const n=new Q(e,t,s,r,o);return this._updateTask(n,a),this._tasks.set(o,n),1===this._tasks.size&&this._set(\"updating\",!0),this._loadQueue.push(n),n}_cancelRequest(e,t){r(e.resolvers,t),t.reject(d()),0===e.resolvers.length&&(e.status===E.DOWNLOADING&&(e.status=E.CANCELLED,this._loadQueue.cancel(e),e.abortController?.abort(),e.request=null,e.abortController=null),e.status=E.CANCELLED,this._tasks.delete(e.key),0===this._tasks.size&&this._set(\"updating\",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,s,r,o){const a=T(l(r)&&r.uid||e,t,s),n=this._tasks.get(a);return n?(this._updateTask(n,o),n):this._createTask(e,r,t,s,a,o)}_doneLoadingCB(e,t){this._loadQueue&&(L(e.status===E.DOWNLOADING),e.status=E.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();p(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==E.DOWNLOADED&&(t.err=t.err||d()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!m(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let s=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(t)m(t)?r.reject(t):r.reject(new o(\"stream-data-loader:request-error\",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--s;const t=s<=0?e.result:a(e.result);r.resolve(t)}this._tasks.delete(e.key),0===this._tasks.size&&this._set(\"updating\",!1)}_startLoading(e,s){if(e.status===E.CANCELLED)return!1;let r,o;switch(e.startTime=performance.now(),e.status=E.DOWNLOADING,e.docType){case\"binary\":o=\"array-buffer\",r=0;break;case\"image\":o=\"image\";break;case\"image+type\":o=\"array-buffer\";break;default:o=\"json\"}e.abortController=new AbortController;const a=e.abortController.signal;e.request=t(e.url,{...e.options,responseType:o,timeout:r,signal:a});let n=()=>{};const i=t=>{e.duration=performance.now()-e.startTime,e.size=t instanceof ArrayBuffer?t.byteLength:e.size||0,e.result=t,this._frameTask?this._onLoadQueue.push({callback:s,task:e}):(e.abortController=null,s(e))},u=t=>{e.status===E.DOWNLOADING&&s(e,t),n()};return\"image+type\"!==e.docType?(e.request.then((e=>i(e.data)),u),!0):(e.request.then((s=>{const l=s.data,h=A(l);if(o=\"image\",e.size=l.byteLength,\"unknown\"===h)return e.request=t(e.url,{responseType:o,timeout:r,signal:a}),void e.request.then((e=>i(e.data)),u);const c=new Blob([l],{type:h}),d=window.URL.createObjectURL(c);n=()=>window.URL.revokeObjectURL(d),e.request=t(d,{responseType:o,timeout:r,signal:a}),e.request.then((e=>i(new O(e.data,h,n))),u)}),u),!0)}get test(){return{loadQueue:this._loadQueue}}};e([_({readOnly:!0})],y.prototype,\"updating\",void 0),y=e([g(\"esri.views.3d.support.StreamDataLoader\")],y);const b={numRetries:0};function A(e){if(e.byteLength<2)return\"unknown\";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?\"image/png\":71===t[0]&&73===t[1]?\"image/gif\":66===t[0]&&77===t[1]?\"image/bmp\":255===t[0]&&216===t[1]?\"image/jpeg\":\"unknown\"}class O{constructor(e,t,s){this.image=e,this.type=t,this.release=s}get isOpaque(){return\"image/jpeg\"===this.type}}class Q extends k{constructor(e,t,s,r,o){super(r),this.url=e,this.options=t,this.docType=s,this.key=o,this.result=null,this.status=E.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=b.numRetries}}function T(e,t,s){return`${e}:${t}:${s}`}var E;!function(e){e[e.QUEUED=1]=\"QUEUED\",e[e.DOWNLOADING=2]=\"DOWNLOADING\",e[e.DOWNLOADED=3]=\"DOWNLOADED\",e[e.CANCELLED=4]=\"CANCELLED\"}(E||(E={}));export{O as ImageWithType,y as StreamDataLoader,E as TaskStatus,b as test};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}