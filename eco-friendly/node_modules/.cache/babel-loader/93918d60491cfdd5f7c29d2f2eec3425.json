{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { clone as t } from \"../../../../core/lang.js\";\nimport e from \"../../../../core/LRUCache.js\";\nimport { throwIfAborted as s } from \"../../../../core/promiseUtils.js\";\nimport { numericHash as o } from \"../../../../core/string.js\";\n\nfunction n(t = !1, e) {\n  return t ? new i(e) : new c();\n}\n\nclass c {\n  async fetch() {\n    return [];\n  }\n\n  notifySymbologyChange() {}\n\n}\n\nconst r = 1024;\n\nclass i {\n  constructor(t) {\n    this._getSymbologyCandidates = t, this._candidatesCache = new e(r), this._cacheVersion = 0;\n  }\n\n  async fetch(e, o) {\n    if (0 === e.length) return [];\n    const n = [],\n          c = [],\n          r = this._candidatesCache;\n\n    for (const s of e) {\n      const e = a(s),\n            o = r.get(e);\n      if (o) for (const s of o) c.push(t(s));else n.push(s), r.put(e, [], 1);\n    }\n\n    if (0 === n.length) return c;\n    const i = this._cacheVersion,\n          {\n      candidates: h,\n      sourceCandidateIndices: d\n    } = await this._getSymbologyCandidates(n, o);\n    s(o);\n    if (i !== this._cacheVersion) return this.fetch(e, o);\n    const f = [],\n          {\n      length: g\n    } = h;\n\n    for (let s = 0; s < g; ++s) {\n      const e = h[s],\n            o = a(n[d[s]]),\n            c = r.get(o);\n      c.push(e), r.put(o, c, c.length), f.push(t(e));\n    }\n\n    return c.concat(f);\n  }\n\n  notifySymbologyChange() {\n    this._candidatesCache.clear(), this._cacheVersion++;\n  }\n\n}\n\nfunction a(t) {\n  switch (t.type) {\n    case \"vertex\":\n      {\n        const {\n          objectId: e,\n          target: s\n        } = t,\n              n = `${e}-vertex-${s.x}-${s.y}-${s.z ?? 0}`;\n        return o(n).toString();\n      }\n\n    case \"edge\":\n      {\n        const {\n          objectId: e,\n          start: s,\n          end: n\n        } = t,\n              c = `${e}-edge-${s.x}-${s.y}-${s.z ?? 0}-to-${n.x}-${n.y}-${n.z ?? 0}`;\n        return o(c).toString();\n      }\n\n    default:\n      return \"\";\n  }\n}\n\nexport { n as getSymbologySnappingCandidatesFetcher };","map":{"version":3,"names":["clone","t","e","throwIfAborted","s","numericHash","o","n","i","c","fetch","notifySymbologyChange","r","constructor","_getSymbologyCandidates","_candidatesCache","_cacheVersion","length","a","get","push","put","candidates","h","sourceCandidateIndices","d","f","g","concat","clear","type","objectId","target","x","y","z","toString","start","end","getSymbologySnappingCandidatesFetcher"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import e from\"../../../../core/LRUCache.js\";import{throwIfAborted as s}from\"../../../../core/promiseUtils.js\";import{numericHash as o}from\"../../../../core/string.js\";function n(t=!1,e){return t?new i(e):new c}class c{async fetch(){return[]}notifySymbologyChange(){}}const r=1024;class i{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new e(r),this._cacheVersion=0}async fetch(e,o){if(0===e.length)return[];const n=[],c=[],r=this._candidatesCache;for(const s of e){const e=a(s),o=r.get(e);if(o)for(const s of o)c.push(t(s));else n.push(s),r.put(e,[],1)}if(0===n.length)return c;const i=this._cacheVersion,{candidates:h,sourceCandidateIndices:d}=await this._getSymbologyCandidates(n,o);s(o);if(i!==this._cacheVersion)return this.fetch(e,o);const f=[],{length:g}=h;for(let s=0;s<g;++s){const e=h[s],o=a(n[d[s]]),c=r.get(o);c.push(e),r.put(o,c,c.length),f.push(t(e))}return c.concat(f)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function a(t){switch(t.type){case\"vertex\":{const{objectId:e,target:s}=t,n=`${e}-vertex-${s.x}-${s.y}-${s.z??0}`;return o(n).toString()}case\"edge\":{const{objectId:e,start:s,end:n}=t,c=`${e}-edge-${s.x}-${s.y}-${s.z??0}-to-${n.x}-${n.y}-${n.z??0}`;return o(c).toString()}default:return\"\"}}export{n as getSymbologySnappingCandidatesFetcher};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAM,yBAAN;AAAgC,SAAOA,KAAK,IAAIC,CAAhB,QAAsB,0BAAtB;AAAiD,OAAOC,CAAP,MAAa,8BAAb;AAA4C,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,kCAA/B;AAAkE,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,4BAA5B;;AAAyD,SAASC,CAAT,CAAWN,CAAC,GAAC,CAAC,CAAd,EAAgBC,CAAhB,EAAkB;EAAC,OAAOD,CAAC,GAAC,IAAIO,CAAJ,CAAMN,CAAN,CAAD,GAAU,IAAIO,CAAJ,EAAlB;AAAwB;;AAAA,MAAMA,CAAN,CAAO;EAAY,MAALC,KAAK,GAAE;IAAC,OAAM,EAAN;EAAS;;EAAAC,qBAAqB,GAAE,CAAE;;AAAjD;;AAAkD,MAAMC,CAAC,GAAC,IAAR;;AAAa,MAAMJ,CAAN,CAAO;EAACK,WAAW,CAACZ,CAAD,EAAG;IAAC,KAAKa,uBAAL,GAA6Bb,CAA7B,EAA+B,KAAKc,gBAAL,GAAsB,IAAIb,CAAJ,CAAMU,CAAN,CAArD,EAA8D,KAAKI,aAAL,GAAmB,CAAjF;EAAmF;;EAAW,MAALN,KAAK,CAACR,CAAD,EAAGI,CAAH,EAAK;IAAC,IAAG,MAAIJ,CAAC,CAACe,MAAT,EAAgB,OAAM,EAAN;IAAS,MAAMV,CAAC,GAAC,EAAR;IAAA,MAAWE,CAAC,GAAC,EAAb;IAAA,MAAgBG,CAAC,GAAC,KAAKG,gBAAvB;;IAAwC,KAAI,MAAMX,CAAV,IAAeF,CAAf,EAAiB;MAAC,MAAMA,CAAC,GAACgB,CAAC,CAACd,CAAD,CAAT;MAAA,MAAaE,CAAC,GAACM,CAAC,CAACO,GAAF,CAAMjB,CAAN,CAAf;MAAwB,IAAGI,CAAH,EAAK,KAAI,MAAMF,CAAV,IAAeE,CAAf,EAAiBG,CAAC,CAACW,IAAF,CAAOnB,CAAC,CAACG,CAAD,CAAR,EAAtB,KAAwCG,CAAC,CAACa,IAAF,CAAOhB,CAAP,GAAUQ,CAAC,CAACS,GAAF,CAAMnB,CAAN,EAAQ,EAAR,EAAW,CAAX,CAAV;IAAwB;;IAAA,IAAG,MAAIK,CAAC,CAACU,MAAT,EAAgB,OAAOR,CAAP;IAAS,MAAMD,CAAC,GAAC,KAAKQ,aAAb;IAAA,MAA2B;MAACM,UAAU,EAACC,CAAZ;MAAcC,sBAAsB,EAACC;IAArC,IAAwC,MAAM,KAAKX,uBAAL,CAA6BP,CAA7B,EAA+BD,CAA/B,CAAzE;IAA2GF,CAAC,CAACE,CAAD,CAAD;IAAK,IAAGE,CAAC,KAAG,KAAKQ,aAAZ,EAA0B,OAAO,KAAKN,KAAL,CAAWR,CAAX,EAAaI,CAAb,CAAP;IAAuB,MAAMoB,CAAC,GAAC,EAAR;IAAA,MAAW;MAACT,MAAM,EAACU;IAAR,IAAWJ,CAAtB;;IAAwB,KAAI,IAAInB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACuB,CAAd,EAAgB,EAAEvB,CAAlB,EAAoB;MAAC,MAAMF,CAAC,GAACqB,CAAC,CAACnB,CAAD,CAAT;MAAA,MAAaE,CAAC,GAACY,CAAC,CAACX,CAAC,CAACkB,CAAC,CAACrB,CAAD,CAAF,CAAF,CAAhB;MAAA,MAA0BK,CAAC,GAACG,CAAC,CAACO,GAAF,CAAMb,CAAN,CAA5B;MAAqCG,CAAC,CAACW,IAAF,CAAOlB,CAAP,GAAUU,CAAC,CAACS,GAAF,CAAMf,CAAN,EAAQG,CAAR,EAAUA,CAAC,CAACQ,MAAZ,CAAV,EAA8BS,CAAC,CAACN,IAAF,CAAOnB,CAAC,CAACC,CAAD,CAAR,CAA9B;IAA2C;;IAAA,OAAOO,CAAC,CAACmB,MAAF,CAASF,CAAT,CAAP;EAAmB;;EAAAf,qBAAqB,GAAE;IAAC,KAAKI,gBAAL,CAAsBc,KAAtB,IAA8B,KAAKb,aAAL,EAA9B;EAAmD;;AAAprB;;AAAqrB,SAASE,CAAT,CAAWjB,CAAX,EAAa;EAAC,QAAOA,CAAC,CAAC6B,IAAT;IAAe,KAAI,QAAJ;MAAa;QAAC,MAAK;UAACC,QAAQ,EAAC7B,CAAV;UAAY8B,MAAM,EAAC5B;QAAnB,IAAsBH,CAA3B;QAAA,MAA6BM,CAAC,GAAE,GAAEL,CAAE,WAAUE,CAAC,CAAC6B,CAAE,IAAG7B,CAAC,CAAC8B,CAAE,IAAG9B,CAAC,CAAC+B,CAAF,IAAK,CAAE,EAAnE;QAAqE,OAAO7B,CAAC,CAACC,CAAD,CAAD,CAAK6B,QAAL,EAAP;MAAuB;;IAAA,KAAI,MAAJ;MAAW;QAAC,MAAK;UAACL,QAAQ,EAAC7B,CAAV;UAAYmC,KAAK,EAACjC,CAAlB;UAAoBkC,GAAG,EAAC/B;QAAxB,IAA2BN,CAAhC;QAAA,MAAkCQ,CAAC,GAAE,GAAEP,CAAE,SAAQE,CAAC,CAAC6B,CAAE,IAAG7B,CAAC,CAAC8B,CAAE,IAAG9B,CAAC,CAAC+B,CAAF,IAAK,CAAE,OAAM5B,CAAC,CAAC0B,CAAE,IAAG1B,CAAC,CAAC2B,CAAE,IAAG3B,CAAC,CAAC4B,CAAF,IAAK,CAAE,EAAjG;QAAmG,OAAO7B,CAAC,CAACG,CAAD,CAAD,CAAK2B,QAAL,EAAP;MAAuB;;IAAA;MAAQ,OAAM,EAAN;EAAvQ;AAAiR;;AAAA,SAAO7B,CAAC,IAAIgC,qCAAZ"},"metadata":{},"sourceType":"module"}