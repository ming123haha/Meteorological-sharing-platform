{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport s from \"../../../../core/Handles.js\";\nimport { watch as i, sync as r, initial as n } from \"../../../../core/reactiveUtils.js\";\nimport { property as o } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { getReferenceEllipsoid as h } from \"../../../../geometry/projectionEllipsoid.js\";\nimport { FrustumExtentIntersection as p } from \"../../support/FrustumExtentIntersection.js\";\nimport { TaskPriority as c } from \"../../../support/Scheduler.js\";\nconst l = 1.2;\nlet u = class extends t {\n  constructor() {\n    super(...arguments), this.suspended = !1, this.extent = null, this.extentIntersectionDirty = !0, this._isVisibleBelowSurface = !1, this.handles = new s(), this.graphicsCoreOwner = null, this.updating = !0;\n  }\n\n  setup(e) {\n    this.graphicsCoreOwner = e, this.extentIntersection = new p({\n      renderCoordsHelper: e.view.renderCoordsHelper\n    });\n    const t = e.view,\n          s = t.basemapTerrain,\n          o = t.resourceController.scheduler;\n    this.handles.add([t.on(\"resize\", () => this._viewChange()), i(() => t.state.camera, () => this._viewChange(), r), o.registerTask(c.FRUSTUM_VISIBILITY, this), s.on(\"elevation-bounds-change\", () => this._elevationBoundsChange())]), \"local\" === t.viewingMode ? this.isVisibleBelowSurface = !0 : this.handles.add([i(() => [s.baseOpacity, s.wireframe, t.map?.ground?.navigationConstraint?.type], () => this._updateIsVisibleBelowSurface(), n)]);\n  }\n\n  destroy() {\n    this.graphicsCoreOwner = null, this.extent = null, this.extentIntersection = null, this.handles && (this.handles.destroy(), this.handles = null);\n  }\n\n  _setDirty() {\n    this.updating || this._set(\"updating\", !0);\n  }\n\n  setExtent(e) {\n    this.extent = e, this.extentIntersectionDirty = !0, this._setDirty();\n  }\n\n  _viewChange() {\n    this._setDirty();\n  }\n\n  _elevationBoundsChange() {\n    this._setDirty(), this.extentIntersectionDirty = !0;\n  }\n\n  set isVisibleBelowSurface(e) {\n    this._isVisibleBelowSurface = e, this._setDirty(), this.extentIntersectionDirty = !0;\n  }\n\n  _updateIsVisibleBelowSurface() {\n    const e = this.graphicsCoreOwner.view,\n          t = e.basemapTerrain,\n          s = \"local\" === e.viewingMode,\n          i = e.map.ground && e.map.ground.navigationConstraint && \"none\" === e.map.ground.navigationConstraint.type;\n    this.isVisibleBelowSurface = s || !t.opaque || i;\n  }\n\n  _updateExtentIntersection() {\n    if (!this.extentIntersectionDirty) return;\n    this.extentIntersectionDirty = !1;\n    const e = this.graphicsCoreOwner.view;\n    let t;\n    if (this._isVisibleBelowSurface) t = -.3 * h(e.spatialReference).radius;else {\n      const {\n        min: s,\n        max: i\n      } = e.basemapTerrain.elevationBounds;\n      t = s - Math.max(1, (i - s) * (l - 1));\n    }\n    this.extentIntersection.update(this.extent, e.spatialReference, t);\n  }\n\n  get running() {\n    return this.updating;\n  }\n\n  runTask() {\n    if (this._set(\"updating\", !1), !this.extent) return void this._set(\"suspended\", !1);\n\n    this._updateExtentIntersection();\n\n    const e = this.graphicsCoreOwner.view.frustum,\n          t = h(this.graphicsCoreOwner.view.spatialReference).radius;\n\n    this._set(\"suspended\", !this.extentIntersection.isVisibleInFrustum(e, t));\n  }\n\n};\ne([o({\n  readOnly: !0\n})], u.prototype, \"suspended\", void 0), e([o({\n  readOnly: !0\n})], u.prototype, \"updating\", void 0), u = e([a(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")], u);\nconst d = u;\nexport { d as default };","map":{"version":3,"names":["_","e","t","s","watch","i","sync","r","initial","n","property","o","subclass","a","getReferenceEllipsoid","h","FrustumExtentIntersection","p","TaskPriority","c","l","u","constructor","arguments","suspended","extent","extentIntersectionDirty","_isVisibleBelowSurface","handles","graphicsCoreOwner","updating","setup","extentIntersection","renderCoordsHelper","view","basemapTerrain","resourceController","scheduler","add","on","_viewChange","state","camera","registerTask","FRUSTUM_VISIBILITY","_elevationBoundsChange","viewingMode","isVisibleBelowSurface","baseOpacity","wireframe","map","ground","navigationConstraint","type","_updateIsVisibleBelowSurface","destroy","_setDirty","_set","setExtent","opaque","_updateExtentIntersection","spatialReference","radius","min","max","elevationBounds","Math","update","running","runTask","frustum","isVisibleInFrustum","readOnly","prototype","d","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{watch as i,sync as r,initial as n}from\"../../../../core/reactiveUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as h}from\"../../../../geometry/projectionEllipsoid.js\";import{FrustumExtentIntersection as p}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as c}from\"../../../support/Scheduler.js\";const l=1.2;let u=class extends t{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new s,this.graphicsCoreOwner=null,this.updating=!0}setup(e){this.graphicsCoreOwner=e,this.extentIntersection=new p({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,o=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this._viewChange())),i((()=>t.state.camera),(()=>this._viewChange()),r),o.registerTask(c.FRUSTUM_VISIBILITY,this),s.on(\"elevation-bounds-change\",(()=>this._elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([i((()=>[s.baseOpacity,s.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),n)])}destroy(){this.graphicsCoreOwner=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurface)t=-.3*h(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(l-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}get running(){return this.updating}runTask(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this._updateExtentIntersection();const e=this.graphicsCoreOwner.view.frustum,t=h(this.graphicsCoreOwner.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([o({readOnly:!0})],u.prototype,\"suspended\",void 0),e([o({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([a(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);const d=u;export{d as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}