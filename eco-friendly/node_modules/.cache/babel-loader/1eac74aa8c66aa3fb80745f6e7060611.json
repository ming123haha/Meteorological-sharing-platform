{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/CircularArray.js\";\nimport t from \"../../../../core/Evented.js\";\nimport has from \"../../../../core/has.js\";\nimport { isSome as s } from \"../../../../core/maybe.js\";\nimport { createDisjointTimerQuery as r } from \"../../../webgl/capabilities/DisjointTimerQuery.js\";\nconst n = has(\"esri-2d-profiler\");\n\nclass i {\n  constructor(s, i) {\n    if (this._events = new t(), this._entries = new Map(), this._timings = new e(10), this._currentContainer = null, this._currentPass = null, this._currentBrush = null, this._currentSummary = null, !n) return;\n    this._ext = r(s.gl, {}), this._debugOutput = i;\n    const o = s.gl;\n    if (this.enableCommandLogging) for (const e in o) if (\"function\" == typeof o[e]) {\n      const t = o[e],\n            s = e.includes(\"draw\");\n\n      o[e] = (...r) => (this._events.emit(\"command\", {\n        container: this._currentContainer,\n        pass: this._currentPass,\n        brush: this._currentBrush,\n        method: e,\n        args: r,\n        isDrawCommand: s\n      }), this._currentSummary && (this._currentSummary.commands++, s && this._currentSummary.drawCommands++), t.apply(o, r));\n    }\n  }\n\n  get enableCommandLogging() {\n    return !(\"object\" == typeof n && n.disableCommands);\n  }\n\n  recordContainerStart(e) {\n    n && (this._currentContainer = e);\n  }\n\n  recordContainerEnd() {\n    n && (this._currentContainer = null);\n  }\n\n  recordPassStart(e) {\n    n && (this._currentPass = e, this._initSummary());\n  }\n\n  recordPassEnd() {\n    n && (this._currentPass = null, this._emitSummary());\n  }\n\n  recordBrushStart(e) {\n    n && (this._currentBrush = e);\n  }\n\n  recordBrushEnd() {\n    n && (this._currentBrush = null);\n  }\n\n  recordStart(e) {\n    if (n && s(this._ext)) {\n      if (this._entries.has(e)) {\n        const t = this._entries.get(e),\n              r = this._ext.resultAvailable(t.query),\n              n = this._ext.disjoint();\n\n        if (r && !n) {\n          const r = this._ext.getResult(t.query) / 1e6;\n          let n = 0;\n\n          if (s(this._timings.enqueue(r))) {\n            const e = this._timings.entries,\n                  t = e.length;\n            let s = 0;\n\n            for (const r of e) s += r;\n\n            n = s / t;\n          }\n\n          const i = r.toFixed(2),\n                o = n ? n.toFixed(2) : \"--\";\n          this.enableCommandLogging ? (console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${t.commandsLen} Commands (${t.drawCommands} draw)`), console.log(\"RenderPass breakdown: \"), console.table(t.summaries), console.log(\"Commands: \", t.commands), console.groupEnd()) : console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`), this._debugOutput.innerHTML = `${i} (${o})`;\n        }\n\n        for (const e of t.handles) e.remove();\n\n        this._ext.deleteQuery(t.query), this._entries.delete(e);\n      }\n\n      const t = {\n        name: e,\n        query: this._ext.createQuery(),\n        commands: [],\n        commandsLen: 0,\n        drawCommands: 0,\n        summaries: [],\n        handles: []\n      };\n      this.enableCommandLogging && (t.handles.push(this._events.on(\"command\", e => {\n        t.commandsLen++, t.commands.push(e), e.isDrawCommand && t.drawCommands++;\n      })), t.handles.push(this._events.on(\"summary\", e => {\n        t.summaries.push(e);\n      }))), this._ext.beginTimeElapsed(t.query), this._entries.set(e, t);\n    }\n  }\n\n  recordEnd(e) {\n    n && s(this._ext) && this._entries.has(e) && this._ext.endTimeElapsed();\n  }\n\n  _initSummary() {\n    this.enableCommandLogging && (this._currentSummary = {\n      container: this._currentContainer,\n      pass: this._currentPass,\n      drawCommands: 0,\n      commands: 0\n    });\n  }\n\n  _emitSummary() {\n    this.enableCommandLogging && this._currentSummary && this._events.emit(\"summary\", this._currentSummary);\n  }\n\n}\n\nexport { i as Profiler };","map":{"version":3,"names":["e","t","has","isSome","s","createDisjointTimerQuery","r","n","i","constructor","_events","_entries","Map","_timings","_currentContainer","_currentPass","_currentBrush","_currentSummary","_ext","gl","_debugOutput","o","enableCommandLogging","includes","emit","container","pass","brush","method","args","isDrawCommand","commands","drawCommands","apply","disableCommands","recordContainerStart","recordContainerEnd","recordPassStart","_initSummary","recordPassEnd","_emitSummary","recordBrushStart","recordBrushEnd","recordStart","get","resultAvailable","query","disjoint","getResult","enqueue","entries","length","toFixed","console","groupCollapsed","commandsLen","log","table","summaries","groupEnd","innerHTML","handles","remove","deleteQuery","delete","name","createQuery","push","on","beginTimeElapsed","set","recordEnd","endTimeElapsed","Profiler"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/CircularArray.js\";import t from\"../../../../core/Evented.js\";import has from\"../../../../core/has.js\";import{isSome as s}from\"../../../../core/maybe.js\";import{createDisjointTimerQuery as r}from\"../../../webgl/capabilities/DisjointTimerQuery.js\";const n=has(\"esri-2d-profiler\");class i{constructor(s,i){if(this._events=new t,this._entries=new Map,this._timings=new e(10),this._currentContainer=null,this._currentPass=null,this._currentBrush=null,this._currentSummary=null,!n)return;this._ext=r(s.gl,{}),this._debugOutput=i;const o=s.gl;if(this.enableCommandLogging)for(const e in o)if(\"function\"==typeof o[e]){const t=o[e],s=e.includes(\"draw\");o[e]=(...r)=>(this._events.emit(\"command\",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:e,args:r,isDrawCommand:s}),this._currentSummary&&(this._currentSummary.commands++,s&&this._currentSummary.drawCommands++),t.apply(o,r))}}get enableCommandLogging(){return!(\"object\"==typeof n&&n.disableCommands)}recordContainerStart(e){n&&(this._currentContainer=e)}recordContainerEnd(){n&&(this._currentContainer=null)}recordPassStart(e){n&&(this._currentPass=e,this._initSummary())}recordPassEnd(){n&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){n&&(this._currentBrush=e)}recordBrushEnd(){n&&(this._currentBrush=null)}recordStart(e){if(n&&s(this._ext)){if(this._entries.has(e)){const t=this._entries.get(e),r=this._ext.resultAvailable(t.query),n=this._ext.disjoint();if(r&&!n){const r=this._ext.getResult(t.query)/1e6;let n=0;if(s(this._timings.enqueue(r))){const e=this._timings.entries,t=e.length;let s=0;for(const r of e)s+=r;n=s/t}const i=r.toFixed(2),o=n?n.toFixed(2):\"--\";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${t.commandsLen} Commands (${t.drawCommands} draw)`),console.log(\"RenderPass breakdown: \"),console.table(t.summaries),console.log(\"Commands: \",t.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`),this._debugOutput.innerHTML=`${i} (${o})`}for(const e of t.handles)e.remove();this._ext.deleteQuery(t.query),this._entries.delete(e)}const t={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(t.handles.push(this._events.on(\"command\",(e=>{t.commandsLen++,t.commands.push(e),e.isDrawCommand&&t.drawCommands++}))),t.handles.push(this._events.on(\"summary\",(e=>{t.summaries.push(e)})))),this._ext.beginTimeElapsed(t.query),this._entries.set(e,t)}}recordEnd(e){n&&s(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._currentSummary&&this._events.emit(\"summary\",this._currentSummary)}}export{i as Profiler};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}