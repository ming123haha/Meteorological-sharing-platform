{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport t from \"../../core/Collection.js\";\nimport r from \"../../core/Evented.js\";\nimport { JSONSupportMixin as s } from \"../../core/JSONSupport.js\";\nimport i from \"../../core/Loadable.js\";\nimport { isSome as o } from \"../../core/maybe.js\";\nimport { on as l, watch as a, whenOnce as n, sync as p } from \"../../core/reactiveUtils.js\";\nimport { stripHTML as u } from \"../../core/string.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport { ensureType as h } from \"../../core/accessorSupport/ensureType.js\";\nimport { reader as c } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as m } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { computeExtent as d, sublayersFromJSON as f, fetchService as v, parseKML as b } from \"./kmlUtils.js\";\nimport j from \"../../geometry/Extent.js\";\nvar S;\nlet k = S = class extends r.EventedMixin(s(i)) {\n  constructor(...e) {\n    super(...e), this.description = null, this.id = null, this.networkLink = null, this.sublayers = null, this.title = null, this.sourceJSON = null, this.fullExtent = null, this.addHandles([l(() => this.sublayers, \"after-add\", ({\n      item: e\n    }) => {\n      e.parent = this, e.layer = this.layer;\n    }, p), l(() => this.sublayers, \"after-remove\", ({\n      item: e\n    }) => {\n      e.layer = e.parent = null;\n    }, p), a(() => this.sublayers, (e, t) => {\n      if (t) for (const r of t) r.layer = r.parent = null;\n      if (e) for (const r of e) r.parent = this, r.layer = this.layer;\n    }, p)]);\n  }\n\n  initialize() {\n    n(() => this.networkLink).then(() => n(() => !0 === this.visible)).then(() => this.load());\n  }\n\n  load(e) {\n    if (!this.networkLink) return;\n    if (this.networkLink.viewFormat) return;\n\n    const r = o(e) ? e.signal : null,\n          s = this._fetchService(this._get(\"networkLink\")?.href ?? \"\", r).then(e => {\n      const r = d(e.sublayers);\n      this.fullExtent = j.fromJSON(r), this.sourceJSON = e;\n      const s = h(t.ofType(S), f(S, e));\n      this.sublayers ? this.sublayers.addMany(s) : this.sublayers = s, this.layer?.emit(\"sublayer-update\"), this.layer && this.layer.notifyChange(\"visibleSublayers\");\n    });\n\n    return this.addResolvingPromise(s), Promise.resolve(this);\n  }\n\n  get visible() {\n    return this._get(\"visible\");\n  }\n\n  set visible(e) {\n    this._get(\"visible\") !== e && (this._set(\"visible\", e), this.layer && this.layer.notifyChange(\"visibleSublayers\"));\n  }\n\n  readVisible(e, t) {\n    return !!t.visibility;\n  }\n\n  set layer(e) {\n    this._set(\"layer\", e), this.sublayers && this.sublayers.forEach(t => t.layer = e);\n  }\n\n  _fetchService(e, t) {\n    return v(e, this.layer.outSpatialReference, this.layer.refreshInterval, t).then(e => b(e.data));\n  }\n\n};\ne([y()], k.prototype, \"description\", void 0), e([y()], k.prototype, \"id\", void 0), e([y({\n  readOnly: !0,\n  value: null\n})], k.prototype, \"networkLink\", void 0), e([y({\n  json: {\n    write: {\n      allowNull: !0\n    }\n  }\n})], k.prototype, \"parent\", void 0), e([y({\n  type: t.ofType(S),\n  json: {\n    write: {\n      allowNull: !0\n    }\n  }\n})], k.prototype, \"sublayers\", void 0), e([y({\n  value: null,\n  json: {\n    read: {\n      source: \"name\",\n      reader: e => u(e)\n    }\n  }\n})], k.prototype, \"title\", void 0), e([y({\n  value: !0\n})], k.prototype, \"visible\", null), e([c(\"visible\", [\"visibility\"])], k.prototype, \"readVisible\", null), e([y()], k.prototype, \"sourceJSON\", void 0), e([y({\n  value: null\n})], k.prototype, \"layer\", null), e([y({\n  type: j\n})], k.prototype, \"fullExtent\", void 0), k = S = e([m(\"esri.layers.support.KMLSublayer\")], k);\nconst g = k;\nexport { g as default };","map":{"version":3,"names":["_","e","t","r","JSONSupportMixin","s","i","isSome","o","on","l","watch","a","whenOnce","n","sync","p","stripHTML","u","property","y","ensureType","h","reader","c","subclass","m","computeExtent","d","sublayersFromJSON","f","fetchService","v","parseKML","b","j","S","k","EventedMixin","constructor","description","id","networkLink","sublayers","title","sourceJSON","fullExtent","addHandles","item","parent","layer","initialize","then","visible","load","viewFormat","signal","_fetchService","_get","href","fromJSON","ofType","addMany","emit","notifyChange","addResolvingPromise","Promise","resolve","_set","readVisible","visibility","forEach","outSpatialReference","refreshInterval","data","prototype","readOnly","value","json","write","allowNull","type","read","source","g","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/KMLSublayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import t from\"../../core/Collection.js\";import r from\"../../core/Evented.js\";import{JSONSupportMixin as s}from\"../../core/JSONSupport.js\";import i from\"../../core/Loadable.js\";import{isSome as o}from\"../../core/maybe.js\";import{on as l,watch as a,whenOnce as n,sync as p}from\"../../core/reactiveUtils.js\";import{stripHTML as u}from\"../../core/string.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import{ensureType as h}from\"../../core/accessorSupport/ensureType.js\";import{reader as c}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../../core/accessorSupport/decorators/subclass.js\";import{computeExtent as d,sublayersFromJSON as f,fetchService as v,parseKML as b}from\"./kmlUtils.js\";import j from\"../../geometry/Extent.js\";var S;let k=S=class extends(r.EventedMixin(s(i))){constructor(...e){super(...e),this.description=null,this.id=null,this.networkLink=null,this.sublayers=null,this.title=null,this.sourceJSON=null,this.fullExtent=null,this.addHandles([l((()=>this.sublayers),\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer}),p),l((()=>this.sublayers),\"after-remove\",(({item:e})=>{e.layer=e.parent=null}),p),a((()=>this.sublayers),((e,t)=>{if(t)for(const r of t)r.layer=r.parent=null;if(e)for(const r of e)r.parent=this,r.layer=this.layer}),p)])}initialize(){n((()=>this.networkLink)).then((()=>n((()=>!0===this.visible)))).then((()=>this.load()))}load(e){if(!this.networkLink)return;if(this.networkLink.viewFormat)return;const r=o(e)?e.signal:null,s=this._fetchService(this._get(\"networkLink\")?.href??\"\",r).then((e=>{const r=d(e.sublayers);this.fullExtent=j.fromJSON(r),this.sourceJSON=e;const s=h(t.ofType(S),f(S,e));this.sublayers?this.sublayers.addMany(s):this.sublayers=s,this.layer?.emit(\"sublayer-update\"),this.layer&&this.layer.notifyChange(\"visibleSublayers\")}));return this.addResolvingPromise(s),Promise.resolve(this)}get visible(){return this._get(\"visible\")}set visible(e){this._get(\"visible\")!==e&&(this._set(\"visible\",e),this.layer&&this.layer.notifyChange(\"visibleSublayers\"))}readVisible(e,t){return!!t.visibility}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((t=>t.layer=e))}_fetchService(e,t){return v(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((e=>b(e.data)))}};e([y()],k.prototype,\"description\",void 0),e([y()],k.prototype,\"id\",void 0),e([y({readOnly:!0,value:null})],k.prototype,\"networkLink\",void 0),e([y({json:{write:{allowNull:!0}}})],k.prototype,\"parent\",void 0),e([y({type:t.ofType(S),json:{write:{allowNull:!0}}})],k.prototype,\"sublayers\",void 0),e([y({value:null,json:{read:{source:\"name\",reader:e=>u(e)}}})],k.prototype,\"title\",void 0),e([y({value:!0})],k.prototype,\"visible\",null),e([c(\"visible\",[\"visibility\"])],k.prototype,\"readVisible\",null),e([y()],k.prototype,\"sourceJSON\",void 0),e([y({value:null})],k.prototype,\"layer\",null),e([y({type:j})],k.prototype,\"fullExtent\",void 0),k=S=e([m(\"esri.layers.support.KMLSublayer\")],k);const g=k;export{g as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}