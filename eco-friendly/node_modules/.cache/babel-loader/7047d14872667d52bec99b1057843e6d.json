{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as s } from \"../../../../core/maybe.js\";\nimport { watch as r, initial as t } from \"../../../../core/reactiveUtils.js\";\nimport { UpdatePolicy as o } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { ContentObjectType as i } from \"../../webgl-engine/lib/ContentObjectType.js\";\nimport { Object3D as c } from \"../../webgl-engine/lib/Object3D.js\";\nimport { Texture as a } from \"../../webgl-engine/lib/Texture.js\";\nimport { WebGLLayer as h } from \"../../webgl-engine/lib/WebGLLayer.js\";\n\nclass u {\n  constructor(e) {\n    this.resourceFactory = e, this._resources = null, this._visible = !0, this._attached = !1;\n  }\n\n  destroy() {\n    this._destroyResources();\n  }\n\n  get object() {\n    return e(this._resources) ? this._resources.object : null;\n  }\n\n  get resources() {\n    return e(this._resources) ? this._resources.external : null;\n  }\n\n  get visible() {\n    return this._visible;\n  }\n\n  set visible(e) {\n    e !== this._visible && (this._visible = e, this._syncVisible());\n  }\n\n  get attached() {\n    return this._attached;\n  }\n\n  set attached(e) {\n    e !== this._attached && (this._attached = e, this._createOrDestroyResources());\n  }\n\n  recreate() {\n    this.attached && this._createResources();\n  }\n\n  recreateGeometry() {\n    if (!this.resourceFactory.recreateGeometry) return void this.recreate();\n    const e = this.resourceFactory.view._stage;\n    if (s(this._resources) || !e) return;\n    const r = this._resources.object;\n    this._resources.external.forEach(s => {\n      s.type === i.Geometry && e.remove(s);\n    }), r.removeAllGeometries();\n    const t = this.resourceFactory.recreateGeometry(this._resources.external, r, this._resources.layer);\n    e.addMany(t);\n  }\n\n  _createOrDestroyResources() {\n    this._attached ? this._resources || this._createResources() : this._destroyResources();\n  }\n\n  _createResources() {\n    this._destroyResources();\n\n    const e = this.resourceFactory,\n          s = e.view,\n          i = s._stage;\n    if (!i) return;\n    const u = new h({\n      isPickable: !1,\n      updatePolicy: o.SYNC\n    });\n    i.add(u);\n    const n = new c({\n      castShadow: !1\n    }),\n          l = e.createResources(n, u);\n    l.forEach(e => {\n      i.add(e), e instanceof a && i.loadImmediate(e);\n    }), i.add(n), u.add(n);\n\n    const _ = e.cameraChanged ? r(() => s.state.camera, s => e.cameraChanged(s), t) : null;\n\n    this._resources = {\n      layer: u,\n      object: n,\n      external: l,\n      cameraHandle: _\n    }, this._syncVisible();\n  }\n\n  _destroyResources() {\n    if (s(this._resources)) return;\n    const e = this.resourceFactory.view._stage;\n    e?.remove(this._resources.object), e?.remove(this._resources.layer), this._resources.external.forEach(s => {\n      e?.remove(s), \"dispose\" in s && s.dispose();\n    }), this._resources.object.dispose(), this._resources.cameraHandle && this._resources.cameraHandle.remove(), this._resources = null;\n  }\n\n  _syncVisible() {\n    s(this._resources) || this._resources.object.setVisible(this._visible);\n  }\n\n}\n\nexport { u as VisualElementResources };","map":{"version":3,"names":["isSome","e","isNone","s","watch","r","initial","t","UpdatePolicy","o","ContentObjectType","i","Object3D","c","Texture","a","WebGLLayer","h","u","constructor","resourceFactory","_resources","_visible","_attached","destroy","_destroyResources","object","resources","external","visible","_syncVisible","attached","_createOrDestroyResources","recreate","_createResources","recreateGeometry","view","_stage","forEach","type","Geometry","remove","removeAllGeometries","layer","addMany","isPickable","updatePolicy","SYNC","add","n","castShadow","l","createResources","loadImmediate","_","cameraChanged","state","camera","cameraHandle","dispose","setVisible","VisualElementResources"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{watch as r,initial as t}from\"../../../../core/reactiveUtils.js\";import{UpdatePolicy as o}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ContentObjectType as i}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Object3D as c}from\"../../webgl-engine/lib/Object3D.js\";import{Texture as a}from\"../../webgl-engine/lib/Texture.js\";import{WebGLLayer as h}from\"../../webgl-engine/lib/WebGLLayer.js\";class u{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return e(this._resources)?this._resources.object:null}get resources(){return e(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this.resourceFactory.recreateGeometry)return void this.recreate();const e=this.resourceFactory.view._stage;if(s(this._resources)||!e)return;const r=this._resources.object;this._resources.external.forEach((s=>{s.type===i.Geometry&&e.remove(s)})),r.removeAllGeometries();const t=this.resourceFactory.recreateGeometry(this._resources.external,r,this._resources.layer);e.addMany(t)}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this.resourceFactory,s=e.view,i=s._stage;if(!i)return;const u=new h({isPickable:!1,updatePolicy:o.SYNC});i.add(u);const n=new c({castShadow:!1}),l=e.createResources(n,u);l.forEach((e=>{i.add(e),e instanceof a&&i.loadImmediate(e)})),i.add(n),u.add(n);const _=e.cameraChanged?r((()=>s.state.camera),(s=>e.cameraChanged(s)),t):null;this._resources={layer:u,object:n,external:l,cameraHandle:_},this._syncVisible()}_destroyResources(){if(s(this._resources))return;const e=this.resourceFactory.view._stage;e?.remove(this._resources.object),e?.remove(this._resources.layer),this._resources.external.forEach((s=>{e?.remove(s),\"dispose\"in s&&s.dispose()})),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}_syncVisible(){s(this._resources)||this._resources.object.setVisible(this._visible)}}export{u as VisualElementResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}