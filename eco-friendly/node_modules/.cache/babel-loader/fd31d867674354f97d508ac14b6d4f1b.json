{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../../core/maybe.js\";\nimport { c as i, f as a } from \"../../../../../chunks/vec2f32.js\";\nimport { FADE_DURATION as r } from \"../../vectorTiles/decluttering/config.js\";\nimport { RotationAlignment as s, SymbolPlacement as n, TranslateAnchor as o } from \"../../vectorTiles/style/StyleDefinition.js\";\nimport { VTL_TEXTURE_BINDING_UNIT_SPRITES as l, VTL_TEXTURE_BINDING_UNIT_GLYPHS as f } from \"../definitions.js\";\nimport { WGLDrawPhase as u } from \"../enums.js\";\nimport { degToByte as m } from \"../GeometryUtils.js\";\nimport { u32to4Xu8 as p } from \"../number.js\";\nimport c from \"./WGLBrush.js\";\nimport { TextureSamplingMode as d, CompareFunction as y, PrimitiveType as g, DataType as _ } from \"../../../../webgl/enums.js\";\nconst h = 1 / 65536;\n\nclass M extends c {\n  constructor() {\n    super(...arguments), this._iconProgramOptions = {\n      id: !1,\n      sdf: !1\n    }, this._sdfProgramOptions = {\n      id: !1\n    }, this._spritesTextureSize = i();\n  }\n\n  dispose() {}\n\n  drawMany(e, t) {\n    const {\n      drawPhase: i,\n      styleLayerUID: a\n    } = e,\n          r = e.styleLayer;\n    let s;\n    i === u.HITTEST && (s = p(a + 1)), this._drawIcons(e, r, t, s), this._drawText(e, r, t, s);\n  }\n\n  _drawIcons(i, a, f, p) {\n    const {\n      context: c,\n      displayLevel: d,\n      drawPhase: y,\n      painter: g,\n      spriteMosaic: _,\n      state: h,\n      styleLayerUID: M,\n      requestRender: P,\n      allowDelayedRender: T\n    } = i,\n          U = a.iconMaterial,\n          E = g.vectorTilesMaterialManager;\n    let x,\n        v = !1;\n\n    for (const e of f) if (e.layerData.has(M) && (x = e.layerData.get(M), x.iconPerPageElementsMap.size > 0)) {\n      v = !0;\n      break;\n    }\n\n    if (!v) return;\n    const D = a.getPaintValue(\"icon-translate\", d),\n          I = a.getPaintValue(\"icon-translate-anchor\", d);\n    let R = a.getLayoutValue(\"icon-rotation-alignment\", d);\n    R === s.AUTO && (R = a.getLayoutValue(\"symbol-placement\", d) === n.POINT ? s.VIEWPORT : s.MAP);\n    const S = R === s.MAP,\n          V = a.getLayoutValue(\"icon-keep-upright\", d) && S,\n          w = x.isIconSDF,\n          A = y === u.HITTEST,\n          L = this._iconProgramOptions;\n    L.id = A, L.sdf = w;\n    const O = E.getMaterialProgram(c, U, L);\n    if (T && e(P) && !O.isCompiled) return void P();\n    c.useProgram(O), O.setUniformMatrix3fv(\"u_displayViewMat3\", R === s.MAP ? h.displayViewMat3 : h.displayMat3), O.setUniformMatrix3fv(\"u_displayMat3\", I === o.VIEWPORT ? h.displayMat3 : h.displayViewMat3), O.setUniform2fv(\"u_iconTranslation\", D), O.setUniform1f(\"u_depth\", a.z), O.setUniform1f(\"u_mapRotation\", m(h.rotation)), O.setUniform1f(\"u_keepUpright\", V ? 1 : 0), O.setUniform1f(\"u_level\", 10 * d), O.setUniform1i(\"u_texture\", l), O.setUniform1f(\"u_fadeDuration\", r / 1e3), A && O.setUniform4fv(\"u_id\", p);\n    let N = -1;\n\n    for (const e of f) {\n      if (!e.layerData.has(M)) continue;\n      if (e.key.level !== N && (N = e.key.level, U.setDataUniforms(O, d, a, N, _)), x = e.layerData.get(M), 0 === x.iconPerPageElementsMap.size) continue;\n      x.prepareForRendering(c), x.updateOpacityInfo();\n      const r = x.iconVertexArrayObject;\n\n      if (!t(r)) {\n        c.bindVAO(r), O.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), O.setUniform1f(\"u_time\", (performance.now() - x.lastOpacityUpdate) / 1e3);\n\n        for (const [t, a] of x.iconPerPageElementsMap) this._renderIconRange(i, O, a, t, e);\n      }\n    }\n  }\n\n  _renderIconRange(e, t, i, a, r) {\n    const {\n      context: s,\n      spriteMosaic: n\n    } = e;\n    this._spritesTextureSize[0] = n.getWidth(a) / 4, this._spritesTextureSize[1] = n.getHeight(a) / 4, t.setUniform2fv(\"u_mosaicSize\", this._spritesTextureSize), n.bind(s, d.LINEAR, a, l), s.setStencilTestEnabled(!0), s.setStencilFunction(y.GREATER, 255, 255), s.setStencilWriteMask(0), s.drawElements(g.TRIANGLES, i[1], _.UNSIGNED_INT, Uint32Array.BYTES_PER_ELEMENT * i[0]), r.triangleCount += i[1] / 3;\n  }\n\n  _drawText(i, l, p, c) {\n    const {\n      context: d,\n      displayLevel: g,\n      drawPhase: _,\n      glyphMosaic: M,\n      painter: P,\n      pixelRatio: T,\n      spriteMosaic: U,\n      state: E,\n      styleLayerUID: x,\n      requestRender: v,\n      allowDelayedRender: D\n    } = i,\n          I = l.textMaterial,\n          R = P.vectorTilesMaterialManager;\n    let S,\n        V = !1;\n\n    for (const e of p) if (e.layerData.has(x) && (S = e.layerData.get(x), S.glyphPerPageElementsMap.size > 0)) {\n      V = !0;\n      break;\n    }\n\n    if (!V) return;\n    const w = l.getPaintProperty(\"text-opacity\");\n    if (w && !w.isDataDriven && 0 === w.getValue(g)) return;\n    const A = l.getPaintProperty(\"text-color\"),\n          L = !A || A.isDataDriven || A.getValue(g)[3] > 0,\n          O = l.getPaintProperty(\"text-halo-width\"),\n          N = l.getPaintProperty(\"text-halo-color\"),\n          b = (!O || O.isDataDriven || O.getValue(g) > 0) && (!N || N.isDataDriven || N.getValue(g)[3] > 0);\n    if (!L && !b) return;\n    const z = 24 / 8;\n    let k = l.getLayoutValue(\"text-rotation-alignment\", g);\n    k === s.AUTO && (k = l.getLayoutValue(\"symbol-placement\", g) === n.POINT ? s.VIEWPORT : s.MAP);\n    const j = k === s.MAP,\n          G = l.getLayoutValue(\"text-keep-upright\", g) && j,\n          W = _ === u.HITTEST,\n          C = .8 * z / T;\n    this._glyphTextureSize || (this._glyphTextureSize = a(M.width / 4, M.height / 4));\n    const F = l.getPaintValue(\"text-translate\", g),\n          B = l.getPaintValue(\"text-translate-anchor\", g),\n          H = this._sdfProgramOptions;\n    H.id = W;\n    const Y = R.getMaterialProgram(d, I, H);\n    if (D && e(v) && !Y.isCompiled) return void v();\n    d.useProgram(Y), Y.setUniformMatrix3fv(\"u_displayViewMat3\", k === s.MAP ? E.displayViewMat3 : E.displayMat3), Y.setUniformMatrix3fv(\"u_displayMat3\", B === o.VIEWPORT ? E.displayMat3 : E.displayViewMat3), Y.setUniform2fv(\"u_textTranslation\", F), Y.setUniform1f(\"u_depth\", l.z + h), Y.setUniform2fv(\"u_mosaicSize\", this._glyphTextureSize), Y.setUniform1f(\"u_mapRotation\", m(E.rotation)), Y.setUniform1f(\"u_keepUpright\", G ? 1 : 0), Y.setUniform1f(\"u_level\", 10 * g), Y.setUniform1i(\"u_texture\", f), Y.setUniform1f(\"u_antialiasingWidth\", C), Y.setUniform1f(\"u_fadeDuration\", r / 1e3), W && Y.setUniform4fv(\"u_id\", c);\n    let q = -1;\n\n    for (const e of p) {\n      if (!e.layerData.has(x)) continue;\n      if (e.key.level !== q && (q = e.key.level, I.setDataUniforms(Y, g, l, q, U)), S = e.layerData.get(x), 0 === S.glyphPerPageElementsMap.size) continue;\n      S.prepareForRendering(d), S.updateOpacityInfo();\n      const i = S.textVertexArrayObject;\n      if (t(i)) continue;\n      d.bindVAO(i), Y.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), d.setStencilTestEnabled(!0), d.setStencilFunction(y.GREATER, 255, 255), d.setStencilWriteMask(0);\n      const a = (performance.now() - S.lastOpacityUpdate) / 1e3;\n      Y.setUniform1f(\"u_time\", a), S.glyphPerPageElementsMap.forEach((t, i) => {\n        this._renderGlyphRange(d, t, i, M, Y, b, L, e);\n      });\n    }\n  }\n\n  _renderGlyphRange(e, t, i, a, r, s, n, o) {\n    a.bind(e, d.LINEAR, i, f), s && (r.setUniform1f(\"u_halo\", 1), e.drawElements(g.TRIANGLES, t[1], _.UNSIGNED_INT, Uint32Array.BYTES_PER_ELEMENT * t[0]), o.triangleCount += t[1] / 3), n && (r.setUniform1f(\"u_halo\", 0), e.drawElements(g.TRIANGLES, t[1], _.UNSIGNED_INT, Uint32Array.BYTES_PER_ELEMENT * t[0]), o.triangleCount += t[1] / 3);\n  }\n\n}\n\nexport { M as WGLBrushVTLSymbol };","map":{"version":3,"names":["isSome","e","isNone","t","c","i","f","a","FADE_DURATION","r","RotationAlignment","s","SymbolPlacement","n","TranslateAnchor","o","VTL_TEXTURE_BINDING_UNIT_SPRITES","l","VTL_TEXTURE_BINDING_UNIT_GLYPHS","WGLDrawPhase","u","degToByte","m","u32to4Xu8","p","TextureSamplingMode","d","CompareFunction","y","PrimitiveType","g","DataType","_","h","M","constructor","arguments","_iconProgramOptions","id","sdf","_sdfProgramOptions","_spritesTextureSize","dispose","drawMany","drawPhase","styleLayerUID","styleLayer","HITTEST","_drawIcons","_drawText","context","displayLevel","painter","spriteMosaic","state","requestRender","P","allowDelayedRender","T","U","iconMaterial","E","vectorTilesMaterialManager","x","v","layerData","has","get","iconPerPageElementsMap","size","D","getPaintValue","I","R","getLayoutValue","AUTO","POINT","VIEWPORT","MAP","S","V","w","isIconSDF","A","L","O","getMaterialProgram","isCompiled","useProgram","setUniformMatrix3fv","displayViewMat3","displayMat3","setUniform2fv","setUniform1f","z","rotation","setUniform1i","setUniform4fv","N","key","level","setDataUniforms","prepareForRendering","updateOpacityInfo","iconVertexArrayObject","bindVAO","transforms","dvs","performance","now","lastOpacityUpdate","_renderIconRange","getWidth","getHeight","bind","LINEAR","setStencilTestEnabled","setStencilFunction","GREATER","setStencilWriteMask","drawElements","TRIANGLES","UNSIGNED_INT","Uint32Array","BYTES_PER_ELEMENT","triangleCount","glyphMosaic","pixelRatio","textMaterial","glyphPerPageElementsMap","getPaintProperty","isDataDriven","getValue","b","k","j","G","W","C","_glyphTextureSize","width","height","F","B","H","Y","q","textVertexArrayObject","forEach","_renderGlyphRange","WGLBrushVTLSymbol"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../core/maybe.js\";import{c as i,f as a}from\"../../../../../chunks/vec2f32.js\";import{FADE_DURATION as r}from\"../../vectorTiles/decluttering/config.js\";import{RotationAlignment as s,SymbolPlacement as n,TranslateAnchor as o}from\"../../vectorTiles/style/StyleDefinition.js\";import{VTL_TEXTURE_BINDING_UNIT_SPRITES as l,VTL_TEXTURE_BINDING_UNIT_GLYPHS as f}from\"../definitions.js\";import{WGLDrawPhase as u}from\"../enums.js\";import{degToByte as m}from\"../GeometryUtils.js\";import{u32to4Xu8 as p}from\"../number.js\";import c from\"./WGLBrush.js\";import{TextureSamplingMode as d,CompareFunction as y,PrimitiveType as g,DataType as _}from\"../../../../webgl/enums.js\";const h=1/65536;class M extends c{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=i()}dispose(){}drawMany(e,t){const{drawPhase:i,styleLayerUID:a}=e,r=e.styleLayer;let s;i===u.HITTEST&&(s=p(a+1)),this._drawIcons(e,r,t,s),this._drawText(e,r,t,s)}_drawIcons(i,a,f,p){const{context:c,displayLevel:d,drawPhase:y,painter:g,spriteMosaic:_,state:h,styleLayerUID:M,requestRender:P,allowDelayedRender:T}=i,U=a.iconMaterial,E=g.vectorTilesMaterialManager;let x,v=!1;for(const e of f)if(e.layerData.has(M)&&(x=e.layerData.get(M),x.iconPerPageElementsMap.size>0)){v=!0;break}if(!v)return;const D=a.getPaintValue(\"icon-translate\",d),I=a.getPaintValue(\"icon-translate-anchor\",d);let R=a.getLayoutValue(\"icon-rotation-alignment\",d);R===s.AUTO&&(R=a.getLayoutValue(\"symbol-placement\",d)===n.POINT?s.VIEWPORT:s.MAP);const S=R===s.MAP,V=a.getLayoutValue(\"icon-keep-upright\",d)&&S,w=x.isIconSDF,A=y===u.HITTEST,L=this._iconProgramOptions;L.id=A,L.sdf=w;const O=E.getMaterialProgram(c,U,L);if(T&&e(P)&&!O.isCompiled)return void P();c.useProgram(O),O.setUniformMatrix3fv(\"u_displayViewMat3\",R===s.MAP?h.displayViewMat3:h.displayMat3),O.setUniformMatrix3fv(\"u_displayMat3\",I===o.VIEWPORT?h.displayMat3:h.displayViewMat3),O.setUniform2fv(\"u_iconTranslation\",D),O.setUniform1f(\"u_depth\",a.z),O.setUniform1f(\"u_mapRotation\",m(h.rotation)),O.setUniform1f(\"u_keepUpright\",V?1:0),O.setUniform1f(\"u_level\",10*d),O.setUniform1i(\"u_texture\",l),O.setUniform1f(\"u_fadeDuration\",r/1e3),A&&O.setUniform4fv(\"u_id\",p);let N=-1;for(const e of f){if(!e.layerData.has(M))continue;if(e.key.level!==N&&(N=e.key.level,U.setDataUniforms(O,d,a,N,_)),x=e.layerData.get(M),0===x.iconPerPageElementsMap.size)continue;x.prepareForRendering(c),x.updateOpacityInfo();const r=x.iconVertexArrayObject;if(!t(r)){c.bindVAO(r),O.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),O.setUniform1f(\"u_time\",(performance.now()-x.lastOpacityUpdate)/1e3);for(const[t,a]of x.iconPerPageElementsMap)this._renderIconRange(i,O,a,t,e)}}}_renderIconRange(e,t,i,a,r){const{context:s,spriteMosaic:n}=e;this._spritesTextureSize[0]=n.getWidth(a)/4,this._spritesTextureSize[1]=n.getHeight(a)/4,t.setUniform2fv(\"u_mosaicSize\",this._spritesTextureSize),n.bind(s,d.LINEAR,a,l),s.setStencilTestEnabled(!0),s.setStencilFunction(y.GREATER,255,255),s.setStencilWriteMask(0),s.drawElements(g.TRIANGLES,i[1],_.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]),r.triangleCount+=i[1]/3}_drawText(i,l,p,c){const{context:d,displayLevel:g,drawPhase:_,glyphMosaic:M,painter:P,pixelRatio:T,spriteMosaic:U,state:E,styleLayerUID:x,requestRender:v,allowDelayedRender:D}=i,I=l.textMaterial,R=P.vectorTilesMaterialManager;let S,V=!1;for(const e of p)if(e.layerData.has(x)&&(S=e.layerData.get(x),S.glyphPerPageElementsMap.size>0)){V=!0;break}if(!V)return;const w=l.getPaintProperty(\"text-opacity\");if(w&&!w.isDataDriven&&0===w.getValue(g))return;const A=l.getPaintProperty(\"text-color\"),L=!A||A.isDataDriven||A.getValue(g)[3]>0,O=l.getPaintProperty(\"text-halo-width\"),N=l.getPaintProperty(\"text-halo-color\"),b=(!O||O.isDataDriven||O.getValue(g)>0)&&(!N||N.isDataDriven||N.getValue(g)[3]>0);if(!L&&!b)return;const z=24/8;let k=l.getLayoutValue(\"text-rotation-alignment\",g);k===s.AUTO&&(k=l.getLayoutValue(\"symbol-placement\",g)===n.POINT?s.VIEWPORT:s.MAP);const j=k===s.MAP,G=l.getLayoutValue(\"text-keep-upright\",g)&&j,W=_===u.HITTEST,C=.8*z/T;this._glyphTextureSize||(this._glyphTextureSize=a(M.width/4,M.height/4));const F=l.getPaintValue(\"text-translate\",g),B=l.getPaintValue(\"text-translate-anchor\",g),H=this._sdfProgramOptions;H.id=W;const Y=R.getMaterialProgram(d,I,H);if(D&&e(v)&&!Y.isCompiled)return void v();d.useProgram(Y),Y.setUniformMatrix3fv(\"u_displayViewMat3\",k===s.MAP?E.displayViewMat3:E.displayMat3),Y.setUniformMatrix3fv(\"u_displayMat3\",B===o.VIEWPORT?E.displayMat3:E.displayViewMat3),Y.setUniform2fv(\"u_textTranslation\",F),Y.setUniform1f(\"u_depth\",l.z+h),Y.setUniform2fv(\"u_mosaicSize\",this._glyphTextureSize),Y.setUniform1f(\"u_mapRotation\",m(E.rotation)),Y.setUniform1f(\"u_keepUpright\",G?1:0),Y.setUniform1f(\"u_level\",10*g),Y.setUniform1i(\"u_texture\",f),Y.setUniform1f(\"u_antialiasingWidth\",C),Y.setUniform1f(\"u_fadeDuration\",r/1e3),W&&Y.setUniform4fv(\"u_id\",c);let q=-1;for(const e of p){if(!e.layerData.has(x))continue;if(e.key.level!==q&&(q=e.key.level,I.setDataUniforms(Y,g,l,q,U)),S=e.layerData.get(x),0===S.glyphPerPageElementsMap.size)continue;S.prepareForRendering(d),S.updateOpacityInfo();const i=S.textVertexArrayObject;if(t(i))continue;d.bindVAO(i),Y.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),d.setStencilTestEnabled(!0),d.setStencilFunction(y.GREATER,255,255),d.setStencilWriteMask(0);const a=(performance.now()-S.lastOpacityUpdate)/1e3;Y.setUniform1f(\"u_time\",a),S.glyphPerPageElementsMap.forEach(((t,i)=>{this._renderGlyphRange(d,t,i,M,Y,b,L,e)}))}}_renderGlyphRange(e,t,i,a,r,s,n,o){a.bind(e,d.LINEAR,i,f),s&&(r.setUniform1f(\"u_halo\",1),e.drawElements(g.TRIANGLES,t[1],_.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),o.triangleCount+=t[1]/3),n&&(r.setUniform1f(\"u_halo\",0),e.drawElements(g.TRIANGLES,t[1],_.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),o.triangleCount+=t[1]/3)}}export{M as WGLBrushVTLSymbol};\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,8BAAnC;AAAkE,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,QAAyB,kCAAzB;AAA4D,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,0CAA9B;AAAyE,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,eAAe,IAAIC,CAAjD,EAAmDC,eAAe,IAAIC,CAAtE,QAA4E,4CAA5E;AAAyH,SAAOC,gCAAgC,IAAIC,CAA3C,EAA6CC,+BAA+B,IAAIZ,CAAhF,QAAsF,mBAAtF;AAA0G,SAAOa,YAAY,IAAIC,CAAvB,QAA6B,aAA7B;AAA2C,SAAOC,SAAS,IAAIC,CAApB,QAA0B,qBAA1B;AAAgD,SAAOC,SAAS,IAAIC,CAApB,QAA0B,cAA1B;AAAyC,OAAOpB,CAAP,MAAa,eAAb;AAA6B,SAAOqB,mBAAmB,IAAIC,CAA9B,EAAgCC,eAAe,IAAIC,CAAnD,EAAqDC,aAAa,IAAIC,CAAtE,EAAwEC,QAAQ,IAAIC,CAApF,QAA0F,4BAA1F;AAAuH,MAAMC,CAAC,GAAC,IAAE,KAAV;;AAAgB,MAAMC,CAAN,SAAgB9B,CAAhB,CAAiB;EAAC+B,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,mBAAL,GAAyB;MAACC,EAAE,EAAC,CAAC,CAAL;MAAOC,GAAG,EAAC,CAAC;IAAZ,CAA7C,EAA4D,KAAKC,kBAAL,GAAwB;MAACF,EAAE,EAAC,CAAC;IAAL,CAApF,EAA4F,KAAKG,mBAAL,GAAyBpC,CAAC,EAAtH;EAAyH;;EAAAqC,OAAO,GAAE,CAAE;;EAAAC,QAAQ,CAAC1C,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAK;MAACyC,SAAS,EAACvC,CAAX;MAAawC,aAAa,EAACtC;IAA3B,IAA8BN,CAAnC;IAAA,MAAqCQ,CAAC,GAACR,CAAC,CAAC6C,UAAzC;IAAoD,IAAInC,CAAJ;IAAMN,CAAC,KAAGe,CAAC,CAAC2B,OAAN,KAAgBpC,CAAC,GAACa,CAAC,CAACjB,CAAC,GAAC,CAAH,CAAnB,GAA0B,KAAKyC,UAAL,CAAgB/C,CAAhB,EAAkBQ,CAAlB,EAAoBN,CAApB,EAAsBQ,CAAtB,CAA1B,EAAmD,KAAKsC,SAAL,CAAehD,CAAf,EAAiBQ,CAAjB,EAAmBN,CAAnB,EAAqBQ,CAArB,CAAnD;EAA2E;;EAAAqC,UAAU,CAAC3C,CAAD,EAAGE,CAAH,EAAKD,CAAL,EAAOkB,CAAP,EAAS;IAAC,MAAK;MAAC0B,OAAO,EAAC9C,CAAT;MAAW+C,YAAY,EAACzB,CAAxB;MAA0BkB,SAAS,EAAChB,CAApC;MAAsCwB,OAAO,EAACtB,CAA9C;MAAgDuB,YAAY,EAACrB,CAA7D;MAA+DsB,KAAK,EAACrB,CAArE;MAAuEY,aAAa,EAACX,CAArF;MAAuFqB,aAAa,EAACC,CAArG;MAAuGC,kBAAkB,EAACC;IAA1H,IAA6HrD,CAAlI;IAAA,MAAoIsD,CAAC,GAACpD,CAAC,CAACqD,YAAxI;IAAA,MAAqJC,CAAC,GAAC/B,CAAC,CAACgC,0BAAzJ;IAAoL,IAAIC,CAAJ;IAAA,IAAMC,CAAC,GAAC,CAAC,CAAT;;IAAW,KAAI,MAAM/D,CAAV,IAAeK,CAAf,EAAiB,IAAGL,CAAC,CAACgE,SAAF,CAAYC,GAAZ,CAAgBhC,CAAhB,MAAqB6B,CAAC,GAAC9D,CAAC,CAACgE,SAAF,CAAYE,GAAZ,CAAgBjC,CAAhB,CAAF,EAAqB6B,CAAC,CAACK,sBAAF,CAAyBC,IAAzB,GAA8B,CAAxE,CAAH,EAA8E;MAACL,CAAC,GAAC,CAAC,CAAH;MAAK;IAAM;;IAAA,IAAG,CAACA,CAAJ,EAAM;IAAO,MAAMM,CAAC,GAAC/D,CAAC,CAACgE,aAAF,CAAgB,gBAAhB,EAAiC7C,CAAjC,CAAR;IAAA,MAA4C8C,CAAC,GAACjE,CAAC,CAACgE,aAAF,CAAgB,uBAAhB,EAAwC7C,CAAxC,CAA9C;IAAyF,IAAI+C,CAAC,GAAClE,CAAC,CAACmE,cAAF,CAAiB,yBAAjB,EAA2ChD,CAA3C,CAAN;IAAoD+C,CAAC,KAAG9D,CAAC,CAACgE,IAAN,KAAaF,CAAC,GAAClE,CAAC,CAACmE,cAAF,CAAiB,kBAAjB,EAAoChD,CAApC,MAAyCb,CAAC,CAAC+D,KAA3C,GAAiDjE,CAAC,CAACkE,QAAnD,GAA4DlE,CAAC,CAACmE,GAA7E;IAAkF,MAAMC,CAAC,GAACN,CAAC,KAAG9D,CAAC,CAACmE,GAAd;IAAA,MAAkBE,CAAC,GAACzE,CAAC,CAACmE,cAAF,CAAiB,mBAAjB,EAAqChD,CAArC,KAAyCqD,CAA7D;IAAA,MAA+DE,CAAC,GAAClB,CAAC,CAACmB,SAAnE;IAAA,MAA6EC,CAAC,GAACvD,CAAC,KAAGR,CAAC,CAAC2B,OAArF;IAAA,MAA6FqC,CAAC,GAAC,KAAK/C,mBAApG;IAAwH+C,CAAC,CAAC9C,EAAF,GAAK6C,CAAL,EAAOC,CAAC,CAAC7C,GAAF,GAAM0C,CAAb;IAAe,MAAMI,CAAC,GAACxB,CAAC,CAACyB,kBAAF,CAAqBlF,CAArB,EAAuBuD,CAAvB,EAAyByB,CAAzB,CAAR;IAAoC,IAAG1B,CAAC,IAAEzD,CAAC,CAACuD,CAAD,CAAJ,IAAS,CAAC6B,CAAC,CAACE,UAAf,EAA0B,OAAO,KAAK/B,CAAC,EAAb;IAAgBpD,CAAC,CAACoF,UAAF,CAAaH,CAAb,GAAgBA,CAAC,CAACI,mBAAF,CAAsB,mBAAtB,EAA0ChB,CAAC,KAAG9D,CAAC,CAACmE,GAAN,GAAU7C,CAAC,CAACyD,eAAZ,GAA4BzD,CAAC,CAAC0D,WAAxE,CAAhB,EAAqGN,CAAC,CAACI,mBAAF,CAAsB,eAAtB,EAAsCjB,CAAC,KAAGzD,CAAC,CAAC8D,QAAN,GAAe5C,CAAC,CAAC0D,WAAjB,GAA6B1D,CAAC,CAACyD,eAArE,CAArG,EAA2LL,CAAC,CAACO,aAAF,CAAgB,mBAAhB,EAAoCtB,CAApC,CAA3L,EAAkOe,CAAC,CAACQ,YAAF,CAAe,SAAf,EAAyBtF,CAAC,CAACuF,CAA3B,CAAlO,EAAgQT,CAAC,CAACQ,YAAF,CAAe,eAAf,EAA+BvE,CAAC,CAACW,CAAC,CAAC8D,QAAH,CAAhC,CAAhQ,EAA8SV,CAAC,CAACQ,YAAF,CAAe,eAAf,EAA+Bb,CAAC,GAAC,CAAD,GAAG,CAAnC,CAA9S,EAAoVK,CAAC,CAACQ,YAAF,CAAe,SAAf,EAAyB,KAAGnE,CAA5B,CAApV,EAAmX2D,CAAC,CAACW,YAAF,CAAe,WAAf,EAA2B/E,CAA3B,CAAnX,EAAiZoE,CAAC,CAACQ,YAAF,CAAe,gBAAf,EAAgCpF,CAAC,GAAC,GAAlC,CAAjZ,EAAwb0E,CAAC,IAAEE,CAAC,CAACY,aAAF,CAAgB,MAAhB,EAAuBzE,CAAvB,CAA3b;IAAqd,IAAI0E,CAAC,GAAC,CAAC,CAAP;;IAAS,KAAI,MAAMjG,CAAV,IAAeK,CAAf,EAAiB;MAAC,IAAG,CAACL,CAAC,CAACgE,SAAF,CAAYC,GAAZ,CAAgBhC,CAAhB,CAAJ,EAAuB;MAAS,IAAGjC,CAAC,CAACkG,GAAF,CAAMC,KAAN,KAAcF,CAAd,KAAkBA,CAAC,GAACjG,CAAC,CAACkG,GAAF,CAAMC,KAAR,EAAczC,CAAC,CAAC0C,eAAF,CAAkBhB,CAAlB,EAAoB3D,CAApB,EAAsBnB,CAAtB,EAAwB2F,CAAxB,EAA0BlE,CAA1B,CAAhC,GAA8D+B,CAAC,GAAC9D,CAAC,CAACgE,SAAF,CAAYE,GAAZ,CAAgBjC,CAAhB,CAAhE,EAAmF,MAAI6B,CAAC,CAACK,sBAAF,CAAyBC,IAAnH,EAAwH;MAASN,CAAC,CAACuC,mBAAF,CAAsBlG,CAAtB,GAAyB2D,CAAC,CAACwC,iBAAF,EAAzB;MAA+C,MAAM9F,CAAC,GAACsD,CAAC,CAACyC,qBAAV;;MAAgC,IAAG,CAACrG,CAAC,CAACM,CAAD,CAAL,EAAS;QAACL,CAAC,CAACqG,OAAF,CAAUhG,CAAV,GAAa4E,CAAC,CAACI,mBAAF,CAAsB,WAAtB,EAAkCxF,CAAC,CAACyG,UAAF,CAAaC,GAA/C,CAAb,EAAiEtB,CAAC,CAACQ,YAAF,CAAe,QAAf,EAAwB,CAACe,WAAW,CAACC,GAAZ,KAAkB9C,CAAC,CAAC+C,iBAArB,IAAwC,GAAhE,CAAjE;;QAAsI,KAAI,MAAK,CAAC3G,CAAD,EAAGI,CAAH,CAAT,IAAiBwD,CAAC,CAACK,sBAAnB,EAA0C,KAAK2C,gBAAL,CAAsB1G,CAAtB,EAAwBgF,CAAxB,EAA0B9E,CAA1B,EAA4BJ,CAA5B,EAA8BF,CAA9B;MAAiC;IAAC;EAAC;;EAAA8G,gBAAgB,CAAC9G,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAW;IAAC,MAAK;MAACyC,OAAO,EAACvC,CAAT;MAAW0C,YAAY,EAACxC;IAAxB,IAA2BZ,CAAhC;IAAkC,KAAKwC,mBAAL,CAAyB,CAAzB,IAA4B5B,CAAC,CAACmG,QAAF,CAAWzG,CAAX,IAAc,CAA1C,EAA4C,KAAKkC,mBAAL,CAAyB,CAAzB,IAA4B5B,CAAC,CAACoG,SAAF,CAAY1G,CAAZ,IAAe,CAAvF,EAAyFJ,CAAC,CAACyF,aAAF,CAAgB,cAAhB,EAA+B,KAAKnD,mBAApC,CAAzF,EAAkJ5B,CAAC,CAACqG,IAAF,CAAOvG,CAAP,EAASe,CAAC,CAACyF,MAAX,EAAkB5G,CAAlB,EAAoBU,CAApB,CAAlJ,EAAyKN,CAAC,CAACyG,qBAAF,CAAwB,CAAC,CAAzB,CAAzK,EAAqMzG,CAAC,CAAC0G,kBAAF,CAAqBzF,CAAC,CAAC0F,OAAvB,EAA+B,GAA/B,EAAmC,GAAnC,CAArM,EAA6O3G,CAAC,CAAC4G,mBAAF,CAAsB,CAAtB,CAA7O,EAAsQ5G,CAAC,CAAC6G,YAAF,CAAe1F,CAAC,CAAC2F,SAAjB,EAA2BpH,CAAC,CAAC,CAAD,CAA5B,EAAgC2B,CAAC,CAAC0F,YAAlC,EAA+CC,WAAW,CAACC,iBAAZ,GAA8BvH,CAAC,CAAC,CAAD,CAA9E,CAAtQ,EAAyVI,CAAC,CAACoH,aAAF,IAAiBxH,CAAC,CAAC,CAAD,CAAD,GAAK,CAA/W;EAAiX;;EAAA4C,SAAS,CAAC5C,CAAD,EAAGY,CAAH,EAAKO,CAAL,EAAOpB,CAAP,EAAS;IAAC,MAAK;MAAC8C,OAAO,EAACxB,CAAT;MAAWyB,YAAY,EAACrB,CAAxB;MAA0Bc,SAAS,EAACZ,CAApC;MAAsC8F,WAAW,EAAC5F,CAAlD;MAAoDkB,OAAO,EAACI,CAA5D;MAA8DuE,UAAU,EAACrE,CAAzE;MAA2EL,YAAY,EAACM,CAAxF;MAA0FL,KAAK,EAACO,CAAhG;MAAkGhB,aAAa,EAACkB,CAAhH;MAAkHR,aAAa,EAACS,CAAhI;MAAkIP,kBAAkB,EAACa;IAArJ,IAAwJjE,CAA7J;IAAA,MAA+JmE,CAAC,GAACvD,CAAC,CAAC+G,YAAnK;IAAA,MAAgLvD,CAAC,GAACjB,CAAC,CAACM,0BAApL;IAA+M,IAAIiB,CAAJ;IAAA,IAAMC,CAAC,GAAC,CAAC,CAAT;;IAAW,KAAI,MAAM/E,CAAV,IAAeuB,CAAf,EAAiB,IAAGvB,CAAC,CAACgE,SAAF,CAAYC,GAAZ,CAAgBH,CAAhB,MAAqBgB,CAAC,GAAC9E,CAAC,CAACgE,SAAF,CAAYE,GAAZ,CAAgBJ,CAAhB,CAAF,EAAqBgB,CAAC,CAACkD,uBAAF,CAA0B5D,IAA1B,GAA+B,CAAzE,CAAH,EAA+E;MAACW,CAAC,GAAC,CAAC,CAAH;MAAK;IAAM;;IAAA,IAAG,CAACA,CAAJ,EAAM;IAAO,MAAMC,CAAC,GAAChE,CAAC,CAACiH,gBAAF,CAAmB,cAAnB,CAAR;IAA2C,IAAGjD,CAAC,IAAE,CAACA,CAAC,CAACkD,YAAN,IAAoB,MAAIlD,CAAC,CAACmD,QAAF,CAAWtG,CAAX,CAA3B,EAAyC;IAAO,MAAMqD,CAAC,GAAClE,CAAC,CAACiH,gBAAF,CAAmB,YAAnB,CAAR;IAAA,MAAyC9C,CAAC,GAAC,CAACD,CAAD,IAAIA,CAAC,CAACgD,YAAN,IAAoBhD,CAAC,CAACiD,QAAF,CAAWtG,CAAX,EAAc,CAAd,IAAiB,CAAhF;IAAA,MAAkFuD,CAAC,GAACpE,CAAC,CAACiH,gBAAF,CAAmB,iBAAnB,CAApF;IAAA,MAA0HhC,CAAC,GAACjF,CAAC,CAACiH,gBAAF,CAAmB,iBAAnB,CAA5H;IAAA,MAAkKG,CAAC,GAAC,CAAC,CAAChD,CAAD,IAAIA,CAAC,CAAC8C,YAAN,IAAoB9C,CAAC,CAAC+C,QAAF,CAAWtG,CAAX,IAAc,CAAnC,MAAwC,CAACoE,CAAD,IAAIA,CAAC,CAACiC,YAAN,IAAoBjC,CAAC,CAACkC,QAAF,CAAWtG,CAAX,EAAc,CAAd,IAAiB,CAA7E,CAApK;IAAoP,IAAG,CAACsD,CAAD,IAAI,CAACiD,CAAR,EAAU;IAAO,MAAMvC,CAAC,GAAC,KAAG,CAAX;IAAa,IAAIwC,CAAC,GAACrH,CAAC,CAACyD,cAAF,CAAiB,yBAAjB,EAA2C5C,CAA3C,CAAN;IAAoDwG,CAAC,KAAG3H,CAAC,CAACgE,IAAN,KAAa2D,CAAC,GAACrH,CAAC,CAACyD,cAAF,CAAiB,kBAAjB,EAAoC5C,CAApC,MAAyCjB,CAAC,CAAC+D,KAA3C,GAAiDjE,CAAC,CAACkE,QAAnD,GAA4DlE,CAAC,CAACmE,GAA7E;IAAkF,MAAMyD,CAAC,GAACD,CAAC,KAAG3H,CAAC,CAACmE,GAAd;IAAA,MAAkB0D,CAAC,GAACvH,CAAC,CAACyD,cAAF,CAAiB,mBAAjB,EAAqC5C,CAArC,KAAyCyG,CAA7D;IAAA,MAA+DE,CAAC,GAACzG,CAAC,KAAGZ,CAAC,CAAC2B,OAAvE;IAAA,MAA+E2F,CAAC,GAAC,KAAG5C,CAAH,GAAKpC,CAAtF;IAAwF,KAAKiF,iBAAL,KAAyB,KAAKA,iBAAL,GAAuBpI,CAAC,CAAC2B,CAAC,CAAC0G,KAAF,GAAQ,CAAT,EAAW1G,CAAC,CAAC2G,MAAF,GAAS,CAApB,CAAjD;IAAyE,MAAMC,CAAC,GAAC7H,CAAC,CAACsD,aAAF,CAAgB,gBAAhB,EAAiCzC,CAAjC,CAAR;IAAA,MAA4CiH,CAAC,GAAC9H,CAAC,CAACsD,aAAF,CAAgB,uBAAhB,EAAwCzC,CAAxC,CAA9C;IAAA,MAAyFkH,CAAC,GAAC,KAAKxG,kBAAhG;IAAmHwG,CAAC,CAAC1G,EAAF,GAAKmG,CAAL;IAAO,MAAMQ,CAAC,GAACxE,CAAC,CAACa,kBAAF,CAAqB5D,CAArB,EAAuB8C,CAAvB,EAAyBwE,CAAzB,CAAR;IAAoC,IAAG1E,CAAC,IAAErE,CAAC,CAAC+D,CAAD,CAAJ,IAAS,CAACiF,CAAC,CAAC1D,UAAf,EAA0B,OAAO,KAAKvB,CAAC,EAAb;IAAgBtC,CAAC,CAAC8D,UAAF,CAAayD,CAAb,GAAgBA,CAAC,CAACxD,mBAAF,CAAsB,mBAAtB,EAA0C6C,CAAC,KAAG3H,CAAC,CAACmE,GAAN,GAAUjB,CAAC,CAAC6B,eAAZ,GAA4B7B,CAAC,CAAC8B,WAAxE,CAAhB,EAAqGsD,CAAC,CAACxD,mBAAF,CAAsB,eAAtB,EAAsCsD,CAAC,KAAGhI,CAAC,CAAC8D,QAAN,GAAehB,CAAC,CAAC8B,WAAjB,GAA6B9B,CAAC,CAAC6B,eAArE,CAArG,EAA2LuD,CAAC,CAACrD,aAAF,CAAgB,mBAAhB,EAAoCkD,CAApC,CAA3L,EAAkOG,CAAC,CAACpD,YAAF,CAAe,SAAf,EAAyB5E,CAAC,CAAC6E,CAAF,GAAI7D,CAA7B,CAAlO,EAAkQgH,CAAC,CAACrD,aAAF,CAAgB,cAAhB,EAA+B,KAAK+C,iBAApC,CAAlQ,EAAyTM,CAAC,CAACpD,YAAF,CAAe,eAAf,EAA+BvE,CAAC,CAACuC,CAAC,CAACkC,QAAH,CAAhC,CAAzT,EAAuWkD,CAAC,CAACpD,YAAF,CAAe,eAAf,EAA+B2C,CAAC,GAAC,CAAD,GAAG,CAAnC,CAAvW,EAA6YS,CAAC,CAACpD,YAAF,CAAe,SAAf,EAAyB,KAAG/D,CAA5B,CAA7Y,EAA4amH,CAAC,CAACjD,YAAF,CAAe,WAAf,EAA2B1F,CAA3B,CAA5a,EAA0c2I,CAAC,CAACpD,YAAF,CAAe,qBAAf,EAAqC6C,CAArC,CAA1c,EAAkfO,CAAC,CAACpD,YAAF,CAAe,gBAAf,EAAgCpF,CAAC,GAAC,GAAlC,CAAlf,EAAyhBgI,CAAC,IAAEQ,CAAC,CAAChD,aAAF,CAAgB,MAAhB,EAAuB7F,CAAvB,CAA5hB;IAAsjB,IAAI8I,CAAC,GAAC,CAAC,CAAP;;IAAS,KAAI,MAAMjJ,CAAV,IAAeuB,CAAf,EAAiB;MAAC,IAAG,CAACvB,CAAC,CAACgE,SAAF,CAAYC,GAAZ,CAAgBH,CAAhB,CAAJ,EAAuB;MAAS,IAAG9D,CAAC,CAACkG,GAAF,CAAMC,KAAN,KAAc8C,CAAd,KAAkBA,CAAC,GAACjJ,CAAC,CAACkG,GAAF,CAAMC,KAAR,EAAc5B,CAAC,CAAC6B,eAAF,CAAkB4C,CAAlB,EAAoBnH,CAApB,EAAsBb,CAAtB,EAAwBiI,CAAxB,EAA0BvF,CAA1B,CAAhC,GAA8DoB,CAAC,GAAC9E,CAAC,CAACgE,SAAF,CAAYE,GAAZ,CAAgBJ,CAAhB,CAAhE,EAAmF,MAAIgB,CAAC,CAACkD,uBAAF,CAA0B5D,IAApH,EAAyH;MAASU,CAAC,CAACuB,mBAAF,CAAsB5E,CAAtB,GAAyBqD,CAAC,CAACwB,iBAAF,EAAzB;MAA+C,MAAMlG,CAAC,GAAC0E,CAAC,CAACoE,qBAAV;MAAgC,IAAGhJ,CAAC,CAACE,CAAD,CAAJ,EAAQ;MAASqB,CAAC,CAAC+E,OAAF,CAAUpG,CAAV,GAAa4I,CAAC,CAACxD,mBAAF,CAAsB,WAAtB,EAAkCxF,CAAC,CAACyG,UAAF,CAAaC,GAA/C,CAAb,EAAiEjF,CAAC,CAAC0F,qBAAF,CAAwB,CAAC,CAAzB,CAAjE,EAA6F1F,CAAC,CAAC2F,kBAAF,CAAqBzF,CAAC,CAAC0F,OAAvB,EAA+B,GAA/B,EAAmC,GAAnC,CAA7F,EAAqI5F,CAAC,CAAC6F,mBAAF,CAAsB,CAAtB,CAArI;MAA8J,MAAMhH,CAAC,GAAC,CAACqG,WAAW,CAACC,GAAZ,KAAkB9B,CAAC,CAAC+B,iBAArB,IAAwC,GAAhD;MAAoDmC,CAAC,CAACpD,YAAF,CAAe,QAAf,EAAwBtF,CAAxB,GAA2BwE,CAAC,CAACkD,uBAAF,CAA0BmB,OAA1B,CAAmC,CAACjJ,CAAD,EAAGE,CAAH,KAAO;QAAC,KAAKgJ,iBAAL,CAAuB3H,CAAvB,EAAyBvB,CAAzB,EAA2BE,CAA3B,EAA6B6B,CAA7B,EAA+B+G,CAA/B,EAAiCZ,CAAjC,EAAmCjD,CAAnC,EAAqCnF,CAArC;MAAwC,CAAnF,CAA3B;IAAiH;EAAC;;EAAAoJ,iBAAiB,CAACpJ,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;IAACR,CAAC,CAAC2G,IAAF,CAAOjH,CAAP,EAASyB,CAAC,CAACyF,MAAX,EAAkB9G,CAAlB,EAAoBC,CAApB,GAAuBK,CAAC,KAAGF,CAAC,CAACoF,YAAF,CAAe,QAAf,EAAwB,CAAxB,GAA2B5F,CAAC,CAACuH,YAAF,CAAe1F,CAAC,CAAC2F,SAAjB,EAA2BtH,CAAC,CAAC,CAAD,CAA5B,EAAgC6B,CAAC,CAAC0F,YAAlC,EAA+CC,WAAW,CAACC,iBAAZ,GAA8BzH,CAAC,CAAC,CAAD,CAA9E,CAA3B,EAA8GY,CAAC,CAAC8G,aAAF,IAAiB1H,CAAC,CAAC,CAAD,CAAD,GAAK,CAAvI,CAAxB,EAAkKU,CAAC,KAAGJ,CAAC,CAACoF,YAAF,CAAe,QAAf,EAAwB,CAAxB,GAA2B5F,CAAC,CAACuH,YAAF,CAAe1F,CAAC,CAAC2F,SAAjB,EAA2BtH,CAAC,CAAC,CAAD,CAA5B,EAAgC6B,CAAC,CAAC0F,YAAlC,EAA+CC,WAAW,CAACC,iBAAZ,GAA8BzH,CAAC,CAAC,CAAD,CAA9E,CAA3B,EAA8GY,CAAC,CAAC8G,aAAF,IAAiB1H,CAAC,CAAC,CAAD,CAAD,GAAK,CAAvI,CAAnK;EAA6S;;AAA1jK;;AAA2jK,SAAO+B,CAAC,IAAIoH,iBAAZ"},"metadata":{},"sourceType":"module"}