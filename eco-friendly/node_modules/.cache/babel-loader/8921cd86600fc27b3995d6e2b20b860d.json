{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { isNone as r, isSome as s } from \"../../../core/maybe.js\";\nimport { watch as i } from \"../../../core/reactiveUtils.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../../../rest/support/FeatureSet.js\";\nimport c from \"./FeatureLayerView2D.js\";\nimport { toJSONGeometryType as p } from \"./support/util.js\";\n\nfunction l(e, t) {\n  if (r(e) && r(t)) return null;\n  const i = {};\n  return s(t) && (i.geometry = t.toJSON()), s(e) && (i.where = e), i;\n}\n\nlet d = class extends c {\n  constructor() {\n    super(...arguments), this._enabledDataReceived = !1, this.errorString = null, this.connectionStatus = \"disconnected\";\n  }\n\n  initialize() {\n    this.handles.add([i(() => this.layer?.purgeOptions, () => this._update()), i(() => this.suspended, e => {\n      e ? this._proxy.pauseStream() : this._proxy.resumeStream();\n    })]);\n  }\n\n  get connectionError() {\n    if (this.errorString) return new t(\"stream-controller\", this.errorString);\n  }\n\n  on(e, t) {\n    \"data-received\" === e && (this._enabledDataReceived = !0, this._proxy.enableEvent(\"data-received\", !0));\n    const r = super.on(e, t),\n          s = this;\n    return {\n      remove() {\n        r.remove(), \"data-received\" === e && (s._proxy.closed || s.hasEventListener(\"data-received\") || s._proxy.enableEvent(\"data-received\", !1));\n      }\n\n    };\n  }\n\n  queryLatestObservations(e, r) {\n    if (!(this.layer.timeInfo.endField || this.layer.timeInfo.startField)) throw new t(\"streamlayer-no-timeField\", \"queryLatestObservation can only be used with services that define a TrackIdField\");\n    return this._proxy.queryLatestObservations(this._cleanUpQuery(e), r).then(e => {\n      const t = n.fromJSON(e);\n      return t.features.forEach(e => {\n        e.layer = this.layer, e.sourceLayer = this.layer;\n      }), t;\n    });\n  }\n\n  detach() {\n    super.detach(), this.connectionStatus = \"disconnected\";\n  }\n\n  _createClientOptions() {\n    return { ...super._createClientOptions(),\n      setProperty: e => {\n        this.set(e.propertyName, e.value);\n      }\n    };\n  }\n\n  _createTileRendererHash(e) {\n    const t = `${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(l(this.layer.definitionExpression, this.layer.geometryDefinition))})`;\n    return super._createTileRendererHash(e) + t;\n  }\n\n  async _createServiceOptions() {\n    const e = this.layer,\n          {\n      objectIdField: t\n    } = e,\n          r = e.fields.map(e => e.toJSON()),\n          s = p(e.geometryType),\n          i = e.timeInfo && e.timeInfo.toJSON() || null,\n          o = e.spatialReference ? e.spatialReference.toJSON() : null;\n    return {\n      type: \"stream\",\n      fields: r,\n      geometryType: s,\n      objectIdField: t,\n      timeInfo: i,\n      source: this.layer.parsedUrl,\n      serviceFilter: l(this.layer.definitionExpression, this.layer.geometryDefinition),\n      purgeOptions: this.layer.purgeOptions.toJSON(),\n      enableDataReceived: this._enabledDataReceived,\n      spatialReference: o,\n      maxReconnectionAttempts: this.layer.maxReconnectionAttempts,\n      maxReconnectionInterval: this.layer.maxReconnectionInterval,\n      updateInterval: this.layer.updateInterval,\n      customParameters: e.customParameters\n    };\n  }\n\n};\ne([o()], d.prototype, \"errorString\", void 0), e([o({\n  readOnly: !0\n})], d.prototype, \"connectionError\", null), e([o()], d.prototype, \"connectionStatus\", void 0), d = e([a(\"esri.views.2d.layers.StreamLayerView2D\")], d);\nconst u = d;\nexport { u as default };","map":{"version":3,"names":["_","e","t","isNone","r","isSome","s","watch","i","property","o","subclass","a","n","c","toJSONGeometryType","p","l","geometry","toJSON","where","d","constructor","arguments","_enabledDataReceived","errorString","connectionStatus","initialize","handles","add","layer","purgeOptions","_update","suspended","_proxy","pauseStream","resumeStream","connectionError","on","enableEvent","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","_cleanUpQuery","then","fromJSON","features","forEach","sourceLayer","detach","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","definitionExpression","geometryDefinition","_createServiceOptions","objectIdField","fields","map","geometryType","spatialReference","type","source","parsedUrl","serviceFilter","enableDataReceived","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","customParameters","prototype","readOnly","u","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{isNone as r,isSome as s}from\"../../../core/maybe.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as p}from\"./support/util.js\";function l(e,t){if(r(e)&&r(t))return null;const i={};return s(t)&&(i.geometry=t.toJSON()),s(e)&&(i.where=e),i}let d=class extends c{constructor(){super(...arguments),this._enabledDataReceived=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.handles.add([i((()=>this.layer?.purgeOptions),(()=>this._update())),i((()=>this.suspended),(e=>{e?this._proxy.pauseStream():this._proxy.resumeStream()}))])}get connectionError(){if(this.errorString)return new t(\"stream-controller\",this.errorString)}on(e,t){\"data-received\"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent(\"data-received\",!0));const r=super.on(e,t),s=this;return{remove(){r.remove(),\"data-received\"===e&&(s._proxy.closed||s.hasEventListener(\"data-received\")||s._proxy.enableEvent(\"data-received\",!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo.endField||this.layer.timeInfo.startField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=n.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus=\"disconnected\"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(l(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=p(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,o=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:l(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([o()],d.prototype,\"errorString\",void 0),e([o({readOnly:!0})],d.prototype,\"connectionError\",null),e([o()],d.prototype,\"connectionStatus\",void 0),d=e([a(\"esri.views.2d.layers.StreamLayerView2D\")],d);const u=d;export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}