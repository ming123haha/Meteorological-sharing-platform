{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Error.js\";\nimport { isNone as t, isSome as o } from \"../../core/maybe.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as p } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../../geometry/Point.js\";\nimport { combinedViewLayerTimeExtentProperty as a } from \"../../layers/support/commonProperties.js\";\nimport n from \"../../rest/support/Query.js\";\nimport { getFetchPopupTemplate as u } from \"./support/popupUtils.js\";\n\nconst m = m => {\n  let c = class extends m {\n    constructor() {\n      super(...arguments), this.view = null;\n    }\n\n    async fetchPopupFeatures(e, s) {\n      const {\n        layer: p\n      } = this;\n      if (!e) throw new r(\"imagerylayerview:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: p\n      });\n      const {\n        popupEnabled: a\n      } = p,\n            m = u(p, s);\n      if (!a || t(m)) throw new r(\"imagerylayerview:fetchPopupFeatures\", \"Missing required popupTemplate or popupEnabled\", {\n        popupEnabled: a,\n        popupTemplate: m\n      });\n      const c = await m.getRequiredFields(),\n            l = new n();\n      l.timeExtent = this.timeExtent, l.geometry = e, l.outFields = c, l.outSpatialReference = e.spatialReference;\n      const y = this.view.resolution,\n            w = \"2d\" === this.view.type ? new i(y, y, this.view.spatialReference) : new i(.5 * y, .5 * y, this.view.spatialReference),\n            {\n        returnTopmostRaster: d,\n        showNoDataRecords: h\n      } = m.layerOptions || {\n        returnTopmostRaster: !0,\n        showNoDataRecords: !1\n      },\n            f = {\n        returnDomainValues: !0,\n        returnTopmostRaster: d,\n        pixelSize: w,\n        showNoDataRecords: h,\n        signal: o(s) ? s.signal : null\n      };\n      return p.queryVisibleRasters(l, f).then(e => e);\n    }\n\n    canResume() {\n      return !!super.canResume() && !this.timeExtent?.isEmpty;\n    }\n\n  };\n  return e([s()], c.prototype, \"layer\", void 0), e([s()], c.prototype, \"suspended\", void 0), e([s(a)], c.prototype, \"timeExtent\", void 0), e([s()], c.prototype, \"view\", void 0), c = e([p(\"esri.views.layers.ImageryLayerView\")], c), c;\n};\n\nexport { m as default };","map":{"version":3,"names":["_","e","r","isNone","t","isSome","o","property","s","subclass","p","i","combinedViewLayerTimeExtentProperty","a","n","getFetchPopupTemplate","u","m","c","constructor","arguments","view","fetchPopupFeatures","layer","popupEnabled","popupTemplate","getRequiredFields","l","timeExtent","geometry","outFields","outSpatialReference","spatialReference","y","resolution","w","type","returnTopmostRaster","d","showNoDataRecords","h","layerOptions","f","returnDomainValues","pixelSize","signal","queryVisibleRasters","then","canResume","isEmpty","prototype","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/layers/ImageryLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isNone as t,isSome as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as a}from\"../../layers/support/commonProperties.js\";import n from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const m=m=>{let c=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,s){const{layer:p}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:p});const{popupEnabled:a}=p,m=u(p,s);if(!a||t(m))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:m});const c=await m.getRequiredFields(),l=new n;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=c,l.outSpatialReference=e.spatialReference;const y=this.view.resolution,w=\"2d\"===this.view.type?new i(y,y,this.view.spatialReference):new i(.5*y,.5*y,this.view.spatialReference),{returnTopmostRaster:d,showNoDataRecords:h}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:d,pixelSize:w,showNoDataRecords:h,signal:o(s)?s.signal:null};return p.queryVisibleRasters(l,f).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([s()],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"suspended\",void 0),e([s(a)],c.prototype,\"timeExtent\",void 0),e([s()],c.prototype,\"view\",void 0),c=e([p(\"esri.views.layers.ImageryLayerView\")],c),c};export{m as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}