{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from \"../../../core/has.js\";\nimport { PooledRBush as i } from \"../../../core/libs/rbush/PooledRBush.js\";\nimport { empty as s } from \"../../../geometry/support/aaBoundingRect.js\";\nconst d = 5e4,\n      n = {\n  minX: 0,\n  minY: 0,\n  maxX: 0,\n  maxY: 0\n};\n\nfunction t(i) {\n  n.minX = i[0], n.minY = i[1], n.maxX = i[2], n.maxY = i[3];\n}\n\nfunction e(i, s, d) {\n  t(s), i.search(n, d);\n}\n\nclass o {\n  constructor() {\n    this._indexInvalid = !1, this._boundsToLoad = [], this._boundsById = new Map(), this._idByBounds = new Map(), this._index = new i(9, has(\"esri-csp-restrictions\") ? i => ({\n      minX: i[0],\n      minY: i[1],\n      maxX: i[2],\n      maxY: i[3]\n    }) : [\"[0]\", \"[1]\", \"[2]\", \"[3]\"]), this._loadIndex = () => {\n      if (this._indexInvalid) {\n        const i = new Array(this._idByBounds.size);\n        let s = 0;\n        this._idByBounds.forEach((d, n) => {\n          i[s++] = n;\n        }), this._indexInvalid = !1, this._index.clear(), this._index.load(i);\n      } else this._boundsToLoad.length && (this._index.load(this._boundsToLoad.filter(i => this._idByBounds.has(i))), this._boundsToLoad.length = 0);\n    };\n  }\n\n  get fullBounds() {\n    if (!this._boundsById.size) return null;\n    const i = s();\n\n    for (const s of this._boundsById.values()) s && (i[0] = Math.min(s[0], i[0]), i[1] = Math.min(s[1], i[1]), i[2] = Math.max(s[2], i[2]), i[3] = Math.max(s[3], i[3]));\n\n    return i;\n  }\n\n  get valid() {\n    return !this._indexInvalid;\n  }\n\n  clear() {\n    this._indexInvalid = !1, this._boundsToLoad.length = 0, this._boundsById.clear(), this._idByBounds.clear(), this._index.clear();\n  }\n\n  delete(i) {\n    const s = this._boundsById.get(i);\n\n    this._boundsById.delete(i), s && (this._idByBounds.delete(s), this._indexInvalid || this._index.remove(s));\n  }\n\n  forEachInBounds(i, s) {\n    this._loadIndex(), e(this._index, i, i => s(this._idByBounds.get(i)));\n  }\n\n  get(i) {\n    return this._boundsById.get(i);\n  }\n\n  has(i) {\n    return this._boundsById.has(i);\n  }\n\n  invalidateIndex() {\n    this._indexInvalid || (this._indexInvalid = !0, this._boundsToLoad.length = 0);\n  }\n\n  set(i, s) {\n    if (!this._indexInvalid) {\n      const s = this._boundsById.get(i);\n\n      s && (this._index.remove(s), this._idByBounds.delete(s));\n    }\n\n    this._boundsById.set(i, s), s && (this._idByBounds.set(s, i), this._indexInvalid || (this._boundsToLoad.push(s), this._boundsToLoad.length > d && this._loadIndex()));\n  }\n\n}\n\nexport { o as BoundsStore };","map":{"version":3,"names":["has","PooledRBush","i","empty","s","d","n","minX","minY","maxX","maxY","t","e","search","o","constructor","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","fullBounds","values","Math","min","max","valid","delete","get","remove","forEachInBounds","invalidateIndex","set","push","BoundsStore"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{PooledRBush as i}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as s}from\"../../../geometry/support/aaBoundingRect.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i){n.minX=i[0],n.minY=i[1],n.maxX=i[2],n.maxY=i[3]}function e(i,s,d){t(s),i.search(n,d)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i(9,has(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=s();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),e(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{o as BoundsStore};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}