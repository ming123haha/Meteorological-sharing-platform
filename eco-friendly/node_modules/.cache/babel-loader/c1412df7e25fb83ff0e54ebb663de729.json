{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { onAbortOrThrow as e, always as t } from \"../../../../core/promiseUtils.js\";\n\nclass r {\n  constructor(e, t) {\n    this.requester = e, this.apiKey = t, this.activeRequests = new Set();\n  }\n\n  get busy() {\n    return this.requester.busy;\n  }\n\n  request(r, s, o) {\n    const l = new AbortController(),\n          a = e(o, () => l.abort()),\n          n = {\n      signal: l.signal,\n      query: {\n        token: this.apiKey\n      }\n    },\n          i = this.requester.request(r, s, n),\n          u = {\n      response: i,\n      abortController: l,\n      abortHandle: a\n    };\n    return this.activeRequests.add(u), t(i, () => {\n      u.abortController = null, u.abortHandle?.remove(), u.abortHandle = null, this.activeRequests.delete(u);\n    }), i;\n  }\n\n  cancelAll() {\n    this.activeRequests.forEach(e => {\n      e.abortController?.abort(), e.abortController = null, e.abortHandle?.remove();\n    }), this.activeRequests.clear();\n  }\n\n}\n\nexport { r as I3SStreamDataController };","map":{"version":3,"names":["onAbortOrThrow","e","always","t","r","constructor","requester","apiKey","activeRequests","Set","busy","request","s","o","l","AbortController","a","abort","n","signal","query","token","i","u","response","abortController","abortHandle","add","remove","delete","cancelAll","forEach","clear","I3SStreamDataController"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{onAbortOrThrow as e,always as t}from\"../../../../core/promiseUtils.js\";class r{constructor(e,t){this.requester=e,this.apiKey=t,this.activeRequests=new Set}get busy(){return this.requester.busy}request(r,s,o){const l=new AbortController,a=e(o,(()=>l.abort())),n={signal:l.signal,query:{token:this.apiKey}},i=this.requester.request(r,s,n),u={response:i,abortController:l,abortHandle:a};return this.activeRequests.add(u),t(i,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this.activeRequests.delete(u)})),i}cancelAll(){this.activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this.activeRequests.clear()}}export{r as I3SStreamDataController};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,cAAc,IAAIC,CAAzB,EAA2BC,MAAM,IAAIC,CAArC,QAA2C,kCAA3C;;AAA8E,MAAMC,CAAN,CAAO;EAACC,WAAW,CAACJ,CAAD,EAAGE,CAAH,EAAK;IAAC,KAAKG,SAAL,GAAeL,CAAf,EAAiB,KAAKM,MAAL,GAAYJ,CAA7B,EAA+B,KAAKK,cAAL,GAAoB,IAAIC,GAAJ,EAAnD;EAA2D;;EAAQ,IAAJC,IAAI,GAAE;IAAC,OAAO,KAAKJ,SAAL,CAAeI,IAAtB;EAA2B;;EAAAC,OAAO,CAACP,CAAD,EAAGQ,CAAH,EAAKC,CAAL,EAAO;IAAC,MAAMC,CAAC,GAAC,IAAIC,eAAJ,EAAR;IAAA,MAA4BC,CAAC,GAACf,CAAC,CAACY,CAAD,EAAI,MAAIC,CAAC,CAACG,KAAF,EAAR,CAA/B;IAAA,MAAmDC,CAAC,GAAC;MAACC,MAAM,EAACL,CAAC,CAACK,MAAV;MAAiBC,KAAK,EAAC;QAACC,KAAK,EAAC,KAAKd;MAAZ;IAAvB,CAArD;IAAA,MAAiGe,CAAC,GAAC,KAAKhB,SAAL,CAAeK,OAAf,CAAuBP,CAAvB,EAAyBQ,CAAzB,EAA2BM,CAA3B,CAAnG;IAAA,MAAiIK,CAAC,GAAC;MAACC,QAAQ,EAACF,CAAV;MAAYG,eAAe,EAACX,CAA5B;MAA8BY,WAAW,EAACV;IAA1C,CAAnI;IAAgL,OAAO,KAAKR,cAAL,CAAoBmB,GAApB,CAAwBJ,CAAxB,GAA2BpB,CAAC,CAACmB,CAAD,EAAI,MAAI;MAACC,CAAC,CAACE,eAAF,GAAkB,IAAlB,EAAuBF,CAAC,CAACG,WAAF,EAAeE,MAAf,EAAvB,EAA+CL,CAAC,CAACG,WAAF,GAAc,IAA7D,EAAkE,KAAKlB,cAAL,CAAoBqB,MAApB,CAA2BN,CAA3B,CAAlE;IAAgG,CAAzG,CAA5B,EAAwID,CAA/I;EAAiJ;;EAAAQ,SAAS,GAAE;IAAC,KAAKtB,cAAL,CAAoBuB,OAApB,CAA6B9B,CAAC,IAAE;MAACA,CAAC,CAACwB,eAAF,EAAmBR,KAAnB,IAA2BhB,CAAC,CAACwB,eAAF,GAAkB,IAA7C,EAAkDxB,CAAC,CAACyB,WAAF,EAAeE,MAAf,EAAlD;IAA0E,CAA3G,GAA8G,KAAKpB,cAAL,CAAoBwB,KAApB,EAA9G;EAA0I;;AAAzlB;;AAA0lB,SAAO5B,CAAC,IAAI6B,uBAAZ"},"metadata":{},"sourceType":"module"}