{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Graphic.js\";\nimport { binaryIndexOf as r } from \"../../../core/arrayUtils.js\";\nimport i from \"../../../core/Logger.js\";\nimport { isSome as s, destroyMaybe as o, isNone as a, unwrap as n } from \"../../../core/maybe.js\";\nimport { initial as d, watch as l } from \"../../../core/reactiveUtils.js\";\nimport { property as h } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as u } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { a as c } from \"../../../chunks/vec3.js\";\nimport { f as p, c as g } from \"../../../chunks/vec3f64.js\";\nimport { projectBuffer as m, projectVectorToVector as y, projectBoundingRect as f } from \"../../../geometry/projection.js\";\nimport { create as _ } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { extentContainsCoords3D as b } from \"../../../geometry/support/contains.js\";\nimport { getGeometryZScaler as v } from \"../../../geometry/support/zscale.js\";\nimport { makeDehydratedPoint as E, estimateSize as x } from \"../../../layers/graphics/dehydratedFeatures.js\";\nimport { hydrateGraphic as I } from \"../../../layers/graphics/hydratedFeatures.js\";\nimport S from \"../../../layers/graphics/controllers/I3SOnDemandController.js\";\nimport w from \"../../../layers/support/FeatureFilter.js\";\nimport D from \"../../../rest/support/Query.js\";\nimport { I3SPointsWorkerHandle as O } from \"./I3SPointsWorkerHandle.js\";\nimport { LayerView3D as F } from \"./LayerView3D.js\";\nimport A from \"./graphics/Graphics3DFeatureProcessor.js\";\nimport { QueryEngine as C } from \"./graphics/QueryEngine.js\";\nimport { createInteractiveEditSession as j, processAttributeEdits as N } from \"./i3s/attributeEditing.js\";\nimport { I3SAttributeOverrides as T } from \"./i3s/I3SAttributeOverrides.js\";\nimport { checkSpatialReferences as V, containsDraco as G, whenGraphicAttributes as L, getCachedAttributeValue as M } from \"./i3s/I3SUtil.js\";\nimport { DefinitionExpressionSceneLayerView as R } from \"./support/DefinitionExpressionSceneLayerView.js\";\nimport { defineFieldProperties as H } from \"./support/fieldProperties.js\";\nimport { PopupSceneLayerView as P } from \"./support/PopupSceneLayerView.js\";\nimport { SceneLayerViewRequiredFields as q } from \"./support/SceneLayerViewRequiredFields.js\";\nimport U from \"../support/debugFlags.js\";\nimport { GraphicsMap as Q } from \"../support/GraphicsMap.js\";\nimport { compute as k } from \"../support/orientedBoundingBox.js\";\nimport { updatingProgress as B } from \"../support/updatingProperties.js\";\nimport { UpdatePolicy as z } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport W from \"../../layers/SceneLayerView.js\";\nimport { TaskPriority as K } from \"../../support/Scheduler.js\";\nconst Z = i.getLogger(\"esri.views.3d.layers.SceneLayerGraphicsView3D\"),\n      Y = H();\nlet J = class extends R(P(F(W))) {\n  constructor() {\n    super(...arguments), this.type = \"scene-layer-graphics-3d\", this._nodesAddedToStage = new Map(), this._queryEngine = null, this._memCache = null, this._interactiveEditingSessions = new Map(), this.loadedGraphics = new Q(), this.holeFilling = \"always\", this.progressiveLoadFactor = 1, this.supportsHeightUnitConversion = !0, this._coordinatesOutsideExtentErrors = 0, this._maxCoordinatesOutsideExtentErrors = 20;\n  }\n\n  initialize() {\n    const e = this.layer;\n    this.addResolvingPromise(e.indexInfo), this._attributeOverrides = new T(this.layer, this.view.resourceController?.memoryController), V(e, this.view.spatialReference, this.view.viewingMode), this.fieldsHelper = new q({\n      layerView: this\n    }), this.updatingHandles.add(() => e.rangeInfos, e => this._rangeInfosChanged(e), d), this.updatingHandles.add(() => e.renderer, (e, t) => this._rendererChange(e, t)), this.updatingHandles.add(() => [this.parsedDefinitionExpression, this.excludeObjectIdsSorted], () => this._filterChange()), this.updatingHandles.add(() => this.view.floors, () => s(this.processor.filterVisibility) && this.processor.filterVisibility.filterChanged()), this.handles.add(l(() => U.I3S_TREE_SHOW_TILES, e => {\n      if (e && !this._treeDebugger) {\n        const e = this._controller.crsIndex;\n        import(\"./support/I3STreeDebugger.js\").then(({\n          I3STreeDebugger: t\n        }) => {\n          !this._treeDebugger && U.I3S_TREE_SHOW_TILES && (this._treeDebugger = new t({\n            lv: this,\n            view: this.view,\n            nodeSR: e\n          }));\n        });\n      } else e || !this._treeDebugger || U.I3S_TREE_SHOW_TILES || (this._treeDebugger.destroy(), this._treeDebugger = null);\n    }, d)), this._set(\"processor\", new A({\n      owner: this,\n      preferredUpdatePolicy: z.ASYNC,\n      scaleVisibilityEnabled: !0,\n      filterVisibilityEnabled: !0,\n      timeExtentEnabled: !1,\n      frustumVisibilityEnabled: !1,\n      elevationAlignmentEnabled: !0,\n      elevationFeatureExpressionEnabled: !1,\n      dataExtent: e.fullExtent,\n      updateClippingExtent: e => this._updateClippingExtent(e)\n    })), this.processor.elevationAlignment?.events.on(\"invalidate-elevation\", e => this._invalidateElevation(e)), this.supportsHeightUnitConversion && (this._verticalScale = v(\"point\", e.spatialReference, this.view.spatialReference)), this.addResolvingPromise(this.processor.setup()), this._memCache = this.view.resourceController.memoryController.newCache(e.uid), this._controller = new S({\n      layerView: this,\n      scaleVisibilityEnabled: !1\n    }), G(this.layer.geometryDefinitions) && (this._worker = new O(e => this.view.resourceController.schedule(e))), this.handles.add(this.layer.on(\"apply-edits\", e => this.updatingHandles.addPromise(e.result))), this.handles.add(this.layer.on(\"edits\", e => this._handleEdits(e))), this.when(() => {\n      this._queryEngine = new C({\n        layerView: this,\n        priority: K.FEATURE_QUERY_ENGINE\n      }), this.updatingHandles.add(() => this.maximumNumberOfFeatures, e => this._controller.featureTarget = e, d), this.updatingHandles.add(() => this.suspended, e => {\n        e && this._removeAllNodeData();\n      });\n    });\n  }\n\n  destroy() {\n    this._treeDebugger = o(this._treeDebugger), this._attributeOverrides = o(this._attributeOverrides), this._set(\"processor\", o(this.processor)), this._controller = o(this._controller), this._queryEngine = o(this._queryEngine), this._worker = o(this._worker), this._memCache = o(this._memCache), this._nodesAddedToStage.clear(), this.fieldsHelper = o(this.fieldsHelper);\n  }\n\n  get requiredFields() {\n    return this.fieldsHelper?.requiredFields ?? [];\n  }\n\n  get maximumNumberOfFeatures() {\n    const e = this.processor?.graphicsCore?.displayFeatureLimit;\n    return e?.maximumNumberOfFeatures ?? 0;\n  }\n\n  set maximumNumberOfFeatures(e) {\n    null != e ? (this._override(\"maximumNumberOfFeatures\", e), this._controller.fixedFeatureTarget = !0) : (this._clearOverride(\"maximumNumberOfFeatures\"), this._controller.fixedFeatureTarget = !1);\n  }\n\n  get maximumNumberOfFeaturesExceeded() {\n    return !this.suspended && !!this._controller?.useMaximumNumberOfFeatures && !this._controller.leavesReached;\n  }\n\n  get excludeObjectIdsSorted() {\n    const e = this.layer.excludeObjectIds;\n    return e.length ? e.toArray().sort((e, t) => e - t) : null;\n  }\n\n  get lodFactor() {\n    return \"Labels\" === this.layer.semantic ? 1 : this.view.qualitySettings.sceneService.point.lodFactor;\n  }\n\n  get hasM() {\n    return !1;\n  }\n\n  get hasZ() {\n    return !0;\n  }\n\n  async whenGraphicAttributes(e, t) {\n    return L(this.layer, e, this._getObjectIdField(), t, () => [...this._nodesAddedToStage.values()]);\n  }\n\n  getHit(e) {\n    if (!this.loadedGraphics) return null;\n\n    const t = I(this.loadedGraphics.find(t => t.uid === e), this.layer),\n          r = this._getObjectIdField();\n\n    return t && t.attributes && t.attributes[r] ? (t.layer = this.layer, t.sourceLayer = this.layer, {\n      type: \"graphic\",\n      graphic: t,\n      layer: t.layer\n    }) : null;\n  }\n\n  whenGraphicBounds(e, t) {\n    return this.processor.whenGraphicBounds(e, t);\n  }\n\n  computeAttachmentOrigin(e, t) {\n    return this.processor.computeAttachmentOrigin(e, t);\n  }\n\n  canResume() {\n    return super.canResume() && (!this._controller || this._controller.rootNodeVisible);\n  }\n\n  isUpdating() {\n    return !!(this._controller?.updating || this.processor?.updating || this.fieldsHelper?.updating || this.layerFilterUpdating);\n  }\n\n  highlight(e) {\n    return this.processor.highlight(e, this.layer.objectIdField);\n  }\n\n  get updatePolicy() {\n    return this.processor.graphicsCore.effectiveUpdatePolicy;\n  }\n\n  createInteractiveEditSession(e) {\n    return j(this.attributeEditingContext, e);\n  }\n\n  async _extractBinaryPointData(e, t) {\n    const r = {\n      geometryBuffer: e.geometryBuffer\n    };\n    return a(this._worker) && (this._worker = new O(e => this.view.resourceController.schedule(e))), this._worker.invoke(r, t).then(e => {\n      if (s(e)) {\n        return {\n          positionData: e.positions,\n          featureIds: e.featureIds\n        };\n      }\n\n      throw new Error(\"Failed to decompress Draco point data\");\n    });\n  }\n\n  _checkExtent(e, t) {\n    e && !b(e, t) && (this._coordinatesOutsideExtentErrors < this._maxCoordinatesOutsideExtentErrors && Z.error(\"Service Error: Coordinates outside of layer extent\"), this._coordinatesOutsideExtentErrors + 1 === this._maxCoordinatesOutsideExtentErrors && Z.error(\"Maximum number of errors reached. Further errors are ignored.\"), this._coordinatesOutsideExtentErrors++);\n  }\n\n  async addNode(e, t, r) {\n    if (!ee(t) && !X(t)) throw new Error();\n    if (this._nodesAddedToStage.has(e.index)) return void Z.error(\"I3S node \" + e.id + \" already added\");\n    const i = s(this.layer.fullExtent) ? re(this.layer.fullExtent.clone(), .5) : null,\n          o = this._controller.crsVertex,\n          a = [],\n          n = {\n      graphics: null,\n      featureIds: null,\n      attributeInfo: t.attributeDataInfo,\n      node: e\n    };\n\n    if (ee(t) ? await this._addNodeBinaryPointData(e, n, t, i, a, r) : X(t) && this._addNodeLegacyPointData(e, n, t, i, a), await this._attributeOverrides.apply(n.featureIds, t.attributeDataInfo, r), e.numFeatures = n.graphics.length, this._updateNodeMemory(e), te(n), a.length > 0 && (this._computeObb(e, a, o), this._controller.updateVisibility(e.index)), this._controller.isGeometryVisible(e)) {\n      if (s(this._verticalScale)) for (const e of n.graphics) this._verticalScale(e.geometry);\n      this._nodesAddedToStage.set(e.index, n), this.loadedGraphics.addMany(n.graphics), this._controller.updateLoadStatus(e.index, !0), this._filterNode(n), this._treeDebugger && this._treeDebugger.update();\n    } else this._cacheNodeData(n);\n  }\n\n  _computeObb(e, t, r) {\n    const i = this._controller.crsIndex,\n          s = i.isGeographic ? this.view.renderSpatialReference : i;\n    m(t, r, 0, t, s, 0, t.length / 3);\n    const o = {\n      data: t,\n      size: 3\n    };\n    e.serviceObb = k(o), i.isGeographic && y(e.serviceObb.center, s, e.serviceObb.center, i);\n  }\n\n  isNodeLoaded(e) {\n    return this._nodesAddedToStage.has(e);\n  }\n\n  isNodeReloading() {\n    return !1;\n  }\n\n  updateNodeState() {}\n\n  async _addNodeBinaryPointData(e, r, i, o, a, d) {\n    const l = await this._extractBinaryPointData(i, d);\n    if (null == l) throw new Error();\n\n    const h = this._getObjectIdField(),\n          u = this._controller.crsVertex,\n          g = this.view.spatialReference,\n          y = this.processor.graphicsCore,\n          {\n      positionData: f,\n      featureIds: _\n    } = l,\n          b = 3,\n          v = f.length / b,\n          x = new Array();\n\n    for (let I = 0; I < v; I++) {\n      const r = s(e.serviceObb) ? e.serviceObb.center : [0, 0, 0],\n            i = I * b,\n            d = p(f[i + 0], f[i + 1], f[i + 2]);\n      c(d, d, r), e.serviceObb || a.push(d[0], d[1], d[2]), s(o) && this._checkExtent(o, d);\n      const l = _[I],\n            v = {};\n      null != l && (v[h] = l);\n      const S = null == l ? t.generateUID() : l;\n      m(d, u, 0, se, g, 0, 1);\n      const w = E(se[0], se[1], se[2], g),\n            D = this.loadedGraphics.get(S);\n      if (s(D)) D.level < e.level && (oe.property = \"geometry\", oe.graphic = D, oe.oldValue = n(D.geometry), oe.newValue = w, D.geometry = w, y.graphicUpdateHandler(oe)), x.push(D);else {\n        const r = t.generateUID();\n        x.push({\n          objectId: S,\n          uid: r,\n          geometry: w,\n          attributes: v,\n          visible: !0,\n          level: e.level\n        });\n      }\n    }\n\n    r.graphics = x, r.featureIds = Array.from(_);\n  }\n\n  _addNodeLegacyPointData(e, r, i, o, a) {\n    const n = this._getObjectIdField(),\n          d = this._controller.crsVertex,\n          l = this.view.spatialReference,\n          h = [0, 0, 0],\n          u = new Array(),\n          c = new Array();\n\n    for (const p of i.pointData) {\n      const r = p.featureDataPosition,\n            i = r.length,\n            g = p.geometries && p.geometries[0] || ie[i],\n            y = p.featureIds[0];\n      if (\"points\" !== g.params.type) continue;\n      s(o) && this._checkExtent(o, r);\n      const f = {};\n      null != y && (f[n] = y);\n\n      const _ = null == y ? t.generateUID() : y;\n\n      let b;\n      \"Embedded\" === g.type && (b = g.params.vertexAttributes.position);\n\n      for (let o = 0; o < b.length; o += i) {\n        for (let e = 0; e < i; e++) h[e] = r[e] + b[o + e];\n\n        const n = 3 === i;\n        e.serviceObb || a.push(h[0], h[1], n ? h[2] : 0), m(h, d, 0, se, l, 0, 1);\n        const u = E(se[0], se[1], n ? se[2] : void 0, l),\n              p = this.loadedGraphics.get(_);\n        s(p) ? c.push(p) : c.push({\n          objectId: _,\n          uid: t.generateUID(),\n          geometry: u,\n          attributes: f,\n          visible: !0\n        });\n      }\n\n      u.push(y);\n    }\n\n    r.graphics = c, r.featureIds = u;\n  }\n\n  _updateNodeMemory(e) {\n    e.memory = 4096 + (s(e.numFeatures) ? e.numFeatures * this.processor.graphicsCore.usedMemoryPerGraphic : 0);\n  }\n\n  _cacheNodeData(e) {\n    const t = e.graphics.reduce((e, t) => x(t) + e, 512 + 8 * e.featureIds.length + 1024);\n\n    this._memCache.put(this._getMemCacheKey(e.node), e, t);\n  }\n\n  _getMemCacheKey(e) {\n    return `${e.index}`;\n  }\n\n  _removeAllNodeData() {\n    this._nodesAddedToStage.forEach((e, t) => {\n      if (e) {\n        const t = e.node;\n        this._updateNodeMemory(t), this._cacheNodeData(e);\n      }\n\n      this._controller.updateLoadStatus(t, !1);\n    }), this._nodesAddedToStage.clear(), this._treeDebugger && this._treeDebugger.update(), this.loadedGraphics.clear();\n  }\n\n  removeNode(e) {\n    const t = this._removeNodeStageData(e);\n\n    t && (this._updateNodeMemory(t.node), this._cacheNodeData(t));\n  }\n\n  _removeNodeStageData(e) {\n    const t = this._nodesAddedToStage.get(e);\n\n    return t ? (this._controller.updateLoadStatus(e, !1), this.loadedGraphics.removeMany(t.graphics), this._nodesAddedToStage.delete(e), this._treeDebugger && this._treeDebugger.update(), t) : null;\n  }\n\n  async loadCachedNodeData(e) {\n    return this._memCache.pop(this._getMemCacheKey(e));\n  }\n\n  async addCachedNodeData(e, t, r, i) {\n    this._nodesAddedToStage.has(e.index) ? Z.error(\"I3S node \" + e.id + \" already added\") : (this.loadedGraphics.addMany(t.graphics), this._nodesAddedToStage.set(e.index, t), this._controller.updateLoadStatus(e.index, !0), this._updateNodeMemory(e), await this.updateAttributes(e.index, r, i), this._filterNode(t), this._treeDebugger && this._treeDebugger.update());\n  }\n\n  getLoadedNodeIds() {\n    const e = [];\n    return this._nodesAddedToStage.forEach(t => e.push(t.node.id)), e.sort();\n  }\n\n  getVisibleNodes() {\n    const e = new Array();\n    return this._nodesAddedToStage.forEach(t => e.push(t.node)), e;\n  }\n\n  getLoadedNodeIndices(e) {\n    this._nodesAddedToStage.forEach((t, r) => e.push(r));\n  }\n\n  getLoadedAttributes(e) {\n    const t = this._nodesAddedToStage.get(e);\n\n    if (t && s(t.attributeInfo)) return t.attributeInfo.loadedAttributes;\n  }\n\n  getAttributeData(e) {\n    const t = this._nodesAddedToStage.get(e);\n\n    if (t && s(t.attributeInfo)) return t.attributeInfo.attributeData;\n  }\n\n  _setAttributeData(e, t) {\n    const r = this._nodesAddedToStage.get(e);\n\n    r && !a(r.attributeInfo) && (r.attributeInfo.attributeData = t, this._attributeValuesChanged(r));\n  }\n\n  async updateAttributes(e, t, r) {\n    const i = this._nodesAddedToStage.get(e);\n\n    i && (await this._attributeOverrides.apply(i.featureIds, t, r), i.attributeInfo = t, this._attributeValuesChanged(i));\n  }\n\n  _attributeValuesChanged(e) {\n    if (te(e), this._filterNode(e), this.processor.graphicsCore.labelsEnabled) {\n      const t = e.graphics.map(e => e.uid);\n      this.processor.graphicsCore.updateLabelingInfo(t);\n    }\n  }\n\n  _updateClippingExtent(e) {\n    return this._controller && this._controller.updateClippingArea(e), !1;\n  }\n\n  _getObjectIdField() {\n    return this.layer.objectIdField || \"OBJECTID\";\n  }\n\n  async _rendererChange(e, t) {\n    const {\n      layer: {\n        fieldsIndex: r\n      }\n    } = this,\n          i = new Set();\n    let s, o;\n    e ? (await e.collectRequiredFields(i, r), s = Array.from(i).sort()) : s = [], i.clear(), t ? (await t.collectRequiredFields(i, r), o = Array.from(i).sort()) : o = [], s.length === o.length && s.every((e, t) => s[t] === o[t]) || this._reloadAllNodes();\n  }\n\n  _rangeInfosChanged(e) {\n    null != e && e.length > 0 && Z.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\");\n  }\n\n  _filterChange() {\n    this._nodesAddedToStage.forEach(e => this._filterNode(e));\n  }\n\n  _reloadAllNodes() {\n    this._removeAllNodeData(), this._controller && this._controller.restartNodeLoading();\n  }\n\n  _filterNode(e) {\n    const t = this.parsedDefinitionExpression,\n          i = this.excludeObjectIdsSorted,\n          s = this._getObjectIdField();\n\n    for (const o of e.graphics) {\n      const e = o.visible,\n            n = !t || this._evaluateClause(t, o),\n            d = a(i) || r(i, o.attributes[s]) < 0;\n\n      o.visible = n && d, e !== o.visible && (oe.graphic = o, oe.property = \"visible\", oe.oldValue = e, oe.newValue = o.visible, this.processor.graphicsCore.graphicUpdateHandler(oe));\n    }\n  }\n\n  _invalidateElevation(e) {\n    const t = this._controller.crsIndex;\n    f(e.extent, e.spatialReference, ae, t), this._controller.updateElevationChanged(ae, t);\n  }\n\n  createQuery() {\n    const e = {\n      outFields: [\"*\"],\n      returnGeometry: !0,\n      outSpatialReference: this.view.spatialReference\n    };\n    return s(this.filter) ? this.filter.createQuery(e) : new D(e);\n  }\n\n  queryFeatures(e, t) {\n    return this._queryEngine.executeQuery(this._ensureQuery(e), t?.signal);\n  }\n\n  queryObjectIds(e, t) {\n    return this._queryEngine.executeQueryForIds(this._ensureQuery(e), t?.signal);\n  }\n\n  queryFeatureCount(e, t) {\n    return this._queryEngine.executeQueryForCount(this._ensureQuery(e), t?.signal);\n  }\n\n  queryExtent(e, t) {\n    return this._queryEngine.executeQueryForExtent(this._ensureQuery(e), t?.signal);\n  }\n\n  _ensureQuery(e) {\n    return this._addDefinitionExpressionToQuery(a(e) ? this.createQuery() : D.from(e));\n  }\n\n  getUsedMemory() {\n    return this.processor?.graphicsCore?.usedMemory ?? 0;\n  }\n\n  getUnloadedMemory() {\n    return .8 * ((this._controller?.unloadedMemoryEstimate ?? 0) + (this.processor?.graphicsCore?.unprocessedMemoryEstimate ?? 0));\n  }\n\n  ignoresMemoryFactor() {\n    return this._controller && this._controller.fixedFeatureTarget;\n  }\n\n  _handleEdits(e) {\n    N(this.attributeEditingContext, e);\n  }\n\n  get attributeEditingContext() {\n    const e = this._getObjectIdField();\n\n    return {\n      sessions: this._interactiveEditingSessions,\n      fieldsIndex: this.layer.fieldsIndex,\n      objectIdField: e,\n      forEachNode: e => this._nodesAddedToStage.forEach(t => e(t.node, t.featureIds)),\n      attributeStorageInfo: this.i3slayer.attributeStorageInfo,\n      attributeOverrides: this._attributeOverrides,\n      getAttributeData: e => this.getAttributeData(e),\n      setAttributeData: (t, r, i) => {\n        this._setAttributeData(t, r);\n\n        const o = this._nodesAddedToStage.get(t);\n\n        if (s(i)) {\n          const t = this.loadedGraphics.get(i.attributes[e]);\n          s(t) && this.processor.graphicsCore.recreateGraphics([t]);\n        } else s(o) && this.processor.graphicsCore.recreateGraphics(o.graphics);\n      },\n      clearMemCache: () => {}\n    };\n  }\n\n  get performanceInfo() {\n    const e = {\n      displayedNumberOfFeatures: this.loadedGraphics.length,\n      maximumNumberOfFeatures: this.maximumNumberOfFeatures,\n      totalNumberOfFeatures: -1,\n      nodes: this._nodesAddedToStage.size,\n      core: this.processor.graphicsCore.performanceInfo\n    };\n    return this._controller && this._controller.updateStats(e), e;\n  }\n\n  get test() {\n    return {\n      controller: this._controller,\n      numNodes: this._nodesAddedToStage.size,\n      loadedGraphics: this.loadedGraphics\n    };\n  }\n\n};\ne([h()], J.prototype, \"processor\", void 0), e([h({\n  type: w\n})], J.prototype, \"filter\", void 0), e([h()], J.prototype, \"loadedGraphics\", void 0), e([h({\n  aliasOf: \"layer\"\n})], J.prototype, \"i3slayer\", void 0), e([h()], J.prototype, \"_controller\", void 0), e([h()], J.prototype, \"updating\", void 0), e([h()], J.prototype, \"suspended\", void 0), e([h()], J.prototype, \"holeFilling\", void 0), e([h(B)], J.prototype, \"updatingProgress\", void 0), e([h({\n  aliasOf: \"_controller.updatingProgress\"\n})], J.prototype, \"updatingProgressValue\", void 0), e([h(Y.requiredFields)], J.prototype, \"requiredFields\", null), e([h(Y.availableFields)], J.prototype, \"availableFields\", void 0), e([h()], J.prototype, \"fieldsHelper\", void 0), e([h({\n  type: Number\n})], J.prototype, \"maximumNumberOfFeatures\", null), e([h({\n  readOnly: !0\n})], J.prototype, \"maximumNumberOfFeaturesExceeded\", null), e([h()], J.prototype, \"excludeObjectIdsSorted\", null), e([h({\n  readOnly: !0\n})], J.prototype, \"lodFactor\", null), e([h({\n  readOnly: !0\n})], J.prototype, \"hasM\", null), e([h({\n  readOnly: !0\n})], J.prototype, \"hasZ\", null), J = e([u(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")], J);\nconst $ = J;\n\nfunction X(e) {\n  return \"pointData\" in e;\n}\n\nfunction ee(e) {\n  return \"geometryBuffer\" in e && null !== e.geometryBuffer;\n}\n\nfunction te(e) {\n  const t = e.attributeInfo;\n\n  for (let r = 0; r < e.graphics.length; r++) {\n    const i = e.graphics[r];\n    if (i.attributes || (i.attributes = {}), s(t) && s(t.loadedAttributes)) for (const {\n      name: e\n    } of t.loadedAttributes) t.attributeData[e] && (i.attributes[e] = M(t.attributeData[e], r));\n  }\n}\n\nfunction re(e, t) {\n  return e.xmin -= t, e.ymin -= t, e.xmax += t, e.ymax += t, e.hasZ && (e.zmin -= t, e.zmax += t), e.hasM && (e.mmin -= t, e.mmax += t), e;\n}\n\nconst ie = {\n  2: {\n    type: \"Embedded\",\n    params: {\n      type: \"points\",\n      vertexAttributes: {\n        position: [0, 0]\n      }\n    }\n  },\n  3: {\n    type: \"Embedded\",\n    params: {\n      type: \"points\",\n      vertexAttributes: {\n        position: [0, 0, 0]\n      }\n    }\n  }\n},\n      se = g(),\n      oe = {\n  graphic: null,\n  property: null,\n  oldValue: null,\n  newValue: null\n},\n      ae = _();\n\nexport { $ as default };","map":{"version":3,"names":["_","e","t","binaryIndexOf","r","i","isSome","s","destroyMaybe","o","isNone","a","unwrap","n","initial","d","watch","l","property","h","subclass","u","c","f","p","g","projectBuffer","m","projectVectorToVector","y","projectBoundingRect","create","extentContainsCoords3D","b","getGeometryZScaler","v","makeDehydratedPoint","E","estimateSize","x","hydrateGraphic","I","S","w","D","I3SPointsWorkerHandle","O","LayerView3D","F","A","QueryEngine","C","createInteractiveEditSession","j","processAttributeEdits","N","I3SAttributeOverrides","T","checkSpatialReferences","V","containsDraco","G","whenGraphicAttributes","L","getCachedAttributeValue","M","DefinitionExpressionSceneLayerView","R","defineFieldProperties","H","PopupSceneLayerView","P","SceneLayerViewRequiredFields","q","U","GraphicsMap","Q","compute","k","updatingProgress","B","UpdatePolicy","z","W","TaskPriority","K","Z","getLogger","Y","J","constructor","arguments","type","_nodesAddedToStage","Map","_queryEngine","_memCache","_interactiveEditingSessions","loadedGraphics","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","initialize","layer","addResolvingPromise","indexInfo","_attributeOverrides","view","resourceController","memoryController","spatialReference","viewingMode","fieldsHelper","layerView","updatingHandles","add","rangeInfos","_rangeInfosChanged","renderer","_rendererChange","parsedDefinitionExpression","excludeObjectIdsSorted","_filterChange","floors","processor","filterVisibility","filterChanged","handles","I3S_TREE_SHOW_TILES","_treeDebugger","_controller","crsIndex","then","I3STreeDebugger","lv","nodeSR","destroy","_set","owner","preferredUpdatePolicy","ASYNC","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","events","on","_invalidateElevation","_verticalScale","setup","newCache","uid","geometryDefinitions","_worker","schedule","addPromise","result","_handleEdits","when","priority","FEATURE_QUERY_ENGINE","maximumNumberOfFeatures","featureTarget","suspended","_removeAllNodeData","clear","requiredFields","graphicsCore","displayFeatureLimit","_override","fixedFeatureTarget","_clearOverride","maximumNumberOfFeaturesExceeded","useMaximumNumberOfFeatures","leavesReached","excludeObjectIds","length","toArray","sort","lodFactor","semantic","qualitySettings","sceneService","point","hasM","hasZ","_getObjectIdField","values","getHit","find","attributes","sourceLayer","graphic","whenGraphicBounds","computeAttachmentOrigin","canResume","rootNodeVisible","isUpdating","updating","layerFilterUpdating","highlight","objectIdField","updatePolicy","effectiveUpdatePolicy","attributeEditingContext","_extractBinaryPointData","geometryBuffer","invoke","positionData","positions","featureIds","Error","_checkExtent","error","addNode","ee","X","has","index","id","re","clone","crsVertex","graphics","attributeInfo","attributeDataInfo","node","_addNodeBinaryPointData","_addNodeLegacyPointData","apply","numFeatures","_updateNodeMemory","te","_computeObb","updateVisibility","isGeometryVisible","geometry","set","addMany","updateLoadStatus","_filterNode","update","_cacheNodeData","isGeographic","renderSpatialReference","data","size","serviceObb","center","isNodeLoaded","isNodeReloading","updateNodeState","Array","push","generateUID","se","get","level","oe","oldValue","newValue","graphicUpdateHandler","objectId","visible","from","pointData","featureDataPosition","geometries","ie","params","vertexAttributes","position","memory","usedMemoryPerGraphic","reduce","put","_getMemCacheKey","forEach","removeNode","_removeNodeStageData","removeMany","delete","loadCachedNodeData","pop","addCachedNodeData","updateAttributes","getLoadedNodeIds","getVisibleNodes","getLoadedNodeIndices","getLoadedAttributes","loadedAttributes","getAttributeData","attributeData","_setAttributeData","_attributeValuesChanged","labelsEnabled","map","updateLabelingInfo","updateClippingArea","fieldsIndex","Set","collectRequiredFields","every","_reloadAllNodes","warn","restartNodeLoading","_evaluateClause","extent","ae","updateElevationChanged","createQuery","outFields","returnGeometry","outSpatialReference","filter","queryFeatures","executeQuery","_ensureQuery","signal","queryObjectIds","executeQueryForIds","queryFeatureCount","executeQueryForCount","queryExtent","executeQueryForExtent","_addDefinitionExpressionToQuery","getUsedMemory","usedMemory","getUnloadedMemory","unloadedMemoryEstimate","unprocessedMemoryEstimate","ignoresMemoryFactor","sessions","forEachNode","attributeStorageInfo","i3slayer","attributeOverrides","setAttributeData","recreateGraphics","clearMemCache","performanceInfo","displayedNumberOfFeatures","totalNumberOfFeatures","nodes","core","updateStats","test","controller","numNodes","prototype","aliasOf","availableFields","Number","readOnly","$","name","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{binaryIndexOf as r}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Logger.js\";import{isSome as s,destroyMaybe as o,isNone as a,unwrap as n}from\"../../../core/maybe.js\";import{initial as d,watch as l}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import{a as c}from\"../../../chunks/vec3.js\";import{f as p,c as g}from\"../../../chunks/vec3f64.js\";import{projectBuffer as m,projectVectorToVector as y,projectBoundingRect as f}from\"../../../geometry/projection.js\";import{create as _}from\"../../../geometry/support/aaBoundingRect.js\";import{extentContainsCoords3D as b}from\"../../../geometry/support/contains.js\";import{getGeometryZScaler as v}from\"../../../geometry/support/zscale.js\";import{makeDehydratedPoint as E,estimateSize as x}from\"../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as I}from\"../../../layers/graphics/hydratedFeatures.js\";import S from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import w from\"../../../layers/support/FeatureFilter.js\";import D from\"../../../rest/support/Query.js\";import{I3SPointsWorkerHandle as O}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as F}from\"./LayerView3D.js\";import A from\"./graphics/Graphics3DFeatureProcessor.js\";import{QueryEngine as C}from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as j,processAttributeEdits as N}from\"./i3s/attributeEditing.js\";import{I3SAttributeOverrides as T}from\"./i3s/I3SAttributeOverrides.js\";import{checkSpatialReferences as V,containsDraco as G,whenGraphicAttributes as L,getCachedAttributeValue as M}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as R}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as H}from\"./support/fieldProperties.js\";import{PopupSceneLayerView as P}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as q}from\"./support/SceneLayerViewRequiredFields.js\";import U from\"../support/debugFlags.js\";import{GraphicsMap as Q}from\"../support/GraphicsMap.js\";import{compute as k}from\"../support/orientedBoundingBox.js\";import{updatingProgress as B}from\"../support/updatingProperties.js\";import{UpdatePolicy as z}from\"../webgl-engine/lib/basicInterfaces.js\";import W from\"../../layers/SceneLayerView.js\";import{TaskPriority as K}from\"../../support/Scheduler.js\";const Z=i.getLogger(\"esri.views.3d.layers.SceneLayerGraphicsView3D\"),Y=H();let J=class extends(R(P(F(W)))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._nodesAddedToStage=new Map,this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this.loadedGraphics=new Q,this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}initialize(){const e=this.layer;this.addResolvingPromise(e.indexInfo),this._attributeOverrides=new T(this.layer,this.view.resourceController?.memoryController),V(e,this.view.spatialReference,this.view.viewingMode),this.fieldsHelper=new q({layerView:this}),this.updatingHandles.add((()=>e.rangeInfos),(e=>this._rangeInfosChanged(e)),d),this.updatingHandles.add((()=>e.renderer),((e,t)=>this._rendererChange(e,t))),this.updatingHandles.add((()=>[this.parsedDefinitionExpression,this.excludeObjectIdsSorted]),(()=>this._filterChange())),this.updatingHandles.add((()=>this.view.floors),(()=>s(this.processor.filterVisibility)&&this.processor.filterVisibility.filterChanged())),this.handles.add(l((()=>U.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&U.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||U.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),d)),this._set(\"processor\",new A({owner:this,preferredUpdatePolicy:z.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,dataExtent:e.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on(\"invalidate-elevation\",(e=>this._invalidateElevation(e))),this.supportsHeightUnitConversion&&(this._verticalScale=v(\"point\",e.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.setup()),this._memCache=this.view.resourceController.memoryController.newCache(e.uid),this._controller=new S({layerView:this,scaleVisibilityEnabled:!1}),G(this.layer.geometryDefinitions)&&(this._worker=new O((e=>this.view.resourceController.schedule(e)))),this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e)))),this.when((()=>{this._queryEngine=new C({layerView:this,priority:K.FEATURE_QUERY_ENGINE}),this.updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),d),this.updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=o(this._treeDebugger),this._attributeOverrides=o(this._attributeOverrides),this._set(\"processor\",o(this.processor)),this._controller=o(this._controller),this._queryEngine=o(this._queryEngine),this._worker=o(this._worker),this._memCache=o(this._memCache),this._nodesAddedToStage.clear(),this.fieldsHelper=o(this.fieldsHelper)}get requiredFields(){return this.fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return\"Labels\"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}async whenGraphicAttributes(e,t){return L(this.layer,e,this._getObjectIdField(),t,(()=>[...this._nodesAddedToStage.values()]))}getHit(e){if(!this.loadedGraphics)return null;const t=I(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t&&t.attributes&&t.attributes[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:\"graphic\",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this.fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return j(this.attributeEditingContext,e)}async _extractBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};return a(this._worker)&&(this._worker=new O((e=>this.view.resourceController.schedule(e)))),this._worker.invoke(r,t).then((e=>{if(s(e)){return{positionData:e.positions,featureIds:e.featureIds}}throw new Error(\"Failed to decompress Draco point data\")}))}_checkExtent(e,t){e&&!b(e,t)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&Z.error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&Z.error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++)}async addNode(e,t,r){if(!ee(t)&&!X(t))throw new Error;if(this._nodesAddedToStage.has(e.index))return void Z.error(\"I3S node \"+e.id+\" already added\");const i=s(this.layer.fullExtent)?re(this.layer.fullExtent.clone(),.5):null,o=this._controller.crsVertex,a=[],n={graphics:null,featureIds:null,attributeInfo:t.attributeDataInfo,node:e};if(ee(t)?await this._addNodeBinaryPointData(e,n,t,i,a,r):X(t)&&this._addNodeLegacyPointData(e,n,t,i,a),await this._attributeOverrides.apply(n.featureIds,t.attributeDataInfo,r),e.numFeatures=n.graphics.length,this._updateNodeMemory(e),te(n),a.length>0&&(this._computeObb(e,a,o),this._controller.updateVisibility(e.index)),this._controller.isGeometryVisible(e)){if(s(this._verticalScale))for(const e of n.graphics)this._verticalScale(e.geometry);this._nodesAddedToStage.set(e.index,n),this.loadedGraphics.addMany(n.graphics),this._controller.updateLoadStatus(e.index,!0),this._filterNode(n),this._treeDebugger&&this._treeDebugger.update()}else this._cacheNodeData(n)}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;m(t,r,0,t,s,0,t.length/3);const o={data:t,size:3};e.serviceObb=k(o),i.isGeographic&&y(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this._nodesAddedToStage.has(e)}isNodeReloading(){return!1}updateNodeState(){}async _addNodeBinaryPointData(e,r,i,o,a,d){const l=await this._extractBinaryPointData(i,d);if(null==l)throw new Error;const h=this._getObjectIdField(),u=this._controller.crsVertex,g=this.view.spatialReference,y=this.processor.graphicsCore,{positionData:f,featureIds:_}=l,b=3,v=f.length/b,x=new Array;for(let I=0;I<v;I++){const r=s(e.serviceObb)?e.serviceObb.center:[0,0,0],i=I*b,d=p(f[i+0],f[i+1],f[i+2]);c(d,d,r),e.serviceObb||a.push(d[0],d[1],d[2]),s(o)&&this._checkExtent(o,d);const l=_[I],v={};null!=l&&(v[h]=l);const S=null==l?t.generateUID():l;m(d,u,0,se,g,0,1);const w=E(se[0],se[1],se[2],g),D=this.loadedGraphics.get(S);if(s(D))D.level<e.level&&(oe.property=\"geometry\",oe.graphic=D,oe.oldValue=n(D.geometry),oe.newValue=w,D.geometry=w,y.graphicUpdateHandler(oe)),x.push(D);else{const r=t.generateUID();x.push({objectId:S,uid:r,geometry:w,attributes:v,visible:!0,level:e.level})}}r.graphics=x,r.featureIds=Array.from(_)}_addNodeLegacyPointData(e,r,i,o,a){const n=this._getObjectIdField(),d=this._controller.crsVertex,l=this.view.spatialReference,h=[0,0,0],u=new Array,c=new Array;for(const p of i.pointData){const r=p.featureDataPosition,i=r.length,g=p.geometries&&p.geometries[0]||ie[i],y=p.featureIds[0];if(\"points\"!==g.params.type)continue;s(o)&&this._checkExtent(o,r);const f={};null!=y&&(f[n]=y);const _=null==y?t.generateUID():y;let b;\"Embedded\"===g.type&&(b=g.params.vertexAttributes.position);for(let o=0;o<b.length;o+=i){for(let e=0;e<i;e++)h[e]=r[e]+b[o+e];const n=3===i;e.serviceObb||a.push(h[0],h[1],n?h[2]:0),m(h,d,0,se,l,0,1);const u=E(se[0],se[1],n?se[2]:void 0,l),p=this.loadedGraphics.get(_);s(p)?c.push(p):c.push({objectId:_,uid:t.generateUID(),geometry:u,attributes:f,visible:!0})}u.push(y)}r.graphics=c,r.featureIds=u}_updateNodeMemory(e){e.memory=4096+(s(e.numFeatures)?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>x(t)+e),512+8*e.featureIds.length+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this._nodesAddedToStage.forEach(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._nodesAddedToStage.clear(),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this._nodesAddedToStage.get(e);return t?(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeMany(t.graphics),this._nodesAddedToStage.delete(e),this._treeDebugger&&this._treeDebugger.update(),t):null}async loadCachedNodeData(e){return this._memCache.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,i){this._nodesAddedToStage.has(e.index)?Z.error(\"I3S node \"+e.id+\" already added\"):(this.loadedGraphics.addMany(t.graphics),this._nodesAddedToStage.set(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),await this.updateAttributes(e.index,r,i),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this._nodesAddedToStage.forEach((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this._nodesAddedToStage.forEach((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this._nodesAddedToStage.forEach(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this._nodesAddedToStage.get(e);r&&!a(r.attributeInfo)&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this._nodesAddedToStage.get(e);i&&(await this._attributeOverrides.apply(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(te(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||\"OBJECTID\"}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&Z.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this._nodesAddedToStage.forEach((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this.excludeObjectIdsSorted,s=this._getObjectIdField();for(const o of e.graphics){const e=o.visible,n=!t||this._evaluateClause(t,o),d=a(i)||r(i,o.attributes[s])<0;o.visible=n&&d,e!==o.visible&&(oe.graphic=o,oe.property=\"visible\",oe.oldValue=e,oe.newValue=o.visible,this.processor.graphicsCore.graphicUpdateHandler(oe))}}_invalidateElevation(e){const t=this._controller.crsIndex;f(e.extent,e.spatialReference,ae,t),this._controller.updateElevationChanged(ae,t)}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return s(this.filter)?this.filter.createQuery(e):new D(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(a(e)?this.createQuery():D.from(e))}getUsedMemory(){return this.processor?.graphicsCore?.usedMemory??0}getUnloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}_handleEdits(e){N(this.attributeEditingContext,e)}get attributeEditingContext(){const e=this._getObjectIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,forEachNode:e=>this._nodesAddedToStage.forEach((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this._attributeOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const o=this._nodesAddedToStage.get(t);if(s(i)){const t=this.loadedGraphics.get(i.attributes[e]);s(t)&&this.processor.graphicsCore.recreateGraphics([t])}else s(o)&&this.processor.graphicsCore.recreateGraphics(o.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this._nodesAddedToStage.size,core:this.processor.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this._nodesAddedToStage.size,loadedGraphics:this.loadedGraphics}}};e([h()],J.prototype,\"processor\",void 0),e([h({type:w})],J.prototype,\"filter\",void 0),e([h()],J.prototype,\"loadedGraphics\",void 0),e([h({aliasOf:\"layer\"})],J.prototype,\"i3slayer\",void 0),e([h()],J.prototype,\"_controller\",void 0),e([h()],J.prototype,\"updating\",void 0),e([h()],J.prototype,\"suspended\",void 0),e([h()],J.prototype,\"holeFilling\",void 0),e([h(B)],J.prototype,\"updatingProgress\",void 0),e([h({aliasOf:\"_controller.updatingProgress\"})],J.prototype,\"updatingProgressValue\",void 0),e([h(Y.requiredFields)],J.prototype,\"requiredFields\",null),e([h(Y.availableFields)],J.prototype,\"availableFields\",void 0),e([h()],J.prototype,\"fieldsHelper\",void 0),e([h({type:Number})],J.prototype,\"maximumNumberOfFeatures\",null),e([h({readOnly:!0})],J.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([h()],J.prototype,\"excludeObjectIdsSorted\",null),e([h({readOnly:!0})],J.prototype,\"lodFactor\",null),e([h({readOnly:!0})],J.prototype,\"hasM\",null),e([h({readOnly:!0})],J.prototype,\"hasZ\",null),J=e([u(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],J);const $=J;function X(e){return\"pointData\"in e}function ee(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function te(e){const t=e.attributeInfo;for(let r=0;r<e.graphics.length;r++){const i=e.graphics[r];if(i.attributes||(i.attributes={}),s(t)&&s(t.loadedAttributes))for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(i.attributes[e]=M(t.attributeData[e],r))}}function re(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,e.hasZ&&(e.zmin-=t,e.zmax+=t),e.hasM&&(e.mmin-=t,e.mmax+=t),e}const ie={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},se=g(),oe={graphic:null,property:null,oldValue:null,newValue:null},ae=_();export{$ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}