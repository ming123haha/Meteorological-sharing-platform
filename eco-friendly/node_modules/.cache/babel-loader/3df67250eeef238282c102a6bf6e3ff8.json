{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { workerMessages as e } from \"../../kernel.js\";\nimport t from \"../Error.js\";\nimport o from \"../Logger.js\";\nimport { removeMaybe as s } from \"../maybe.js\";\nimport { onAbortOrThrow as r, isPromiseLike as n, isAbortError as a } from \"../promiseUtils.js\";\nimport { newJobId as i, receiveMessage as l, toInvokeError as d, postMessage as h, MessageType as c } from \"./utils.js\";\nimport { createWorker as p } from \"./workerFactory.js\";\nconst b = o.getLogger(\"esri.core.workers\"),\n      {\n  ABORT: m,\n  INVOKE: _,\n  OPEN: g,\n  OPENED: u,\n  RESPONSE: j\n} = c;\n\nclass f {\n  constructor(e, t) {\n    this._outJobs = new Map(), this._inJobs = new Map(), this.worker = e, this.id = t, e.addEventListener(\"message\", this._onMessage.bind(this)), e.addEventListener(\"error\", e => {\n      e.preventDefault(), b.error(e);\n    });\n  }\n\n  static async create(e) {\n    const t = await p();\n    return new f(t, e);\n  }\n\n  terminate() {\n    this.worker.terminate();\n  }\n\n  async open(e, t = {}) {\n    const {\n      signal: o\n    } = t,\n          s = i();\n    return new Promise((t, n) => {\n      const a = {\n        resolve: t,\n        reject: n,\n        abortHandle: r(o, () => {\n          this._outJobs.delete(s), this._post({\n            type: m,\n            jobId: s\n          });\n        })\n      };\n      this._outJobs.set(s, a), this._post({\n        type: g,\n        jobId: s,\n        modulePath: e\n      });\n    });\n  }\n\n  _onMessage(e) {\n    const t = l(e);\n    if (t) switch (t.type) {\n      case u:\n        this._onOpenedMessage(t);\n\n        break;\n\n      case j:\n        this._onResponseMessage(t);\n\n        break;\n\n      case m:\n        this._onAbortMessage(t);\n\n        break;\n\n      case _:\n        this._onInvokeMessage(t);\n\n    }\n  }\n\n  _onAbortMessage(e) {\n    const t = this._inJobs,\n          o = e.jobId,\n          s = t.get(o);\n    s && (s.controller && s.controller.abort(), t.delete(o));\n  }\n\n  _onInvokeMessage(t) {\n    const {\n      methodName: o,\n      jobId: s,\n      data: r,\n      abortable: i\n    } = t,\n          l = i ? new AbortController() : null,\n          h = this._inJobs,\n          c = e[o];\n    let p;\n\n    try {\n      if (\"function\" != typeof c) throw new TypeError(`${o} is not a function`);\n      p = c.call(null, r, {\n        signal: l ? l.signal : null\n      });\n    } catch (b) {\n      return void this._post({\n        type: j,\n        jobId: s,\n        error: d(b)\n      });\n    }\n\n    n(p) ? (h.set(s, {\n      controller: l,\n      promise: p\n    }), p.then(e => {\n      h.has(s) && (h.delete(s), this._post({\n        type: j,\n        jobId: s\n      }, e));\n    }, e => {\n      h.has(s) && (h.delete(s), e || (e = {\n        message: \"Error encountered at method\" + o\n      }), a(e) || this._post({\n        type: j,\n        jobId: s,\n        error: d(e || {\n          message: `Error encountered at method ${o}`\n        })\n      }));\n    })) : this._post({\n      type: j,\n      jobId: s\n    }, p);\n  }\n\n  _onOpenedMessage(e) {\n    const {\n      jobId: t,\n      data: o\n    } = e,\n          r = this._outJobs.get(t);\n\n    r && (this._outJobs.delete(t), s(r.abortHandle), r.resolve(o));\n  }\n\n  _onResponseMessage(e) {\n    const {\n      jobId: o,\n      error: r,\n      data: n\n    } = e,\n          a = this._outJobs.get(o);\n\n    a && (this._outJobs.delete(o), s(a.abortHandle), r ? a.reject(t.fromJSON(JSON.parse(r))) : a.resolve(n));\n  }\n\n  _post(e, t, o) {\n    return h(this.worker, e, t, o);\n  }\n\n}\n\nexport { f as default };","map":{"version":3,"names":["workerMessages","e","t","o","removeMaybe","s","onAbortOrThrow","r","isPromiseLike","n","isAbortError","a","newJobId","i","receiveMessage","l","toInvokeError","d","postMessage","h","MessageType","c","createWorker","p","b","getLogger","ABORT","m","INVOKE","_","OPEN","g","OPENED","u","RESPONSE","j","f","constructor","_outJobs","Map","_inJobs","worker","id","addEventListener","_onMessage","bind","preventDefault","error","create","terminate","open","signal","Promise","resolve","reject","abortHandle","delete","_post","type","jobId","set","modulePath","_onOpenedMessage","_onResponseMessage","_onAbortMessage","_onInvokeMessage","get","controller","abort","methodName","data","abortable","AbortController","TypeError","call","promise","then","has","message","fromJSON","JSON","parse","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/workers/WorkerOwner.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{workerMessages as e}from\"../../kernel.js\";import t from\"../Error.js\";import o from\"../Logger.js\";import{removeMaybe as s}from\"../maybe.js\";import{onAbortOrThrow as r,isPromiseLike as n,isAbortError as a}from\"../promiseUtils.js\";import{newJobId as i,receiveMessage as l,toInvokeError as d,postMessage as h,MessageType as c}from\"./utils.js\";import{createWorker as p}from\"./workerFactory.js\";const b=o.getLogger(\"esri.core.workers\"),{ABORT:m,INVOKE:_,OPEN:g,OPENED:u,RESPONSE:j}=c;class f{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener(\"message\",this._onMessage.bind(this)),e.addEventListener(\"error\",(e=>{e.preventDefault(),b.error(e)}))}static async create(e){const t=await p();return new f(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:o}=t,s=i();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:r(o,(()=>{this._outJobs.delete(s),this._post({type:m,jobId:s})}))};this._outJobs.set(s,a),this._post({type:g,jobId:s,modulePath:e})}))}_onMessage(e){const t=l(e);if(t)switch(t.type){case u:this._onOpenedMessage(t);break;case j:this._onResponseMessage(t);break;case m:this._onAbortMessage(t);break;case _:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o))}_onInvokeMessage(t){const{methodName:o,jobId:s,data:r,abortable:i}=t,l=i?new AbortController:null,h=this._inJobs,c=e[o];let p;try{if(\"function\"!=typeof c)throw new TypeError(`${o} is not a function`);p=c.call(null,r,{signal:l?l.signal:null})}catch(b){return void this._post({type:j,jobId:s,error:d(b)})}n(p)?(h.set(s,{controller:l,promise:p}),p.then((e=>{h.has(s)&&(h.delete(s),this._post({type:j,jobId:s},e))}),(e=>{h.has(s)&&(h.delete(s),e||(e={message:\"Error encountered at method\"+o}),a(e)||this._post({type:j,jobId:s,error:d(e||{message:`Error encountered at method ${o}`})}))}))):this._post({type:j,jobId:s},p)}_onOpenedMessage(e){const{jobId:t,data:o}=e,r=this._outJobs.get(t);r&&(this._outJobs.delete(t),s(r.abortHandle),r.resolve(o))}_onResponseMessage(e){const{jobId:o,error:r,data:n}=e,a=this._outJobs.get(o);a&&(this._outJobs.delete(o),s(a.abortHandle),r?a.reject(t.fromJSON(JSON.parse(r))):a.resolve(n))}_post(e,t,o){return h(this.worker,e,t,o)}}export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}