{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { SqlError as e, SqlErrorCodes as t } from \"./errorsupport.js\";\nimport { FeatureServiceDatabaseType as r } from \"./shared.js\";\nimport { toWhereClauseFromTree as n } from \"./sqlUtils.js\";\nimport { WhereClause as i } from \"../../../core/sql/WhereClause.js\";\n\nfunction s(s) {\n  if (\"function\" === s.parseTree.type) {\n    if (0 === s.parseTree.args.value.length) return {\n      name: s.parseTree.name,\n      expr: null\n    };\n    if (s.parseTree.args.value.length > 1) throw new e(t.MissingStatisticParameters);\n    const a = i.create(n(s.parseTree.args.value[0], r.Standardised, s.parameters), s.fieldsIndex);\n    return {\n      name: s.parseTree.name,\n      expr: a\n    };\n  }\n\n  return null;\n}\n\nclass a {\n  constructor() {\n    this.field = \"\", this.tofieldname = \"\", this.typeofstat = \"MIN\", this.workingexpr = null;\n  }\n\n  clone() {\n    const e = new a();\n    return e.field = this.field, e.tofieldname = this.tofieldname, e.typeofstat = this.typeofstat, e.workingexpr = this.workingexpr, e;\n  }\n\n  static parseStatField(r, n, o) {\n    const l = new a();\n    l.field = r;\n    const p = i.create(n, o),\n          f = s(p);\n    if (null === f) throw new e(t.UnsupportedSqlFunction, {\n      function: \"\"\n    });\n    const u = f.name.toUpperCase().trim();\n\n    if (\"MIN\" === u) {\n      if (l.typeofstat = \"MIN\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"min\"\n      });\n    } else if (\"MAX\" === u) {\n      if (l.typeofstat = \"MAX\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"max\"\n      });\n    } else if (\"COUNT\" === u) l.typeofstat = \"COUNT\", l.workingexpr = f.expr;else if (\"STDEV\" === u) {\n      if (l.typeofstat = \"STDDEV\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"stdev\"\n      });\n    } else if (\"SUM\" === u) {\n      if (l.typeofstat = \"SUM\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"sum\"\n      });\n    } else if (\"MEAN\" === u) {\n      if (l.typeofstat = \"AVG\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: u\n      });\n    } else if (\"AVG\" === u) {\n      if (l.typeofstat = \"AVG\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"avg\"\n      });\n    } else {\n      if (\"VAR\" !== u) throw new e(t.UnsupportedSqlFunction, {\n        function: u\n      });\n      if (l.typeofstat = \"VAR\", l.workingexpr = f.expr, null === p) throw new e(t.InvalidFunctionParameters, {\n        function: \"var\"\n      });\n    }\n\n    return l;\n  }\n\n  toStatisticsName() {\n    switch (this.typeofstat.toUpperCase()) {\n      case \"MIN\":\n        return \"min\";\n\n      case \"MAX\":\n        return \"max\";\n\n      case \"SUM\":\n        return \"sum\";\n\n      case \"COUNT\":\n      default:\n        return \"count\";\n\n      case \"VAR\":\n        return \"var\";\n\n      case \"STDDEV\":\n        return \"stddev\";\n\n      case \"AVG\":\n        return \"avg\";\n    }\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"names":["SqlError","e","SqlErrorCodes","t","FeatureServiceDatabaseType","r","toWhereClauseFromTree","n","WhereClause","i","s","parseTree","type","args","value","length","name","expr","MissingStatisticParameters","a","create","Standardised","parameters","fieldsIndex","constructor","field","tofieldname","typeofstat","workingexpr","clone","parseStatField","o","l","p","f","UnsupportedSqlFunction","function","u","toUpperCase","trim","InvalidFunctionParameters","toStatisticsName","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureset/support/StatsField.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{SqlError as e,SqlErrorCodes as t}from\"./errorsupport.js\";import{FeatureServiceDatabaseType as r}from\"./shared.js\";import{toWhereClauseFromTree as n}from\"./sqlUtils.js\";import{WhereClause as i}from\"../../../core/sql/WhereClause.js\";function s(s){if(\"function\"===s.parseTree.type){if(0===s.parseTree.args.value.length)return{name:s.parseTree.name,expr:null};if(s.parseTree.args.value.length>1)throw new e(t.MissingStatisticParameters);const a=i.create(n(s.parseTree.args.value[0],r.Standardised,s.parameters),s.fieldsIndex);return{name:s.parseTree.name,expr:a}}return null}class a{constructor(){this.field=\"\",this.tofieldname=\"\",this.typeofstat=\"MIN\",this.workingexpr=null}clone(){const e=new a;return e.field=this.field,e.tofieldname=this.tofieldname,e.typeofstat=this.typeofstat,e.workingexpr=this.workingexpr,e}static parseStatField(r,n,o){const l=new a;l.field=r;const p=i.create(n,o),f=s(p);if(null===f)throw new e(t.UnsupportedSqlFunction,{function:\"\"});const u=f.name.toUpperCase().trim();if(\"MIN\"===u){if(l.typeofstat=\"MIN\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"min\"})}else if(\"MAX\"===u){if(l.typeofstat=\"MAX\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"max\"})}else if(\"COUNT\"===u)l.typeofstat=\"COUNT\",l.workingexpr=f.expr;else if(\"STDEV\"===u){if(l.typeofstat=\"STDDEV\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"stdev\"})}else if(\"SUM\"===u){if(l.typeofstat=\"SUM\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"sum\"})}else if(\"MEAN\"===u){if(l.typeofstat=\"AVG\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:u})}else if(\"AVG\"===u){if(l.typeofstat=\"AVG\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"avg\"})}else{if(\"VAR\"!==u)throw new e(t.UnsupportedSqlFunction,{function:u});if(l.typeofstat=\"VAR\",l.workingexpr=f.expr,null===p)throw new e(t.InvalidFunctionParameters,{function:\"var\"})}return l}toStatisticsName(){switch(this.typeofstat.toUpperCase()){case\"MIN\":return\"min\";case\"MAX\":return\"max\";case\"SUM\":return\"sum\";case\"COUNT\":default:return\"count\";case\"VAR\":return\"var\";case\"STDDEV\":return\"stddev\";case\"AVG\":return\"avg\"}}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}