{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as e, isSome as t } from \"../../../../../core/maybe.js\";\nimport { pt2px as i } from \"../../../../../core/screenUtils.js\";\nimport { FILTER_FLAG_0 as o, EFFECT_FLAG_0 as r } from \"../definitions.js\";\nimport { CollisionBitsetGrid as n, NONE as s, HAS_COLLISION as l, OUTSIDE_EXTENT as a } from \"./CollisionGrid.js\";\nimport { getSizeForValueSimple as c } from \"./visualVariableSimpleUtils.js\";\nconst d = 254,\n      u = 255,\n      f = 0;\n\nfunction b(e, i) {\n  const o = [];\n  e.forEachTile(e => o.push(e)), o.sort((e, t) => e.instanceId - t.instanceId), o.forEach(e => {\n    t(e.labelMetrics) && e.isReady && i(e, e.labelMetrics.getCursor());\n  });\n}\n\nfunction y(e) {\n  return e.layer && (\"feature\" === e.layer.type || \"csv\" === e.layer.type || \"geojson\" === e.layer.type || \"ogc-feature\" === e.layer.type || \"stream\" === e.layer.type || \"subtype-group\" === e.layer.type || \"wfs\" === e.layer.type);\n}\n\nfunction p(e) {\n  return t => i(c(t, e));\n}\n\nfunction m(e) {\n  const t = \"visualVariables\" in e && e.visualVariables;\n  if (!t) return null;\n\n  for (const i of t) if (\"size\" === i.type) return p(i);\n\n  return null;\n}\n\nfunction h(e) {\n  for (const t of e) {\n    const e = \"featureReduction\" in t && t.featureReduction && \"labelingInfo\" in t.featureReduction && t.featureReduction,\n          i = [...(t.labelingInfo || []), ...(e?.labelingInfo || [])];\n    if (!t.labelsVisible || !i.length) continue;\n    if (i.some(e => \"none\" === e.deconflictionStrategy)) return !0;\n  }\n\n  return !1;\n}\n\nfunction M(t, i) {\n  if (!y(i)) return;\n  const o = \"subtype-group\" === i.layer.type ? i.layer.sublayers.items : [i.layer],\n        r = i.layer.geometryType,\n        n = !h(o),\n        s = {};\n\n  if (\"subtype-group\" !== i.layer.type) {\n    if (\"heatmap\" === i.tileRenderer?.type) return;\n    const e = m(i.layer.renderer);\n    s[0] = e;\n  }\n\n  const l = i.tileRenderer;\n  if (e(l)) return;\n  const a = i.layer.visible && !i.suspended;\n  t.push({\n    tileRenderer: l,\n    vvEvaluators: s,\n    deconflictionEnabled: n,\n    geometryType: r,\n    visible: a\n  });\n}\n\nclass g {\n  run(e, t, i) {\n    const o = [];\n\n    for (let r = e.length - 1; r >= 0; r--) {\n      M(o, e[r]);\n    }\n\n    this._transformMetrics(o), this._runCollision(o, t, i);\n  }\n\n  _runCollision(e, t, i) {\n    const [o, r] = t.state.size,\n          s = new n(o, r, t.pixelRatio);\n\n    for (const {\n      tileRenderer: n,\n      deconflictionEnabled: l,\n      visible: a\n    } of e) {\n      const e = n.featuresView.attributeView;\n      l ? a ? (this._prepare(n), this._collideVisible(s, n, i), this._collideInvisible(s, n)) : b(n, (t, i) => {\n        for (; i.nextId();) e.setLabelMinZoom(i.id, u);\n      }) : b(n, (t, i) => {\n        for (; i.nextId();) e.setLabelMinZoom(i.id, f), a && s.insertMetrics(i);\n      });\n    }\n  }\n\n  _isFiltered(t, i, n) {\n    const s = i.getFilterFlags(t),\n          l = !n.hasFilter || !!(s & o),\n          a = e(n.featureEffect) || n.featureEffect.excludedLabelsVisible || !!(s & r);\n    return !(l && a);\n  }\n\n  _prepare(e) {\n    const t = e.featuresView.attributeView,\n          i = new Set();\n    b(e, (o, r) => {\n      for (; r.nextId();) {\n        if (i.has(r.id)) continue;\n\n        if (i.add(r.id), this._isFiltered(r.id, t, e.layerView)) {\n          t.setLabelMinZoom(r.id, d);\n          continue;\n        }\n\n        t.getLabelMinZoom(r.id) !== f ? t.setLabelMinZoom(r.id, u) : t.setLabelMinZoom(r.id, f);\n      }\n    });\n  }\n\n  _collideVisible(e, t, i) {\n    const o = t.featuresView.attributeView,\n          r = new Set();\n    b(t, (t, n) => {\n      for (; n.nextId();) if (!r.has(n.id)) if (t.key.level === i) {\n        if (0 === o.getLabelMinZoom(n.id)) {\n          switch (e.insertMetrics(n)) {\n            case a:\n              break;\n\n            case l:\n              o.setLabelMinZoom(n.id, d), r.add(n.id);\n              break;\n\n            case s:\n              o.setLabelMinZoom(n.id, f), r.add(n.id);\n          }\n        }\n      } else o.setLabelMinZoom(n.id, d);\n    });\n  }\n\n  _collideInvisible(e, t) {\n    const i = t.featuresView.attributeView,\n          o = new Set();\n    b(t, (t, r) => {\n      for (; r.nextId();) if (!o.has(r.id) && i.getLabelMinZoom(r.id) === u) {\n        switch (e.insertMetrics(r)) {\n          case a:\n            break;\n\n          case l:\n            i.setLabelMinZoom(r.id, u), o.add(r.id);\n            break;\n\n          case s:\n            i.setLabelMinZoom(r.id, f), o.add(r.id);\n        }\n      }\n    });\n  }\n\n  _transformMetrics(e) {\n    for (const {\n      tileRenderer: i,\n      geometryType: o,\n      vvEvaluators: r\n    } of e) b(i, (e, n) => {\n      const s = i.featuresView.attributeView,\n            l = e.transforms.labelMat2d;\n      l[4] = Math.round(l[4]), l[5] = Math.round(l[5]);\n      const a = \"polyline\" === o;\n\n      for (; n.next();) {\n        const e = n.boundsCount,\n              i = n.anchorX,\n              o = n.anchorY;\n        let c = n.size;\n        const d = r[0];\n\n        if (t(d)) {\n          const e = d(s.getVVSize(n.id));\n          c = isNaN(e) || null == e || e === 1 / 0 ? c : e;\n        }\n\n        const u = n.directionX * (c / 2),\n              f = n.directionY * (c / 2);\n\n        for (let t = 0; t < e; t++) {\n          let e = i,\n              r = n.anchorY;\n\n          if (a) {\n            let i = e + n.boundsX(t) + u,\n                o = r + n.boundsY(t) + f;\n            i = l[0] * i + l[2] * o + l[4], o = l[1] * i + l[3] * o + l[5], n.setBoundsComputedAnchorX(t, Math.floor(i)), n.setBoundsComputedAnchorY(t, Math.floor(o));\n          } else {\n            e = l[0] * i + l[2] * o + l[4], r = l[1] * i + l[3] * o + l[5];\n            const s = e + n.boundsX(t) + u,\n                  a = r + n.boundsY(t) + f;\n            n.setBoundsComputedAnchorX(t, s), n.setBoundsComputedAnchorY(t, a);\n          }\n        }\n      }\n    });\n  }\n\n}\n\nexport { g as CollisionEngine };","map":{"version":3,"names":["isNone","e","isSome","t","pt2px","i","FILTER_FLAG_0","o","EFFECT_FLAG_0","r","CollisionBitsetGrid","n","NONE","s","HAS_COLLISION","l","OUTSIDE_EXTENT","a","getSizeForValueSimple","c","d","u","f","b","forEachTile","push","sort","instanceId","forEach","labelMetrics","isReady","getCursor","y","layer","type","p","m","visualVariables","h","featureReduction","labelingInfo","labelsVisible","length","some","deconflictionStrategy","M","sublayers","items","geometryType","tileRenderer","renderer","visible","suspended","vvEvaluators","deconflictionEnabled","g","run","_transformMetrics","_runCollision","state","size","pixelRatio","featuresView","attributeView","_prepare","_collideVisible","_collideInvisible","nextId","setLabelMinZoom","id","insertMetrics","_isFiltered","getFilterFlags","hasFilter","featureEffect","excludedLabelsVisible","Set","has","add","layerView","getLabelMinZoom","key","level","transforms","labelMat2d","Math","round","next","boundsCount","anchorX","anchorY","getVVSize","isNaN","directionX","directionY","boundsX","boundsY","setBoundsComputedAnchorX","floor","setBoundsComputedAnchorY","CollisionEngine"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../../core/maybe.js\";import{pt2px as i}from\"../../../../../core/screenUtils.js\";import{FILTER_FLAG_0 as o,EFFECT_FLAG_0 as r}from\"../definitions.js\";import{CollisionBitsetGrid as n,NONE as s,HAS_COLLISION as l,OUTSIDE_EXTENT as a}from\"./CollisionGrid.js\";import{getSizeForValueSimple as c}from\"./visualVariableSimpleUtils.js\";const d=254,u=255,f=0;function b(e,i){const o=[];e.forEachTile((e=>o.push(e))),o.sort(((e,t)=>e.instanceId-t.instanceId)),o.forEach((e=>{t(e.labelMetrics)&&e.isReady&&i(e,e.labelMetrics.getCursor())}))}function y(e){return e.layer&&(\"feature\"===e.layer.type||\"csv\"===e.layer.type||\"geojson\"===e.layer.type||\"ogc-feature\"===e.layer.type||\"stream\"===e.layer.type||\"subtype-group\"===e.layer.type||\"wfs\"===e.layer.type)}function p(e){return t=>i(c(t,e))}function m(e){const t=\"visualVariables\"in e&&e.visualVariables;if(!t)return null;for(const i of t)if(\"size\"===i.type)return p(i);return null}function h(e){for(const t of e){const e=\"featureReduction\"in t&&t.featureReduction&&\"labelingInfo\"in t.featureReduction&&t.featureReduction,i=[...t.labelingInfo||[],...e?.labelingInfo||[]];if(!t.labelsVisible||!i.length)continue;if(i.some((e=>\"none\"===e.deconflictionStrategy)))return!0}return!1}function M(t,i){if(!y(i))return;const o=\"subtype-group\"===i.layer.type?i.layer.sublayers.items:[i.layer],r=i.layer.geometryType,n=!h(o),s={};if(\"subtype-group\"!==i.layer.type){if(\"heatmap\"===i.tileRenderer?.type)return;const e=m(i.layer.renderer);s[0]=e}const l=i.tileRenderer;if(e(l))return;const a=i.layer.visible&&!i.suspended;t.push({tileRenderer:l,vvEvaluators:s,deconflictionEnabled:n,geometryType:r,visible:a})}class g{run(e,t,i){const o=[];for(let r=e.length-1;r>=0;r--){M(o,e[r])}this._transformMetrics(o),this._runCollision(o,t,i)}_runCollision(e,t,i){const[o,r]=t.state.size,s=new n(o,r,t.pixelRatio);for(const{tileRenderer:n,deconflictionEnabled:l,visible:a}of e){const e=n.featuresView.attributeView;l?a?(this._prepare(n),this._collideVisible(s,n,i),this._collideInvisible(s,n)):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,u)})):b(n,((t,i)=>{for(;i.nextId();)e.setLabelMinZoom(i.id,f),a&&s.insertMetrics(i)}))}}_isFiltered(t,i,n){const s=i.getFilterFlags(t),l=!n.hasFilter||!!(s&o),a=e(n.featureEffect)||n.featureEffect.excludedLabelsVisible||!!(s&r);return!(l&&a)}_prepare(e){const t=e.featuresView.attributeView,i=new Set;b(e,((o,r)=>{for(;r.nextId();){if(i.has(r.id))continue;if(i.add(r.id),this._isFiltered(r.id,t,e.layerView)){t.setLabelMinZoom(r.id,d);continue}t.getLabelMinZoom(r.id)!==f?t.setLabelMinZoom(r.id,u):t.setLabelMinZoom(r.id,f)}}))}_collideVisible(e,t,i){const o=t.featuresView.attributeView,r=new Set;b(t,((t,n)=>{for(;n.nextId();)if(!r.has(n.id))if(t.key.level===i){if(0===o.getLabelMinZoom(n.id)){switch(e.insertMetrics(n)){case a:break;case l:o.setLabelMinZoom(n.id,d),r.add(n.id);break;case s:o.setLabelMinZoom(n.id,f),r.add(n.id)}}}else o.setLabelMinZoom(n.id,d)}))}_collideInvisible(e,t){const i=t.featuresView.attributeView,o=new Set;b(t,((t,r)=>{for(;r.nextId();)if(!o.has(r.id)&&i.getLabelMinZoom(r.id)===u){switch(e.insertMetrics(r)){case a:break;case l:i.setLabelMinZoom(r.id,u),o.add(r.id);break;case s:i.setLabelMinZoom(r.id,f),o.add(r.id)}}}))}_transformMetrics(e){for(const{tileRenderer:i,geometryType:o,vvEvaluators:r}of e)b(i,((e,n)=>{const s=i.featuresView.attributeView,l=e.transforms.labelMat2d;l[4]=Math.round(l[4]),l[5]=Math.round(l[5]);const a=\"polyline\"===o;for(;n.next();){const e=n.boundsCount,i=n.anchorX,o=n.anchorY;let c=n.size;const d=r[0];if(t(d)){const e=d(s.getVVSize(n.id));c=isNaN(e)||null==e||e===1/0?c:e}const u=n.directionX*(c/2),f=n.directionY*(c/2);for(let t=0;t<e;t++){let e=i,r=n.anchorY;if(a){let i=e+n.boundsX(t)+u,o=r+n.boundsY(t)+f;i=l[0]*i+l[2]*o+l[4],o=l[1]*i+l[3]*o+l[5],n.setBoundsComputedAnchorX(t,Math.floor(i)),n.setBoundsComputedAnchorY(t,Math.floor(o))}else{e=l[0]*i+l[2]*o+l[4],r=l[1]*i+l[3]*o+l[5];const s=e+n.boundsX(t)+u,a=r+n.boundsY(t)+f;n.setBoundsComputedAnchorX(t,s),n.setBoundsComputedAnchorY(t,a)}}}}))}}export{g as CollisionEngine};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,8BAAnC;AAAkE,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,oCAAtB;AAA2D,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,aAAa,IAAIC,CAA3C,QAAiD,mBAAjD;AAAqE,SAAOC,mBAAmB,IAAIC,CAA9B,EAAgCC,IAAI,IAAIC,CAAxC,EAA0CC,aAAa,IAAIC,CAA3D,EAA6DC,cAAc,IAAIC,CAA/E,QAAqF,oBAArF;AAA0G,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,gCAAtC;AAAuE,MAAMC,CAAC,GAAC,GAAR;AAAA,MAAYC,CAAC,GAAC,GAAd;AAAA,MAAkBC,CAAC,GAAC,CAApB;;AAAsB,SAASC,CAAT,CAAWtB,CAAX,EAAaI,CAAb,EAAe;EAAC,MAAME,CAAC,GAAC,EAAR;EAAWN,CAAC,CAACuB,WAAF,CAAevB,CAAC,IAAEM,CAAC,CAACkB,IAAF,CAAOxB,CAAP,CAAlB,GAA8BM,CAAC,CAACmB,IAAF,CAAQ,CAACzB,CAAD,EAAGE,CAAH,KAAOF,CAAC,CAAC0B,UAAF,GAAaxB,CAAC,CAACwB,UAA9B,CAA9B,EAAyEpB,CAAC,CAACqB,OAAF,CAAW3B,CAAC,IAAE;IAACE,CAAC,CAACF,CAAC,CAAC4B,YAAH,CAAD,IAAmB5B,CAAC,CAAC6B,OAArB,IAA8BzB,CAAC,CAACJ,CAAD,EAAGA,CAAC,CAAC4B,YAAF,CAAeE,SAAf,EAAH,CAA/B;EAA8D,CAA7E,CAAzE;AAAyJ;;AAAA,SAASC,CAAT,CAAW/B,CAAX,EAAa;EAAC,OAAOA,CAAC,CAACgC,KAAF,KAAU,cAAYhC,CAAC,CAACgC,KAAF,CAAQC,IAApB,IAA0B,UAAQjC,CAAC,CAACgC,KAAF,CAAQC,IAA1C,IAAgD,cAAYjC,CAAC,CAACgC,KAAF,CAAQC,IAApE,IAA0E,kBAAgBjC,CAAC,CAACgC,KAAF,CAAQC,IAAlG,IAAwG,aAAWjC,CAAC,CAACgC,KAAF,CAAQC,IAA3H,IAAiI,oBAAkBjC,CAAC,CAACgC,KAAF,CAAQC,IAA3J,IAAiK,UAAQjC,CAAC,CAACgC,KAAF,CAAQC,IAA3L,CAAP;AAAwM;;AAAA,SAASC,CAAT,CAAWlC,CAAX,EAAa;EAAC,OAAOE,CAAC,IAAEE,CAAC,CAACc,CAAC,CAAChB,CAAD,EAAGF,CAAH,CAAF,CAAX;AAAoB;;AAAA,SAASmC,CAAT,CAAWnC,CAAX,EAAa;EAAC,MAAME,CAAC,GAAC,qBAAoBF,CAApB,IAAuBA,CAAC,CAACoC,eAAjC;EAAiD,IAAG,CAAClC,CAAJ,EAAM,OAAO,IAAP;;EAAY,KAAI,MAAME,CAAV,IAAeF,CAAf,EAAiB,IAAG,WAASE,CAAC,CAAC6B,IAAd,EAAmB,OAAOC,CAAC,CAAC9B,CAAD,CAAR;;EAAY,OAAO,IAAP;AAAY;;AAAA,SAASiC,CAAT,CAAWrC,CAAX,EAAa;EAAC,KAAI,MAAME,CAAV,IAAeF,CAAf,EAAiB;IAAC,MAAMA,CAAC,GAAC,sBAAqBE,CAArB,IAAwBA,CAAC,CAACoC,gBAA1B,IAA4C,kBAAiBpC,CAAC,CAACoC,gBAA/D,IAAiFpC,CAAC,CAACoC,gBAA3F;IAAA,MAA4GlC,CAAC,GAAC,CAAC,IAAGF,CAAC,CAACqC,YAAF,IAAgB,EAAnB,CAAD,EAAuB,IAAGvC,CAAC,EAAEuC,YAAH,IAAiB,EAApB,CAAvB,CAA9G;IAA6J,IAAG,CAACrC,CAAC,CAACsC,aAAH,IAAkB,CAACpC,CAAC,CAACqC,MAAxB,EAA+B;IAAS,IAAGrC,CAAC,CAACsC,IAAF,CAAQ1C,CAAC,IAAE,WAASA,CAAC,CAAC2C,qBAAtB,CAAH,EAAiD,OAAM,CAAC,CAAP;EAAS;;EAAA,OAAM,CAAC,CAAP;AAAS;;AAAA,SAASC,CAAT,CAAW1C,CAAX,EAAaE,CAAb,EAAe;EAAC,IAAG,CAAC2B,CAAC,CAAC3B,CAAD,CAAL,EAAS;EAAO,MAAME,CAAC,GAAC,oBAAkBF,CAAC,CAAC4B,KAAF,CAAQC,IAA1B,GAA+B7B,CAAC,CAAC4B,KAAF,CAAQa,SAAR,CAAkBC,KAAjD,GAAuD,CAAC1C,CAAC,CAAC4B,KAAH,CAA/D;EAAA,MAAyExB,CAAC,GAACJ,CAAC,CAAC4B,KAAF,CAAQe,YAAnF;EAAA,MAAgGrC,CAAC,GAAC,CAAC2B,CAAC,CAAC/B,CAAD,CAApG;EAAA,MAAwGM,CAAC,GAAC,EAA1G;;EAA6G,IAAG,oBAAkBR,CAAC,CAAC4B,KAAF,CAAQC,IAA7B,EAAkC;IAAC,IAAG,cAAY7B,CAAC,CAAC4C,YAAF,EAAgBf,IAA/B,EAAoC;IAAO,MAAMjC,CAAC,GAACmC,CAAC,CAAC/B,CAAC,CAAC4B,KAAF,CAAQiB,QAAT,CAAT;IAA4BrC,CAAC,CAAC,CAAD,CAAD,GAAKZ,CAAL;EAAO;;EAAA,MAAMc,CAAC,GAACV,CAAC,CAAC4C,YAAV;EAAuB,IAAGhD,CAAC,CAACc,CAAD,CAAJ,EAAQ;EAAO,MAAME,CAAC,GAACZ,CAAC,CAAC4B,KAAF,CAAQkB,OAAR,IAAiB,CAAC9C,CAAC,CAAC+C,SAA5B;EAAsCjD,CAAC,CAACsB,IAAF,CAAO;IAACwB,YAAY,EAAClC,CAAd;IAAgBsC,YAAY,EAACxC,CAA7B;IAA+ByC,oBAAoB,EAAC3C,CAApD;IAAsDqC,YAAY,EAACvC,CAAnE;IAAqE0C,OAAO,EAAClC;EAA7E,CAAP;AAAwF;;AAAA,MAAMsC,CAAN,CAAO;EAACC,GAAG,CAACvD,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAME,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIE,CAAC,GAACR,CAAC,CAACyC,MAAF,GAAS,CAAnB,EAAqBjC,CAAC,IAAE,CAAxB,EAA0BA,CAAC,EAA3B,EAA8B;MAACoC,CAAC,CAACtC,CAAD,EAAGN,CAAC,CAACQ,CAAD,CAAJ,CAAD;IAAU;;IAAA,KAAKgD,iBAAL,CAAuBlD,CAAvB,GAA0B,KAAKmD,aAAL,CAAmBnD,CAAnB,EAAqBJ,CAArB,EAAuBE,CAAvB,CAA1B;EAAoD;;EAAAqD,aAAa,CAACzD,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAK,CAACE,CAAD,EAAGE,CAAH,IAAMN,CAAC,CAACwD,KAAF,CAAQC,IAAnB;IAAA,MAAwB/C,CAAC,GAAC,IAAIF,CAAJ,CAAMJ,CAAN,EAAQE,CAAR,EAAUN,CAAC,CAAC0D,UAAZ,CAA1B;;IAAkD,KAAI,MAAK;MAACZ,YAAY,EAACtC,CAAd;MAAgB2C,oBAAoB,EAACvC,CAArC;MAAuCoC,OAAO,EAAClC;IAA/C,CAAT,IAA6DhB,CAA7D,EAA+D;MAAC,MAAMA,CAAC,GAACU,CAAC,CAACmD,YAAF,CAAeC,aAAvB;MAAqChD,CAAC,GAACE,CAAC,IAAE,KAAK+C,QAAL,CAAcrD,CAAd,GAAiB,KAAKsD,eAAL,CAAqBpD,CAArB,EAAuBF,CAAvB,EAAyBN,CAAzB,CAAjB,EAA6C,KAAK6D,iBAAL,CAAuBrD,CAAvB,EAAyBF,CAAzB,CAA/C,IAA4EY,CAAC,CAACZ,CAAD,EAAI,CAACR,CAAD,EAAGE,CAAH,KAAO;QAAC,OAAKA,CAAC,CAAC8D,MAAF,EAAL,GAAiBlE,CAAC,CAACmE,eAAF,CAAkB/D,CAAC,CAACgE,EAApB,EAAuBhD,CAAvB;MAA0B,CAAvD,CAA/E,GAAyIE,CAAC,CAACZ,CAAD,EAAI,CAACR,CAAD,EAAGE,CAAH,KAAO;QAAC,OAAKA,CAAC,CAAC8D,MAAF,EAAL,GAAiBlE,CAAC,CAACmE,eAAF,CAAkB/D,CAAC,CAACgE,EAApB,EAAuB/C,CAAvB,GAA0BL,CAAC,IAAEJ,CAAC,CAACyD,aAAF,CAAgBjE,CAAhB,CAA7B;MAAgD,CAA7E,CAA3I;IAA2N;EAAC;;EAAAkE,WAAW,CAACpE,CAAD,EAAGE,CAAH,EAAKM,CAAL,EAAO;IAAC,MAAME,CAAC,GAACR,CAAC,CAACmE,cAAF,CAAiBrE,CAAjB,CAAR;IAAA,MAA4BY,CAAC,GAAC,CAACJ,CAAC,CAAC8D,SAAH,IAAc,CAAC,EAAE5D,CAAC,GAACN,CAAJ,CAA7C;IAAA,MAAoDU,CAAC,GAAChB,CAAC,CAACU,CAAC,CAAC+D,aAAH,CAAD,IAAoB/D,CAAC,CAAC+D,aAAF,CAAgBC,qBAApC,IAA2D,CAAC,EAAE9D,CAAC,GAACJ,CAAJ,CAAlH;IAAyH,OAAM,EAAEM,CAAC,IAAEE,CAAL,CAAN;EAAc;;EAAA+C,QAAQ,CAAC/D,CAAD,EAAG;IAAC,MAAME,CAAC,GAACF,CAAC,CAAC6D,YAAF,CAAeC,aAAvB;IAAA,MAAqC1D,CAAC,GAAC,IAAIuE,GAAJ,EAAvC;IAA+CrD,CAAC,CAACtB,CAAD,EAAI,CAACM,CAAD,EAAGE,CAAH,KAAO;MAAC,OAAKA,CAAC,CAAC0D,MAAF,EAAL,GAAiB;QAAC,IAAG9D,CAAC,CAACwE,GAAF,CAAMpE,CAAC,CAAC4D,EAAR,CAAH,EAAe;;QAAS,IAAGhE,CAAC,CAACyE,GAAF,CAAMrE,CAAC,CAAC4D,EAAR,GAAY,KAAKE,WAAL,CAAiB9D,CAAC,CAAC4D,EAAnB,EAAsBlE,CAAtB,EAAwBF,CAAC,CAAC8E,SAA1B,CAAf,EAAoD;UAAC5E,CAAC,CAACiE,eAAF,CAAkB3D,CAAC,CAAC4D,EAApB,EAAuBjD,CAAvB;UAA0B;QAAS;;QAAAjB,CAAC,CAAC6E,eAAF,CAAkBvE,CAAC,CAAC4D,EAApB,MAA0B/C,CAA1B,GAA4BnB,CAAC,CAACiE,eAAF,CAAkB3D,CAAC,CAAC4D,EAApB,EAAuBhD,CAAvB,CAA5B,GAAsDlB,CAAC,CAACiE,eAAF,CAAkB3D,CAAC,CAAC4D,EAApB,EAAuB/C,CAAvB,CAAtD;MAAgF;IAAC,CAA/N,CAAD;EAAmO;;EAAA2C,eAAe,CAAChE,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAME,CAAC,GAACJ,CAAC,CAAC2D,YAAF,CAAeC,aAAvB;IAAA,MAAqCtD,CAAC,GAAC,IAAImE,GAAJ,EAAvC;IAA+CrD,CAAC,CAACpB,CAAD,EAAI,CAACA,CAAD,EAAGQ,CAAH,KAAO;MAAC,OAAKA,CAAC,CAACwD,MAAF,EAAL,GAAiB,IAAG,CAAC1D,CAAC,CAACoE,GAAF,CAAMlE,CAAC,CAAC0D,EAAR,CAAJ,EAAgB,IAAGlE,CAAC,CAAC8E,GAAF,CAAMC,KAAN,KAAc7E,CAAjB,EAAmB;QAAC,IAAG,MAAIE,CAAC,CAACyE,eAAF,CAAkBrE,CAAC,CAAC0D,EAApB,CAAP,EAA+B;UAAC,QAAOpE,CAAC,CAACqE,aAAF,CAAgB3D,CAAhB,CAAP;YAA2B,KAAKM,CAAL;cAAO;;YAAM,KAAKF,CAAL;cAAOR,CAAC,CAAC6D,eAAF,CAAkBzD,CAAC,CAAC0D,EAApB,EAAuBjD,CAAvB,GAA0BX,CAAC,CAACqE,GAAF,CAAMnE,CAAC,CAAC0D,EAAR,CAA1B;cAAsC;;YAAM,KAAKxD,CAAL;cAAON,CAAC,CAAC6D,eAAF,CAAkBzD,CAAC,CAAC0D,EAApB,EAAuB/C,CAAvB,GAA0Bb,CAAC,CAACqE,GAAF,CAAMnE,CAAC,CAAC0D,EAAR,CAA1B;UAAlG;QAAyI;MAAC,CAA9L,MAAmM9D,CAAC,CAAC6D,eAAF,CAAkBzD,CAAC,CAAC0D,EAApB,EAAuBjD,CAAvB;IAA0B,CAA1Q,CAAD;EAA8Q;;EAAA8C,iBAAiB,CAACjE,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAME,CAAC,GAACF,CAAC,CAAC2D,YAAF,CAAeC,aAAvB;IAAA,MAAqCxD,CAAC,GAAC,IAAIqE,GAAJ,EAAvC;IAA+CrD,CAAC,CAACpB,CAAD,EAAI,CAACA,CAAD,EAAGM,CAAH,KAAO;MAAC,OAAKA,CAAC,CAAC0D,MAAF,EAAL,GAAiB,IAAG,CAAC5D,CAAC,CAACsE,GAAF,CAAMpE,CAAC,CAAC4D,EAAR,CAAD,IAAchE,CAAC,CAAC2E,eAAF,CAAkBvE,CAAC,CAAC4D,EAApB,MAA0BhD,CAA3C,EAA6C;QAAC,QAAOpB,CAAC,CAACqE,aAAF,CAAgB7D,CAAhB,CAAP;UAA2B,KAAKQ,CAAL;YAAO;;UAAM,KAAKF,CAAL;YAAOV,CAAC,CAAC+D,eAAF,CAAkB3D,CAAC,CAAC4D,EAApB,EAAuBhD,CAAvB,GAA0Bd,CAAC,CAACuE,GAAF,CAAMrE,CAAC,CAAC4D,EAAR,CAA1B;YAAsC;;UAAM,KAAKxD,CAAL;YAAOR,CAAC,CAAC+D,eAAF,CAAkB3D,CAAC,CAAC4D,EAApB,EAAuB/C,CAAvB,GAA0Bf,CAAC,CAACuE,GAAF,CAAMrE,CAAC,CAAC4D,EAAR,CAA1B;QAAlG;MAAyI;IAAC,CAArN,CAAD;EAAyN;;EAAAZ,iBAAiB,CAACxD,CAAD,EAAG;IAAC,KAAI,MAAK;MAACgD,YAAY,EAAC5C,CAAd;MAAgB2C,YAAY,EAACzC,CAA7B;MAA+B8C,YAAY,EAAC5C;IAA5C,CAAT,IAA0DR,CAA1D,EAA4DsB,CAAC,CAAClB,CAAD,EAAI,CAACJ,CAAD,EAAGU,CAAH,KAAO;MAAC,MAAME,CAAC,GAACR,CAAC,CAACyD,YAAF,CAAeC,aAAvB;MAAA,MAAqChD,CAAC,GAACd,CAAC,CAACkF,UAAF,CAAaC,UAApD;MAA+DrE,CAAC,CAAC,CAAD,CAAD,GAAKsE,IAAI,CAACC,KAAL,CAAWvE,CAAC,CAAC,CAAD,CAAZ,CAAL,EAAsBA,CAAC,CAAC,CAAD,CAAD,GAAKsE,IAAI,CAACC,KAAL,CAAWvE,CAAC,CAAC,CAAD,CAAZ,CAA3B;MAA4C,MAAME,CAAC,GAAC,eAAaV,CAArB;;MAAuB,OAAKI,CAAC,CAAC4E,IAAF,EAAL,GAAe;QAAC,MAAMtF,CAAC,GAACU,CAAC,CAAC6E,WAAV;QAAA,MAAsBnF,CAAC,GAACM,CAAC,CAAC8E,OAA1B;QAAA,MAAkClF,CAAC,GAACI,CAAC,CAAC+E,OAAtC;QAA8C,IAAIvE,CAAC,GAACR,CAAC,CAACiD,IAAR;QAAa,MAAMxC,CAAC,GAACX,CAAC,CAAC,CAAD,CAAT;;QAAa,IAAGN,CAAC,CAACiB,CAAD,CAAJ,EAAQ;UAAC,MAAMnB,CAAC,GAACmB,CAAC,CAACP,CAAC,CAAC8E,SAAF,CAAYhF,CAAC,CAAC0D,EAAd,CAAD,CAAT;UAA6BlD,CAAC,GAACyE,KAAK,CAAC3F,CAAD,CAAL,IAAU,QAAMA,CAAhB,IAAmBA,CAAC,KAAG,IAAE,CAAzB,GAA2BkB,CAA3B,GAA6BlB,CAA/B;QAAiC;;QAAA,MAAMoB,CAAC,GAACV,CAAC,CAACkF,UAAF,IAAc1E,CAAC,GAAC,CAAhB,CAAR;QAAA,MAA2BG,CAAC,GAACX,CAAC,CAACmF,UAAF,IAAc3E,CAAC,GAAC,CAAhB,CAA7B;;QAAgD,KAAI,IAAIhB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAd,EAAgBE,CAAC,EAAjB,EAAoB;UAAC,IAAIF,CAAC,GAACI,CAAN;UAAA,IAAQI,CAAC,GAACE,CAAC,CAAC+E,OAAZ;;UAAoB,IAAGzE,CAAH,EAAK;YAAC,IAAIZ,CAAC,GAACJ,CAAC,GAACU,CAAC,CAACoF,OAAF,CAAU5F,CAAV,CAAF,GAAekB,CAArB;YAAA,IAAuBd,CAAC,GAACE,CAAC,GAACE,CAAC,CAACqF,OAAF,CAAU7F,CAAV,CAAF,GAAemB,CAAxC;YAA0CjB,CAAC,GAACU,CAAC,CAAC,CAAD,CAAD,GAAKV,CAAL,GAAOU,CAAC,CAAC,CAAD,CAAD,GAAKR,CAAZ,GAAcQ,CAAC,CAAC,CAAD,CAAjB,EAAqBR,CAAC,GAACQ,CAAC,CAAC,CAAD,CAAD,GAAKV,CAAL,GAAOU,CAAC,CAAC,CAAD,CAAD,GAAKR,CAAZ,GAAcQ,CAAC,CAAC,CAAD,CAAtC,EAA0CJ,CAAC,CAACsF,wBAAF,CAA2B9F,CAA3B,EAA6BkF,IAAI,CAACa,KAAL,CAAW7F,CAAX,CAA7B,CAA1C,EAAsFM,CAAC,CAACwF,wBAAF,CAA2BhG,CAA3B,EAA6BkF,IAAI,CAACa,KAAL,CAAW3F,CAAX,CAA7B,CAAtF;UAAkI,CAAlL,MAAsL;YAACN,CAAC,GAACc,CAAC,CAAC,CAAD,CAAD,GAAKV,CAAL,GAAOU,CAAC,CAAC,CAAD,CAAD,GAAKR,CAAZ,GAAcQ,CAAC,CAAC,CAAD,CAAjB,EAAqBN,CAAC,GAACM,CAAC,CAAC,CAAD,CAAD,GAAKV,CAAL,GAAOU,CAAC,CAAC,CAAD,CAAD,GAAKR,CAAZ,GAAcQ,CAAC,CAAC,CAAD,CAAtC;YAA0C,MAAMF,CAAC,GAACZ,CAAC,GAACU,CAAC,CAACoF,OAAF,CAAU5F,CAAV,CAAF,GAAekB,CAAvB;YAAA,MAAyBJ,CAAC,GAACR,CAAC,GAACE,CAAC,CAACqF,OAAF,CAAU7F,CAAV,CAAF,GAAemB,CAA1C;YAA4CX,CAAC,CAACsF,wBAAF,CAA2B9F,CAA3B,EAA6BU,CAA7B,GAAgCF,CAAC,CAACwF,wBAAF,CAA2BhG,CAA3B,EAA6Bc,CAA7B,CAAhC;UAAgE;QAAC;MAAC;IAAC,CAAttB,CAAD;EAA0tB;;AAAl1E;;AAAm1E,SAAOsC,CAAC,IAAI6C,eAAZ"},"metadata":{},"sourceType":"module"}