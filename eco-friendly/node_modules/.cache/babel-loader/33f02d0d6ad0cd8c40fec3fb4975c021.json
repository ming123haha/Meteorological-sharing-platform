{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { f as o } from \"../../../../../../chunks/vec2f64.js\";\nimport { IsNaN as r } from \"../../../core/shaderLibrary/util/IsNaN.glsl.js\";\nimport { Float2PassUniform as e } from \"../../../core/shaderModules/Float2PassUniform.js\";\nimport { glsl as a } from \"../../../core/shaderModules/interfaces.js\";\nimport { Matrix3PassUniform as s } from \"../../../core/shaderModules/Matrix3PassUniform.js\";\nimport { Matrix4PassUniform as t } from \"../../../core/shaderModules/Matrix4PassUniform.js\";\nimport { Matrix4Uniform as l } from \"../../../core/shaderModules/Matrix4Uniform.js\";\nconst i = o(.5, -4e-4);\n\nfunction c(o, c) {\n  const f = o.vertex;\n  f.include(r), f.constants.add(\"depthBias\", \"vec2\", i), f.uniforms.add(new e(\"inverseViewport\", (o, r) => r.inverseViewport)), c.legacy ? (f.uniforms.add(new l(\"localView\")), f.uniforms.add(new t(\"proj\", (o, r) => r.camera.projectionMatrix)), f.code.add(a`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {\nfloat offsetXY = depthBias.x;\nvec4 projNormal = proj * localView * vec4(globalNormal, 0.0);\nreturn offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;\n}`)) : (f.uniforms.add(new s(\"transformNormalViewFromGlobal\", o => o.transformNormalViewFromGlobal)), f.uniforms.add(new t(\"transformProjFromView\", o => o.transformProjFromView)), f.code.add(a`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {\nfloat offsetXY = depthBias.x;\nvec4 projNormal = transformProjFromView * vec4(transformNormalViewFromGlobal * globalNormal, 0.0);\nreturn offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;\n}`)), f.code.add(a`float _calculateProjectedBiasZ(vec4 projPos) {\nfloat offsetZ = depthBias.y;\nreturn sqrt(max(projPos.z,0.0)) * offsetZ;\n}\nvec4 adjustProjectedPosition(vec4 projPos, vec3 worldNormal, float lineWidth) {\nvec2 offsetXY = calculateProjectedBiasXY(projPos, worldNormal);\nif (!isNaN(offsetXY.x) && !isNaN(offsetXY.y)) {\nprojPos.xy += offsetXY;\n}\nprojPos.z += _calculateProjectedBiasZ(projPos);\nreturn projPos;\n}`);\n}\n\nexport { c as AdjustProjectedPosition };","map":{"version":3,"names":["f","o","IsNaN","r","Float2PassUniform","e","glsl","a","Matrix3PassUniform","s","Matrix4PassUniform","t","Matrix4Uniform","l","i","c","vertex","include","constants","add","uniforms","inverseViewport","legacy","camera","projectionMatrix","code","transformNormalViewFromGlobal","transformProjFromView","AdjustProjectedPosition"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/sources/edgeRenderer/AdjustProjectedPosition.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{f as o}from\"../../../../../../chunks/vec2f64.js\";import{IsNaN as r}from\"../../../core/shaderLibrary/util/IsNaN.glsl.js\";import{Float2PassUniform as e}from\"../../../core/shaderModules/Float2PassUniform.js\";import{glsl as a}from\"../../../core/shaderModules/interfaces.js\";import{Matrix3PassUniform as s}from\"../../../core/shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as t}from\"../../../core/shaderModules/Matrix4PassUniform.js\";import{Matrix4Uniform as l}from\"../../../core/shaderModules/Matrix4Uniform.js\";const i=o(.5,-4e-4);function c(o,c){const f=o.vertex;f.include(r),f.constants.add(\"depthBias\",\"vec2\",i),f.uniforms.add(new e(\"inverseViewport\",((o,r)=>r.inverseViewport))),c.legacy?(f.uniforms.add(new l(\"localView\")),f.uniforms.add(new t(\"proj\",((o,r)=>r.camera.projectionMatrix))),f.code.add(a`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {\nfloat offsetXY = depthBias.x;\nvec4 projNormal = proj * localView * vec4(globalNormal, 0.0);\nreturn offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;\n}`)):(f.uniforms.add(new s(\"transformNormalViewFromGlobal\",(o=>o.transformNormalViewFromGlobal))),f.uniforms.add(new t(\"transformProjFromView\",(o=>o.transformProjFromView))),f.code.add(a`vec2 calculateProjectedBiasXY(vec4 projPos, vec3 globalNormal) {\nfloat offsetXY = depthBias.x;\nvec4 projNormal = transformProjFromView * vec4(transformNormalViewFromGlobal * globalNormal, 0.0);\nreturn offsetXY * projPos.w * 2.0 * inverseViewport * normalize(projNormal.xyz).xy;\n}`)),f.code.add(a`float _calculateProjectedBiasZ(vec4 projPos) {\nfloat offsetZ = depthBias.y;\nreturn sqrt(max(projPos.z,0.0)) * offsetZ;\n}\nvec4 adjustProjectedPosition(vec4 projPos, vec3 worldNormal, float lineWidth) {\nvec2 offsetXY = calculateProjectedBiasXY(projPos, worldNormal);\nif (!isNaN(offsetXY.x) && !isNaN(offsetXY.y)) {\nprojPos.xy += offsetXY;\n}\nprojPos.z += _calculateProjectedBiasZ(projPos);\nreturn projPos;\n}`)}export{c as AdjustProjectedPosition};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,gDAAtB;AAAuE,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,kDAAlC;AAAqF,SAAOC,IAAI,IAAIC,CAAf,QAAqB,2CAArB;AAAiE,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,mDAAnC;AAAuF,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,mDAAnC;AAAuF,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,+CAA/B;AAA+E,MAAMC,CAAC,GAACb,CAAC,CAAC,EAAD,EAAI,CAAC,IAAL,CAAT;;AAAoB,SAASc,CAAT,CAAWd,CAAX,EAAac,CAAb,EAAe;EAAC,MAAMf,CAAC,GAACC,CAAC,CAACe,MAAV;EAAiBhB,CAAC,CAACiB,OAAF,CAAUd,CAAV,GAAaH,CAAC,CAACkB,SAAF,CAAYC,GAAZ,CAAgB,WAAhB,EAA4B,MAA5B,EAAmCL,CAAnC,CAAb,EAAmDd,CAAC,CAACoB,QAAF,CAAWD,GAAX,CAAe,IAAId,CAAJ,CAAM,iBAAN,EAAyB,CAACJ,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACkB,eAAlC,CAAf,CAAnD,EAAuHN,CAAC,CAACO,MAAF,IAAUtB,CAAC,CAACoB,QAAF,CAAWD,GAAX,CAAe,IAAIN,CAAJ,CAAM,WAAN,CAAf,GAAmCb,CAAC,CAACoB,QAAF,CAAWD,GAAX,CAAe,IAAIR,CAAJ,CAAM,MAAN,EAAc,CAACV,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACoB,MAAF,CAASC,gBAA9B,CAAf,CAAnC,EAAoGxB,CAAC,CAACyB,IAAF,CAAON,GAAP,CAAWZ,CAAE;AACzzB;AACA;AACA;AACA,EAJ4yB,CAA9G,KAIxrBP,CAAC,CAACoB,QAAF,CAAWD,GAAX,CAAe,IAAIV,CAAJ,CAAM,+BAAN,EAAuCR,CAAC,IAAEA,CAAC,CAACyB,6BAA5C,CAAf,GAA4F1B,CAAC,CAACoB,QAAF,CAAWD,GAAX,CAAe,IAAIR,CAAJ,CAAM,uBAAN,EAA+BV,CAAC,IAAEA,CAAC,CAAC0B,qBAApC,CAAf,CAA5F,EAAwK3B,CAAC,CAACyB,IAAF,CAAON,GAAP,CAAWZ,CAAE;AAC3L;AACA;AACA;AACA,EAJ8K,CAJghB,CAAvH,EAQlkBP,CAAC,CAACyB,IAAF,CAAON,GAAP,CAAWZ,CAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAXK,CARkkB;AAmBnkB;;AAAA,SAAOQ,CAAC,IAAIa,uBAAZ"},"metadata":{},"sourceType":"module"}