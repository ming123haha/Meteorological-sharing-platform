{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../TimeExtent.js\";\nimport { unwrap as t, isSome as n, isNone as i } from \"../core/maybe.js\";\nimport { eachAlways as o } from \"../core/promiseUtils.js\";\nimport { offsetDate as r } from \"../core/timeUtils.js\";\n\nfunction m(e) {\n  return void 0 !== e.timeInfo;\n}\n\nasync function s(n, r) {\n  if (0 === n.length) return e.allTime;\n  const s = n.filter(m);\n  await Promise.all(s.map(e => e.load({\n    signal: r\n  })));\n  const a = [],\n        f = [];\n\n  for (const e of s) \"feature\" !== e?.type && \"map-image\" !== e?.type || !e.timeInfo.hasLiveData ? f.push(e) : a.push(e);\n\n  const u = e => i(e) || e.isAllTime,\n        c = f.map(e => e.timeInfo.fullTimeExtent);\n\n  if (c.some(u)) return e.allTime;\n  const l = a.map(async e => {\n    const {\n      timeExtent: n\n    } = await e.fetchRecomputedExtents({\n      signal: r\n    });\n    return n || t(e.timeInfo.fullTimeExtent);\n  }),\n        p = (await o(l)).map(e => e.value);\n  if (p.some(u)) return e.allTime;\n  return p.concat(c).reduce((e, t) => e.union(t));\n}\n\nfunction a(t) {\n  if (!t) return t;\n  const {\n    start: i,\n    end: o\n  } = t;\n  return new e({\n    start: n(i) ? r(i, -i.getTimezoneOffset(), \"minutes\") : i,\n    end: n(o) ? r(o, -o.getTimezoneOffset(), \"minutes\") : o\n  });\n}\n\nfunction f(t) {\n  if (!t) return t;\n  const {\n    start: i,\n    end: o\n  } = t;\n  return new e({\n    start: n(i) ? r(i, i.getTimezoneOffset(), \"minutes\") : i,\n    end: n(o) ? r(o, o.getTimezoneOffset(), \"minutes\") : o\n  });\n}\n\nexport { s as getTimeExtentFromLayers, f as toLocalTimeExtent, a as toUTCTimeExtent };","map":{"version":3,"names":["e","unwrap","t","isSome","n","isNone","i","eachAlways","o","offsetDate","r","m","timeInfo","s","length","allTime","filter","Promise","all","map","load","signal","a","f","type","hasLiveData","push","u","isAllTime","c","fullTimeExtent","some","l","timeExtent","fetchRecomputedExtents","p","value","concat","reduce","union","start","end","getTimezoneOffset","getTimeExtentFromLayers","toLocalTimeExtent","toUTCTimeExtent"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/support/timeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../TimeExtent.js\";import{unwrap as t,isSome as n,isNone as i}from\"../core/maybe.js\";import{eachAlways as o}from\"../core/promiseUtils.js\";import{offsetDate as r}from\"../core/timeUtils.js\";function m(e){return void 0!==e.timeInfo}async function s(n,r){if(0===n.length)return e.allTime;const s=n.filter(m);await Promise.all(s.map((e=>e.load({signal:r}))));const a=[],f=[];for(const e of s)\"feature\"!==e?.type&&\"map-image\"!==e?.type||!e.timeInfo.hasLiveData?f.push(e):a.push(e);const u=e=>i(e)||e.isAllTime,c=f.map((e=>e.timeInfo.fullTimeExtent));if(c.some(u))return e.allTime;const l=a.map((async e=>{const{timeExtent:n}=await e.fetchRecomputedExtents({signal:r});return n||t(e.timeInfo.fullTimeExtent)})),p=(await o(l)).map((e=>e.value));if(p.some(u))return e.allTime;return p.concat(c).reduce(((e,t)=>e.union(t)))}function a(t){if(!t)return t;const{start:i,end:o}=t;return new e({start:n(i)?r(i,-i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,-o.getTimezoneOffset(),\"minutes\"):o})}function f(t){if(!t)return t;const{start:i,end:o}=t;return new e({start:n(i)?r(i,i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,o.getTimezoneOffset(),\"minutes\"):o})}export{s as getTimeExtentFromLayers,f as toLocalTimeExtent,a as toUTCTimeExtent};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}