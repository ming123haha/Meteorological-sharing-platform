{"ast":null,"code":"const types = {\n  control: {\n    unload: 'removeControl'\n  },\n  layer: {\n    unload: 'removeTileLayer'\n  },\n  overlay: {\n    unload: 'removeOverlay'\n  },\n  contextMenu: {\n    unload: 'removeContextMenu'\n  }\n};\n\nconst getParent = $component => $component.abstract || $component.$el === $component.$children[0].$el ? getParent($component.$parent) : $component;\n\nfunction destroyInstance() {\n  const {\n    unload,\n    renderByParent,\n    $parent\n  } = this;\n\n  if (renderByParent) {\n    $parent.reload();\n  }\n\n  unload();\n}\n\nclass Mixin {\n  constructor(prop) {\n    this.methods = {\n      ready() {\n        const $parent = getParent(this.$parent);\n        const BMap = this.BMap = $parent.BMap;\n        const map = this.map = $parent.map;\n        this.load();\n        this.$emit('ready', {\n          BMap,\n          map\n        });\n      },\n\n      transmitEvent(e) {\n        this.$emit(e.type.replace(/^on/, ''), e);\n      },\n\n      reload() {\n        this && this.BMap && this.$nextTick(() => {\n          this.unload();\n          this.$nextTick(this.load);\n        });\n      },\n\n      unload() {\n        const {\n          map,\n          originInstance\n        } = this;\n\n        try {\n          switch (prop.type) {\n            case 'search':\n              return originInstance.clearResults();\n\n            case 'autoComplete':\n            case 'lushu':\n              return originInstance.dispose();\n\n            case 'markerClusterer':\n              return originInstance.clearMarkers();\n\n            default:\n              map[types[prop.type].unload](originInstance);\n          }\n        } catch (e) {}\n      }\n\n    };\n    this.computed = {\n      renderByParent() {\n        return this.$parent.preventChildrenRender;\n      }\n\n    };\n\n    this.mounted = function () {\n      const $parent = getParent(this.$parent);\n      const map = $parent.map;\n      const {\n        ready\n      } = this;\n      map ? ready() : $parent.$on('ready', ready);\n    };\n\n    this.destroyed = destroyInstance;\n    this.beforeDestroy = destroyInstance;\n  }\n\n}\n\nexport default (type => new Mixin({\n  type\n}));","map":{"version":3,"names":["types","control","unload","layer","overlay","contextMenu","getParent","$component","abstract","$el","$children","$parent","destroyInstance","renderByParent","reload","Mixin","constructor","prop","methods","ready","BMap","map","load","$emit","transmitEvent","e","type","replace","$nextTick","originInstance","clearResults","dispose","clearMarkers","computed","preventChildrenRender","mounted","$on","destroyed","beforeDestroy"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/vue-baidu-map/components/base/mixins/common.js"],"sourcesContent":["const types = {\n  control: {\n    unload: 'removeControl'\n  },\n  layer: {\n    unload: 'removeTileLayer'\n  },\n  overlay: {\n    unload: 'removeOverlay'\n  },\n  contextMenu: {\n    unload: 'removeContextMenu'\n  }\n}\n\nconst getParent = $component => ($component.abstract || $component.$el === $component.$children[0].$el) ? getParent($component.$parent) : $component\n\nfunction destroyInstance () {\n  const {unload, renderByParent, $parent} = this\n  if (renderByParent) {\n    $parent.reload()\n  }\n  unload()\n}\n\nclass Mixin {\n  constructor (prop) {\n    this.methods = {\n      ready () {\n        const $parent = getParent(this.$parent)\n        const BMap = this.BMap = $parent.BMap\n        const map = this.map = $parent.map\n        this.load()\n        this.$emit('ready', {\n          BMap,\n          map\n        })\n      },\n      transmitEvent (e) {\n        this.$emit(e.type.replace(/^on/, ''), e)\n      },\n      reload () {\n        this && this.BMap && this.$nextTick(() => {\n          this.unload()\n          this.$nextTick(this.load)\n        })\n      },\n      unload () {\n        const {map, originInstance} = this\n        try {\n          switch (prop.type) {\n            case 'search':\n              return originInstance.clearResults()\n            case 'autoComplete':\n            case 'lushu':\n              return originInstance.dispose()\n            case 'markerClusterer':\n              return originInstance.clearMarkers()\n            default:\n              map[types[prop.type].unload](originInstance)\n          }\n        } catch (e) {}\n      }\n    }\n    this.computed = {\n      renderByParent () {\n        return this.$parent.preventChildrenRender\n      }\n    }\n    this.mounted = function () {\n      const $parent = getParent(this.$parent)\n      const map = $parent.map\n      const {ready} = this\n      map ? ready() : $parent.$on('ready', ready)\n    }\n    this.destroyed = destroyInstance\n    this.beforeDestroy = destroyInstance\n  }\n}\n\nexport default type => new Mixin({type})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}