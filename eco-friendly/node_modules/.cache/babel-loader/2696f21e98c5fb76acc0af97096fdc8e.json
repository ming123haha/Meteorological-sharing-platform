{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport t from \"../../Graphic.js\";\nimport { rasterRendererTypes as r, websceneRasterRendererTypes as i, read as s } from \"../../rasterRenderers.js\";\nimport n from \"../../request.js\";\nimport o from \"../../core/Error.js\";\nimport { strict as a } from \"../../core/jsonMap.js\";\nimport { clone as l } from \"../../core/lang.js\";\nimport u from \"../../core/Logger.js\";\nimport { isSome as p, isNone as c, unwrap as m } from \"../../core/maybe.js\";\nimport { watch as d } from \"../../core/reactiveUtils.js\";\nimport { urlToObject as h } from \"../../core/urlUtils.js\";\nimport { property as f, ensureRange as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport { Integer as g, ensureClass as R, ensureNumber as S } from \"../../core/accessorSupport/ensureType.js\";\nimport { reader as v } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as b } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as I } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { opacity as x, url as w } from \"../support/commonProperties.js\";\nimport _ from \"../support/DimensionalDefinition.js\";\nimport { ExportImageServiceParameters as F } from \"../support/ExportImageServiceParameters.js\";\nimport D from \"../support/Field.js\";\nimport j from \"../support/FieldsIndex.js\";\nimport { isSupportedRendererType as T } from \"../support/imageryRendererUtils.js\";\nimport P from \"../support/MosaicRule.js\";\nimport N from \"../support/MultidimensionalSubset.js\";\nimport O from \"../support/PixelBlock.js\";\nimport { interpolationKebab as C, noDataInterpretationKebab as M } from \"../support/rasterEnums.js\";\nimport J from \"../support/RasterFunction.js\";\nimport q from \"../support/RasterInfo.js\";\nimport V from \"../support/RasterJobHandler.js\";\nimport { hasExcludedVariableOrDimension as E, getSubsetVariablesFromMdInfo as A, getDefaultMultidimensionalDefinition as Q } from \"../support/rasterDatasets/multidimensionalUtils.js\";\nimport { decode as H, getFormat as U } from \"../support/rasterFormats/RasterCodec.js\";\nimport { uvComponentToVector as z } from \"../support/rasterFunctions/vectorFieldUtils.js\";\nimport { getSupportedRendererTypes as L, getDefaultBandCombination as B, createDefaultRenderer as k, normalizeRendererJSON as G } from \"../../renderers/support/rasterRendererHelper.js\";\nimport W from \"../../renderers/support/RasterSymbolizer.js\";\nimport { computeAngles as K, computePixelSpaceLocations as X, computeHistograms as $, computeStatisticsHistograms as Y, getImageSpatialReferenceQueryParameter as Z, getSamples as ee, identify as te } from \"../../rest/imageService.js\";\nimport \"../../core/has.js\";\nimport \"../support/source/DataLayerSource.js\";\nimport { executeQueryJSON as re } from \"../../rest/query/executeQueryJSON.js\";\nimport \"../../config.js\";\nimport \"../../kernel.js\";\nimport \"../../core/unitUtils.js\";\nimport \"../../geometry/support/spatialReferenceUtils.js\";\nimport \"../graphics/featureConversionUtils.js\";\nimport ie from \"../../geometry/Extent.js\";\nimport \"../../geometry/Geometry.js\";\nimport \"../../geometry/Multipoint.js\";\nimport \"../../geometry/Point.js\";\nimport se from \"../../geometry/Polygon.js\";\nimport \"../../geometry/Polyline.js\";\nimport \"../../geometry/support/normalizeUtils.js\";\nimport \"../../core/pbf.js\";\nimport ne from \"../../rest/support/FeatureSet.js\";\nimport oe from \"../../rest/support/Query.js\";\nimport \"../../rest/query/support/AttachmentInfo.js\";\nimport \"../../rest/support/AttachmentQuery.js\";\nimport { executeForCount as ae } from \"../../rest/query/executeForCount.js\";\nimport { executeForIds as le } from \"../../rest/query/executeForIds.js\";\nimport \"../../rest/support/RelationshipQuery.js\";\nimport \"../../rest/support/TopFeaturesQuery.js\";\nimport { fetchServiceRasterInfo as ue, generateRasterInfo as pe } from \"../../rest/imageService/fetchRasterInfo.js\";\nimport { getCatalogItemRasterInfo as ce } from \"../../rest/imageService/getCatalogItemRasterInfo.js\";\nimport me from \"../../rest/support/ImageAngleParameters.js\";\nimport de from \"../../rest/support/ImageHistogramParameters.js\";\nimport he from \"../../rest/support/ImageIdentifyParameters.js\";\nimport fe from \"../../rest/support/ImagePixelLocationParameters.js\";\nimport ye from \"../../rest/support/ImageSampleParameters.js\";\nimport { createFlowMesh as ge } from \"../../views/2d/engine/flow/dataUtils.js\";\nimport Re from \"../../geometry/SpatialReference.js\";\nconst Se = a()({\n  U1: \"u1\",\n  U2: \"u2\",\n  U4: \"u4\",\n  U8: \"u8\",\n  S8: \"s8\",\n  U16: \"u16\",\n  S16: \"s16\",\n  U32: \"u32\",\n  S32: \"s32\",\n  F32: \"f32\",\n  F64: \"f64\",\n  C64: \"c64\",\n  C128: \"c128\",\n  UNKNOWN: \"unknown\"\n}),\n      ve = new Set([\"png\", \"png8\", \"png24\", \"png32\", \"jpg\", \"bmp\", \"gif\", \"jpgpng\", \"lerc\", \"tiff\"]),\n      be = y(S, {\n  min: 0,\n  max: 255\n});\n\nfunction Ie(e) {\n  if (!e) return null;\n  const t = JSON.stringify(e).match(/\"rasterFunction\":\"(.*?\")/gi)?.map(e => e.replace('\"rasterFunction\":\"', \"\").replace('\"', \"\"));\n  return t ? t.join(\"/\") : null;\n}\n\nconst xe = a => {\n  let y = class extends a {\n    constructor() {\n      super(...arguments), this._functionRasterInfos = {}, this._rasterJobHandler = {\n        instance: null,\n        refCount: 0,\n        connectionPromise: null\n      }, this._cachedRendererJson = null, this._serviceSupportsMosaicRule = null, this._rasterAttributeTableFieldPrefix = \"Raster.\", this.adjustAspectRatio = null, this.bandIds = void 0, this.capabilities = null, this.compressionQuality = void 0, this.compressionTolerance = .01, this.copyright = null, this.defaultMosaicRule = null, this.definitionExpression = null, this.exportImageServiceParameters = null, this.rasterInfo = null, this.fields = null, this.fullExtent = null, this.hasMultidimensions = !1, this.imageMaxHeight = 4100, this.imageMaxWidth = 4100, this.interpolation = void 0, this.minScale = 0, this.maxScale = 0, this.multidimensionalSubset = null, this.noData = null, this.noDataInterpretation = void 0, this.objectIdField = null, this.geometryType = \"polygon\", this.typeIdField = null, this.types = [], this.pixelFilter = null, this.raster = void 0, this.sourceType = null, this.viewId = void 0, this.symbolizer = null, this.rasterFunctionInfos = null, this.serviceDataType = null, this.spatialReference = null, this.pixelType = null, this.serviceRasterInfo = null, this.sourceJSON = null, this.url = null, this.version = void 0;\n    }\n\n    initialize() {\n      this._set(\"exportImageServiceParameters\", new F({\n        layer: this\n      }));\n    }\n\n    readServiceSupportsMosaicRule(e, t) {\n      return this._isMosaicRuleSupported(t);\n    }\n\n    get _rasterFunctionNamesIndex() {\n      const e = new Map();\n      return !this.rasterFunctionInfos || p(this.rasterFunctionInfos) && this.rasterFunctionInfos.length < 1 || p(this.rasterFunctionInfos) && this.rasterFunctionInfos.forEach(t => {\n        e.set(t.name.toLowerCase().replace(/ /gi, \"_\"), t.name);\n      }), e;\n    }\n\n    readBandIds(e, t) {\n      if (Array.isArray(e) && e.length > 0 && e.every(e => \"number\" == typeof e)) return e;\n    }\n\n    readCapabilities(e, t) {\n      return this._readCapabilities(t);\n    }\n\n    writeCompressionQuality(e, t, r) {\n      null != e && \"lerc\" !== this.format && (t[r] = e);\n    }\n\n    writeCompressionTolerance(e, t, r) {\n      \"lerc\" === this.format && null != e && (t[r] = e);\n    }\n\n    readDefaultMosaicRule(e, t) {\n      return this._serviceSupportsMosaicRule ? P.fromJSON(t) : null;\n    }\n\n    get fieldsIndex() {\n      return this.fields ? new j(this.fields) : null;\n    }\n\n    set format(e) {\n      e && ve.has(e.toLowerCase()) && this._set(\"format\", e.toLowerCase());\n    }\n\n    readFormat(e, t) {\n      return \"esriImageServiceDataTypeVector-UV\" === t.serviceDataType || \"esriImageServiceDataTypeVector-MagDir\" === t.serviceDataType || null != this.pixelFilter ? \"lerc\" : \"jpgpng\";\n    }\n\n    readMinScale(e, t) {\n      return null != t.minLOD && null != t.maxLOD ? e : 0;\n    }\n\n    readMaxScale(e, t) {\n      return null != t.minLOD && null != t.maxLOD ? e : 0;\n    }\n\n    set mosaicRule(e) {\n      let t = e;\n      t && t.mosaicMethod && (t = P.fromJSON({ ...t.toJSON(),\n        mosaicMethod: t.mosaicMethod,\n        mosaicOperation: t.mosaicOperation\n      })), this._set(\"mosaicRule\", t);\n    }\n\n    readMosaicRule(e, t) {\n      const r = e || t.mosaicRule;\n      return r ? P.fromJSON(r) : this._isMosaicRuleSupported(t) ? P.fromJSON(t) : null;\n    }\n\n    writeMosaicRule(e, t, r) {\n      let i = this.mosaicRule;\n      const s = this.definitionExpression;\n      i ? s && s !== i.where && (i = i.clone(), i.where = s) : s && (i = new P({\n        where: s\n      })), this._isValidCustomizedMosaicRule(i) && (t[r] = i.toJSON());\n    }\n\n    get multidimensionalInfo() {\n      return p(this.serviceRasterInfo) ? this.serviceRasterInfo.multidimensionalInfo : null;\n    }\n\n    writeNoData(e, t, r) {\n      null != e && \"number\" == typeof e && (t[r] = be(e));\n    }\n\n    readObjectIdField(e, t) {\n      if (!e) {\n        const r = t.fields.filter(e => \"esriFieldTypeOID\" === e.type || \"oid\" === e.type);\n        e = r && r[0] && r[0].name;\n      }\n\n      return e;\n    }\n\n    get parsedUrl() {\n      return h(this.url);\n    }\n\n    readSourceType(e, t) {\n      return this._isMosaicDataset(t) ? \"mosaic-dataset\" : \"raster-dataset\";\n    }\n\n    set renderer(e) {\n      this.loaded && (e = this._configRenderer(e)), this._set(\"renderer\", e);\n    }\n\n    readRenderer(e, t, r) {\n      const i = t?.layerDefinition?.drawingInfo?.renderer,\n            n = s(i, r);\n      return null == n ? null : (\"vector-field\" === n.type && t.symbolTileSize && !i.symbolTileSize && (n.symbolTileSize = t.symbolTileSize), T(n) || u.getLogger(this.declaredClass).warn(\"ArcGISImageService\", \"Imagery layer doesn't support given renderer type.\"), n);\n    }\n\n    writeRenderer(e, t, r) {\n      t.layerDefinition = t.layerDefinition || {}, t.layerDefinition.drawingInfo = t.layerDefinition.drawingInfo || {}, t.layerDefinition.drawingInfo.renderer = e.toJSON(), \"vector-field\" === e.type && (t.symbolTileSize = e.symbolTileSize);\n    }\n\n    get rasterFields() {\n      const e = this._rasterAttributeTableFieldPrefix || \"Raster.\",\n            t = new D({\n        name: \"Raster.ItemPixelValue\",\n        alias: \"Item Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      }),\n            r = new D({\n        name: \"Raster.ServicePixelValue\",\n        alias: \"Service Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      }),\n            i = new D({\n        name: \"Raster.ServicePixelValue.Raw\",\n        alias: \"Raw Service Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      });\n      let s = this.fields ? l(this.fields) : [];\n      s.push(r), this.capabilities?.operations.supportsQuery && this.fields && this.fields.length > 0 && s.push(t), this.version >= 10.4 && p(this.rasterFunctionInfos) && this.rasterFunctionInfos.some(e => \"none\" === e.name.toLowerCase()) && s.push(i), p(this.rasterFunctionInfos) && this.rasterFunctionInfos.filter(e => \"none\" !== e.name.toLowerCase()).forEach(e => {\n        s.push(new D({\n          name: \"Raster.ServicePixelValue.\" + e.name,\n          alias: e.name,\n          domain: null,\n          editable: !1,\n          length: 50,\n          type: \"string\"\n        }));\n      }), this._isVectorDataSet() && (s.push(new D({\n        name: \"Raster.Magnitude\",\n        alias: \"Magnitude\",\n        domain: null,\n        editable: !1,\n        type: \"double\"\n      })), s.push(new D({\n        name: \"Raster.Direction\",\n        alias: \"Direction\",\n        domain: null,\n        editable: !1,\n        type: \"double\"\n      })));\n      const {\n        attributeTable: n\n      } = this.rasterInfo ?? {};\n\n      if (p(n)) {\n        const t = n.fields.filter(e => \"esriFieldTypeOID\" !== e.type && \"value\" !== e.name.toLowerCase()).map(t => {\n          const r = l(t);\n          return r.name = e + t.name, r;\n        });\n        s = s.concat(t);\n      }\n\n      return s;\n    }\n\n    set renderingRule(e) {\n      let t = e;\n      t && t.rasterFunction && (t = J.fromJSON({ ...t.toJSON(),\n        rasterFunction: t.rasterFunction,\n        rasterFunctionArguments: t.rasterFunctionArguments\n      })), this._set(\"renderingRule\", t);\n    }\n\n    readRenderingRule(e, t) {\n      const r = t.rasterFunctionInfos;\n      return t.renderingRule || r && r.length && \"None\" !== r[0].name ? this._isRFTJson(t.renderingRule) ? J.fromJSON({\n        rasterFunctionDefinition: t.renderingRule\n      }) : J.fromJSON(t.renderingRule || {\n        rasterFunctionInfos: t.rasterFunctionInfos\n      }) : null;\n    }\n\n    writeRenderingRule(e, t, r) {\n      const i = e.toJSON();\n      i.rasterFunctionDefinition ? t[r] = i.rasterFunctionDefinition : t[r] = i;\n    }\n\n    readSpatialReference(e, t) {\n      const r = e || t.extent.spatialReference;\n      return r ? Re.fromJSON(r) : null;\n    }\n\n    readPixelType(e) {\n      return Se.fromJSON(e) || e;\n    }\n\n    writePixelType(e, t, r) {\n      (c(this.serviceRasterInfo) || this.pixelType !== this.serviceRasterInfo.pixelType) && (t[r] = Se.toJSON(e));\n    }\n\n    readVersion(e, t) {\n      let r = t.currentVersion;\n      return r || (r = t.hasOwnProperty(\"fields\") || t.hasOwnProperty(\"timeInfo\") ? 10 : 9.3), r;\n    }\n\n    applyFilter(e) {\n      let t = e;\n      return this.pixelFilter && (t = this._clonePixelData(e), this.pixelFilter(t)), t;\n    }\n\n    async applyRenderer(e, t) {\n      let r = e;\n      const {\n        renderer: i,\n        symbolizer: s,\n        pixelFilter: n,\n        bandIds: o\n      } = this;\n\n      if (!this._isPicture() && i && s && !n) {\n        const n = JSON.stringify(this._cachedRendererJson) !== JSON.stringify(i.toJSON()),\n              a = this._rasterJobHandler.instance;\n\n        if (a) {\n          n && (s.bind(), await a.updateSymbolizer(s, t), this._cachedRendererJson = i.toJSON());\n          const l = await a.symbolize({\n            bandIds: o,\n            ...e\n          }, t);\n          r = {\n            extent: e.extent,\n            pixelBlock: l\n          };\n        } else r = {\n          extent: e.extent,\n          pixelBlock: s.symbolize({\n            bandIds: o,\n            ...e\n          })\n        };\n      }\n\n      return r;\n    }\n\n    destroy() {\n      this._shutdownJobHandler();\n    }\n\n    increaseRasterJobHandlerUsage() {\n      this._rasterJobHandler.refCount++;\n    }\n\n    decreaseRasterJobHandlerUsage() {\n      this._rasterJobHandler.refCount--, this._rasterJobHandler.refCount <= 0 && this._shutdownJobHandler();\n    }\n\n    async computeAngles(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeAngles) throw new o(\"imagery-layer:compute-angles\", \"this operation is not supported on the input image service\");\n      return e = R(me, e).clone(), K(this.url, e, this._getRequestOptions(t));\n    }\n\n    async computePixelSpaceLocations(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsComputePixelLocation) throw new o(\"imagery-layer:compute-pixel-space-locations\", \"this operation is not supported on the input image service\");\n      return e = R(fe, e).clone(), X(this.url, e, this._getRequestOptions(t));\n    }\n\n    async computeHistograms(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeHistograms) throw new o(\"imagery-layer:compute-histograms\", \"this operation is not supported on the input image service\");\n      e = R(de, e).clone();\n      const {\n        raster: r,\n        mosaicRule: i,\n        renderingRule: s\n      } = this;\n      return s && null == e.renderingRule && (e.renderingRule = s), i && null == e.mosaicRule && (e.mosaicRule = i), r && null == e.raster && (e.raster = r), $(this.url, e, this._getRequestOptions(t));\n    }\n\n    async computeStatisticsHistograms(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeStatisticsHistograms) throw new o(\"imagery-layer:compute-statistics-histograms\", \"this operation is not supported on the input image service\");\n      e = R(de, e).clone();\n      const {\n        raster: r,\n        mosaicRule: i,\n        renderingRule: s\n      } = this;\n      return s && null == e.renderingRule && (e.renderingRule = s), i && null == e.mosaicRule && (e.mosaicRule = i), r && null == e.raster && (e.raster = r), Y(this.url, e, this._getRequestOptions(t));\n    }\n\n    getField(e) {\n      const {\n        fieldsIndex: t\n      } = this;\n      return p(t) ? t.get(e) : void 0;\n    }\n\n    getFieldDomain(e, t) {\n      const r = this.getField(e);\n      return r ? r.domain : null;\n    }\n\n    async fetchImage(e, t, r, i = {}) {\n      if (null == e || null == t || null == r) throw new o(\"imagery-layer:fetch-image\", \"Insufficient parameters for requesting an image. A valid extent, width and height values are required.\");\n\n      if (this.renderer || this.symbolizer) {\n        const e = await this.generateRasterInfo(this.renderingRule, {\n          signal: i.signal\n        });\n        e && (this.rasterInfo = e);\n      }\n\n      const s = this.getExportImageServiceParameters(e, t, r, i.timeExtent);\n\n      if (null == s) {\n        if (i.requestAsImageElement && this._canRequestImageElement(this.format)) {\n          const e = document.createElement(\"canvas\");\n          return e.width = t, e.height = r, {\n            imageOrCanvasElement: e\n          };\n        }\n\n        const s = (this.bandIds?.length || this.rasterInfo?.bandCount) ?? 0,\n              n = t * r,\n              o = this.rasterInfo?.pixelType ?? \"unknown\",\n              a = [];\n\n        for (let e = 0; e < s; e++) a.push(O.createEmptyBand(o, n));\n\n        return {\n          pixelData: {\n            pixelBlock: new O({\n              width: t,\n              height: r,\n              pixels: a,\n              mask: new Uint8Array(n),\n              pixelType: o\n            }),\n            extent: e\n          }\n        };\n      }\n\n      const n = {\n        imageServiceParameters: s,\n        imageProps: {\n          extent: e,\n          width: t,\n          height: r,\n          format: this.format\n        },\n        requestAsImageElement: i.requestAsImageElement && !this.pixelFilter || !1,\n        signal: i.signal\n      };\n      return this._requestArrayBuffer(n);\n    }\n\n    fetchKeyProperties(e) {\n      return n(S(this.parsedUrl) + \"/keyProperties\", {\n        query: this._getQueryParams({\n          renderingRule: this.version >= 10.3 ? e?.renderingRule : null\n        })\n      }).then(e => e.data);\n    }\n\n    fetchRasterAttributeTable(e) {\n      return this.version < 10.1 ? Promise.reject(new o(\"#fetchRasterAttributeTable()\", \"Failed to get rasterAttributeTable\")) : n(S(this.parsedUrl) + \"/rasterAttributeTable\", {\n        query: this._getQueryParams({\n          renderingRule: this.version >= 10.3 ? e?.renderingRule : null\n        })\n      }).then(e => ne.fromJSON(e.data));\n    }\n\n    getCatalogItemRasterInfo(e, t) {\n      const r = { ...t,\n        query: this._getQueryParams()\n      };\n      return ce(S(this.parsedUrl), e, r);\n    }\n\n    async getCatalogItemICSInfo(e, t) {\n      const {\n        data: r\n      } = await n(S(this.parsedUrl) + \"/\" + e + \"/info/ics\", {\n        query: this._getQueryParams(),\n        ...t\n      }),\n            i = r && r.ics;\n      if (!i) return;\n      let s = null;\n\n      try {\n        s = (await n(S(this.parsedUrl) + \"/\" + e + \"/info\", {\n          query: this._getQueryParams(),\n          ...t\n        })).data.extent;\n      } catch {}\n\n      if (!s || !s.spatialReference) return {\n        ics: i,\n        icsToPixelTransform: null,\n        icsExtent: null,\n        northDirection: null\n      };\n      const o = this.version >= 10.7 ? n(S(this.parsedUrl) + \"/\" + e + \"/info/icstopixel\", {\n        query: this._getQueryParams(),\n        ...t\n      }).then(e => e.data).catch(() => ({})) : {},\n            a = s.spatialReference,\n            l = {\n        geometries: JSON.stringify({\n          geometryType: \"esriGeometryEnvelope\",\n          geometries: [s]\n        }),\n        inSR: a.wkid || JSON.stringify(a),\n        outSR: \"0:\" + e\n      },\n            u = n(S(this.parsedUrl) + \"/project\", {\n        query: this._getQueryParams(l),\n        ...t\n      }).then(e => e.data).catch(() => ({})),\n            p = 5,\n            c = (s.xmin + s.xmax) / 2,\n            m = (s.ymax - s.ymin) / (p + 1),\n            d = s.ymin + m,\n            h = [];\n\n      for (let n = 0; n < p; n++) h.push({\n        x: c,\n        y: d + m * n\n      });\n\n      const f = {\n        geometries: JSON.stringify({\n          geometryType: \"esriGeometryPoint\",\n          geometries: h\n        }),\n        inSR: a.wkid || JSON.stringify(a),\n        outSR: \"0:\" + e\n      },\n            y = n(S(this.parsedUrl) + \"/project\", {\n        query: this._getQueryParams(f),\n        ...t\n      }).then(e => e.data).catch(() => ({})),\n            g = await Promise.all([o, u, y]);\n      let R = g[0].ipxf;\n\n      if (null == R) {\n        const e = i.geodataXform?.xf_0;\n        \"topup\" === e?.name?.toLowerCase() && 6 === e?.coefficients?.length && (R = {\n          affine: {\n            name: \"ics [sensor: Frame] to pixel (column, row) transformation\",\n            coefficients: e.coefficients,\n            cellsizeRatio: 0,\n            type: \"GeometricXform\"\n          }\n        });\n      }\n\n      const v = ie.fromJSON(g[1] && g[1].geometries && g[1].geometries[0]);\n      v && (v.spatialReference = new Re({\n        wkid: 0,\n        imageCoordinateSystem: i\n      }));\n      const b = g[2].geometries ? g[2].geometries.filter(e => null != e && null != e.x && null != e.y && \"NaN\" !== e.x && \"NaN\" !== e.y) : [],\n            I = b.length;\n      if (I < 3) return {\n        ics: i,\n        icsToPixelTransform: R,\n        icsExtent: v,\n        northDirection: null\n      };\n      let x = 0,\n          w = 0,\n          _ = 0,\n          F = 0;\n\n      for (let n = 0; n < I; n++) x += b[n].x, w += b[n].y, _ += b[n].x * b[n].x, F += b[n].x * b[n].y;\n\n      const D = (I * F - x * w) / (I * _ - x * x);\n      let j = 0;\n      const T = b[p - 1].x > b[0].x,\n            P = b[p - 1].y > b[0].y;\n      return D === 1 / 0 ? j = P ? 90 : 270 : 0 === D ? j = T ? 0 : 180 : D > 0 ? j = T ? 180 * Math.atan(D) / Math.PI : 180 * Math.atan(D) / Math.PI + 180 : D < 0 && (j = P ? 180 + 180 * Math.atan(D) / Math.PI : 360 + 180 * Math.atan(D) / Math.PI), {\n        ics: i,\n        icsToPixelTransform: R,\n        icsExtent: v,\n        northDirection: j\n      };\n    }\n\n    async generateRasterInfo(e, t) {\n      if (this.serviceRasterInfo && (!e || \"none\" === e.functionName?.toLowerCase() || this._isVectorFieldResampleFunction(e))) return this.serviceRasterInfo;\n      const r = Ie(e);\n      if (!r) return null;\n      if (this._functionRasterInfos[r]) return this._functionRasterInfos[r];\n\n      const i = this._generateRasterInfo(e, t);\n\n      this._functionRasterInfos[r] = i;\n\n      try {\n        return await i;\n      } catch {\n        return this._functionRasterInfos[r] = null, null;\n      }\n    }\n\n    getExportImageServiceParameters(e, t, r, i) {\n      e = e.clone().shiftCentralMeridian();\n      const s = Z(e.spatialReference, S(this.parsedUrl));\n      this.pixelType !== this.serviceRasterInfo?.pixelType && (this.exportImageServiceParameters.pixelType = this.pixelType);\n      const n = this.exportImageServiceParameters.toJSON(),\n            {\n        bandIds: o,\n        noData: a\n      } = n;\n      let {\n        renderingRule: l\n      } = n;\n      const u = this.renderingRule?.rasterFunctionDefinition,\n            c = !this.renderer || \"raster-stretch\" === this.renderer.type;\n\n      if (o?.length && this._hasRenderingRule(this.renderingRule) && !u && c) {\n        const e = {\n          rasterFunction: \"ExtractBand\",\n          rasterFunctionArguments: {\n            BandIds: o\n          }\n        };\n        if (\"Stretch\" === l.rasterFunction) e.rasterFunctionArguments.Raster = l.rasterFunctionArguments.Raster, l.rasterFunctionArguments.Raster = e;else if (\"Colormap\" === l.rasterFunction) {\n          const t = l.rasterFunctionArguments.Raster;\n          \"Stretch\" === t?.rasterFunction ? (e.rasterFunctionArguments.Raster = t.rasterFunctionArguments.Raster, t.rasterFunctionArguments.Raster = e) : (e.rasterFunctionArguments.Raster = t, l.rasterFunctionArguments.Raster = e);\n        } else e.rasterFunctionArguments.Raster = l, l = e;\n        n.bandIds = void 0;\n      } else n.bandIds = o?.join(\",\");\n\n      a instanceof Array && a.length > 0 && (n.noData = a.join(\",\"));\n      const m = this._serviceSupportsMosaicRule ? this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule, i) : null;\n      n.mosaicRule = p(m) ? JSON.stringify(m) : null;\n      const {\n        multidimensionalSubset: d\n      } = this;\n      if (d && p(m) && m.multidimensionalDefinition && E(m.multidimensionalDefinition, d, !0)) return null;\n      n.renderingRule = this._getRenderingRuleString(J.fromJSON(l));\n      const h = {};\n\n      if (i) {\n        const {\n          start: e,\n          end: t\n        } = i.toJSON();\n        let r;\n\n        if (e && t && e === t ? (h.time = \"\" + e, r = [e]) : null == e && null == t || (h.time = `${e ?? \"null\"},${t ?? \"null\"}`, r = null != e && null != t ? [e, t] : [e ?? t]), r && d) {\n          const e = d.dimensions.find(({\n            name: e\n          }) => \"StdTime\" === e);\n\n          if (2 === r.length && e.extent.length) {\n            if (r[0] = Math.max(r[0], e.extent[0]), r[1] = Math.min(r[1], e.extent[1] ?? e.extent[0]), r[1] < r[0]) return null;\n            h.time = r.join();\n          }\n\n          const t = new _({\n            variableName: \"\",\n            dimensionName: \"StdTime\",\n            isSlice: 1 === r.length,\n            values: r\n          });\n          if (E([t], d, !0)) return null;\n        }\n      }\n\n      return {\n        bbox: e.xmin + \",\" + e.ymin + \",\" + e.xmax + \",\" + e.ymax,\n        bboxSR: s,\n        imageSR: s,\n        size: t + \",\" + r,\n        ...n,\n        ...h\n      };\n    }\n\n    async getSamples(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal))?.operations.supportsGetSamples) throw new o(\"imagery-layer:get-samples\", \"getSamples operation is not supported on the input image service\");\n      e = R(ye, e).clone();\n      const {\n        raster: r\n      } = this;\n      return r && null == e.raster && (e.raster = r), ee(this.url, e, this._getRequestOptions(t));\n    }\n\n    async identify(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsIdentify) throw new o(\"imagery-layer:query-rasters\", \"query operation is not supported on the input image service\");\n      e = R(he, e).clone();\n      const {\n        raster: r,\n        mosaicRule: i,\n        renderingRule: s\n      } = this;\n\n      if (s && null == e.renderingRule && (e.renderingRule = s), i && null == e.mosaicRule) {\n        const t = this._combineMosaicRuleWithTimeExtent(i, e.timeExtent);\n\n        e.mosaicRule = m(t);\n      }\n\n      return r && null == e.raster && (e.raster = r), te(this.url, e, this._getRequestOptions(t));\n    }\n\n    createQuery() {\n      const e = new oe();\n      return e.outFields = [\"*\"], e.returnGeometry = !0, e.where = this.definitionExpression || \"1=1\", e;\n    }\n\n    async queryRasters(e, t) {\n      return ({\n        query: e,\n        requestOptions: t\n      } = await this._prepareForQuery(e, t)), re(this.url, e, t);\n    }\n\n    async queryObjectIds(e, t) {\n      return ({\n        query: e,\n        requestOptions: t\n      } = await this._prepareForQuery(e, t)), le(this.url, e, t);\n    }\n\n    async queryRasterCount(e, t) {\n      return ({\n        query: e,\n        requestOptions: t\n      } = await this._prepareForQuery(e, t)), ae(this.url, e, t);\n    }\n\n    async queryVisibleRasters(e, t) {\n      if (!e) throw new o(\"imagery-layer: query-visible-rasters\", \"missing query parameter\");\n      await this.load();\n      const {\n        pixelSize: r,\n        returnDomainValues: i,\n        returnTopmostRaster: s,\n        showNoDataRecords: n\n      } = t || {\n        pixelSize: null,\n        returnDomainValues: !1,\n        returnTopmostRaster: !1,\n        showNoDataRecords: !1\n      };\n      let a = !1,\n          l = null,\n          u = null;\n      const m = \"raster.servicepixelvalue\",\n            d = this._rasterFunctionNamesIndex;\n\n      if (p(e.outFields) && (a = e.outFields.some(e => !e.toLowerCase().includes(m)), this.version >= 10.4)) {\n        const t = e.outFields.filter(e => e.toLowerCase().includes(m) && e.length > m.length).map(e => {\n          const t = e.slice(m.length + 1);\n          return [this._updateRenderingRulesFunctionName(t, d), t];\n        });\n        l = t.map(e => new J({\n          functionName: e[0]\n        })), u = t.map(e => e[1]);\n        const {\n          renderingRule: r\n        } = this;\n        0 === l.length ? r?.functionName ? (l.push(r), u.push(r.functionName)) : l = null : r?.functionName && !l.some(e => e.functionName === r.functionName) && (l.push(r), u.push(r.functionName));\n      }\n\n      const h = c(e.outSpatialReference) || e.outSpatialReference.equals(this.spatialReference),\n            f = e.timeExtent || this.timeExtent,\n            y = this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule, f),\n            g = this._getQueryParams({\n        geometry: e.geometry,\n        timeExtent: f,\n        mosaicRule: y,\n        renderingRule: this.version < 10.4 ? this.renderingRule : null,\n        renderingRules: l,\n        pixelSize: r,\n        returnCatalogItems: a,\n        returnGeometry: h,\n        raster: this.raster,\n        maxItemCount: s ? 1 : null\n      });\n\n      delete g.f;\n      const R = new he(g);\n\n      try {\n        await this.generateRasterInfo(this.renderingRule);\n        const r = await te(this.url, R, {\n          signal: t?.signal,\n          query: { ...this.customParameters\n          }\n        }),\n              s = e.outFields,\n              o = null != r.value && r.value.toLowerCase().includes(\"nodata\");\n        if (!(a && !h && r?.catalogItems?.features.length && (n || !o))) return this._processVisibleRastersResponse(r, {\n          returnDomainValues: i,\n          templateRRFunctionNames: u,\n          showNoDataRecords: n,\n          templateFields: s\n        });\n        const l = this.objectIdField || \"ObjectId\",\n              c = r.catalogItems?.features ?? [],\n              m = c.map(e => e.attributes?.[l]),\n              d = new oe({\n          objectIds: m,\n          returnGeometry: !0,\n          outSpatialReference: e.outSpatialReference,\n          outFields: [l]\n        }),\n              f = await this.queryRasters(d);\n        return f?.features?.length && f.features.forEach(t => {\n          c.forEach(r => {\n            r.attributes[l] === t.attributes[l] && (r.geometry = new se(t.geometry), p(e.outSpatialReference) && (r.geometry.spatialReference = e.outSpatialReference));\n          });\n        }), this._processVisibleRastersResponse(r, {\n          returnDomainValues: i,\n          templateRRFunctionNames: u,\n          showNoDataRecords: n,\n          templateFields: s\n        });\n      } catch {\n        throw new o(\"imagery-layer:query-visible-rasters\", \"encountered error when querying visible rasters\");\n      }\n    }\n\n    async fetchVariableStatisticsHistograms(e, t) {\n      const r = n(S(this.parsedUrl) + \"/statistics\", {\n        query: this._getQueryParams({\n          variable: e\n        }),\n        signal: t\n      }).then(e => e.data?.statistics),\n            i = n(S(this.parsedUrl) + \"/histograms\", {\n        query: this._getQueryParams({\n          variable: e\n        }),\n        signal: t\n      }).then(e => e.data?.histograms),\n            s = await Promise.all([r, i]);\n      return s[0] && s[0].forEach(e => {\n        e.avg = e.mean, e.stddev = e.standardDeviation;\n      }), {\n        statistics: s[0] || null,\n        histograms: s[1] || null\n      };\n    }\n\n    async createFlowMesh(e, t) {\n      const r = this._rasterJobHandler.instance;\n      return r ? r.createFlowMesh(e, t) : ge(e.meshType, e.simulationSettings, e.flowData, p(t.signal) ? t.signal : new AbortController().signal);\n    }\n\n    getMultidimensionalSubsetVariables(e) {\n      const t = e ?? this.multidimensionalInfo;\n      return A(this.multidimensionalSubset, t);\n    }\n\n    async _fetchService(e) {\n      await this._fetchServiceInfo(e), this.rasterInfo || (this.rasterInfo = this.serviceRasterInfo);\n\n      const t = this.sourceJSON,\n            r = p(this.serviceRasterInfo) ? Promise.resolve(this.serviceRasterInfo) : ue(S(this.parsedUrl), t, {\n        signal: e,\n        query: this._getQueryParams()\n      }).then(e => (this._set(\"serviceRasterInfo\", e), e)),\n            i = this._hasRenderingRule(this.renderingRule) ? this.generateRasterInfo(this.renderingRule, {\n        signal: e\n      }) : null,\n            s = this._getRasterFunctionInfos();\n\n      return Promise.all([r, i, s]).then(e => {\n        e[1] ? this._set(\"rasterInfo\", e[1]) : this._set(\"rasterInfo\", e[0]), e[2] && this._set(\"rasterFunctionInfos\", e[2]), this.renderer && !this._isSupportedRenderer(this.renderer) && (this._set(\"renderer\", null), u.getLogger(this.declaredClass).warn(\"ArcGISImageService\", \"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer\")), this._set(\"renderer\", this._configRenderer(this.renderer)), this.addHandles([d(() => this.renderingRule, e => {\n          (this.renderer || this.symbolizer || this.popupEnabled && this.popupTemplate) && this.generateRasterInfo(e).then(e => {\n            e && (this.rasterInfo = e);\n          });\n        })]);\n        const {\n          serviceRasterInfo: t\n        } = this;\n        t && p(t.multidimensionalInfo) && this._updateMultidimensionalDefinition(t);\n      });\n    }\n\n    _combineMosaicRuleWithTimeExtent(e, t) {\n      const r = this.timeInfo;\n      if (c(e) || c(this.multidimensionalInfo) || c(t) || c(r?.startField)) return e;\n      const {\n        startField: i\n      } = r,\n            s = this.multidimensionalInfo.variables.some(e => e.dimensions.some(e => e.name === i)) ? i : \"StdTime\";\n      if (e = e.clone(), \"mosaic-dataset\" === this.sourceType) return e.multidimensionalDefinition = e.multidimensionalDefinition?.filter(e => e.dimensionName !== s), this._cleanupMultidimensionalDefinition(e);\n      e.multidimensionalDefinition = e.multidimensionalDefinition || [];\n      const n = e.multidimensionalDefinition.filter(e => e.dimensionName === s),\n            o = p(t.start) ? t.start.getTime() : null,\n            a = p(t.end) ? t.end.getTime() : null,\n            l = null == o || null == a || o === a,\n            u = l ? [o || a] : [[o, a]],\n            m = this.version >= 10.8;\n      if (n.length) n.forEach(e => {\n        e.dimensionName === s && (m ? (e.dimensionName = null, e.isSlice = !1, e.values = []) : (e.isSlice = l, e.values = u));\n      });else if (!m) {\n        const t = e.multidimensionalDefinition.filter(e => null != e.variableName && null == e.dimensionName);\n        t.length ? t.forEach(e => {\n          e.dimensionName = s, e.isSlice = l, e.values = u;\n        }) : e.multidimensionalDefinition.push(new _({\n          variableName: \"\",\n          dimensionName: s,\n          isSlice: l,\n          values: u\n        }));\n      }\n      return this._cleanupMultidimensionalDefinition(e);\n    }\n\n    _cleanupMultidimensionalDefinition(e) {\n      return c(e) ? null : (e.multidimensionalDefinition && (e.multidimensionalDefinition = e.multidimensionalDefinition.filter(e => !(!e.variableName && !e.dimensionName)), 0 === e.multidimensionalDefinition.length && (e.multidimensionalDefinition = null)), \"mosaic-dataset\" !== this.sourceType && null == e.multidimensionalDefinition ? null : e);\n    }\n\n    async _prepareForQuery(e, t) {\n      if (!(await this._fetchCapabilities(t?.signal)).operations.supportsQuery) throw new o(\"imagery-layer:query-rasters\", \"query operation is not supported on the input image service\");\n      return e = p(e) ? R(oe, e) : this.createQuery(), t = this._getRequestOptions(t), this.raster && (t.query = { ...t.query,\n        raster: this.raster\n      }), {\n        query: e,\n        requestOptions: t\n      };\n    }\n\n    async _initJobHandler() {\n      if (null != this._rasterJobHandler.connectionPromise) return this._rasterJobHandler.connectionPromise;\n      const e = new V();\n      this._rasterJobHandler.connectionPromise = e.initialize().then(() => {\n        this._rasterJobHandler.instance = e;\n      }, () => {}), await this._rasterJobHandler.connectionPromise;\n    }\n\n    _shutdownJobHandler() {\n      this._rasterJobHandler.instance && this._rasterJobHandler.instance.destroy(), this._rasterJobHandler.instance = null, this._rasterJobHandler.connectionPromise = null, this._rasterJobHandler.refCount = 0, this._cachedRendererJson = null;\n    }\n\n    _isSupportedRenderer(e) {\n      const {\n        rasterInfo: t,\n        renderingRule: r\n      } = this;\n      return \"unique-value\" === e.type && this._hasRenderingRule(r) && 1 === t?.bandCount && [\"u8\", \"s8\"].includes(t.pixelType) || null != t && null != e && L(t).includes(e.type);\n    }\n\n    async _fetchCapabilities(e) {\n      return this.capabilities || (await this._fetchServiceInfo(e)), this.capabilities;\n    }\n\n    async _fetchServiceInfo(e) {\n      let t = this.sourceJSON;\n\n      if (!t) {\n        const {\n          data: r,\n          ssl: i\n        } = await n(S(this.parsedUrl), {\n          query: this._getQueryParams(),\n          signal: e\n        });\n        t = r, this.sourceJSON = t, i && (this.url = this.url.replace(/^http:/i, \"https:\"));\n      }\n\n      if (t.capabilities?.toLowerCase().split(\",\").map(e => e.trim()).indexOf(\"tilesonly\") > -1) throw new o(\"imagery-layer:fetch-service-info\", \"use ImageryTileLayer to open tiles-only image services\");\n      this.read(t, {\n        origin: \"service\",\n        url: this.parsedUrl\n      });\n    }\n\n    _isMosaicDataset(e) {\n      return e.serviceSourceType ? \"esriImageServiceSourceTypeMosaicDataset\" === e.serviceSourceType : e.fields?.length > 0;\n    }\n\n    _isMosaicRuleSupported(e) {\n      if (!e) return !1;\n\n      const t = this._isMosaicDataset(e),\n            r = e.currentVersion >= 10.71 && e.hasMultidimensions && !(e.fields?.length > 1);\n\n      return t || r;\n    }\n\n    _isVectorFieldResampleFunction(e) {\n      if (c(e)) return !1;\n      const {\n        functionName: t,\n        functionArguments: r\n      } = e,\n            i = \"resample\" === t?.toLowerCase(),\n            s = r?.ResampleType || r?.resampleType;\n      return i && (7 === s || 10 === s);\n    }\n\n    _isPicture() {\n      return !this.format || this.format.includes(\"jpg\") || this.format.includes(\"png\");\n    }\n\n    _configRenderer(e) {\n      if (!this._isPicture() && !this.pixelFilter || this._isVectorDataSet()) {\n        if (!this.bandIds && this.rasterInfo && this.rasterInfo.bandCount >= 3) {\n          const e = B(this.rasterInfo);\n          !e || 3 === this.rasterInfo.bandCount && 0 === e[0] && 1 === e[1] && 2 === e[2] || (this.bandIds = e);\n        }\n\n        e || (e = k(this.rasterInfo, {\n          bandIds: this.bandIds,\n          variableName: this.renderingRule ? null : this.mosaicRule?.multidimensionalDefinition?.[0].variableName\n        }));\n        const t = G(e.toJSON());\n        this.symbolizer ? (this.symbolizer.rendererJSON = t, this.symbolizer.rasterInfo = this.rasterInfo) : this.symbolizer = new W({\n          rendererJSON: t,\n          rasterInfo: this.rasterInfo\n        }), this.symbolizer.bind().success || (this.symbolizer = null);\n      }\n\n      return e;\n    }\n\n    _clonePixelData(e) {\n      return null == e ? e : {\n        extent: e.extent && e.extent.clone(),\n        pixelBlock: p(e.pixelBlock) ? e.pixelBlock.clone() : null\n      };\n    }\n\n    _getQueryParams(e) {\n      e && p(e.renderingRule) && \"string\" != typeof e.renderingRule && (e.renderingRule = this._getRenderingRuleString(e.renderingRule));\n      const {\n        raster: t,\n        viewId: r\n      } = this;\n      return {\n        raster: t,\n        viewId: r,\n        f: \"json\",\n        ...e,\n        ...this.customParameters\n      };\n    }\n\n    _getRequestOptions(e) {\n      return { ...e,\n        query: { ...e?.query,\n          ...this.customParameters\n        }\n      };\n    }\n\n    _decodePixelBlock(e, t, r) {\n      return this._rasterJobHandler.instance ? this._rasterJobHandler.instance.decode({\n        data: e,\n        options: t\n      }) : H(e, t, r);\n    }\n\n    async _getRasterFunctionInfos(e) {\n      const t = this.sourceJSON.rasterFunctionInfos;\n      if (this.loaded) return t;\n\n      if (t && this.version >= 10.3) {\n        if (1 === t.length && \"none\" === t[0].name.toLowerCase()) return t;\n        return (await n(S(this.parsedUrl) + \"/rasterFunctionInfos\", {\n          query: this._getQueryParams(),\n          signal: e\n        })).data?.rasterFunctionInfos;\n      }\n\n      return null;\n    }\n\n    _canRequestImageElement(e) {\n      return !this.pixelFilter && (!e || e.includes(\"png\"));\n    }\n\n    async _requestArrayBuffer(e) {\n      const {\n        imageProps: t,\n        requestAsImageElement: r,\n        signal: i\n      } = e;\n\n      if (r && this._canRequestImageElement(t.format)) {\n        return {\n          imageOrCanvasElement: (await n(S(this.parsedUrl) + \"/exportImage\", {\n            responseType: \"image\",\n            query: this._getQueryParams({\n              f: \"image\",\n              ...this.refreshParameters,\n              ...e.imageServiceParameters\n            }),\n            signal: i\n          })).data,\n          params: t\n        };\n      }\n\n      const s = this._initJobHandler(),\n            a = n(S(this.parsedUrl) + \"/exportImage\", {\n        responseType: \"array-buffer\",\n        query: this._getQueryParams({\n          f: \"image\",\n          ...e.imageServiceParameters\n        }),\n        signal: i\n      }),\n            l = (await Promise.all([a, s]))[0].data,\n            u = t.format || \"jpgpng\";\n\n      let p = u;\n      if (\"bsq\" !== p && \"bip\" !== p && (p = U(l)), !p) throw new o(\"imagery-layer:fetch-image\", \"unsupported format signature \" + String.fromCharCode.apply(null, new Uint8Array(l)));\n      const c = {\n        signal: i\n      },\n            m = \"gif\" === u || \"bmp\" === u || u.includes(\"png\") && (\"png\" === p || \"jpg\" === p) ? H(l, {\n        useCanvas: !0,\n        ...t\n      }, c) : this._decodePixelBlock(l, {\n        width: t.width,\n        height: t.height,\n        planes: null,\n        pixelType: null,\n        noDataValue: null,\n        format: u\n      }, c);\n      return {\n        pixelData: {\n          pixelBlock: await m,\n          extent: t.extent\n        },\n        params: t\n      };\n    }\n\n    _generateRasterInfo(e, t) {\n      const r = { ...t,\n        query: this._getQueryParams()\n      };\n      return pe(S(this.parsedUrl), e, r);\n    }\n\n    _isValidCustomizedMosaicRule(e) {\n      return e && JSON.stringify(e.toJSON()) !== JSON.stringify(this.defaultMosaicRule?.toJSON());\n    }\n\n    _updateMultidimensionalDefinition(e) {\n      if (this._isValidCustomizedMosaicRule(this.mosaicRule)) return;\n      const t = Q(e, {\n        multidimensionalSubset: this.multidimensionalSubset\n      });\n\n      if (p(t) && t.length > 0) {\n        this.mosaicRule = this.mosaicRule || new P();\n        const e = this.mosaicRule.multidimensionalDefinition;\n        !this.sourceJSON.defaultVariableName && this.renderingRule && \"none\" !== this.renderingRule.functionName?.toLowerCase() && t.forEach(e => e.variableName = \"\"), (!e || e && e.length <= 0) && (this.mosaicRule.multidimensionalDefinition = t);\n      }\n    }\n\n    _processVisibleRastersResponse(e, r) {\n      r = r || {};\n      const i = e.value,\n            {\n        templateRRFunctionNames: s,\n        showNoDataRecords: n,\n        returnDomainValues: o,\n        templateFields: a\n      } = r,\n            l = e.processedValues;\n      let u = e.catalogItems && e.catalogItems.features,\n          c = e.properties && e.properties.Values && e.properties.Values.map(e => e.replace(/ /gi, \", \")) || [];\n      const m = this.objectIdField || \"ObjectId\",\n            d = \"string\" == typeof i && i.toLowerCase().includes(\"nodata\"),\n            h = [];\n\n      if (i && !u && !d) {\n        const e = {};\n        e[m] = 0;\n        c = [i], u = [new t(this.fullExtent, null, e)];\n      }\n\n      if (!u) return [];\n      let f, y, g;\n      this._updateResponseFieldNames(u, a), d && !n && (u = []);\n\n      for (let t = 0; t < u.length; t++) {\n        if (f = u[t], null != i) {\n          if (y = c[t], g = this.renderingRule && l && l.length > 0 && s && s.length > 0 && s.includes(this.renderingRule.functionName) ? l[s.indexOf(this.renderingRule.functionName)] : i, \"nodata\" === y.toLowerCase() && !n) continue;\n          const e = \"Raster.ItemPixelValue\",\n                r = \"Raster.ServicePixelValue\";\n          f.attributes[e] = y, f.attributes[r] = g, this._updateFeatureWithMagDirValues(f, y);\n          const o = this.fields && this.fields.length > 0;\n          let a = this.renderingRule && p(this.serviceRasterInfo?.attributeTable) ? o ? y : i : g;\n          this.renderingRule || (a = o ? y : i), this._updateFeatureWithRasterAttributeTableValues(f, a);\n        }\n\n        if (f.sourceLayer = f.layer = this, o && this._updateFeatureWithDomainValues(f), s && l && s.length === l.length) for (let e = 0; e < s.length; e++) {\n          const t = \"Raster.ServicePixelValue.\" + s[e];\n          f.attributes[t] = l[e];\n        }\n        h.push(u[t]);\n      }\n\n      return h;\n    }\n\n    _updateFeatureWithRasterAttributeTableValues(e, t) {\n      const r = this.rasterInfo && this.rasterInfo.attributeTable || this.serviceRasterInfo?.attributeTable;\n      if (c(r)) return;\n      const {\n        features: i,\n        fields: s\n      } = r,\n            n = s.map(e => e.name).filter(e => \"value\" === e.toLowerCase()),\n            o = n && n[0];\n      if (!o) return;\n      const a = i.filter(e => e.attributes[o] === (null != t ? parseInt(t, 10) : null));\n      a && a[0] && s.forEach(t => {\n        const r = this._rasterAttributeTableFieldPrefix + t.name;\n        e.attributes[r] = a[0].attributes[t.name];\n      });\n    }\n\n    _updateFeatureWithMagDirValues(e, t) {\n      if (!this._isVectorDataSet()) return;\n      const r = t.split(/,\\s*/).map(e => parseFloat(e)),\n            i = r.map(e => [e]),\n            s = r.map(e => ({\n        minValue: e,\n        maxValue: e,\n        noDataValue: null\n      })),\n            n = new O({\n        height: 1,\n        width: 1,\n        pixelType: \"f32\",\n        pixels: i,\n        statistics: s\n      });\n      null != this.pixelFilter && this.pixelFilter({\n        pixelBlock: n,\n        extent: new ie(0, 0, 0, 0, this.spatialReference)\n      });\n      const o = \"esriImageServiceDataTypeVector-MagDir\" === this.serviceDataType ? [n.pixels[0][0], n.pixels[1][0]] : z([n.pixels[0][0], n.pixels[1][0]]);\n      e.attributes[\"Raster.Magnitude\"] = o[0], e.attributes[\"Raster.Direction\"] = o[1];\n    }\n\n    _updateFeatureWithDomainValues(e) {\n      const t = this.fields && this.fields.filter(e => e.domain && \"coded-value\" === e.domain.type);\n      null != t && t.forEach(t => {\n        const r = e.attributes[t.name];\n\n        if (null != r) {\n          const i = t.domain.codedValues.find(e => e.code === r);\n          i && (e.attributes[t.name] = i.name);\n        }\n      });\n    }\n\n    _updateResponseFieldNames(e, t) {\n      if (!t || t.length < 1) return;\n      const r = this.fieldsIndex;\n      c(r) || e.forEach(e => {\n        if (e && e.attributes) for (const i of t) {\n          const t = r.get(i)?.name;\n          t && t !== i && (e.attributes[i] = e.attributes[t], delete e.attributes[t]);\n        }\n      });\n    }\n\n    _getRenderingRuleString(e) {\n      if (this._hasRenderingRule(e)) {\n        let t = e.toJSON();\n        return t = t.rasterFunctionDefinition ?? t, (t.thumbnail || t.thumbnailEx) && (t.thumbnail = t.thumbnailEx = null), JSON.stringify(t);\n      }\n\n      return null;\n    }\n\n    _hasRenderingRule(e) {\n      return null != e && null != e.functionName && \"none\" !== e.functionName.toLowerCase();\n    }\n\n    _updateRenderingRulesFunctionName(e, t) {\n      if (!e || e.length < 1) return;\n      if (\"Raw\" === e) return e.replace(\"Raw\", \"None\");\n      const r = e.toLowerCase().replace(/ /gi, \"_\");\n      return t.has(r) ? t.get(r) : e;\n    }\n\n    _isRFTJson(e) {\n      return e && e.name && e.arguments && e.function && e.hasOwnProperty(\"functionType\");\n    }\n\n    _isVectorDataSet() {\n      return \"esriImageServiceDataTypeVector-UV\" === this.serviceDataType || \"esriImageServiceDataTypeVector-MagDir\" === this.serviceDataType;\n    }\n\n    _readCapabilities(e) {\n      const t = e.capabilities ? e.capabilities.toLowerCase().split(\",\").map(e => e.trim()) : [\"image\", \"catalog\"],\n            {\n        currentVersion: r,\n        advancedQueryCapabilities: i,\n        maxRecordCount: s\n      } = e,\n            n = t.includes(\"image\"),\n            o = \"esriImageServiceDataTypeElevation\" === e.serviceDataType,\n            a = !!(e.spatialReference || e.extent && e.extent.spatialReference),\n            l = t.includes(\"edit\");\n      return {\n        data: {\n          supportsAttachment: !1\n        },\n        operations: {\n          supportsComputeHistograms: n,\n          supportsExportImage: n,\n          supportsIdentify: n,\n          supportsMeasure: t.includes(\"mensuration\") && a,\n          supportsDownload: t.includes(\"download\"),\n          supportsQuery: t.includes(\"catalog\") && e.fields && e.fields.length > 0,\n          supportsGetSamples: r >= 10.2 && n,\n          supportsProject: r >= 10.3 && n,\n          supportsComputeStatisticsHistograms: r >= 10.4 && n,\n          supportsQueryBoundary: r >= 10.6 && n,\n          supportsCalculateVolume: r >= 10.7 && o,\n          supportsComputePixelLocation: r >= 10.7 && t.includes(\"catalog\"),\n          supportsComputeAngles: r >= 10.91,\n          supportsAdd: l,\n          supportsDelete: l,\n          supportsEditing: l,\n          supportsUpdate: l,\n          supportsCalculate: !1,\n          supportsTruncate: !1,\n          supportsValidateSql: !1,\n          supportsChangeTracking: !1,\n          supportsQueryAttachments: !1,\n          supportsResizeAttachments: !1,\n          supportsSync: !1,\n          supportsExceedsLimitStatistics: !1,\n          supportsQueryAnalytics: !1,\n          supportsQueryTopFeatures: !1\n        },\n        query: {\n          maxRecordCount: s,\n          maxRecordCountFactor: void 0,\n          supportsStatistics: !!i?.supportsStatistics,\n          supportsOrderBy: !!i?.supportsOrderBy,\n          supportsDistinct: !!i?.supportsDistinct,\n          supportsPagination: !!i?.supportsPagination,\n          supportsStandardizedQueriesOnly: !!i?.useStandardizedQueries,\n          supportsPercentileStatistics: !!i?.supportsPercentileStatistics,\n          supportsCentroid: !!i?.supportsReturningGeometryCentroid,\n          supportsDistance: !!i?.supportsQueryWithDistance,\n          supportsExtent: !!i?.supportsReturningQueryExtent,\n          supportsGeometryProperties: !!i?.supportsReturningGeometryProperties,\n          supportsHavingClause: !!i?.supportsHavingClause,\n          supportsQuantization: !1,\n          supportsQuantizationEditMode: !1,\n          supportsQueryGeometry: !1,\n          supportsResultType: !1,\n          supportsMaxRecordCountFactor: !1,\n          supportsSqlExpression: !1,\n          supportsTopFeaturesQuery: !1,\n          supportsQueryByOthers: !1,\n          supportsHistoricMoment: !1,\n          supportsFormatPBF: !1,\n          supportsDisjointSpatialRelationship: !1,\n          supportsCacheHint: !1,\n          supportsSpatialAggregationStatistics: !1,\n          supportedSpatialAggregationStatistics: {\n            envelope: !1,\n            centroid: !1,\n            convexHull: !1\n          },\n          supportsDefaultSpatialReference: !!i?.supportsDefaultSR,\n          supportsFullTextSearch: !1,\n          supportsCompactGeometry: !1,\n          standardMaxRecordCount: void 0,\n          tileMaxRecordCount: void 0\n        }\n      };\n    }\n\n  };\n\n  function S(e) {\n    return e?.path ?? \"\";\n  }\n\n  return e([f()], y.prototype, \"_functionRasterInfos\", void 0), e([f()], y.prototype, \"_rasterJobHandler\", void 0), e([f()], y.prototype, \"_cachedRendererJson\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"_serviceSupportsMosaicRule\", void 0), e([v(\"_serviceSupportsMosaicRule\", [\"currentVersion\", \"fields\"])], y.prototype, \"readServiceSupportsMosaicRule\", null), e([f()], y.prototype, \"_rasterAttributeTableFieldPrefix\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"_rasterFunctionNamesIndex\", null), e([f()], y.prototype, \"adjustAspectRatio\", void 0), e([f({\n    type: [g],\n    json: {\n      write: !0\n    }\n  })], y.prototype, \"bandIds\", void 0), e([v(\"bandIds\")], y.prototype, \"readBandIds\", null), e([f({\n    readOnly: !0,\n    json: {\n      read: !1\n    }\n  })], y.prototype, \"capabilities\", void 0), e([v(\"service\", \"capabilities\", [\"capabilities\", \"currentVersion\", \"serviceDataType\"])], y.prototype, \"readCapabilities\", null), e([f({\n    type: Number\n  })], y.prototype, \"compressionQuality\", void 0), e([I(\"compressionQuality\")], y.prototype, \"writeCompressionQuality\", null), e([f({\n    type: Number\n  })], y.prototype, \"compressionTolerance\", void 0), e([I(\"compressionTolerance\")], y.prototype, \"writeCompressionTolerance\", null), e([f({\n    json: {\n      read: {\n        source: \"copyrightText\"\n      }\n    }\n  })], y.prototype, \"copyright\", void 0), e([f({\n    readOnly: !0,\n    dependsOn: [\"_serviceSupportsMosaicRule\"]\n  })], y.prototype, \"defaultMosaicRule\", void 0), e([v(\"defaultMosaicRule\", [\"defaultMosaicMethod\"])], y.prototype, \"readDefaultMosaicRule\", null), e([f({\n    type: String,\n    json: {\n      name: \"layerDefinition.definitionExpression\",\n      write: {\n        enabled: !0,\n        allowNull: !0\n      }\n    }\n  })], y.prototype, \"definitionExpression\", void 0), e([f({\n    readOnly: !0,\n    constructOnly: !0\n  })], y.prototype, \"exportImageServiceParameters\", void 0), e([f()], y.prototype, \"rasterInfo\", void 0), e([f({\n    readOnly: !0,\n    type: [D]\n  })], y.prototype, \"fields\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"fieldsIndex\", null), e([f({\n    type: [\"png\", \"png8\", \"png24\", \"png32\", \"jpg\", \"bmp\", \"gif\", \"jpgpng\", \"lerc\", \"tiff\"],\n    json: {\n      write: !0\n    }\n  })], y.prototype, \"format\", null), e([v(\"service\", \"format\", [\"serviceDataType\"])], y.prototype, \"readFormat\", null), e([f({\n    type: ie\n  })], y.prototype, \"fullExtent\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"hasMultidimensions\", void 0), e([f({\n    json: {\n      read: {\n        source: \"maxImageHeight\"\n      }\n    }\n  })], y.prototype, \"imageMaxHeight\", void 0), e([f({\n    json: {\n      read: {\n        source: \"maxImageWidth\"\n      }\n    }\n  })], y.prototype, \"imageMaxWidth\", void 0), e([f({\n    type: String,\n    json: {\n      type: C.jsonValues,\n      read: C.read,\n      write: C.write\n    }\n  })], y.prototype, \"interpolation\", void 0), e([f()], y.prototype, \"minScale\", void 0), e([v(\"service\", \"minScale\")], y.prototype, \"readMinScale\", null), e([f()], y.prototype, \"maxScale\", void 0), e([v(\"service\", \"maxScale\")], y.prototype, \"readMaxScale\", null), e([f({\n    type: P\n  })], y.prototype, \"mosaicRule\", null), e([v(\"mosaicRule\", [\"mosaicRule\", \"defaultMosaicMethod\"])], y.prototype, \"readMosaicRule\", null), e([I(\"mosaicRule\")], y.prototype, \"writeMosaicRule\", null), e([f()], y.prototype, \"multidimensionalInfo\", null), e([f({\n    type: N,\n    json: {\n      write: !0\n    }\n  })], y.prototype, \"multidimensionalSubset\", void 0), e([f({\n    json: {\n      type: g\n    }\n  })], y.prototype, \"noData\", void 0), e([I(\"noData\")], y.prototype, \"writeNoData\", null), e([f({\n    type: String,\n    json: {\n      type: M.jsonValues,\n      read: M.read,\n      write: M.write\n    }\n  })], y.prototype, \"noDataInterpretation\", void 0), e([f({\n    type: String,\n    readOnly: !0,\n    json: {\n      read: {\n        source: [\"fields\"]\n      }\n    }\n  })], y.prototype, \"objectIdField\", void 0), e([v(\"objectIdField\")], y.prototype, \"readObjectIdField\", null), e([f({})], y.prototype, \"geometryType\", void 0), e([f({})], y.prototype, \"typeIdField\", void 0), e([f({})], y.prototype, \"types\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"parsedUrl\", null), e([f({\n    type: Function\n  })], y.prototype, \"pixelFilter\", void 0), e([f()], y.prototype, \"raster\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"sourceType\", void 0), e([v(\"sourceType\", [\"serviceSourceType\", \"fields\"])], y.prototype, \"readSourceType\", null), e([f()], y.prototype, \"viewId\", void 0), e([f({\n    types: r,\n    json: {\n      name: \"layerDefinition.drawingInfo.renderer\",\n      origins: {\n        \"web-scene\": {\n          types: i,\n          name: \"layerDefinition.drawingInfo.renderer\",\n          write: {\n            overridePolicy: e => ({\n              enabled: e && \"vector-field\" !== e.type && \"flow\" !== e.type\n            })\n          }\n        }\n      }\n    }\n  })], y.prototype, \"renderer\", null), e([v(\"renderer\")], y.prototype, \"readRenderer\", null), e([I(\"renderer\")], y.prototype, \"writeRenderer\", null), e([f()], y.prototype, \"symbolizer\", void 0), e([f(x)], y.prototype, \"opacity\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"rasterFields\", null), e([f({\n    constructOnly: !0\n  })], y.prototype, \"rasterFunctionInfos\", void 0), e([f({\n    type: J\n  })], y.prototype, \"renderingRule\", null), e([v(\"renderingRule\", [\"renderingRule\", \"rasterFunctionInfos\"])], y.prototype, \"readRenderingRule\", null), e([I(\"renderingRule\")], y.prototype, \"writeRenderingRule\", null), e([f()], y.prototype, \"serviceDataType\", void 0), e([f({\n    readOnly: !0,\n    type: Re\n  })], y.prototype, \"spatialReference\", void 0), e([v(\"spatialReference\", [\"spatialReference\", \"extent\"])], y.prototype, \"readSpatialReference\", null), e([f({\n    json: {\n      type: Se.jsonValues\n    }\n  })], y.prototype, \"pixelType\", void 0), e([v(\"pixelType\")], y.prototype, \"readPixelType\", null), e([I(\"pixelType\")], y.prototype, \"writePixelType\", null), e([f({\n    constructOnly: !0,\n    type: q\n  })], y.prototype, \"serviceRasterInfo\", void 0), e([f()], y.prototype, \"sourceJSON\", void 0), e([f(w)], y.prototype, \"url\", void 0), e([f({\n    readOnly: !0\n  })], y.prototype, \"version\", void 0), e([v(\"version\", [\"currentVersion\", \"fields\", \"timeInfo\"])], y.prototype, \"readVersion\", null), y = e([b(\"esri.layers.mixins.ArcGISImageService\")], y), y;\n};\n\nexport { xe as ArcGISImageService };","map":{"version":3,"names":["_","e","t","rasterRendererTypes","r","websceneRasterRendererTypes","i","read","s","n","o","strict","a","clone","l","u","isSome","p","isNone","c","unwrap","m","watch","d","urlToObject","h","property","f","ensureRange","y","Integer","g","ensureClass","R","ensureNumber","S","reader","v","subclass","b","writer","I","opacity","x","url","w","ExportImageServiceParameters","F","D","j","isSupportedRendererType","T","P","N","O","interpolationKebab","C","noDataInterpretationKebab","M","J","q","V","hasExcludedVariableOrDimension","E","getSubsetVariablesFromMdInfo","A","getDefaultMultidimensionalDefinition","Q","decode","H","getFormat","U","uvComponentToVector","z","getSupportedRendererTypes","L","getDefaultBandCombination","B","createDefaultRenderer","k","normalizeRendererJSON","G","W","computeAngles","K","computePixelSpaceLocations","X","computeHistograms","$","computeStatisticsHistograms","Y","getImageSpatialReferenceQueryParameter","Z","getSamples","ee","identify","te","executeQueryJSON","re","ie","se","ne","oe","executeForCount","ae","executeForIds","le","fetchServiceRasterInfo","ue","generateRasterInfo","pe","getCatalogItemRasterInfo","ce","me","de","he","fe","ye","createFlowMesh","ge","Re","Se","U1","U2","U4","U8","S8","U16","S16","U32","S32","F32","F64","C64","C128","UNKNOWN","ve","Set","be","min","max","Ie","JSON","stringify","match","map","replace","join","xe","constructor","arguments","_functionRasterInfos","_rasterJobHandler","instance","refCount","connectionPromise","_cachedRendererJson","_serviceSupportsMosaicRule","_rasterAttributeTableFieldPrefix","adjustAspectRatio","bandIds","capabilities","compressionQuality","compressionTolerance","copyright","defaultMosaicRule","definitionExpression","exportImageServiceParameters","rasterInfo","fields","fullExtent","hasMultidimensions","imageMaxHeight","imageMaxWidth","interpolation","minScale","maxScale","multidimensionalSubset","noData","noDataInterpretation","objectIdField","geometryType","typeIdField","types","pixelFilter","raster","sourceType","viewId","symbolizer","rasterFunctionInfos","serviceDataType","spatialReference","pixelType","serviceRasterInfo","sourceJSON","version","initialize","_set","layer","readServiceSupportsMosaicRule","_isMosaicRuleSupported","_rasterFunctionNamesIndex","Map","length","forEach","set","name","toLowerCase","readBandIds","Array","isArray","every","readCapabilities","_readCapabilities","writeCompressionQuality","format","writeCompressionTolerance","readDefaultMosaicRule","fromJSON","fieldsIndex","has","readFormat","readMinScale","minLOD","maxLOD","readMaxScale","mosaicRule","mosaicMethod","toJSON","mosaicOperation","readMosaicRule","writeMosaicRule","where","_isValidCustomizedMosaicRule","multidimensionalInfo","writeNoData","readObjectIdField","filter","type","parsedUrl","readSourceType","_isMosaicDataset","renderer","loaded","_configRenderer","readRenderer","layerDefinition","drawingInfo","symbolTileSize","getLogger","declaredClass","warn","writeRenderer","rasterFields","alias","domain","editable","push","operations","supportsQuery","some","_isVectorDataSet","attributeTable","concat","renderingRule","rasterFunction","rasterFunctionArguments","readRenderingRule","_isRFTJson","rasterFunctionDefinition","writeRenderingRule","readSpatialReference","extent","readPixelType","writePixelType","readVersion","currentVersion","hasOwnProperty","applyFilter","_clonePixelData","applyRenderer","_isPicture","bind","updateSymbolizer","symbolize","pixelBlock","destroy","_shutdownJobHandler","increaseRasterJobHandlerUsage","decreaseRasterJobHandlerUsage","_fetchCapabilities","signal","supportsComputeAngles","_getRequestOptions","supportsComputePixelLocation","supportsComputeHistograms","supportsComputeStatisticsHistograms","getField","get","getFieldDomain","fetchImage","getExportImageServiceParameters","timeExtent","requestAsImageElement","_canRequestImageElement","document","createElement","width","height","imageOrCanvasElement","bandCount","createEmptyBand","pixelData","pixels","mask","Uint8Array","imageServiceParameters","imageProps","_requestArrayBuffer","fetchKeyProperties","query","_getQueryParams","then","data","fetchRasterAttributeTable","Promise","reject","getCatalogItemICSInfo","ics","icsToPixelTransform","icsExtent","northDirection","catch","geometries","inSR","wkid","outSR","xmin","xmax","ymax","ymin","all","ipxf","geodataXform","xf_0","coefficients","affine","cellsizeRatio","imageCoordinateSystem","Math","atan","PI","functionName","_isVectorFieldResampleFunction","_generateRasterInfo","shiftCentralMeridian","_hasRenderingRule","BandIds","Raster","_combineMosaicRuleWithTimeExtent","multidimensionalDefinition","_getRenderingRuleString","start","end","time","dimensions","find","variableName","dimensionName","isSlice","values","bbox","bboxSR","imageSR","size","supportsGetSamples","supportsIdentify","createQuery","outFields","returnGeometry","queryRasters","requestOptions","_prepareForQuery","queryObjectIds","queryRasterCount","queryVisibleRasters","load","pixelSize","returnDomainValues","returnTopmostRaster","showNoDataRecords","includes","slice","_updateRenderingRulesFunctionName","outSpatialReference","equals","geometry","renderingRules","returnCatalogItems","maxItemCount","customParameters","value","catalogItems","features","_processVisibleRastersResponse","templateRRFunctionNames","templateFields","attributes","objectIds","fetchVariableStatisticsHistograms","variable","statistics","histograms","avg","mean","stddev","standardDeviation","meshType","simulationSettings","flowData","AbortController","getMultidimensionalSubsetVariables","_fetchService","_fetchServiceInfo","resolve","_getRasterFunctionInfos","_isSupportedRenderer","addHandles","popupEnabled","popupTemplate","_updateMultidimensionalDefinition","timeInfo","startField","variables","_cleanupMultidimensionalDefinition","getTime","_initJobHandler","ssl","split","trim","indexOf","origin","serviceSourceType","functionArguments","ResampleType","resampleType","rendererJSON","success","_decodePixelBlock","options","responseType","refreshParameters","params","String","fromCharCode","apply","useCanvas","planes","noDataValue","defaultVariableName","processedValues","properties","Values","_updateResponseFieldNames","_updateFeatureWithMagDirValues","_updateFeatureWithRasterAttributeTableValues","sourceLayer","_updateFeatureWithDomainValues","parseInt","parseFloat","minValue","maxValue","codedValues","code","thumbnail","thumbnailEx","function","advancedQueryCapabilities","maxRecordCount","supportsAttachment","supportsExportImage","supportsMeasure","supportsDownload","supportsProject","supportsQueryBoundary","supportsCalculateVolume","supportsAdd","supportsDelete","supportsEditing","supportsUpdate","supportsCalculate","supportsTruncate","supportsValidateSql","supportsChangeTracking","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsExceedsLimitStatistics","supportsQueryAnalytics","supportsQueryTopFeatures","maxRecordCountFactor","supportsStatistics","supportsOrderBy","supportsDistinct","supportsPagination","supportsStandardizedQueriesOnly","useStandardizedQueries","supportsPercentileStatistics","supportsCentroid","supportsReturningGeometryCentroid","supportsDistance","supportsQueryWithDistance","supportsExtent","supportsReturningQueryExtent","supportsGeometryProperties","supportsReturningGeometryProperties","supportsHavingClause","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsMaxRecordCountFactor","supportsSqlExpression","supportsTopFeaturesQuery","supportsQueryByOthers","supportsHistoricMoment","supportsFormatPBF","supportsDisjointSpatialRelationship","supportsCacheHint","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsDefaultSpatialReference","supportsDefaultSR","supportsFullTextSearch","supportsCompactGeometry","standardMaxRecordCount","tileMaxRecordCount","path","prototype","readOnly","json","write","Number","source","dependsOn","enabled","allowNull","constructOnly","jsonValues","Function","origins","overridePolicy","ArcGISImageService"],"sources":["E:////Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/mixins/ArcGISImageService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import t from\"../../Graphic.js\";import{rasterRendererTypes as r,websceneRasterRendererTypes as i,read as s}from\"../../rasterRenderers.js\";import n from\"../../request.js\";import o from\"../../core/Error.js\";import{strict as a}from\"../../core/jsonMap.js\";import{clone as l}from\"../../core/lang.js\";import u from\"../../core/Logger.js\";import{isSome as p,isNone as c,unwrap as m}from\"../../core/maybe.js\";import{watch as d}from\"../../core/reactiveUtils.js\";import{urlToObject as h}from\"../../core/urlUtils.js\";import{property as f,ensureRange as y}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as g,ensureClass as R,ensureNumber as S}from\"../../core/accessorSupport/ensureType.js\";import{reader as v}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as b}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as I}from\"../../core/accessorSupport/decorators/writer.js\";import{opacity as x,url as w}from\"../support/commonProperties.js\";import _ from\"../support/DimensionalDefinition.js\";import{ExportImageServiceParameters as F}from\"../support/ExportImageServiceParameters.js\";import D from\"../support/Field.js\";import j from\"../support/FieldsIndex.js\";import{isSupportedRendererType as T}from\"../support/imageryRendererUtils.js\";import P from\"../support/MosaicRule.js\";import N from\"../support/MultidimensionalSubset.js\";import O from\"../support/PixelBlock.js\";import{interpolationKebab as C,noDataInterpretationKebab as M}from\"../support/rasterEnums.js\";import J from\"../support/RasterFunction.js\";import q from\"../support/RasterInfo.js\";import V from\"../support/RasterJobHandler.js\";import{hasExcludedVariableOrDimension as E,getSubsetVariablesFromMdInfo as A,getDefaultMultidimensionalDefinition as Q}from\"../support/rasterDatasets/multidimensionalUtils.js\";import{decode as H,getFormat as U}from\"../support/rasterFormats/RasterCodec.js\";import{uvComponentToVector as z}from\"../support/rasterFunctions/vectorFieldUtils.js\";import{getSupportedRendererTypes as L,getDefaultBandCombination as B,createDefaultRenderer as k,normalizeRendererJSON as G}from\"../../renderers/support/rasterRendererHelper.js\";import W from\"../../renderers/support/RasterSymbolizer.js\";import{computeAngles as K,computePixelSpaceLocations as X,computeHistograms as $,computeStatisticsHistograms as Y,getImageSpatialReferenceQueryParameter as Z,getSamples as ee,identify as te}from\"../../rest/imageService.js\";import\"../../core/has.js\";import\"../support/source/DataLayerSource.js\";import{executeQueryJSON as re}from\"../../rest/query/executeQueryJSON.js\";import\"../../config.js\";import\"../../kernel.js\";import\"../../core/unitUtils.js\";import\"../../geometry/support/spatialReferenceUtils.js\";import\"../graphics/featureConversionUtils.js\";import ie from\"../../geometry/Extent.js\";import\"../../geometry/Geometry.js\";import\"../../geometry/Multipoint.js\";import\"../../geometry/Point.js\";import se from\"../../geometry/Polygon.js\";import\"../../geometry/Polyline.js\";import\"../../geometry/support/normalizeUtils.js\";import\"../../core/pbf.js\";import ne from\"../../rest/support/FeatureSet.js\";import oe from\"../../rest/support/Query.js\";import\"../../rest/query/support/AttachmentInfo.js\";import\"../../rest/support/AttachmentQuery.js\";import{executeForCount as ae}from\"../../rest/query/executeForCount.js\";import{executeForIds as le}from\"../../rest/query/executeForIds.js\";import\"../../rest/support/RelationshipQuery.js\";import\"../../rest/support/TopFeaturesQuery.js\";import{fetchServiceRasterInfo as ue,generateRasterInfo as pe}from\"../../rest/imageService/fetchRasterInfo.js\";import{getCatalogItemRasterInfo as ce}from\"../../rest/imageService/getCatalogItemRasterInfo.js\";import me from\"../../rest/support/ImageAngleParameters.js\";import de from\"../../rest/support/ImageHistogramParameters.js\";import he from\"../../rest/support/ImageIdentifyParameters.js\";import fe from\"../../rest/support/ImagePixelLocationParameters.js\";import ye from\"../../rest/support/ImageSampleParameters.js\";import{createFlowMesh as ge}from\"../../views/2d/engine/flow/dataUtils.js\";import Re from\"../../geometry/SpatialReference.js\";const Se=a()({U1:\"u1\",U2:\"u2\",U4:\"u4\",U8:\"u8\",S8:\"s8\",U16:\"u16\",S16:\"s16\",U32:\"u32\",S32:\"s32\",F32:\"f32\",F64:\"f64\",C64:\"c64\",C128:\"c128\",UNKNOWN:\"unknown\"}),ve=new Set([\"png\",\"png8\",\"png24\",\"png32\",\"jpg\",\"bmp\",\"gif\",\"jpgpng\",\"lerc\",\"tiff\"]),be=y(S,{min:0,max:255});function Ie(e){if(!e)return null;const t=JSON.stringify(e).match(/\"rasterFunction\":\"(.*?\")/gi)?.map((e=>e.replace('\"rasterFunction\":\"',\"\").replace('\"',\"\")));return t?t.join(\"/\"):null}const xe=a=>{let y=class extends a{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix=\"Raster.\",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType=\"polygon\",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set(\"exportImageServiceParameters\",new F({layer:this}))}readServiceSupportsMosaicRule(e,t){return this._isMosaicRuleSupported(t)}get _rasterFunctionNamesIndex(){const e=new Map;return!this.rasterFunctionInfos||p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach((t=>{e.set(t.name.toLowerCase().replace(/ /gi,\"_\"),t.name)})),e}readBandIds(e,t){if(Array.isArray(e)&&e.length>0&&e.every((e=>\"number\"==typeof e)))return e}readCapabilities(e,t){return this._readCapabilities(t)}writeCompressionQuality(e,t,r){null!=e&&\"lerc\"!==this.format&&(t[r]=e)}writeCompressionTolerance(e,t,r){\"lerc\"===this.format&&null!=e&&(t[r]=e)}readDefaultMosaicRule(e,t){return this._serviceSupportsMosaicRule?P.fromJSON(t):null}get fieldsIndex(){return this.fields?new j(this.fields):null}set format(e){e&&ve.has(e.toLowerCase())&&this._set(\"format\",e.toLowerCase())}readFormat(e,t){return\"esriImageServiceDataTypeVector-UV\"===t.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===t.serviceDataType||null!=this.pixelFilter?\"lerc\":\"jpgpng\"}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}set mosaicRule(e){let t=e;t&&t.mosaicMethod&&(t=P.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set(\"mosaicRule\",t)}readMosaicRule(e,t){const r=e||t.mosaicRule;return r?P.fromJSON(r):this._isMosaicRuleSupported(t)?P.fromJSON(t):null}writeMosaicRule(e,t,r){let i=this.mosaicRule;const s=this.definitionExpression;i?s&&s!==i.where&&(i=i.clone(),i.where=s):s&&(i=new P({where:s})),this._isValidCustomizedMosaicRule(i)&&(t[r]=i.toJSON())}get multidimensionalInfo(){return p(this.serviceRasterInfo)?this.serviceRasterInfo.multidimensionalInfo:null}writeNoData(e,t,r){null!=e&&\"number\"==typeof e&&(t[r]=be(e))}readObjectIdField(e,t){if(!e){const r=t.fields.filter((e=>\"esriFieldTypeOID\"===e.type||\"oid\"===e.type));e=r&&r[0]&&r[0].name}return e}get parsedUrl(){return h(this.url)}readSourceType(e,t){return this._isMosaicDataset(t)?\"mosaic-dataset\":\"raster-dataset\"}set renderer(e){this.loaded&&(e=this._configRenderer(e)),this._set(\"renderer\",e)}readRenderer(e,t,r){const i=t?.layerDefinition?.drawingInfo?.renderer,n=s(i,r);return null==n?null:(\"vector-field\"===n.type&&t.symbolTileSize&&!i.symbolTileSize&&(n.symbolTileSize=t.symbolTileSize),T(n)||u.getLogger(this.declaredClass).warn(\"ArcGISImageService\",\"Imagery layer doesn't support given renderer type.\"),n)}writeRenderer(e,t,r){t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.toJSON(),\"vector-field\"===e.type&&(t.symbolTileSize=e.symbolTileSize)}get rasterFields(){const e=this._rasterAttributeTableFieldPrefix||\"Raster.\",t=new D({name:\"Raster.ItemPixelValue\",alias:\"Item Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),r=new D({name:\"Raster.ServicePixelValue\",alias:\"Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),i=new D({name:\"Raster.ServicePixelValue.Raw\",alias:\"Raw Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"});let s=this.fields?l(this.fields):[];s.push(r),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&s.push(t),this.version>=10.4&&p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some((e=>\"none\"===e.name.toLowerCase()))&&s.push(i),p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter((e=>\"none\"!==e.name.toLowerCase())).forEach((e=>{s.push(new D({name:\"Raster.ServicePixelValue.\"+e.name,alias:e.name,domain:null,editable:!1,length:50,type:\"string\"}))})),this._isVectorDataSet()&&(s.push(new D({name:\"Raster.Magnitude\",alias:\"Magnitude\",domain:null,editable:!1,type:\"double\"})),s.push(new D({name:\"Raster.Direction\",alias:\"Direction\",domain:null,editable:!1,type:\"double\"})));const{attributeTable:n}=this.rasterInfo??{};if(p(n)){const t=n.fields.filter((e=>\"esriFieldTypeOID\"!==e.type&&\"value\"!==e.name.toLowerCase())).map((t=>{const r=l(t);return r.name=e+t.name,r}));s=s.concat(t)}return s}set renderingRule(e){let t=e;t&&t.rasterFunction&&(t=J.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set(\"renderingRule\",t)}readRenderingRule(e,t){const r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&\"None\"!==r[0].name?this._isRFTJson(t.renderingRule)?J.fromJSON({rasterFunctionDefinition:t.renderingRule}):J.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}writeRenderingRule(e,t,r){const i=e.toJSON();i.rasterFunctionDefinition?t[r]=i.rasterFunctionDefinition:t[r]=i}readSpatialReference(e,t){const r=e||t.extent.spatialReference;return r?Re.fromJSON(r):null}readPixelType(e){return Se.fromJSON(e)||e}writePixelType(e,t,r){(c(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[r]=Se.toJSON(e))}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty(\"fields\")||t.hasOwnProperty(\"timeInfo\")?10:9.3),r}applyFilter(e){let t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}async applyRenderer(e,t){let r=e;const{renderer:i,symbolizer:s,pixelFilter:n,bandIds:o}=this;if(!this._isPicture()&&i&&s&&!n){const n=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(i.toJSON()),a=this._rasterJobHandler.instance;if(a){n&&(s.bind(),await a.updateSymbolizer(s,t),this._cachedRendererJson=i.toJSON());const l=await a.symbolize({bandIds:o,...e},t);r={extent:e.extent,pixelBlock:l}}else r={extent:e.extent,pixelBlock:s.symbolize({bandIds:o,...e})}}return r}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeAngles)throw new o(\"imagery-layer:compute-angles\",\"this operation is not supported on the input image service\");return e=R(me,e).clone(),K(this.url,e,this._getRequestOptions(t))}async computePixelSpaceLocations(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputePixelLocation)throw new o(\"imagery-layer:compute-pixel-space-locations\",\"this operation is not supported on the input image service\");return e=R(fe,e).clone(),X(this.url,e,this._getRequestOptions(t))}async computeHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeHistograms)throw new o(\"imagery-layer:compute-histograms\",\"this operation is not supported on the input image service\");e=R(de,e).clone();const{raster:r,mosaicRule:i,renderingRule:s}=this;return s&&null==e.renderingRule&&(e.renderingRule=s),i&&null==e.mosaicRule&&(e.mosaicRule=i),r&&null==e.raster&&(e.raster=r),$(this.url,e,this._getRequestOptions(t))}async computeStatisticsHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeStatisticsHistograms)throw new o(\"imagery-layer:compute-statistics-histograms\",\"this operation is not supported on the input image service\");e=R(de,e).clone();const{raster:r,mosaicRule:i,renderingRule:s}=this;return s&&null==e.renderingRule&&(e.renderingRule=s),i&&null==e.mosaicRule&&(e.mosaicRule=i),r&&null==e.raster&&(e.raster=r),Y(this.url,e,this._getRequestOptions(t))}getField(e){const{fieldsIndex:t}=this;return p(t)?t.get(e):void 0}getFieldDomain(e,t){const r=this.getField(e);return r?r.domain:null}async fetchImage(e,t,r,i={}){if(null==e||null==t||null==r)throw new o(\"imagery-layer:fetch-image\",\"Insufficient parameters for requesting an image. A valid extent, width and height values are required.\");if(this.renderer||this.symbolizer){const e=await this.generateRasterInfo(this.renderingRule,{signal:i.signal});e&&(this.rasterInfo=e)}const s=this.getExportImageServiceParameters(e,t,r,i.timeExtent);if(null==s){if(i.requestAsImageElement&&this._canRequestImageElement(this.format)){const e=document.createElement(\"canvas\");return e.width=t,e.height=r,{imageOrCanvasElement:e}}const s=(this.bandIds?.length||this.rasterInfo?.bandCount)??0,n=t*r,o=this.rasterInfo?.pixelType??\"unknown\",a=[];for(let e=0;e<s;e++)a.push(O.createEmptyBand(o,n));return{pixelData:{pixelBlock:new O({width:t,height:r,pixels:a,mask:new Uint8Array(n),pixelType:o}),extent:e}}}const n={imageServiceParameters:s,imageProps:{extent:e,width:t,height:r,format:this.format},requestAsImageElement:i.requestAsImageElement&&!this.pixelFilter||!1,signal:i.signal};return this._requestArrayBuffer(n)}fetchKeyProperties(e){return n(S(this.parsedUrl)+\"/keyProperties\",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.renderingRule:null})}).then((e=>e.data))}fetchRasterAttributeTable(e){return this.version<10.1?Promise.reject(new o(\"#fetchRasterAttributeTable()\",\"Failed to get rasterAttributeTable\")):n(S(this.parsedUrl)+\"/rasterAttributeTable\",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.renderingRule:null})}).then((e=>ne.fromJSON(e.data)))}getCatalogItemRasterInfo(e,t){const r={...t,query:this._getQueryParams()};return ce(S(this.parsedUrl),e,r)}async getCatalogItemICSInfo(e,t){const{data:r}=await n(S(this.parsedUrl)+\"/\"+e+\"/info/ics\",{query:this._getQueryParams(),...t}),i=r&&r.ics;if(!i)return;let s=null;try{s=(await n(S(this.parsedUrl)+\"/\"+e+\"/info\",{query:this._getQueryParams(),...t})).data.extent}catch{}if(!s||!s.spatialReference)return{ics:i,icsToPixelTransform:null,icsExtent:null,northDirection:null};const o=this.version>=10.7?n(S(this.parsedUrl)+\"/\"+e+\"/info/icstopixel\",{query:this._getQueryParams(),...t}).then((e=>e.data)).catch((()=>({}))):{},a=s.spatialReference,l={geometries:JSON.stringify({geometryType:\"esriGeometryEnvelope\",geometries:[s]}),inSR:a.wkid||JSON.stringify(a),outSR:\"0:\"+e},u=n(S(this.parsedUrl)+\"/project\",{query:this._getQueryParams(l),...t}).then((e=>e.data)).catch((()=>({}))),p=5,c=(s.xmin+s.xmax)/2,m=(s.ymax-s.ymin)/(p+1),d=s.ymin+m,h=[];for(let n=0;n<p;n++)h.push({x:c,y:d+m*n});const f={geometries:JSON.stringify({geometryType:\"esriGeometryPoint\",geometries:h}),inSR:a.wkid||JSON.stringify(a),outSR:\"0:\"+e},y=n(S(this.parsedUrl)+\"/project\",{query:this._getQueryParams(f),...t}).then((e=>e.data)).catch((()=>({}))),g=await Promise.all([o,u,y]);let R=g[0].ipxf;if(null==R){const e=i.geodataXform?.xf_0;\"topup\"===e?.name?.toLowerCase()&&6===e?.coefficients?.length&&(R={affine:{name:\"ics [sensor: Frame] to pixel (column, row) transformation\",coefficients:e.coefficients,cellsizeRatio:0,type:\"GeometricXform\"}})}const v=ie.fromJSON(g[1]&&g[1].geometries&&g[1].geometries[0]);v&&(v.spatialReference=new Re({wkid:0,imageCoordinateSystem:i}));const b=g[2].geometries?g[2].geometries.filter((e=>null!=e&&null!=e.x&&null!=e.y&&\"NaN\"!==e.x&&\"NaN\"!==e.y)):[],I=b.length;if(I<3)return{ics:i,icsToPixelTransform:R,icsExtent:v,northDirection:null};let x=0,w=0,_=0,F=0;for(let n=0;n<I;n++)x+=b[n].x,w+=b[n].y,_+=b[n].x*b[n].x,F+=b[n].x*b[n].y;const D=(I*F-x*w)/(I*_-x*x);let j=0;const T=b[p-1].x>b[0].x,P=b[p-1].y>b[0].y;return D===1/0?j=P?90:270:0===D?j=T?0:180:D>0?j=T?180*Math.atan(D)/Math.PI:180*Math.atan(D)/Math.PI+180:D<0&&(j=P?180+180*Math.atan(D)/Math.PI:360+180*Math.atan(D)/Math.PI),{ics:i,icsToPixelTransform:R,icsExtent:v,northDirection:j}}async generateRasterInfo(e,t){if(this.serviceRasterInfo&&(!e||\"none\"===e.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(e)))return this.serviceRasterInfo;const r=Ie(e);if(!r)return null;if(this._functionRasterInfos[r])return this._functionRasterInfos[r];const i=this._generateRasterInfo(e,t);this._functionRasterInfos[r]=i;try{return await i}catch{return this._functionRasterInfos[r]=null,null}}getExportImageServiceParameters(e,t,r,i){e=e.clone().shiftCentralMeridian();const s=Z(e.spatialReference,S(this.parsedUrl));this.pixelType!==this.serviceRasterInfo?.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const n=this.exportImageServiceParameters.toJSON(),{bandIds:o,noData:a}=n;let{renderingRule:l}=n;const u=this.renderingRule?.rasterFunctionDefinition,c=!this.renderer||\"raster-stretch\"===this.renderer.type;if(o?.length&&this._hasRenderingRule(this.renderingRule)&&!u&&c){const e={rasterFunction:\"ExtractBand\",rasterFunctionArguments:{BandIds:o}};if(\"Stretch\"===l.rasterFunction)e.rasterFunctionArguments.Raster=l.rasterFunctionArguments.Raster,l.rasterFunctionArguments.Raster=e;else if(\"Colormap\"===l.rasterFunction){const t=l.rasterFunctionArguments.Raster;\"Stretch\"===t?.rasterFunction?(e.rasterFunctionArguments.Raster=t.rasterFunctionArguments.Raster,t.rasterFunctionArguments.Raster=e):(e.rasterFunctionArguments.Raster=t,l.rasterFunctionArguments.Raster=e)}else e.rasterFunctionArguments.Raster=l,l=e;n.bandIds=void 0}else n.bandIds=o?.join(\",\");a instanceof Array&&a.length>0&&(n.noData=a.join(\",\"));const m=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,i):null;n.mosaicRule=p(m)?JSON.stringify(m):null;const{multidimensionalSubset:d}=this;if(d&&p(m)&&m.multidimensionalDefinition&&E(m.multidimensionalDefinition,d,!0))return null;n.renderingRule=this._getRenderingRuleString(J.fromJSON(l));const h={};if(i){const{start:e,end:t}=i.toJSON();let r;if(e&&t&&e===t?(h.time=\"\"+e,r=[e]):null==e&&null==t||(h.time=`${e??\"null\"},${t??\"null\"}`,r=null!=e&&null!=t?[e,t]:[e??t]),r&&d){const e=d.dimensions.find((({name:e})=>\"StdTime\"===e));if(2===r.length&&e.extent.length){if(r[0]=Math.max(r[0],e.extent[0]),r[1]=Math.min(r[1],e.extent[1]??e.extent[0]),r[1]<r[0])return null;h.time=r.join()}const t=new _({variableName:\"\",dimensionName:\"StdTime\",isSlice:1===r.length,values:r});if(E([t],d,!0))return null}}return{bbox:e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:s,imageSR:s,size:t+\",\"+r,...n,...h}}async getSamples(e,t){if(!(await this._fetchCapabilities(t?.signal))?.operations.supportsGetSamples)throw new o(\"imagery-layer:get-samples\",\"getSamples operation is not supported on the input image service\");e=R(ye,e).clone();const{raster:r}=this;return r&&null==e.raster&&(e.raster=r),ee(this.url,e,this._getRequestOptions(t))}async identify(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsIdentify)throw new o(\"imagery-layer:query-rasters\",\"query operation is not supported on the input image service\");e=R(he,e).clone();const{raster:r,mosaicRule:i,renderingRule:s}=this;if(s&&null==e.renderingRule&&(e.renderingRule=s),i&&null==e.mosaicRule){const t=this._combineMosaicRuleWithTimeExtent(i,e.timeExtent);e.mosaicRule=m(t)}return r&&null==e.raster&&(e.raster=r),te(this.url,e,this._getRequestOptions(t))}createQuery(){const e=new oe;return e.outFields=[\"*\"],e.returnGeometry=!0,e.where=this.definitionExpression||\"1=1\",e}async queryRasters(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),re(this.url,e,t)}async queryObjectIds(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),le(this.url,e,t)}async queryRasterCount(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),ae(this.url,e,t)}async queryVisibleRasters(e,t){if(!e)throw new o(\"imagery-layer: query-visible-rasters\",\"missing query parameter\");await this.load();const{pixelSize:r,returnDomainValues:i,returnTopmostRaster:s,showNoDataRecords:n}=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let a=!1,l=null,u=null;const m=\"raster.servicepixelvalue\",d=this._rasterFunctionNamesIndex;if(p(e.outFields)&&(a=e.outFields.some((e=>!e.toLowerCase().includes(m))),this.version>=10.4)){const t=e.outFields.filter((e=>e.toLowerCase().includes(m)&&e.length>m.length)).map((e=>{const t=e.slice(m.length+1);return[this._updateRenderingRulesFunctionName(t,d),t]}));l=t.map((e=>new J({functionName:e[0]}))),u=t.map((e=>e[1]));const{renderingRule:r}=this;0===l.length?r?.functionName?(l.push(r),u.push(r.functionName)):l=null:r?.functionName&&!l.some((e=>e.functionName===r.functionName))&&(l.push(r),u.push(r.functionName))}const h=c(e.outSpatialReference)||e.outSpatialReference.equals(this.spatialReference),f=e.timeExtent||this.timeExtent,y=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,f),g=this._getQueryParams({geometry:e.geometry,timeExtent:f,mosaicRule:y,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:l,pixelSize:r,returnCatalogItems:a,returnGeometry:h,raster:this.raster,maxItemCount:s?1:null});delete g.f;const R=new he(g);try{await this.generateRasterInfo(this.renderingRule);const r=await te(this.url,R,{signal:t?.signal,query:{...this.customParameters}}),s=e.outFields,o=null!=r.value&&r.value.toLowerCase().includes(\"nodata\");if(!(a&&!h&&r?.catalogItems?.features.length&&(n||!o)))return this._processVisibleRastersResponse(r,{returnDomainValues:i,templateRRFunctionNames:u,showNoDataRecords:n,templateFields:s});const l=this.objectIdField||\"ObjectId\",c=r.catalogItems?.features??[],m=c.map((e=>e.attributes?.[l])),d=new oe({objectIds:m,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[l]}),f=await this.queryRasters(d);return f?.features?.length&&f.features.forEach((t=>{c.forEach((r=>{r.attributes[l]===t.attributes[l]&&(r.geometry=new se(t.geometry),p(e.outSpatialReference)&&(r.geometry.spatialReference=e.outSpatialReference))}))})),this._processVisibleRastersResponse(r,{returnDomainValues:i,templateRRFunctionNames:u,showNoDataRecords:n,templateFields:s})}catch{throw new o(\"imagery-layer:query-visible-rasters\",\"encountered error when querying visible rasters\")}}async fetchVariableStatisticsHistograms(e,t){const r=n(S(this.parsedUrl)+\"/statistics\",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.statistics)),i=n(S(this.parsedUrl)+\"/histograms\",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.histograms)),s=await Promise.all([r,i]);return s[0]&&s[0].forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:s[0]||null,histograms:s[1]||null}}async createFlowMesh(e,t){const r=this._rasterJobHandler.instance;return r?r.createFlowMesh(e,t):ge(e.meshType,e.simulationSettings,e.flowData,p(t.signal)?t.signal:(new AbortController).signal)}getMultidimensionalSubsetVariables(e){const t=e??this.multidimensionalInfo;return A(this.multidimensionalSubset,t)}async _fetchService(e){await this._fetchServiceInfo(e),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const t=this.sourceJSON,r=p(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):ue(S(this.parsedUrl),t,{signal:e,query:this._getQueryParams()}).then((e=>(this._set(\"serviceRasterInfo\",e),e))),i=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:e}):null,s=this._getRasterFunctionInfos();return Promise.all([r,i,s]).then((e=>{e[1]?this._set(\"rasterInfo\",e[1]):this._set(\"rasterInfo\",e[0]),e[2]&&this._set(\"rasterFunctionInfos\",e[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set(\"renderer\",null),u.getLogger(this.declaredClass).warn(\"ArcGISImageService\",\"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer\")),this._set(\"renderer\",this._configRenderer(this.renderer)),this.addHandles([d((()=>this.renderingRule),(e=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(e).then((e=>{e&&(this.rasterInfo=e)}))}))]);const{serviceRasterInfo:t}=this;t&&p(t.multidimensionalInfo)&&this._updateMultidimensionalDefinition(t)}))}_combineMosaicRuleWithTimeExtent(e,t){const r=this.timeInfo;if(c(e)||c(this.multidimensionalInfo)||c(t)||c(r?.startField))return e;const{startField:i}=r,s=this.multidimensionalInfo.variables.some((e=>e.dimensions.some((e=>e.name===i))))?i:\"StdTime\";if(e=e.clone(),\"mosaic-dataset\"===this.sourceType)return e.multidimensionalDefinition=e.multidimensionalDefinition?.filter((e=>e.dimensionName!==s)),this._cleanupMultidimensionalDefinition(e);e.multidimensionalDefinition=e.multidimensionalDefinition||[];const n=e.multidimensionalDefinition.filter((e=>e.dimensionName===s)),o=p(t.start)?t.start.getTime():null,a=p(t.end)?t.end.getTime():null,l=null==o||null==a||o===a,u=l?[o||a]:[[o,a]],m=this.version>=10.8;if(n.length)n.forEach((e=>{e.dimensionName===s&&(m?(e.dimensionName=null,e.isSlice=!1,e.values=[]):(e.isSlice=l,e.values=u))}));else if(!m){const t=e.multidimensionalDefinition.filter((e=>null!=e.variableName&&null==e.dimensionName));t.length?t.forEach((e=>{e.dimensionName=s,e.isSlice=l,e.values=u})):e.multidimensionalDefinition.push(new _({variableName:\"\",dimensionName:s,isSlice:l,values:u}))}return this._cleanupMultidimensionalDefinition(e)}_cleanupMultidimensionalDefinition(e){return c(e)?null:(e.multidimensionalDefinition&&(e.multidimensionalDefinition=e.multidimensionalDefinition.filter((e=>!(!e.variableName&&!e.dimensionName))),0===e.multidimensionalDefinition.length&&(e.multidimensionalDefinition=null)),\"mosaic-dataset\"!==this.sourceType&&null==e.multidimensionalDefinition?null:e)}async _prepareForQuery(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsQuery)throw new o(\"imagery-layer:query-rasters\",\"query operation is not supported on the input image service\");return e=p(e)?R(oe,e):this.createQuery(),t=this._getRequestOptions(t),this.raster&&(t.query={...t.query,raster:this.raster}),{query:e,requestOptions:t}}async _initJobHandler(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const e=new V;this._rasterJobHandler.connectionPromise=e.initialize().then((()=>{this._rasterJobHandler.instance=e}),(()=>{})),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(e){const{rasterInfo:t,renderingRule:r}=this;return\"unique-value\"===e.type&&this._hasRenderingRule(r)&&1===t?.bandCount&&[\"u8\",\"s8\"].includes(t.pixelType)||null!=t&&null!=e&&L(t).includes(e.type)}async _fetchCapabilities(e){return this.capabilities||await this._fetchServiceInfo(e),this.capabilities}async _fetchServiceInfo(e){let t=this.sourceJSON;if(!t){const{data:r,ssl:i}=await n(S(this.parsedUrl),{query:this._getQueryParams(),signal:e});t=r,this.sourceJSON=t,i&&(this.url=this.url.replace(/^http:/i,\"https:\"))}if(t.capabilities?.toLowerCase().split(\",\").map((e=>e.trim())).indexOf(\"tilesonly\")>-1)throw new o(\"imagery-layer:fetch-service-info\",\"use ImageryTileLayer to open tiles-only image services\");this.read(t,{origin:\"service\",url:this.parsedUrl})}_isMosaicDataset(e){return e.serviceSourceType?\"esriImageServiceSourceTypeMosaicDataset\"===e.serviceSourceType:e.fields?.length>0}_isMosaicRuleSupported(e){if(!e)return!1;const t=this._isMosaicDataset(e),r=e.currentVersion>=10.71&&e.hasMultidimensions&&!(e.fields?.length>1);return t||r}_isVectorFieldResampleFunction(e){if(c(e))return!1;const{functionName:t,functionArguments:r}=e,i=\"resample\"===t?.toLowerCase(),s=r?.ResampleType||r?.resampleType;return i&&(7===s||10===s)}_isPicture(){return!this.format||this.format.includes(\"jpg\")||this.format.includes(\"png\")}_configRenderer(e){if(!this._isPicture()&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&this.rasterInfo&&this.rasterInfo.bandCount>=3){const e=B(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}e||(e=k(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const t=G(e.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=t,this.symbolizer.rasterInfo=this.rasterInfo):this.symbolizer=new W({rendererJSON:t,rasterInfo:this.rasterInfo}),this.symbolizer.bind().success||(this.symbolizer=null)}return e}_clonePixelData(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:p(e.pixelBlock)?e.pixelBlock.clone():null}}_getQueryParams(e){e&&p(e.renderingRule)&&\"string\"!=typeof e.renderingRule&&(e.renderingRule=this._getRenderingRuleString(e.renderingRule));const{raster:t,viewId:r}=this;return{raster:t,viewId:r,f:\"json\",...e,...this.customParameters}}_getRequestOptions(e){return{...e,query:{...e?.query,...this.customParameters}}}_decodePixelBlock(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):H(e,t,r)}async _getRasterFunctionInfos(e){const t=this.sourceJSON.rasterFunctionInfos;if(this.loaded)return t;if(t&&this.version>=10.3){if(1===t.length&&\"none\"===t[0].name.toLowerCase())return t;return(await n(S(this.parsedUrl)+\"/rasterFunctionInfos\",{query:this._getQueryParams(),signal:e})).data?.rasterFunctionInfos}return null}_canRequestImageElement(e){return!this.pixelFilter&&(!e||e.includes(\"png\"))}async _requestArrayBuffer(e){const{imageProps:t,requestAsImageElement:r,signal:i}=e;if(r&&this._canRequestImageElement(t.format)){return{imageOrCanvasElement:(await n(S(this.parsedUrl)+\"/exportImage\",{responseType:\"image\",query:this._getQueryParams({f:\"image\",...this.refreshParameters,...e.imageServiceParameters}),signal:i})).data,params:t}}const s=this._initJobHandler(),a=n(S(this.parsedUrl)+\"/exportImage\",{responseType:\"array-buffer\",query:this._getQueryParams({f:\"image\",...e.imageServiceParameters}),signal:i}),l=(await Promise.all([a,s]))[0].data,u=t.format||\"jpgpng\";let p=u;if(\"bsq\"!==p&&\"bip\"!==p&&(p=U(l)),!p)throw new o(\"imagery-layer:fetch-image\",\"unsupported format signature \"+String.fromCharCode.apply(null,new Uint8Array(l)));const c={signal:i},m=\"gif\"===u||\"bmp\"===u||u.includes(\"png\")&&(\"png\"===p||\"jpg\"===p)?H(l,{useCanvas:!0,...t},c):this._decodePixelBlock(l,{width:t.width,height:t.height,planes:null,pixelType:null,noDataValue:null,format:u},c);return{pixelData:{pixelBlock:await m,extent:t.extent},params:t}}_generateRasterInfo(e,t){const r={...t,query:this._getQueryParams()};return pe(S(this.parsedUrl),e,r)}_isValidCustomizedMosaicRule(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(e){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;const t=Q(e,{multidimensionalSubset:this.multidimensionalSubset});if(p(t)&&t.length>0){this.mosaicRule=this.mosaicRule||new P;const e=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&\"none\"!==this.renderingRule.functionName?.toLowerCase()&&t.forEach((e=>e.variableName=\"\")),(!e||e&&e.length<=0)&&(this.mosaicRule.multidimensionalDefinition=t)}}_processVisibleRastersResponse(e,r){r=r||{};const i=e.value,{templateRRFunctionNames:s,showNoDataRecords:n,returnDomainValues:o,templateFields:a}=r,l=e.processedValues;let u=e.catalogItems&&e.catalogItems.features,c=e.properties&&e.properties.Values&&e.properties.Values.map((e=>e.replace(/ /gi,\", \")))||[];const m=this.objectIdField||\"ObjectId\",d=\"string\"==typeof i&&i.toLowerCase().includes(\"nodata\"),h=[];if(i&&!u&&!d){const e={};e[m]=0;c=[i],u=[new t(this.fullExtent,null,e)]}if(!u)return[];let f,y,g;this._updateResponseFieldNames(u,a),d&&!n&&(u=[]);for(let t=0;t<u.length;t++){if(f=u[t],null!=i){if(y=c[t],g=this.renderingRule&&l&&l.length>0&&s&&s.length>0&&s.includes(this.renderingRule.functionName)?l[s.indexOf(this.renderingRule.functionName)]:i,\"nodata\"===y.toLowerCase()&&!n)continue;const e=\"Raster.ItemPixelValue\",r=\"Raster.ServicePixelValue\";f.attributes[e]=y,f.attributes[r]=g,this._updateFeatureWithMagDirValues(f,y);const o=this.fields&&this.fields.length>0;let a=this.renderingRule&&p(this.serviceRasterInfo?.attributeTable)?o?y:i:g;this.renderingRule||(a=o?y:i),this._updateFeatureWithRasterAttributeTableValues(f,a)}if(f.sourceLayer=f.layer=this,o&&this._updateFeatureWithDomainValues(f),s&&l&&s.length===l.length)for(let e=0;e<s.length;e++){const t=\"Raster.ServicePixelValue.\"+s[e];f.attributes[t]=l[e]}h.push(u[t])}return h}_updateFeatureWithRasterAttributeTableValues(e,t){const r=this.rasterInfo&&this.rasterInfo.attributeTable||this.serviceRasterInfo?.attributeTable;if(c(r))return;const{features:i,fields:s}=r,n=s.map((e=>e.name)).filter((e=>\"value\"===e.toLowerCase())),o=n&&n[0];if(!o)return;const a=i.filter((e=>e.attributes[o]===(null!=t?parseInt(t,10):null)));a&&a[0]&&s.forEach((t=>{const r=this._rasterAttributeTableFieldPrefix+t.name;e.attributes[r]=a[0].attributes[t.name]}))}_updateFeatureWithMagDirValues(e,t){if(!this._isVectorDataSet())return;const r=t.split(/,\\s*/).map((e=>parseFloat(e))),i=r.map((e=>[e])),s=r.map((e=>({minValue:e,maxValue:e,noDataValue:null}))),n=new O({height:1,width:1,pixelType:\"f32\",pixels:i,statistics:s});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:n,extent:new ie(0,0,0,0,this.spatialReference)});const o=\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType?[n.pixels[0][0],n.pixels[1][0]]:z([n.pixels[0][0],n.pixels[1][0]]);e.attributes[\"Raster.Magnitude\"]=o[0],e.attributes[\"Raster.Direction\"]=o[1]}_updateFeatureWithDomainValues(e){const t=this.fields&&this.fields.filter((e=>e.domain&&\"coded-value\"===e.domain.type));null!=t&&t.forEach((t=>{const r=e.attributes[t.name];if(null!=r){const i=t.domain.codedValues.find((e=>e.code===r));i&&(e.attributes[t.name]=i.name)}}))}_updateResponseFieldNames(e,t){if(!t||t.length<1)return;const r=this.fieldsIndex;c(r)||e.forEach((e=>{if(e&&e.attributes)for(const i of t){const t=r.get(i)?.name;t&&t!==i&&(e.attributes[i]=e.attributes[t],delete e.attributes[t])}}))}_getRenderingRuleString(e){if(this._hasRenderingRule(e)){let t=e.toJSON();return t=t.rasterFunctionDefinition??t,(t.thumbnail||t.thumbnailEx)&&(t.thumbnail=t.thumbnailEx=null),JSON.stringify(t)}return null}_hasRenderingRule(e){return null!=e&&null!=e.functionName&&\"none\"!==e.functionName.toLowerCase()}_updateRenderingRulesFunctionName(e,t){if(!e||e.length<1)return;if(\"Raw\"===e)return e.replace(\"Raw\",\"None\");const r=e.toLowerCase().replace(/ /gi,\"_\");return t.has(r)?t.get(r):e}_isRFTJson(e){return e&&e.name&&e.arguments&&e.function&&e.hasOwnProperty(\"functionType\")}_isVectorDataSet(){return\"esriImageServiceDataTypeVector-UV\"===this.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType}_readCapabilities(e){const t=e.capabilities?e.capabilities.toLowerCase().split(\",\").map((e=>e.trim())):[\"image\",\"catalog\"],{currentVersion:r,advancedQueryCapabilities:i,maxRecordCount:s}=e,n=t.includes(\"image\"),o=\"esriImageServiceDataTypeElevation\"===e.serviceDataType,a=!!(e.spatialReference||e.extent&&e.extent.spatialReference),l=t.includes(\"edit\");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:n,supportsExportImage:n,supportsIdentify:n,supportsMeasure:t.includes(\"mensuration\")&&a,supportsDownload:t.includes(\"download\"),supportsQuery:t.includes(\"catalog\")&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&n,supportsProject:r>=10.3&&n,supportsComputeStatisticsHistograms:r>=10.4&&n,supportsQueryBoundary:r>=10.6&&n,supportsCalculateVolume:r>=10.7&&o,supportsComputePixelLocation:r>=10.7&&t.includes(\"catalog\"),supportsComputeAngles:r>=10.91,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsUpdate:l,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:s,maxRecordCountFactor:void 0,supportsStatistics:!!i?.supportsStatistics,supportsOrderBy:!!i?.supportsOrderBy,supportsDistinct:!!i?.supportsDistinct,supportsPagination:!!i?.supportsPagination,supportsStandardizedQueriesOnly:!!i?.useStandardizedQueries,supportsPercentileStatistics:!!i?.supportsPercentileStatistics,supportsCentroid:!!i?.supportsReturningGeometryCentroid,supportsDistance:!!i?.supportsQueryWithDistance,supportsExtent:!!i?.supportsReturningQueryExtent,supportsGeometryProperties:!!i?.supportsReturningGeometryProperties,supportsHavingClause:!!i?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!i?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}}};function S(e){return e?.path??\"\"}return e([f()],y.prototype,\"_functionRasterInfos\",void 0),e([f()],y.prototype,\"_rasterJobHandler\",void 0),e([f()],y.prototype,\"_cachedRendererJson\",void 0),e([f({readOnly:!0})],y.prototype,\"_serviceSupportsMosaicRule\",void 0),e([v(\"_serviceSupportsMosaicRule\",[\"currentVersion\",\"fields\"])],y.prototype,\"readServiceSupportsMosaicRule\",null),e([f()],y.prototype,\"_rasterAttributeTableFieldPrefix\",void 0),e([f({readOnly:!0})],y.prototype,\"_rasterFunctionNamesIndex\",null),e([f()],y.prototype,\"adjustAspectRatio\",void 0),e([f({type:[g],json:{write:!0}})],y.prototype,\"bandIds\",void 0),e([v(\"bandIds\")],y.prototype,\"readBandIds\",null),e([f({readOnly:!0,json:{read:!1}})],y.prototype,\"capabilities\",void 0),e([v(\"service\",\"capabilities\",[\"capabilities\",\"currentVersion\",\"serviceDataType\"])],y.prototype,\"readCapabilities\",null),e([f({type:Number})],y.prototype,\"compressionQuality\",void 0),e([I(\"compressionQuality\")],y.prototype,\"writeCompressionQuality\",null),e([f({type:Number})],y.prototype,\"compressionTolerance\",void 0),e([I(\"compressionTolerance\")],y.prototype,\"writeCompressionTolerance\",null),e([f({json:{read:{source:\"copyrightText\"}}})],y.prototype,\"copyright\",void 0),e([f({readOnly:!0,dependsOn:[\"_serviceSupportsMosaicRule\"]})],y.prototype,\"defaultMosaicRule\",void 0),e([v(\"defaultMosaicRule\",[\"defaultMosaicMethod\"])],y.prototype,\"readDefaultMosaicRule\",null),e([f({type:String,json:{name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],y.prototype,\"definitionExpression\",void 0),e([f({readOnly:!0,constructOnly:!0})],y.prototype,\"exportImageServiceParameters\",void 0),e([f()],y.prototype,\"rasterInfo\",void 0),e([f({readOnly:!0,type:[D]})],y.prototype,\"fields\",void 0),e([f({readOnly:!0})],y.prototype,\"fieldsIndex\",null),e([f({type:[\"png\",\"png8\",\"png24\",\"png32\",\"jpg\",\"bmp\",\"gif\",\"jpgpng\",\"lerc\",\"tiff\"],json:{write:!0}})],y.prototype,\"format\",null),e([v(\"service\",\"format\",[\"serviceDataType\"])],y.prototype,\"readFormat\",null),e([f({type:ie})],y.prototype,\"fullExtent\",void 0),e([f({readOnly:!0})],y.prototype,\"hasMultidimensions\",void 0),e([f({json:{read:{source:\"maxImageHeight\"}}})],y.prototype,\"imageMaxHeight\",void 0),e([f({json:{read:{source:\"maxImageWidth\"}}})],y.prototype,\"imageMaxWidth\",void 0),e([f({type:String,json:{type:C.jsonValues,read:C.read,write:C.write}})],y.prototype,\"interpolation\",void 0),e([f()],y.prototype,\"minScale\",void 0),e([v(\"service\",\"minScale\")],y.prototype,\"readMinScale\",null),e([f()],y.prototype,\"maxScale\",void 0),e([v(\"service\",\"maxScale\")],y.prototype,\"readMaxScale\",null),e([f({type:P})],y.prototype,\"mosaicRule\",null),e([v(\"mosaicRule\",[\"mosaicRule\",\"defaultMosaicMethod\"])],y.prototype,\"readMosaicRule\",null),e([I(\"mosaicRule\")],y.prototype,\"writeMosaicRule\",null),e([f()],y.prototype,\"multidimensionalInfo\",null),e([f({type:N,json:{write:!0}})],y.prototype,\"multidimensionalSubset\",void 0),e([f({json:{type:g}})],y.prototype,\"noData\",void 0),e([I(\"noData\")],y.prototype,\"writeNoData\",null),e([f({type:String,json:{type:M.jsonValues,read:M.read,write:M.write}})],y.prototype,\"noDataInterpretation\",void 0),e([f({type:String,readOnly:!0,json:{read:{source:[\"fields\"]}}})],y.prototype,\"objectIdField\",void 0),e([v(\"objectIdField\")],y.prototype,\"readObjectIdField\",null),e([f({})],y.prototype,\"geometryType\",void 0),e([f({})],y.prototype,\"typeIdField\",void 0),e([f({})],y.prototype,\"types\",void 0),e([f({readOnly:!0})],y.prototype,\"parsedUrl\",null),e([f({type:Function})],y.prototype,\"pixelFilter\",void 0),e([f()],y.prototype,\"raster\",void 0),e([f({readOnly:!0})],y.prototype,\"sourceType\",void 0),e([v(\"sourceType\",[\"serviceSourceType\",\"fields\"])],y.prototype,\"readSourceType\",null),e([f()],y.prototype,\"viewId\",void 0),e([f({types:r,json:{name:\"layerDefinition.drawingInfo.renderer\",origins:{\"web-scene\":{types:i,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:e=>({enabled:e&&\"vector-field\"!==e.type&&\"flow\"!==e.type})}}}}})],y.prototype,\"renderer\",null),e([v(\"renderer\")],y.prototype,\"readRenderer\",null),e([I(\"renderer\")],y.prototype,\"writeRenderer\",null),e([f()],y.prototype,\"symbolizer\",void 0),e([f(x)],y.prototype,\"opacity\",void 0),e([f({readOnly:!0})],y.prototype,\"rasterFields\",null),e([f({constructOnly:!0})],y.prototype,\"rasterFunctionInfos\",void 0),e([f({type:J})],y.prototype,\"renderingRule\",null),e([v(\"renderingRule\",[\"renderingRule\",\"rasterFunctionInfos\"])],y.prototype,\"readRenderingRule\",null),e([I(\"renderingRule\")],y.prototype,\"writeRenderingRule\",null),e([f()],y.prototype,\"serviceDataType\",void 0),e([f({readOnly:!0,type:Re})],y.prototype,\"spatialReference\",void 0),e([v(\"spatialReference\",[\"spatialReference\",\"extent\"])],y.prototype,\"readSpatialReference\",null),e([f({json:{type:Se.jsonValues}})],y.prototype,\"pixelType\",void 0),e([v(\"pixelType\")],y.prototype,\"readPixelType\",null),e([I(\"pixelType\")],y.prototype,\"writePixelType\",null),e([f({constructOnly:!0,type:q})],y.prototype,\"serviceRasterInfo\",void 0),e([f()],y.prototype,\"sourceJSON\",void 0),e([f(w)],y.prototype,\"url\",void 0),e([f({readOnly:!0})],y.prototype,\"version\",void 0),e([v(\"version\",[\"currentVersion\",\"fields\",\"timeInfo\"])],y.prototype,\"readVersion\",null),y=e([b(\"esri.layers.mixins.ArcGISImageService\")],y),y};export{xe as ArcGISImageService};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}