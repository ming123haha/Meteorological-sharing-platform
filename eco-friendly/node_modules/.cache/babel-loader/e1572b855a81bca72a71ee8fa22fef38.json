{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { getOrCreateMapValue as e } from \"../../../../../core/MapUtils.js\";\nimport { isSome as t, isNone as s } from \"../../../../../core/maybe.js\";\nimport { j as i } from \"../../../../../chunks/quat.js\";\nimport { I as r, b as a } from \"../../../../../chunks/quatf64.js\";\nimport { k as o } from \"../../../../../chunks/vec3.js\";\nimport { Z as n, a as l, O as h } from \"../../../../../chunks/vec3f64.js\";\nimport c from \"../../../MeshMaterialMetallicRoughness.js\";\nimport { ungeoreferenceByTransform as u } from \"../../georeference.js\";\nimport { Buffer as f } from \"./buffer.js\";\nimport { computeOrigin as d, smoothNormals as p } from \"./geometry.js\";\nimport { BufferOutputType as m, ImageOutputType as g, AttributeType as x, TargetBuffer as _, AlphaMode as A } from \"./types.js\";\nimport { imageToArrayBuffer as R, imageToDataURI as T } from \"./imageutils.js\";\nimport { DataType as E, TextureWrapMode as b } from \"../../../../../views/webgl/enums.js\";\n\nclass M {\n  constructor(e, t, s) {\n    this.params = {}, this.materialMap = new Array(), this.imageMap = new Map(), this.textureMap = new Map(), this.gltf = {\n      asset: {\n        version: \"2.0\",\n        copyright: e.copyright,\n        generator: e.generator\n      },\n      extras: {\n        options: t,\n        binChunkBuffer: null,\n        promises: []\n      }\n    }, s && (this.params = s), this._addScenes(e);\n  }\n\n  _addScenes(e) {\n    this.gltf.scene = e.defaultScene;\n    const t = this.gltf.extras.options.bufferOutputType === m.GLB || this.gltf.extras.options.imageOutputType === g.GLB;\n    t && (this.gltf.extras.binChunkBuffer = new f(this.gltf)), e.forEachScene(e => {\n      this._addScene(e);\n    }), t && this.gltf.extras.binChunkBuffer.finalize();\n  }\n\n  _addScene(e) {\n    this.gltf.scenes || (this.gltf.scenes = []);\n    const t = {};\n    e.name && (t.name = e.name), e.forEachNode(e => {\n      t.nodes || (t.nodes = []);\n\n      const s = this._addNode(e);\n\n      t.nodes.push(s);\n    }), this.gltf.scenes.push(t);\n  }\n\n  _addNode(e) {\n    this.gltf.nodes || (this.gltf.nodes = []);\n    const t = {};\n    e.name && (t.name = e.name);\n    const s = e.translation;\n    o(s, n) || (t.translation = l(s));\n    const c = e.rotation;\n    i(c, r) || (t.rotation = a(c));\n    const u = e.scale;\n    o(u, h) || (t.scale = l(u)), e.mesh && e.mesh.vertexAttributes.position ? t.mesh = this._addMesh(e.mesh) : e.forEachNode(e => {\n      t.children || (t.children = []);\n\n      const s = this._addNode(e);\n\n      t.children.push(s);\n    });\n    const f = this.gltf.nodes.length;\n    return this.gltf.nodes.push(t), f;\n  }\n\n  _addMesh(e) {\n    this.gltf.meshes || (this.gltf.meshes = []);\n    const s = {\n      primitives: []\n    },\n          i = this.gltf.extras.options.bufferOutputType === m.GLB;\n    let r;\n    r = i ? this.gltf.extras.binChunkBuffer : new f(this.gltf), this.params.origin || (this.params.origin = d(e));\n    const a = u(e.vertexAttributes, e.transform, this.params.origin, {\n      geographic: this.params.geographic,\n      unit: \"meters\"\n    });\n    p(e, a), this._flipYZAxis(a);\n    const o = r.addBufferView(E.FLOAT, x.VEC3, _.ARRAY_BUFFER);\n    let n, l, h, c;\n    a.normal && (n = r.addBufferView(E.FLOAT, x.VEC3, _.ARRAY_BUFFER)), e.vertexAttributes.uv && (l = r.addBufferView(E.FLOAT, x.VEC2, _.ARRAY_BUFFER)), a.tangent && (h = r.addBufferView(E.FLOAT, x.VEC4, _.ARRAY_BUFFER)), e.vertexAttributes.color && (c = r.addBufferView(E.UNSIGNED_BYTE, x.VEC4, _.ARRAY_BUFFER)), o.startAccessor(\"POSITION\"), n && n.startAccessor(\"NORMAL\"), l && l.startAccessor(\"TEXCOORD_0\"), h && h.startAccessor(\"TANGENT\"), c && c.startAccessor(\"COLOR_0\");\n    const g = a.position.length / 3,\n          {\n      position: A,\n      normal: R,\n      tangent: T\n    } = a,\n          {\n      color: b,\n      uv: M\n    } = e.vertexAttributes;\n\n    for (let u = 0; u < g; ++u) o.push(A[3 * u + 0]), o.push(A[3 * u + 1]), o.push(A[3 * u + 2]), n && t(R) && (n.push(R[3 * u + 0]), n.push(R[3 * u + 1]), n.push(R[3 * u + 2])), l && t(M) && (l.push(M[2 * u + 0]), l.push(M[2 * u + 1])), h && t(T) && (h.push(T[4 * u + 0]), h.push(T[4 * u + 1]), h.push(T[4 * u + 2]), h.push(T[4 * u + 3])), c && t(b) && (c.push(b[4 * u + 0]), c.push(b[4 * u + 1]), c.push(b[4 * u + 2]), c.push(b[4 * u + 3]));\n\n    const O = o.endAccessor(),\n          N = this._addAccessor(o.index, O);\n\n    let C, B, w, y, I;\n\n    if (n) {\n      const e = n.endAccessor();\n      C = this._addAccessor(n.index, e);\n    }\n\n    if (l) {\n      const e = l.endAccessor();\n      B = this._addAccessor(l.index, e);\n    }\n\n    if (h) {\n      const e = h.endAccessor();\n      w = this._addAccessor(h.index, e);\n    }\n\n    if (c) {\n      const e = c.endAccessor();\n      y = this._addAccessor(c.index, e);\n    }\n\n    e.components && e.components.length > 0 && e.components[0].faces ? (I = r.addBufferView(E.UNSIGNED_INT, x.SCALAR, _.ELEMENT_ARRAY_BUFFER), this._addMeshVertexIndexed(I, e.components, s, N, C, B, w, y)) : this._addMeshVertexNonIndexed(e.components, s, N, C, B, w, y), o.finalize(), n && n.finalize(), l && l.finalize(), h && h.finalize(), I && I.finalize(), c && c.finalize(), i || r.finalize();\n    const S = this.gltf.meshes.length;\n    return this.gltf.meshes.push(s), S;\n  }\n\n  _flipYZAxis({\n    position: e,\n    normal: t,\n    tangent: s\n  }) {\n    this._flipYZBuffer(e, 3), this._flipYZBuffer(t, 3), this._flipYZBuffer(s, 4);\n  }\n\n  _flipYZBuffer(e, t) {\n    if (!s(e)) for (let s = 1, i = 2; s < e.length; s += t, i += t) {\n      const t = e[s],\n            r = e[i];\n      e[s] = r, e[i] = -t;\n    }\n  }\n\n  _addMaterial(e) {\n    if (null === e) return;\n    const s = this.materialMap.indexOf(e);\n    if (-1 !== s) return s;\n    this.gltf.materials || (this.gltf.materials = []);\n    const i = {};\n\n    switch (e.alphaMode) {\n      case \"mask\":\n        i.alphaMode = A.MASK;\n        break;\n\n      case \"auto\":\n      case \"blend\":\n        i.alphaMode = A.BLEND;\n    }\n\n    .5 !== e.alphaCutoff && (i.alphaCutoff = e.alphaCutoff), e.doubleSided && (i.doubleSided = e.doubleSided), i.pbrMetallicRoughness = {};\n\n    const r = e => e ** 2.1,\n          a = e => {\n      const t = e.toRgba();\n      return t[0] = r(t[0] / 255), t[1] = r(t[1] / 255), t[2] = r(t[2] / 255), t;\n    };\n\n    if (t(e.color) && (i.pbrMetallicRoughness.baseColorFactor = a(e.color)), t(e.colorTexture) && (i.pbrMetallicRoughness.baseColorTexture = {\n      index: this._addTexture(e.colorTexture)\n    }), t(e.normalTexture) && (i.normalTexture = {\n      index: this._addTexture(e.normalTexture)\n    }), e instanceof c) {\n      if (t(e.emissiveTexture) && (i.emissiveTexture = {\n        index: this._addTexture(e.emissiveTexture)\n      }), t(e.emissiveColor)) {\n        const t = a(e.emissiveColor);\n        i.emissiveFactor = [t[0], t[1], t[2]];\n      }\n\n      t(e.occlusionTexture) && (i.occlusionTexture = {\n        index: this._addTexture(e.occlusionTexture)\n      }), t(e.metallicRoughnessTexture) && (i.pbrMetallicRoughness.metallicRoughnessTexture = {\n        index: this._addTexture(e.metallicRoughnessTexture)\n      }), i.pbrMetallicRoughness.metallicFactor = e.metallic, i.pbrMetallicRoughness.roughnessFactor = e.roughness;\n    } else i.pbrMetallicRoughness.metallicFactor = 1, i.pbrMetallicRoughness.roughnessFactor = 1;\n\n    const o = this.gltf.materials.length;\n    return this.gltf.materials.push(i), this.materialMap.push(e), o;\n  }\n\n  _addTexture(t) {\n    return this.gltf.textures || (this.gltf.textures = []), e(this.textureMap, t, () => {\n      const e = {\n        sampler: this._addSampler(t),\n        source: this._addImage(t)\n      },\n            s = this.gltf.textures.length;\n      return this.gltf.textures.push(e), s;\n    });\n  }\n\n  _addImage(e) {\n    const t = this.imageMap.get(e);\n    if (null != t) return t;\n    this.gltf.images || (this.gltf.images = []);\n    const s = {};\n    if (e.url) s.uri = e.url;else {\n      s.extras = e.data;\n\n      for (let t = 0; t < this.gltf.images.length; ++t) if (e.data === this.gltf.images[t].extras) return t;\n\n      switch (this.gltf.extras.options.imageOutputType) {\n        case g.GLB:\n          {\n            const t = this.gltf.extras.binChunkBuffer.addBufferView(E.UNSIGNED_BYTE, x.SCALAR),\n                  i = R(e.data).then(({\n              data: e,\n              type: t\n            }) => (s.mimeType = t, e));\n            t.writeAsync(i).then(() => {\n              t.finalize();\n            }), s.bufferView = t.index;\n            break;\n          }\n\n        case g.DataURI:\n          s.uri = T(e.data);\n          break;\n\n        default:\n          this.gltf.extras.promises.push(R(e.data).then(({\n            data: e,\n            type: t\n          }) => {\n            s.uri = e, s.mimeType = t;\n          }));\n      }\n    }\n    const i = this.gltf.images.length;\n    return this.gltf.images.push(s), this.imageMap.set(e, i), i;\n  }\n\n  _addSampler(e) {\n    this.gltf.samplers || (this.gltf.samplers = []);\n    let t = b.REPEAT,\n        s = b.REPEAT;\n    if (\"string\" == typeof e.wrap) switch (e.wrap) {\n      case \"clamp\":\n        t = b.CLAMP_TO_EDGE, s = b.CLAMP_TO_EDGE;\n        break;\n\n      case \"mirror\":\n        t = b.MIRRORED_REPEAT, s = b.MIRRORED_REPEAT;\n    } else {\n      switch (e.wrap.vertical) {\n        case \"clamp\":\n          s = b.CLAMP_TO_EDGE;\n          break;\n\n        case \"mirror\":\n          s = b.MIRRORED_REPEAT;\n      }\n\n      switch (e.wrap.horizontal) {\n        case \"clamp\":\n          t = b.CLAMP_TO_EDGE;\n          break;\n\n        case \"mirror\":\n          t = b.MIRRORED_REPEAT;\n      }\n    }\n    const i = {\n      wrapS: t,\n      wrapT: s\n    };\n\n    for (let a = 0; a < this.gltf.samplers.length; ++a) if (JSON.stringify(i) === JSON.stringify(this.gltf.samplers[a])) return a;\n\n    const r = this.gltf.samplers.length;\n    return this.gltf.samplers.push(i), r;\n  }\n\n  _addAccessor(e, t) {\n    this.gltf.accessors || (this.gltf.accessors = []);\n    const s = {\n      bufferView: e,\n      byteOffset: t.byteOffset,\n      componentType: t.componentType,\n      count: t.count,\n      type: t.type,\n      min: t.min,\n      max: t.max,\n      name: t.name\n    };\n    t.normalized && (s.normalized = !0);\n    const i = this.gltf.accessors.length;\n    return this.gltf.accessors.push(s), i;\n  }\n\n  _addMeshVertexIndexed(e, t, s, i, r, a, o, n) {\n    for (const l of t) {\n      e.startAccessor(\"INDICES\");\n\n      for (let s = 0; s < l.faces.length; ++s) e.push(l.faces[s]);\n\n      const t = e.endAccessor(),\n            h = {\n        attributes: {\n          POSITION: i\n        },\n        indices: this._addAccessor(e.index, t),\n        material: this._addMaterial(l.material)\n      };\n      r && \"flat\" !== l.shading && (h.attributes.NORMAL = r), a && (h.attributes.TEXCOORD_0 = a), o && \"flat\" !== l.shading && (h.attributes.TANGENT = o), n && (h.attributes.COLOR_0 = n), s.primitives.push(h);\n    }\n  }\n\n  _addMeshVertexNonIndexed(e, t, s, i, r, a, o) {\n    const n = {\n      attributes: {\n        POSITION: s\n      }\n    };\n    i && (n.attributes.NORMAL = i), r && (n.attributes.TEXCOORD_0 = r), a && (n.attributes.TANGENT = a), o && (n.attributes.COLOR_0 = o), e && (n.material = this._addMaterial(e[0].material)), t.primitives.push(n);\n  }\n\n}\n\nexport { M as GLTF };","map":{"version":3,"names":["getOrCreateMapValue","e","isSome","t","isNone","s","j","i","I","r","b","a","k","o","Z","n","l","O","h","c","ungeoreferenceByTransform","u","Buffer","f","computeOrigin","d","smoothNormals","p","BufferOutputType","m","ImageOutputType","g","AttributeType","x","TargetBuffer","_","AlphaMode","A","imageToArrayBuffer","R","imageToDataURI","T","DataType","E","TextureWrapMode","M","constructor","params","materialMap","Array","imageMap","Map","textureMap","gltf","asset","version","copyright","generator","extras","options","binChunkBuffer","promises","_addScenes","scene","defaultScene","bufferOutputType","GLB","imageOutputType","forEachScene","_addScene","finalize","scenes","name","forEachNode","nodes","_addNode","push","translation","rotation","scale","mesh","vertexAttributes","position","_addMesh","children","length","meshes","primitives","origin","transform","geographic","unit","_flipYZAxis","addBufferView","FLOAT","VEC3","ARRAY_BUFFER","normal","uv","VEC2","tangent","VEC4","color","UNSIGNED_BYTE","startAccessor","endAccessor","N","_addAccessor","index","C","B","w","y","components","faces","UNSIGNED_INT","SCALAR","ELEMENT_ARRAY_BUFFER","_addMeshVertexIndexed","_addMeshVertexNonIndexed","S","_flipYZBuffer","_addMaterial","indexOf","materials","alphaMode","MASK","BLEND","alphaCutoff","doubleSided","pbrMetallicRoughness","toRgba","baseColorFactor","colorTexture","baseColorTexture","_addTexture","normalTexture","emissiveTexture","emissiveColor","emissiveFactor","occlusionTexture","metallicRoughnessTexture","metallicFactor","metallic","roughnessFactor","roughness","textures","sampler","_addSampler","source","_addImage","get","images","url","uri","data","then","type","mimeType","writeAsync","bufferView","DataURI","set","samplers","REPEAT","wrap","CLAMP_TO_EDGE","MIRRORED_REPEAT","vertical","horizontal","wrapS","wrapT","JSON","stringify","accessors","byteOffset","componentType","count","min","max","normalized","attributes","POSITION","indices","material","shading","NORMAL","TEXCOORD_0","TANGENT","COLOR_0","GLTF"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/gltf.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{getOrCreateMapValue as e}from\"../../../../../core/MapUtils.js\";import{isSome as t,isNone as s}from\"../../../../../core/maybe.js\";import{j as i}from\"../../../../../chunks/quat.js\";import{I as r,b as a}from\"../../../../../chunks/quatf64.js\";import{k as o}from\"../../../../../chunks/vec3.js\";import{Z as n,a as l,O as h}from\"../../../../../chunks/vec3f64.js\";import c from\"../../../MeshMaterialMetallicRoughness.js\";import{ungeoreferenceByTransform as u}from\"../../georeference.js\";import{Buffer as f}from\"./buffer.js\";import{computeOrigin as d,smoothNormals as p}from\"./geometry.js\";import{BufferOutputType as m,ImageOutputType as g,AttributeType as x,TargetBuffer as _,AlphaMode as A}from\"./types.js\";import{imageToArrayBuffer as R,imageToDataURI as T}from\"./imageutils.js\";import{DataType as E,TextureWrapMode as b}from\"../../../../../views/webgl/enums.js\";class M{constructor(e,t,s){this.params={},this.materialMap=new Array,this.imageMap=new Map,this.textureMap=new Map,this.gltf={asset:{version:\"2.0\",copyright:e.copyright,generator:e.generator},extras:{options:t,binChunkBuffer:null,promises:[]}},s&&(this.params=s),this._addScenes(e)}_addScenes(e){this.gltf.scene=e.defaultScene;const t=this.gltf.extras.options.bufferOutputType===m.GLB||this.gltf.extras.options.imageOutputType===g.GLB;t&&(this.gltf.extras.binChunkBuffer=new f(this.gltf)),e.forEachScene((e=>{this._addScene(e)})),t&&this.gltf.extras.binChunkBuffer.finalize()}_addScene(e){this.gltf.scenes||(this.gltf.scenes=[]);const t={};e.name&&(t.name=e.name),e.forEachNode((e=>{t.nodes||(t.nodes=[]);const s=this._addNode(e);t.nodes.push(s)})),this.gltf.scenes.push(t)}_addNode(e){this.gltf.nodes||(this.gltf.nodes=[]);const t={};e.name&&(t.name=e.name);const s=e.translation;o(s,n)||(t.translation=l(s));const c=e.rotation;i(c,r)||(t.rotation=a(c));const u=e.scale;o(u,h)||(t.scale=l(u)),e.mesh&&e.mesh.vertexAttributes.position?t.mesh=this._addMesh(e.mesh):e.forEachNode((e=>{t.children||(t.children=[]);const s=this._addNode(e);t.children.push(s)}));const f=this.gltf.nodes.length;return this.gltf.nodes.push(t),f}_addMesh(e){this.gltf.meshes||(this.gltf.meshes=[]);const s={primitives:[]},i=this.gltf.extras.options.bufferOutputType===m.GLB;let r;r=i?this.gltf.extras.binChunkBuffer:new f(this.gltf),this.params.origin||(this.params.origin=d(e));const a=u(e.vertexAttributes,e.transform,this.params.origin,{geographic:this.params.geographic,unit:\"meters\"});p(e,a),this._flipYZAxis(a);const o=r.addBufferView(E.FLOAT,x.VEC3,_.ARRAY_BUFFER);let n,l,h,c;a.normal&&(n=r.addBufferView(E.FLOAT,x.VEC3,_.ARRAY_BUFFER)),e.vertexAttributes.uv&&(l=r.addBufferView(E.FLOAT,x.VEC2,_.ARRAY_BUFFER)),a.tangent&&(h=r.addBufferView(E.FLOAT,x.VEC4,_.ARRAY_BUFFER)),e.vertexAttributes.color&&(c=r.addBufferView(E.UNSIGNED_BYTE,x.VEC4,_.ARRAY_BUFFER)),o.startAccessor(\"POSITION\"),n&&n.startAccessor(\"NORMAL\"),l&&l.startAccessor(\"TEXCOORD_0\"),h&&h.startAccessor(\"TANGENT\"),c&&c.startAccessor(\"COLOR_0\");const g=a.position.length/3,{position:A,normal:R,tangent:T}=a,{color:b,uv:M}=e.vertexAttributes;for(let u=0;u<g;++u)o.push(A[3*u+0]),o.push(A[3*u+1]),o.push(A[3*u+2]),n&&t(R)&&(n.push(R[3*u+0]),n.push(R[3*u+1]),n.push(R[3*u+2])),l&&t(M)&&(l.push(M[2*u+0]),l.push(M[2*u+1])),h&&t(T)&&(h.push(T[4*u+0]),h.push(T[4*u+1]),h.push(T[4*u+2]),h.push(T[4*u+3])),c&&t(b)&&(c.push(b[4*u+0]),c.push(b[4*u+1]),c.push(b[4*u+2]),c.push(b[4*u+3]));const O=o.endAccessor(),N=this._addAccessor(o.index,O);let C,B,w,y,I;if(n){const e=n.endAccessor();C=this._addAccessor(n.index,e)}if(l){const e=l.endAccessor();B=this._addAccessor(l.index,e)}if(h){const e=h.endAccessor();w=this._addAccessor(h.index,e)}if(c){const e=c.endAccessor();y=this._addAccessor(c.index,e)}e.components&&e.components.length>0&&e.components[0].faces?(I=r.addBufferView(E.UNSIGNED_INT,x.SCALAR,_.ELEMENT_ARRAY_BUFFER),this._addMeshVertexIndexed(I,e.components,s,N,C,B,w,y)):this._addMeshVertexNonIndexed(e.components,s,N,C,B,w,y),o.finalize(),n&&n.finalize(),l&&l.finalize(),h&&h.finalize(),I&&I.finalize(),c&&c.finalize(),i||r.finalize();const S=this.gltf.meshes.length;return this.gltf.meshes.push(s),S}_flipYZAxis({position:e,normal:t,tangent:s}){this._flipYZBuffer(e,3),this._flipYZBuffer(t,3),this._flipYZBuffer(s,4)}_flipYZBuffer(e,t){if(!s(e))for(let s=1,i=2;s<e.length;s+=t,i+=t){const t=e[s],r=e[i];e[s]=r,e[i]=-t}}_addMaterial(e){if(null===e)return;const s=this.materialMap.indexOf(e);if(-1!==s)return s;this.gltf.materials||(this.gltf.materials=[]);const i={};switch(e.alphaMode){case\"mask\":i.alphaMode=A.MASK;break;case\"auto\":case\"blend\":i.alphaMode=A.BLEND}.5!==e.alphaCutoff&&(i.alphaCutoff=e.alphaCutoff),e.doubleSided&&(i.doubleSided=e.doubleSided),i.pbrMetallicRoughness={};const r=e=>e**2.1,a=e=>{const t=e.toRgba();return t[0]=r(t[0]/255),t[1]=r(t[1]/255),t[2]=r(t[2]/255),t};if(t(e.color)&&(i.pbrMetallicRoughness.baseColorFactor=a(e.color)),t(e.colorTexture)&&(i.pbrMetallicRoughness.baseColorTexture={index:this._addTexture(e.colorTexture)}),t(e.normalTexture)&&(i.normalTexture={index:this._addTexture(e.normalTexture)}),e instanceof c){if(t(e.emissiveTexture)&&(i.emissiveTexture={index:this._addTexture(e.emissiveTexture)}),t(e.emissiveColor)){const t=a(e.emissiveColor);i.emissiveFactor=[t[0],t[1],t[2]]}t(e.occlusionTexture)&&(i.occlusionTexture={index:this._addTexture(e.occlusionTexture)}),t(e.metallicRoughnessTexture)&&(i.pbrMetallicRoughness.metallicRoughnessTexture={index:this._addTexture(e.metallicRoughnessTexture)}),i.pbrMetallicRoughness.metallicFactor=e.metallic,i.pbrMetallicRoughness.roughnessFactor=e.roughness}else i.pbrMetallicRoughness.metallicFactor=1,i.pbrMetallicRoughness.roughnessFactor=1;const o=this.gltf.materials.length;return this.gltf.materials.push(i),this.materialMap.push(e),o}_addTexture(t){return this.gltf.textures||(this.gltf.textures=[]),e(this.textureMap,t,(()=>{const e={sampler:this._addSampler(t),source:this._addImage(t)},s=this.gltf.textures.length;return this.gltf.textures.push(e),s}))}_addImage(e){const t=this.imageMap.get(e);if(null!=t)return t;this.gltf.images||(this.gltf.images=[]);const s={};if(e.url)s.uri=e.url;else{s.extras=e.data;for(let t=0;t<this.gltf.images.length;++t)if(e.data===this.gltf.images[t].extras)return t;switch(this.gltf.extras.options.imageOutputType){case g.GLB:{const t=this.gltf.extras.binChunkBuffer.addBufferView(E.UNSIGNED_BYTE,x.SCALAR),i=R(e.data).then((({data:e,type:t})=>(s.mimeType=t,e)));t.writeAsync(i).then((()=>{t.finalize()})),s.bufferView=t.index;break}case g.DataURI:s.uri=T(e.data);break;default:this.gltf.extras.promises.push(R(e.data).then((({data:e,type:t})=>{s.uri=e,s.mimeType=t})))}}const i=this.gltf.images.length;return this.gltf.images.push(s),this.imageMap.set(e,i),i}_addSampler(e){this.gltf.samplers||(this.gltf.samplers=[]);let t=b.REPEAT,s=b.REPEAT;if(\"string\"==typeof e.wrap)switch(e.wrap){case\"clamp\":t=b.CLAMP_TO_EDGE,s=b.CLAMP_TO_EDGE;break;case\"mirror\":t=b.MIRRORED_REPEAT,s=b.MIRRORED_REPEAT}else{switch(e.wrap.vertical){case\"clamp\":s=b.CLAMP_TO_EDGE;break;case\"mirror\":s=b.MIRRORED_REPEAT}switch(e.wrap.horizontal){case\"clamp\":t=b.CLAMP_TO_EDGE;break;case\"mirror\":t=b.MIRRORED_REPEAT}}const i={wrapS:t,wrapT:s};for(let a=0;a<this.gltf.samplers.length;++a)if(JSON.stringify(i)===JSON.stringify(this.gltf.samplers[a]))return a;const r=this.gltf.samplers.length;return this.gltf.samplers.push(i),r}_addAccessor(e,t){this.gltf.accessors||(this.gltf.accessors=[]);const s={bufferView:e,byteOffset:t.byteOffset,componentType:t.componentType,count:t.count,type:t.type,min:t.min,max:t.max,name:t.name};t.normalized&&(s.normalized=!0);const i=this.gltf.accessors.length;return this.gltf.accessors.push(s),i}_addMeshVertexIndexed(e,t,s,i,r,a,o,n){for(const l of t){e.startAccessor(\"INDICES\");for(let s=0;s<l.faces.length;++s)e.push(l.faces[s]);const t=e.endAccessor(),h={attributes:{POSITION:i},indices:this._addAccessor(e.index,t),material:this._addMaterial(l.material)};r&&\"flat\"!==l.shading&&(h.attributes.NORMAL=r),a&&(h.attributes.TEXCOORD_0=a),o&&\"flat\"!==l.shading&&(h.attributes.TANGENT=o),n&&(h.attributes.COLOR_0=n),s.primitives.push(h)}}_addMeshVertexNonIndexed(e,t,s,i,r,a,o){const n={attributes:{POSITION:s}};i&&(n.attributes.NORMAL=i),r&&(n.attributes.TEXCOORD_0=r),a&&(n.attributes.TANGENT=a),o&&(n.attributes.COLOR_0=o),e&&(n.material=this._addMaterial(e[0].material)),t.primitives.push(n)}}export{M as GLTF};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,mBAAmB,IAAIC,CAA9B,QAAoC,iCAApC;AAAsE,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,8BAAnC;AAAkE,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,QAAyB,kCAAzB;AAA4D,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,CAAC,IAAIC,CAAZ,EAAcJ,CAAC,IAAIK,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,QAAgC,kCAAhC;AAAmE,OAAOC,CAAP,MAAa,2CAAb;AAAyD,SAAOC,yBAAyB,IAAIC,CAApC,QAA0C,uBAA1C;AAAkE,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,aAAvB;AAAqC,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,aAAa,IAAIC,CAA3C,QAAiD,eAAjD;AAAiE,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,eAAe,IAAIC,CAAhD,EAAkDC,aAAa,IAAIC,CAAnE,EAAqEC,YAAY,IAAIC,CAArF,EAAuFC,SAAS,IAAIC,CAApG,QAA0G,YAA1G;AAAuH,SAAOC,kBAAkB,IAAIC,CAA7B,EAA+BC,cAAc,IAAIC,CAAjD,QAAuD,iBAAvD;AAAyE,SAAOC,QAAQ,IAAIC,CAAnB,EAAqBC,eAAe,IAAIlC,CAAxC,QAA8C,qCAA9C;;AAAoF,MAAMmC,CAAN,CAAO;EAACC,WAAW,CAAC7C,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAK0C,MAAL,GAAY,EAAZ,EAAe,KAAKC,WAAL,GAAiB,IAAIC,KAAJ,EAAhC,EAA0C,KAAKC,QAAL,GAAc,IAAIC,GAAJ,EAAxD,EAAgE,KAAKC,UAAL,GAAgB,IAAID,GAAJ,EAAhF,EAAwF,KAAKE,IAAL,GAAU;MAACC,KAAK,EAAC;QAACC,OAAO,EAAC,KAAT;QAAeC,SAAS,EAACvD,CAAC,CAACuD,SAA3B;QAAqCC,SAAS,EAACxD,CAAC,CAACwD;MAAjD,CAAP;MAAmEC,MAAM,EAAC;QAACC,OAAO,EAACxD,CAAT;QAAWyD,cAAc,EAAC,IAA1B;QAA+BC,QAAQ,EAAC;MAAxC;IAA1E,CAAlG,EAAyNxD,CAAC,KAAG,KAAK0C,MAAL,GAAY1C,CAAf,CAA1N,EAA4O,KAAKyD,UAAL,CAAgB7D,CAAhB,CAA5O;EAA+P;;EAAA6D,UAAU,CAAC7D,CAAD,EAAG;IAAC,KAAKoD,IAAL,CAAUU,KAAV,GAAgB9D,CAAC,CAAC+D,YAAlB;IAA+B,MAAM7D,CAAC,GAAC,KAAKkD,IAAL,CAAUK,MAAV,CAAiBC,OAAjB,CAAyBM,gBAAzB,KAA4CpC,CAAC,CAACqC,GAA9C,IAAmD,KAAKb,IAAL,CAAUK,MAAV,CAAiBC,OAAjB,CAAyBQ,eAAzB,KAA2CpC,CAAC,CAACmC,GAAxG;IAA4G/D,CAAC,KAAG,KAAKkD,IAAL,CAAUK,MAAV,CAAiBE,cAAjB,GAAgC,IAAIrC,CAAJ,CAAM,KAAK8B,IAAX,CAAnC,CAAD,EAAsDpD,CAAC,CAACmE,YAAF,CAAgBnE,CAAC,IAAE;MAAC,KAAKoE,SAAL,CAAepE,CAAf;IAAkB,CAAtC,CAAtD,EAA+FE,CAAC,IAAE,KAAKkD,IAAL,CAAUK,MAAV,CAAiBE,cAAjB,CAAgCU,QAAhC,EAAlG;EAA6I;;EAAAD,SAAS,CAACpE,CAAD,EAAG;IAAC,KAAKoD,IAAL,CAAUkB,MAAV,KAAmB,KAAKlB,IAAL,CAAUkB,MAAV,GAAiB,EAApC;IAAwC,MAAMpE,CAAC,GAAC,EAAR;IAAWF,CAAC,CAACuE,IAAF,KAASrE,CAAC,CAACqE,IAAF,GAAOvE,CAAC,CAACuE,IAAlB,GAAwBvE,CAAC,CAACwE,WAAF,CAAexE,CAAC,IAAE;MAACE,CAAC,CAACuE,KAAF,KAAUvE,CAAC,CAACuE,KAAF,GAAQ,EAAlB;;MAAsB,MAAMrE,CAAC,GAAC,KAAKsE,QAAL,CAAc1E,CAAd,CAAR;;MAAyBE,CAAC,CAACuE,KAAF,CAAQE,IAAR,CAAavE,CAAb;IAAgB,CAAlF,CAAxB,EAA6G,KAAKgD,IAAL,CAAUkB,MAAV,CAAiBK,IAAjB,CAAsBzE,CAAtB,CAA7G;EAAsI;;EAAAwE,QAAQ,CAAC1E,CAAD,EAAG;IAAC,KAAKoD,IAAL,CAAUqB,KAAV,KAAkB,KAAKrB,IAAL,CAAUqB,KAAV,GAAgB,EAAlC;IAAsC,MAAMvE,CAAC,GAAC,EAAR;IAAWF,CAAC,CAACuE,IAAF,KAASrE,CAAC,CAACqE,IAAF,GAAOvE,CAAC,CAACuE,IAAlB;IAAwB,MAAMnE,CAAC,GAACJ,CAAC,CAAC4E,WAAV;IAAsBhE,CAAC,CAACR,CAAD,EAAGU,CAAH,CAAD,KAASZ,CAAC,CAAC0E,WAAF,GAAc7D,CAAC,CAACX,CAAD,CAAxB;IAA6B,MAAMc,CAAC,GAAClB,CAAC,CAAC6E,QAAV;IAAmBvE,CAAC,CAACY,CAAD,EAAGV,CAAH,CAAD,KAASN,CAAC,CAAC2E,QAAF,GAAWnE,CAAC,CAACQ,CAAD,CAArB;IAA0B,MAAME,CAAC,GAACpB,CAAC,CAAC8E,KAAV;IAAgBlE,CAAC,CAACQ,CAAD,EAAGH,CAAH,CAAD,KAASf,CAAC,CAAC4E,KAAF,GAAQ/D,CAAC,CAACK,CAAD,CAAlB,GAAuBpB,CAAC,CAAC+E,IAAF,IAAQ/E,CAAC,CAAC+E,IAAF,CAAOC,gBAAP,CAAwBC,QAAhC,GAAyC/E,CAAC,CAAC6E,IAAF,GAAO,KAAKG,QAAL,CAAclF,CAAC,CAAC+E,IAAhB,CAAhD,GAAsE/E,CAAC,CAACwE,WAAF,CAAexE,CAAC,IAAE;MAACE,CAAC,CAACiF,QAAF,KAAajF,CAAC,CAACiF,QAAF,GAAW,EAAxB;;MAA4B,MAAM/E,CAAC,GAAC,KAAKsE,QAAL,CAAc1E,CAAd,CAAR;;MAAyBE,CAAC,CAACiF,QAAF,CAAWR,IAAX,CAAgBvE,CAAhB;IAAmB,CAA3F,CAA7F;IAA2L,MAAMkB,CAAC,GAAC,KAAK8B,IAAL,CAAUqB,KAAV,CAAgBW,MAAxB;IAA+B,OAAO,KAAKhC,IAAL,CAAUqB,KAAV,CAAgBE,IAAhB,CAAqBzE,CAArB,GAAwBoB,CAA/B;EAAiC;;EAAA4D,QAAQ,CAAClF,CAAD,EAAG;IAAC,KAAKoD,IAAL,CAAUiC,MAAV,KAAmB,KAAKjC,IAAL,CAAUiC,MAAV,GAAiB,EAApC;IAAwC,MAAMjF,CAAC,GAAC;MAACkF,UAAU,EAAC;IAAZ,CAAR;IAAA,MAAwBhF,CAAC,GAAC,KAAK8C,IAAL,CAAUK,MAAV,CAAiBC,OAAjB,CAAyBM,gBAAzB,KAA4CpC,CAAC,CAACqC,GAAxE;IAA4E,IAAIzD,CAAJ;IAAMA,CAAC,GAACF,CAAC,GAAC,KAAK8C,IAAL,CAAUK,MAAV,CAAiBE,cAAlB,GAAiC,IAAIrC,CAAJ,CAAM,KAAK8B,IAAX,CAApC,EAAqD,KAAKN,MAAL,CAAYyC,MAAZ,KAAqB,KAAKzC,MAAL,CAAYyC,MAAZ,GAAmB/D,CAAC,CAACxB,CAAD,CAAzC,CAArD;IAAmG,MAAMU,CAAC,GAACU,CAAC,CAACpB,CAAC,CAACgF,gBAAH,EAAoBhF,CAAC,CAACwF,SAAtB,EAAgC,KAAK1C,MAAL,CAAYyC,MAA5C,EAAmD;MAACE,UAAU,EAAC,KAAK3C,MAAL,CAAY2C,UAAxB;MAAmCC,IAAI,EAAC;IAAxC,CAAnD,CAAT;IAA+GhE,CAAC,CAAC1B,CAAD,EAAGU,CAAH,CAAD,EAAO,KAAKiF,WAAL,CAAiBjF,CAAjB,CAAP;IAA2B,MAAME,CAAC,GAACJ,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAACmD,KAAlB,EAAwB7D,CAAC,CAAC8D,IAA1B,EAA+B5D,CAAC,CAAC6D,YAAjC,CAAR;IAAuD,IAAIjF,CAAJ,EAAMC,CAAN,EAAQE,CAAR,EAAUC,CAAV;IAAYR,CAAC,CAACsF,MAAF,KAAWlF,CAAC,GAACN,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAACmD,KAAlB,EAAwB7D,CAAC,CAAC8D,IAA1B,EAA+B5D,CAAC,CAAC6D,YAAjC,CAAb,GAA6D/F,CAAC,CAACgF,gBAAF,CAAmBiB,EAAnB,KAAwBlF,CAAC,GAACP,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAACmD,KAAlB,EAAwB7D,CAAC,CAACkE,IAA1B,EAA+BhE,CAAC,CAAC6D,YAAjC,CAA1B,CAA7D,EAAuIrF,CAAC,CAACyF,OAAF,KAAYlF,CAAC,GAACT,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAACmD,KAAlB,EAAwB7D,CAAC,CAACoE,IAA1B,EAA+BlE,CAAC,CAAC6D,YAAjC,CAAd,CAAvI,EAAqM/F,CAAC,CAACgF,gBAAF,CAAmBqB,KAAnB,KAA2BnF,CAAC,GAACV,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAAC4D,aAAlB,EAAgCtE,CAAC,CAACoE,IAAlC,EAAuClE,CAAC,CAAC6D,YAAzC,CAA7B,CAArM,EAA0RnF,CAAC,CAAC2F,aAAF,CAAgB,UAAhB,CAA1R,EAAsTzF,CAAC,IAAEA,CAAC,CAACyF,aAAF,CAAgB,QAAhB,CAAzT,EAAmVxF,CAAC,IAAEA,CAAC,CAACwF,aAAF,CAAgB,YAAhB,CAAtV,EAAoXtF,CAAC,IAAEA,CAAC,CAACsF,aAAF,CAAgB,SAAhB,CAAvX,EAAkZrF,CAAC,IAAEA,CAAC,CAACqF,aAAF,CAAgB,SAAhB,CAArZ;IAAgb,MAAMzE,CAAC,GAACpB,CAAC,CAACuE,QAAF,CAAWG,MAAX,GAAkB,CAA1B;IAAA,MAA4B;MAACH,QAAQ,EAAC7C,CAAV;MAAY4D,MAAM,EAAC1D,CAAnB;MAAqB6D,OAAO,EAAC3D;IAA7B,IAAgC9B,CAA5D;IAAA,MAA8D;MAAC2F,KAAK,EAAC5F,CAAP;MAASwF,EAAE,EAACrD;IAAZ,IAAe5C,CAAC,CAACgF,gBAA/E;;IAAgG,KAAI,IAAI5D,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACU,CAAd,EAAgB,EAAEV,CAAlB,EAAoBR,CAAC,CAAC+D,IAAF,CAAOvC,CAAC,CAAC,IAAEhB,CAAF,GAAI,CAAL,CAAR,GAAiBR,CAAC,CAAC+D,IAAF,CAAOvC,CAAC,CAAC,IAAEhB,CAAF,GAAI,CAAL,CAAR,CAAjB,EAAkCR,CAAC,CAAC+D,IAAF,CAAOvC,CAAC,CAAC,IAAEhB,CAAF,GAAI,CAAL,CAAR,CAAlC,EAAmDN,CAAC,IAAEZ,CAAC,CAACoC,CAAD,CAAJ,KAAUxB,CAAC,CAAC6D,IAAF,CAAOrC,CAAC,CAAC,IAAElB,CAAF,GAAI,CAAL,CAAR,GAAiBN,CAAC,CAAC6D,IAAF,CAAOrC,CAAC,CAAC,IAAElB,CAAF,GAAI,CAAL,CAAR,CAAjB,EAAkCN,CAAC,CAAC6D,IAAF,CAAOrC,CAAC,CAAC,IAAElB,CAAF,GAAI,CAAL,CAAR,CAA5C,CAAnD,EAAiHL,CAAC,IAAEb,CAAC,CAAC0C,CAAD,CAAJ,KAAU7B,CAAC,CAAC4D,IAAF,CAAO/B,CAAC,CAAC,IAAExB,CAAF,GAAI,CAAL,CAAR,GAAiBL,CAAC,CAAC4D,IAAF,CAAO/B,CAAC,CAAC,IAAExB,CAAF,GAAI,CAAL,CAAR,CAA3B,CAAjH,EAA8JH,CAAC,IAAEf,CAAC,CAACsC,CAAD,CAAJ,KAAUvB,CAAC,CAAC0D,IAAF,CAAOnC,CAAC,CAAC,IAAEpB,CAAF,GAAI,CAAL,CAAR,GAAiBH,CAAC,CAAC0D,IAAF,CAAOnC,CAAC,CAAC,IAAEpB,CAAF,GAAI,CAAL,CAAR,CAAjB,EAAkCH,CAAC,CAAC0D,IAAF,CAAOnC,CAAC,CAAC,IAAEpB,CAAF,GAAI,CAAL,CAAR,CAAlC,EAAmDH,CAAC,CAAC0D,IAAF,CAAOnC,CAAC,CAAC,IAAEpB,CAAF,GAAI,CAAL,CAAR,CAA7D,CAA9J,EAA6OF,CAAC,IAAEhB,CAAC,CAACO,CAAD,CAAJ,KAAUS,CAAC,CAACyD,IAAF,CAAOlE,CAAC,CAAC,IAAEW,CAAF,GAAI,CAAL,CAAR,GAAiBF,CAAC,CAACyD,IAAF,CAAOlE,CAAC,CAAC,IAAEW,CAAF,GAAI,CAAL,CAAR,CAAjB,EAAkCF,CAAC,CAACyD,IAAF,CAAOlE,CAAC,CAAC,IAAEW,CAAF,GAAI,CAAL,CAAR,CAAlC,EAAmDF,CAAC,CAACyD,IAAF,CAAOlE,CAAC,CAAC,IAAEW,CAAF,GAAI,CAAL,CAAR,CAA7D,CAA7O;;IAA4T,MAAMJ,CAAC,GAACJ,CAAC,CAAC4F,WAAF,EAAR;IAAA,MAAwBC,CAAC,GAAC,KAAKC,YAAL,CAAkB9F,CAAC,CAAC+F,KAApB,EAA0B3F,CAA1B,CAA1B;;IAAuD,IAAI4F,CAAJ,EAAMC,CAAN,EAAQC,CAAR,EAAUC,CAAV,EAAYxG,CAAZ;;IAAc,IAAGO,CAAH,EAAK;MAAC,MAAMd,CAAC,GAACc,CAAC,CAAC0F,WAAF,EAAR;MAAwBI,CAAC,GAAC,KAAKF,YAAL,CAAkB5F,CAAC,CAAC6F,KAApB,EAA0B3G,CAA1B,CAAF;IAA+B;;IAAA,IAAGe,CAAH,EAAK;MAAC,MAAMf,CAAC,GAACe,CAAC,CAACyF,WAAF,EAAR;MAAwBK,CAAC,GAAC,KAAKH,YAAL,CAAkB3F,CAAC,CAAC4F,KAApB,EAA0B3G,CAA1B,CAAF;IAA+B;;IAAA,IAAGiB,CAAH,EAAK;MAAC,MAAMjB,CAAC,GAACiB,CAAC,CAACuF,WAAF,EAAR;MAAwBM,CAAC,GAAC,KAAKJ,YAAL,CAAkBzF,CAAC,CAAC0F,KAApB,EAA0B3G,CAA1B,CAAF;IAA+B;;IAAA,IAAGkB,CAAH,EAAK;MAAC,MAAMlB,CAAC,GAACkB,CAAC,CAACsF,WAAF,EAAR;MAAwBO,CAAC,GAAC,KAAKL,YAAL,CAAkBxF,CAAC,CAACyF,KAApB,EAA0B3G,CAA1B,CAAF;IAA+B;;IAAAA,CAAC,CAACgH,UAAF,IAAchH,CAAC,CAACgH,UAAF,CAAa5B,MAAb,GAAoB,CAAlC,IAAqCpF,CAAC,CAACgH,UAAF,CAAa,CAAb,EAAgBC,KAArD,IAA4D1G,CAAC,GAACC,CAAC,CAACoF,aAAF,CAAgBlD,CAAC,CAACwE,YAAlB,EAA+BlF,CAAC,CAACmF,MAAjC,EAAwCjF,CAAC,CAACkF,oBAA1C,CAAF,EAAkE,KAAKC,qBAAL,CAA2B9G,CAA3B,EAA6BP,CAAC,CAACgH,UAA/B,EAA0C5G,CAA1C,EAA4CqG,CAA5C,EAA8CG,CAA9C,EAAgDC,CAAhD,EAAkDC,CAAlD,EAAoDC,CAApD,CAA9H,IAAsL,KAAKO,wBAAL,CAA8BtH,CAAC,CAACgH,UAAhC,EAA2C5G,CAA3C,EAA6CqG,CAA7C,EAA+CG,CAA/C,EAAiDC,CAAjD,EAAmDC,CAAnD,EAAqDC,CAArD,CAAtL,EAA8OnG,CAAC,CAACyD,QAAF,EAA9O,EAA2PvD,CAAC,IAAEA,CAAC,CAACuD,QAAF,EAA9P,EAA2QtD,CAAC,IAAEA,CAAC,CAACsD,QAAF,EAA9Q,EAA2RpD,CAAC,IAAEA,CAAC,CAACoD,QAAF,EAA9R,EAA2S9D,CAAC,IAAEA,CAAC,CAAC8D,QAAF,EAA9S,EAA2TnD,CAAC,IAAEA,CAAC,CAACmD,QAAF,EAA9T,EAA2U/D,CAAC,IAAEE,CAAC,CAAC6D,QAAF,EAA9U;IAA2V,MAAMkD,CAAC,GAAC,KAAKnE,IAAL,CAAUiC,MAAV,CAAiBD,MAAzB;IAAgC,OAAO,KAAKhC,IAAL,CAAUiC,MAAV,CAAiBV,IAAjB,CAAsBvE,CAAtB,GAAyBmH,CAAhC;EAAkC;;EAAA5B,WAAW,CAAC;IAACV,QAAQ,EAACjF,CAAV;IAAYgG,MAAM,EAAC9F,CAAnB;IAAqBiG,OAAO,EAAC/F;EAA7B,CAAD,EAAiC;IAAC,KAAKoH,aAAL,CAAmBxH,CAAnB,EAAqB,CAArB,GAAwB,KAAKwH,aAAL,CAAmBtH,CAAnB,EAAqB,CAArB,CAAxB,EAAgD,KAAKsH,aAAL,CAAmBpH,CAAnB,EAAqB,CAArB,CAAhD;EAAwE;;EAAAoH,aAAa,CAACxH,CAAD,EAAGE,CAAH,EAAK;IAAC,IAAG,CAACE,CAAC,CAACJ,CAAD,CAAL,EAAS,KAAI,IAAII,CAAC,GAAC,CAAN,EAAQE,CAAC,GAAC,CAAd,EAAgBF,CAAC,GAACJ,CAAC,CAACoF,MAApB,EAA2BhF,CAAC,IAAEF,CAAH,EAAKI,CAAC,IAAEJ,CAAnC,EAAqC;MAAC,MAAMA,CAAC,GAACF,CAAC,CAACI,CAAD,CAAT;MAAA,MAAaI,CAAC,GAACR,CAAC,CAACM,CAAD,CAAhB;MAAoBN,CAAC,CAACI,CAAD,CAAD,GAAKI,CAAL,EAAOR,CAAC,CAACM,CAAD,CAAD,GAAK,CAACJ,CAAb;IAAe;EAAC;;EAAAuH,YAAY,CAACzH,CAAD,EAAG;IAAC,IAAG,SAAOA,CAAV,EAAY;IAAO,MAAMI,CAAC,GAAC,KAAK2C,WAAL,CAAiB2E,OAAjB,CAAyB1H,CAAzB,CAAR;IAAoC,IAAG,CAAC,CAAD,KAAKI,CAAR,EAAU,OAAOA,CAAP;IAAS,KAAKgD,IAAL,CAAUuE,SAAV,KAAsB,KAAKvE,IAAL,CAAUuE,SAAV,GAAoB,EAA1C;IAA8C,MAAMrH,CAAC,GAAC,EAAR;;IAAW,QAAON,CAAC,CAAC4H,SAAT;MAAoB,KAAI,MAAJ;QAAWtH,CAAC,CAACsH,SAAF,GAAYxF,CAAC,CAACyF,IAAd;QAAmB;;MAAM,KAAI,MAAJ;MAAW,KAAI,OAAJ;QAAYvH,CAAC,CAACsH,SAAF,GAAYxF,CAAC,CAAC0F,KAAd;IAA/E;;IAAmG,OAAK9H,CAAC,CAAC+H,WAAP,KAAqBzH,CAAC,CAACyH,WAAF,GAAc/H,CAAC,CAAC+H,WAArC,GAAkD/H,CAAC,CAACgI,WAAF,KAAgB1H,CAAC,CAAC0H,WAAF,GAAchI,CAAC,CAACgI,WAAhC,CAAlD,EAA+F1H,CAAC,CAAC2H,oBAAF,GAAuB,EAAtH;;IAAyH,MAAMzH,CAAC,GAACR,CAAC,IAAEA,CAAC,IAAE,GAAd;IAAA,MAAkBU,CAAC,GAACV,CAAC,IAAE;MAAC,MAAME,CAAC,GAACF,CAAC,CAACkI,MAAF,EAAR;MAAmB,OAAOhI,CAAC,CAAC,CAAD,CAAD,GAAKM,CAAC,CAACN,CAAC,CAAC,CAAD,CAAD,GAAK,GAAN,CAAN,EAAiBA,CAAC,CAAC,CAAD,CAAD,GAAKM,CAAC,CAACN,CAAC,CAAC,CAAD,CAAD,GAAK,GAAN,CAAvB,EAAkCA,CAAC,CAAC,CAAD,CAAD,GAAKM,CAAC,CAACN,CAAC,CAAC,CAAD,CAAD,GAAK,GAAN,CAAxC,EAAmDA,CAA1D;IAA4D,CAAvG;;IAAwG,IAAGA,CAAC,CAACF,CAAC,CAACqG,KAAH,CAAD,KAAa/F,CAAC,CAAC2H,oBAAF,CAAuBE,eAAvB,GAAuCzH,CAAC,CAACV,CAAC,CAACqG,KAAH,CAArD,GAAgEnG,CAAC,CAACF,CAAC,CAACoI,YAAH,CAAD,KAAoB9H,CAAC,CAAC2H,oBAAF,CAAuBI,gBAAvB,GAAwC;MAAC1B,KAAK,EAAC,KAAK2B,WAAL,CAAiBtI,CAAC,CAACoI,YAAnB;IAAP,CAA5D,CAAhE,EAAsKlI,CAAC,CAACF,CAAC,CAACuI,aAAH,CAAD,KAAqBjI,CAAC,CAACiI,aAAF,GAAgB;MAAC5B,KAAK,EAAC,KAAK2B,WAAL,CAAiBtI,CAAC,CAACuI,aAAnB;IAAP,CAArC,CAAtK,EAAsPvI,CAAC,YAAYkB,CAAtQ,EAAwQ;MAAC,IAAGhB,CAAC,CAACF,CAAC,CAACwI,eAAH,CAAD,KAAuBlI,CAAC,CAACkI,eAAF,GAAkB;QAAC7B,KAAK,EAAC,KAAK2B,WAAL,CAAiBtI,CAAC,CAACwI,eAAnB;MAAP,CAAzC,GAAsFtI,CAAC,CAACF,CAAC,CAACyI,aAAH,CAA1F,EAA4G;QAAC,MAAMvI,CAAC,GAACQ,CAAC,CAACV,CAAC,CAACyI,aAAH,CAAT;QAA2BnI,CAAC,CAACoI,cAAF,GAAiB,CAACxI,CAAC,CAAC,CAAD,CAAF,EAAMA,CAAC,CAAC,CAAD,CAAP,EAAWA,CAAC,CAAC,CAAD,CAAZ,CAAjB;MAAkC;;MAAAA,CAAC,CAACF,CAAC,CAAC2I,gBAAH,CAAD,KAAwBrI,CAAC,CAACqI,gBAAF,GAAmB;QAAChC,KAAK,EAAC,KAAK2B,WAAL,CAAiBtI,CAAC,CAAC2I,gBAAnB;MAAP,CAA3C,GAAyFzI,CAAC,CAACF,CAAC,CAAC4I,wBAAH,CAAD,KAAgCtI,CAAC,CAAC2H,oBAAF,CAAuBW,wBAAvB,GAAgD;QAACjC,KAAK,EAAC,KAAK2B,WAAL,CAAiBtI,CAAC,CAAC4I,wBAAnB;MAAP,CAAhF,CAAzF,EAA+NtI,CAAC,CAAC2H,oBAAF,CAAuBY,cAAvB,GAAsC7I,CAAC,CAAC8I,QAAvQ,EAAgRxI,CAAC,CAAC2H,oBAAF,CAAuBc,eAAvB,GAAuC/I,CAAC,CAACgJ,SAAzT;IAAmU,CAAtvB,MAA2vB1I,CAAC,CAAC2H,oBAAF,CAAuBY,cAAvB,GAAsC,CAAtC,EAAwCvI,CAAC,CAAC2H,oBAAF,CAAuBc,eAAvB,GAAuC,CAA/E;;IAAiF,MAAMnI,CAAC,GAAC,KAAKwC,IAAL,CAAUuE,SAAV,CAAoBvC,MAA5B;IAAmC,OAAO,KAAKhC,IAAL,CAAUuE,SAAV,CAAoBhD,IAApB,CAAyBrE,CAAzB,GAA4B,KAAKyC,WAAL,CAAiB4B,IAAjB,CAAsB3E,CAAtB,CAA5B,EAAqDY,CAA5D;EAA8D;;EAAA0H,WAAW,CAACpI,CAAD,EAAG;IAAC,OAAO,KAAKkD,IAAL,CAAU6F,QAAV,KAAqB,KAAK7F,IAAL,CAAU6F,QAAV,GAAmB,EAAxC,GAA4CjJ,CAAC,CAAC,KAAKmD,UAAN,EAAiBjD,CAAjB,EAAoB,MAAI;MAAC,MAAMF,CAAC,GAAC;QAACkJ,OAAO,EAAC,KAAKC,WAAL,CAAiBjJ,CAAjB,CAAT;QAA6BkJ,MAAM,EAAC,KAAKC,SAAL,CAAenJ,CAAf;MAApC,CAAR;MAAA,MAA+DE,CAAC,GAAC,KAAKgD,IAAL,CAAU6F,QAAV,CAAmB7D,MAApF;MAA2F,OAAO,KAAKhC,IAAL,CAAU6F,QAAV,CAAmBtE,IAAnB,CAAwB3E,CAAxB,GAA2BI,CAAlC;IAAoC,CAAxJ,CAApD;EAA+M;;EAAAiJ,SAAS,CAACrJ,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAK+C,QAAL,CAAcqG,GAAd,CAAkBtJ,CAAlB,CAAR;IAA6B,IAAG,QAAME,CAAT,EAAW,OAAOA,CAAP;IAAS,KAAKkD,IAAL,CAAUmG,MAAV,KAAmB,KAAKnG,IAAL,CAAUmG,MAAV,GAAiB,EAApC;IAAwC,MAAMnJ,CAAC,GAAC,EAAR;IAAW,IAAGJ,CAAC,CAACwJ,GAAL,EAASpJ,CAAC,CAACqJ,GAAF,GAAMzJ,CAAC,CAACwJ,GAAR,CAAT,KAAyB;MAACpJ,CAAC,CAACqD,MAAF,GAASzD,CAAC,CAAC0J,IAAX;;MAAgB,KAAI,IAAIxJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKkD,IAAL,CAAUmG,MAAV,CAAiBnE,MAA/B,EAAsC,EAAElF,CAAxC,EAA0C,IAAGF,CAAC,CAAC0J,IAAF,KAAS,KAAKtG,IAAL,CAAUmG,MAAV,CAAiBrJ,CAAjB,EAAoBuD,MAAhC,EAAuC,OAAOvD,CAAP;;MAAS,QAAO,KAAKkD,IAAL,CAAUK,MAAV,CAAiBC,OAAjB,CAAyBQ,eAAhC;QAAiD,KAAKpC,CAAC,CAACmC,GAAP;UAAW;YAAC,MAAM/D,CAAC,GAAC,KAAKkD,IAAL,CAAUK,MAAV,CAAiBE,cAAjB,CAAgCiC,aAAhC,CAA8ClD,CAAC,CAAC4D,aAAhD,EAA8DtE,CAAC,CAACmF,MAAhE,CAAR;YAAA,MAAgF7G,CAAC,GAACgC,CAAC,CAACtC,CAAC,CAAC0J,IAAH,CAAD,CAAUC,IAAV,CAAgB,CAAC;cAACD,IAAI,EAAC1J,CAAN;cAAQ4J,IAAI,EAAC1J;YAAb,CAAD,MAAoBE,CAAC,CAACyJ,QAAF,GAAW3J,CAAX,EAAaF,CAAjC,CAAhB,CAAlF;YAAwIE,CAAC,CAAC4J,UAAF,CAAaxJ,CAAb,EAAgBqJ,IAAhB,CAAsB,MAAI;cAACzJ,CAAC,CAACmE,QAAF;YAAa,CAAxC,GAA2CjE,CAAC,CAAC2J,UAAF,GAAa7J,CAAC,CAACyG,KAA1D;YAAgE;UAAM;;QAAA,KAAK7E,CAAC,CAACkI,OAAP;UAAe5J,CAAC,CAACqJ,GAAF,GAAMjH,CAAC,CAACxC,CAAC,CAAC0J,IAAH,CAAP;UAAgB;;QAAM;UAAQ,KAAKtG,IAAL,CAAUK,MAAV,CAAiBG,QAAjB,CAA0Be,IAA1B,CAA+BrC,CAAC,CAACtC,CAAC,CAAC0J,IAAH,CAAD,CAAUC,IAAV,CAAgB,CAAC;YAACD,IAAI,EAAC1J,CAAN;YAAQ4J,IAAI,EAAC1J;UAAb,CAAD,KAAmB;YAACE,CAAC,CAACqJ,GAAF,GAAMzJ,CAAN,EAAQI,CAAC,CAACyJ,QAAF,GAAW3J,CAAnB;UAAqB,CAAzD,CAA/B;MAAxT;IAAqZ;IAAA,MAAMI,CAAC,GAAC,KAAK8C,IAAL,CAAUmG,MAAV,CAAiBnE,MAAzB;IAAgC,OAAO,KAAKhC,IAAL,CAAUmG,MAAV,CAAiB5E,IAAjB,CAAsBvE,CAAtB,GAAyB,KAAK6C,QAAL,CAAcgH,GAAd,CAAkBjK,CAAlB,EAAoBM,CAApB,CAAzB,EAAgDA,CAAvD;EAAyD;;EAAA6I,WAAW,CAACnJ,CAAD,EAAG;IAAC,KAAKoD,IAAL,CAAU8G,QAAV,KAAqB,KAAK9G,IAAL,CAAU8G,QAAV,GAAmB,EAAxC;IAA4C,IAAIhK,CAAC,GAACO,CAAC,CAAC0J,MAAR;IAAA,IAAe/J,CAAC,GAACK,CAAC,CAAC0J,MAAnB;IAA0B,IAAG,YAAU,OAAOnK,CAAC,CAACoK,IAAtB,EAA2B,QAAOpK,CAAC,CAACoK,IAAT;MAAe,KAAI,OAAJ;QAAYlK,CAAC,GAACO,CAAC,CAAC4J,aAAJ,EAAkBjK,CAAC,GAACK,CAAC,CAAC4J,aAAtB;QAAoC;;MAAM,KAAI,QAAJ;QAAanK,CAAC,GAACO,CAAC,CAAC6J,eAAJ,EAAoBlK,CAAC,GAACK,CAAC,CAAC6J,eAAxB;IAAlF,CAA3B,MAAyJ;MAAC,QAAOtK,CAAC,CAACoK,IAAF,CAAOG,QAAd;QAAwB,KAAI,OAAJ;UAAYnK,CAAC,GAACK,CAAC,CAAC4J,aAAJ;UAAkB;;QAAM,KAAI,QAAJ;UAAajK,CAAC,GAACK,CAAC,CAAC6J,eAAJ;MAAzE;;MAA6F,QAAOtK,CAAC,CAACoK,IAAF,CAAOI,UAAd;QAA0B,KAAI,OAAJ;UAAYtK,CAAC,GAACO,CAAC,CAAC4J,aAAJ;UAAkB;;QAAM,KAAI,QAAJ;UAAanK,CAAC,GAACO,CAAC,CAAC6J,eAAJ;MAA3E;IAAgG;IAAA,MAAMhK,CAAC,GAAC;MAACmK,KAAK,EAACvK,CAAP;MAASwK,KAAK,EAACtK;IAAf,CAAR;;IAA0B,KAAI,IAAIM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0C,IAAL,CAAU8G,QAAV,CAAmB9E,MAAjC,EAAwC,EAAE1E,CAA1C,EAA4C,IAAGiK,IAAI,CAACC,SAAL,CAAetK,CAAf,MAAoBqK,IAAI,CAACC,SAAL,CAAe,KAAKxH,IAAL,CAAU8G,QAAV,CAAmBxJ,CAAnB,CAAf,CAAvB,EAA6D,OAAOA,CAAP;;IAAS,MAAMF,CAAC,GAAC,KAAK4C,IAAL,CAAU8G,QAAV,CAAmB9E,MAA3B;IAAkC,OAAO,KAAKhC,IAAL,CAAU8G,QAAV,CAAmBvF,IAAnB,CAAwBrE,CAAxB,GAA2BE,CAAlC;EAAoC;;EAAAkG,YAAY,CAAC1G,CAAD,EAAGE,CAAH,EAAK;IAAC,KAAKkD,IAAL,CAAUyH,SAAV,KAAsB,KAAKzH,IAAL,CAAUyH,SAAV,GAAoB,EAA1C;IAA8C,MAAMzK,CAAC,GAAC;MAAC2J,UAAU,EAAC/J,CAAZ;MAAc8K,UAAU,EAAC5K,CAAC,CAAC4K,UAA3B;MAAsCC,aAAa,EAAC7K,CAAC,CAAC6K,aAAtD;MAAoEC,KAAK,EAAC9K,CAAC,CAAC8K,KAA5E;MAAkFpB,IAAI,EAAC1J,CAAC,CAAC0J,IAAzF;MAA8FqB,GAAG,EAAC/K,CAAC,CAAC+K,GAApG;MAAwGC,GAAG,EAAChL,CAAC,CAACgL,GAA9G;MAAkH3G,IAAI,EAACrE,CAAC,CAACqE;IAAzH,CAAR;IAAuIrE,CAAC,CAACiL,UAAF,KAAe/K,CAAC,CAAC+K,UAAF,GAAa,CAAC,CAA7B;IAAgC,MAAM7K,CAAC,GAAC,KAAK8C,IAAL,CAAUyH,SAAV,CAAoBzF,MAA5B;IAAmC,OAAO,KAAKhC,IAAL,CAAUyH,SAAV,CAAoBlG,IAApB,CAAyBvE,CAAzB,GAA4BE,CAAnC;EAAqC;;EAAA+G,qBAAqB,CAACrH,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;IAAC,KAAI,MAAMC,CAAV,IAAeb,CAAf,EAAiB;MAACF,CAAC,CAACuG,aAAF,CAAgB,SAAhB;;MAA2B,KAAI,IAAInG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACW,CAAC,CAACkG,KAAF,CAAQ7B,MAAtB,EAA6B,EAAEhF,CAA/B,EAAiCJ,CAAC,CAAC2E,IAAF,CAAO5D,CAAC,CAACkG,KAAF,CAAQ7G,CAAR,CAAP;;MAAmB,MAAMF,CAAC,GAACF,CAAC,CAACwG,WAAF,EAAR;MAAA,MAAwBvF,CAAC,GAAC;QAACmK,UAAU,EAAC;UAACC,QAAQ,EAAC/K;QAAV,CAAZ;QAAyBgL,OAAO,EAAC,KAAK5E,YAAL,CAAkB1G,CAAC,CAAC2G,KAApB,EAA0BzG,CAA1B,CAAjC;QAA8DqL,QAAQ,EAAC,KAAK9D,YAAL,CAAkB1G,CAAC,CAACwK,QAApB;MAAvE,CAA1B;MAAgI/K,CAAC,IAAE,WAASO,CAAC,CAACyK,OAAd,KAAwBvK,CAAC,CAACmK,UAAF,CAAaK,MAAb,GAAoBjL,CAA5C,GAA+CE,CAAC,KAAGO,CAAC,CAACmK,UAAF,CAAaM,UAAb,GAAwBhL,CAA3B,CAAhD,EAA8EE,CAAC,IAAE,WAASG,CAAC,CAACyK,OAAd,KAAwBvK,CAAC,CAACmK,UAAF,CAAaO,OAAb,GAAqB/K,CAA7C,CAA9E,EAA8HE,CAAC,KAAGG,CAAC,CAACmK,UAAF,CAAaQ,OAAb,GAAqB9K,CAAxB,CAA/H,EAA0JV,CAAC,CAACkF,UAAF,CAAaX,IAAb,CAAkB1D,CAAlB,CAA1J;IAA+K;EAAC;;EAAAqG,wBAAwB,CAACtH,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAe;IAAC,MAAME,CAAC,GAAC;MAACsK,UAAU,EAAC;QAACC,QAAQ,EAACjL;MAAV;IAAZ,CAAR;IAAkCE,CAAC,KAAGQ,CAAC,CAACsK,UAAF,CAAaK,MAAb,GAAoBnL,CAAvB,CAAD,EAA2BE,CAAC,KAAGM,CAAC,CAACsK,UAAF,CAAaM,UAAb,GAAwBlL,CAA3B,CAA5B,EAA0DE,CAAC,KAAGI,CAAC,CAACsK,UAAF,CAAaO,OAAb,GAAqBjL,CAAxB,CAA3D,EAAsFE,CAAC,KAAGE,CAAC,CAACsK,UAAF,CAAaQ,OAAb,GAAqBhL,CAAxB,CAAvF,EAAkHZ,CAAC,KAAGc,CAAC,CAACyK,QAAF,GAAW,KAAK9D,YAAL,CAAkBzH,CAAC,CAAC,CAAD,CAAD,CAAKuL,QAAvB,CAAd,CAAnH,EAAmKrL,CAAC,CAACoF,UAAF,CAAaX,IAAb,CAAkB7D,CAAlB,CAAnK;EAAwL;;AAAlzO;;AAAmzO,SAAO8B,CAAC,IAAIiJ,IAAZ"},"metadata":{},"sourceType":"module"}