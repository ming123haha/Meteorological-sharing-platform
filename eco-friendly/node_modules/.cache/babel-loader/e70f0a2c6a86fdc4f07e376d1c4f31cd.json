{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Collection.js\";\nimport i from \"../../../core/Logger.js\";\nimport { isSome as r, isNone as s } from \"../../../core/maybe.js\";\nimport { whenOnce as o } from \"../../../core/reactiveUtils.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { getTileMaxtrixSetFromActiveLayer as n } from \"../../../layers/support/layerUtils.js\";\nimport { LayerView3D as h } from \"./LayerView3D.js\";\nimport { TiledLayerView3D as m } from \"./TiledLayerView3D.js\";\nimport p from \"../../layers/LayerView.js\";\nimport c from \"../../layers/RefreshableLayerView.js\";\nconst d = i.getLogger(\"esri.views.3d.layers.WMTSLayerView3d\");\nlet f = class extends c(m(h(p))) {\n  constructor() {\n    super(...arguments), this.type = \"wmts-3d\";\n  }\n\n  get hasMixedImageFormats() {\n    return !0;\n  }\n\n  _getCompatibleTileInfoMatrixSet(e, i = !1) {\n    const s = n(this.layer);\n\n    if (r(s)) {\n      if (t.isCollection(s)) {\n        const t = s.find(t => {\n          const s = e(t);\n          return r(s) && (i ? d.error(\"The selected tile matrix set is not compatible with the view\", s) : this.addResolvingPromise(Promise.reject(s))), null == s;\n        });\n        return t;\n      }\n\n      const o = e(s);\n      return r(o) && (i ? d.error(\"The selected tile matrix set is not compatible with the view\", o) : this.addResolvingPromise(Promise.reject(o))), s;\n    }\n\n    return null;\n  }\n\n  initialize() {\n    this._getCompatibleTileInfoMatrixSet(e => this._getTileInfoSupportError(e.tileInfo, e.fullExtent));\n\n    const e = o(() => this.view?.basemapTerrain?.tilingSchemeLocked).then(() => {\n      const e = this._getCompatibleTileInfoMatrixSet(e => this._getTileInfoSupportError(e.tileInfo, e.fullExtent) || this._getTileInfoCompatibilityError(e.tileInfo, this.view.basemapTerrain.tilingScheme));\n\n      s(e) || (this.layer.activeLayer.tileMatrixSetId !== e.id && (this.layer.activeLayer.tileMatrixSetId = e.id), this.tileInfo = e.tileInfo, this.layer.fullExtent = e.fullExtent);\n    });\n    this.addResolvingPromise(e), this.when(() => this._initialized());\n  }\n\n  refresh() {\n    this.emit(\"data-changed\");\n  }\n\n  canResume() {\n    if (!super.canResume()) return !1;\n    const e = this.layer.activeLayer.tileMatrixSet;\n    return e && !this._getTileInfoError(e.tileInfo, e.fullExtent);\n  }\n\n  async doRefresh() {\n    this.suspended || this.emit(\"data-changed\");\n  }\n\n  _initialized() {\n    this.updatingHandles.add(() => this.layer?.activeLayer?.styleId, () => this.refresh()), this.updatingHandles.add(() => this.layer?.activeLayer, e => {\n      const t = this._getCompatibleTileInfoMatrixSet(e => this._getTileInfoSupportError(e.tileInfo, e.fullExtent) || this._getTileInfoCompatibilityError(e.tileInfo, this.view.basemapTerrain.tilingScheme), !0);\n\n      r(t) && e.tileMatrixSetId !== t.id && (this.layer.activeLayer.tileMatrixSetId = t.id), this.notifyChange(\"suspended\"), this.canResume() && this.refresh();\n    });\n  }\n\n  _getTileInfoError(e, t) {\n    return this._getTileInfoSupportError(e, t) || this._getTileInfoCompatibilityError(e, this.view.basemapTerrain.tilingScheme);\n  }\n\n};\ne([a({\n  readOnly: !0\n})], f.prototype, \"hasMixedImageFormats\", null), e([a()], f.prototype, \"layer\", void 0), e([a()], f.prototype, \"suspended\", void 0), f = e([l(\"esri.views.3d.layers.WMTSLayerView3D\")], f);\nconst y = f;\nexport { y as default };","map":{"version":3,"names":["_","e","t","i","isSome","r","isNone","s","whenOnce","o","property","a","subclass","l","getTileMaxtrixSetFromActiveLayer","n","LayerView3D","h","TiledLayerView3D","m","p","c","d","getLogger","f","constructor","arguments","type","hasMixedImageFormats","_getCompatibleTileInfoMatrixSet","layer","isCollection","find","error","addResolvingPromise","Promise","reject","initialize","_getTileInfoSupportError","tileInfo","fullExtent","view","basemapTerrain","tilingSchemeLocked","then","_getTileInfoCompatibilityError","tilingScheme","activeLayer","tileMatrixSetId","id","when","_initialized","refresh","emit","canResume","tileMatrixSet","_getTileInfoError","doRefresh","suspended","updatingHandles","add","styleId","notifyChange","readOnly","prototype","y","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/WMTSLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Collection.js\";import i from\"../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../core/maybe.js\";import{whenOnce as o}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getTileMaxtrixSetFromActiveLayer as n}from\"../../../layers/support/layerUtils.js\";import{LayerView3D as h}from\"./LayerView3D.js\";import{TiledLayerView3D as m}from\"./TiledLayerView3D.js\";import p from\"../../layers/LayerView.js\";import c from\"../../layers/RefreshableLayerView.js\";const d=i.getLogger(\"esri.views.3d.layers.WMTSLayerView3d\");let f=class extends(c(m(h(p)))){constructor(){super(...arguments),this.type=\"wmts-3d\"}get hasMixedImageFormats(){return!0}_getCompatibleTileInfoMatrixSet(e,i=!1){const s=n(this.layer);if(r(s)){if(t.isCollection(s)){const t=s.find((t=>{const s=e(t);return r(s)&&(i?d.error(\"The selected tile matrix set is not compatible with the view\",s):this.addResolvingPromise(Promise.reject(s))),null==s}));return t}const o=e(s);return r(o)&&(i?d.error(\"The selected tile matrix set is not compatible with the view\",o):this.addResolvingPromise(Promise.reject(o))),s}return null}initialize(){this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)));const e=o((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)||this._getTileInfoCompatibilityError(e.tileInfo,this.view.basemapTerrain.tilingScheme)));s(e)||(this.layer.activeLayer.tileMatrixSetId!==e.id&&(this.layer.activeLayer.tileMatrixSetId=e.id),this.tileInfo=e.tileInfo,this.layer.fullExtent=e.fullExtent)}));this.addResolvingPromise(e),this.when((()=>this._initialized()))}refresh(){this.emit(\"data-changed\")}canResume(){if(!super.canResume())return!1;const e=this.layer.activeLayer.tileMatrixSet;return e&&!this._getTileInfoError(e.tileInfo,e.fullExtent)}async doRefresh(){this.suspended||this.emit(\"data-changed\")}_initialized(){this.updatingHandles.add((()=>this.layer?.activeLayer?.styleId),(()=>this.refresh())),this.updatingHandles.add((()=>this.layer?.activeLayer),(e=>{const t=this._getCompatibleTileInfoMatrixSet((e=>this._getTileInfoSupportError(e.tileInfo,e.fullExtent)||this._getTileInfoCompatibilityError(e.tileInfo,this.view.basemapTerrain.tilingScheme)),!0);r(t)&&e.tileMatrixSetId!==t.id&&(this.layer.activeLayer.tileMatrixSetId=t.id),this.notifyChange(\"suspended\"),this.canResume()&&this.refresh()}))}_getTileInfoError(e,t){return this._getTileInfoSupportError(e,t)||this._getTileInfoCompatibilityError(e,this.view.basemapTerrain.tilingScheme)}};e([a({readOnly:!0})],f.prototype,\"hasMixedImageFormats\",null),e([a()],f.prototype,\"layer\",void 0),e([a()],f.prototype,\"suspended\",void 0),f=e([l(\"esri.views.3d.layers.WMTSLayerView3D\")],f);const y=f;export{y as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}