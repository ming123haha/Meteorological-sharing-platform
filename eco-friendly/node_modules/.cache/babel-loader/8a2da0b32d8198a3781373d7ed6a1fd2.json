{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { destroyMaybe as t, isNone as e, isSome as i } from \"../../../core/maybe.js\";\nimport { TextureUpdate as r } from \"./interfaces.js\";\n\nclass n {\n  constructor(t) {\n    this._getFadeDuration = t, this._fadeStart = 0, this._delayedTime = 0;\n  }\n\n  clear() {\n    this._current = t(this._current), this._next = t(this._next), this._waiting = t(this._waiting), this._delayed = t(this._delayed);\n  }\n\n  get current() {\n    if (e(this._current)) return null;\n\n    if (!this._isFadingEnabled) {\n      const t = this._delayed || this._waiting || this._next || this._current;\n      t !== this._current && (this._current = null, this.clear(), this._current = t);\n    }\n\n    let a = n.test.fadeMoment;\n\n    if (i(this._delayed) && (a = a || performance.now(), a >= this._delayedTime && (this._push(this._delayed, s.Immediate), this._delayed = null)), i(this._next)) {\n      a = a || performance.now();\n\n      const e = this._fadeDuration,\n            n = i(this._current) && this._next.texture === this._current.texture,\n            s = this._next.type !== r.FADING,\n            h = a - this._fadeStart >= e;\n\n      (n || s || h) && (t(this._current), this._current = this._next, this._next = this._waiting, this._waiting = null, this._fadeStart = this._alignFadeStart(a));\n    }\n\n    return this._current;\n  }\n\n  get next() {\n    return this._next;\n  }\n\n  get fadeFactor() {\n    if (e(this._next)) return 1;\n    const t = n.test.fadeMoment || performance.now(),\n          i = Math.max(0, t - this._fadeStart),\n          r = this._fadeDuration;\n    return i > r ? 0 : 1 - i / r;\n  }\n\n  get isFading() {\n    return i(this._next) || i(this._delayed);\n  }\n\n  push(e, i = s.Immediate) {\n    this._delayed = t(this._delayed), this._push(e, i);\n  }\n\n  _push(i, r) {\n    if (this._isFadingEnabled || this.clear(), e(this._current)) return void (this._current = i);\n    const a = n.test.fadeMoment || performance.now();\n    return r !== s.Immediate ? (this._delayed = i, void (this._delayedTime = a + r)) : e(this._next) ? (this._next = i, void (this._fadeStart = this._alignFadeStart(a))) : void (e(i) || (t(this._waiting), this._waiting = i));\n  }\n\n  get _fadeDuration() {\n    return e(this._waiting) ? this._getFadeDuration() : .5 * this._getFadeDuration();\n  }\n\n  _alignFadeStart(t) {\n    const e = this._getFadeDuration();\n\n    return t + e - t % e;\n  }\n\n  get _isFadingEnabled() {\n    return this._getFadeDuration() > 0;\n  }\n\n}\n\nvar s;\nn.test = {\n  fadeMoment: 0\n}, function (t) {\n  t[t.Immediate = 0] = \"Immediate\", t[t.Delayed = 5e3] = \"Delayed\";\n}(s || (s = {}));\nexport { s as ActivationTime, n as TextureFader };","map":{"version":3,"names":["destroyMaybe","t","isNone","e","isSome","i","TextureUpdate","r","n","constructor","_getFadeDuration","_fadeStart","_delayedTime","clear","_current","_next","_waiting","_delayed","current","_isFadingEnabled","a","test","fadeMoment","performance","now","_push","s","Immediate","_fadeDuration","texture","type","FADING","h","_alignFadeStart","next","fadeFactor","Math","max","isFading","push","Delayed","ActivationTime","TextureFader"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/TextureFader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as t,isNone as e,isSome as i}from\"../../../core/maybe.js\";import{TextureUpdate as r}from\"./interfaces.js\";class n{constructor(t){this._getFadeDuration=t,this._fadeStart=0,this._delayedTime=0}clear(){this._current=t(this._current),this._next=t(this._next),this._waiting=t(this._waiting),this._delayed=t(this._delayed)}get current(){if(e(this._current))return null;if(!this._isFadingEnabled){const t=this._delayed||this._waiting||this._next||this._current;t!==this._current&&(this._current=null,this.clear(),this._current=t)}let a=n.test.fadeMoment;if(i(this._delayed)&&(a=a||performance.now(),a>=this._delayedTime&&(this._push(this._delayed,s.Immediate),this._delayed=null)),i(this._next)){a=a||performance.now();const e=this._fadeDuration,n=i(this._current)&&this._next.texture===this._current.texture,s=this._next.type!==r.FADING,h=a-this._fadeStart>=e;(n||s||h)&&(t(this._current),this._current=this._next,this._next=this._waiting,this._waiting=null,this._fadeStart=this._alignFadeStart(a))}return this._current}get next(){return this._next}get fadeFactor(){if(e(this._next))return 1;const t=n.test.fadeMoment||performance.now(),i=Math.max(0,t-this._fadeStart),r=this._fadeDuration;return i>r?0:1-i/r}get isFading(){return i(this._next)||i(this._delayed)}push(e,i=s.Immediate){this._delayed=t(this._delayed),this._push(e,i)}_push(i,r){if(this._isFadingEnabled||this.clear(),e(this._current))return void(this._current=i);const a=n.test.fadeMoment||performance.now();return r!==s.Immediate?(this._delayed=i,void(this._delayedTime=a+r)):e(this._next)?(this._next=i,void(this._fadeStart=this._alignFadeStart(a))):void(e(i)||(t(this._waiting),this._waiting=i))}get _fadeDuration(){return e(this._waiting)?this._getFadeDuration():.5*this._getFadeDuration()}_alignFadeStart(t){const e=this._getFadeDuration();return t+e-t%e}get _isFadingEnabled(){return this._getFadeDuration()>0}}var s;n.test={fadeMoment:0},function(t){t[t.Immediate=0]=\"Immediate\",t[t.Delayed=5e3]=\"Delayed\"}(s||(s={}));export{s as ActivationTime,n as TextureFader};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}