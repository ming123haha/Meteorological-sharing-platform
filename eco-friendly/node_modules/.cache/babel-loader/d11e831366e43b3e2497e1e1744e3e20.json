{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { SimpleAtmosphereGeometry as e } from \"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";\nimport { Transform as o } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { Float2Uniform as i } from \"../views/3d/webgl-engine/core/shaderModules/Float2Uniform.js\";\nimport { Float3PassUniform as r } from \"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";\nimport { Float3Uniform as n } from \"../views/3d/webgl-engine/core/shaderModules/Float3Uniform.js\";\nimport { FloatUniform as t } from \"../views/3d/webgl-engine/core/shaderModules/FloatUniform.js\";\nimport { NoParameters as s, glsl as a } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { Matrix4PassUniform as l } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";\nimport { Matrix4Uniform as d } from \"../views/3d/webgl-engine/core/shaderModules/Matrix4Uniform.js\";\nimport { ShaderBuilder as c } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as m } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { VertexAttribute as g } from \"../views/3d/webgl-engine/lib/VertexAttribute.js\";\n\nclass f extends s {}\n\nfunction p(s) {\n  const f = new c(),\n        {\n    vertex: p,\n    fragment: v\n  } = f;\n  if (s.geometry === e.Underground) f.attributes.add(g.POSITION, \"vec2\"), f.varyings.add(\"color\", \"vec4\"), p.uniforms.add([new r(\"lightingMainDirection\", (e, o) => o.lighting.lightingMainDirection), new n(\"cameraPosition\"), new t(\"undergroundFadeAlpha\")]), p.code.add(a`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), lightingMainDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`), v.code.add(a`void main() {\ngl_FragColor = color;\n}`);else {\n    f.include(o), f.attributes.add(g.POSITION, \"vec3\"), f.varyings.add(\"vtc\", \"vec2\"), f.varyings.add(\"falloff\", \"float\");\n    const c = s.geometry === e.Cylinder;\n    p.uniforms.add([new l(\"proj\", (e, o) => o.camera.projectionMatrix), new d(\"view\"), new r(\"lightingMainDirection\", (e, o) => o.lighting.lightingMainDirection)]), c || (f.varyings.add(\"innerFactor\", \"float\"), p.uniforms.add(new n(\"silCircleCenter\")), p.uniforms.add(new n(\"silCircleV1\")), p.uniforms.add(new n(\"silCircleV2\")), p.uniforms.add(new i(\"texV\")), p.uniforms.add(new t(\"innerScale\")));\n    const u = 6.2831853,\n          w = 1 / 128;\n    p.code.add(a`\n\t\tvoid main(void) {\n      ${c ? a`\n      vec3 pos = position;\n      float ndotl = lightingMainDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);` : a`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${a.float(u * w)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), lightingMainDirection);\n      vtc.x = position.x  * ${a.float(w)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `), v.uniforms.add(new m(\"tex\", e => e.texture)), c || v.uniforms.add(new t(\"altitudeFade\")), v.code.add(a`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture2D(tex, vtc) * falloff;\n      ${c ? a`gl_FragColor = atmosphereColor;` : a`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tgl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`);\n  }\n  return f;\n}\n\nconst v = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  SimpleAtmospherePassParameters: f,\n  build: p\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { f as S, v as a, p as b };","map":{"version":3,"names":["SimpleAtmosphereGeometry","e","Transform","o","Float2Uniform","i","Float3PassUniform","r","Float3Uniform","n","FloatUniform","t","NoParameters","s","glsl","a","Matrix4PassUniform","l","Matrix4Uniform","d","ShaderBuilder","c","Texture2DPassUniform","m","VertexAttribute","g","f","p","vertex","fragment","v","geometry","Underground","attributes","add","POSITION","varyings","uniforms","lighting","lightingMainDirection","code","include","Cylinder","camera","projectionMatrix","u","w","float","texture","Object","freeze","defineProperty","__proto__","SimpleAtmospherePassParameters","build","Symbol","toStringTag","value","S","b"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/chunks/SimpleAtmosphere.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{SimpleAtmosphereGeometry as e}from\"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{Float2Uniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2Uniform.js\";import{Float3PassUniform as r}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float3Uniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float3Uniform.js\";import{FloatUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/FloatUniform.js\";import{NoParameters as s,glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{Matrix4Uniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4Uniform.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as g}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";class f extends s{}function p(s){const f=new c,{vertex:p,fragment:v}=f;if(s.geometry===e.Underground)f.attributes.add(g.POSITION,\"vec2\"),f.varyings.add(\"color\",\"vec4\"),p.uniforms.add([new r(\"lightingMainDirection\",((e,o)=>o.lighting.lightingMainDirection)),new n(\"cameraPosition\"),new t(\"undergroundFadeAlpha\")]),p.code.add(a`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), lightingMainDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`),v.code.add(a`void main() {\ngl_FragColor = color;\n}`);else{f.include(o),f.attributes.add(g.POSITION,\"vec3\"),f.varyings.add(\"vtc\",\"vec2\"),f.varyings.add(\"falloff\",\"float\");const c=s.geometry===e.Cylinder;p.uniforms.add([new l(\"proj\",((e,o)=>o.camera.projectionMatrix)),new d(\"view\"),new r(\"lightingMainDirection\",((e,o)=>o.lighting.lightingMainDirection))]),c||(f.varyings.add(\"innerFactor\",\"float\"),p.uniforms.add(new n(\"silCircleCenter\")),p.uniforms.add(new n(\"silCircleV1\")),p.uniforms.add(new n(\"silCircleV2\")),p.uniforms.add(new i(\"texV\")),p.uniforms.add(new t(\"innerScale\")));const u=6.2831853,w=1/128;p.code.add(a`\n\t\tvoid main(void) {\n      ${c?a`\n      vec3 pos = position;\n      float ndotl = lightingMainDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);`:a`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${a.float(u*w)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), lightingMainDirection);\n      vtc.x = position.x  * ${a.float(w)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `),v.uniforms.add(new m(\"tex\",(e=>e.texture))),c||v.uniforms.add(new t(\"altitudeFade\")),v.code.add(a`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture2D(tex, vtc) * falloff;\n      ${c?a`gl_FragColor = atmosphereColor;`:a`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tgl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`)}return f}const v=Object.freeze(Object.defineProperty({__proto__:null,SimpleAtmospherePassParameters:f,build:p},Symbol.toStringTag,{value:\"Module\"}));export{f as S,v as a,p as b};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,wBAAwB,IAAIC,CAAnC,QAAyC,mEAAzC;AAA6G,SAAOC,SAAS,IAAIC,CAApB,QAA0B,+DAA1B;AAA0F,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,8DAA9B;AAA6F,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,kEAAlC;AAAqG,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,8DAA9B;AAA6F,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,6DAA7B;AAA2F,SAAOC,YAAY,IAAIC,CAAvB,EAAyBC,IAAI,IAAIC,CAAjC,QAAuC,2DAAvC;AAAmG,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,mEAAnC;AAAuG,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,+DAA/B;AAA+F,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,8DAA9B;AAA6F,SAAOC,oBAAoB,IAAIC,CAA/B,QAAqC,qEAArC;AAA2G,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,iDAAhC;;AAAkF,MAAMC,CAAN,SAAgBb,CAAhB,CAAiB;;AAAE,SAASc,CAAT,CAAWd,CAAX,EAAa;EAAC,MAAMa,CAAC,GAAC,IAAIL,CAAJ,EAAR;EAAA,MAAc;IAACO,MAAM,EAACD,CAAR;IAAUE,QAAQ,EAACC;EAAnB,IAAsBJ,CAApC;EAAsC,IAAGb,CAAC,CAACkB,QAAF,KAAa9B,CAAC,CAAC+B,WAAlB,EAA8BN,CAAC,CAACO,UAAF,CAAaC,GAAb,CAAiBT,CAAC,CAACU,QAAnB,EAA4B,MAA5B,GAAoCT,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,OAAf,EAAuB,MAAvB,CAApC,EAAmEP,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,CAAC,IAAI3B,CAAJ,CAAM,uBAAN,EAA+B,CAACN,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACmC,QAAF,CAAWC,qBAAjD,CAAD,EAA0E,IAAI9B,CAAJ,CAAM,gBAAN,CAA1E,EAAkG,IAAIE,CAAJ,CAAM,sBAAN,CAAlG,CAAf,CAAnE,EAAoNgB,CAAC,CAACa,IAAF,CAAON,GAAP,CAAWnB,CAAE;AAC18C;AACA;AACA;AACA;AACA,EAL67C,CAApN,EAKruCe,CAAC,CAACU,IAAF,CAAON,GAAP,CAAWnB,CAAE;AACjB;AACA,EAFI,CALquC,CAA9B,KAOnsC;IAACW,CAAC,CAACe,OAAF,CAAUtC,CAAV,GAAauB,CAAC,CAACO,UAAF,CAAaC,GAAb,CAAiBT,CAAC,CAACU,QAAnB,EAA4B,MAA5B,CAAb,EAAiDT,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,KAAf,EAAqB,MAArB,CAAjD,EAA8ER,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,SAAf,EAAyB,OAAzB,CAA9E;IAAgH,MAAMb,CAAC,GAACR,CAAC,CAACkB,QAAF,KAAa9B,CAAC,CAACyC,QAAvB;IAAgCf,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,CAAC,IAAIjB,CAAJ,CAAM,MAAN,EAAc,CAAChB,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACwC,MAAF,CAASC,gBAA9B,CAAD,EAAkD,IAAIzB,CAAJ,CAAM,MAAN,CAAlD,EAAgE,IAAIZ,CAAJ,CAAM,uBAAN,EAA+B,CAACN,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACmC,QAAF,CAAWC,qBAAjD,CAAhE,CAAf,GAA0JlB,CAAC,KAAGK,CAAC,CAACU,QAAF,CAAWF,GAAX,CAAe,aAAf,EAA6B,OAA7B,GAAsCP,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,IAAIzB,CAAJ,CAAM,iBAAN,CAAf,CAAtC,EAA+EkB,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,IAAIzB,CAAJ,CAAM,aAAN,CAAf,CAA/E,EAAoHkB,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,IAAIzB,CAAJ,CAAM,aAAN,CAAf,CAApH,EAAyJkB,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,IAAI7B,CAAJ,CAAM,MAAN,CAAf,CAAzJ,EAAuLsB,CAAC,CAACU,QAAF,CAAWH,GAAX,CAAe,IAAIvB,CAAJ,CAAM,YAAN,CAAf,CAA1L,CAA3J;IAA0X,MAAMkC,CAAC,GAAC,SAAR;IAAA,MAAkBC,CAAC,GAAC,IAAE,GAAtB;IAA0BnB,CAAC,CAACa,IAAF,CAAON,GAAP,CAAWnB,CAAE;AAC1jB;AACA,QAAQM,CAAC,GAACN,CAAE;AACZ;AACA;AACA,0CAHS,GAGkCA,CAAE;AAC7C;AACA;AACA,iCAAiCA,CAAC,CAACgC,KAAF,CAAQF,CAAC,GAACC,CAAV,CAAa;AAC9C;AACA;AACA,8BAA8B/B,CAAC,CAACgC,KAAF,CAAQD,CAAR,CAAW;AACzC;AACA,OAAQ;AACR;AACA;AACA;AACA;AACA;AACA,IAnB6iB,GAmBviBhB,CAAC,CAACO,QAAF,CAAWH,GAAX,CAAe,IAAIX,CAAJ,CAAM,KAAN,EAAatB,CAAC,IAAEA,CAAC,CAAC+C,OAAlB,CAAf,CAnBuiB,EAmB3f3B,CAAC,IAAES,CAAC,CAACO,QAAF,CAAWH,GAAX,CAAe,IAAIvB,CAAJ,CAAM,cAAN,CAAf,CAnBwf,EAmBldmB,CAAC,CAACU,IAAF,CAAON,GAAP,CAAWnB,CAAE;AACxG;AACA;AACA,QAAQM,CAAC,GAACN,CAAE,iCAAH,GAAoCA,CAAE;AAC/C;AACA;AACA,OAAQ;AACR,MAP2F,CAnBkd;EA0BriB;EAAA,OAAOW,CAAP;AAAS;;AAAA,MAAMI,CAAC,GAACmB,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACE,cAAP,CAAsB;EAACC,SAAS,EAAC,IAAX;EAAgBC,8BAA8B,EAAC3B,CAA/C;EAAiD4B,KAAK,EAAC3B;AAAvD,CAAtB,EAAgF4B,MAAM,CAACC,WAAvF,EAAmG;EAACC,KAAK,EAAC;AAAP,CAAnG,CAAd,CAAR;AAA4I,SAAO/B,CAAC,IAAIgC,CAAZ,EAAc5B,CAAC,IAAIf,CAAnB,EAAqBY,CAAC,IAAIgC,CAA1B"},"metadata":{},"sourceType":"module"}