{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nclass e {\n  constructor(e) {\n    this._largestRange = null, this._parent = e, this._updateLargestRange();\n  }\n\n  get largestRange() {\n    return this._largestRange;\n  }\n\n  rangeCreated(e) {\n    (!this._largestRange || e.count > this._largestRange.count) && (this._largestRange = e);\n  }\n\n  rangeResized(e, t) {\n    e === this._largestRange ? e.count < t && this._updateLargestRange() : (!this._largestRange || e.count > this._largestRange.count) && (this._largestRange = e);\n  }\n\n  findBestRange(e) {\n    let t = this._parent._freeHead,\n        n = null;\n\n    for (; null !== t;) t.count >= e && (!n || t.count - e < n.count - e) && (n = t), t = t.next;\n\n    return n;\n  }\n\n  findAdjacentRanges(e, t) {\n    let n = !0,\n        r = !1,\n        s = null,\n        o = this._parent._freeHead;\n\n    for (; n && !r;) {\n      const a = null !== s ? s.from + s.count : 0,\n            l = null !== o ? o.from : this._parent._size;\n      e >= a && e + t <= l ? (n = !1, r = !0) : null !== o ? (s = o, o = o.next) : n = !1;\n    }\n\n    return [s, o];\n  }\n\n  _updateLargestRange() {\n    let e = null,\n        t = this._parent._freeHead;\n\n    for (; null !== t;) (!e || t.count > e.count) && (e = t), t = t.next;\n\n    this._largestRange = e;\n  }\n\n}\n\nclass t {\n  constructor(t, n) {\n    this._allocated = 0, this._size = t, this._freeHead = t > 0 ? {\n      from: 0,\n      count: t,\n      prev: null,\n      next: null\n    } : null, this._bookKeeper = n || new e(this), this._freeHead && this._bookKeeper.rangeCreated(this._freeHead);\n  }\n\n  allocate(e) {\n    const n = this._bookKeeper.findBestRange(e);\n\n    if (null === n) return -1;\n    const r = n.from,\n          s = n.count;\n\n    if (n.from += e, n.count -= e, this._bookKeeper.rangeResized(n, r, s), this._allocated += e, 0 === n.count) {\n      const e = null !== n.prev ? this._freeHead : n.next;\n      t._removeRange(n), this._freeHead = e;\n    }\n\n    return r;\n  }\n\n  free(e, n) {\n    const [r, s] = this._bookKeeper.findAdjacentRanges(e, n),\n          o = {\n      from: e,\n      count: n,\n      prev: r,\n      next: s\n    };\n\n    if (null !== r && (r.next = o), null !== s && (s.prev = o), this._bookKeeper.rangeCreated(o), this._allocated -= n, null !== s && o.from + o.count === s.from) {\n      const e = o.from,\n            n = o.count;\n      t._fuse(o, s), t._removeRange(s), this._bookKeeper.rangeResized(o, e, n), this._bookKeeper.rangeResized(s, void 0, 0);\n    }\n\n    if (null !== r && r.from + r.count === o.from) {\n      const e = r.from,\n            n = r.count;\n      t._fuse(r, o), t._removeRange(o), this._bookKeeper.rangeResized(r, e, n), this._bookKeeper.rangeResized(o, void 0, 0);\n    }\n\n    this._freeHead = null !== o.prev ? this._freeHead : o;\n  }\n\n  get fragmentation() {\n    const e = this._size - this._allocated;\n    if (0 === e) return 0;\n    return 1 - this._bookKeeper.largestRange.count / e;\n  }\n\n  static _removeRange(e) {\n    null !== e.prev ? null !== e.next ? (e.prev.next = e.next, e.next.prev = e.prev) : e.prev.next = null : null !== e.next && (e.next.prev = null);\n  }\n\n  static _fuse(e, t) {\n    e.count += t.count, e.next = t.next, t.from += t.count, t.count = 0, null !== t.next && (t.next.prev = e);\n  }\n\n}\n\nexport { t as FreeList };","map":{"version":3,"names":["e","constructor","_largestRange","_parent","_updateLargestRange","largestRange","rangeCreated","count","rangeResized","t","findBestRange","_freeHead","n","next","findAdjacentRanges","r","s","o","a","from","l","_size","_allocated","prev","_bookKeeper","allocate","_removeRange","free","_fuse","fragmentation","FreeList"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/FreeList.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this._largestRange=null,this._parent=e,this._updateLargestRange()}get largestRange(){return this._largestRange}rangeCreated(e){(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}rangeResized(e,t){e===this._largestRange?e.count<t&&this._updateLargestRange():(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}findBestRange(e){let t=this._parent._freeHead,n=null;for(;null!==t;)t.count>=e&&(!n||t.count-e<n.count-e)&&(n=t),t=t.next;return n}findAdjacentRanges(e,t){let n=!0,r=!1,s=null,o=this._parent._freeHead;for(;n&&!r;){const a=null!==s?s.from+s.count:0,l=null!==o?o.from:this._parent._size;e>=a&&e+t<=l?(n=!1,r=!0):null!==o?(s=o,o=o.next):n=!1}return[s,o]}_updateLargestRange(){let e=null,t=this._parent._freeHead;for(;null!==t;)(!e||t.count>e.count)&&(e=t),t=t.next;this._largestRange=e}}class t{constructor(t,n){this._allocated=0,this._size=t,this._freeHead=t>0?{from:0,count:t,prev:null,next:null}:null,this._bookKeeper=n||new e(this),this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}allocate(e){const n=this._bookKeeper.findBestRange(e);if(null===n)return-1;const r=n.from,s=n.count;if(n.from+=e,n.count-=e,this._bookKeeper.rangeResized(n,r,s),this._allocated+=e,0===n.count){const e=null!==n.prev?this._freeHead:n.next;t._removeRange(n),this._freeHead=e}return r}free(e,n){const[r,s]=this._bookKeeper.findAdjacentRanges(e,n),o={from:e,count:n,prev:r,next:s};if(null!==r&&(r.next=o),null!==s&&(s.prev=o),this._bookKeeper.rangeCreated(o),this._allocated-=n,null!==s&&o.from+o.count===s.from){const e=o.from,n=o.count;t._fuse(o,s),t._removeRange(s),this._bookKeeper.rangeResized(o,e,n),this._bookKeeper.rangeResized(s,void 0,0)}if(null!==r&&r.from+r.count===o.from){const e=r.from,n=r.count;t._fuse(r,o),t._removeRange(o),this._bookKeeper.rangeResized(r,e,n),this._bookKeeper.rangeResized(o,void 0,0)}this._freeHead=null!==o.prev?this._freeHead:o}get fragmentation(){const e=this._size-this._allocated;if(0===e)return 0;return 1-this._bookKeeper.largestRange.count/e}static _removeRange(e){null!==e.prev?null!==e.next?(e.prev.next=e.next,e.next.prev=e.prev):e.prev.next=null:null!==e.next&&(e.next.prev=null)}static _fuse(e,t){e.count+=t.count,e.next=t.next,t.from+=t.count,t.count=0,null!==t.next&&(t.next.prev=e)}}export{t as FreeList};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}