{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { PathGeometryCursor as t } from \"../CIMCursor.js\";\nimport { PathHelper as e } from \"../CurveHelper.js\";\nimport { LineDashEnding as s } from \"../enums.js\";\nimport { GeometryWalker as a, DashPattern as i } from \"../GeometryWalker.js\";\n\nclass r {\n  static local() {\n    return null === r.instance && (r.instance = new r()), r.instance;\n  }\n\n  execute(t, e, s, a) {\n    return new n(t, e, s);\n  }\n\n}\n\nr.instance = null;\n\nclass n extends t {\n  constructor(t, e, s) {\n    super(t, !0, !0), this._firstCurve = null, this._walker = new a(), this._walker.updateTolerance(s), this._endings = e.lineDashEnding, this._customDashPos = -(e.offsetAlongLine ?? 0) * s, this._offsetAtEnd = (e.customEndingOffset ?? 0) * s, this._pattern = new i(), this._pattern.init(e.dashTemplate, !0), this._pattern.scale(s);\n  }\n\n  processPath(t) {\n    if (0 === this._pattern.length()) return this.iteratePath = !1, {\n      paths: [t]\n    };\n\n    if (!this.iteratePath) {\n      let e = !0;\n\n      switch (this._endings) {\n        case s.HalfPattern:\n        case s.HalfGap:\n        default:\n          this._pattern.extPtGap = 0;\n          break;\n\n        case s.FullPattern:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.firstValue());\n          break;\n\n        case s.FullGap:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.lastValue());\n          break;\n\n        case s.NoConstraint:\n          this.isClosed || (e = !1);\n          break;\n\n        case s.Custom:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._offsetAtEnd);\n      }\n\n      const a = this._walker.calculatePathLength(t);\n\n      if (this._pattern.isEmpty() || a < .1 * this._pattern.length()) return {\n        paths: [t]\n      };\n      if (!this._walker.init(t, this._pattern, e)) return {\n        paths: [t]\n      };\n    }\n\n    let a;\n    if (this.iteratePath) a = this._pattern.nextValue();else {\n      let t;\n\n      switch (this._endings) {\n        case s.HalfPattern:\n        default:\n          t = .5 * this._pattern.firstValue();\n          break;\n\n        case s.HalfGap:\n          t = .5 * -this._pattern.lastValue();\n          break;\n\n        case s.FullGap:\n          t = -this._pattern.lastValue();\n          break;\n\n        case s.FullPattern:\n          t = 0;\n          break;\n\n        case s.NoConstraint:\n        case s.Custom:\n          t = -this._customDashPos;\n      }\n\n      let e = t / this._pattern.length();\n\n      e -= Math.floor(e), t = e * this._pattern.length(), this._pattern.reset(), a = this._pattern.nextValue();\n      let i = !1;\n\n      for (; t >= a;) t -= a, a = this._pattern.nextValue(), i = !i;\n\n      a -= t, i ? (this._walker.nextPosition(a), a = this._pattern.nextValue()) : this.isClosed && (this._firstCurve = this._walker.nextCurve(a), a = this._pattern.nextValue(), this._walker.nextPosition(a), a = this._pattern.nextValue());\n    }\n\n    let i = this._walker.nextCurve(a);\n\n    return i ? this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (this._firstCurve.splice(0, 1), e.mergePath(i, this._firstCurve), this._firstCurve = null)) : (a = this._pattern.nextValue(), !this._walker.nextPosition(a) || this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (i = this._firstCurve, this._firstCurve = null)) : this.iteratePath = !0) : (this.iteratePath = !1, i = this._firstCurve, this._firstCurve = null), {\n      paths: [i]\n    };\n  }\n\n}\n\nexport { r as EffectDashes };","map":{"version":3,"names":["PathGeometryCursor","t","PathHelper","e","LineDashEnding","s","GeometryWalker","a","DashPattern","i","r","local","instance","execute","n","constructor","_firstCurve","_walker","updateTolerance","_endings","lineDashEnding","_customDashPos","offsetAlongLine","_offsetAtEnd","customEndingOffset","_pattern","init","dashTemplate","scale","processPath","length","iteratePath","paths","HalfPattern","HalfGap","extPtGap","FullPattern","isClosed","firstValue","FullGap","lastValue","NoConstraint","Custom","calculatePathLength","isEmpty","nextValue","Math","floor","reset","nextPosition","nextCurve","isPathEnd","splice","mergePath","EffectDashes"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/effects/EffectDashes.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{PathGeometryCursor as t}from\"../CIMCursor.js\";import{PathHelper as e}from\"../CurveHelper.js\";import{LineDashEnding as s}from\"../enums.js\";import{GeometryWalker as a,DashPattern as i}from\"../GeometryWalker.js\";class r{static local(){return null===r.instance&&(r.instance=new r),r.instance}execute(t,e,s,a){return new n(t,e,s)}}r.instance=null;class n extends t{constructor(t,e,s){super(t,!0,!0),this._firstCurve=null,this._walker=new a,this._walker.updateTolerance(s),this._endings=e.lineDashEnding,this._customDashPos=-(e.offsetAlongLine??0)*s,this._offsetAtEnd=(e.customEndingOffset??0)*s,this._pattern=new i,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(s)}processPath(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){let e=!0;switch(this._endings){case s.HalfPattern:case s.HalfGap:default:this._pattern.extPtGap=0;break;case s.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case s.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case s.NoConstraint:this.isClosed||(e=!1);break;case s.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const a=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||a<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}let a;if(this.iteratePath)a=this._pattern.nextValue();else{let t;switch(this._endings){case s.HalfPattern:default:t=.5*this._pattern.firstValue();break;case s.HalfGap:t=.5*-this._pattern.lastValue();break;case s.FullGap:t=-this._pattern.lastValue();break;case s.FullPattern:t=0;break;case s.NoConstraint:case s.Custom:t=-this._customDashPos}let e=t/this._pattern.length();e-=Math.floor(e),t=e*this._pattern.length(),this._pattern.reset(),a=this._pattern.nextValue();let i=!1;for(;t>=a;)t-=a,a=this._pattern.nextValue(),i=!i;a-=t,i?(this._walker.nextPosition(a),a=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(a),a=this._pattern.nextValue(),this._walker.nextPosition(a),a=this._pattern.nextValue())}let i=this._walker.nextCurve(a);return i?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),e.mergePath(i,this._firstCurve),this._firstCurve=null)):(a=this._pattern.nextValue(),!this._walker.nextPosition(a)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(i=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,i=this._firstCurve,this._firstCurve=null),{paths:[i]}}}export{r as EffectDashes};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}