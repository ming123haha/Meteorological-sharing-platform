{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { setDeepValue as t } from \"../../core/object.js\";\nimport { parse as r } from \"./parser.js\";\nimport { isEffectFunctions as s } from \"./utils.js\";\n\nfunction n(e, t, r) {\n  try {\n    return c(e);\n  } catch (s) {\n    r?.messages?.push(s);\n  }\n\n  return null;\n}\n\nfunction a(e, r, s, n) {\n  try {\n    const n = o(e);\n    t(s, n, r);\n  } catch (a) {\n    n.messages && n.messages.push(a);\n  }\n}\n\nfunction o(e) {\n  const t = r(e);\n  return t ? s(t) ? t.map(e => e.toJSON()) : t.map(({\n    scale: e,\n    effects: t\n  }) => ({\n    scale: e,\n    value: t.map(e => e.toJSON())\n  })) : null;\n}\n\nfunction c(e) {\n  if (!e || 0 === e.length) return null;\n\n  if (f(e)) {\n    const t = [];\n\n    for (const r of e) t.push({\n      scale: r.scale,\n      value: i(r.value)\n    });\n\n    return t;\n  }\n\n  return i(e);\n}\n\nfunction f(e) {\n  const t = e[0];\n  return !!t && \"scale\" in t;\n}\n\nfunction i(e) {\n  if (!e || !e.length) return \"\";\n  const t = [];\n\n  for (const s of e) {\n    let e = [];\n\n    switch (s.type) {\n      case \"grayscale\":\n      case \"sepia\":\n      case \"saturate\":\n      case \"invert\":\n      case \"brightness\":\n      case \"contrast\":\n      case \"opacity\":\n        e = [u(s, \"amount\")];\n        break;\n\n      case \"blur\":\n        e = [u(s, \"radius\", \"pt\")];\n        break;\n\n      case \"hue-rotate\":\n        e = [u(s, \"angle\", \"deg\")];\n        break;\n\n      case \"drop-shadow\":\n        e = [u(s, \"xoffset\", \"pt\"), u(s, \"yoffset\", \"pt\"), u(s, \"blurRadius\", \"pt\"), l(s, \"color\")];\n        break;\n\n      case \"bloom\":\n        e = [u(s, \"strength\"), u(s, \"radius\", \"pt\"), u(s, \"threshold\")];\n    }\n\n    const n = `${s.type}(${e.filter(Boolean).join(\" \")})`;\n    r(n), t.push(n);\n  }\n\n  return t.join(\" \");\n}\n\nfunction u(t, r, s) {\n  if (null == t[r]) throw new e(\"effect:missing-parameter\", `Missing parameter '${r}' in ${t.type} effect`, {\n    effect: t\n  });\n  return s ? t[r] + s : \"\" + t[r];\n}\n\nfunction l(t, r) {\n  if (null == t[r]) throw new e(\"effect:missing-parameter\", `Missing parameter '${r}' in ${t.type} effect`, {\n    effect: t\n  });\n  const s = t[r];\n  return `rgba(${s[0] || 0}, ${s[1] || 0}, ${s[2] || 0}, ${s[3] / 255 || 0})`;\n}\n\nexport { i as effectFunctionsFromJSON, c as fromJSON, n as read, o as toJSON, a as write };","map":{"version":3,"names":["e","setDeepValue","t","parse","r","isEffectFunctions","s","n","c","messages","push","a","o","map","toJSON","scale","effects","value","length","f","i","type","u","l","filter","Boolean","join","effect","effectFunctionsFromJSON","fromJSON","read","write"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/effects/jsonUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{setDeepValue as t}from\"../../core/object.js\";import{parse as r}from\"./parser.js\";import{isEffectFunctions as s}from\"./utils.js\";function n(e,t,r){try{return c(e)}catch(s){r?.messages?.push(s)}return null}function a(e,r,s,n){try{const n=o(e);t(s,n,r)}catch(a){n.messages&&n.messages.push(a)}}function o(e){const t=r(e);return t?s(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}function c(e){if(!e||0===e.length)return null;if(f(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:i(r.value)});return t}return i(e)}function f(e){const t=e[0];return!!t&&\"scale\"in t}function i(e){if(!e||!e.length)return\"\";const t=[];for(const s of e){let e=[];switch(s.type){case\"grayscale\":case\"sepia\":case\"saturate\":case\"invert\":case\"brightness\":case\"contrast\":case\"opacity\":e=[u(s,\"amount\")];break;case\"blur\":e=[u(s,\"radius\",\"pt\")];break;case\"hue-rotate\":e=[u(s,\"angle\",\"deg\")];break;case\"drop-shadow\":e=[u(s,\"xoffset\",\"pt\"),u(s,\"yoffset\",\"pt\"),u(s,\"blurRadius\",\"pt\"),l(s,\"color\")];break;case\"bloom\":e=[u(s,\"strength\"),u(s,\"radius\",\"pt\"),u(s,\"threshold\")]}const n=`${s.type}(${e.filter(Boolean).join(\" \")})`;r(n),t.push(n)}return t.join(\" \")}function u(t,r,s){if(null==t[r])throw new e(\"effect:missing-parameter\",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});return s?t[r]+s:\"\"+t[r]}function l(t,r){if(null==t[r])throw new e(\"effect:missing-parameter\",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});const s=t[r];return`rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}export{i as effectFunctionsFromJSON,c as fromJSON,n as read,o as toJSON,a as write};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}