{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../intl.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport i from \"../../../../core/Handles.js\";\nimport { nextHighestPowerOfTen as s, deg2rad as n } from \"../../../../core/mathUtils.js\";\nimport { isNone as a, destroyMaybe as o, isSome as r } from \"../../../../core/maybe.js\";\nimport { formatDecimal as l, formatImperialLength as c, formatImperialVerticalLength as d, formatMetricLength as h, formatMetricVerticalLength as u } from \"../../../../core/quantityFormatUtils.js\";\nimport { toUnit as m } from \"../../../../core/quantityUtils.js\";\nimport { watch as g, syncAndInitial as p } from \"../../../../core/reactiveUtils.js\";\nimport { createRenderScreenPointArray3 as _, createRenderScreenPointArray as v } from \"../../../../core/screenUtils.js\";\nimport { preferredImperialLengthUnit as b, convertUnit as L } from \"../../../../core/unitUtils.js\";\nimport { property as w } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as S } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { h as y } from \"../../../../chunks/vec2.js\";\nimport { g as f, a as P } from \"../../../../chunks/vec3.js\";\nimport { c as A } from \"../../../../chunks/vec3f64.js\";\nimport { f as E } from \"../../../../chunks/vec4f32.js\";\nimport { MeasurementMode as V } from \"../interfaces.js\";\nimport { VisualElementOrientation as j, ViewMode as z } from \"./interfaces.js\";\nimport { screenSpaceTangent as D } from \"../support/viewUtils.js\";\nimport { LabelVisualElement as M, mirrorPosition as O } from \"../../interactive/visualElements/LabelVisualElement.js\";\nimport { LineVisualElement as G } from \"../../interactive/visualElements/LineVisualElement.js\";\nimport { MeasurementArrowVisualElement as C } from \"../../interactive/visualElements/MeasurementArrowVisualElement.js\";\nimport { RightAngleQuadVisualElement as x } from \"../../interactive/visualElements/RightAngleQuadVisualElement.js\";\nimport { GeodesicSegment as T, EuclideanSegment as H } from \"../../interactive/visualElements/support/Segment.js\";\nimport { RenderOccludedFlag as k } from \"../../webgl-engine/lib/Material.js\";\nimport { createStipplePatternSimple as R } from \"../../webgl-engine/materials/lineStippleUtils.js\";\nimport { onLocaleChange as F } from \"../../../../intl/locale.js\";\nimport { fetchMessageBundle as U } from \"../../../../intl/messages.js\";\nvar W;\n!function (e) {\n  e[e.Pending = 0] = \"Pending\", e[e.Ready = 1] = \"Ready\", e[e.Destroyed = 2] = \"Destroyed\";\n}(W || (W = {}));\nlet Q = class extends t {\n  constructor(e) {\n    super(e), this._params = { ...N\n    }, this._handles = new i(), this._segmentVisualElement = null, this._triangleVisualElement = null, this._rightAngleQuad = null, this._projectedGeodesicLine = null, this._geodesicStartHint = null, this._geodesicEndHint = null, this._segmentLabel = null, this._verticalLabel = null, this._horizontalLabel = null, this._startPosition = A(), this._endPosition = A(), this._cornerPosition = A(), this._startPositionAtSeaLevel = A(), this._endPositionAtSeaLevel = A(), this._triangleOrientationOverride = null, this.messages = null, this.loadingMessages = !0, this.visualElementOrientation = j.Auto, this.triangleCollapseRatioThreshold = .03;\n  }\n\n  get visible() {\n    return this.analysisView.visible;\n  }\n\n  get viewMode() {\n    const {\n      elevationAlignedStartPoint: e,\n      elevationAlignedEndPoint: t\n    } = this.analysisView;\n    if (a(e) || a(t) || e.equals(t)) return z.None;\n    const i = this.analysisView.result;\n    if (a(i)) return z.Direct;\n    if (\"geodesic\" === i.mode) return this._requiresGeodesicGuideAt(this._startPosition) || this._requiresGeodesicGuideAt(this._endPosition) ? z.ProjectedGeodesic : z.Direct;\n    const {\n      verticalDistance: s,\n      horizontalDistance: n\n    } = i,\n          o = s.value,\n          r = n.value;\n    return Math.min(o / r, r / o) < this.triangleCollapseRatioThreshold ? z.Direct : z.Triangle;\n  }\n\n  get actualVisualizedMeasurement() {\n    if (a(this.analysisView.result)) switch (this.analysisView.measurementMode) {\n      case V.Auto:\n      case V.Euclidean:\n      default:\n        return \"euclidean\";\n\n      case V.Geodesic:\n        return \"geodesic\";\n    }\n    return this.analysisView.result.mode;\n  }\n\n  get allowVisualElementsOrientationChange() {\n    return a(this._triangleOrientationOverride);\n  }\n\n  set allowVisualElementsOrientationChange(e) {\n    a(this._triangleOrientationOverride) !== e && (a(this._triangleOrientationOverride) ? this._triangleOrientationOverride = this._actualVisualElementsOrientation : this._triangleOrientationOverride = null);\n  }\n\n  get labels() {\n    const e = \"geodesic\" === this.actualVisualizedMeasurement;\n    return {\n      direct: this._segmentLabel,\n      horizontal: e ? this._segmentLabel : this._horizontalLabel,\n      vertical: this._verticalLabel\n    };\n  }\n\n  initialize() {\n    const e = this._params,\n          t = {\n      attached: !0,\n      view: this.view\n    };\n    this._segmentVisualElement = new C({ ...t,\n      geometry: null,\n      renderOccluded: k.OccludeAndTransparent\n    }), this._triangleVisualElement = new G({ ...t,\n      width: e.triangleLineWidth,\n      color: e.triangleColor,\n      renderOccluded: k.OccludeAndTransparent\n    }), this._rightAngleQuad = new x({ ...t,\n      color: B,\n      renderOccluded: k.OccludeAndTransparent\n    });\n    const i = { ...t,\n      polygonOffset: !0,\n      renderOccluded: k.OccludeAndTransparent\n    };\n    this._projectedGeodesicLine = new G({ ...i,\n      width: e.geodesicProjectionLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: R(e.guideStippleLengthPixels)\n    }), this._geodesicStartHint = new G({ ...i,\n      width: e.guideLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: R(e.guideStippleLengthPixels)\n    }), this._geodesicEndHint = new G({ ...i,\n      width: e.guideLineWidth,\n      color: e.geodesicProjectionLineColor,\n      stipplePattern: R(e.guideStippleLengthPixels)\n    }), this._segmentLabel = new M({ ...t,\n      fontSize: e.direcLabelFontSize\n    }), this._verticalLabel = new M({ ...t,\n      fontSize: e.verticalLabelFontSize\n    }), this._horizontalLabel = new M({ ...t,\n      fontSize: e.horizontalLabelFontSize\n    }), this._handles.add([g(() => {\n      const {\n        elevationAlignedStartPoint: e,\n        elevationAlignedEndPoint: t\n      } = this.analysisView,\n            i = this.view;\n      return {\n        view: i,\n        camera: i.state.camera,\n        viewMode: this.viewMode,\n        elevationAlignedStartPoint: e,\n        elevationAlignedEndPoint: t,\n        orientation: this._actualVisualElementsOrientation,\n        visualizedMeasurement: this.actualVisualizedMeasurement,\n        stripeLength: this._measurementArrowStripeLength\n      };\n    }, e => this._updateGeometryAndViewMode(e), p), g(() => ({\n      visible: this.visible,\n      viewMode: this.viewMode\n    }), e => this._updateVisualElementVisibility(e), p), g(() => ({\n      text: this._labelsText,\n      visualizedMeasurement: this.actualVisualizedMeasurement\n    }), e => this._updateLabelText(e), p), g(() => ({\n      visible: this.visible,\n      viewMode: this.viewMode\n    }), e => this._updateLabelVisibility(e), p), g(() => this._measurementArrowStripeLength, e => this._updateSegmentStripeLength(e), p), F(async () => this._updateMessageBundle())]), this._updateMessageBundle();\n  }\n\n  destroy() {\n    this._handles = o(this._handles), this._segmentVisualElement = o(this._segmentVisualElement), this._triangleVisualElement = o(this._triangleVisualElement), this._rightAngleQuad = o(this._rightAngleQuad), this._projectedGeodesicLine = o(this._projectedGeodesicLine), this._geodesicStartHint = o(this._geodesicStartHint), this._geodesicEndHint = o(this._geodesicEndHint), this._segmentLabel = o(this._segmentLabel), this._verticalLabel = o(this._verticalLabel), this._horizontalLabel = o(this._horizontalLabel), this.set(\"view\", null);\n  }\n\n  _updateVisualElementVisibility({\n    visible: e,\n    viewMode: t\n  }) {\n    if (this._segmentVisualElement.visible = !1, this._triangleVisualElement.visible = !1, this._rightAngleQuad.visible = !1, this._projectedGeodesicLine.visible = !1, this._geodesicStartHint.visible = !1, this._geodesicEndHint.visible = !1, e) switch (t) {\n      case z.None:\n        break;\n\n      case z.Direct:\n        this._segmentVisualElement.visible = !0;\n        break;\n\n      case z.Triangle:\n        this._segmentVisualElement.visible = !0, this._triangleVisualElement.visible = !0, this._rightAngleQuad.visible = !0;\n        break;\n\n      case z.ProjectedGeodesic:\n        this._segmentVisualElement.visible = !0, this._projectedGeodesicLine.visible = !0, this._geodesicStartHint.visible = !0, this._geodesicEndHint.visible = !0;\n    }\n  }\n\n  _updateGeometryAndViewMode({\n    view: e,\n    camera: t,\n    viewMode: i,\n    elevationAlignedStartPoint: s,\n    elevationAlignedEndPoint: n,\n    orientation: o,\n    visualizedMeasurement: r,\n    stripeLength: l\n  }) {\n    const c = e.renderCoordsHelper;\n    if (a(c) || a(s) || a(n) || s.equals(n)) return;\n    let d = this._startPosition,\n        h = this._endPosition;\n    c.toRenderCoords(s, d), c.toRenderCoords(n, h);\n    const u = o === j.AboveSegment ? 1 : -1,\n          m = u * (c.getAltitude(h) - c.getAltitude(d));\n    m < 0 && (d = this._endPosition, h = this._startPosition);\n    const g = \"geodesic\" === r ? new T(this._startPosition, this._endPosition, c.spatialReference) : new H(this._startPosition, this._endPosition);\n\n    switch (this._segmentVisualElement.geometry = g, this._updateSegmentStripeLength(l), i) {\n      case z.Direct:\n        this._updateSegment(g, o);\n\n        break;\n\n      case z.Triangle:\n        this._updateSegmentAndTriangle({\n          view: e,\n          camera: t,\n          segment: g,\n          orientation: o,\n          startPosition: d,\n          endPosition: h,\n          deltaSign: u,\n          altitudeDelta: m\n        });\n\n        break;\n\n      case z.ProjectedGeodesic:\n        this._updateSegmentAndProjection({\n          view: e,\n          orientation: o,\n          startPosition: d,\n          endPosition: h\n        });\n\n    }\n  }\n\n  _updateSegment(e, t) {\n    this._segmentLabel.anchor = t === j.AboveSegment ? \"top\" : \"bottom\", this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: e,\n      sampleLocation: \"center\"\n    };\n  }\n\n  _updateSegmentAndTriangle({\n    view: {\n      renderCoordsHelper: e\n    },\n    camera: t,\n    segment: i,\n    orientation: s,\n    startPosition: n,\n    endPosition: a,\n    deltaSign: o,\n    altitudeDelta: r\n  }) {\n    const l = this._cornerPosition;\n    e.worldUpAtPosition(n, l), f(l, l, o * Math.abs(r)), P(l, l, n), this._triangleVisualElement.geometry = [[[n[0], n[1], n[2]], [l[0], l[1], l[2]], [a[0], a[1], a[2]]]], this._rightAngleQuad.geometry = {\n      previous: n,\n      center: l,\n      next: a\n    };\n    const c = new H(n, l),\n          d = new H(l, a),\n          h = q(n, a, l, s, t);\n    this._segmentLabel.anchor = h.segment, this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: i,\n      sampleLocation: \"center\"\n    }, this._verticalLabel.geometry = {\n      type: \"segment\",\n      segment: c,\n      sampleLocation: \"center\"\n    }, this._verticalLabel.anchor = h.vertical, this._horizontalLabel.geometry = {\n      type: \"segment\",\n      segment: d,\n      sampleLocation: \"center\"\n    }, this._horizontalLabel.anchor = h.horizontal;\n  }\n\n  _updateSegmentAndProjection({\n    view: {\n      renderCoordsHelper: e\n    },\n    orientation: t,\n    startPosition: i,\n    endPosition: s\n  }) {\n    e.setAltitude(this._startPositionAtSeaLevel, 0, i), e.setAltitude(this._endPositionAtSeaLevel, 0, s);\n    const n = new T(this._startPositionAtSeaLevel, this._endPositionAtSeaLevel, e.spatialReference);\n    this._projectedGeodesicLine.setGeometryFromSegment(n), this._geodesicStartHint.setGeometryFromSegment(new H(this._startPositionAtSeaLevel, i)), this._geodesicEndHint.setGeometryFromSegment(new H(this._endPositionAtSeaLevel, s)), this._segmentLabel.geometry = {\n      type: \"segment\",\n      segment: n,\n      sampleLocation: \"center\"\n    }, this._segmentLabel.anchor = t === j.AboveSegment ? \"top\" : \"bottom\";\n  }\n\n  _updateLabelText({\n    text: e,\n    visualizedMeasurement: t\n  }) {\n    r(e) ? (this._segmentLabel.text = \"euclidean\" === t ? e.euclideanDistance : e.geodesicDistance, this._horizontalLabel.text = e.horizontalDistance, this._verticalLabel.text = e.verticalDistance) : (this._segmentLabel.text = null, this._horizontalLabel.text = null, this._verticalLabel.text = null), this.notifyChange(\"labels\");\n  }\n\n  _updateLabelVisibility({\n    visible: e,\n    viewMode: t\n  }) {\n    const i = this._segmentLabel,\n          s = this._horizontalLabel,\n          n = this._verticalLabel;\n    if (i.visible = !1, s.visible = !1, n.visible = !1, e) switch (t) {\n      case z.Direct:\n        i.visible = !0;\n        break;\n\n      case z.Triangle:\n        i.visible = !0, s.visible = !0, n.visible = !0;\n        break;\n\n      case z.ProjectedGeodesic:\n        i.visible = !0;\n\n      case z.None:\n    }\n  }\n\n  get _labelsText() {\n    if (this.destroyed) return null;\n    const e = this.messages,\n          t = this.analysisView.result;\n    if (a(t) || a(e)) return null;\n\n    const {\n      directDistance: i,\n      horizontalDistance: s,\n      verticalDistance: n,\n      geodesicDistance: o\n    } = t,\n          r = this.analysisView.unit,\n          m = e => ({\n      euclideanDistance: \"\",\n      geodesicDistance: \"\",\n      horizontalDistance: \"\",\n      verticalDistance: \"\",\n      ...e\n    });\n\n    switch (r) {\n      case \"metric\":\n        return m({\n          euclideanDistance: i && h(e, i),\n          geodesicDistance: o && h(e, o),\n          horizontalDistance: s && h(e, s),\n          verticalDistance: n && u(e, n)\n        });\n\n      case \"imperial\":\n        return m({\n          euclideanDistance: i && c(e, i),\n          geodesicDistance: o && c(e, o),\n          horizontalDistance: s && c(e, s),\n          verticalDistance: n && d(e, n)\n        });\n\n      default:\n        return m({\n          euclideanDistance: i && l(e, i, r),\n          geodesicDistance: o && l(e, o, r),\n          horizontalDistance: s && l(e, s, r),\n          verticalDistance: n && l(e, n, r)\n        });\n    }\n  }\n\n  _updateSegmentStripeLength(e) {\n    const t = this._segmentVisualElement;\n    r(e) ? (t.stripeLength = e, t.stripesEnabled = !0) : t.stripesEnabled = !1;\n  }\n\n  get _actualVisualElementsOrientation() {\n    if (r(this._triangleOrientationOverride)) return this._triangleOrientationOverride;\n    const e = this.visualElementOrientation;\n    return e === j.Auto ? this.view.state.camera.aboveGround ? j.AboveSegment : j.BelowSegment : e;\n  }\n\n  _requiresGeodesicGuideAt(e) {\n    const t = this.view;\n    if (!t?.state) return !1;\n    const i = t.state.camera,\n          s = t.renderCoordsHelper,\n          n = i.computeScreenPixelSizeAt(e);\n    return s.getAltitude(e) / n >= 10;\n  }\n\n  get _measurementArrowStripeLength() {\n    const {\n      result: e,\n      unit: t\n    } = this.analysisView;\n    if (a(e)) return null;\n    let i = null;\n    const n = e.directDistance;\n\n    switch (t) {\n      case \"metric\":\n        i = n && m(n, \"meters\");\n        break;\n\n      case \"imperial\":\n        i = n && m(n, b(n.value, n.unit));\n        break;\n\n      default:\n        i = n && m(n, t);\n    }\n\n    if (a(i)) return null;\n    return s(i.value / 30) * L(1, i.unit, \"meters\");\n  }\n\n  _updateMessageBundle() {\n    this.loadingMessages = !0, U(\"esri/core/t9n/Units\").then(e => {\n      this.messages = e;\n    }).finally(() => {\n      this.loadingMessages = !1;\n    });\n  }\n\n  get testData() {\n    return {\n      labels: this.labels,\n      stripeLength: this._segmentVisualElement?.stripeLength\n    };\n  }\n\n};\n\nfunction q(e, t, i, s, n) {\n  const a = J,\n        o = K;\n  n.projectToRenderScreen(i, a), n.projectToRenderScreen(t, o);\n  const r = {\n    segment: \"bottom\",\n    horizontal: \"top\",\n    vertical: a[0] < o[0] ? \"left\" : \"right\"\n  };\n  {\n    const s = X,\n          a = Y;\n\n    if (D(e, i, s, n), D(e, t, a, n), y(s, a) >= I) {\n      const e = Math.sign(s[1]) === Math.sign(a[1]);\n      r.segment = e ? O(r.vertical) : r.vertical;\n    } else {\n      const e = Z;\n      D(i, t, e, n), y(e, a) >= I && (r.segment = Math.sign(e[0]) === Math.sign(a[0]) ? O(r.horizontal) : r.horizontal);\n    }\n  }\n\n  if (s === j.BelowSegment) {\n    const e = e => \"top\" === e ? \"bottom\" : \"top\";\n\n    r.segment = e(r.segment), r.horizontal = e(r.horizontal), r.vertical = e(r.vertical);\n  }\n\n  return r;\n}\n\ne([w()], Q.prototype, \"_triangleOrientationOverride\", void 0), e([w()], Q.prototype, \"messages\", void 0), e([w()], Q.prototype, \"view\", void 0), e([w()], Q.prototype, \"analysis\", void 0), e([w()], Q.prototype, \"analysisView\", void 0), e([w()], Q.prototype, \"loadingMessages\", void 0), e([w()], Q.prototype, \"visible\", null), e([w()], Q.prototype, \"viewMode\", null), e([w()], Q.prototype, \"actualVisualizedMeasurement\", null), e([w()], Q.prototype, \"visualElementOrientation\", void 0), e([w()], Q.prototype, \"triangleCollapseRatioThreshold\", void 0), e([w()], Q.prototype, \"allowVisualElementsOrientationChange\", null), e([w()], Q.prototype, \"labels\", null), e([w()], Q.prototype, \"_labelsText\", null), e([w()], Q.prototype, \"_actualVisualElementsOrientation\", null), e([w()], Q.prototype, \"_measurementArrowStripeLength\", null), Q = e([S(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")], Q);\n\nconst B = E(1, .5, 0, .75),\n      N = {\n  laserLineGlowColor: [1, .5, 0],\n  laserLineGlowWidth: 8,\n  laserLineGlowFalloff: 8,\n  laserLineInnerColor: [1, 1, 1],\n  laserLineInnerWidth: .75,\n  laserLineGlobalAlpha: .75,\n  laserLineEnabled: !0,\n  handleColor: [1, .5, 0],\n  handleOpacity: .5,\n  handleRadius: 5,\n  triangleColor: B,\n  triangleLineWidth: 3,\n  triangleCornerSize: 32,\n  triangleSubdivisions: 128,\n  arrowWidth: 16,\n  arrowOutlineColor: [1, .5, 0, 1],\n  arrowOutlineWidth: .2,\n  arrowStripeEvenColor: [1, 1, 1, 1],\n  arrowStripeOddColor: [1, .5, 0, 1],\n  arrowStripeLength: 16,\n  arrowSubdivisions: 128,\n  geodesicProjectionLineWidth: 2,\n  geodesicProjectionLineColor: B,\n  guideLineWidth: 2,\n  guideLineColor: B,\n  guideStippleLengthPixels: 6,\n  labelDistance: 25,\n  direcLabelFontSize: 16,\n  horizontalLabelFontSize: 12,\n  verticalLabelFontSize: 12\n},\n      I = Math.cos(n(12)),\n      J = _(),\n      K = _(),\n      X = v(),\n      Y = v(),\n      Z = v();\n\nexport { Q as DirectLineMeasurementVisualization, W as State };","map":{"version":3,"names":["_","e","t","i","nextHighestPowerOfTen","s","deg2rad","n","isNone","a","destroyMaybe","o","isSome","r","formatDecimal","l","formatImperialLength","c","formatImperialVerticalLength","d","formatMetricLength","h","formatMetricVerticalLength","u","toUnit","m","watch","g","syncAndInitial","p","createRenderScreenPointArray3","createRenderScreenPointArray","v","preferredImperialLengthUnit","b","convertUnit","L","property","w","subclass","S","y","f","P","A","E","MeasurementMode","V","VisualElementOrientation","j","ViewMode","z","screenSpaceTangent","D","LabelVisualElement","M","mirrorPosition","O","LineVisualElement","G","MeasurementArrowVisualElement","C","RightAngleQuadVisualElement","x","GeodesicSegment","T","EuclideanSegment","H","RenderOccludedFlag","k","createStipplePatternSimple","R","onLocaleChange","F","fetchMessageBundle","U","W","Pending","Ready","Destroyed","Q","constructor","_params","N","_handles","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_triangleOrientationOverride","messages","loadingMessages","visualElementOrientation","Auto","triangleCollapseRatioThreshold","visible","analysisView","viewMode","elevationAlignedStartPoint","elevationAlignedEndPoint","equals","None","result","Direct","mode","_requiresGeodesicGuideAt","ProjectedGeodesic","verticalDistance","horizontalDistance","value","Math","min","Triangle","actualVisualizedMeasurement","measurementMode","Euclidean","Geodesic","allowVisualElementsOrientationChange","_actualVisualElementsOrientation","labels","direct","horizontal","vertical","initialize","attached","view","geometry","renderOccluded","OccludeAndTransparent","width","triangleLineWidth","color","triangleColor","B","polygonOffset","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","guideStippleLengthPixels","guideLineWidth","fontSize","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","add","camera","state","orientation","visualizedMeasurement","stripeLength","_measurementArrowStripeLength","_updateGeometryAndViewMode","_updateVisualElementVisibility","text","_labelsText","_updateLabelText","_updateLabelVisibility","_updateSegmentStripeLength","_updateMessageBundle","destroy","set","renderCoordsHelper","toRenderCoords","AboveSegment","getAltitude","spatialReference","_updateSegment","_updateSegmentAndTriangle","segment","startPosition","endPosition","deltaSign","altitudeDelta","_updateSegmentAndProjection","anchor","type","sampleLocation","worldUpAtPosition","abs","previous","center","next","q","setAltitude","setGeometryFromSegment","euclideanDistance","geodesicDistance","notifyChange","destroyed","directDistance","unit","stripesEnabled","aboveGround","BelowSegment","computeScreenPixelSizeAt","then","finally","testData","J","K","projectToRenderScreen","X","Y","I","sign","Z","prototype","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","arrowWidth","arrowOutlineColor","arrowOutlineWidth","arrowStripeEvenColor","arrowStripeOddColor","arrowStripeLength","arrowSubdivisions","guideLineColor","labelDistance","cos","DirectLineMeasurementVisualization","State"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementVisualization.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../intl.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Handles.js\";import{nextHighestPowerOfTen as s,deg2rad as n}from\"../../../../core/mathUtils.js\";import{isNone as a,destroyMaybe as o,isSome as r}from\"../../../../core/maybe.js\";import{formatDecimal as l,formatImperialLength as c,formatImperialVerticalLength as d,formatMetricLength as h,formatMetricVerticalLength as u}from\"../../../../core/quantityFormatUtils.js\";import{toUnit as m}from\"../../../../core/quantityUtils.js\";import{watch as g,syncAndInitial as p}from\"../../../../core/reactiveUtils.js\";import{createRenderScreenPointArray3 as _,createRenderScreenPointArray as v}from\"../../../../core/screenUtils.js\";import{preferredImperialLengthUnit as b,convertUnit as L}from\"../../../../core/unitUtils.js\";import{property as w}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as S}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{h as y}from\"../../../../chunks/vec2.js\";import{g as f,a as P}from\"../../../../chunks/vec3.js\";import{c as A}from\"../../../../chunks/vec3f64.js\";import{f as E}from\"../../../../chunks/vec4f32.js\";import{MeasurementMode as V}from\"../interfaces.js\";import{VisualElementOrientation as j,ViewMode as z}from\"./interfaces.js\";import{screenSpaceTangent as D}from\"../support/viewUtils.js\";import{LabelVisualElement as M,mirrorPosition as O}from\"../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as G}from\"../../interactive/visualElements/LineVisualElement.js\";import{MeasurementArrowVisualElement as C}from\"../../interactive/visualElements/MeasurementArrowVisualElement.js\";import{RightAngleQuadVisualElement as x}from\"../../interactive/visualElements/RightAngleQuadVisualElement.js\";import{GeodesicSegment as T,EuclideanSegment as H}from\"../../interactive/visualElements/support/Segment.js\";import{RenderOccludedFlag as k}from\"../../webgl-engine/lib/Material.js\";import{createStipplePatternSimple as R}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as F}from\"../../../../intl/locale.js\";import{fetchMessageBundle as U}from\"../../../../intl/messages.js\";var W;!function(e){e[e.Pending=0]=\"Pending\",e[e.Ready=1]=\"Ready\",e[e.Destroyed=2]=\"Destroyed\"}(W||(W={}));let Q=class extends t{constructor(e){super(e),this._params={...N},this._handles=new i,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=A(),this._endPosition=A(),this._cornerPosition=A(),this._startPositionAtSeaLevel=A(),this._endPositionAtSeaLevel=A(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=j.Auto,this.triangleCollapseRatioThreshold=.03}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(a(e)||a(t)||e.equals(t))return z.None;const i=this.analysisView.result;if(a(i))return z.Direct;if(\"geodesic\"===i.mode)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?z.ProjectedGeodesic:z.Direct;const{verticalDistance:s,horizontalDistance:n}=i,o=s.value,r=n.value;return Math.min(o/r,r/o)<this.triangleCollapseRatioThreshold?z.Direct:z.Triangle}get actualVisualizedMeasurement(){if(a(this.analysisView.result))switch(this.analysisView.measurementMode){case V.Auto:case V.Euclidean:default:return\"euclidean\";case V.Geodesic:return\"geodesic\"}return this.analysisView.result.mode}get allowVisualElementsOrientationChange(){return a(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){a(this._triangleOrientationOverride)!==e&&(a(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){const e=\"geodesic\"===this.actualVisualizedMeasurement;return{direct:this._segmentLabel,horizontal:e?this._segmentLabel:this._horizontalLabel,vertical:this._verticalLabel}}initialize(){const e=this._params,t={attached:!0,view:this.view};this._segmentVisualElement=new C({...t,geometry:null,renderOccluded:k.OccludeAndTransparent}),this._triangleVisualElement=new G({...t,width:e.triangleLineWidth,color:e.triangleColor,renderOccluded:k.OccludeAndTransparent}),this._rightAngleQuad=new x({...t,color:B,renderOccluded:k.OccludeAndTransparent});const i={...t,polygonOffset:!0,renderOccluded:k.OccludeAndTransparent};this._projectedGeodesicLine=new G({...i,width:e.geodesicProjectionLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:R(e.guideStippleLengthPixels)}),this._geodesicStartHint=new G({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:R(e.guideStippleLengthPixels)}),this._geodesicEndHint=new G({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:R(e.guideStippleLengthPixels)}),this._segmentLabel=new M({...t,fontSize:e.direcLabelFontSize}),this._verticalLabel=new M({...t,fontSize:e.verticalLabelFontSize}),this._horizontalLabel=new M({...t,fontSize:e.horizontalLabelFontSize}),this._handles.add([g((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),p),g((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),p),g((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),p),g((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateLabelVisibility(e)),p),g((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),p),F((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._handles=o(this._handles),this._segmentVisualElement=o(this._segmentVisualElement),this._triangleVisualElement=o(this._triangleVisualElement),this._rightAngleQuad=o(this._rightAngleQuad),this._projectedGeodesicLine=o(this._projectedGeodesicLine),this._geodesicStartHint=o(this._geodesicStartHint),this._geodesicEndHint=o(this._geodesicEndHint),this._segmentLabel=o(this._segmentLabel),this._verticalLabel=o(this._verticalLabel),this._horizontalLabel=o(this._horizontalLabel),this.set(\"view\",null)}_updateVisualElementVisibility({visible:e,viewMode:t}){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(t){case z.None:break;case z.Direct:this._segmentVisualElement.visible=!0;break;case z.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case z.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode({view:e,camera:t,viewMode:i,elevationAlignedStartPoint:s,elevationAlignedEndPoint:n,orientation:o,visualizedMeasurement:r,stripeLength:l}){const c=e.renderCoordsHelper;if(a(c)||a(s)||a(n)||s.equals(n))return;let d=this._startPosition,h=this._endPosition;c.toRenderCoords(s,d),c.toRenderCoords(n,h);const u=o===j.AboveSegment?1:-1,m=u*(c.getAltitude(h)-c.getAltitude(d));m<0&&(d=this._endPosition,h=this._startPosition);const g=\"geodesic\"===r?new T(this._startPosition,this._endPosition,c.spatialReference):new H(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(l),i){case z.Direct:this._updateSegment(g,o);break;case z.Triangle:this._updateSegmentAndTriangle({view:e,camera:t,segment:g,orientation:o,startPosition:d,endPosition:h,deltaSign:u,altitudeDelta:m});break;case z.ProjectedGeodesic:this._updateSegmentAndProjection({view:e,orientation:o,startPosition:d,endPosition:h})}}_updateSegment(e,t){this._segmentLabel.anchor=t===j.AboveSegment?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"}}_updateSegmentAndTriangle({view:{renderCoordsHelper:e},camera:t,segment:i,orientation:s,startPosition:n,endPosition:a,deltaSign:o,altitudeDelta:r}){const l=this._cornerPosition;e.worldUpAtPosition(n,l),f(l,l,o*Math.abs(r)),P(l,l,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[l[0],l[1],l[2]],[a[0],a[1],a[2]]]],this._rightAngleQuad.geometry={previous:n,center:l,next:a};const c=new H(n,l),d=new H(l,a),h=q(n,a,l,s,t);this._segmentLabel.anchor=h.segment,this._segmentLabel.geometry={type:\"segment\",segment:i,sampleLocation:\"center\"},this._verticalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._verticalLabel.anchor=h.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:d,sampleLocation:\"center\"},this._horizontalLabel.anchor=h.horizontal}_updateSegmentAndProjection({view:{renderCoordsHelper:e},orientation:t,startPosition:i,endPosition:s}){e.setAltitude(this._startPositionAtSeaLevel,0,i),e.setAltitude(this._endPositionAtSeaLevel,0,s);const n=new T(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(n),this._geodesicStartHint.setGeometryFromSegment(new H(this._startPositionAtSeaLevel,i)),this._geodesicEndHint.setGeometryFromSegment(new H(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:\"segment\",segment:n,sampleLocation:\"center\"},this._segmentLabel.anchor=t===j.AboveSegment?\"top\":\"bottom\"}_updateLabelText({text:e,visualizedMeasurement:t}){r(e)?(this._segmentLabel.text=\"euclidean\"===t?e.euclideanDistance:e.geodesicDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange(\"labels\")}_updateLabelVisibility({visible:e,viewMode:t}){const i=this._segmentLabel,s=this._horizontalLabel,n=this._verticalLabel;if(i.visible=!1,s.visible=!1,n.visible=!1,e)switch(t){case z.Direct:i.visible=!0;break;case z.Triangle:i.visible=!0,s.visible=!0,n.visible=!0;break;case z.ProjectedGeodesic:i.visible=!0;case z.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(a(t)||a(e))return null;const{directDistance:i,horizontalDistance:s,verticalDistance:n,geodesicDistance:o}=t,r=this.analysisView.unit,m=e=>({euclideanDistance:\"\",geodesicDistance:\"\",horizontalDistance:\"\",verticalDistance:\"\",...e});switch(r){case\"metric\":return m({euclideanDistance:i&&h(e,i),geodesicDistance:o&&h(e,o),horizontalDistance:s&&h(e,s),verticalDistance:n&&u(e,n)});case\"imperial\":return m({euclideanDistance:i&&c(e,i),geodesicDistance:o&&c(e,o),horizontalDistance:s&&c(e,s),verticalDistance:n&&d(e,n)});default:return m({euclideanDistance:i&&l(e,i,r),geodesicDistance:o&&l(e,o,r),horizontalDistance:s&&l(e,s,r),verticalDistance:n&&l(e,n,r)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;r(e)?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(r(this._triangleOrientationOverride))return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===j.Auto?this.view.state.camera.aboveGround?j.AboveSegment:j.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(!t?.state)return!1;const i=t.state.camera,s=t.renderCoordsHelper,n=i.computeScreenPixelSizeAt(e);return s.getAltitude(e)/n>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(a(e))return null;let i=null;const n=e.directDistance;switch(t){case\"metric\":i=n&&m(n,\"meters\");break;case\"imperial\":i=n&&m(n,b(n.value,n.unit));break;default:i=n&&m(n,t)}if(a(i))return null;return s(i.value/30)*L(1,i.unit,\"meters\")}_updateMessageBundle(){this.loadingMessages=!0,U(\"esri/core/t9n/Units\").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}get testData(){return{labels:this.labels,stripeLength:this._segmentVisualElement?.stripeLength}}};function q(e,t,i,s,n){const a=J,o=K;n.projectToRenderScreen(i,a),n.projectToRenderScreen(t,o);const r={segment:\"bottom\",horizontal:\"top\",vertical:a[0]<o[0]?\"left\":\"right\"};{const s=X,a=Y;if(D(e,i,s,n),D(e,t,a,n),y(s,a)>=I){const e=Math.sign(s[1])===Math.sign(a[1]);r.segment=e?O(r.vertical):r.vertical}else{const e=Z;D(i,t,e,n),y(e,a)>=I&&(r.segment=Math.sign(e[0])===Math.sign(a[0])?O(r.horizontal):r.horizontal)}}if(s===j.BelowSegment){const e=e=>\"top\"===e?\"bottom\":\"top\";r.segment=e(r.segment),r.horizontal=e(r.horizontal),r.vertical=e(r.vertical)}return r}e([w()],Q.prototype,\"_triangleOrientationOverride\",void 0),e([w()],Q.prototype,\"messages\",void 0),e([w()],Q.prototype,\"view\",void 0),e([w()],Q.prototype,\"analysis\",void 0),e([w()],Q.prototype,\"analysisView\",void 0),e([w()],Q.prototype,\"loadingMessages\",void 0),e([w()],Q.prototype,\"visible\",null),e([w()],Q.prototype,\"viewMode\",null),e([w()],Q.prototype,\"actualVisualizedMeasurement\",null),e([w()],Q.prototype,\"visualElementOrientation\",void 0),e([w()],Q.prototype,\"triangleCollapseRatioThreshold\",void 0),e([w()],Q.prototype,\"allowVisualElementsOrientationChange\",null),e([w()],Q.prototype,\"labels\",null),e([w()],Q.prototype,\"_labelsText\",null),e([w()],Q.prototype,\"_actualVisualElementsOrientation\",null),e([w()],Q.prototype,\"_measurementArrowStripeLength\",null),Q=e([S(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")],Q);const B=E(1,.5,0,.75),N={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:B,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:B,guideLineWidth:2,guideLineColor:B,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},I=Math.cos(n(12)),J=_(),K=_(),X=v(),Y=v(),Z=v();export{Q as DirectLineMeasurementVisualization,W as State};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}