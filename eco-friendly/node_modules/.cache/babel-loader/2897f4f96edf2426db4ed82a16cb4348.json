{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Logger.js\";\nimport { isNone as t, isSome as r, disposeMaybe as i } from \"../../../../core/maybe.js\";\nimport { NestedMap as s } from \"../../../../core/NestedMap.js\";\nimport { assert as o } from \"./Util.js\";\nconst a = e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\");\n\nclass l {\n  constructor(e, t, r, i) {\n    this._textureRepository = e, this._techniqueRepository = t, this.materialChanged = r, this.requestRender = i, this._id2glMaterialRef = new s();\n  }\n\n  dispose() {\n    this._textureRepository.dispose();\n  }\n\n  acquire(e, r) {\n    this._ownMaterial(e);\n\n    let i = this._id2glMaterialRef.get(r, e.id);\n\n    if (t(i)) {\n      const t = e.createGLMaterial({\n        material: e,\n        techniqueRep: this._techniqueRepository,\n        textureRep: this._textureRepository,\n        output: r\n      });\n      i = new n(t), this._id2glMaterialRef.set(r, e.id, i);\n    }\n\n    return i.ref(), i.glMaterial;\n  }\n\n  release(e, t) {\n    const s = this._id2glMaterialRef.get(t, e.id);\n\n    r(s) && (s.unref(), s.referenced || (i(s.glMaterial), this._id2glMaterialRef.delete(t, e.id)));\n  }\n\n  _ownMaterial(e) {\n    r(e.repository) && e.repository !== this && a.error(\"Material is already owned by a different material repository\"), e.repository = this;\n  }\n\n}\n\nclass n {\n  constructor(e) {\n    this.glMaterial = e, this.refCnt = 0;\n  }\n\n  ref() {\n    ++this.refCnt;\n  }\n\n  unref() {\n    --this.refCnt, o(this.refCnt >= 0);\n  }\n\n  get referenced() {\n    return this.refCnt > 0;\n  }\n\n}\n\nexport { l as GLMaterialRepository };","map":{"version":3,"names":["e","isNone","t","isSome","r","disposeMaybe","i","NestedMap","s","assert","o","a","getLogger","l","constructor","_textureRepository","_techniqueRepository","materialChanged","requestRender","_id2glMaterialRef","dispose","acquire","_ownMaterial","get","id","createGLMaterial","material","techniqueRep","textureRep","output","n","set","ref","glMaterial","release","unref","referenced","delete","repository","error","refCnt","GLMaterialRepository"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{isNone as t,isSome as r,disposeMaybe as i}from\"../../../../core/maybe.js\";import{NestedMap as s}from\"../../../../core/NestedMap.js\";import{assert as o}from\"./Util.js\";const a=e.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRepository\");class l{constructor(e,t,r,i){this._textureRepository=e,this._techniqueRepository=t,this.materialChanged=r,this.requestRender=i,this._id2glMaterialRef=new s}dispose(){this._textureRepository.dispose()}acquire(e,r){this._ownMaterial(e);let i=this._id2glMaterialRef.get(r,e.id);if(t(i)){const t=e.createGLMaterial({material:e,techniqueRep:this._techniqueRepository,textureRep:this._textureRepository,output:r});i=new n(t),this._id2glMaterialRef.set(r,e.id,i)}return i.ref(),i.glMaterial}release(e,t){const s=this._id2glMaterialRef.get(t,e.id);r(s)&&(s.unref(),s.referenced||(i(s.glMaterial),this._id2glMaterialRef.delete(t,e.id)))}_ownMaterial(e){r(e.repository)&&e.repository!==this&&a.error(\"Material is already owned by a different material repository\"),e.repository=this}}class n{constructor(e){this.glMaterial=e,this.refCnt=0}ref(){++this.refCnt}unref(){--this.refCnt,o(this.refCnt>=0)}get referenced(){return this.refCnt>0}}export{l as GLMaterialRepository};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}