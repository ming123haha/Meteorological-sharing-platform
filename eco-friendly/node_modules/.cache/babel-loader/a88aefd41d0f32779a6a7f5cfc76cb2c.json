{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isNone as e } from \"../../../../../core/maybe.js\";\nimport { isAborted as t, throwIfAborted as s } from \"../../../../../core/promiseUtils.js\";\nimport { c as a } from \"../../../../../chunks/mat4f64.js\";\nimport { b as n, e as i, m as r } from \"../../../../../chunks/vec3.js\";\nimport { c as o } from \"../../../../../chunks/vec3f64.js\";\nimport { c as l } from \"../../../../../chunks/vec4f64.js\";\nimport c from \"../../../support/debugFlags.js\";\nimport { glLayout as h } from \"../../../support/buffer/glUtil.js\";\nimport { Camera as d } from \"../Camera.js\";\nimport { Default3D as _ } from \"../DefaultVertexAttributeLocations.js\";\nimport { IntersectorType as u } from \"../IntersectorInterfaces.js\";\nimport m from \"../Octree.js\";\nimport { RenderPass as f } from \"../RenderPass.js\";\nimport { RenderSlot as p } from \"../RenderSlot.js\";\nimport { assert as g } from \"../Util.js\";\nimport { InstanceData as I, StateFlags as D } from \"./InstanceData.js\";\nimport { InstanceOctree as C } from \"./InstanceOctree.js\";\nimport { LevelSelector as R } from \"./LevelSelector.js\";\nimport { LodLevel as v } from \"./LodLevel.js\";\nimport { RenderInstanceData as E } from \"./RenderInstanceData.js\";\nimport { getInstanceBufferLayout as y } from \"../../materials/DefaultMaterial.js\";\nimport { colorMixModes as A } from \"../../materials/internal/MaterialUtil.js\";\nimport { encodeDoubleVec3 as b } from \"../../materials/renderers/utils.js\";\nimport { DefaultMaterialDrawParameters as T } from \"../../shaders/DefaultMaterialTechnique.js\";\nimport { bindVertexBufferLayout as L, unbindVertexBufferLayout as S } from \"../../../../webgl/Util.js\";\n\nlet O = e => {\n  const t = e.baseBoundingSphere.radius,\n        s = e.levels.map(e => e.minScreenSpaceRadius);\n  return new R(t, s);\n};\n\nfunction U(e) {\n  O = e;\n}\n\nclass M {\n  constructor(e, t, s, a) {\n    this.type = u.LOD, this.isGround = !1, this._levels = [], this._defaultRenderInstanceData = [], this._highlightRenderInstanceData = [], this._instanceIndex = 0, this._slicePlane = !1, this._enableLevelSelection = !0, this._lastCamera = new d(), this._updateCyclesWithStaticCamera = -1, this._needFullCycle = !1, this.slots = [p.OPAQUE_MATERIAL, p.TRANSPARENT_MATERIAL], this.canRender = !0, this._symbol = e, this._optionalFields = t, this._metadata = s, this._instanceBufferLayout = y({\n      instancedDoublePrecision: !0,\n      instanced: t\n    }), this._glInstanceBufferLayout = h(this._instanceBufferLayout, 1), this._instanceData = new I(this._optionalFields, a), this._instanceData.on(\"instance-added\", () => this._requestUpdateCycle()), this._instanceData.on(\"instance-removed\", () => this._requestUpdateCycle()), this._instanceData.on(\"instance-transform-changed\", e => {\n      this._requestUpdateCycle(), this._metadata.notifyGraphicGeometryChanged(e.index);\n    }), this._instanceData.on(\"instance-visibility-changed\", e => {\n      this._requestUpdateCycle(!0), this._metadata.notifyGraphicVisibilityChanged(e.index);\n    }), this._instanceData.on(\"instance-highlight-changed\", () => this._requestUpdateCycle(!0)), this._enableLevelSelection = this._symbol.levels.length > 1;\n  }\n\n  get levels() {\n    return this._levels;\n  }\n\n  get baseBoundingBox() {\n    return this._levels[this._levels.length - 1].boundingBox;\n  }\n\n  get baseBoundingSphere() {\n    return this._levels[this._levels.length - 1].boundingSphere;\n  }\n\n  get baseMaterial() {\n    return this._levels[this._levels.length - 1].components[0].material;\n  }\n\n  get slicePlaneEnabled() {\n    return this._slicePlane;\n  }\n\n  set slicePlaneEnabled(e) {\n    this._slicePlane = e;\n  }\n\n  get layerUid() {\n    return this._metadata.layerUid;\n  }\n\n  get instanceData() {\n    return this._instanceData;\n  }\n\n  get memoryUsage() {\n    const e = {\n      cpu: 0,\n      gpu: 0\n    };\n    return this._defaultRenderInstanceData.forEach(t => {\n      const s = t.memoryUsage;\n      e.cpu += s.cpu, e.gpu += s.gpu;\n    }), this._highlightRenderInstanceData.forEach(t => {\n      const s = t.memoryUsage;\n      e.cpu += s.cpu, e.gpu += s.gpu;\n    }), e;\n  }\n\n  get renderStats() {\n    const e = this._instanceData.size,\n          t = [];\n    return this._levels.forEach((e, s) => {\n      const a = this._defaultRenderInstanceData[s],\n            n = this._highlightRenderInstanceData[s],\n            i = a.size + n.size,\n            r = e.triangleCount;\n      t.push({\n        renderedInstances: i,\n        renderedTriangles: i * r,\n        trianglesPerInstance: r\n      });\n    }), {\n      totalInstances: e,\n      renderedInstances: t.reduce((e, t) => e + t.renderedInstances, 0),\n      renderedTriangles: t.reduce((e, t) => e + t.renderedTriangles, 0),\n      levels: t\n    };\n  }\n\n  async initializeRenderContext(e, a) {\n    this._context = e;\n    const n = e.renderContext.rctx,\n          i = await Promise.allSettled(this._symbol.levels.map(t => (this._defaultRenderInstanceData.push(new E(n, this._instanceBufferLayout)), this._highlightRenderInstanceData.push(new E(n, this._instanceBufferLayout)), v.create(e, t, a)))),\n          r = i.map(e => \"fulfilled\" === e.status ? e.value : null).filter(e => e);\n\n    if (t(a) || r.length !== i.length) {\n      r.forEach(e => e.destroy()), s(a);\n\n      for (const e of i) if (\"rejected\" === e.status) throw e.reason;\n    }\n\n    this._levels = r, this._levelSelector = O(this);\n  }\n\n  uninitializeRenderContext() {\n    this._invalidateOctree(), this._levels.forEach(e => e.destroy()), this._defaultRenderInstanceData.forEach(e => e.destroy()), this._highlightRenderInstanceData.forEach(e => e.destroy());\n  }\n\n  get needsTransparentPass() {\n    return this._levels.some(e => e.components.some(e => e.material.requiresSlot(p.TRANSPARENT_MATERIAL)));\n  }\n\n  get needsHighlight() {\n    return this._highlightRenderInstanceData.some(e => e.size > 0);\n  }\n\n  prepareRender(e) {\n    if (c.LOD_INSTANCE_RENDERER_DISABLE_UPDATES) return;\n\n    if (this._enableLevelSelection) {\n      const t = e.bindParameters.contentCamera.equals(this._lastCamera);\n      this._lastCamera.copyFrom(e.bindParameters.contentCamera), t || this._requestUpdateCycle();\n    }\n\n    const t = this._needFullCycle ? this._instanceData.size : 2e3;\n    this._needFullCycle = !1, this._updateInstances(e.bindParameters.contentCamera, t), this.needsUpdates && this._context.requestRender();\n  }\n\n  render(e) {\n    if (!this.baseMaterial.isVisible() || !this.baseMaterial.isVisibleInPass(e.pass)) return;\n    e.rctx.bindVAO();\n    const t = e.pass !== f.MATERIAL_HIGHLIGHT && e.pass !== f.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT,\n          s = e.pass !== f.MATERIAL_DEPTH_SHADOWMAP_DEFAULT;\n    t && this._renderComponents(e, this._defaultRenderInstanceData), s && this._renderComponents(e, this._highlightRenderInstanceData);\n  }\n\n  intersect(e, t, s, a) {\n    if (!this.baseMaterial.isVisible()) return;\n    const i = o();\n    n(i, a, s);\n\n    const l = n => {\n      this._instanceData.getCombinedModelTransform(n, P), e.transform.set(P), r(F, s, e.transform.inverse), r(w, a, e.transform.inverse);\n\n      const i = this._instanceData.getState(n),\n            o = this._instanceData.getLodLevel(n),\n            l = this._levels.length;\n\n      g(i & D.ACTIVE, \"invalid instance state\"), g(o >= 0 && o < l, \"invaid lod level\"), this._levels[o].intersect(e, t, F, w, n, this._metadata, l);\n    };\n\n    this.baseMaterial.parameters.verticalOffset ? this.octree.forEach(l) : this.octree.forEachAlongRay(s, i, l);\n  }\n\n  queryDepthRange(e) {\n    return this._queryDepthRangeOctree(e);\n  }\n\n  notifyShaderTransformationChanged() {\n    this._invalidateOctree();\n  }\n\n  _requestUpdateCycle(e = !1) {\n    this._updateCyclesWithStaticCamera = -1, e && (this._needFullCycle = !0), this.needsUpdates && this._context.requestRender();\n  }\n\n  get needsUpdates() {\n    return this._instanceData.size > 0 && this._updateCyclesWithStaticCamera < 1;\n  }\n\n  get octree() {\n    return this._octree || (this._octree = this._buildOctree()), this._octree;\n  }\n\n  _invalidateOctree() {\n    this._octree && (this._octree.destroy(), this._octree = null);\n  }\n\n  _buildOctree() {\n    const e = new C(this._instanceData, this.baseBoundingSphere),\n          t = this._instanceData,\n          s = t.view ? t.view.state : null;\n\n    for (let a = 0; a < this._instanceData.capacity; ++a) {\n      s.get(a) & D.ACTIVE && e.addInstance(a);\n    }\n\n    return e;\n  }\n\n  _queryDepthRangeOctree(e) {\n    const t = e.eye,\n          s = e.viewForward,\n          a = this.octree.findClosest(s, m.DepthOrder.FRONT_TO_BACK, e.frustum),\n          r = this.octree.findClosest(s, m.DepthOrder.BACK_TO_FRONT, e.frustum);\n\n    if (null != a && null != r) {\n      this._instanceData.view.boundingSphere.getVec(a, V), n(V, V, t);\n      const o = i(V, s) - V[3];\n      this._instanceData.view.boundingSphere.getVec(r, V), n(V, V, t);\n      const l = i(V, s) + V[3];\n      return {\n        near: Math.max(e.near, o),\n        far: Math.min(e.far, l)\n      };\n    }\n\n    return {\n      near: 1 / 0,\n      far: -1 / 0\n    };\n  }\n\n  _startUpdateCycle() {\n    this._updateCyclesWithStaticCamera++, this._defaultRenderInstanceData.forEach(e => {\n      e.startUpdateCylce();\n    }), this._highlightRenderInstanceData.forEach(e => {\n      e.startUpdateCylce();\n    }), this.needsUpdates && this._context.requestRender();\n  }\n\n  _updateInstances(e, t) {\n    const s = this._enableLevelSelection,\n          a = this._levelSelector;\n    a.updateCamera(e), this._defaultRenderInstanceData.forEach(e => {\n      e.beginUpdate();\n    }), this._highlightRenderInstanceData.forEach(e => {\n      e.beginUpdate();\n    });\n    const n = this._instanceData,\n          i = this._instanceData.view,\n          r = n.size,\n          o = n.capacity;\n    let l = this._instanceIndex;\n    t = Math.min(r, t);\n\n    for (let c = 0; c < t; ++c) {\n      0 === l && this._startUpdateCycle();\n      const e = i.state.get(l);\n      let r = 0;\n\n      if (!(e & D.ALLOCATED)) {\n        l = (l + 1) % o, t++;\n        continue;\n      }\n\n      const c = i.lodLevel.get(l);\n      if (e & D.DEFAULT_ACTIVE && this._defaultRenderInstanceData[c].freeTail(), e & D.HIGHLIGHT_ACTIVE && this._highlightRenderInstanceData[c].freeTail(), e & D.REMOVE) n.freeInstance(l);else if (e & D.VISIBLE) {\n        let t = 0;\n        s && (i.modelOrigin.getVec(l, H), t = a.selectLevel(H, n.getCombinedMedianScaleFactor(l))), r = e & ~(D.ACTIVE | D.TRANSFORM_CHANGED), t >= 0 && (e & D.HIGHLIGHT ? (x(this._highlightRenderInstanceData[t], i, l), r |= D.HIGHLIGHT_ACTIVE) : (x(this._defaultRenderInstanceData[t], i, l), r |= D.DEFAULT_ACTIVE)), i.state.set(l, r), i.lodLevel.set(l, t);\n      } else r = e & ~(D.ACTIVE | D.TRANSFORM_CHANGED), i.state.set(l, r);\n\n      if (this._octree) {\n        const t = !!(e & D.ACTIVE),\n              s = !!(r & D.ACTIVE);\n        !t && s ? this._octree.addInstance(l) : t && !s ? this._octree.removeInstance(l) : t && s && e & D.TRANSFORM_CHANGED && (this._octree.removeInstance(l), this._octree.addInstance(l));\n      }\n\n      l = (l + 1) % o;\n    }\n\n    this._instanceIndex = l, this._defaultRenderInstanceData.forEach(e => {\n      e.endUpdate();\n    }), this._highlightRenderInstanceData.forEach(e => {\n      e.endUpdate();\n    });\n  }\n\n  _renderComponents(e, t) {\n    this.levels.forEach((s, a) => {\n      s.components.forEach(s => {\n        this._renderComponent(e, t[a], s, a);\n      });\n    });\n  }\n\n  _renderComponent(t, s, a, n) {\n    const i = t.bindParameters;\n    if (0 === s.size || !a.material.requiresSlot(i.slot)) return;\n    const {\n      rctx: r,\n      pass: o\n    } = t,\n          l = a.glMaterials.load(r, o);\n    if (e(l)) return;\n    const h = l.beginSlot(i),\n          d = r.bindTechnique(h, a.material.parameters, i);\n    r.bindVAO(a.vao), h.ensureAttributeLocations(a.vao), h.bindDraw(q, i), c.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL && t.pass === f.MATERIAL && (d.setUniform4fv(\"externalColor\", N[Math.min(n, N.length - 1)]), d.setUniform1i(\"colorMixMode\", A.replace));\n\n    const u = r.capabilities.instancing,\n          m = s.capacity,\n          p = s.headIndex,\n          I = s.tailIndex,\n          D = s.firstIndex,\n          C = this._glInstanceBufferLayout,\n          R = (e, t) => {\n      L(r, _, s.buffer, C, e), u.drawArraysInstanced(h.primitiveType, 0, a.vertexCount, t - e), S(r, _, s.buffer, C);\n    };\n\n    a.material.parameters.transparent && null != D ? p > I ? (g(D >= I && D <= p, \"invalid firstIndex\"), R(D, p), R(I, D)) : p < I && (D <= p ? (g(D >= 0 && D <= p, \"invalid firstIndex\"), R(D, p), R(I, m), R(0, D)) : (g(D >= I && D <= m, \"invalid firstIndex\"), R(D, m), R(0, p), R(I, D))) : p > I ? R(I, p) : p < I && (R(0, p), R(I, m)), r.bindVAO(null);\n  }\n\n}\n\nfunction x(e, t, s) {\n  const a = e.allocateHead();\n  j(t, s, e.view, a);\n}\n\nfunction j(e, t, s, a) {\n  b(e.modelOrigin, t, s.modelOriginHi, s.modelOriginLo, a), s.model.copyFrom(a, e.model, t), s.modelNormal.copyFrom(a, e.modelNormal, t), e.color && s.color && s.color.copyFrom(a, e.color, t), e.featureAttribute && s.featureAttribute && s.featureAttribute.copyFrom(a, e.featureAttribute, t);\n}\n\nconst H = o(),\n      V = l(),\n      P = a(),\n      F = o(),\n      w = o(),\n      N = [[1, 0, 1, 1], [0, 0, 1, 1], [0, 1, 0, 1], [1, 1, 0, 1], [1, 0, 0, 1]],\n      q = new T();\nexport { M as LodRenderer, U as setLevelSelectorFactory };","map":{"version":3,"names":["isNone","e","isAborted","t","throwIfAborted","s","c","a","b","n","i","m","r","o","l","glLayout","h","Camera","d","Default3D","_","IntersectorType","u","RenderPass","f","RenderSlot","p","assert","g","InstanceData","I","StateFlags","D","InstanceOctree","C","LevelSelector","R","LodLevel","v","RenderInstanceData","E","getInstanceBufferLayout","y","colorMixModes","A","encodeDoubleVec3","DefaultMaterialDrawParameters","T","bindVertexBufferLayout","L","unbindVertexBufferLayout","S","O","baseBoundingSphere","radius","levels","map","minScreenSpaceRadius","U","M","constructor","type","LOD","isGround","_levels","_defaultRenderInstanceData","_highlightRenderInstanceData","_instanceIndex","_slicePlane","_enableLevelSelection","_lastCamera","_updateCyclesWithStaticCamera","_needFullCycle","slots","OPAQUE_MATERIAL","TRANSPARENT_MATERIAL","canRender","_symbol","_optionalFields","_metadata","_instanceBufferLayout","instancedDoublePrecision","instanced","_glInstanceBufferLayout","_instanceData","on","_requestUpdateCycle","notifyGraphicGeometryChanged","index","notifyGraphicVisibilityChanged","length","baseBoundingBox","boundingBox","boundingSphere","baseMaterial","components","material","slicePlaneEnabled","layerUid","instanceData","memoryUsage","cpu","gpu","forEach","renderStats","size","triangleCount","push","renderedInstances","renderedTriangles","trianglesPerInstance","totalInstances","reduce","initializeRenderContext","_context","renderContext","rctx","Promise","allSettled","create","status","value","filter","destroy","reason","_levelSelector","uninitializeRenderContext","_invalidateOctree","needsTransparentPass","some","requiresSlot","needsHighlight","prepareRender","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","bindParameters","contentCamera","equals","copyFrom","_updateInstances","needsUpdates","requestRender","render","isVisible","isVisibleInPass","pass","bindVAO","MATERIAL_HIGHLIGHT","MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT","MATERIAL_DEPTH_SHADOWMAP_DEFAULT","_renderComponents","intersect","getCombinedModelTransform","P","transform","set","F","inverse","w","getState","getLodLevel","ACTIVE","parameters","verticalOffset","octree","forEachAlongRay","queryDepthRange","_queryDepthRangeOctree","notifyShaderTransformationChanged","_octree","_buildOctree","view","state","capacity","get","addInstance","eye","viewForward","findClosest","DepthOrder","FRONT_TO_BACK","frustum","BACK_TO_FRONT","getVec","V","near","Math","max","far","min","_startUpdateCycle","startUpdateCylce","updateCamera","beginUpdate","ALLOCATED","lodLevel","DEFAULT_ACTIVE","freeTail","HIGHLIGHT_ACTIVE","REMOVE","freeInstance","VISIBLE","modelOrigin","H","selectLevel","getCombinedMedianScaleFactor","TRANSFORM_CHANGED","HIGHLIGHT","x","removeInstance","endUpdate","_renderComponent","slot","glMaterials","load","beginSlot","bindTechnique","vao","ensureAttributeLocations","bindDraw","q","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","MATERIAL","setUniform4fv","N","setUniform1i","replace","capabilities","instancing","headIndex","tailIndex","firstIndex","buffer","drawArraysInstanced","primitiveType","vertexCount","transparent","allocateHead","j","modelOriginHi","modelOriginLo","model","modelNormal","color","featureAttribute","LodRenderer","setLevelSelectorFactory"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";import{isAborted as t,throwIfAborted as s}from\"../../../../../core/promiseUtils.js\";import{c as a}from\"../../../../../chunks/mat4f64.js\";import{b as n,e as i,m as r}from\"../../../../../chunks/vec3.js\";import{c as o}from\"../../../../../chunks/vec3f64.js\";import{c as l}from\"../../../../../chunks/vec4f64.js\";import c from\"../../../support/debugFlags.js\";import{glLayout as h}from\"../../../support/buffer/glUtil.js\";import{Camera as d}from\"../Camera.js\";import{Default3D as _}from\"../DefaultVertexAttributeLocations.js\";import{IntersectorType as u}from\"../IntersectorInterfaces.js\";import m from\"../Octree.js\";import{RenderPass as f}from\"../RenderPass.js\";import{RenderSlot as p}from\"../RenderSlot.js\";import{assert as g}from\"../Util.js\";import{InstanceData as I,StateFlags as D}from\"./InstanceData.js\";import{InstanceOctree as C}from\"./InstanceOctree.js\";import{LevelSelector as R}from\"./LevelSelector.js\";import{LodLevel as v}from\"./LodLevel.js\";import{RenderInstanceData as E}from\"./RenderInstanceData.js\";import{getInstanceBufferLayout as y}from\"../../materials/DefaultMaterial.js\";import{colorMixModes as A}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as b}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as T}from\"../../shaders/DefaultMaterialTechnique.js\";import{bindVertexBufferLayout as L,unbindVertexBufferLayout as S}from\"../../../../webgl/Util.js\";let O=e=>{const t=e.baseBoundingSphere.radius,s=e.levels.map((e=>e.minScreenSpaceRadius));return new R(t,s)};function U(e){O=e}class M{constructor(e,t,s,a){this.type=u.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=[],this._highlightRenderInstanceData=[],this._instanceIndex=0,this._slicePlane=!1,this._enableLevelSelection=!0,this._lastCamera=new d,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.slots=[p.OPAQUE_MATERIAL,p.TRANSPARENT_MATERIAL],this.canRender=!0,this._symbol=e,this._optionalFields=t,this._metadata=s,this._instanceBufferLayout=y({instancedDoublePrecision:!0,instanced:t}),this._glInstanceBufferLayout=h(this._instanceBufferLayout,1),this._instanceData=new I(this._optionalFields,a),this._instanceData.on(\"instance-added\",(()=>this._requestUpdateCycle())),this._instanceData.on(\"instance-removed\",(()=>this._requestUpdateCycle())),this._instanceData.on(\"instance-transform-changed\",(e=>{this._requestUpdateCycle(),this._metadata.notifyGraphicGeometryChanged(e.index)})),this._instanceData.on(\"instance-visibility-changed\",(e=>{this._requestUpdateCycle(!0),this._metadata.notifyGraphicVisibilityChanged(e.index)})),this._instanceData.on(\"instance-highlight-changed\",(()=>this._requestUpdateCycle(!0))),this._enableLevelSelection=this._symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerUid(){return this._metadata.layerUid}get instanceData(){return this._instanceData}get memoryUsage(){const e={cpu:0,gpu:0};return this._defaultRenderInstanceData.forEach((t=>{const s=t.memoryUsage;e.cpu+=s.cpu,e.gpu+=s.gpu})),this._highlightRenderInstanceData.forEach((t=>{const s=t.memoryUsage;e.cpu+=s.cpu,e.gpu+=s.gpu})),e}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,s)=>{const a=this._defaultRenderInstanceData[s],n=this._highlightRenderInstanceData[s],i=a.size+n.size,r=e.triangleCount;t.push({renderedInstances:i,renderedTriangles:i*r,trianglesPerInstance:r})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}async initializeRenderContext(e,a){this._context=e;const n=e.renderContext.rctx,i=await Promise.allSettled(this._symbol.levels.map((t=>(this._defaultRenderInstanceData.push(new E(n,this._instanceBufferLayout)),this._highlightRenderInstanceData.push(new E(n,this._instanceBufferLayout)),v.create(e,t,a))))),r=i.map((e=>\"fulfilled\"===e.status?e.value:null)).filter((e=>e));if(t(a)||r.length!==i.length){r.forEach((e=>e.destroy())),s(a);for(const e of i)if(\"rejected\"===e.status)throw e.reason}this._levels=r,this._levelSelector=O(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceData.forEach((e=>e.destroy()))}get needsTransparentPass(){return this._levels.some((e=>e.components.some((e=>e.material.requiresSlot(p.TRANSPARENT_MATERIAL)))))}get needsHighlight(){return this._highlightRenderInstanceData.some((e=>e.size>0))}prepareRender(e){if(c.LOD_INSTANCE_RENDERER_DISABLE_UPDATES)return;if(this._enableLevelSelection){const t=e.bindParameters.contentCamera.equals(this._lastCamera);this._lastCamera.copyFrom(e.bindParameters.contentCamera),t||this._requestUpdateCycle()}const t=this._needFullCycle?this._instanceData.size:2e3;this._needFullCycle=!1,this._updateInstances(e.bindParameters.contentCamera,t),this.needsUpdates&&this._context.requestRender()}render(e){if(!this.baseMaterial.isVisible()||!this.baseMaterial.isVisibleInPass(e.pass))return;e.rctx.bindVAO();const t=e.pass!==f.MATERIAL_HIGHLIGHT&&e.pass!==f.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT,s=e.pass!==f.MATERIAL_DEPTH_SHADOWMAP_DEFAULT;t&&this._renderComponents(e,this._defaultRenderInstanceData),s&&this._renderComponents(e,this._highlightRenderInstanceData)}intersect(e,t,s,a){if(!this.baseMaterial.isVisible())return;const i=o();n(i,a,s);const l=n=>{this._instanceData.getCombinedModelTransform(n,P),e.transform.set(P),r(F,s,e.transform.inverse),r(w,a,e.transform.inverse);const i=this._instanceData.getState(n),o=this._instanceData.getLodLevel(n),l=this._levels.length;g(i&D.ACTIVE,\"invalid instance state\"),g(o>=0&&o<l,\"invaid lod level\"),this._levels[o].intersect(e,t,F,w,n,this._metadata,l)};this.baseMaterial.parameters.verticalOffset?this.octree.forEach(l):this.octree.forEachAlongRay(s,i,l)}queryDepthRange(e){return this._queryDepthRangeOctree(e)}notifyShaderTransformationChanged(){this._invalidateOctree()}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,e&&(this._needFullCycle=!0),this.needsUpdates&&this._context.requestRender()}get needsUpdates(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}get octree(){return this._octree||(this._octree=this._buildOctree()),this._octree}_invalidateOctree(){this._octree&&(this._octree.destroy(),this._octree=null)}_buildOctree(){const e=new C(this._instanceData,this.baseBoundingSphere),t=this._instanceData,s=t.view?t.view.state:null;for(let a=0;a<this._instanceData.capacity;++a){s.get(a)&D.ACTIVE&&e.addInstance(a)}return e}_queryDepthRangeOctree(e){const t=e.eye,s=e.viewForward,a=this.octree.findClosest(s,m.DepthOrder.FRONT_TO_BACK,e.frustum),r=this.octree.findClosest(s,m.DepthOrder.BACK_TO_FRONT,e.frustum);if(null!=a&&null!=r){this._instanceData.view.boundingSphere.getVec(a,V),n(V,V,t);const o=i(V,s)-V[3];this._instanceData.view.boundingSphere.getVec(r,V),n(V,V,t);const l=i(V,s)+V[3];return{near:Math.max(e.near,o),far:Math.min(e.far,l)}}return{near:1/0,far:-1/0}}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._defaultRenderInstanceData.forEach((e=>{e.startUpdateCylce()})),this._highlightRenderInstanceData.forEach((e=>{e.startUpdateCylce()})),this.needsUpdates&&this._context.requestRender()}_updateInstances(e,t){const s=this._enableLevelSelection,a=this._levelSelector;a.updateCamera(e),this._defaultRenderInstanceData.forEach((e=>{e.beginUpdate()})),this._highlightRenderInstanceData.forEach((e=>{e.beginUpdate()}));const n=this._instanceData,i=this._instanceData.view,r=n.size,o=n.capacity;let l=this._instanceIndex;t=Math.min(r,t);for(let c=0;c<t;++c){0===l&&this._startUpdateCycle();const e=i.state.get(l);let r=0;if(!(e&D.ALLOCATED)){l=(l+1)%o,t++;continue}const c=i.lodLevel.get(l);if(e&D.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[c].freeTail(),e&D.HIGHLIGHT_ACTIVE&&this._highlightRenderInstanceData[c].freeTail(),e&D.REMOVE)n.freeInstance(l);else if(e&D.VISIBLE){let t=0;s&&(i.modelOrigin.getVec(l,H),t=a.selectLevel(H,n.getCombinedMedianScaleFactor(l))),r=e&~(D.ACTIVE|D.TRANSFORM_CHANGED),t>=0&&(e&D.HIGHLIGHT?(x(this._highlightRenderInstanceData[t],i,l),r|=D.HIGHLIGHT_ACTIVE):(x(this._defaultRenderInstanceData[t],i,l),r|=D.DEFAULT_ACTIVE)),i.state.set(l,r),i.lodLevel.set(l,t)}else r=e&~(D.ACTIVE|D.TRANSFORM_CHANGED),i.state.set(l,r);if(this._octree){const t=!!(e&D.ACTIVE),s=!!(r&D.ACTIVE);!t&&s?this._octree.addInstance(l):t&&!s?this._octree.removeInstance(l):t&&s&&e&D.TRANSFORM_CHANGED&&(this._octree.removeInstance(l),this._octree.addInstance(l))}l=(l+1)%o}this._instanceIndex=l,this._defaultRenderInstanceData.forEach((e=>{e.endUpdate()})),this._highlightRenderInstanceData.forEach((e=>{e.endUpdate()}))}_renderComponents(e,t){this.levels.forEach(((s,a)=>{s.components.forEach((s=>{this._renderComponent(e,t[a],s,a)}))}))}_renderComponent(t,s,a,n){const i=t.bindParameters;if(0===s.size||!a.material.requiresSlot(i.slot))return;const{rctx:r,pass:o}=t,l=a.glMaterials.load(r,o);if(e(l))return;const h=l.beginSlot(i),d=r.bindTechnique(h,a.material.parameters,i);r.bindVAO(a.vao),h.ensureAttributeLocations(a.vao),h.bindDraw(q,i),c.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&t.pass===f.MATERIAL&&(d.setUniform4fv(\"externalColor\",N[Math.min(n,N.length-1)]),d.setUniform1i(\"colorMixMode\",A.replace));const u=r.capabilities.instancing,m=s.capacity,p=s.headIndex,I=s.tailIndex,D=s.firstIndex,C=this._glInstanceBufferLayout,R=(e,t)=>{L(r,_,s.buffer,C,e),u.drawArraysInstanced(h.primitiveType,0,a.vertexCount,t-e),S(r,_,s.buffer,C)};a.material.parameters.transparent&&null!=D?p>I?(g(D>=I&&D<=p,\"invalid firstIndex\"),R(D,p),R(I,D)):p<I&&(D<=p?(g(D>=0&&D<=p,\"invalid firstIndex\"),R(D,p),R(I,m),R(0,D)):(g(D>=I&&D<=m,\"invalid firstIndex\"),R(D,m),R(0,p),R(I,D))):p>I?R(I,p):p<I&&(R(0,p),R(I,m)),r.bindVAO(null)}}function x(e,t,s){const a=e.allocateHead();j(t,s,e.view,a)}function j(e,t,s,a){b(e.modelOrigin,t,s.modelOriginHi,s.modelOriginLo,a),s.model.copyFrom(a,e.model,t),s.modelNormal.copyFrom(a,e.modelNormal,t),e.color&&s.color&&s.color.copyFrom(a,e.color,t),e.featureAttribute&&s.featureAttribute&&s.featureAttribute.copyFrom(a,e.featureAttribute,t)}const H=o(),V=l(),P=a(),F=o(),w=o(),N=[[1,0,1,1],[0,0,1,1],[0,1,0,1],[1,1,0,1],[1,0,0,1]],q=new T;export{M as LodRenderer,U as setLevelSelectorFactory};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}