{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Accessor.js\";\nimport i from \"../../core/Handles.js\";\nimport { on as s, when as o, pausable as a } from \"../../core/reactiveUtils.js\";\nimport { property as n } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../core/accessorSupport/decorators/subclass.js\";\nlet r = class extends t {\n  constructor(e) {\n    super(e), this._viewpointHandle = null, this._handles = new i(), this.group = null;\n  }\n\n  initialize() {\n    this._handles.add(s(() => this.view?.ui, \"expand\", e => {\n      const {\n        target: t\n      } = e;\n      t && t !== this && t.expanded && t.group && t.group === this.group && this._collapse();\n    }));\n  }\n\n  destroy() {\n    this._viewpointHandle = null, this.view = null, this._handles.destroy(), this._handles = null;\n  }\n\n  set autoCollapse(e) {\n    this._set(\"autoCollapse\", e), this._watchViewpoint();\n  }\n\n  set expanded(e) {\n    const t = !!e;\n\n    this._set(\"expanded\", t);\n\n    const i = this.get(\"view.ui\");\n    i && i.emit(\"expand\", {\n      target: this\n    }), this._viewpointHandleChange(t);\n  }\n\n  get state() {\n    return this.get(\"view.ready\") ? \"ready\" : \"disabled\";\n  }\n\n  set view(e) {\n    this._get(\"view\") !== e && (this._set(\"view\", e), e && o(() => e.ready, () => {\n      this.view === e && this._watchViewpoint();\n    }, {\n      once: !0,\n      initial: !0\n    }));\n  }\n\n  _viewpointHandleChange(e) {\n    this._viewpointHandle && (e ? o(() => this.view.stationary, () => this._viewpointHandle.resume(), {\n      once: !0,\n      initial: !0\n    }) : this._viewpointHandle.pause());\n  }\n\n  _watchViewpoint() {\n    const e = \"viewpoint\";\n    this._handles.remove(e), this._viewpointHandle = null;\n    const {\n      autoCollapse: t,\n      view: i\n    } = this;\n\n    if (i && t) {\n      const t = a(() => \"3d\" === i.type ? i.camera : i.viewpoint, () => this._collapse());\n      this._handles.add(t, e), this._viewpointHandle = t;\n    }\n  }\n\n  _collapse() {\n    this.expanded = !1;\n  }\n\n};\ne([n({\n  value: !1\n})], r.prototype, \"autoCollapse\", null), e([n({\n  value: !1\n})], r.prototype, \"expanded\", null), e([n()], r.prototype, \"group\", void 0), e([n({\n  readOnly: !0\n})], r.prototype, \"state\", null), e([n({\n  value: null\n})], r.prototype, \"view\", null), r = e([l(\"esri.widgets.Expand.ExpandViewModel\")], r);\nconst p = r;\nexport { p as default };","map":{"version":3,"names":["_","e","t","i","on","s","when","o","pausable","a","property","n","subclass","l","r","constructor","_viewpointHandle","_handles","group","initialize","add","view","ui","target","expanded","_collapse","destroy","autoCollapse","_set","_watchViewpoint","get","emit","_viewpointHandleChange","state","_get","ready","once","initial","stationary","resume","pause","remove","type","camera","viewpoint","value","prototype","readOnly","p","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/Expand/ExpandViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import i from\"../../core/Handles.js\";import{on as s,when as o,pausable as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";let r=class extends t{constructor(e){super(e),this._viewpointHandle=null,this._handles=new i,this.group=null}initialize(){this._handles.add(s((()=>this.view?.ui),\"expand\",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set(\"autoCollapse\",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set(\"expanded\",t);const i=this.get(\"view.ui\");i&&i.emit(\"expand\",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get(\"view.ready\")?\"ready\":\"disabled\"}set view(e){this._get(\"view\")!==e&&(this._set(\"view\",e),e&&o((()=>e.ready),(()=>{this.view===e&&this._watchViewpoint()}),{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?o((()=>this.view.stationary),(()=>this._viewpointHandle.resume()),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e=\"viewpoint\";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const t=a((()=>\"3d\"===i.type?i.camera:i.viewpoint),(()=>this._collapse()));this._handles.add(t,e),this._viewpointHandle=t}}_collapse(){this.expanded=!1}};e([n({value:!1})],r.prototype,\"autoCollapse\",null),e([n({value:!1})],r.prototype,\"expanded\",null),e([n()],r.prototype,\"group\",void 0),e([n({readOnly:!0})],r.prototype,\"state\",null),e([n({value:null})],r.prototype,\"view\",null),r=e([l(\"esri.widgets.Expand.ExpandViewModel\")],r);const p=r;export{p as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}