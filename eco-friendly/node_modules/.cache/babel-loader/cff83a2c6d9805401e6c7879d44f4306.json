{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../core/Collection.js\";\nimport { referenceSetter as t } from \"../core/collectionUtils.js\";\nimport s from \"../core/Logger.js\";\nimport { isPromiseLike as o } from \"../core/promiseUtils.js\";\nimport { property as a } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../core/accessorSupport/decorators/subclass.js\";\nimport l from \"../layers/Layer.js\";\n\nfunction n(e, r, t) {\n  let s, o;\n  if (e) for (let a = 0, i = e.length; a < i; a++) {\n    if (s = e.getItemAt(a), s[r] === t) return s;\n    if (\"group\" === s?.type && (o = n(s.layers, r, t), o)) return o;\n  }\n}\n\nconst d = d => {\n  let y = class extends d {\n    constructor(...e) {\n      super(...e), this.layers = new r();\n\n      const t = e => {\n        e.parent && \"remove\" in e.parent && e.parent.remove(e);\n      },\n            o = e => {\n        e.parent = this, this.layerAdded(e), \"elevation\" !== e.type && \"base-elevation\" !== e.type || s.getLogger(this.declaredClass).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`);\n      },\n            a = e => {\n        e.parent = null, this.layerRemoved(e);\n      };\n\n      this.layers.on(\"before-add\", e => t(e.item)), this.layers.on(\"after-add\", e => o(e.item)), this.layers.on(\"after-remove\", e => a(e.item));\n    }\n\n    destroy() {\n      const e = this.layers.removeAll();\n\n      for (const r of e) this.layerRemoved(r), r.destroy();\n\n      this.layers.destroy();\n    }\n\n    set layers(e) {\n      this._set(\"layers\", t(e, this._get(\"layers\")));\n    }\n\n    add(e, r) {\n      const t = this.layers;\n\n      if (r = t.getNextIndex(r), e instanceof l) {\n        const s = e;\n        s.parent === this ? this.reorder(s, r) : t.add(s, r);\n      } else o(e) ? e.then(e => {\n        this.destroyed || this.add(e, r);\n      }) : s.getLogger(this.declaredClass).error(\"#add()\", \"The item being added is not a Layer or a Promise that resolves to a Layer.\");\n    }\n\n    addMany(e, r) {\n      const t = this.layers;\n      r = t.getNextIndex(r), e.slice().forEach(e => {\n        e.parent !== this ? (t.add(e, r), r += 1) : this.reorder(e, r);\n      });\n    }\n\n    findLayerById(e) {\n      return n(this.layers, \"id\", e);\n    }\n\n    findLayerByUid(e) {\n      return n(this.layers, \"uid\", e);\n    }\n\n    remove(e) {\n      return this.layers.remove(e);\n    }\n\n    removeMany(e) {\n      return this.layers.removeMany(e);\n    }\n\n    removeAll() {\n      return this.layers.removeAll();\n    }\n\n    reorder(e, r) {\n      return this.layers.reorder(e, r);\n    }\n\n    layerAdded(e) {}\n\n    layerRemoved(e) {}\n\n  };\n  return e([a()], y.prototype, \"layers\", null), y = e([i(\"esri.support.LayersMixin\")], y), y;\n};\n\nexport { d as LayersMixin };","map":{"version":3,"names":["_","e","r","referenceSetter","t","s","isPromiseLike","o","property","a","subclass","i","l","n","length","getItemAt","type","layers","d","y","constructor","parent","remove","layerAdded","getLogger","declaredClass","error","title","id","layerRemoved","on","item","destroy","removeAll","_set","_get","add","getNextIndex","reorder","then","destroyed","addMany","slice","forEach","findLayerById","findLayerByUid","removeMany","prototype","LayersMixin"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/support/LayersMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../layers/Layer.js\";function n(e,r,t){let s,o;if(e)for(let a=0,i=e.length;a<i;a++){if(s=e.getItemAt(a),s[r]===t)return s;if(\"group\"===s?.type&&(o=n(s.layers,r,t),o))return o}}const d=d=>{let y=class extends d{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&\"remove\"in e.parent&&e.parent.remove(e)},o=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||s.getLogger(this.declaredClass).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on(\"before-add\",(e=>t(e.item))),this.layers.on(\"after-add\",(e=>o(e.item))),this.layers.on(\"after-remove\",(e=>a(e.item)))}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof l){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):s.getLogger(this.declaredClass).error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach((e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r)}))}findLayerById(e){return n(this.layers,\"id\",e)}findLayerByUid(e){return n(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([a()],y.prototype,\"layers\",null),y=e([i(\"esri.support.LayersMixin\")],y),y};export{d as LayersMixin};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}