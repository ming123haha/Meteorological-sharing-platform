{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from \"../../../../request.js\";\nimport e from \"../../../../core/pbf.js\";\n\nclass s {\n  constructor(t) {\n    for (this._metrics = [], this._bitmaps = []; t.next();) switch (t.tag()) {\n      case 1:\n        {\n          const e = t.getMessage();\n\n          for (; e.next();) switch (e.tag()) {\n            case 3:\n              {\n                const t = e.getMessage();\n                let s, a, r, n, i, c, g;\n\n                for (; t.next();) switch (t.tag()) {\n                  case 1:\n                    s = t.getUInt32();\n                    break;\n\n                  case 2:\n                    a = t.getBytes();\n                    break;\n\n                  case 3:\n                    r = t.getUInt32();\n                    break;\n\n                  case 4:\n                    n = t.getUInt32();\n                    break;\n\n                  case 5:\n                    i = t.getSInt32();\n                    break;\n\n                  case 6:\n                    c = t.getSInt32();\n                    break;\n\n                  case 7:\n                    g = t.getUInt32();\n                    break;\n\n                  default:\n                    t.skip();\n                }\n\n                t.release(), s && (this._metrics[s] = {\n                  width: r,\n                  height: n,\n                  left: i,\n                  top: c,\n                  advance: g\n                }, this._bitmaps[s] = a);\n                break;\n              }\n\n            default:\n              e.skip();\n          }\n\n          e.release();\n          break;\n        }\n\n      default:\n        t.skip();\n    }\n  }\n\n  getMetrics(t) {\n    return this._metrics[t];\n  }\n\n  getBitmap(t) {\n    return this._bitmaps[t];\n  }\n\n}\n\nclass a {\n  constructor() {\n    this._ranges = [];\n  }\n\n  getRange(t) {\n    return this._ranges[t];\n  }\n\n  addRange(t, e) {\n    this._ranges[t] = e;\n  }\n\n}\n\nclass r {\n  constructor(t) {\n    this._glyphInfo = {}, this._baseURL = t;\n  }\n\n  getRange(a, r, n) {\n    const i = this._getFontStack(a);\n\n    if (i.getRange(r)) return Promise.resolve();\n\n    const c = 256 * r,\n          g = c + 255,\n          o = this._baseURL.replace(\"{fontstack}\", a).replace(\"{range}\", c + \"-\" + g);\n\n    return t(o, {\n      responseType: \"array-buffer\",\n      ...n\n    }).then(t => {\n      i.addRange(r, new s(new e(new Uint8Array(t.data), new DataView(t.data))));\n    });\n  }\n\n  getGlyph(t, e) {\n    const s = this._getFontStack(t);\n\n    if (!s) return;\n    const a = Math.floor(e / 256);\n    if (a > 256) return;\n    const r = s.getRange(a);\n    return r ? {\n      metrics: r.getMetrics(e),\n      bitmap: r.getBitmap(e)\n    } : void 0;\n  }\n\n  _getFontStack(t) {\n    let e = this._glyphInfo[t];\n    return e || (e = this._glyphInfo[t] = new a()), e;\n  }\n\n}\n\nexport { r as default };","map":{"version":3,"names":["t","e","s","constructor","_metrics","_bitmaps","next","tag","getMessage","a","r","n","i","c","g","getUInt32","getBytes","getSInt32","skip","release","width","height","left","top","advance","getMetrics","getBitmap","_ranges","getRange","addRange","_glyphInfo","_baseURL","_getFontStack","Promise","resolve","o","replace","responseType","then","Uint8Array","data","DataView","getGlyph","Math","floor","metrics","bitmap","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../../../request.js\";import e from\"../../../../core/pbf.js\";class s{constructor(t){for(this._metrics=[],this._bitmaps=[];t.next();)switch(t.tag()){case 1:{const e=t.getMessage();for(;e.next();)switch(e.tag()){case 3:{const t=e.getMessage();let s,a,r,n,i,c,g;for(;t.next();)switch(t.tag()){case 1:s=t.getUInt32();break;case 2:a=t.getBytes();break;case 3:r=t.getUInt32();break;case 4:n=t.getUInt32();break;case 5:i=t.getSInt32();break;case 6:c=t.getSInt32();break;case 7:g=t.getUInt32();break;default:t.skip()}t.release(),s&&(this._metrics[s]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[s]=a);break}default:e.skip()}e.release();break}default:t.skip()}}getMetrics(t){return this._metrics[t]}getBitmap(t){return this._bitmaps[t]}}class a{constructor(){this._ranges=[]}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r,n){const i=this._getFontStack(a);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace(\"{fontstack}\",a).replace(\"{range}\",c+\"-\"+g);return t(o,{responseType:\"array-buffer\",...n}).then((t=>{i.addRange(r,new s(new e(new Uint8Array(t.data),new DataView(t.data))))}))}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256);if(a>256)return;const r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}export{r as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}