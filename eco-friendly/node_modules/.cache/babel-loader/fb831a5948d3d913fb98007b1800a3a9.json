{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport o from \"../../core/Accessor.js\";\nimport e from \"../../core/Handles.js\";\nimport { removeMaybe as r } from \"../../core/maybe.js\";\nimport { watch as s, initial as i } from \"../../core/reactiveUtils.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { GoToMixin as h } from \"../support/GoTo.js\";\nconst p = \"esri.widgets.CompassViewModel\";\nlet d = class extends h(o) {\n  constructor(t) {\n    super(t), this._handles = new e(), this.orientation = {\n      x: 0,\n      y: 0,\n      z: 0\n    }, this.view = null, this._updateForCamera = this._updateForCamera.bind(this), this._updateForRotation = this._updateForRotation.bind(this), this._updateRotationWatcher = this._updateRotationWatcher.bind(this);\n  }\n\n  initialize() {\n    this._handles.add(s(() => this.view, this._updateRotationWatcher, i));\n  }\n\n  destroy() {\n    this._handles = r(this._handles), this.view = null;\n  }\n\n  get canShowNorth() {\n    const t = this.get(\"view.spatialReference\");\n    return !(!t || !t.isWebMercator && !t.isGeographic);\n  }\n\n  get state() {\n    return this.get(\"view.ready\") ? this.canShowNorth ? \"compass\" : \"rotation\" : \"disabled\";\n  }\n\n  reset() {\n    if (!this.get(\"view.ready\")) return;\n    const t = {};\n    \"2d\" === this.view.type ? t.rotation = 0 : t.heading = 0, this.callGoTo({\n      target: t\n    });\n  }\n\n  _updateForRotation(t) {\n    null != t && (this.orientation = {\n      z: t\n    });\n  }\n\n  _updateForCamera(t) {\n    if (!t) return;\n    const o = -t.heading;\n    this.orientation = {\n      x: 0,\n      y: 0,\n      z: o\n    };\n  }\n\n  _updateRotationWatcher(t) {\n    this._handles.removeAll(), t && this._handles.add(\"2d\" === t.type ? s(() => t?.rotation, this._updateForRotation, i) : s(() => t?.camera, this._updateForCamera, i));\n  }\n\n};\nt([a({\n  readOnly: !0\n})], d.prototype, \"canShowNorth\", null), t([a()], d.prototype, \"orientation\", void 0), t([a({\n  readOnly: !0\n})], d.prototype, \"state\", null), t([a()], d.prototype, \"view\", void 0), d = t([n(p)], d);\nconst c = d;\nexport { c as default };","map":{"version":3,"names":["_","t","o","e","removeMaybe","r","watch","s","initial","i","property","a","subclass","n","GoToMixin","h","p","d","constructor","_handles","orientation","x","y","z","view","_updateForCamera","bind","_updateForRotation","_updateRotationWatcher","initialize","add","destroy","canShowNorth","get","isWebMercator","isGeographic","state","reset","type","rotation","heading","callGoTo","target","removeAll","camera","readOnly","prototype","c","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/Compass/CompassViewModel.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import o from\"../../core/Accessor.js\";import e from\"../../core/Handles.js\";import{removeMaybe as r}from\"../../core/maybe.js\";import{watch as s,initial as i}from\"../../core/reactiveUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{GoToMixin as h}from\"../support/GoTo.js\";const p=\"esri.widgets.CompassViewModel\";let d=class extends(h(o)){constructor(t){super(t),this._handles=new e,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(s((()=>this.view),this._updateRotationWatcher,i))}destroy(){this._handles=r(this._handles),this.view=null}get canShowNorth(){const t=this.get(\"view.spatialReference\");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get(\"view.ready\")?this.canShowNorth?\"compass\":\"rotation\":\"disabled\"}reset(){if(!this.get(\"view.ready\"))return;const t={};\"2d\"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){null!=t&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const o=-t.heading;this.orientation={x:0,y:0,z:o}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add(\"2d\"===t.type?s((()=>t?.rotation),this._updateForRotation,i):s((()=>t?.camera),this._updateForCamera,i))}};t([a({readOnly:!0})],d.prototype,\"canShowNorth\",null),t([a()],d.prototype,\"orientation\",void 0),t([a({readOnly:!0})],d.prototype,\"state\",null),t([a()],d.prototype,\"view\",void 0),d=t([n(p)],d);const c=d;export{c as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}