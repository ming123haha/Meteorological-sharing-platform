{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as t, assertIsSome as e, isSome as n, unwrap as i } from \"../../../core/maybe.js\";\nimport r from \"../PixelBlock.js\";\nimport { stretchTypeFunctionEnum as s } from \"../../../renderers/support/stretchRendererUtils.js\";\nconst o = {\n  u1: [0, 1],\n  u2: [0, 3],\n  u4: [0, 15],\n  u8: [0, 255],\n  s8: [-128, 127],\n  u16: [0, 65535],\n  s16: [-32768, 32767],\n  u32: [0, 4294967295],\n  s32: [-2147483648, 2147483647],\n  f32: [-34e38, 34e38],\n  f64: [-Number.MAX_VALUE, Number.MAX_VALUE]\n},\n      a = 1,\n      f = [.299, .587, .114];\n\nfunction l(t, e = 256) {\n  e = Math.min(e, 256);\n  const {\n    size: n,\n    counts: i\n  } = t,\n        r = new Uint8Array(n),\n        s = i.reduce((t, n) => t + n / e, 0);\n  let o = 0,\n      a = 0,\n      f = 0,\n      l = s;\n\n  for (let u = 0; u < n; u++) if (f += i[u], !(u < n - 1 && f + i[u + 1] < l)) {\n    for (; o < e - 1 && l < f;) o++, l += s;\n\n    for (let t = a; t <= u; t++) r[t] = o;\n\n    a = u + 1;\n  }\n\n  for (let u = a; u < n; u++) r[u] = e - 1;\n\n  return r;\n}\n\nfunction u(t) {\n  const {\n    minCutOff: e,\n    maxCutOff: n,\n    gamma: i,\n    pixelType: r\n  } = t,\n        s = t.outMin || 0,\n        o = t.outMax || 255;\n  if (![\"u8\", \"u16\", \"s8\", \"s16\"].includes(r)) return null;\n  const a = e.length;\n  let f,\n      l,\n      u = 0;\n  \"s8\" === r ? u = -127 : \"s16\" === r && (u = -32767);\n  let c = 256;\n  [\"u16\", \"s16\"].includes(r) && (c = 65536);\n  const h = [],\n        p = o - s;\n\n  for (f = 0; f < a; f++) h[f] = n[f] - e[f], n[f], e[f];\n\n  const g = i && i.length >= a,\n        x = [];\n  if (g) for (f = 0; f < a; f++) i[f] > 1 ? i[f] > 2 ? x[f] = 6.5 + (i[f] - 2) ** 2.5 : x[f] = 6.5 + 100 * (2 - i[f]) ** 4 : x[f] = 1;\n  let M;\n  const d = [];\n  let y, b, O;\n  if (g) for (f = 0; f < a; f++) {\n    for (O = [], l = 0; l < c; l++) y = l + u, M = (y - e[f]) / h[f], b = 1, i[f] > 1 && (b -= (1 / p) ** (M * x[f])), y < n[f] && y > e[f] ? O[l] = Math.floor(b * p * M ** (1 / i[f])) + s : y >= n[f] ? O[l] = o : O[l] = s;\n\n    d[f] = O;\n  } else for (f = 0; f < a; f++) {\n    for (O = [], l = 0; l < c; l++) y = l + u, y <= e[f] ? O[l] = s : y >= n[f] ? O[l] = o : O[l] = Math.floor((y - e[f]) / h[f] * p) + s;\n\n    d[f] = O;\n  }\n\n  if (null != t.contrastOffset) {\n    const e = m(t.contrastOffset, t.brightnessOffset);\n\n    for (f = 0; f < a; f++) for (O = d[f], l = 0; l < c; l++) O[l] = e[O[l]];\n  }\n\n  return {\n    lut: d,\n    offset: u\n  };\n}\n\nfunction m(t, e) {\n  const n = Math.min(Math.max(t, -100), 100),\n        i = Math.min(Math.max(e ?? 0, -100), 100),\n        r = 255,\n        s = 128;\n  let o = 0,\n      a = 0;\n  const f = new Uint8Array(256);\n\n  for (o = 0; o < 256; o++) n > 0 && n < 100 ? a = (200 * o - 100 * r + 2 * r * i) / (2 * (100 - n)) + s : n <= 0 && n > -100 ? a = (200 * o - 100 * r + 2 * r * i) * (100 + n) / 2e4 + s : 100 === n ? (a = 200 * o - 100 * r + (r + 1) * (100 - n) + 2 * r * i, a = a > 0 ? r : 0) : -100 === n && (a = s), f[o] = a > r ? r : a < 0 ? 0 : a;\n\n  return f;\n}\n\nfunction c(t, e, n) {\n  const i = [];\n\n  for (let r = 0; r < e.length; r++) {\n    let s = 0,\n        o = 0,\n        a = 0;\n    \"min\" in e[r] ? ({\n      min: s,\n      max: o,\n      avg: a\n    } = e[r]) : [s, o, a] = e[r];\n    let l = a ?? 0;\n    \"u8\" !== t && (l = 255 * (l - s) / (o - s)), n && (l *= f[r]), i.push(h(l));\n  }\n\n  return i;\n}\n\nfunction h(t) {\n  if (t <= 0 || t >= 255) return a;\n  let e = 0;\n  150 !== t && (e = t <= 150 ? 45 * Math.cos(.01047 * t) : 17 * Math.sin(.021 * t));\n  const n = 255,\n        i = t + e,\n        r = Math.log(t / n),\n        s = Math.log(i / n);\n  if (0 === s) return a;\n  const o = r / s;\n  return isNaN(o) ? a : Math.min(9.9, Math.max(.01, o));\n}\n\nfunction p(n) {\n  if (t(n) || !n.pixels?.length) return null;\n  n.statistics || n.updateStatistics();\n  const {\n    pixels: i,\n    mask: r,\n    pixelType: s,\n    statistics: o\n  } = n,\n        a = n.width * n.height,\n        f = i.length;\n  let l, u, m, c, h;\n  const p = [],\n        g = [];\n  let x, M, d, y, b, O, C, k, z, A;\n  const v = 256;\n\n  for (c = 0; c < f; c++) {\n    if (x = new Uint32Array(v), d = i[c], \"u8\" === s) {\n      if (l = -.5, u = 255.5, r) for (h = 0; h < a; h++) r[h] && x[d[h]]++;else for (h = 0; h < a; h++) x[d[h]]++;\n    } else {\n      if (e(o), l = o[c].minValue, u = o[c].maxValue, m = (u - l) / v, M = new Uint32Array(v + 1), r) for (h = 0; h < a; h++) r[h] && M[Math.floor((d[h] - l) / m)]++;else for (h = 0; h < a; h++) M[Math.floor((d[h] - l) / m)]++;\n\n      for (h = 0; h < 255; h++) x[h] = M[h];\n\n      x[255] = M[255] + M[256];\n    }\n\n    for (p.push({\n      min: l,\n      max: u,\n      size: v,\n      counts: x\n    }), y = 0, b = 0, k = 0, h = 0; h < v; h++) y += x[h], b += h * x[h];\n\n    for (z = b / y, h = 0; h < v; h++) k += x[h] * (h - z) ** 2;\n\n    A = Math.sqrt(k / (y - 1)), m = (u - l) / v, O = (z + .5) * m + l, C = A * m, g.push({\n      min: l,\n      max: u,\n      avg: O,\n      stddev: C\n    });\n  }\n\n  return {\n    statistics: g,\n    histograms: p\n  };\n}\n\nfunction g(t) {\n  const e = [];\n\n  for (let n = 0; n < t.length; n++) {\n    const {\n      min: i,\n      max: r,\n      size: s,\n      counts: o\n    } = t[n];\n    let a = 0,\n        f = 0;\n\n    for (let t = 0; t < s; t++) a += o[t], f += t * o[t];\n\n    const l = f / a;\n    let u = 0;\n\n    for (let t = 0; t < s; t++) u += o[t] * (t - l) ** 2;\n\n    const m = (r - i) / s,\n          c = (l + .5) * m + i,\n          h = Math.sqrt(u / (a - 1)) * m;\n    e.push({\n      min: i,\n      max: r,\n      avg: c,\n      stddev: h\n    });\n  }\n\n  return e;\n}\n\nfunction x(t, r) {\n  const {\n    pixelBlock: a,\n    bandIds: f,\n    returnHistogramLut: u,\n    rasterInfo: m\n  } = r;\n  let c = null,\n      h = null,\n      g = t.stretchType;\n  if (\"number\" == typeof g && (g = s[g]), t.dra) {\n    if (\"minMax\" === g && n(a) && a.statistics) c = a.statistics.map(t => [t.minValue, t.maxValue, 0, 0]);else {\n      const t = p(a);\n      c = n(t) ? t.statistics : null, h = n(t) ? t.histograms : null;\n    }\n  } else c = t.statistics?.length > 0 ? t.statistics : i(m.statistics), h = t.histograms || i(m.histograms);\n  \"percentClip\" !== g && \"histogramEqualization\" !== g || h?.length || (g = \"minMax\");\n  const x = c?.length || h?.length || m.bandCount,\n        d = [],\n        y = [];\n  let b, O, C, k, z, A, v, w, U, E, L, T;\n\n  switch (c && !Array.isArray(c[0]) && (c = c.map(t => [t.min, t.max, t.avg, t.stddev])), g) {\n    case \"none\":\n      {\n        const t = o[m.pixelType] || o.f32;\n\n        for (w = 0; w < x; w++) d[w] = t[0], y[w] = t[1];\n      }\n      break;\n\n    case \"minMax\":\n      for (e(c), w = 0; w < x; w++) d[w] = c[w][0], y[w] = c[w][1];\n\n      break;\n\n    case \"standardDeviation\":\n      for (e(c), w = 0; w < x; w++) d[w] = c[w][2] - t.numberOfStandardDeviations * c[w][3], y[w] = c[w][2] + t.numberOfStandardDeviations * c[w][3], d[w] < c[w][0] && (d[w] = c[w][0]), y[w] > c[w][1] && (y[w] = c[w][1]);\n\n      break;\n\n    case \"histogramEqualization\":\n      for (e(h), w = 0; w < x; w++) d[w] = h[w].min, y[w] = h[w].max;\n\n      break;\n\n    case \"percentClip\":\n      for (e(h), w = 0; w < h.length; w++) {\n        for (b = h[w], z = new Uint32Array(b.size), k = [...b.counts], k.length >= 20 && (k[0] = k[1] = k[2] = k[k.length - 1] = k[k.length - 2] = 0), C = 0, O = (b.max - b.min) / b.size, v = -.5 === b.min && 1 === O ? .5 : 0, U = 0; U < b.size; U++) C += k[U], z[U] = C;\n\n        for (A = (t.minPercent || 0) * C / 100, U = 0; U < b.size; U++) if (z[U] > A) {\n          d[w] = b.min + O * (U + v);\n          break;\n        }\n\n        for (A = (1 - (t.maxPercent || 0) / 100) * C, U = b.size - 2; U >= 0; U--) if (z[U] < A) {\n          y[w] = b.min + O * (U + 2 - v);\n          break;\n        }\n      }\n\n      break;\n\n    default:\n      for (e(c), w = 0; w < x; w++) d[w] = c[w][0], y[w] = c[w][1];\n\n  }\n\n  \"histogramEqualization\" === g ? (e(h), L = h[0].size || 256, E = 0, u && (T = h.map(t => l(t)))) : (L = t.max || 255, E = t.min || 0);\n  return M({\n    minCutOff: d,\n    maxCutOff: y,\n    outMax: L,\n    outMin: E,\n    histogramLut: T\n  }, f);\n}\n\nfunction M(t, e) {\n  if (null == e || 0 === e.length) return t;\n  const n = Math.max.apply(null, e),\n        {\n    minCutOff: i,\n    maxCutOff: r,\n    outMin: s,\n    outMax: o,\n    histogramLut: a\n  } = t;\n  return i.length === e.length || i.length <= n ? t : {\n    minCutOff: e.map(t => i[t]),\n    maxCutOff: e.map(t => r[t]),\n    histogramLut: a ? e.map(t => a[t]) : null,\n    outMin: s,\n    outMax: o\n  };\n}\n\nfunction d(e, n) {\n  if (t(e) || !e.pixels?.length) return e;\n  const {\n    mask: i,\n    width: s,\n    height: o,\n    pixels: a\n  } = e,\n        {\n    minCutOff: f,\n    maxCutOff: l,\n    gamma: u\n  } = n,\n        m = n.outMin || 0,\n        c = n.outMax || 255,\n        h = s * o,\n        p = n.outputPixelType || \"u8\",\n        g = e.pixels.map(() => r.createEmptyBand(p, h)),\n        x = g.length;\n  let M, d, y, b, O;\n  const C = c - m,\n        k = [];\n\n  for (M = 0; M < x; M++) k[M] = l[M] - f[M], l[M], f[M];\n\n  const z = u && u.length >= x,\n        A = [];\n  if (z) for (M = 0; M < x; M++) u[M] > 1 ? u[M] > 2 ? A[M] = 6.5 + (u[M] - 2) ** 2.5 : A[M] = 6.5 + 100 * (2 - u[M]) ** 4 : A[M] = 1;\n  if (z) {\n    if (null != i) {\n      for (d = 0; d < h; d++) if (i[d]) for (M = 0; M < x; M++) y = a[M][d], O = (y - f[M]) / k[M], b = 1, u[M] > 1 && (b -= (1 / C) ** (O * A[M])), y < l[M] && y > f[M] ? g[M][d] = Math.floor(b * C * O ** (1 / u[M])) + m : y >= l[M] ? g[M][d] = c : g[M][d] = m;\n    } else for (d = 0; d < h; d++) for (M = 0; M < x; M++) y = a[M][d], O = (y - f[M]) / k[M], b = 1, u[M] > 1 && (b -= (1 / C) ** (O * A[M])), y < l[M] && y > f[M] ? g[M][d] = Math.floor(b * C * O ** (1 / u[M])) + m : y >= l[M] ? g[M][d] = c : g[M][d] = m;\n  } else if (null != i) {\n    for (d = 0; d < h; d++) if (i[d]) for (M = 0; M < x; M++) y = a[M][d], y < l[M] && y > f[M] ? g[M][d] = Math.floor((y - f[M]) / k[M] * C) + m : y >= l[M] ? g[M][d] = c : g[M][d] = m;\n  } else for (d = 0; d < h; d++) for (M = 0; M < x; M++) y = a[M][d], y < l[M] && y > f[M] ? g[M][d] = Math.floor((y - f[M]) / k[M] * C) + m : y >= l[M] ? g[M][d] = c : g[M][d] = m;\n  const v = new r({\n    width: s,\n    height: o,\n    mask: i,\n    pixels: g,\n    pixelType: p\n  });\n  return v.updateStatistics(), v;\n}\n\nexport { c as computeGammaValues, m as createContrastBrightnessLUT, l as createHistogramEqualizationLUT, u as createStretchLUT, g as estimateStatisticsFromHistograms, p as estimateStatisticsHistograms, x as getStretchCutoff, d as stretch };","map":{"version":3,"names":["isNone","t","assertIsSome","e","isSome","n","unwrap","i","r","stretchTypeFunctionEnum","s","o","u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64","Number","MAX_VALUE","a","f","l","Math","min","size","counts","Uint8Array","reduce","u","minCutOff","maxCutOff","gamma","pixelType","outMin","outMax","includes","length","c","h","p","g","x","M","d","y","b","O","floor","contrastOffset","m","brightnessOffset","lut","offset","max","avg","push","cos","sin","log","isNaN","pixels","statistics","updateStatistics","mask","width","height","C","k","z","A","v","Uint32Array","minValue","maxValue","sqrt","stddev","histograms","pixelBlock","bandIds","returnHistogramLut","rasterInfo","stretchType","dra","map","bandCount","w","U","E","L","T","Array","isArray","numberOfStandardDeviations","minPercent","maxPercent","histogramLut","apply","outputPixelType","createEmptyBand","computeGammaValues","createContrastBrightnessLUT","createHistogramEqualizationLUT","createStretchLUT","estimateStatisticsFromHistograms","estimateStatisticsHistograms","getStretchCutoff","stretch"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/stretchUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t,assertIsSome as e,isSome as n,unwrap as i}from\"../../../core/maybe.js\";import r from\"../PixelBlock.js\";import{stretchTypeFunctionEnum as s}from\"../../../renderers/support/stretchRendererUtils.js\";const o={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},a=1,f=[.299,.587,.114];function l(t,e=256){e=Math.min(e,256);const{size:n,counts:i}=t,r=new Uint8Array(n),s=i.reduce(((t,n)=>t+n/e),0);let o=0,a=0,f=0,l=s;for(let u=0;u<n;u++)if(f+=i[u],!(u<n-1&&f+i[u+1]<l)){for(;o<e-1&&l<f;)o++,l+=s;for(let t=a;t<=u;t++)r[t]=o;a=u+1}for(let u=a;u<n;u++)r[u]=e-1;return r}function u(t){const{minCutOff:e,maxCutOff:n,gamma:i,pixelType:r}=t,s=t.outMin||0,o=t.outMax||255;if(![\"u8\",\"u16\",\"s8\",\"s16\"].includes(r))return null;const a=e.length;let f,l,u=0;\"s8\"===r?u=-127:\"s16\"===r&&(u=-32767);let c=256;[\"u16\",\"s16\"].includes(r)&&(c=65536);const h=[],p=o-s;for(f=0;f<a;f++)h[f]=n[f]-e[f],n[f],e[f];const g=i&&i.length>=a,x=[];if(g)for(f=0;f<a;f++)i[f]>1?i[f]>2?x[f]=6.5+(i[f]-2)**2.5:x[f]=6.5+100*(2-i[f])**4:x[f]=1;let M;const d=[];let y,b,O;if(g)for(f=0;f<a;f++){for(O=[],l=0;l<c;l++)y=l+u,M=(y-e[f])/h[f],b=1,i[f]>1&&(b-=(1/p)**(M*x[f])),y<n[f]&&y>e[f]?O[l]=Math.floor(b*p*M**(1/i[f]))+s:y>=n[f]?O[l]=o:O[l]=s;d[f]=O}else for(f=0;f<a;f++){for(O=[],l=0;l<c;l++)y=l+u,y<=e[f]?O[l]=s:y>=n[f]?O[l]=o:O[l]=Math.floor((y-e[f])/h[f]*p)+s;d[f]=O}if(null!=t.contrastOffset){const e=m(t.contrastOffset,t.brightnessOffset);for(f=0;f<a;f++)for(O=d[f],l=0;l<c;l++)O[l]=e[O[l]]}return{lut:d,offset:u}}function m(t,e){const n=Math.min(Math.max(t,-100),100),i=Math.min(Math.max(e??0,-100),100),r=255,s=128;let o=0,a=0;const f=new Uint8Array(256);for(o=0;o<256;o++)n>0&&n<100?a=(200*o-100*r+2*r*i)/(2*(100-n))+s:n<=0&&n>-100?a=(200*o-100*r+2*r*i)*(100+n)/2e4+s:100===n?(a=200*o-100*r+(r+1)*(100-n)+2*r*i,a=a>0?r:0):-100===n&&(a=s),f[o]=a>r?r:a<0?0:a;return f}function c(t,e,n){const i=[];for(let r=0;r<e.length;r++){let s=0,o=0,a=0;\"min\"in e[r]?({min:s,max:o,avg:a}=e[r]):[s,o,a]=e[r];let l=a??0;\"u8\"!==t&&(l=255*(l-s)/(o-s)),n&&(l*=f[r]),i.push(h(l))}return i}function h(t){if(t<=0||t>=255)return a;let e=0;150!==t&&(e=t<=150?45*Math.cos(.01047*t):17*Math.sin(.021*t));const n=255,i=t+e,r=Math.log(t/n),s=Math.log(i/n);if(0===s)return a;const o=r/s;return isNaN(o)?a:Math.min(9.9,Math.max(.01,o))}function p(n){if(t(n)||!n.pixels?.length)return null;n.statistics||n.updateStatistics();const{pixels:i,mask:r,pixelType:s,statistics:o}=n,a=n.width*n.height,f=i.length;let l,u,m,c,h;const p=[],g=[];let x,M,d,y,b,O,C,k,z,A;const v=256;for(c=0;c<f;c++){if(x=new Uint32Array(v),d=i[c],\"u8\"===s)if(l=-.5,u=255.5,r)for(h=0;h<a;h++)r[h]&&x[d[h]]++;else for(h=0;h<a;h++)x[d[h]]++;else{if(e(o),l=o[c].minValue,u=o[c].maxValue,m=(u-l)/v,M=new Uint32Array(v+1),r)for(h=0;h<a;h++)r[h]&&M[Math.floor((d[h]-l)/m)]++;else for(h=0;h<a;h++)M[Math.floor((d[h]-l)/m)]++;for(h=0;h<255;h++)x[h]=M[h];x[255]=M[255]+M[256]}for(p.push({min:l,max:u,size:v,counts:x}),y=0,b=0,k=0,h=0;h<v;h++)y+=x[h],b+=h*x[h];for(z=b/y,h=0;h<v;h++)k+=x[h]*(h-z)**2;A=Math.sqrt(k/(y-1)),m=(u-l)/v,O=(z+.5)*m+l,C=A*m,g.push({min:l,max:u,avg:O,stddev:C})}return{statistics:g,histograms:p}}function g(t){const e=[];for(let n=0;n<t.length;n++){const{min:i,max:r,size:s,counts:o}=t[n];let a=0,f=0;for(let t=0;t<s;t++)a+=o[t],f+=t*o[t];const l=f/a;let u=0;for(let t=0;t<s;t++)u+=o[t]*(t-l)**2;const m=(r-i)/s,c=(l+.5)*m+i,h=Math.sqrt(u/(a-1))*m;e.push({min:i,max:r,avg:c,stddev:h})}return e}function x(t,r){const{pixelBlock:a,bandIds:f,returnHistogramLut:u,rasterInfo:m}=r;let c=null,h=null,g=t.stretchType;if(\"number\"==typeof g&&(g=s[g]),t.dra)if(\"minMax\"===g&&n(a)&&a.statistics)c=a.statistics.map((t=>[t.minValue,t.maxValue,0,0]));else{const t=p(a);c=n(t)?t.statistics:null,h=n(t)?t.histograms:null}else c=t.statistics?.length>0?t.statistics:i(m.statistics),h=t.histograms||i(m.histograms);\"percentClip\"!==g&&\"histogramEqualization\"!==g||h?.length||(g=\"minMax\");const x=c?.length||h?.length||m.bandCount,d=[],y=[];let b,O,C,k,z,A,v,w,U,E,L,T;switch(c&&!Array.isArray(c[0])&&(c=c.map((t=>[t.min,t.max,t.avg,t.stddev]))),g){case\"none\":{const t=o[m.pixelType]||o.f32;for(w=0;w<x;w++)d[w]=t[0],y[w]=t[1]}break;case\"minMax\":for(e(c),w=0;w<x;w++)d[w]=c[w][0],y[w]=c[w][1];break;case\"standardDeviation\":for(e(c),w=0;w<x;w++)d[w]=c[w][2]-t.numberOfStandardDeviations*c[w][3],y[w]=c[w][2]+t.numberOfStandardDeviations*c[w][3],d[w]<c[w][0]&&(d[w]=c[w][0]),y[w]>c[w][1]&&(y[w]=c[w][1]);break;case\"histogramEqualization\":for(e(h),w=0;w<x;w++)d[w]=h[w].min,y[w]=h[w].max;break;case\"percentClip\":for(e(h),w=0;w<h.length;w++){for(b=h[w],z=new Uint32Array(b.size),k=[...b.counts],k.length>=20&&(k[0]=k[1]=k[2]=k[k.length-1]=k[k.length-2]=0),C=0,O=(b.max-b.min)/b.size,v=-.5===b.min&&1===O?.5:0,U=0;U<b.size;U++)C+=k[U],z[U]=C;for(A=(t.minPercent||0)*C/100,U=0;U<b.size;U++)if(z[U]>A){d[w]=b.min+O*(U+v);break}for(A=(1-(t.maxPercent||0)/100)*C,U=b.size-2;U>=0;U--)if(z[U]<A){y[w]=b.min+O*(U+2-v);break}}break;default:for(e(c),w=0;w<x;w++)d[w]=c[w][0],y[w]=c[w][1]}\"histogramEqualization\"===g?(e(h),L=h[0].size||256,E=0,u&&(T=h.map((t=>l(t))))):(L=t.max||255,E=t.min||0);return M({minCutOff:d,maxCutOff:y,outMax:L,outMin:E,histogramLut:T},f)}function M(t,e){if(null==e||0===e.length)return t;const n=Math.max.apply(null,e),{minCutOff:i,maxCutOff:r,outMin:s,outMax:o,histogramLut:a}=t;return i.length===e.length||i.length<=n?t:{minCutOff:e.map((t=>i[t])),maxCutOff:e.map((t=>r[t])),histogramLut:a?e.map((t=>a[t])):null,outMin:s,outMax:o}}function d(e,n){if(t(e)||!e.pixels?.length)return e;const{mask:i,width:s,height:o,pixels:a}=e,{minCutOff:f,maxCutOff:l,gamma:u}=n,m=n.outMin||0,c=n.outMax||255,h=s*o,p=n.outputPixelType||\"u8\",g=e.pixels.map((()=>r.createEmptyBand(p,h))),x=g.length;let M,d,y,b,O;const C=c-m,k=[];for(M=0;M<x;M++)k[M]=l[M]-f[M],l[M],f[M];const z=u&&u.length>=x,A=[];if(z)for(M=0;M<x;M++)u[M]>1?u[M]>2?A[M]=6.5+(u[M]-2)**2.5:A[M]=6.5+100*(2-u[M])**4:A[M]=1;if(z)if(null!=i){for(d=0;d<h;d++)if(i[d])for(M=0;M<x;M++)y=a[M][d],O=(y-f[M])/k[M],b=1,u[M]>1&&(b-=(1/C)**(O*A[M])),y<l[M]&&y>f[M]?g[M][d]=Math.floor(b*C*O**(1/u[M]))+m:y>=l[M]?g[M][d]=c:g[M][d]=m}else for(d=0;d<h;d++)for(M=0;M<x;M++)y=a[M][d],O=(y-f[M])/k[M],b=1,u[M]>1&&(b-=(1/C)**(O*A[M])),y<l[M]&&y>f[M]?g[M][d]=Math.floor(b*C*O**(1/u[M]))+m:y>=l[M]?g[M][d]=c:g[M][d]=m;else if(null!=i){for(d=0;d<h;d++)if(i[d])for(M=0;M<x;M++)y=a[M][d],y<l[M]&&y>f[M]?g[M][d]=Math.floor((y-f[M])/k[M]*C)+m:y>=l[M]?g[M][d]=c:g[M][d]=m}else for(d=0;d<h;d++)for(M=0;M<x;M++)y=a[M][d],y<l[M]&&y>f[M]?g[M][d]=Math.floor((y-f[M])/k[M]*C)+m:y>=l[M]?g[M][d]=c:g[M][d]=m;const v=new r({width:s,height:o,mask:i,pixels:g,pixelType:p});return v.updateStatistics(),v}export{c as computeGammaValues,m as createContrastBrightnessLUT,l as createHistogramEqualizationLUT,u as createStretchLUT,g as estimateStatisticsFromHistograms,p as estimateStatisticsHistograms,x as getStretchCutoff,d as stretch};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}