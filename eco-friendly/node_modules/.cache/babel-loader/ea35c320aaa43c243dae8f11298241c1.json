{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport o from \"../../core/ItemCache.js\";\nimport { isSome as t, unwrapOrThrow as n } from \"../../core/maybe.js\";\nimport { size as i, create as s } from \"../../geometry/support/aaBoundingBox.js\";\nimport { objectSymbolLayerSizeWithResourceSize as u, objectSymbolLayerPrimitiveBoundingBox as c } from \"./symbolLayerUtils3D.js\";\nlet a = m();\n\nfunction m() {\n  return new o(50);\n}\n\nfunction y() {\n  a = m();\n}\n\nfunction f(e, o) {\n  if (\"icon\" === e.type) return p(e, o);\n  if (\"object\" === e.type) return d(e, o);\n  throw new r(\"symbol3d:unsupported-symbol-layer\", \"computeLayerSize only works with symbol layers of type Icon and Object\");\n}\n\nasync function l(e, o) {\n  if (\"icon\" === e.type) return h(e, o);\n  if (\"object\" === e.type) return w(e, o);\n  throw new r(\"symbol3d:unsupported-symbol-layer\", \"computeLayerSize only works with symbol layers of type Icon and Object\");\n}\n\nasync function p(e, o) {\n  if (e.resource?.href) return b(e.resource.href).then(e => [e.width, e.height]);\n  if (e.resource?.primitive) return t(o) ? [o, o] : [256, 256];\n  throw new r(\"symbol3d:invalid-symbol-layer\", \"symbol layers of type Icon must have either an href or a primitive resource\");\n}\n\nfunction h(e, r) {\n  return p(e, r).then(r => {\n    if (null == e.size) return r;\n    const o = r[0] / r[1];\n    return o > 1 ? [e.size, e.size / o] : [e.size * o, e.size];\n  });\n}\n\nfunction b(r) {\n  return e(r, {\n    responseType: \"image\"\n  }).then(e => e.data);\n}\n\nfunction d(e, r) {\n  return j(e, r).then(e => i(e));\n}\n\nasync function w(e, r) {\n  const o = await d(e, r);\n  return u(o, e);\n}\n\nasync function j(e, o) {\n  if (!e.isPrimitive) {\n    const r = n(e.resource?.href),\n          o = a.get(r);\n    if (void 0 !== o) return o;\n    const t = await import(\"../../views/3d/layers/graphics/objectResourceUtils.js\"),\n          i = await t.fetch(r, {\n      disableTextures: !0\n    });\n    return a.put(r, i.referenceBoundingBox), i.referenceBoundingBox;\n  }\n\n  let i = null;\n  if (e.resource && e.resource.primitive && (i = s(c(e.resource.primitive)), t(o))) for (let r = 0; r < i.length; r++) i[r] *= o;\n  return i ? Promise.resolve(i) : Promise.reject(new r(\"symbol:invalid-resource\", \"The symbol does not have a valid resource\"));\n}\n\nexport { y as clearBoundingBoxCache, p as computeIconLayerResourceSize, f as computeLayerResourceSize, l as computeLayerSize, d as computeObjectLayerResourceSize };","map":{"version":3,"names":["e","r","o","isSome","t","unwrapOrThrow","n","size","i","create","s","objectSymbolLayerSizeWithResourceSize","u","objectSymbolLayerPrimitiveBoundingBox","c","a","m","y","f","type","p","d","l","h","w","resource","href","b","then","width","height","primitive","responseType","data","j","isPrimitive","get","fetch","disableTextures","put","referenceBoundingBox","length","Promise","resolve","reject","clearBoundingBoxCache","computeIconLayerResourceSize","computeLayerResourceSize","computeLayerSize","computeObjectLayerResourceSize"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/support/symbolLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import o from\"../../core/ItemCache.js\";import{isSome as t,unwrapOrThrow as n}from\"../../core/maybe.js\";import{size as i,create as s}from\"../../geometry/support/aaBoundingBox.js\";import{objectSymbolLayerSizeWithResourceSize as u,objectSymbolLayerPrimitiveBoundingBox as c}from\"./symbolLayerUtils3D.js\";let a=m();function m(){return new o(50)}function y(){a=m()}function f(e,o){if(\"icon\"===e.type)return p(e,o);if(\"object\"===e.type)return d(e,o);throw new r(\"symbol3d:unsupported-symbol-layer\",\"computeLayerSize only works with symbol layers of type Icon and Object\")}async function l(e,o){if(\"icon\"===e.type)return h(e,o);if(\"object\"===e.type)return w(e,o);throw new r(\"symbol3d:unsupported-symbol-layer\",\"computeLayerSize only works with symbol layers of type Icon and Object\")}async function p(e,o){if(e.resource?.href)return b(e.resource.href).then((e=>[e.width,e.height]));if(e.resource?.primitive)return t(o)?[o,o]:[256,256];throw new r(\"symbol3d:invalid-symbol-layer\",\"symbol layers of type Icon must have either an href or a primitive resource\")}function h(e,r){return p(e,r).then((r=>{if(null==e.size)return r;const o=r[0]/r[1];return o>1?[e.size,e.size/o]:[e.size*o,e.size]}))}function b(r){return e(r,{responseType:\"image\"}).then((e=>e.data))}function d(e,r){return j(e,r).then((e=>i(e)))}async function w(e,r){const o=await d(e,r);return u(o,e)}async function j(e,o){if(!e.isPrimitive){const r=n(e.resource?.href),o=a.get(r);if(void 0!==o)return o;const t=await import(\"../../views/3d/layers/graphics/objectResourceUtils.js\"),i=await t.fetch(r,{disableTextures:!0});return a.put(r,i.referenceBoundingBox),i.referenceBoundingBox}let i=null;if(e.resource&&e.resource.primitive&&(i=s(c(e.resource.primitive)),t(o)))for(let r=0;r<i.length;r++)i[r]*=o;return i?Promise.resolve(i):Promise.reject(new r(\"symbol:invalid-resource\",\"The symbol does not have a valid resource\"))}export{y as clearBoundingBoxCache,p as computeIconLayerResourceSize,f as computeLayerResourceSize,l as computeLayerSize,d as computeObjectLayerResourceSize};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}