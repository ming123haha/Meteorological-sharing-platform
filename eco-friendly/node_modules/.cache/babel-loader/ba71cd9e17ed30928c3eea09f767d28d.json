{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Color.js\";\nimport i from \"../../../Graphic.js\";\nimport { removeUnordered as s } from \"../../../core/arrayUtils.js\";\nimport { ByteSizeUnit as r } from \"../../../core/byteSizeEstimations.js\";\nimport o from \"../../../core/Collection.js\";\nimport a from \"../../../core/has.js\";\nimport n from \"../../../core/Logger.js\";\nimport { someMap as l } from \"../../../core/MapUtils.js\";\nimport { unwrapOr as d, destroyMaybe as h, isSome as c, isNone as u, applySome as _ } from \"../../../core/maybe.js\";\nimport m from \"../../../core/PooledArray.js\";\nimport { throwIfAborted as g, createResolver as p, isAbortError as f } from \"../../../core/promiseUtils.js\";\nimport { initial as b, watch as y } from \"../../../core/reactiveUtils.js\";\nimport { schedule as v } from \"../../../core/scheduling.js\";\nimport { isArrayBuffer as I } from \"../../../core/typedArrayUtil.js\";\nimport { getMetersPerVerticalUnitForSR as M } from \"../../../core/unitUtils.js\";\nimport { property as C } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as E } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { f as x } from \"../../../chunks/mat3.js\";\nimport { c as O } from \"../../../chunks/mat3f32.js\";\nimport { m as S, C as w } from \"../../../chunks/mat4.js\";\nimport { b as j, c as T } from \"../../../chunks/mat4f64.js\";\nimport { m as D, s as A, t as R, a as N, c as F } from \"../../../chunks/vec3.js\";\nimport { c as P } from \"../../../chunks/vec3f64.js\";\nimport { s as V } from \"../../../chunks/vec4.js\";\nimport { f as U } from \"../../../chunks/vec4f64.js\";\nimport { projectBuffer as H, getProjectorName as G, localLinearScaleFactors as L, projectVectorToVector as k, projectBoundingRect as B, projectBoundingSphere as q } from \"../../../geometry/projection.js\";\nimport { create as z, empty as K, expandWithBuffer as W, toRect as $ } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as X, intersects as Y } from \"../../../geometry/support/aaBoundingRect.js\";\nimport Q from \"../../../layers/graphics/controllers/I3SOnDemandController.js\";\nimport { fixFields as J } from \"../../../layers/support/fieldUtils.js\";\nimport { areLabelsVisible as Z } from \"../../../layers/support/layerUtils.js\";\nimport ee from \"../../../layers/support/SceneModification.js\";\nimport { getColor as te, getOpacity as ie } from \"../../../renderers/visualVariables/support/visualVariableUtils.js\";\nimport { loadArcade as se } from \"../../../support/arcadeOnDemand.js\";\nimport re from \"../../../symbols/Symbol3D.js\";\nimport { getMetersPerUnit as oe } from \"../../../symbols/support/unitConversionUtils.js\";\nimport ae from \"./I3SMeshViewLabeler.js\";\nimport { I3SMeshWorkerHandle as ne, toWasmModification as le } from \"./I3SMeshWorkerHandle.js\";\nimport { ForAllFeaturesVisibilityMode as de, ForAllFeaturesReturnType as he } from \"./II3SMeshView3D.js\";\nimport { initialize as ce, setModificationsSync as ue, filterObbsForModificationsSync as _e, interpretObbModificationResults as me } from \"./SceneLayerWorker.js\";\nimport { overrideColor as ge } from \"./graphics/graphicUtils.js\";\nimport { TextureUsage as pe, TextureEncoding as fe } from \"./i3s/enums.js\";\nimport be from \"./i3s/Highlights.js\";\nimport { I3SAsyncElevationUpdater as ye } from \"./i3s/I3SAsyncElevationUpdater.js\";\nimport { I3SAttributeOverrides as ve } from \"./i3s/I3SAttributeOverrides.js\";\nimport { I3SCrossfadeHelper as Ie, NodeCrossfadeMetaData as Me } from \"./i3s/I3SCrossfadeHelper.js\";\nimport Ce from \"./i3s/I3SElevationProvider.js\";\nimport { boundingBoxCornerPoints as Ee } from \"./i3s/I3SGeometryUtil.js\";\nimport { I3SIntersectionHandler as xe } from \"./i3s/I3SIntersectionHandler.js\";\nimport { getSupportedEncodings as Oe, selectEncoding as Se, defaultMaterial as we, createTexture as je, configureMaterial as Te } from \"./i3s/I3SMaterialUtil.js\";\nimport { NodeIMModificationImpact as De, NodeState as Ae } from \"./i3s/I3SNode.js\";\nimport { computeGlobalTransformation as Re, getLocalOrigin as Ne } from \"./i3s/I3SProjectionUtil.js\";\nimport { rendererNeedsTextures as Fe, checkSceneLayerValid as Pe, checkSceneLayerCompatibleWithView as Ve, getCacheKeySuffix as Ue, whenGraphicAttributes as He, computeVisibilityObb as Ge, filterInPlace as Le, getCachedAttributeValue as ke, intersectBoundingRectWithMbs as Be, MbsIntersectResult as qe, addWraparound as ze, getSymbolInfo as Ke, transparentEdgeMaterial as We, getClipRect as $e } from \"./i3s/I3SUtil.js\";\nimport { IDBCache as Xe } from \"./i3s/IDBCache.js\";\nimport { IDBMockCache as Ye } from \"./i3s/IDBMockCache.js\";\nimport { attributeLookup as Qe } from \"./support/attributeUtils.js\";\nimport { ColorMixModeEnum as Je } from \"./support/symbolColorUtils.js\";\nimport Ze from \"../support/debugFlags.js\";\nimport { toBoundingRect as et } from \"../support/extentUtils.js\";\nimport { create as tt, clone as it } from \"../support/orientedBoundingBox.js\";\nimport { updatingProgress as st } from \"../support/updatingProperties.js\";\nimport { glLayout as rt } from \"../support/buffer/glUtil.js\";\nimport { State as ot } from \"../webgl-engine/collections/Component/ComponentObject.js\";\nimport { createVertexBufferLayout as at } from \"../webgl-engine/collections/Component/SourceGeometry.js\";\nimport { TextureCoordinateAttributeType as nt } from \"../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";\nimport { loadBasis as lt } from \"../webgl-engine/lib/BasisUtil.js\";\nimport { Transparency as dt } from \"../webgl-engine/lib/edgeRendering/interfaces.js\";\nconst ht = n.getLogger(\"esri.views.3d.layers.SceneLayerView3D\"),\n      ct = [1, 1, 1, 1];\n\nclass ut extends Me {\n  constructor(e, t, i, s, r, o, a) {\n    super(), this.node = e, this.featureIds = t, this.objectHandle = i, this.cachedRendererVersion = s, this.attributeInfo = r, this.material = o, this.textures = a, this.cachedEdgeMaterials = new Array(), this.edgeMemoryUsage = 0, this.cachedSymbology = null;\n  }\n\n}\n\nvar _t;\n\n!function (e) {\n  e[e.CastShadows = 4] = \"CastShadows\", e[e.Pickable = 5] = \"Pickable\";\n}(_t || (_t = {}));\n\nconst mt = 19,\n      gt = 100 * r.MEGABYTES,\n      pt = t => {\n  let r = class extends t {\n    constructor(...e) {\n      super(e), this._elevationProvider = null, this._intersectionHandler = null, this._nodeId2Meta = new Map(), this._nodeId2MetaReloading = new Map(), this._i3sWasmLoaded = !1, this._snappingSourcesTrackers = [], this._hasLoadedPBRTextures = !1, this._asyncModuleLoading = 0, this._addTasks = new Map(), this._rendererVersion = 0, this._colorVariable = null, this._opacityVariable = null, this._rendererFields = null, this._symbologyFields = null, this._symbologyOverride = null, this._symbologyOverrideFields = null, this._symbolInfos = new Map(), this._idbCache = a(\"enable-feature:idb-mock-cache\") ? new Ye() : new Xe(\"esri-scenelayer-cache\", \"geometries\"), this.holeFilling = \"auto\", this._hasColors = !1, this._hasTextures = !1, this._hasData = !1, this.filter = null, this.slicePlaneEnabled = !1, this._modifications = new Array(), this._layerUrl = \"\", this._cacheKeySuffix = null, this._elevationTask = null, this._arcade = null, this._tmpAttributeOnlyGraphic = new i(null, null, {}), this._crossfadeHelper = new Ie(this);\n    }\n\n    get lodCrossfadeoutDuration() {\n      return 0;\n    }\n\n    get lodCrossfadeinDuration() {\n      return 0;\n    }\n\n    get lodCrossfadeUncoveredDuration() {\n      return 0;\n    }\n\n    get layerUid() {\n      return this.i3slayer && this.i3slayer.uid;\n    }\n\n    get sublayerUid() {\n      return null;\n    }\n\n    get hasTexturesOrVertexColors() {\n      return this._hasData ? this._hasTextures || this._hasColors ? \"yes\" : \"probably-not\" : \"unknown\";\n    }\n\n    get rendererTextureUsage() {\n      return Fe(this._currentRenderer) ? this._usePBR() || this._hasLoadedPBRTextures ? pe.AllTexturesPBR : pe.AllTextures : this._usePBR() || this._hasLoadedPBRTextures ? pe.GeometryTexturesPBR : pe.GeometryTextures;\n    }\n\n    get elevationOffset() {\n      const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n\n      if (null != e && \"absolute-height\" === e.mode) {\n        const t = M(this.i3slayer.spatialReference),\n              i = oe(e.unit);\n        return d(e.offset, 0) * i / t;\n      }\n\n      return 0;\n    }\n\n    get elevationInfo() {\n      const e = null != this.i3slayer ? this.i3slayer.elevationInfo : null;\n      if (null == e) return {\n        mode: Nt.Absolute,\n        offset: 0\n      };\n      const t = M(this.i3slayer.spatialReference),\n            i = oe(e.unit),\n            s = d(e.offset, 0) * i / t;\n\n      switch (e.mode) {\n        case \"absolute-height\":\n          return {\n            mode: Nt.Absolute,\n            offset: s\n          };\n\n        case \"relative-to-ground\":\n          return {\n            mode: Nt.RelativeToGround,\n            offset: s\n          };\n\n        case \"on-the-ground\":\n          return {\n            mode: Nt.OnTheGround,\n            offset: 0\n          };\n\n        default:\n          return {\n            mode: Nt.Absolute,\n            offset: 0\n          };\n      }\n    }\n\n    get supportedTextureEncodings() {\n      return Oe(this.view._stage.renderView.capabilities);\n    }\n\n    get uncompressedTextureDownsamplingEnabled() {\n      const e = this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,\n            t = 0 == (this.supportedTextureEncodings & fe.DDS_S3TC);\n      return e && t;\n    }\n\n    initialize() {\n      this._preLoadBasis(), this.addResolvingPromise(this.i3slayer.indexInfo);\n      const e = this.view.resourceController;\n      if (this.attributeOverrides = new ve(this.i3slayer, e.memoryController), this._worker = new ne(t => e.schedule(t)), this.addResolvingPromise(this._worker.promise), this._worker.setLegacySchema(this.layerUid, this.i3slayer.store.defaultGeometrySchema), Pe(this.i3slayer), Ve(this.i3slayer, this.view), this._layerUrl = this.i3slayer.parsedUrl.path, this._controller = new Q({\n        layerView: this\n      }), this.gpuMemoryEstimate = 0, this.texMemoryEstimate = 0, this.geoMemoryEstimate = 0, this._stage = this.view._stage, this._collection = this._stage.renderView.componentObjectCollection, this._highlights = new be({\n        collection: this._collection,\n        forAllFeatures: e => this._forAllFeatures(e, null, de.ALL),\n        forAllFeaturesOfNode: (e, t) => this._forAllFeaturesOfNode(e, t)\n      }), this._isIntegratedMesh || !this.i3slayer.store.defaultGeometrySchema) this._hasComponentData = !1;else {\n        const e = this.i3slayer.store.defaultGeometrySchema.featureAttributes;\n        this._hasComponentData = !!(e && e.faceRange && e.id);\n      }\n      this._hasVertexColors = null != this.i3slayer.store.defaultGeometrySchema.vertexAttributes.color && (null == this.i3slayer.cachedDrawingInfo || !this.i3slayer.cachedDrawingInfo.color), this._isIntegratedMesh || (this._edgeView = this._stage.renderView.ensureEdgeView());\n      const t = this.view.resourceController.memoryController.newCache(this.i3slayer.uid, e => this._deleteComponentObject(e));\n      this._memCache = t;\n\n      const i = e => c(this._controller.index) && c(this._controller.index.rootNode) ? this._controller.index.traverse(this._controller.index.rootNode, t => {\n        const i = t.index,\n              s = this._nodeId2Meta.get(i) || this._nodeId2MetaReloading.get(i);\n\n        return e(t, c(s) ? s.objectHandle : null);\n      }) : () => {};\n\n      this._intersectionHandler = new xe({\n        layerUid: this.layerUid,\n        sublayerUid: this.sublayerUid,\n        collection: this._collection,\n        slicePlaneEnabled: this.slicePlaneEnabled,\n        isGround: this._isIntegratedMesh,\n        traverseNodeHierarchy: i\n      }), this._elevationProvider = new Ce({\n        layerView: this,\n        intersectionHandler: this._intersectionHandler\n      }), this._hasLoadedPBRTextures = this._usePBR(), this.updatingHandles.add(() => this.view.clippingArea, () => this._clippingAreaChanged(), b), this.updatingHandles.add(() => this.fullOpacity, e => this._opacityChange(e)), this.updatingHandles.add(() => this.slicePlaneEnabled, e => this._slicePlaneEnabledChange(e)), this.updatingHandles.add(() => this.elevationOffset, (e, t) => {\n        this._reloadAll(t), this._controller.invalidateVisibilityObbs();\n      }), this.updatingHandles.add(() => this.elevationInfo, (e, t) => this._elevationInfoChanged(e, t), b), this.updatingHandles.add(() => this.filter, () => this._filterChange(), b), this.updatingHandles.add(() => this.view.qualitySettings.physicallyBasedRenderingEnabled, () => this._updatePBR());\n\n      const s = () => {\n        this._reloadAll(), this.clearMemCache();\n      };\n\n      this.updatingHandles.add(() => this.rendererTextureUsage, s), this.updatingHandles.add(() => this.uncompressedTextureDownsamplingEnabled, s), this.updatingHandles.add(() => this.suspended, e => this._suspendedChange(e), b), this.updatingHandles.add(() => this.i3slayer.labelsVisible, () => this._labelingChanged(), b), this.updatingHandles.add(() => this.i3slayer.labelingInfo, () => this._labelingChanged(), b), this.updatingHandles.add(() => this._modifications, () => this._modificationsChanged(), b), this.handles.add([y(() => Ze.I3S_TREE_SHOW_TILES, e => {\n        if (e && !this._treeDebugger) {\n          const e = this._controller.crsIndex;\n          import(\"./support/I3STreeDebugger.js\").then(({\n            I3STreeDebugger: t\n          }) => {\n            !this._treeDebugger && Ze.I3S_TREE_SHOW_TILES && (this._treeDebugger = new t({\n              lv: this,\n              view: this.view,\n              nodeSR: e\n            }));\n          });\n        } else e || Ze.I3S_TREE_SHOW_TILES || (this._treeDebugger = h(this._treeDebugger));\n      }, b), y(() => Ze.I3S_SHOW_MODIFICATIONS, () => this._showModifications(), b)]), this._cacheKeySuffix = Ue(this.i3slayer.spatialReference, this.view.renderSpatialReference), this._idbCache.init().catch(e => ht.warn(`Failed to initialize IndexedDB cache: ${e}`));\n    }\n\n    destroy() {\n      this._clearAddTasks(), this._elevationTask = h(this._elevationTask), this.attributeOverrides = h(this.attributeOverrides), this._elevationProvider && (this._elevationProvider.layerChanged(), this.view.elevationProvider.unregister(this._elevationProvider), this._elevationProvider = null), this._intersectionHandler && (this._stage.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler), this._intersectionHandler = null);\n      const e = this._worker;\n      e && (e.destroyContext(this.i3slayer.uid).then(() => e.destroy()), this._worker = null), this._removeAllNodeDataFromStage(), this._memCache = h(this._memCache), this._collection = null, this._stage = null, this._edgeView = null, this._labeler = h(this._labeler), this._treeDebugger = h(this._treeDebugger), this._controller = h(this._controller), this._highlights.destroy(), this._nodeId2Meta.clear(), this._nodeId2MetaReloading.clear(), this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle.remove(), this._visibleGeometryChangedSchedulerHandle = null);\n    }\n\n    _memEstimateTextureAdded(e) {\n      const t = e.estimatedTexMemRequired;\n      return this.gpuMemoryEstimate += t, this.texMemoryEstimate += t, t;\n    }\n\n    _memEstimateTextureRemoved(e) {\n      if (c(e)) {\n        const t = e.estimatedTexMemRequired;\n        this.gpuMemoryEstimate -= t, this.texMemoryEstimate -= t;\n      }\n    }\n\n    _memEstimateGeometryAdded(e) {\n      const t = this._collection.getObjectGPUMemoryUsage(e);\n\n      return this.gpuMemoryEstimate += t, this.geoMemoryEstimate += t, t;\n    }\n\n    _memEstimateGeometryRemoved(e) {\n      const t = this._collection.getObjectGPUMemoryUsage(e);\n\n      this.gpuMemoryEstimate -= t, this.geoMemoryEstimate -= t;\n    }\n\n    isNodeLoaded(e) {\n      return this._nodeId2Meta.has(e);\n    }\n\n    isNodeReloading(e) {\n      return this._nodeId2MetaReloading.has(e);\n    }\n\n    getUsedMemory() {\n      let e = c(this._labeler) ? this._labeler.usedMemory : 0;\n      return this._nodeId2Meta.forEach(t => e += c(t) ? t.node.memory : 0), this._nodeId2MetaReloading.forEach(t => e += c(t) ? t.node.memory : 0), e;\n    }\n\n    getUnloadedMemory() {\n      return (c(this._controller) ? this._controller.unloadedMemoryEstimate : 0) + (c(this._labeler) ? this._labeler.unloadedMemoryEstimate : 0);\n    }\n\n    ignoresMemoryFactor() {\n      return !1;\n    }\n\n    _labelingChanged() {\n      if (!(Z(this.i3slayer) && this._supportsLabeling)) return void (c(this._labeler) && (this._labeler.destroy(), this._labeler = null));\n      if (c(this._labeler)) return;\n      const e = new ae({\n        view: this.view,\n        layer: this.i3slayer,\n        collection: this._collection\n      });\n      this._nodeId2Meta.forEach(t => c(t) && this._addMetaToLabeler(e, t)), this._labeler = e;\n    }\n\n    _loadAsyncModule(e) {\n      return ++this._asyncModuleLoading, e.then(e => (--this._asyncModuleLoading, e), e => {\n        throw --this._asyncModuleLoading, e;\n      });\n    }\n\n    _modificationsChanged() {\n      if (!this._i3sWasmLoaded && this.hasModifications) return this._i3sWasmLoaded = ce().then(() => {\n        this._i3sWasmLoaded = !0, this._modificationsChanged(), this.notifyUpdate();\n      }), void this.notifyUpdate();\n      if (!0 !== this._i3sWasmLoaded) return;\n      const e = this.i3slayer.uid,\n            t = this.i3slayer.spatialReference;\n\n      this._worker.setModifications(e, this._layerClippingArea, this._modifications, t);\n\n      const i = le(this._layerClippingArea, this._modifications, t);\n      ue({\n        context: e,\n        modifications: i,\n        isGeodetic: t.isGeographic\n      }), this._controller.modificationsChanged();\n      const s = this.hasModifications ? new m() : null;\n      this._nodeId2Meta.forEach((e, t) => {\n        u(e) ? (this._nodeId2Meta.delete(t), this._controller.updateLoadStatus(t, !1)) : e.node.hasModifications ? (this._nodeId2Meta.delete(t), this._nodeId2MetaReloading.set(t, e)) : c(s) && s.push(e.node);\n      }), c(s) && this._nodeId2MetaReloading.forEach(e => s.push(e.node)), c(s) && s.length > 0 && (this.updateNodeModificationStatus(s), s.forAll(e => {\n        if (e.imModificationImpact !== De.Culled) {\n          const t = this._nodeId2Meta.get(e.index);\n\n          this._controller.invalidateGeometryVisibility(e.index), c(t) ? (this._nodeId2Meta.delete(e.index), this._nodeId2MetaReloading.set(e.index, t)) : this._nodeId2Meta.has(e.index) && (this._nodeId2Meta.delete(e.index), this._controller.updateLoadStatus(e.index, !1));\n        }\n      })), this.clearMemCache(), this._controller.restartNodeLoading(), this._showModifications();\n    }\n\n    _showModifications() {\n      if (c(this._modificationGraphics) && (this.view.graphics.removeMany(this._modificationGraphics), this._modificationGraphics = null), !Ze.I3S_SHOW_MODIFICATIONS || 0 === this._modifications.length) return;\n      const e = {\n        clip: [227, 227, 79, .8],\n        mask: [227, 139, 79, .8],\n        replace: [139, 227, 79, .8]\n      },\n            t = {\n        type: \"simple-fill\",\n        outline: {\n          color: [255, 255, 255],\n          width: 1\n        }\n      };\n      this._modificationGraphics = new Array();\n\n      for (const s of this._modifications) {\n        s.geometry.spatialReference = this.i3slayer.spatialReference;\n        const r = { ...t,\n          color: e[s.type]\n        };\n\n        this._modificationGraphics.push(new i({\n          geometry: s.geometry,\n          symbol: r\n        }));\n      }\n\n      this.view.graphics.addMany(this._modificationGraphics);\n    }\n\n    _addMetaToLabeler(e, t) {\n      e.addNodeMeta(t, (e, t) => this._createAttributes(e, t));\n    }\n\n    _suspendedChange(e) {\n      e ? (this._removeAllNodeDataFromStage(), this.view.elevationProvider && this.view.elevationProvider.unregister(this._elevationProvider), this._stage.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler)) : (this.view.elevationProvider.register(this._elevationContext, this._elevationProvider), this._stage.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler));\n    }\n\n    getLoadedAttributes(e) {\n      const t = this._nodeId2Meta.get(e);\n\n      if (c(t) && c(t.attributeInfo)) return t.attributeInfo.loadedAttributes;\n    }\n\n    getAttributeData(e) {\n      const t = this._nodeId2Meta.get(e);\n\n      if (c(t) && c(t.attributeInfo)) return t.attributeInfo.attributeData;\n    }\n\n    setAttributeData(e, t) {\n      const i = this._nodeId2Meta.get(e);\n\n      c(i) && c(i.attributeInfo) && (i.attributeInfo.attributeData = t, this._attributeValuesChanged(i));\n    }\n\n    async updateAttributes(e, t, i) {\n      const s = this._nodeId2Meta.get(e);\n\n      c(s) && (await this.attributeOverrides.apply(s.featureIds, t, i), s.attributeInfo = t, this._attributeValuesChanged(s));\n    }\n\n    _attributeValuesChanged(e) {\n      e.cachedRendererVersion = this._getInvalidRendererVersion(), e.filteredIds = null, c(this._labeler) && this._labeler.setNodeMetaAttributes(e, (e, t) => this._createAttributes(e, t)), this._updateEngineObject(e);\n    }\n\n    clearMemCache() {\n      c(this._memCache) && this._memCache.clear();\n    }\n\n    getVisibleNodes() {\n      const e = new Array();\n      return this._nodeId2Meta.forEach(t => c(t) && e.push(t.node)), e;\n    }\n\n    getLoadedNodeIndices(e) {\n      this._nodeId2Meta.forEach((t, i) => e.push(i)), this._nodeId2MetaReloading.forEach((t, i) => e.push(i));\n    }\n\n    _preLoadBasis() {\n      !a(\"disable-feature:i3s-basis\") && 0 != (this.supportedTextureEncodings & fe.Basis) && _(this.i3slayer.textureSetDefinitions, e => e.some(e => e.formats.some(e => \"basis\" === e.format || \"ktx2\" === e.format))) && lt();\n    }\n\n    _getVertexBufferLayout(e, t) {\n      const i = {\n        hasTexture: Ot(e.params.material),\n        hasNormals: t.normal,\n        hasRegions: t.uvRegion\n      };\n      return rt(at(this._getGeometryParameters(i)));\n    }\n\n    _getObjectIdField() {\n      return this.i3slayer.objectIdField || \"OBJECTID\";\n    }\n\n    _findGraphicNodeAndIndex(e) {\n      const t = Qe(this.i3slayer.fieldsIndex, e.attributes, this._getObjectIdField());\n      let i = null;\n      return l(this._nodeId2Meta, e => {\n        if (u(e)) return !1;\n        const s = e.featureIds.indexOf(t);\n        return -1 !== s && (i = {\n          node: e.node,\n          index: s\n        }, !0);\n      }), i;\n    }\n\n    _getGraphicIndices(e, t) {\n      const i = this._nodeId2Meta.get(e.index);\n\n      if (u(i)) return [];\n\n      const s = [],\n            r = this._getObjectIdField(),\n            o = this.i3slayer.fieldsIndex;\n\n      for (const a of t) {\n        const e = Qe(o, a.attributes, r),\n              t = i.featureIds.indexOf(e);\n        -1 !== t && s.push(t);\n      }\n\n      return s;\n    }\n\n    whenGraphicBounds(e) {\n      const t = this._findGraphicNodeAndIndex(e);\n\n      if (!t) return Promise.reject();\n\n      const i = this._getAABB(t.node.index, t.index);\n\n      return u(i) ? Promise.reject() : Promise.resolve({\n        boundingBox: i,\n        screenSpaceObjects: []\n      });\n    }\n\n    getAABBFromIntersectorTarget(e) {\n      return null == e.nodeIndex || null == e.componentIndex ? null : this._getAABB(e.nodeIndex, e.componentIndex);\n    }\n\n    _getAABB(e, t) {\n      const i = this._nodeId2Meta.get(e);\n\n      if (u(i) || null == i.featureIds || t >= i.featureIds.length) return null;\n      const s = i.objectHandle,\n            r = Ee(t, this._collection, s, new Float64Array(24)),\n            o = this.view.renderSpatialReference,\n            a = this.view.spatialReference;\n      if (!H(r, o, 0, r, a, 0, 8)) return null;\n      const n = K();\n      return W(n, r, 0, 8), n;\n    }\n\n    whenGraphicAttributes(e, t) {\n      return He(this.i3slayer, e, this._getObjectIdField(), t, () => [...this._nodeId2Meta.values()].filter(c));\n    }\n\n    getGraphicFromIntersectorTarget(e) {\n      if (null == e.nodeIndex || null == e.componentIndex) return null;\n\n      const t = this._nodeId2Meta.get(e.nodeIndex);\n\n      return u(t) || null == t.featureIds || e.componentIndex >= t.featureIds.length ? null : this._createGraphic(e.componentIndex, t);\n    }\n\n    _getCacheKey(e) {\n      return `${this._layerUrl}/v${mt}/${e.id}${this._cacheKeySuffix}`;\n    }\n\n    _getMemCacheKey(e, t = this.elevationOffset) {\n      return e + \"#\" + t;\n    }\n\n    get _idbCacheEnabled() {\n      return !this._controller.disableIDBCache && !this.hasModifications && 0 === this.elevationOffset && null != this._cacheKeySuffix;\n    }\n\n    loadCachedGPUData(e) {\n      return c(this._memCache) ? this._memCache.pop(this._getMemCacheKey(e.index)) : null;\n    }\n\n    deleteCachedGPUData(e) {\n      c(e) && this._deleteComponentObject(e);\n    }\n\n    _cacheGPUData(e, t = this.elevationOffset) {\n      if (u(this._memCache)) return void this._deleteComponentObject(e);\n      const i = this._controller.indexDepth - e.node.level;\n\n      this._memCache.put(this._getMemCacheKey(e.node.index, t), e, e.node.memory, i);\n    }\n\n    loadMissingTextures(e, t, i, s) {\n      const r = e?.filter((e, i) => {\n        if (0 == (e.usage & this.rendererTextureUsage)) return !1;\n        if (u(t)) return !0;\n        const s = Se(e.encodings, this.supportedTextureEncodings),\n              r = t[i];\n        return !!(u(r) || null == r.data || s && r.encoding !== s.encoding);\n      }) ?? [];\n      return 0 === r.length ? Promise.resolve(!1) : i(r, s).then(i => {\n        let s = 0;\n\n        for (let r = 0; r < e.length; r++) s < i.length && i[s].id === e[r].id && (t[r] = i[s], s++);\n\n        return !0;\n      });\n    }\n\n    loadCachedNodeData(e, t, i) {\n      return this._idbCacheEnabled ? this._idbCache.get(this._getCacheKey(e), t).then(s => null == s ? null : s.nodeVersion !== e.version ? (this._idbCache.remove(this._getCacheKey(e)), null) : (this.elevationInfo.mode === Nt.Absolute && (e.geometryObb = s.geometryObb), this.loadMissingTextures(s.requiredTextures, s.textureData, i, t).then(i => (i && this._idbCache.initialized && c(s.textureData) && (s.byteSize = jt(s.transformedGeometry, s.textureData), s.textureData.every(wt) && Tt(e, s) && this._idbCache.put(this._getCacheKey(e), s).catch(t => ht.warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`))), g(t), s)))) : Promise.resolve(null);\n    }\n\n    addNode(e, t, i) {\n      return St(t) ? null == t.geometryBuffer ? (this._addNodeMeta(e.index, null), Promise.resolve()) : this._addData(e, t.attributeDataInfo, () => this._transformNode(e, t, i).then(s => this._safeReschedule(() => {\n        if (u(s)) return e.hasModifications = !1, this._addCachedNodeData(e, null, i);\n        e.hasModifications = s.transformedGeometry.hasModifications;\n\n        const {\n          obb: r,\n          componentOffsets: o,\n          featureIds: a,\n          transformedGeometry: n\n        } = s,\n              l = this._controller.crsIndex,\n              d = this.view.renderSpatialReference,\n              h = Re(e.mbs, this.elevationOffset, l, d),\n              _ = tt([r.center.x, r.center.y, r.center.z], [r.extents.x, r.extents.y, r.extents.z], [r.orientation.x, r.orientation.y, r.orientation.z, r.orientation.w]);\n\n        D(_.center, _.center, h), this.elevationInfo.mode === Nt.Absolute && (e.geometryObb = _), t.geometryData.componentOffsets = o, a && (t.geometryData.featureIds = Array.from(a));\n        const m = {\n          nodeVersion: e.version,\n          geometryData: t.geometryData,\n          requiredTextures: t.requiredTextures,\n          textureData: t.textureData,\n          transformedGeometry: n,\n          globalTrafo: h,\n          geometryObb: _,\n          byteSize: jt(n, t.textureData)\n        };\n\n        if (this._idbCacheEnabled && this._idbCache.initialized && Tt(e, m)) {\n          const t = c(m.textureData) ? m.textureData.map(e => wt(e) ? e : null) : null;\n\n          this._idbCache.put(this._getCacheKey(e), { ...m,\n            textureData: t\n          }).catch(t => ht.warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`));\n        }\n\n        return this._addCachedNodeData(e, m, i);\n      }, i))) : Promise.reject();\n    }\n\n    computeVisibilityObb(e) {\n      return Ge(e, this.view.renderSpatialReference, this._controller.crsIndex, this.i3slayer.spatialReference, this.elevationOffset, this._modifications);\n    }\n\n    _transformNode(e, t, i) {\n      const s = t.geometryData.geometries,\n            r = new Array(s.length);\n\n      for (let u = 0; u < s.length; ++u) r[u] = this._getVertexBufferLayout(s[u], t.geometryDescriptor);\n\n      const o = e.mbs,\n            a = this.elevationOffset,\n            n = this._controller.crsIndex,\n            l = this._controller.crsVertex,\n            d = this.view.renderSpatialReference,\n            h = Ne(o, a, n),\n            c = Re(o, a, n, d),\n            _ = G(n, l),\n            m = G(l, d);\n\n      if (u(_) || u(m)) return Promise.resolve(null);\n      const g = {\n        context: this.i3slayer.uid,\n        geometryBuffer: t.geometryBuffer,\n        geometryData: t.geometryData,\n        geometryDescriptor: t.geometryDescriptor,\n        layouts: r,\n        localOrigin: h,\n        globalTrafo: c,\n        mbs: o,\n        obb: e.serviceObb,\n        elevationOffset: a,\n        needNormals: !this._isIntegratedMesh && this._controller.isMeshPyramid,\n        normalReferenceFrame: this.i3slayer.normalReferenceFrame || \"none\",\n        indexToVertexProjector: _,\n        vertexToRenderProjector: m\n      };\n      return this._worker.invoke(g, i);\n    }\n\n    get supportsNodeCrossFading() {\n      return !this.view?._stage?.renderView.shadowsEnabled;\n    }\n\n    get nodeCrossfadingEnabled() {\n      return this.supportsNodeCrossFading && (this.lodCrossfadeinDuration > 0 || this.lodCrossfadeoutDuration > 0 || this.lodCrossfadeUncoveredDuration > 0);\n    }\n\n    get nodeFadeoutEnabled() {\n      return this.supportsNodeCrossFading && this.lodCrossfadeoutDuration > 0;\n    }\n\n    _setNewNodeOpacity(e) {\n      const t = this.nodeCrossfadingEnabled ? 0 : this.fullOpacity;\n\n      this._setNodeOpacity(e, t);\n    }\n\n    addCachedGPUData(e, t, i) {\n      if (this.elevationInfo.mode === Nt.Absolute && (e.geometryObb = it(this._collection.getComponentObb(t.objectHandle))), !this._controller.isGeometryVisible(e)) return void this._cacheGPUData(t);\n      c(this._labeler) && this._addMetaToLabeler(this._labeler, t);\n      const s = e.index;\n      this._addNodeMeta(s, t), this.updateNodeState(s, i), this._collection.setObjectVisibility(t.objectHandle, ot.Visible), this._updateMaterial(t), this._setNewNodeOpacity(t), this.elevationInfo.mode !== Nt.Absolute && this._scheduleElevationAlign(e.index), this._updateEngineObject(t), this._highlights.objectCreated(t), c(this._treeDebugger) && this._treeDebugger.update();\n    }\n\n    addCachedNodeData(e, t, i, s) {\n      return this._addData(e, i, () => this._addCachedNodeData(e, t, s));\n    }\n\n    async _addCachedNodeData(e, t, i) {\n      if (this.suspended || !this._controller.isGeometryVisible(e)) return void this._removeNodeStageData(e.index, this.elevationOffset, this._nodeId2MetaReloading);\n      if (u(t)) return void this._addNodeMeta(e.index, null);\n\n      const s = this._addTasks.get(e.index),\n            {\n        geometryData: r,\n        transformedGeometry: o,\n        globalTrafo: n\n      } = t;\n\n      await this.attributeOverrides.apply(r.featureIds, s.attributeInfo, i);\n      const l = c(t.textureData) ? t.textureData.filter(e => c(e) && 0 != (e.usage & this.rendererTextureUsage)) : [];\n      !a(\"disable-feature:i3s-basis\") && l.some(e => c(e) && (e.encoding === fe.Basis || e.encoding === fe.KTX2)) && (await lt()), e.memory = 0;\n\n      const {\n        componentOffsets: d,\n        geometries: h,\n        featureIds: _\n      } = r,\n            m = this._collection,\n            g = h[0],\n            {\n        layout: p,\n        indices: f,\n        interleavedVertexData: b,\n        positionData: y,\n        hasColors: v\n      } = o,\n            I = this._materialParameters(g, p),\n            M = d || new Uint32Array([0, f ? f.length : b.byteLength / p[0].stride]),\n            C = {\n        vertices: {\n          data: b,\n          count: b.byteLength / p[0].stride,\n          layoutParameters: I.geometryParams\n        },\n        positionData: {\n          positions: y.data,\n          indices: y.indices\n        },\n        indices: f,\n        componentOffsets: M\n      },\n            E = g.transformation ? j(g.transformation) : T();\n\n      S(E, n, E);\n      const D = w(P(), E),\n            A = x(O(), E),\n            R = this.view.renderSpatialReference,\n            N = this.view.basemapTerrain.spatialReference,\n            F = P(),\n            V = [1, 1, 1];\n      L(D, R, V, N) || ht.errorOnce(\"Unsupported coordinate system for IM overlay\"), k(D, R, F, N);\n\n      const H = m.createObject({\n        toMapSpace: U(F[0], F[1], V[0], V[1]),\n        geometry: C,\n        obb: t.geometryObb,\n        transform: {\n          position: D,\n          rotationScale: A\n        }\n      }),\n            G = I.geometryParams.textureCoordinates === nt.Atlas,\n            {\n        textures: B,\n        texturePromise: q\n      } = this._initMaterialAndTextures(H, I.material, l, G);\n\n      e.memory += this._memEstimateGeometryAdded(H), e.memory += B.reduce((e, t) => e + (c(t) ? this._memEstimateTextureAdded(t) : 0), 0);\n      const z = !!I.material.hasParametersFromSource,\n            K = \"blend\" !== I.material.alphaMode && I.material.metallicRoughness.baseColorFactor[3] >= 1,\n            W = new ut(e, _, H, this._getInvalidRendererVersion(), s.attributeInfo, {\n        hasParametersFromSource: z,\n        isOpaque: K\n      }, B);\n      s.meta = W, !this._hasTextures && t.requiredTextures?.some(({\n        usage: e\n      }) => 0 != (e & pe.ColorTextures)) && (this._hasTextures = !0), this._hasData = !0, this._hasColors = this._hasColors || v, this._hasTextures = this._hasTextures || !!e.resources.texture, this.notifyChange(\"hasTexturesOrVertexColors\");\n      const $ = this.slicePlaneEnabled;\n      return Promise.all([this._addOrUpdateEdgeRendering(W), q]).then(([t, s]) => (c(t) && t.updateObjectVisibility(W.objectHandle, !1).catch(this._logEdgeViewError), this._safeReschedule(() => {\n        const i = this._addTasks.get(e.index);\n\n        if (!i) return;\n        if (this._addNodeMeta(e.index, W), i.meta = null, this.suspended) return void this._removeNodeStageData(e.index, this.elevationOffset);\n        m.setObjectVisibility(H, ot.Visible), c(t) && t.updateObjectVisibility(W.objectHandle, !0).catch(this._logEdgeViewError), W.attributeInfo = i.attributeInfo;\n        const s = W.cachedRendererVersion !== this._rendererVersion,\n              r = $ !== this.slicePlaneEnabled;\n\n        this._updateElevationOffsets(W);\n\n        const o = W.elevationOffsets;\n\n        this._updateComponentData(W);\n\n        const a = this._applyFiltersToNode(W);\n\n        (s || c(t) && (r || a || o)) && this._addOrUpdateEdgeRendering(W), c(this._labeler) && this._addMetaToLabeler(this._labeler, W), this._visibleGeometryChanged(W, ft.ADD), this._highlights.objectCreated(W), this._updateMaterial(W), this._setNewNodeOpacity(W), c(this._treeDebugger) && this._treeDebugger.update();\n      }, i))).catch(e => {\n        throw c(s.meta) && (this._cacheGPUData(s.meta), s.meta = null), e;\n      });\n    }\n\n    _addNodeMeta(e, t) {\n      if (this._removeNodeStageData(e, this.elevationOffset, this._nodeId2MetaReloading), this._nodeId2Meta.has(e)) {\n        ht.error(\"Removing duplicated node\");\n\n        const t = this._nodeId2Meta.get(e);\n\n        c(t) && this._deleteComponentObject(t);\n      } else this._controller.updateLoadStatus(e, !0);\n\n      c(t) && (t.lodCrossfadeProgress = null, this.nodeCrossfadingEnabled && Rt(t.cachedEdgeMaterials, 0)), this._nodeId2Meta.set(e, t);\n    }\n\n    _updateElevationOffsets(e) {\n      const t = this.view.renderSpatialReference,\n            i = this.elevationInfo;\n      if (u(t) || i.mode === Nt.Absolute) return void (e.elevationOffsets = null);\n\n      const s = this.view.basemapTerrain,\n            r = this._collection.getObjectTransform(e.objectHandle);\n\n      e.elevationOffsets = e.elevationOffsets ?? [];\n      const o = Ft,\n            a = Pt;\n\n      for (let n = 0; n < e.featureIds.length; n++) {\n        this._collection.getComponentAabb(e.objectHandle, n, a, !0), A(o, (a[0] + a[3]) / 2, (a[1] + a[4]) / 2, a[2]), R(o, o, r.rotationScale), N(o, o, r.position);\n        const l = s.getElevation(o[0], o[1], o[2], t),\n              d = i.mode === Nt.OnTheGround ? this.view.renderCoordsHelper.getAltitude(o) : 0;\n        e.elevationOffsets[n] = i.offset + (c(l) ? l - d : 0);\n      }\n    }\n\n    _elevationChanged(e) {\n      const t = this._controller.crsIndex;\n      B(e.extent, e.spatialReference, xt, t);\n\n      const i = this._controller.updateElevationChanged(xt, t);\n\n      u(i) || i.forAll(e => {\n        c(this._nodeId2Meta.get(e)) && this._scheduleElevationAlign(e);\n      });\n    }\n\n    _scheduleElevationAlign(e) {\n      let t = this._elevationTask;\n      u(t) && (t = new ye(this.view.resourceController.scheduler, e => {\n        const t = this._nodeId2Meta.get(e);\n\n        c(t) && (this._updateElevationOffsets(t), this._updateComponentData(t), this._updateEdgeRendering(t), c(this._labeler) && this._labeler.updateLabelPositions(t));\n      }), this._elevationTask = t), t.schedule(e);\n    }\n\n    _elevationInfoChanged(e, t) {\n      const i = e.mode !== Nt.Absolute,\n            s = null != t && t !== e && t.mode !== Nt.Absolute;\n      i && !s ? (this.handles.add(this.view.basemapTerrain.on(\"elevation-change\", e => this._elevationChanged(e)), \"elevation\"), this._controller.removeAllGeometryObbs()) : s && !i && this.handles.remove(\"elevation\"), this._intersectionHandler.updateElevationAlignState(i, this.view.state.viewingMode), this._nodeId2Meta.forEach(e => {\n        c(e) && (s && !i && (e.node.geometryObb = it(this._collection.getComponentObb(e.objectHandle))), this._updateElevationOffsets(e), this._updateComponentData(e), this._updateEdgeRendering(e), c(this._labeler) && this._labeler.updateLabelPositions(e));\n      });\n    }\n\n    _safeReschedule(e, t) {\n      return g(t), this._controller.reschedule(e, t);\n    }\n\n    _materialParameters(e, t) {\n      const i = c(e.params.material) ? e.params.material : we(),\n            s = t.some(e => \"uvRegion\" === e.name),\n            r = t.some(e => \"normalCompressed\" === e.name),\n            o = Ot(i);\n      return {\n        geometryParams: this._getGeometryParameters({\n          hasTexture: o,\n          hasNormals: r,\n          hasRegions: s\n        }),\n        material: i\n      };\n    }\n\n    _initMaterialAndTextures(e, t, i, s) {\n      const r = this._stage.renderView,\n            o = i.map(e => je(e, t, s, r));\n\n      this._stage.addMany(o);\n\n      let a = null;\n      return this._collection.updateMaterial(e, e => {\n        a = Te(e, t, o, i, this.view._stage.renderView.textureRepository, {\n          rendererTextureUsage: this.rendererTextureUsage,\n          usePBR: this._usePBR(),\n          isIntegratedMesh: this._isIntegratedMesh,\n          slicePlaneEnabled: this.slicePlaneEnabled,\n          viewSpatialReference: this.view.spatialReference\n        }), this._updateMaterialOverlay(e);\n      }), {\n        textures: o,\n        texturePromise: a\n      };\n    }\n\n    _getGeometryParameters(e) {\n      return {\n        textureCoordinates: e.hasTexture ? e.hasRegions ? nt.Atlas : nt.Default : nt.None,\n        colors: this._hasVertexColors,\n        normals: e.hasNormals && !this._isIntegratedMesh\n      };\n    }\n\n    _addData(e, t, i) {\n      let s = this._addTasks.get(e.index);\n\n      return s ? s.attributeInfo = t : (s = { ...p(),\n        attributeInfo: t,\n        meta: null\n      }, this._addTasks.set(e.index, s), i().then(s.resolve, s.reject).then(() => this._addTasks.delete(e.index)).catch(t => {\n        throw this._addTasks.delete(e.index), t;\n      })), s.promise;\n    }\n\n    _clearAddTasks() {\n      this._addTasks.forEach(e => {\n        c(e.meta) && (this._cacheGPUData(e.meta), e.meta = null);\n      }), this._addTasks.clear();\n    }\n\n    _clippingAreaChanged() {\n      const e = this.view.renderSpatialReference,\n            t = this.i3slayer.spatialReference,\n            i = X();\n      this._renderClippingArea = et(this.view.clippingArea, i, e) ? i : null;\n      const s = X();\n      this._layerClippingArea = et(this.view.clippingArea, s, t) ? s : null, this._filterChange(), this._controller && this._controller.updateClippingArea(this.view.clippingArea), this._isIntegratedMesh && this._modificationsChanged();\n    }\n\n    _geometryFilterChange() {\n      this._controller.geometryFilterChanged(this.hasGeometryFilter);\n    }\n\n    get hasGeometryFilter() {\n      return !1;\n    }\n\n    _filterChange() {\n      this._applyFilters(!1);\n    }\n\n    _applyFilters(e) {\n      this._filters = this.getFilters(), e ? this._controller && this._controller.requestUpdate() : this._nodeId2Meta.forEach(e => {\n        c(e) && this._applyFiltersToNode(e) && (this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, ft.UPDATE));\n      });\n    }\n\n    getFilters() {\n      const e = [],\n            t = this._renderClippingArea;\n      return c(t) && e.push((e, i) => this._boundingRectFilter(e, i, t)), e;\n    }\n\n    addSqlFilter(e, t, i) {\n      if (c(t)) {\n        const s = t.fieldNames;\n        e.push((e, r) => this._sqlFilter(e, r, t, s, i));\n      }\n    }\n\n    _sqlFilter(e, t, i, s, r) {\n      const o = {},\n            a = this._createLayerGraphic(o),\n            n = this.i3slayer.objectIdField,\n            l = t.featureIds,\n            d = c(t.attributeInfo) && t.attributeInfo.attributeData;\n\n      s.every(e => null != d[e] || e === n) && Le(e, l, e => {\n        o[n] = l[e];\n\n        for (const i of s) i !== n && (o[i] = ke(d[i], e));\n\n        try {\n          return i.testFeature(a);\n        } catch (t) {\n          return r(t), !1;\n        }\n      });\n    }\n\n    _boundingRectNodeTest(e, t) {\n      return q(e.node.mbs, this._controller.crsIndex, Et, this.view.renderSpatialReference), Be(t, Et);\n    }\n\n    _boundingRectFeatureTest(e, t, i) {\n      return this._collection.getComponentAabb(e.objectHandle, t, bt), $(bt, yt), Y(i, yt);\n    }\n\n    _boundingRectFilter(e, t, i) {\n      const s = this._collection,\n            r = this._boundingRectNodeTest(t, i);\n\n      if (r === qe.INSIDE) return;\n      if (r === qe.OUTSIDE) return void (e.length = 0);\n      const o = s.getComponentCount(t.objectHandle);\n      if (o.invisible + o.visible !== t.featureIds.length) return;\n\n      const a = this._transformClippingArea(vt, i, t.objectHandle);\n\n      Le(e, t.featureIds, e => this._boundingRectFeatureTest(t, e, a));\n    }\n\n    _transformClippingArea(e, t, i) {\n      const s = this._collection.getObjectTransform(i),\n            r = s.position,\n            o = s.rotationScale;\n\n      return e[0] = (t[0] - r[0]) / o[0], e[1] = (t[1] - r[1]) / o[4], e[2] = (t[2] - r[0]) / o[0], e[3] = (t[3] - r[1]) / o[4], e;\n    }\n\n    _addOrUpdateEdgeRendering(e, t = !0) {\n      const i = this._edgeView;\n      if (u(i)) return Promise.resolve(null);\n\n      const s = e.objectHandle,\n            r = i.hasObject(s),\n            {\n        hasEdges: o,\n        perFeatureEdgeMaterials: a\n      } = this._getFilteredEdgeMaterials(e),\n            n = {\n        hasSlicePlane: this.slicePlaneEnabled\n      };\n\n      if (o && r) {\n        if (this.nodeCrossfadingEnabled) {\n          Rt(a, this.getNodeOpacity(e));\n        }\n\n        return i.updateAllComponentMaterials(s, a, n, t).catch(this._logEdgeViewError), i.updateObjectVisibility(s, !0).catch(this._logEdgeViewError), i.updateAllVerticalOffsets(s, e.elevationOffsets).catch(this._logEdgeViewError), Promise.resolve(i);\n      }\n\n      return o && !r ? this._collection.addEdges(s, i, a, n).then(t => (e.edgeMemoryUsage = t, e.node.memory += t, i.updateAllVerticalOffsets(s, e.elevationOffsets).catch(this._logEdgeViewError), i)) : (!o && r && (e.node.memory -= e.edgeMemoryUsage, e.edgeMemoryUsage = 0, i.removeObject(s)), Promise.resolve(null));\n    }\n\n    _logEdgeViewError(e) {\n      f(e) || ht.error(\"Error while processing edges. Edges on this layer might not diplay correctly\", this.i3slayer, e);\n    }\n\n    _applyFiltersToNode(e) {\n      return !!this._applyFiltersToNodeComponents(e) && (c(this._labeler) && this._labeler.applyFilterChange(e), !0);\n    }\n\n    _applyFiltersToNodeComponents(e) {\n      const t = this._collection,\n            i = 0 === t.getComponentCount(e.objectHandle).invisible;\n      if (t.setAllComponentVisibilities(e.objectHandle, \"all\"), 0 === this._filters.length) return e.filteredIds = null, !i;\n      if (this._updateCachedFilteredIds(e), e.filteredIds === e.featureIds) return !i;\n\n      const s = this._computeFilteredComponentIndices(e);\n\n      return t.setAllComponentVisibilities(e.objectHandle, s), !0;\n    }\n\n    _updateCachedFilteredIds(e) {\n      null != e.filteredIds && e.appliedFilters === this._filters || (e.filteredIds = this._computeFilteredIds(e), e.appliedFilters = this._filters);\n    }\n\n    _computeFilteredIds(e) {\n      const t = e.featureIds.slice();\n\n      for (const i of this._filters) if (i(t, e), 0 === t.length) break;\n\n      return t.length === e.featureIds.length ? e.featureIds : t;\n    }\n\n    _computeFilteredComponentIndices(e) {\n      const t = new Array();\n      return e.featureIds.forEach((i, s) => {\n        e.filteredIds[t.length] === i && t.push(s);\n      }), t;\n    }\n\n    _removeAllNodeDataFromStage(e = this.elevationOffset) {\n      this._nodeId2Meta.forEach((t, i) => this._removeNodeStageData(i, e)), this._nodeId2MetaReloading.forEach((t, i) => this._removeNodeStageData(i, e, this._nodeId2MetaReloading)), this._elevationTask = h(this._elevationTask);\n    }\n\n    removeNode(e) {\n      const t = this.elevationOffset;\n      this._removeNodeStageData(e, t), this._removeNodeStageData(e, t, this._nodeId2MetaReloading), c(this._elevationTask) && this._elevationTask.remove(e);\n    }\n\n    _removeNodeStageData(e, t, i = this._nodeId2Meta) {\n      i.has(e) && this._controller.updateLoadStatus(e, !1);\n      const s = i.get(e);\n      u(s) ? i.delete(e) : (this._collection.setObjectVisibility(s.objectHandle, ot.Hidden), c(this._edgeView) && this._edgeView.hasObject(s.objectHandle) && this._edgeView.updateObjectVisibility(s.objectHandle, !1).catch(this._logEdgeViewError), this._visibleGeometryChanged(s, ft.REMOVE), c(this._labeler) && this._labeler.removeNodeMeta(s), i.delete(e), this._highlights.objectDeleted(s), i === this._nodeId2Meta ? (this._cacheGPUData(s, t), this.nodeCrossfadingEnabled && this._crossfadeHelper.stopNodeFading(s)) : this._deleteComponentObject(s), c(this._treeDebugger) && this._treeDebugger.update());\n    }\n\n    _deleteComponentObject(e) {\n      if (c(this._edgeView) && this._edgeView.removeObject(e.objectHandle), this._memEstimateGeometryRemoved(e.objectHandle), this._collection.destroyObject(e.objectHandle), e.textures) for (const t of e.textures) this._memEstimateTextureRemoved(t), this._stage.remove(t);\n    }\n\n    updateNodeState(e, t) {\n      const i = this._nodeId2Meta.get(e);\n\n      c(i) && this._collection.updateMaterial(i.objectHandle, e => e.polygonOffsetEnabled = t === Ae.Hole);\n    }\n\n    _invalidateAllSymbols() {\n      this._rendererVersion = ze(this._rendererVersion, 1), this._controller && this._controller.requestUpdate();\n    }\n\n    _getInvalidRendererVersion() {\n      return ze(this._rendererVersion, -1);\n    }\n\n    async _rendererChange(e) {\n      if (this._currentRenderer = e, this.notifyChange(\"rendererTextureUsage\"), this._rendererVersion = ze(this._rendererVersion, 1), this._rendererFields = null, this._colorVariable = null, this._opacityVariable = null, this._invalidateAllSymbols(), e && (this._rendererFields = await e.getRequiredFields(this.i3slayer.fieldsIndex)), this._updateSymbologyFields(), !this._arcade && e && \"arcadeRequired\" in e && e.arcadeRequired && (this._arcade = await se()), e && \"visualVariables\" in e && e.visualVariables) for (const t of e.visualVariables) \"color\" === t.type ? this._colorVariable = t : \"opacity\" === t.type ? this._opacityVariable = t : ht.warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);\n      if (e) for (const t of e.getSymbols()) \"mesh-3d\" !== t.type && ht.error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);\n      this._controller && this._controller.requestUpdate();\n    }\n\n    _getCachedEdgeMaterials(e) {\n      return this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e), e.cachedEdgeMaterials;\n    }\n\n    _getComponentParameters(e) {\n      this._hasComponentData && e.cachedRendererVersion !== this._rendererVersion && this._updateCachedRendererData(e);\n      const t = e.cachedSymbology;\n      return (i, s) => {\n        const r = 5 * i;\n        V(s.externalColor, t[r + 0] / 255, t[r + 1] / 255, t[r + 2] / 255, t[r + 3] / 255), s.externalColorMixMode = t[r + 4] & (1 << _t.CastShadows) - 1, s.castShadows = 0 != (t[r + 4] & 1 << _t.CastShadows), s.pickable = 0 != (t[r + 4] & 1 << _t.Pickable), s.elevationOffset = e.elevationOffsets?.[i] ?? 0;\n      };\n    }\n\n    _getSymbolInfo(e, t) {\n      const i = e && e.getSymbol(t, {\n        arcade: this._arcade\n      });\n      if (!(i instanceof re)) return null;\n      const s = i.id;\n      if (this._symbolInfos.has(s)) return this._symbolInfos.get(s);\n      const r = Ke(i);\n      return this._symbolInfos.set(s, r), r;\n    }\n\n    _setSymbologyOverride(e, t) {\n      this._symbologyOverride !== e && (this._symbologyOverride = e, this._symbologyOverrideFields = t, this._invalidateAllSymbols(), this._updateSymbologyFields());\n    }\n\n    _updateSymbologyFields() {\n      this._symbologyFields = c(this._symbologyOverrideFields) && this._symbologyOverrideFields.length > 0 ? c(this._rendererFields) && this._rendererFields.length > 0 ? J(this.i3slayer.fieldsIndex, [...this._rendererFields, ...this._symbologyOverrideFields]) : this._symbologyOverrideFields : this._rendererFields;\n    }\n\n    _updateCachedRendererData(e) {\n      if (e.cachedRendererVersion = this._rendererVersion, !this._hasComponentData) return;\n      const t = this._tmpAttributeOnlyGraphic,\n            i = {};\n      t.attributes = i;\n      const s = this._currentRenderer,\n            r = c(e.attributeInfo) && e.attributeInfo.attributeData,\n            o = null != e.featureIds ? this.i3slayer.objectIdField : null,\n            a = null != r && c(this._symbologyFields) && this._symbologyFields.length > 0,\n            n = a ? [] : null,\n            l = a ? [] : null;\n      if (a && c(this._symbologyFields)) for (const c of this._symbologyFields) {\n        const e = r[c];\n        e && (n.push(c), l.push(e));\n      }\n      e.cachedSymbology || (e.cachedSymbology = new Uint8Array(5 * e.featureIds.length));\n\n      const d = {\n        color: Mt,\n        castShadows: !0,\n        pickable: !0,\n        colorMixMode: Je.Multiply,\n        edgeMaterial: null\n      },\n            h = this.fullOpacity,\n            _ = this.nodeCrossfadingEnabled ? this.getNodeOpacity(e) : h;\n\n      let m = null,\n          g = dt.OPAQUE,\n          p = We,\n          f = 0;\n\n      for (let b = 0; b < e.featureIds.length; b++) {\n        if (null != o && (i[o] = e.featureIds[b]), a) for (let e = 0; e < n.length; e++) i[n[e]] = ke(l[e], b);\n\n        const r = this._getSymbolInfo(s, t);\n\n        let h = null,\n            y = null;\n\n        if (s && \"visualVariables\" in s) {\n          if (this._colorVariable) {\n            const e = te(this._colorVariable, t, {\n              color: Ct,\n              arcade: this._arcade\n            });\n            e && (h = Mt, h[0] = e.r / 255, h[1] = e.g / 255, h[2] = e.b / 255, this._opacityVariable || null === e.a || (y = e.a));\n          }\n\n          this._opacityVariable && (y = ie(this._opacityVariable, t, {\n            arcade: this._arcade\n          }));\n        }\n\n        if (r && r.material) {\n          const e = r.material;\n          h = u(h) || u(y) ? ge(h, y, e.color, e.alpha, ct, Mt) : ge(h, y, null, null, ct, Mt);\n        }\n\n        if (u(h) && (h = Mt, h[0] = 1, h[1] = 1, h[2] = 1, h[3] = 1), d.pickable = !0, d.castShadows = !r || r.castShadows, d.colorMixMode = r && r.material ? r.material.colorMixMode : Je.Multiply, d.edgeMaterial = r ? r.edgeMaterial : null, c(this._symbologyOverride) && (d.color = h, this._symbologyOverride(t, d), h = d.color), c(d.edgeMaterial)) {\n          const t = h[3] <= 0 ? dt.INVISIBLE : h[3] >= 1 && (e.material.isOpaque || d.colorMixMode === Je.Replace) ? dt.OPAQUE : dt.TRANSPARENT;\n          d.edgeMaterial === m && t === g || (p = { ...d.edgeMaterial,\n            opacity: _,\n            objectTransparency: t\n          }, m = d.edgeMaterial, g = t), e.cachedEdgeMaterials[b] = p;\n        } else e.cachedEdgeMaterials[b] = We;\n\n        e.cachedSymbology[f + 0] = Math.round(255 * h[0]), e.cachedSymbology[f + 1] = Math.round(255 * h[1]), e.cachedSymbology[f + 2] = Math.round(255 * h[2]), e.cachedSymbology[f + 3] = Math.round(255 * h[3]), e.cachedSymbology[f + 4] = d.colorMixMode | +d.castShadows << _t.CastShadows | +d.pickable << _t.Pickable, f += 5;\n      }\n    }\n\n    _getFilteredEdgeMaterials(e) {\n      const t = this._getCachedEdgeMaterials(e);\n\n      if (this.nodeCrossfadingEnabled || Rt(t, this.fullOpacity), u(e.filteredIds)) {\n        return {\n          hasEdges: t.some(e => e !== We),\n          perFeatureEdgeMaterials: t\n        };\n      }\n\n      let i = 0,\n          s = !1;\n      const r = t.map((t, r) => e.featureIds[r] !== e.filteredIds[i] ? We : (s = s || t !== We, i++, t));\n      return {\n        hasEdges: s,\n        perFeatureEdgeMaterials: r\n      };\n    }\n\n    _updateComponentData(e) {\n      if (!this._hasComponentData) return;\n\n      const t = e.objectHandle,\n            i = this._getComponentParameters(e);\n\n      this._collection.setComponentData(t, i), this._stage.renderView.requestRender();\n    }\n\n    _reloadAll(e = this.elevationOffset) {\n      this._removeAllNodeDataFromStage(e), null != this._controller && this._controller.restartNodeLoading();\n    }\n\n    _opacityChange(e) {\n      this.nodeCrossfadingEnabled && this._crossfadeHelper.stopAllNodeFading(), this._nodeId2Meta.forEach(t => {\n        u(t) || (this._collection.updateMaterial(t.objectHandle, t => t.objectOpacity = e), Rt(t.cachedEdgeMaterials, e), this._updateEdgeRendering(t));\n      });\n    }\n\n    _updateMaterial(e) {\n      this._collection.updateMaterial(e.objectHandle, e => {\n        e.commonMaterialParameters.hasSlicePlane = this.slicePlaneEnabled, e.usePBR = this._usePBR(), this._updateMaterialOverlay(e);\n      });\n    }\n\n    _updateMaterialOverlay(e) {}\n\n    _updateEngineObject(e) {\n      this._updateComponentData(e), this._applyFiltersToNode(e), this._addOrUpdateEdgeRendering(e), this._visibleGeometryChanged(e, ft.UPDATE);\n    }\n\n    _slicePlaneEnabledChange(e) {\n      this._intersectionHandler && (this._intersectionHandler.slicePlaneEnabled = e), c(this._labeler) && (this._labeler.slicePlaneEnabled = e), this._nodeId2Meta.forEach(t => {\n        u(t) || (this._collection.updateMaterial(t.objectHandle, t => {\n          t.commonMaterialParameters.hasSlicePlane = e;\n        }), this._updateEdgeRendering(t, !1));\n      });\n    }\n\n    _updatePBR() {\n      this._nodeId2Meta.forEach(e => {\n        u(e) || this._collection.updateMaterial(e.objectHandle, e => {\n          e.usePBR = this._usePBR();\n        });\n      }), this._hasLoadedPBRTextures = !0;\n    }\n\n    _usePBR() {\n      return !this._isIntegratedMesh && this.view.qualitySettings.physicallyBasedRenderingEnabled;\n    }\n\n    _updateEdgeRendering(e, t = !0) {\n      c(this._edgeView) && this._edgeView.hasObject(e.objectHandle) && this._addOrUpdateEdgeRendering(e, t);\n    }\n\n    _forAllNodes(e) {\n      this._nodeId2Meta.forEach(e);\n    }\n\n    _forAllFeatures(e, t, i = de.VISIBLE_ONLY) {\n      l(this._nodeId2Meta, s => {\n        if (u(s)) return !1;\n\n        if (c(t)) {\n          switch (t(s)) {\n            case he.EXIT:\n              return !0;\n\n            case he.SKIP:\n              return !1;\n          }\n        }\n\n        let r = he.CONTINUE;\n\n        switch (i) {\n          case de.ALL:\n            r = this._forAllFeaturesOfNode(s, e);\n            break;\n\n          case de.VISIBLE_ONLY:\n            r = this._forVisibleFeaturesOfNode(s, e);\n            break;\n\n          case de.ALL_IN_CLIPPING_AREA:\n            r = this._forAllFeaturesOfNodeInClippingArea(s, e);\n        }\n\n        return r === he.EXIT;\n      });\n    }\n\n    _forAllFeaturesOfNode(e, t) {\n      let i = he.CONTINUE;\n      const s = e.featureIds;\n\n      for (let r = 0; r < s.length; r++) if (i = t(s[r], r, e), i === he.EXIT) return i;\n\n      return i;\n    }\n\n    _forVisibleFeaturesOfNode(e, t) {\n      let i = he.CONTINUE;\n      const s = e.featureIds;\n      return this._collection.forEachVisibleComponent(e.objectHandle, r => (i = t(s[r], r, e), i === he.CONTINUE)), i;\n    }\n\n    _forAllFeaturesOfNodeInClippingArea(e, t) {\n      if (u(this._renderClippingArea)) return this._forAllFeaturesOfNode(e, t);\n\n      const i = this._boundingRectNodeTest(e, this._renderClippingArea);\n\n      if (i === qe.OUTSIDE) return he.CONTINUE;\n      if (i === qe.INSIDE) return this._forAllFeaturesOfNode(e, t);\n      const s = he.CONTINUE,\n            r = e.featureIds,\n            o = e.objectHandle,\n            a = $e(this._renderClippingArea, this._collection.getObjectTransform(o));\n\n      for (let n = 0; n < r.length; n++) {\n        if (!this._boundingRectFeatureTest(e, n, a)) continue;\n        const i = t(r[n], n, e);\n        if (i === he.EXIT) return i;\n      }\n\n      return s;\n    }\n\n    _createAttributes(e, t) {\n      const i = {};\n      null != t.featureIds && (i[this._getObjectIdField()] = t.featureIds[e]);\n      const s = c(t.attributeInfo) && t.attributeInfo.attributeData;\n      if (c(s)) for (const r of Object.keys(s)) i[r] = ke(s[r], e);\n      return i;\n    }\n\n    _createGraphic(e, t) {\n      return this._createLayerGraphic(this._createAttributes(e, t));\n    }\n\n    highlight(e) {\n      const t = this._highlights;\n\n      if (\"number\" == typeof e || e instanceof i ? e = [e] : e instanceof o && (e = e.toArray()), Array.isArray(e) && e.length > 0) {\n        if (e[0] instanceof i) {\n          const i = e,\n                s = this.i3slayer.fieldsIndex,\n                r = this._getObjectIdField(),\n                o = i.map(e => Qe(s, e.attributes, r)),\n                {\n            set: a,\n            handle: n\n          } = t.acquireSet();\n\n          return t.setFeatureIds(a, o), n;\n        }\n\n        if (\"number\" == typeof e[0]) {\n          const i = e,\n                {\n            set: s,\n            handle: r\n          } = t.acquireSet();\n          return t.setFeatureIds(s, i), r;\n        }\n      }\n\n      return At;\n    }\n\n    _visibleGeometryChanged(e, t) {\n      this._elevationProvider && (this._elevationProvider.objectChanged(e.node), null == this._visibleGeometryChangedSchedulerHandle && (this._visibleGeometryChangedSchedulerHandle = v(() => {\n        this.emit(\"visible-geometry-changed\"), this._visibleGeometryChangedSchedulerHandle = null;\n      })), this._updateSnappingSources(e, t));\n    }\n\n    get performanceInfo() {\n      const e = {\n        displayedNumberOfFeatures: 0,\n        maximumNumberOfFeatures: 0,\n        totalNumberOfFeatures: 0,\n        core: null,\n        index: 0,\n        nodes: this._nodeId2Meta.size,\n        \"Total GPU Memory Estimate\": (this.gpuMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n        \"Geometry Memory Estimate\": (this.geoMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n        \"Texture Memory Estimate\": (this.texMemoryEstimate / 1048576).toFixed(1) + \"MB\",\n        \"Unloaded Memory Estimate\": (this.getUnloadedMemory() / 1048576).toFixed(1) + \"MB\"\n      };\n      return c(this._memCache) && (e.MemCache = Math.round(100 * this._memCache.hitRate) + \"% hit\"), this._controller && (this._idbCacheEnabled && (e.IDBCache = Math.round(100 * this._idbCache.getHitRate()) + \"% hit\"), this._controller.updateStats(e)), e;\n    }\n\n    get test() {\n      const e = this;\n      return {\n        controller: this._controller,\n        labeler: this._labeler,\n\n        get visibleObjectIds() {\n          const t = [];\n          return e._forAllFeatures(e => (t.push(e), he.CONTINUE), null, de.VISIBLE_ONLY), t.sort((e, t) => e - t), t;\n        },\n\n        get numNodes() {\n          return e._nodeId2Meta.size;\n        }\n\n      };\n    }\n\n    getNodeOpacityByIndex(e) {\n      const t = this._nodeId2Meta.get(e);\n\n      return this.getNodeOpacity(t);\n    }\n\n    getNodeOpacity(e) {\n      return c(e) ? this._collection.getMaterial(e.objectHandle).objectOpacity : 0;\n    }\n\n    isNodeFullyFadedIn(e) {\n      return this._crossfadeHelper.isNodeFullyFadedIn(e);\n    }\n\n    getNodeCrossfadeMetaData(e) {\n      return this._nodeId2Meta.get(e);\n    }\n\n    markNodeToRemove(e) {\n      this._controller && this._controller.markNodeToRemove(e);\n    }\n\n    removeMarkedNodes() {\n      this._controller && this._controller.removeMarkedNodes();\n    }\n\n    foreachCrossfadeNode(e) {\n      this._nodeId2Meta.forEach((t, i) => e(i, t));\n    }\n\n    fadeNode(e, t, i) {\n      if (!this.nodeCrossfadingEnabled) return;\n\n      const s = this._nodeId2Meta.get(e);\n\n      c(s) && this._crossfadeHelper.fadeNode(e, s, t, i);\n    }\n\n    setNodeOpacityByIndex(e, t) {\n      const i = this._nodeId2Meta.get(e);\n\n      c(i) && this._setNodeOpacity(i, t);\n    }\n\n    _setNodeOpacity(e, t) {\n      this._collection.updateMaterial(e.objectHandle, e => e.objectOpacity = t), this._setNodeEdgeOpacity(e, t);\n    }\n\n    _setNodeEdgeOpacity(e, t) {\n      if (u(this._edgeView) || !e.cachedEdgeMaterials) return;\n      Rt(e.cachedEdgeMaterials, t);\n      const i = e.objectHandle;\n      this._edgeView.hasObject(i) && this._edgeView.updateAllComponentOpacities(i, t).catch(this._logEdgeViewError);\n    }\n\n    get hasModifications() {\n      return this._isIntegratedMesh && c(this._layerClippingArea) || this._modifications && this._modifications.length > 0;\n    }\n\n    updateNodeModificationStatus(e) {\n      const t = e.length;\n      if (!this.hasModifications || t <= 0 || !0 !== this._i3sWasmLoaded) return;\n      const i = this.i3slayer.uid,\n            s = Dt(e);\n\n      if (c(s)) {\n        const t = {\n          context: i,\n          buffer: s.buffer\n        };\n\n        _e(t);\n\n        const r = new Float64Array(s.buffer);\n        e.forAll((e, t) => {\n          const i = r[t],\n                s = me(i);\n          e.imModificationImpact = s, s !== De.Unmodified && this._controller.invalidateGeometryVisibility(e.index);\n        });\n      }\n    }\n\n    notifyUpdate() {\n      this.notifyChange(\"updating\");\n    }\n\n    notifyLODUpdate() {\n      this._controller.notifyLODUpdate();\n    }\n\n    isUpdating() {\n      return !(!this._controller || !this._controller.updating) || !!this._visibleGeometryChangedSchedulerHandle || c(this._labeler) && this._labeler.updating || this._crossfadeHelper.updating || this._i3sWasmLoaded instanceof Promise || this._asyncModuleLoading > 0 || c(this._elevationTask) && this._elevationTask.running;\n    }\n\n    trackSnappingSources(e) {\n      const t = {\n        events: e,\n        fetchEdgeLocations: async (e, t, i) => {\n          const s = this._nodeId2Meta.get(e);\n\n          if (u(s)) throw new Error(\"invalid-node\");\n          const {\n            origin: r,\n            buffer: o\n          } = await this._collection.extractEdgeInformation(s.objectHandle, t, i);\n          return {\n            locations: o,\n            type: \"components\",\n            objectIds: s.featureIds,\n            origin: r\n          };\n        },\n        remove: () => {\n          s(this._snappingSourcesTrackers, t);\n        }\n      };\n      return this._snappingSourcesTrackers.push(t), this._nodeId2Meta.forEach((t, i) => {\n        u(t) || e.add(i, t.node.renderMbs);\n      }), t;\n    }\n\n    _updateSnappingSources(e, t) {\n      const {\n        index: i,\n        renderMbs: s\n      } = e.node;\n\n      for (const r of this._snappingSourcesTrackers) t !== ft.REMOVE && t !== ft.UPDATE || r.events.remove(i), t !== ft.ADD && t !== ft.UPDATE || r.events.add(i, s);\n    }\n\n  };\n  return e([C()], r.prototype, \"_hasLoadedPBRTextures\", void 0), e([C()], r.prototype, \"_asyncModuleLoading\", void 0), e([C()], r.prototype, \"_visibleGeometryChangedSchedulerHandle\", void 0), e([C()], r.prototype, \"view\", void 0), e([C()], r.prototype, \"i3slayer\", void 0), e([C()], r.prototype, \"_controller\", void 0), e([C()], r.prototype, \"_labeler\", void 0), e([C()], r.prototype, \"updating\", void 0), e([C()], r.prototype, \"suspended\", void 0), e([C()], r.prototype, \"holeFilling\", void 0), e([C(st)], r.prototype, \"updatingProgress\", void 0), e([C({\n    readOnly: !0,\n    aliasOf: \"_controller.updatingProgress\"\n  })], r.prototype, \"updatingProgressValue\", void 0), e([C({\n    readOnly: !0\n  })], r.prototype, \"hasTexturesOrVertexColors\", null), e([C({\n    readOnly: !0\n  })], r.prototype, \"rendererTextureUsage\", null), e([C()], r.prototype, \"filter\", void 0), e([C({\n    readOnly: !0\n  })], r.prototype, \"elevationOffset\", null), e([C({\n    readOnly: !0\n  })], r.prototype, \"elevationInfo\", null), e([C({\n    type: Boolean\n  })], r.prototype, \"slicePlaneEnabled\", void 0), e([C()], r.prototype, \"supportedTextureEncodings\", null), e([C()], r.prototype, \"uncompressedTextureDownsamplingEnabled\", null), e([C({\n    type: [ee]\n  })], r.prototype, \"_modifications\", void 0), e([C()], r.prototype, \"_elevationTask\", void 0), r = e([E(\"esri.views.3d.layers.I3SMeshView3D\")], r), r;\n};\n\nvar ft;\n!function (e) {\n  e[e.ADD = 0] = \"ADD\", e[e.REMOVE = 1] = \"REMOVE\", e[e.UPDATE = 2] = \"UPDATE\";\n}(ft || (ft = {}));\nconst bt = z(),\n      yt = X(),\n      vt = X(),\n      It = tt(),\n      Mt = [0, 0, 0, 0],\n      Ct = new t([0, 0, 0, 0]),\n      Et = [0, 0, 0, 0],\n      xt = X();\n\nfunction Ot(e) {\n  if (u(e)) return !1;\n  const t = e.metallicRoughness;\n  return t && t.baseColorTextureId >= 0 || t && t.metallicRoughnessTextureId >= 0 || e.normalTextureId >= 0 || e.emissiveTextureId >= 0 || e.occlusionTextureId >= 0;\n}\n\nfunction St(e) {\n  return \"geometryData\" in e;\n}\n\nfunction wt(e) {\n  return c(e) && I(e.data);\n}\n\nfunction jt(e, t) {\n  let i = 1024 + e.interleavedVertexData.byteLength + (e.indices ? e.indices.byteLength : 0) + e.positionData.data.byteLength + e.positionData.indices.byteLength;\n  if (c(t)) for (const s of t) c(s) && I(s.data) && (i += s.data.byteLength);\n  return i;\n}\n\nfunction Tt(e, t) {\n  return t.byteSize > gt ? (ht.warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`), !1) : t.byteSize > 0;\n}\n\nfunction Dt(e) {\n  if (0 === e.length) return null;\n  const t = 10 * e.length,\n        i = new Float64Array(t);\n  return e.forAll((e, t) => {\n    let s = e.serviceObb;\n    u(s) && (s = It, F(s.center, e.mbs), s.halfSize[0] = s.halfSize[1] = s.halfSize[2] = e.mbs[3]);\n    const r = 10 * t;\n    i[r + 0] = s.center[0], i[r + 1] = s.center[1], i[r + 2] = s.center[2], i[r + 3] = s.halfSize[0], i[r + 4] = s.halfSize[1], i[r + 5] = s.halfSize[2], i[r + 6] = s.quaternion[0], i[r + 7] = s.quaternion[1], i[r + 8] = s.quaternion[2], i[r + 9] = s.quaternion[3];\n  }), i;\n}\n\nconst At = {\n  remove() {},\n\n  pause() {},\n\n  resume() {}\n\n};\n\nfunction Rt(e, t) {\n  e.forEach(e => e.opacity = t);\n}\n\nvar Nt;\n!function (e) {\n  e[e.Absolute = 0] = \"Absolute\", e[e.RelativeToGround = 1] = \"RelativeToGround\", e[e.OnTheGround = 2] = \"OnTheGround\";\n}(Nt || (Nt = {}));\nconst Ft = P(),\n      Pt = z();\nexport { Nt as ElevationMode, pt as I3SMeshView3D };","map":{"version":3,"names":["_","e","t","i","removeUnordered","s","ByteSizeUnit","r","o","a","n","someMap","l","unwrapOr","d","destroyMaybe","h","isSome","c","isNone","u","applySome","m","throwIfAborted","g","createResolver","p","isAbortError","f","initial","b","watch","y","schedule","v","isArrayBuffer","I","getMetersPerVerticalUnitForSR","M","property","C","subclass","E","x","O","S","w","j","T","D","A","R","N","F","P","V","U","projectBuffer","H","getProjectorName","G","localLinearScaleFactors","L","projectVectorToVector","k","projectBoundingRect","B","projectBoundingSphere","q","create","z","empty","K","expandWithBuffer","W","toRect","$","X","intersects","Y","Q","fixFields","J","areLabelsVisible","Z","ee","getColor","te","getOpacity","ie","loadArcade","se","re","getMetersPerUnit","oe","ae","I3SMeshWorkerHandle","ne","toWasmModification","le","ForAllFeaturesVisibilityMode","de","ForAllFeaturesReturnType","he","initialize","ce","setModificationsSync","ue","filterObbsForModificationsSync","_e","interpretObbModificationResults","me","overrideColor","ge","TextureUsage","pe","TextureEncoding","fe","be","I3SAsyncElevationUpdater","ye","I3SAttributeOverrides","ve","I3SCrossfadeHelper","Ie","NodeCrossfadeMetaData","Me","Ce","boundingBoxCornerPoints","Ee","I3SIntersectionHandler","xe","getSupportedEncodings","Oe","selectEncoding","Se","defaultMaterial","we","createTexture","je","configureMaterial","Te","NodeIMModificationImpact","De","NodeState","Ae","computeGlobalTransformation","Re","getLocalOrigin","Ne","rendererNeedsTextures","Fe","checkSceneLayerValid","Pe","checkSceneLayerCompatibleWithView","Ve","getCacheKeySuffix","Ue","whenGraphicAttributes","He","computeVisibilityObb","Ge","filterInPlace","Le","getCachedAttributeValue","ke","intersectBoundingRectWithMbs","Be","MbsIntersectResult","qe","addWraparound","ze","getSymbolInfo","Ke","transparentEdgeMaterial","We","getClipRect","$e","IDBCache","Xe","IDBMockCache","Ye","attributeLookup","Qe","ColorMixModeEnum","Je","Ze","toBoundingRect","et","tt","clone","it","updatingProgress","st","glLayout","rt","State","ot","createVertexBufferLayout","at","TextureCoordinateAttributeType","nt","loadBasis","lt","Transparency","dt","ht","getLogger","ct","ut","constructor","node","featureIds","objectHandle","cachedRendererVersion","attributeInfo","material","textures","cachedEdgeMaterials","Array","edgeMemoryUsage","cachedSymbology","_t","CastShadows","Pickable","mt","gt","MEGABYTES","pt","_elevationProvider","_intersectionHandler","_nodeId2Meta","Map","_nodeId2MetaReloading","_i3sWasmLoaded","_snappingSourcesTrackers","_hasLoadedPBRTextures","_asyncModuleLoading","_addTasks","_rendererVersion","_colorVariable","_opacityVariable","_rendererFields","_symbologyFields","_symbologyOverride","_symbologyOverrideFields","_symbolInfos","_idbCache","holeFilling","_hasColors","_hasTextures","_hasData","filter","slicePlaneEnabled","_modifications","_layerUrl","_cacheKeySuffix","_elevationTask","_arcade","_tmpAttributeOnlyGraphic","_crossfadeHelper","lodCrossfadeoutDuration","lodCrossfadeinDuration","lodCrossfadeUncoveredDuration","layerUid","i3slayer","uid","sublayerUid","hasTexturesOrVertexColors","rendererTextureUsage","_currentRenderer","_usePBR","AllTexturesPBR","AllTextures","GeometryTexturesPBR","GeometryTextures","elevationOffset","elevationInfo","mode","spatialReference","unit","offset","Nt","Absolute","RelativeToGround","OnTheGround","supportedTextureEncodings","view","_stage","renderView","capabilities","uncompressedTextureDownsamplingEnabled","qualitySettings","sceneService","DDS_S3TC","_preLoadBasis","addResolvingPromise","indexInfo","resourceController","attributeOverrides","memoryController","_worker","promise","setLegacySchema","store","defaultGeometrySchema","parsedUrl","path","_controller","layerView","gpuMemoryEstimate","texMemoryEstimate","geoMemoryEstimate","_collection","componentObjectCollection","_highlights","collection","forAllFeatures","_forAllFeatures","ALL","forAllFeaturesOfNode","_forAllFeaturesOfNode","_isIntegratedMesh","_hasComponentData","featureAttributes","faceRange","id","_hasVertexColors","vertexAttributes","color","cachedDrawingInfo","_edgeView","ensureEdgeView","newCache","_deleteComponentObject","_memCache","index","rootNode","traverse","get","isGround","traverseNodeHierarchy","intersectionHandler","updatingHandles","add","clippingArea","_clippingAreaChanged","fullOpacity","_opacityChange","_slicePlaneEnabledChange","_reloadAll","invalidateVisibilityObbs","_elevationInfoChanged","_filterChange","physicallyBasedRenderingEnabled","_updatePBR","clearMemCache","suspended","_suspendedChange","labelsVisible","_labelingChanged","labelingInfo","_modificationsChanged","handles","I3S_TREE_SHOW_TILES","_treeDebugger","crsIndex","then","I3STreeDebugger","lv","nodeSR","I3S_SHOW_MODIFICATIONS","_showModifications","renderSpatialReference","init","catch","warn","destroy","_clearAddTasks","layerChanged","elevationProvider","unregister","sceneIntersectionHelper","removeIntersectionHandler","destroyContext","_removeAllNodeDataFromStage","_labeler","clear","emit","_visibleGeometryChangedSchedulerHandle","remove","_memEstimateTextureAdded","estimatedTexMemRequired","_memEstimateTextureRemoved","_memEstimateGeometryAdded","getObjectGPUMemoryUsage","_memEstimateGeometryRemoved","isNodeLoaded","has","isNodeReloading","getUsedMemory","usedMemory","forEach","memory","getUnloadedMemory","unloadedMemoryEstimate","ignoresMemoryFactor","_supportsLabeling","layer","_addMetaToLabeler","_loadAsyncModule","hasModifications","notifyUpdate","setModifications","_layerClippingArea","context","modifications","isGeodetic","isGeographic","modificationsChanged","delete","updateLoadStatus","set","push","length","updateNodeModificationStatus","forAll","imModificationImpact","Culled","invalidateGeometryVisibility","restartNodeLoading","_modificationGraphics","graphics","removeMany","clip","mask","replace","type","outline","width","geometry","symbol","addMany","addNodeMeta","_createAttributes","register","_elevationContext","addIntersectionHandler","getLoadedAttributes","loadedAttributes","getAttributeData","attributeData","setAttributeData","_attributeValuesChanged","updateAttributes","apply","_getInvalidRendererVersion","filteredIds","setNodeMetaAttributes","_updateEngineObject","getVisibleNodes","getLoadedNodeIndices","Basis","textureSetDefinitions","some","formats","format","_getVertexBufferLayout","hasTexture","Ot","params","hasNormals","normal","hasRegions","uvRegion","_getGeometryParameters","_getObjectIdField","objectIdField","_findGraphicNodeAndIndex","fieldsIndex","attributes","indexOf","_getGraphicIndices","whenGraphicBounds","Promise","reject","_getAABB","resolve","boundingBox","screenSpaceObjects","getAABBFromIntersectorTarget","nodeIndex","componentIndex","Float64Array","values","getGraphicFromIntersectorTarget","_createGraphic","_getCacheKey","_getMemCacheKey","_idbCacheEnabled","disableIDBCache","loadCachedGPUData","pop","deleteCachedGPUData","_cacheGPUData","indexDepth","level","put","loadMissingTextures","usage","encodings","data","encoding","loadCachedNodeData","nodeVersion","version","geometryObb","requiredTextures","textureData","initialized","byteSize","jt","transformedGeometry","every","wt","Tt","addNode","St","geometryBuffer","_addNodeMeta","_addData","attributeDataInfo","_transformNode","_safeReschedule","_addCachedNodeData","obb","componentOffsets","mbs","center","extents","orientation","geometryData","from","globalTrafo","map","geometries","geometryDescriptor","crsVertex","layouts","localOrigin","serviceObb","needNormals","isMeshPyramid","normalReferenceFrame","indexToVertexProjector","vertexToRenderProjector","invoke","supportsNodeCrossFading","shadowsEnabled","nodeCrossfadingEnabled","nodeFadeoutEnabled","_setNewNodeOpacity","_setNodeOpacity","addCachedGPUData","getComponentObb","isGeometryVisible","updateNodeState","setObjectVisibility","Visible","_updateMaterial","_scheduleElevationAlign","objectCreated","update","addCachedNodeData","_removeNodeStageData","KTX2","layout","indices","interleavedVertexData","positionData","hasColors","_materialParameters","Uint32Array","byteLength","stride","vertices","count","layoutParameters","geometryParams","positions","transformation","basemapTerrain","errorOnce","createObject","toMapSpace","transform","position","rotationScale","textureCoordinates","Atlas","texturePromise","_initMaterialAndTextures","reduce","hasParametersFromSource","alphaMode","metallicRoughness","baseColorFactor","isOpaque","meta","ColorTextures","resources","texture","notifyChange","all","_addOrUpdateEdgeRendering","updateObjectVisibility","_logEdgeViewError","_updateElevationOffsets","elevationOffsets","_updateComponentData","_applyFiltersToNode","_visibleGeometryChanged","ft","ADD","error","lodCrossfadeProgress","Rt","getObjectTransform","Ft","Pt","getComponentAabb","getElevation","renderCoordsHelper","getAltitude","_elevationChanged","extent","xt","updateElevationChanged","scheduler","_updateEdgeRendering","updateLabelPositions","on","removeAllGeometryObbs","updateElevationAlignState","state","viewingMode","reschedule","name","updateMaterial","textureRepository","usePBR","isIntegratedMesh","viewSpatialReference","_updateMaterialOverlay","Default","None","colors","normals","_renderClippingArea","updateClippingArea","_geometryFilterChange","geometryFilterChanged","hasGeometryFilter","_applyFilters","_filters","getFilters","requestUpdate","UPDATE","_boundingRectFilter","addSqlFilter","fieldNames","_sqlFilter","_createLayerGraphic","testFeature","_boundingRectNodeTest","Et","_boundingRectFeatureTest","bt","yt","INSIDE","OUTSIDE","getComponentCount","invisible","visible","_transformClippingArea","vt","hasObject","hasEdges","perFeatureEdgeMaterials","_getFilteredEdgeMaterials","hasSlicePlane","getNodeOpacity","updateAllComponentMaterials","updateAllVerticalOffsets","addEdges","removeObject","_applyFiltersToNodeComponents","applyFilterChange","setAllComponentVisibilities","_updateCachedFilteredIds","_computeFilteredComponentIndices","appliedFilters","_computeFilteredIds","slice","removeNode","Hidden","REMOVE","removeNodeMeta","objectDeleted","stopNodeFading","destroyObject","polygonOffsetEnabled","Hole","_invalidateAllSymbols","_rendererChange","getRequiredFields","_updateSymbologyFields","arcadeRequired","visualVariables","getSymbols","_getCachedEdgeMaterials","_updateCachedRendererData","_getComponentParameters","externalColor","externalColorMixMode","castShadows","pickable","_getSymbolInfo","getSymbol","arcade","_setSymbologyOverride","Uint8Array","Mt","colorMixMode","Multiply","edgeMaterial","OPAQUE","Ct","alpha","INVISIBLE","Replace","TRANSPARENT","opacity","objectTransparency","Math","round","setComponentData","requestRender","stopAllNodeFading","objectOpacity","commonMaterialParameters","_forAllNodes","VISIBLE_ONLY","EXIT","SKIP","CONTINUE","_forVisibleFeaturesOfNode","ALL_IN_CLIPPING_AREA","_forAllFeaturesOfNodeInClippingArea","forEachVisibleComponent","Object","keys","highlight","toArray","isArray","handle","acquireSet","setFeatureIds","At","objectChanged","_updateSnappingSources","performanceInfo","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","nodes","size","toFixed","MemCache","hitRate","getHitRate","updateStats","test","controller","labeler","visibleObjectIds","sort","numNodes","getNodeOpacityByIndex","getMaterial","isNodeFullyFadedIn","getNodeCrossfadeMetaData","markNodeToRemove","removeMarkedNodes","foreachCrossfadeNode","fadeNode","setNodeOpacityByIndex","_setNodeEdgeOpacity","updateAllComponentOpacities","Dt","buffer","Unmodified","notifyLODUpdate","isUpdating","updating","running","trackSnappingSources","events","fetchEdgeLocations","Error","origin","extractEdgeInformation","locations","objectIds","renderMbs","prototype","readOnly","aliasOf","Boolean","It","baseColorTextureId","metallicRoughnessTextureId","normalTextureId","emissiveTextureId","occlusionTextureId","halfSize","quaternion","pause","resume","ElevationMode","I3SMeshView3D"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import i from\"../../../Graphic.js\";import{removeUnordered as s}from\"../../../core/arrayUtils.js\";import{ByteSizeUnit as r}from\"../../../core/byteSizeEstimations.js\";import o from\"../../../core/Collection.js\";import a from\"../../../core/has.js\";import n from\"../../../core/Logger.js\";import{someMap as l}from\"../../../core/MapUtils.js\";import{unwrapOr as d,destroyMaybe as h,isSome as c,isNone as u,applySome as _}from\"../../../core/maybe.js\";import m from\"../../../core/PooledArray.js\";import{throwIfAborted as g,createResolver as p,isAbortError as f}from\"../../../core/promiseUtils.js\";import{initial as b,watch as y}from\"../../../core/reactiveUtils.js\";import{schedule as v}from\"../../../core/scheduling.js\";import{isArrayBuffer as I}from\"../../../core/typedArrayUtil.js\";import{getMetersPerVerticalUnitForSR as M}from\"../../../core/unitUtils.js\";import{property as C}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as E}from\"../../../core/accessorSupport/decorators/subclass.js\";import{f as x}from\"../../../chunks/mat3.js\";import{c as O}from\"../../../chunks/mat3f32.js\";import{m as S,C as w}from\"../../../chunks/mat4.js\";import{b as j,c as T}from\"../../../chunks/mat4f64.js\";import{m as D,s as A,t as R,a as N,c as F}from\"../../../chunks/vec3.js\";import{c as P}from\"../../../chunks/vec3f64.js\";import{s as V}from\"../../../chunks/vec4.js\";import{f as U}from\"../../../chunks/vec4f64.js\";import{projectBuffer as H,getProjectorName as G,localLinearScaleFactors as L,projectVectorToVector as k,projectBoundingRect as B,projectBoundingSphere as q}from\"../../../geometry/projection.js\";import{create as z,empty as K,expandWithBuffer as W,toRect as $}from\"../../../geometry/support/aaBoundingBox.js\";import{create as X,intersects as Y}from\"../../../geometry/support/aaBoundingRect.js\";import Q from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import{fixFields as J}from\"../../../layers/support/fieldUtils.js\";import{areLabelsVisible as Z}from\"../../../layers/support/layerUtils.js\";import ee from\"../../../layers/support/SceneModification.js\";import{getColor as te,getOpacity as ie}from\"../../../renderers/visualVariables/support/visualVariableUtils.js\";import{loadArcade as se}from\"../../../support/arcadeOnDemand.js\";import re from\"../../../symbols/Symbol3D.js\";import{getMetersPerUnit as oe}from\"../../../symbols/support/unitConversionUtils.js\";import ae from\"./I3SMeshViewLabeler.js\";import{I3SMeshWorkerHandle as ne,toWasmModification as le}from\"./I3SMeshWorkerHandle.js\";import{ForAllFeaturesVisibilityMode as de,ForAllFeaturesReturnType as he}from\"./II3SMeshView3D.js\";import{initialize as ce,setModificationsSync as ue,filterObbsForModificationsSync as _e,interpretObbModificationResults as me}from\"./SceneLayerWorker.js\";import{overrideColor as ge}from\"./graphics/graphicUtils.js\";import{TextureUsage as pe,TextureEncoding as fe}from\"./i3s/enums.js\";import be from\"./i3s/Highlights.js\";import{I3SAsyncElevationUpdater as ye}from\"./i3s/I3SAsyncElevationUpdater.js\";import{I3SAttributeOverrides as ve}from\"./i3s/I3SAttributeOverrides.js\";import{I3SCrossfadeHelper as Ie,NodeCrossfadeMetaData as Me}from\"./i3s/I3SCrossfadeHelper.js\";import Ce from\"./i3s/I3SElevationProvider.js\";import{boundingBoxCornerPoints as Ee}from\"./i3s/I3SGeometryUtil.js\";import{I3SIntersectionHandler as xe}from\"./i3s/I3SIntersectionHandler.js\";import{getSupportedEncodings as Oe,selectEncoding as Se,defaultMaterial as we,createTexture as je,configureMaterial as Te}from\"./i3s/I3SMaterialUtil.js\";import{NodeIMModificationImpact as De,NodeState as Ae}from\"./i3s/I3SNode.js\";import{computeGlobalTransformation as Re,getLocalOrigin as Ne}from\"./i3s/I3SProjectionUtil.js\";import{rendererNeedsTextures as Fe,checkSceneLayerValid as Pe,checkSceneLayerCompatibleWithView as Ve,getCacheKeySuffix as Ue,whenGraphicAttributes as He,computeVisibilityObb as Ge,filterInPlace as Le,getCachedAttributeValue as ke,intersectBoundingRectWithMbs as Be,MbsIntersectResult as qe,addWraparound as ze,getSymbolInfo as Ke,transparentEdgeMaterial as We,getClipRect as $e}from\"./i3s/I3SUtil.js\";import{IDBCache as Xe}from\"./i3s/IDBCache.js\";import{IDBMockCache as Ye}from\"./i3s/IDBMockCache.js\";import{attributeLookup as Qe}from\"./support/attributeUtils.js\";import{ColorMixModeEnum as Je}from\"./support/symbolColorUtils.js\";import Ze from\"../support/debugFlags.js\";import{toBoundingRect as et}from\"../support/extentUtils.js\";import{create as tt,clone as it}from\"../support/orientedBoundingBox.js\";import{updatingProgress as st}from\"../support/updatingProperties.js\";import{glLayout as rt}from\"../support/buffer/glUtil.js\";import{State as ot}from\"../webgl-engine/collections/Component/ComponentObject.js\";import{createVertexBufferLayout as at}from\"../webgl-engine/collections/Component/SourceGeometry.js\";import{TextureCoordinateAttributeType as nt}from\"../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{loadBasis as lt}from\"../webgl-engine/lib/BasisUtil.js\";import{Transparency as dt}from\"../webgl-engine/lib/edgeRendering/interfaces.js\";const ht=n.getLogger(\"esri.views.3d.layers.SceneLayerView3D\"),ct=[1,1,1,1];class ut extends Me{constructor(e,t,i,s,r,o,a){super(),this.node=e,this.featureIds=t,this.objectHandle=i,this.cachedRendererVersion=s,this.attributeInfo=r,this.material=o,this.textures=a,this.cachedEdgeMaterials=new Array,this.edgeMemoryUsage=0,this.cachedSymbology=null}}var _t;!function(e){e[e.CastShadows=4]=\"CastShadows\",e[e.Pickable=5]=\"Pickable\"}(_t||(_t={}));const mt=19,gt=100*r.MEGABYTES,pt=t=>{let r=class extends t{constructor(...e){super(e),this._elevationProvider=null,this._intersectionHandler=null,this._nodeId2Meta=new Map,this._nodeId2MetaReloading=new Map,this._i3sWasmLoaded=!1,this._snappingSourcesTrackers=[],this._hasLoadedPBRTextures=!1,this._asyncModuleLoading=0,this._addTasks=new Map,this._rendererVersion=0,this._colorVariable=null,this._opacityVariable=null,this._rendererFields=null,this._symbologyFields=null,this._symbologyOverride=null,this._symbologyOverrideFields=null,this._symbolInfos=new Map,this._idbCache=a(\"enable-feature:idb-mock-cache\")?new Ye:new Xe(\"esri-scenelayer-cache\",\"geometries\"),this.holeFilling=\"auto\",this._hasColors=!1,this._hasTextures=!1,this._hasData=!1,this.filter=null,this.slicePlaneEnabled=!1,this._modifications=new Array,this._layerUrl=\"\",this._cacheKeySuffix=null,this._elevationTask=null,this._arcade=null,this._tmpAttributeOnlyGraphic=new i(null,null,{}),this._crossfadeHelper=new Ie(this)}get lodCrossfadeoutDuration(){return 0}get lodCrossfadeinDuration(){return 0}get lodCrossfadeUncoveredDuration(){return 0}get layerUid(){return this.i3slayer&&this.i3slayer.uid}get sublayerUid(){return null}get hasTexturesOrVertexColors(){return this._hasData?this._hasTextures||this._hasColors?\"yes\":\"probably-not\":\"unknown\"}get rendererTextureUsage(){return Fe(this._currentRenderer)?this._usePBR()||this._hasLoadedPBRTextures?pe.AllTexturesPBR:pe.AllTextures:this._usePBR()||this._hasLoadedPBRTextures?pe.GeometryTexturesPBR:pe.GeometryTextures}get elevationOffset(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null!=e&&\"absolute-height\"===e.mode){const t=M(this.i3slayer.spatialReference),i=oe(e.unit);return d(e.offset,0)*i/t}return 0}get elevationInfo(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null==e)return{mode:Nt.Absolute,offset:0};const t=M(this.i3slayer.spatialReference),i=oe(e.unit),s=d(e.offset,0)*i/t;switch(e.mode){case\"absolute-height\":return{mode:Nt.Absolute,offset:s};case\"relative-to-ground\":return{mode:Nt.RelativeToGround,offset:s};case\"on-the-ground\":return{mode:Nt.OnTheGround,offset:0};default:return{mode:Nt.Absolute,offset:0}}}get supportedTextureEncodings(){return Oe(this.view._stage.renderView.capabilities)}get uncompressedTextureDownsamplingEnabled(){const e=this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,t=0==(this.supportedTextureEncodings&fe.DDS_S3TC);return e&&t}initialize(){this._preLoadBasis(),this.addResolvingPromise(this.i3slayer.indexInfo);const e=this.view.resourceController;if(this.attributeOverrides=new ve(this.i3slayer,e.memoryController),this._worker=new ne((t=>e.schedule(t))),this.addResolvingPromise(this._worker.promise),this._worker.setLegacySchema(this.layerUid,this.i3slayer.store.defaultGeometrySchema),Pe(this.i3slayer),Ve(this.i3slayer,this.view),this._layerUrl=this.i3slayer.parsedUrl.path,this._controller=new Q({layerView:this}),this.gpuMemoryEstimate=0,this.texMemoryEstimate=0,this.geoMemoryEstimate=0,this._stage=this.view._stage,this._collection=this._stage.renderView.componentObjectCollection,this._highlights=new be({collection:this._collection,forAllFeatures:e=>this._forAllFeatures(e,null,de.ALL),forAllFeaturesOfNode:(e,t)=>this._forAllFeaturesOfNode(e,t)}),this._isIntegratedMesh||!this.i3slayer.store.defaultGeometrySchema)this._hasComponentData=!1;else{const e=this.i3slayer.store.defaultGeometrySchema.featureAttributes;this._hasComponentData=!!(e&&e.faceRange&&e.id)}this._hasVertexColors=null!=this.i3slayer.store.defaultGeometrySchema.vertexAttributes.color&&(null==this.i3slayer.cachedDrawingInfo||!this.i3slayer.cachedDrawingInfo.color),this._isIntegratedMesh||(this._edgeView=this._stage.renderView.ensureEdgeView());const t=this.view.resourceController.memoryController.newCache(this.i3slayer.uid,(e=>this._deleteComponentObject(e)));this._memCache=t;const i=e=>c(this._controller.index)&&c(this._controller.index.rootNode)?this._controller.index.traverse(this._controller.index.rootNode,(t=>{const i=t.index,s=this._nodeId2Meta.get(i)||this._nodeId2MetaReloading.get(i);return e(t,c(s)?s.objectHandle:null)})):()=>{};this._intersectionHandler=new xe({layerUid:this.layerUid,sublayerUid:this.sublayerUid,collection:this._collection,slicePlaneEnabled:this.slicePlaneEnabled,isGround:this._isIntegratedMesh,traverseNodeHierarchy:i}),this._elevationProvider=new Ce({layerView:this,intersectionHandler:this._intersectionHandler}),this._hasLoadedPBRTextures=this._usePBR(),this.updatingHandles.add((()=>this.view.clippingArea),(()=>this._clippingAreaChanged()),b),this.updatingHandles.add((()=>this.fullOpacity),(e=>this._opacityChange(e))),this.updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(e))),this.updatingHandles.add((()=>this.elevationOffset),((e,t)=>{this._reloadAll(t),this._controller.invalidateVisibilityObbs()})),this.updatingHandles.add((()=>this.elevationInfo),((e,t)=>this._elevationInfoChanged(e,t)),b),this.updatingHandles.add((()=>this.filter),(()=>this._filterChange()),b),this.updatingHandles.add((()=>this.view.qualitySettings.physicallyBasedRenderingEnabled),(()=>this._updatePBR()));const s=()=>{this._reloadAll(),this.clearMemCache()};this.updatingHandles.add((()=>this.rendererTextureUsage),s),this.updatingHandles.add((()=>this.uncompressedTextureDownsamplingEnabled),s),this.updatingHandles.add((()=>this.suspended),(e=>this._suspendedChange(e)),b),this.updatingHandles.add((()=>this.i3slayer.labelsVisible),(()=>this._labelingChanged()),b),this.updatingHandles.add((()=>this.i3slayer.labelingInfo),(()=>this._labelingChanged()),b),this.updatingHandles.add((()=>this._modifications),(()=>this._modificationsChanged()),b),this.handles.add([y((()=>Ze.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&Ze.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||Ze.I3S_TREE_SHOW_TILES||(this._treeDebugger=h(this._treeDebugger))}),b),y((()=>Ze.I3S_SHOW_MODIFICATIONS),(()=>this._showModifications()),b)]),this._cacheKeySuffix=Ue(this.i3slayer.spatialReference,this.view.renderSpatialReference),this._idbCache.init().catch((e=>ht.warn(`Failed to initialize IndexedDB cache: ${e}`)))}destroy(){this._clearAddTasks(),this._elevationTask=h(this._elevationTask),this.attributeOverrides=h(this.attributeOverrides),this._elevationProvider&&(this._elevationProvider.layerChanged(),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this._intersectionHandler&&(this._stage.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null);const e=this._worker;e&&(e.destroyContext(this.i3slayer.uid).then((()=>e.destroy())),this._worker=null),this._removeAllNodeDataFromStage(),this._memCache=h(this._memCache),this._collection=null,this._stage=null,this._edgeView=null,this._labeler=h(this._labeler),this._treeDebugger=h(this._treeDebugger),this._controller=h(this._controller),this._highlights.destroy(),this._nodeId2Meta.clear(),this._nodeId2MetaReloading.clear(),this.emit(\"visible-geometry-changed\"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)}_memEstimateTextureAdded(e){const t=e.estimatedTexMemRequired;return this.gpuMemoryEstimate+=t,this.texMemoryEstimate+=t,t}_memEstimateTextureRemoved(e){if(c(e)){const t=e.estimatedTexMemRequired;this.gpuMemoryEstimate-=t,this.texMemoryEstimate-=t}}_memEstimateGeometryAdded(e){const t=this._collection.getObjectGPUMemoryUsage(e);return this.gpuMemoryEstimate+=t,this.geoMemoryEstimate+=t,t}_memEstimateGeometryRemoved(e){const t=this._collection.getObjectGPUMemoryUsage(e);this.gpuMemoryEstimate-=t,this.geoMemoryEstimate-=t}isNodeLoaded(e){return this._nodeId2Meta.has(e)}isNodeReloading(e){return this._nodeId2MetaReloading.has(e)}getUsedMemory(){let e=c(this._labeler)?this._labeler.usedMemory:0;return this._nodeId2Meta.forEach((t=>e+=c(t)?t.node.memory:0)),this._nodeId2MetaReloading.forEach((t=>e+=c(t)?t.node.memory:0)),e}getUnloadedMemory(){return(c(this._controller)?this._controller.unloadedMemoryEstimate:0)+(c(this._labeler)?this._labeler.unloadedMemoryEstimate:0)}ignoresMemoryFactor(){return!1}_labelingChanged(){if(!(Z(this.i3slayer)&&this._supportsLabeling))return void(c(this._labeler)&&(this._labeler.destroy(),this._labeler=null));if(c(this._labeler))return;const e=new ae({view:this.view,layer:this.i3slayer,collection:this._collection});this._nodeId2Meta.forEach((t=>c(t)&&this._addMetaToLabeler(e,t))),this._labeler=e}_loadAsyncModule(e){return++this._asyncModuleLoading,e.then((e=>(--this._asyncModuleLoading,e)),(e=>{throw--this._asyncModuleLoading,e}))}_modificationsChanged(){if(!this._i3sWasmLoaded&&this.hasModifications)return this._i3sWasmLoaded=ce().then((()=>{this._i3sWasmLoaded=!0,this._modificationsChanged(),this.notifyUpdate()})),void this.notifyUpdate();if(!0!==this._i3sWasmLoaded)return;const e=this.i3slayer.uid,t=this.i3slayer.spatialReference;this._worker.setModifications(e,this._layerClippingArea,this._modifications,t);const i=le(this._layerClippingArea,this._modifications,t);ue({context:e,modifications:i,isGeodetic:t.isGeographic}),this._controller.modificationsChanged();const s=this.hasModifications?new m:null;this._nodeId2Meta.forEach(((e,t)=>{u(e)?(this._nodeId2Meta.delete(t),this._controller.updateLoadStatus(t,!1)):e.node.hasModifications?(this._nodeId2Meta.delete(t),this._nodeId2MetaReloading.set(t,e)):c(s)&&s.push(e.node)})),c(s)&&this._nodeId2MetaReloading.forEach((e=>s.push(e.node))),c(s)&&s.length>0&&(this.updateNodeModificationStatus(s),s.forAll((e=>{if(e.imModificationImpact!==De.Culled){const t=this._nodeId2Meta.get(e.index);this._controller.invalidateGeometryVisibility(e.index),c(t)?(this._nodeId2Meta.delete(e.index),this._nodeId2MetaReloading.set(e.index,t)):this._nodeId2Meta.has(e.index)&&(this._nodeId2Meta.delete(e.index),this._controller.updateLoadStatus(e.index,!1))}}))),this.clearMemCache(),this._controller.restartNodeLoading(),this._showModifications()}_showModifications(){if(c(this._modificationGraphics)&&(this.view.graphics.removeMany(this._modificationGraphics),this._modificationGraphics=null),!Ze.I3S_SHOW_MODIFICATIONS||0===this._modifications.length)return;const e={clip:[227,227,79,.8],mask:[227,139,79,.8],replace:[139,227,79,.8]},t={type:\"simple-fill\",outline:{color:[255,255,255],width:1}};this._modificationGraphics=new Array;for(const s of this._modifications){s.geometry.spatialReference=this.i3slayer.spatialReference;const r={...t,color:e[s.type]};this._modificationGraphics.push(new i({geometry:s.geometry,symbol:r}))}this.view.graphics.addMany(this._modificationGraphics)}_addMetaToLabeler(e,t){e.addNodeMeta(t,((e,t)=>this._createAttributes(e,t)))}_suspendedChange(e){e?(this._removeAllNodeDataFromStage(),this.view.elevationProvider&&this.view.elevationProvider.unregister(this._elevationProvider),this._stage.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler)):(this.view.elevationProvider.register(this._elevationContext,this._elevationProvider),this._stage.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler))}getLoadedAttributes(e){const t=this._nodeId2Meta.get(e);if(c(t)&&c(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodeId2Meta.get(e);if(c(t)&&c(t.attributeInfo))return t.attributeInfo.attributeData}setAttributeData(e,t){const i=this._nodeId2Meta.get(e);c(i)&&c(i.attributeInfo)&&(i.attributeInfo.attributeData=t,this._attributeValuesChanged(i))}async updateAttributes(e,t,i){const s=this._nodeId2Meta.get(e);c(s)&&(await this.attributeOverrides.apply(s.featureIds,t,i),s.attributeInfo=t,this._attributeValuesChanged(s))}_attributeValuesChanged(e){e.cachedRendererVersion=this._getInvalidRendererVersion(),e.filteredIds=null,c(this._labeler)&&this._labeler.setNodeMetaAttributes(e,((e,t)=>this._createAttributes(e,t))),this._updateEngineObject(e)}clearMemCache(){c(this._memCache)&&this._memCache.clear()}getVisibleNodes(){const e=new Array;return this._nodeId2Meta.forEach((t=>c(t)&&e.push(t.node))),e}getLoadedNodeIndices(e){this._nodeId2Meta.forEach(((t,i)=>e.push(i))),this._nodeId2MetaReloading.forEach(((t,i)=>e.push(i)))}_preLoadBasis(){!a(\"disable-feature:i3s-basis\")&&0!=(this.supportedTextureEncodings&fe.Basis)&&_(this.i3slayer.textureSetDefinitions,(e=>e.some((e=>e.formats.some((e=>\"basis\"===e.format||\"ktx2\"===e.format))))))&&lt()}_getVertexBufferLayout(e,t){const i={hasTexture:Ot(e.params.material),hasNormals:t.normal,hasRegions:t.uvRegion};return rt(at(this._getGeometryParameters(i)))}_getObjectIdField(){return this.i3slayer.objectIdField||\"OBJECTID\"}_findGraphicNodeAndIndex(e){const t=Qe(this.i3slayer.fieldsIndex,e.attributes,this._getObjectIdField());let i=null;return l(this._nodeId2Meta,(e=>{if(u(e))return!1;const s=e.featureIds.indexOf(t);return-1!==s&&(i={node:e.node,index:s},!0)})),i}_getGraphicIndices(e,t){const i=this._nodeId2Meta.get(e.index);if(u(i))return[];const s=[],r=this._getObjectIdField(),o=this.i3slayer.fieldsIndex;for(const a of t){const e=Qe(o,a.attributes,r),t=i.featureIds.indexOf(e);-1!==t&&s.push(t)}return s}whenGraphicBounds(e){const t=this._findGraphicNodeAndIndex(e);if(!t)return Promise.reject();const i=this._getAABB(t.node.index,t.index);return u(i)?Promise.reject():Promise.resolve({boundingBox:i,screenSpaceObjects:[]})}getAABBFromIntersectorTarget(e){return null==e.nodeIndex||null==e.componentIndex?null:this._getAABB(e.nodeIndex,e.componentIndex)}_getAABB(e,t){const i=this._nodeId2Meta.get(e);if(u(i)||null==i.featureIds||t>=i.featureIds.length)return null;const s=i.objectHandle,r=Ee(t,this._collection,s,new Float64Array(24)),o=this.view.renderSpatialReference,a=this.view.spatialReference;if(!H(r,o,0,r,a,0,8))return null;const n=K();return W(n,r,0,8),n}whenGraphicAttributes(e,t){return He(this.i3slayer,e,this._getObjectIdField(),t,(()=>[...this._nodeId2Meta.values()].filter(c)))}getGraphicFromIntersectorTarget(e){if(null==e.nodeIndex||null==e.componentIndex)return null;const t=this._nodeId2Meta.get(e.nodeIndex);return u(t)||null==t.featureIds||e.componentIndex>=t.featureIds.length?null:this._createGraphic(e.componentIndex,t)}_getCacheKey(e){return`${this._layerUrl}/v${mt}/${e.id}${this._cacheKeySuffix}`}_getMemCacheKey(e,t=this.elevationOffset){return e+\"#\"+t}get _idbCacheEnabled(){return!this._controller.disableIDBCache&&!this.hasModifications&&0===this.elevationOffset&&null!=this._cacheKeySuffix}loadCachedGPUData(e){return c(this._memCache)?this._memCache.pop(this._getMemCacheKey(e.index)):null}deleteCachedGPUData(e){c(e)&&this._deleteComponentObject(e)}_cacheGPUData(e,t=this.elevationOffset){if(u(this._memCache))return void this._deleteComponentObject(e);const i=this._controller.indexDepth-e.node.level;this._memCache.put(this._getMemCacheKey(e.node.index,t),e,e.node.memory,i)}loadMissingTextures(e,t,i,s){const r=e?.filter(((e,i)=>{if(0==(e.usage&this.rendererTextureUsage))return!1;if(u(t))return!0;const s=Se(e.encodings,this.supportedTextureEncodings),r=t[i];return!!(u(r)||null==r.data||s&&r.encoding!==s.encoding)}))??[];return 0===r.length?Promise.resolve(!1):i(r,s).then((i=>{let s=0;for(let r=0;r<e.length;r++)s<i.length&&i[s].id===e[r].id&&(t[r]=i[s],s++);return!0}))}loadCachedNodeData(e,t,i){return this._idbCacheEnabled?this._idbCache.get(this._getCacheKey(e),t).then((s=>null==s?null:s.nodeVersion!==e.version?(this._idbCache.remove(this._getCacheKey(e)),null):(this.elevationInfo.mode===Nt.Absolute&&(e.geometryObb=s.geometryObb),this.loadMissingTextures(s.requiredTextures,s.textureData,i,t).then((i=>(i&&this._idbCache.initialized&&c(s.textureData)&&(s.byteSize=jt(s.transformedGeometry,s.textureData),s.textureData.every(wt)&&Tt(e,s)&&this._idbCache.put(this._getCacheKey(e),s).catch((t=>ht.warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`)))),g(t),s)))))):Promise.resolve(null)}addNode(e,t,i){return St(t)?null==t.geometryBuffer?(this._addNodeMeta(e.index,null),Promise.resolve()):this._addData(e,t.attributeDataInfo,(()=>this._transformNode(e,t,i).then((s=>this._safeReschedule((()=>{if(u(s))return e.hasModifications=!1,this._addCachedNodeData(e,null,i);e.hasModifications=s.transformedGeometry.hasModifications;const{obb:r,componentOffsets:o,featureIds:a,transformedGeometry:n}=s,l=this._controller.crsIndex,d=this.view.renderSpatialReference,h=Re(e.mbs,this.elevationOffset,l,d),_=tt([r.center.x,r.center.y,r.center.z],[r.extents.x,r.extents.y,r.extents.z],[r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w]);D(_.center,_.center,h),this.elevationInfo.mode===Nt.Absolute&&(e.geometryObb=_),t.geometryData.componentOffsets=o,a&&(t.geometryData.featureIds=Array.from(a));const m={nodeVersion:e.version,geometryData:t.geometryData,requiredTextures:t.requiredTextures,textureData:t.textureData,transformedGeometry:n,globalTrafo:h,geometryObb:_,byteSize:jt(n,t.textureData)};if(this._idbCacheEnabled&&this._idbCache.initialized&&Tt(e,m)){const t=c(m.textureData)?m.textureData.map((e=>wt(e)?e:null)):null;this._idbCache.put(this._getCacheKey(e),{...m,textureData:t}).catch((t=>ht.warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`)))}return this._addCachedNodeData(e,m,i)}),i))))):Promise.reject()}computeVisibilityObb(e){return Ge(e,this.view.renderSpatialReference,this._controller.crsIndex,this.i3slayer.spatialReference,this.elevationOffset,this._modifications)}_transformNode(e,t,i){const s=t.geometryData.geometries,r=new Array(s.length);for(let u=0;u<s.length;++u)r[u]=this._getVertexBufferLayout(s[u],t.geometryDescriptor);const o=e.mbs,a=this.elevationOffset,n=this._controller.crsIndex,l=this._controller.crsVertex,d=this.view.renderSpatialReference,h=Ne(o,a,n),c=Re(o,a,n,d),_=G(n,l),m=G(l,d);if(u(_)||u(m))return Promise.resolve(null);const g={context:this.i3slayer.uid,geometryBuffer:t.geometryBuffer,geometryData:t.geometryData,geometryDescriptor:t.geometryDescriptor,layouts:r,localOrigin:h,globalTrafo:c,mbs:o,obb:e.serviceObb,elevationOffset:a,needNormals:!this._isIntegratedMesh&&this._controller.isMeshPyramid,normalReferenceFrame:this.i3slayer.normalReferenceFrame||\"none\",indexToVertexProjector:_,vertexToRenderProjector:m};return this._worker.invoke(g,i)}get supportsNodeCrossFading(){return!this.view?._stage?.renderView.shadowsEnabled}get nodeCrossfadingEnabled(){return this.supportsNodeCrossFading&&(this.lodCrossfadeinDuration>0||this.lodCrossfadeoutDuration>0||this.lodCrossfadeUncoveredDuration>0)}get nodeFadeoutEnabled(){return this.supportsNodeCrossFading&&this.lodCrossfadeoutDuration>0}_setNewNodeOpacity(e){const t=this.nodeCrossfadingEnabled?0:this.fullOpacity;this._setNodeOpacity(e,t)}addCachedGPUData(e,t,i){if(this.elevationInfo.mode===Nt.Absolute&&(e.geometryObb=it(this._collection.getComponentObb(t.objectHandle))),!this._controller.isGeometryVisible(e))return void this._cacheGPUData(t);c(this._labeler)&&this._addMetaToLabeler(this._labeler,t);const s=e.index;this._addNodeMeta(s,t),this.updateNodeState(s,i),this._collection.setObjectVisibility(t.objectHandle,ot.Visible),this._updateMaterial(t),this._setNewNodeOpacity(t),this.elevationInfo.mode!==Nt.Absolute&&this._scheduleElevationAlign(e.index),this._updateEngineObject(t),this._highlights.objectCreated(t),c(this._treeDebugger)&&this._treeDebugger.update()}addCachedNodeData(e,t,i,s){return this._addData(e,i,(()=>this._addCachedNodeData(e,t,s)))}async _addCachedNodeData(e,t,i){if(this.suspended||!this._controller.isGeometryVisible(e))return void this._removeNodeStageData(e.index,this.elevationOffset,this._nodeId2MetaReloading);if(u(t))return void this._addNodeMeta(e.index,null);const s=this._addTasks.get(e.index),{geometryData:r,transformedGeometry:o,globalTrafo:n}=t;await this.attributeOverrides.apply(r.featureIds,s.attributeInfo,i);const l=c(t.textureData)?t.textureData.filter((e=>c(e)&&0!=(e.usage&this.rendererTextureUsage))):[];!a(\"disable-feature:i3s-basis\")&&l.some((e=>c(e)&&(e.encoding===fe.Basis||e.encoding===fe.KTX2)))&&await lt(),e.memory=0;const{componentOffsets:d,geometries:h,featureIds:_}=r,m=this._collection,g=h[0],{layout:p,indices:f,interleavedVertexData:b,positionData:y,hasColors:v}=o,I=this._materialParameters(g,p),M=d||new Uint32Array([0,f?f.length:b.byteLength/p[0].stride]),C={vertices:{data:b,count:b.byteLength/p[0].stride,layoutParameters:I.geometryParams},positionData:{positions:y.data,indices:y.indices},indices:f,componentOffsets:M},E=g.transformation?j(g.transformation):T();S(E,n,E);const D=w(P(),E),A=x(O(),E),R=this.view.renderSpatialReference,N=this.view.basemapTerrain.spatialReference,F=P(),V=[1,1,1];L(D,R,V,N)||ht.errorOnce(\"Unsupported coordinate system for IM overlay\"),k(D,R,F,N);const H=m.createObject({toMapSpace:U(F[0],F[1],V[0],V[1]),geometry:C,obb:t.geometryObb,transform:{position:D,rotationScale:A}}),G=I.geometryParams.textureCoordinates===nt.Atlas,{textures:B,texturePromise:q}=this._initMaterialAndTextures(H,I.material,l,G);e.memory+=this._memEstimateGeometryAdded(H),e.memory+=B.reduce(((e,t)=>e+(c(t)?this._memEstimateTextureAdded(t):0)),0);const z=!!I.material.hasParametersFromSource,K=\"blend\"!==I.material.alphaMode&&I.material.metallicRoughness.baseColorFactor[3]>=1,W=new ut(e,_,H,this._getInvalidRendererVersion(),s.attributeInfo,{hasParametersFromSource:z,isOpaque:K},B);s.meta=W,!this._hasTextures&&t.requiredTextures?.some((({usage:e})=>0!=(e&pe.ColorTextures)))&&(this._hasTextures=!0),this._hasData=!0,this._hasColors=this._hasColors||v,this._hasTextures=this._hasTextures||!!e.resources.texture,this.notifyChange(\"hasTexturesOrVertexColors\");const $=this.slicePlaneEnabled;return Promise.all([this._addOrUpdateEdgeRendering(W),q]).then((([t,s])=>(c(t)&&t.updateObjectVisibility(W.objectHandle,!1).catch(this._logEdgeViewError),this._safeReschedule((()=>{const i=this._addTasks.get(e.index);if(!i)return;if(this._addNodeMeta(e.index,W),i.meta=null,this.suspended)return void this._removeNodeStageData(e.index,this.elevationOffset);m.setObjectVisibility(H,ot.Visible),c(t)&&t.updateObjectVisibility(W.objectHandle,!0).catch(this._logEdgeViewError),W.attributeInfo=i.attributeInfo;const s=W.cachedRendererVersion!==this._rendererVersion,r=$!==this.slicePlaneEnabled;this._updateElevationOffsets(W);const o=W.elevationOffsets;this._updateComponentData(W);const a=this._applyFiltersToNode(W);(s||c(t)&&(r||a||o))&&this._addOrUpdateEdgeRendering(W),c(this._labeler)&&this._addMetaToLabeler(this._labeler,W),this._visibleGeometryChanged(W,ft.ADD),this._highlights.objectCreated(W),this._updateMaterial(W),this._setNewNodeOpacity(W),c(this._treeDebugger)&&this._treeDebugger.update()}),i)))).catch((e=>{throw c(s.meta)&&(this._cacheGPUData(s.meta),s.meta=null),e}))}_addNodeMeta(e,t){if(this._removeNodeStageData(e,this.elevationOffset,this._nodeId2MetaReloading),this._nodeId2Meta.has(e)){ht.error(\"Removing duplicated node\");const t=this._nodeId2Meta.get(e);c(t)&&this._deleteComponentObject(t)}else this._controller.updateLoadStatus(e,!0);c(t)&&(t.lodCrossfadeProgress=null,this.nodeCrossfadingEnabled&&Rt(t.cachedEdgeMaterials,0)),this._nodeId2Meta.set(e,t)}_updateElevationOffsets(e){const t=this.view.renderSpatialReference,i=this.elevationInfo;if(u(t)||i.mode===Nt.Absolute)return void(e.elevationOffsets=null);const s=this.view.basemapTerrain,r=this._collection.getObjectTransform(e.objectHandle);e.elevationOffsets=e.elevationOffsets??[];const o=Ft,a=Pt;for(let n=0;n<e.featureIds.length;n++){this._collection.getComponentAabb(e.objectHandle,n,a,!0),A(o,(a[0]+a[3])/2,(a[1]+a[4])/2,a[2]),R(o,o,r.rotationScale),N(o,o,r.position);const l=s.getElevation(o[0],o[1],o[2],t),d=i.mode===Nt.OnTheGround?this.view.renderCoordsHelper.getAltitude(o):0;e.elevationOffsets[n]=i.offset+(c(l)?l-d:0)}}_elevationChanged(e){const t=this._controller.crsIndex;B(e.extent,e.spatialReference,xt,t);const i=this._controller.updateElevationChanged(xt,t);u(i)||i.forAll((e=>{c(this._nodeId2Meta.get(e))&&this._scheduleElevationAlign(e)}))}_scheduleElevationAlign(e){let t=this._elevationTask;u(t)&&(t=new ye(this.view.resourceController.scheduler,(e=>{const t=this._nodeId2Meta.get(e);c(t)&&(this._updateElevationOffsets(t),this._updateComponentData(t),this._updateEdgeRendering(t),c(this._labeler)&&this._labeler.updateLabelPositions(t))})),this._elevationTask=t),t.schedule(e)}_elevationInfoChanged(e,t){const i=e.mode!==Nt.Absolute,s=null!=t&&t!==e&&t.mode!==Nt.Absolute;i&&!s?(this.handles.add(this.view.basemapTerrain.on(\"elevation-change\",(e=>this._elevationChanged(e))),\"elevation\"),this._controller.removeAllGeometryObbs()):s&&!i&&this.handles.remove(\"elevation\"),this._intersectionHandler.updateElevationAlignState(i,this.view.state.viewingMode),this._nodeId2Meta.forEach((e=>{c(e)&&(s&&!i&&(e.node.geometryObb=it(this._collection.getComponentObb(e.objectHandle))),this._updateElevationOffsets(e),this._updateComponentData(e),this._updateEdgeRendering(e),c(this._labeler)&&this._labeler.updateLabelPositions(e))}))}_safeReschedule(e,t){return g(t),this._controller.reschedule(e,t)}_materialParameters(e,t){const i=c(e.params.material)?e.params.material:we(),s=t.some((e=>\"uvRegion\"===e.name)),r=t.some((e=>\"normalCompressed\"===e.name)),o=Ot(i);return{geometryParams:this._getGeometryParameters({hasTexture:o,hasNormals:r,hasRegions:s}),material:i}}_initMaterialAndTextures(e,t,i,s){const r=this._stage.renderView,o=i.map((e=>je(e,t,s,r)));this._stage.addMany(o);let a=null;return this._collection.updateMaterial(e,(e=>{a=Te(e,t,o,i,this.view._stage.renderView.textureRepository,{rendererTextureUsage:this.rendererTextureUsage,usePBR:this._usePBR(),isIntegratedMesh:this._isIntegratedMesh,slicePlaneEnabled:this.slicePlaneEnabled,viewSpatialReference:this.view.spatialReference}),this._updateMaterialOverlay(e)})),{textures:o,texturePromise:a}}_getGeometryParameters(e){return{textureCoordinates:e.hasTexture?e.hasRegions?nt.Atlas:nt.Default:nt.None,colors:this._hasVertexColors,normals:e.hasNormals&&!this._isIntegratedMesh}}_addData(e,t,i){let s=this._addTasks.get(e.index);return s?s.attributeInfo=t:(s={...p(),attributeInfo:t,meta:null},this._addTasks.set(e.index,s),i().then(s.resolve,s.reject).then((()=>this._addTasks.delete(e.index))).catch((t=>{throw this._addTasks.delete(e.index),t}))),s.promise}_clearAddTasks(){this._addTasks.forEach((e=>{c(e.meta)&&(this._cacheGPUData(e.meta),e.meta=null)})),this._addTasks.clear()}_clippingAreaChanged(){const e=this.view.renderSpatialReference,t=this.i3slayer.spatialReference,i=X();this._renderClippingArea=et(this.view.clippingArea,i,e)?i:null;const s=X();this._layerClippingArea=et(this.view.clippingArea,s,t)?s:null,this._filterChange(),this._controller&&this._controller.updateClippingArea(this.view.clippingArea),this._isIntegratedMesh&&this._modificationsChanged()}_geometryFilterChange(){this._controller.geometryFilterChanged(this.hasGeometryFilter)}get hasGeometryFilter(){return!1}_filterChange(){this._applyFilters(!1)}_applyFilters(e){this._filters=this.getFilters(),e?this._controller&&this._controller.requestUpdate():this._nodeId2Meta.forEach((e=>{c(e)&&this._applyFiltersToNode(e)&&(this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,ft.UPDATE))}))}getFilters(){const e=[],t=this._renderClippingArea;return c(t)&&e.push(((e,i)=>this._boundingRectFilter(e,i,t))),e}addSqlFilter(e,t,i){if(c(t)){const s=t.fieldNames;e.push(((e,r)=>this._sqlFilter(e,r,t,s,i)))}}_sqlFilter(e,t,i,s,r){const o={},a=this._createLayerGraphic(o),n=this.i3slayer.objectIdField,l=t.featureIds,d=c(t.attributeInfo)&&t.attributeInfo.attributeData;s.every((e=>null!=d[e]||e===n))&&Le(e,l,(e=>{o[n]=l[e];for(const i of s)i!==n&&(o[i]=ke(d[i],e));try{return i.testFeature(a)}catch(t){return r(t),!1}}))}_boundingRectNodeTest(e,t){return q(e.node.mbs,this._controller.crsIndex,Et,this.view.renderSpatialReference),Be(t,Et)}_boundingRectFeatureTest(e,t,i){return this._collection.getComponentAabb(e.objectHandle,t,bt),$(bt,yt),Y(i,yt)}_boundingRectFilter(e,t,i){const s=this._collection,r=this._boundingRectNodeTest(t,i);if(r===qe.INSIDE)return;if(r===qe.OUTSIDE)return void(e.length=0);const o=s.getComponentCount(t.objectHandle);if(o.invisible+o.visible!==t.featureIds.length)return;const a=this._transformClippingArea(vt,i,t.objectHandle);Le(e,t.featureIds,(e=>this._boundingRectFeatureTest(t,e,a)))}_transformClippingArea(e,t,i){const s=this._collection.getObjectTransform(i),r=s.position,o=s.rotationScale;return e[0]=(t[0]-r[0])/o[0],e[1]=(t[1]-r[1])/o[4],e[2]=(t[2]-r[0])/o[0],e[3]=(t[3]-r[1])/o[4],e}_addOrUpdateEdgeRendering(e,t=!0){const i=this._edgeView;if(u(i))return Promise.resolve(null);const s=e.objectHandle,r=i.hasObject(s),{hasEdges:o,perFeatureEdgeMaterials:a}=this._getFilteredEdgeMaterials(e),n={hasSlicePlane:this.slicePlaneEnabled};if(o&&r){if(this.nodeCrossfadingEnabled){Rt(a,this.getNodeOpacity(e))}return i.updateAllComponentMaterials(s,a,n,t).catch(this._logEdgeViewError),i.updateObjectVisibility(s,!0).catch(this._logEdgeViewError),i.updateAllVerticalOffsets(s,e.elevationOffsets).catch(this._logEdgeViewError),Promise.resolve(i)}return o&&!r?this._collection.addEdges(s,i,a,n).then((t=>(e.edgeMemoryUsage=t,e.node.memory+=t,i.updateAllVerticalOffsets(s,e.elevationOffsets).catch(this._logEdgeViewError),i))):(!o&&r&&(e.node.memory-=e.edgeMemoryUsage,e.edgeMemoryUsage=0,i.removeObject(s)),Promise.resolve(null))}_logEdgeViewError(e){f(e)||ht.error(\"Error while processing edges. Edges on this layer might not diplay correctly\",this.i3slayer,e)}_applyFiltersToNode(e){return!!this._applyFiltersToNodeComponents(e)&&(c(this._labeler)&&this._labeler.applyFilterChange(e),!0)}_applyFiltersToNodeComponents(e){const t=this._collection,i=0===t.getComponentCount(e.objectHandle).invisible;if(t.setAllComponentVisibilities(e.objectHandle,\"all\"),0===this._filters.length)return e.filteredIds=null,!i;if(this._updateCachedFilteredIds(e),e.filteredIds===e.featureIds)return!i;const s=this._computeFilteredComponentIndices(e);return t.setAllComponentVisibilities(e.objectHandle,s),!0}_updateCachedFilteredIds(e){null!=e.filteredIds&&e.appliedFilters===this._filters||(e.filteredIds=this._computeFilteredIds(e),e.appliedFilters=this._filters)}_computeFilteredIds(e){const t=e.featureIds.slice();for(const i of this._filters)if(i(t,e),0===t.length)break;return t.length===e.featureIds.length?e.featureIds:t}_computeFilteredComponentIndices(e){const t=new Array;return e.featureIds.forEach(((i,s)=>{e.filteredIds[t.length]===i&&t.push(s)})),t}_removeAllNodeDataFromStage(e=this.elevationOffset){this._nodeId2Meta.forEach(((t,i)=>this._removeNodeStageData(i,e))),this._nodeId2MetaReloading.forEach(((t,i)=>this._removeNodeStageData(i,e,this._nodeId2MetaReloading))),this._elevationTask=h(this._elevationTask)}removeNode(e){const t=this.elevationOffset;this._removeNodeStageData(e,t),this._removeNodeStageData(e,t,this._nodeId2MetaReloading),c(this._elevationTask)&&this._elevationTask.remove(e)}_removeNodeStageData(e,t,i=this._nodeId2Meta){i.has(e)&&this._controller.updateLoadStatus(e,!1);const s=i.get(e);u(s)?i.delete(e):(this._collection.setObjectVisibility(s.objectHandle,ot.Hidden),c(this._edgeView)&&this._edgeView.hasObject(s.objectHandle)&&this._edgeView.updateObjectVisibility(s.objectHandle,!1).catch(this._logEdgeViewError),this._visibleGeometryChanged(s,ft.REMOVE),c(this._labeler)&&this._labeler.removeNodeMeta(s),i.delete(e),this._highlights.objectDeleted(s),i===this._nodeId2Meta?(this._cacheGPUData(s,t),this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopNodeFading(s)):this._deleteComponentObject(s),c(this._treeDebugger)&&this._treeDebugger.update())}_deleteComponentObject(e){if(c(this._edgeView)&&this._edgeView.removeObject(e.objectHandle),this._memEstimateGeometryRemoved(e.objectHandle),this._collection.destroyObject(e.objectHandle),e.textures)for(const t of e.textures)this._memEstimateTextureRemoved(t),this._stage.remove(t)}updateNodeState(e,t){const i=this._nodeId2Meta.get(e);c(i)&&this._collection.updateMaterial(i.objectHandle,(e=>e.polygonOffsetEnabled=t===Ae.Hole))}_invalidateAllSymbols(){this._rendererVersion=ze(this._rendererVersion,1),this._controller&&this._controller.requestUpdate()}_getInvalidRendererVersion(){return ze(this._rendererVersion,-1)}async _rendererChange(e){if(this._currentRenderer=e,this.notifyChange(\"rendererTextureUsage\"),this._rendererVersion=ze(this._rendererVersion,1),this._rendererFields=null,this._colorVariable=null,this._opacityVariable=null,this._invalidateAllSymbols(),e&&(this._rendererFields=await e.getRequiredFields(this.i3slayer.fieldsIndex)),this._updateSymbologyFields(),!this._arcade&&e&&\"arcadeRequired\"in e&&e.arcadeRequired&&(this._arcade=await se()),e&&\"visualVariables\"in e&&e.visualVariables)for(const t of e.visualVariables)\"color\"===t.type?this._colorVariable=t:\"opacity\"===t.type?this._opacityVariable=t:ht.warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);if(e)for(const t of e.getSymbols())\"mesh-3d\"!==t.type&&ht.error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);this._controller&&this._controller.requestUpdate()}_getCachedEdgeMaterials(e){return this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e),e.cachedEdgeMaterials}_getComponentParameters(e){this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e);const t=e.cachedSymbology;return(i,s)=>{const r=5*i;V(s.externalColor,t[r+0]/255,t[r+1]/255,t[r+2]/255,t[r+3]/255),s.externalColorMixMode=t[r+4]&(1<<_t.CastShadows)-1,s.castShadows=0!=(t[r+4]&1<<_t.CastShadows),s.pickable=0!=(t[r+4]&1<<_t.Pickable),s.elevationOffset=e.elevationOffsets?.[i]??0}}_getSymbolInfo(e,t){const i=e&&e.getSymbol(t,{arcade:this._arcade});if(!(i instanceof re))return null;const s=i.id;if(this._symbolInfos.has(s))return this._symbolInfos.get(s);const r=Ke(i);return this._symbolInfos.set(s,r),r}_setSymbologyOverride(e,t){this._symbologyOverride!==e&&(this._symbologyOverride=e,this._symbologyOverrideFields=t,this._invalidateAllSymbols(),this._updateSymbologyFields())}_updateSymbologyFields(){this._symbologyFields=c(this._symbologyOverrideFields)&&this._symbologyOverrideFields.length>0?c(this._rendererFields)&&this._rendererFields.length>0?J(this.i3slayer.fieldsIndex,[...this._rendererFields,...this._symbologyOverrideFields]):this._symbologyOverrideFields:this._rendererFields}_updateCachedRendererData(e){if(e.cachedRendererVersion=this._rendererVersion,!this._hasComponentData)return;const t=this._tmpAttributeOnlyGraphic,i={};t.attributes=i;const s=this._currentRenderer,r=c(e.attributeInfo)&&e.attributeInfo.attributeData,o=null!=e.featureIds?this.i3slayer.objectIdField:null,a=null!=r&&c(this._symbologyFields)&&this._symbologyFields.length>0,n=a?[]:null,l=a?[]:null;if(a&&c(this._symbologyFields))for(const c of this._symbologyFields){const e=r[c];e&&(n.push(c),l.push(e))}e.cachedSymbology||(e.cachedSymbology=new Uint8Array(5*e.featureIds.length));const d={color:Mt,castShadows:!0,pickable:!0,colorMixMode:Je.Multiply,edgeMaterial:null},h=this.fullOpacity,_=this.nodeCrossfadingEnabled?this.getNodeOpacity(e):h;let m=null,g=dt.OPAQUE,p=We,f=0;for(let b=0;b<e.featureIds.length;b++){if(null!=o&&(i[o]=e.featureIds[b]),a)for(let e=0;e<n.length;e++)i[n[e]]=ke(l[e],b);const r=this._getSymbolInfo(s,t);let h=null,y=null;if(s&&\"visualVariables\"in s){if(this._colorVariable){const e=te(this._colorVariable,t,{color:Ct,arcade:this._arcade});e&&(h=Mt,h[0]=e.r/255,h[1]=e.g/255,h[2]=e.b/255,this._opacityVariable||null===e.a||(y=e.a))}this._opacityVariable&&(y=ie(this._opacityVariable,t,{arcade:this._arcade}))}if(r&&r.material){const e=r.material;h=u(h)||u(y)?ge(h,y,e.color,e.alpha,ct,Mt):ge(h,y,null,null,ct,Mt)}if(u(h)&&(h=Mt,h[0]=1,h[1]=1,h[2]=1,h[3]=1),d.pickable=!0,d.castShadows=!r||r.castShadows,d.colorMixMode=r&&r.material?r.material.colorMixMode:Je.Multiply,d.edgeMaterial=r?r.edgeMaterial:null,c(this._symbologyOverride)&&(d.color=h,this._symbologyOverride(t,d),h=d.color),c(d.edgeMaterial)){const t=h[3]<=0?dt.INVISIBLE:h[3]>=1&&(e.material.isOpaque||d.colorMixMode===Je.Replace)?dt.OPAQUE:dt.TRANSPARENT;d.edgeMaterial===m&&t===g||(p={...d.edgeMaterial,opacity:_,objectTransparency:t},m=d.edgeMaterial,g=t),e.cachedEdgeMaterials[b]=p}else e.cachedEdgeMaterials[b]=We;e.cachedSymbology[f+0]=Math.round(255*h[0]),e.cachedSymbology[f+1]=Math.round(255*h[1]),e.cachedSymbology[f+2]=Math.round(255*h[2]),e.cachedSymbology[f+3]=Math.round(255*h[3]),e.cachedSymbology[f+4]=d.colorMixMode|+d.castShadows<<_t.CastShadows|+d.pickable<<_t.Pickable,f+=5}}_getFilteredEdgeMaterials(e){const t=this._getCachedEdgeMaterials(e);if(this.nodeCrossfadingEnabled||Rt(t,this.fullOpacity),u(e.filteredIds)){return{hasEdges:t.some((e=>e!==We)),perFeatureEdgeMaterials:t}}let i=0,s=!1;const r=t.map(((t,r)=>e.featureIds[r]!==e.filteredIds[i]?We:(s=s||t!==We,i++,t)));return{hasEdges:s,perFeatureEdgeMaterials:r}}_updateComponentData(e){if(!this._hasComponentData)return;const t=e.objectHandle,i=this._getComponentParameters(e);this._collection.setComponentData(t,i),this._stage.renderView.requestRender()}_reloadAll(e=this.elevationOffset){this._removeAllNodeDataFromStage(e),null!=this._controller&&this._controller.restartNodeLoading()}_opacityChange(e){this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopAllNodeFading(),this._nodeId2Meta.forEach((t=>{u(t)||(this._collection.updateMaterial(t.objectHandle,(t=>t.objectOpacity=e)),Rt(t.cachedEdgeMaterials,e),this._updateEdgeRendering(t))}))}_updateMaterial(e){this._collection.updateMaterial(e.objectHandle,(e=>{e.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,e.usePBR=this._usePBR(),this._updateMaterialOverlay(e)}))}_updateMaterialOverlay(e){}_updateEngineObject(e){this._updateComponentData(e),this._applyFiltersToNode(e),this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,ft.UPDATE)}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),c(this._labeler)&&(this._labeler.slicePlaneEnabled=e),this._nodeId2Meta.forEach((t=>{u(t)||(this._collection.updateMaterial(t.objectHandle,(t=>{t.commonMaterialParameters.hasSlicePlane=e})),this._updateEdgeRendering(t,!1))}))}_updatePBR(){this._nodeId2Meta.forEach((e=>{u(e)||this._collection.updateMaterial(e.objectHandle,(e=>{e.usePBR=this._usePBR()}))})),this._hasLoadedPBRTextures=!0}_usePBR(){return!this._isIntegratedMesh&&this.view.qualitySettings.physicallyBasedRenderingEnabled}_updateEdgeRendering(e,t=!0){c(this._edgeView)&&this._edgeView.hasObject(e.objectHandle)&&this._addOrUpdateEdgeRendering(e,t)}_forAllNodes(e){this._nodeId2Meta.forEach(e)}_forAllFeatures(e,t,i=de.VISIBLE_ONLY){l(this._nodeId2Meta,(s=>{if(u(s))return!1;if(c(t)){switch(t(s)){case he.EXIT:return!0;case he.SKIP:return!1}}let r=he.CONTINUE;switch(i){case de.ALL:r=this._forAllFeaturesOfNode(s,e);break;case de.VISIBLE_ONLY:r=this._forVisibleFeaturesOfNode(s,e);break;case de.ALL_IN_CLIPPING_AREA:r=this._forAllFeaturesOfNodeInClippingArea(s,e)}return r===he.EXIT}))}_forAllFeaturesOfNode(e,t){let i=he.CONTINUE;const s=e.featureIds;for(let r=0;r<s.length;r++)if(i=t(s[r],r,e),i===he.EXIT)return i;return i}_forVisibleFeaturesOfNode(e,t){let i=he.CONTINUE;const s=e.featureIds;return this._collection.forEachVisibleComponent(e.objectHandle,(r=>(i=t(s[r],r,e),i===he.CONTINUE))),i}_forAllFeaturesOfNodeInClippingArea(e,t){if(u(this._renderClippingArea))return this._forAllFeaturesOfNode(e,t);const i=this._boundingRectNodeTest(e,this._renderClippingArea);if(i===qe.OUTSIDE)return he.CONTINUE;if(i===qe.INSIDE)return this._forAllFeaturesOfNode(e,t);const s=he.CONTINUE,r=e.featureIds,o=e.objectHandle,a=$e(this._renderClippingArea,this._collection.getObjectTransform(o));for(let n=0;n<r.length;n++){if(!this._boundingRectFeatureTest(e,n,a))continue;const i=t(r[n],n,e);if(i===he.EXIT)return i}return s}_createAttributes(e,t){const i={};null!=t.featureIds&&(i[this._getObjectIdField()]=t.featureIds[e]);const s=c(t.attributeInfo)&&t.attributeInfo.attributeData;if(c(s))for(const r of Object.keys(s))i[r]=ke(s[r],e);return i}_createGraphic(e,t){return this._createLayerGraphic(this._createAttributes(e,t))}highlight(e){const t=this._highlights;if(\"number\"==typeof e||e instanceof i?e=[e]:e instanceof o&&(e=e.toArray()),Array.isArray(e)&&e.length>0){if(e[0]instanceof i){const i=e,s=this.i3slayer.fieldsIndex,r=this._getObjectIdField(),o=i.map((e=>Qe(s,e.attributes,r))),{set:a,handle:n}=t.acquireSet();return t.setFeatureIds(a,o),n}if(\"number\"==typeof e[0]){const i=e,{set:s,handle:r}=t.acquireSet();return t.setFeatureIds(s,i),r}}return At}_visibleGeometryChanged(e,t){this._elevationProvider&&(this._elevationProvider.objectChanged(e.node),null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=v((()=>{this.emit(\"visible-geometry-changed\"),this._visibleGeometryChangedSchedulerHandle=null}))),this._updateSnappingSources(e,t))}get performanceInfo(){const e={displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null,index:0,nodes:this._nodeId2Meta.size,\"Total GPU Memory Estimate\":(this.gpuMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Geometry Memory Estimate\":(this.geoMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Texture Memory Estimate\":(this.texMemoryEstimate/1048576).toFixed(1)+\"MB\",\"Unloaded Memory Estimate\":(this.getUnloadedMemory()/1048576).toFixed(1)+\"MB\"};return c(this._memCache)&&(e.MemCache=Math.round(100*this._memCache.hitRate)+\"% hit\"),this._controller&&(this._idbCacheEnabled&&(e.IDBCache=Math.round(100*this._idbCache.getHitRate())+\"% hit\"),this._controller.updateStats(e)),e}get test(){const e=this;return{controller:this._controller,labeler:this._labeler,get visibleObjectIds(){const t=[];return e._forAllFeatures((e=>(t.push(e),he.CONTINUE)),null,de.VISIBLE_ONLY),t.sort(((e,t)=>e-t)),t},get numNodes(){return e._nodeId2Meta.size}}}getNodeOpacityByIndex(e){const t=this._nodeId2Meta.get(e);return this.getNodeOpacity(t)}getNodeOpacity(e){return c(e)?this._collection.getMaterial(e.objectHandle).objectOpacity:0}isNodeFullyFadedIn(e){return this._crossfadeHelper.isNodeFullyFadedIn(e)}getNodeCrossfadeMetaData(e){return this._nodeId2Meta.get(e)}markNodeToRemove(e){this._controller&&this._controller.markNodeToRemove(e)}removeMarkedNodes(){this._controller&&this._controller.removeMarkedNodes()}foreachCrossfadeNode(e){this._nodeId2Meta.forEach(((t,i)=>e(i,t)))}fadeNode(e,t,i){if(!this.nodeCrossfadingEnabled)return;const s=this._nodeId2Meta.get(e);c(s)&&this._crossfadeHelper.fadeNode(e,s,t,i)}setNodeOpacityByIndex(e,t){const i=this._nodeId2Meta.get(e);c(i)&&this._setNodeOpacity(i,t)}_setNodeOpacity(e,t){this._collection.updateMaterial(e.objectHandle,(e=>e.objectOpacity=t)),this._setNodeEdgeOpacity(e,t)}_setNodeEdgeOpacity(e,t){if(u(this._edgeView)||!e.cachedEdgeMaterials)return;Rt(e.cachedEdgeMaterials,t);const i=e.objectHandle;this._edgeView.hasObject(i)&&this._edgeView.updateAllComponentOpacities(i,t).catch(this._logEdgeViewError)}get hasModifications(){return this._isIntegratedMesh&&c(this._layerClippingArea)||this._modifications&&this._modifications.length>0}updateNodeModificationStatus(e){const t=e.length;if(!this.hasModifications||t<=0||!0!==this._i3sWasmLoaded)return;const i=this.i3slayer.uid,s=Dt(e);if(c(s)){const t={context:i,buffer:s.buffer};_e(t);const r=new Float64Array(s.buffer);e.forAll(((e,t)=>{const i=r[t],s=me(i);e.imModificationImpact=s,s!==De.Unmodified&&this._controller.invalidateGeometryVisibility(e.index)}))}}notifyUpdate(){this.notifyChange(\"updating\")}notifyLODUpdate(){this._controller.notifyLODUpdate()}isUpdating(){return!(!this._controller||!this._controller.updating)||!!this._visibleGeometryChangedSchedulerHandle||c(this._labeler)&&this._labeler.updating||this._crossfadeHelper.updating||this._i3sWasmLoaded instanceof Promise||this._asyncModuleLoading>0||c(this._elevationTask)&&this._elevationTask.running}trackSnappingSources(e){const t={events:e,fetchEdgeLocations:async(e,t,i)=>{const s=this._nodeId2Meta.get(e);if(u(s))throw new Error(\"invalid-node\");const{origin:r,buffer:o}=await this._collection.extractEdgeInformation(s.objectHandle,t,i);return{locations:o,type:\"components\",objectIds:s.featureIds,origin:r}},remove:()=>{s(this._snappingSourcesTrackers,t)}};return this._snappingSourcesTrackers.push(t),this._nodeId2Meta.forEach(((t,i)=>{u(t)||e.add(i,t.node.renderMbs)})),t}_updateSnappingSources(e,t){const{index:i,renderMbs:s}=e.node;for(const r of this._snappingSourcesTrackers)t!==ft.REMOVE&&t!==ft.UPDATE||r.events.remove(i),t!==ft.ADD&&t!==ft.UPDATE||r.events.add(i,s)}};return e([C()],r.prototype,\"_hasLoadedPBRTextures\",void 0),e([C()],r.prototype,\"_asyncModuleLoading\",void 0),e([C()],r.prototype,\"_visibleGeometryChangedSchedulerHandle\",void 0),e([C()],r.prototype,\"view\",void 0),e([C()],r.prototype,\"i3slayer\",void 0),e([C()],r.prototype,\"_controller\",void 0),e([C()],r.prototype,\"_labeler\",void 0),e([C()],r.prototype,\"updating\",void 0),e([C()],r.prototype,\"suspended\",void 0),e([C()],r.prototype,\"holeFilling\",void 0),e([C(st)],r.prototype,\"updatingProgress\",void 0),e([C({readOnly:!0,aliasOf:\"_controller.updatingProgress\"})],r.prototype,\"updatingProgressValue\",void 0),e([C({readOnly:!0})],r.prototype,\"hasTexturesOrVertexColors\",null),e([C({readOnly:!0})],r.prototype,\"rendererTextureUsage\",null),e([C()],r.prototype,\"filter\",void 0),e([C({readOnly:!0})],r.prototype,\"elevationOffset\",null),e([C({readOnly:!0})],r.prototype,\"elevationInfo\",null),e([C({type:Boolean})],r.prototype,\"slicePlaneEnabled\",void 0),e([C()],r.prototype,\"supportedTextureEncodings\",null),e([C()],r.prototype,\"uncompressedTextureDownsamplingEnabled\",null),e([C({type:[ee]})],r.prototype,\"_modifications\",void 0),e([C()],r.prototype,\"_elevationTask\",void 0),r=e([E(\"esri.views.3d.layers.I3SMeshView3D\")],r),r};var ft;!function(e){e[e.ADD=0]=\"ADD\",e[e.REMOVE=1]=\"REMOVE\",e[e.UPDATE=2]=\"UPDATE\"}(ft||(ft={}));const bt=z(),yt=X(),vt=X(),It=tt(),Mt=[0,0,0,0],Ct=new t([0,0,0,0]),Et=[0,0,0,0],xt=X();function Ot(e){if(u(e))return!1;const t=e.metallicRoughness;return t&&t.baseColorTextureId>=0||t&&t.metallicRoughnessTextureId>=0||e.normalTextureId>=0||e.emissiveTextureId>=0||e.occlusionTextureId>=0}function St(e){return\"geometryData\"in e}function wt(e){return c(e)&&I(e.data)}function jt(e,t){let i=1024+e.interleavedVertexData.byteLength+(e.indices?e.indices.byteLength:0)+e.positionData.data.byteLength+e.positionData.indices.byteLength;if(c(t))for(const s of t)c(s)&&I(s.data)&&(i+=s.data.byteLength);return i}function Tt(e,t){return t.byteSize>gt?(ht.warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`),!1):t.byteSize>0}function Dt(e){if(0===e.length)return null;const t=10*e.length,i=new Float64Array(t);return e.forAll(((e,t)=>{let s=e.serviceObb;u(s)&&(s=It,F(s.center,e.mbs),s.halfSize[0]=s.halfSize[1]=s.halfSize[2]=e.mbs[3]);const r=10*t;i[r+0]=s.center[0],i[r+1]=s.center[1],i[r+2]=s.center[2],i[r+3]=s.halfSize[0],i[r+4]=s.halfSize[1],i[r+5]=s.halfSize[2],i[r+6]=s.quaternion[0],i[r+7]=s.quaternion[1],i[r+8]=s.quaternion[2],i[r+9]=s.quaternion[3]})),i}const At={remove(){},pause(){},resume(){}};function Rt(e,t){e.forEach((e=>e.opacity=t))}var Nt;!function(e){e[e.Absolute=0]=\"Absolute\",e[e.RelativeToGround=1]=\"RelativeToGround\",e[e.OnTheGround=2]=\"OnTheGround\"}(Nt||(Nt={}));const Ft=P(),Pt=z();export{Nt as ElevationMode,pt as I3SMeshView3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}