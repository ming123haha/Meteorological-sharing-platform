{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t, disposeMaybe as s } from \"../../../../core/maybe.js\";\nimport { brushes as r } from \"../brushes.js\";\nimport i from \"../vectorTiles/shaders/VTLMaterialManager.js\";\nimport { BitBlitRenderer as n } from \"./BitBlitRenderer.js\";\nimport { WGLDrawPhase as o, WGLGeometryType as a, WGLSymbologyType as h } from \"./enums.js\";\nimport l from \"./MaterialManager.js\";\nimport f from \"./TextureManager.js\";\nimport { TextureUploadManager as c } from \"./TextureUploadManager.js\";\nimport { WorldExtentClipRenderer as _ } from \"./WorldExtentClipRenderer.js\";\nimport { AnimationEffect as d } from \"./effects/AnimationEffect.js\";\nimport { BlendEffect as E } from \"./effects/BlendEffect.js\";\nimport { FeatureEffect as b } from \"./effects/FeatureEffect.js\";\nimport u from \"./effects/HighlightEffect.js\";\nimport { HittestEffect as p } from \"./effects/HittestEffect.js\";\nimport { HittestEffectVTL as g } from \"./effects/HittestEffectVTL.js\";\nimport { EffectManager as T } from \"./effects/post-processing/EffectManager.js\";\nimport m from \"./painter/RenderPass.js\";\nimport { TextureType as C, PixelFormat as M, PixelType as R, TextureSamplingMode as F, TextureWrapMode as w, TargetType as B, DepthStencilTargetType as S, RenderbufferFormat as O, BlendFactor as x, CompareFunction as P } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as L } from \"../../../webgl/FramebufferObject.js\";\nimport { Renderbuffer as N } from \"../../../webgl/Renderbuffer.js\";\n\nfunction D(e, t) {\n  switch (e) {\n    case a.LINE:\n      return r.line;\n\n    case a.TEXT:\n      return r.text;\n\n    case a.LABEL:\n      return r.label;\n\n    case a.FILL:\n      return t === h.DOT_DENSITY ? r.dotDensity : r.fill;\n\n    case a.MARKER:\n      switch (t) {\n        case h.HEATMAP:\n          return r.heatmap;\n\n        case h.PIE_CHART:\n          return r.pieChart;\n\n        default:\n          return r.marker;\n      }\n\n  }\n}\n\nclass I {\n  constructor(e, t, s) {\n    this.context = e, this._blitRenderer = new n(), this._worldExtentClipRenderer = new _(), this._isClippedToWorldExtent = !1, this._brushCache = new Map(), this._vtlMaterialManager = new i(), this._blendEffect = new E(), this._fboPool = [], this.effects = {\n      highlight: new u(),\n      hittest: new p(),\n      hittestVTL: new g(),\n      integrate: new d(),\n      insideEffect: new b(\"inside\"),\n      outsideEffect: new b(\"outside\")\n    }, this.materialManager = new l(e), this.textureManager = new f(t, s), this.textureUploadManager = new c(e, t), this._effectsManager = new T();\n  }\n\n  get vectorTilesMaterialManager() {\n    return this._vtlMaterialManager;\n  }\n\n  getRenderTarget() {\n    return this._renderTarget;\n  }\n\n  setRenderTarget(e) {\n    this._renderTarget = e;\n  }\n\n  getFbos(e, t) {\n    if (e !== this._lastWidth || t !== this._lastHeight) {\n      if (this._lastWidth = e, this._lastHeight = t, this._fbos) {\n        for (const s in this._fbos) this._fbos[s].resize(e, t);\n\n        return this._fbos;\n      }\n\n      const s = {\n        target: C.TEXTURE_2D,\n        pixelFormat: M.RGBA,\n        dataType: R.UNSIGNED_BYTE,\n        samplingMode: F.NEAREST,\n        wrapMode: w.CLAMP_TO_EDGE,\n        width: e,\n        height: t\n      },\n            r = {\n        colorTarget: B.TEXTURE,\n        depthStencilTarget: S.DEPTH_STENCIL_RENDER_BUFFER\n      },\n            i = new N(this.context, {\n        width: e,\n        height: t,\n        internalFormat: O.DEPTH_STENCIL\n      });\n      this._stencilBuf = i, this._fbos = {\n        output: new L(this.context, r, s, i),\n        blend: new L(this.context, r, s, i),\n        effect0: new L(this.context, r, s, i)\n      };\n    }\n\n    return this._fbos;\n  }\n\n  acquireFbo(e, t) {\n    let s;\n    s = this._fboPool.length > 0 ? this._fboPool.pop() : new L(this.context, {\n      colorTarget: B.TEXTURE,\n      depthStencilTarget: S.DEPTH_STENCIL_RENDER_BUFFER\n    }, {\n      target: C.TEXTURE_2D,\n      pixelFormat: M.RGBA,\n      dataType: R.UNSIGNED_BYTE,\n      samplingMode: F.NEAREST,\n      wrapMode: w.CLAMP_TO_EDGE,\n      width: e,\n      height: t\n    }, this._stencilBuf);\n    const r = s.descriptor;\n    return r.width === e && r.height === t || s.resize(e, t), s;\n  }\n\n  releaseFbo(e) {\n    this._fboPool.push(e);\n  }\n\n  getSharedStencilBuffer() {\n    return this._stencilBuf;\n  }\n\n  beforeRenderLayers(t, s = null) {\n    const {\n      width: r,\n      height: i\n    } = t.getViewport();\n    this._prevFBO = t.getBoundFramebufferObject();\n    const n = this.getFbos(r, i);\n\n    if (t.bindFramebuffer(n.output), t.setColorMask(!0, !0, !0, !0), e(s)) {\n      const {\n        r: e,\n        g: r,\n        b: i,\n        a: n\n      } = s.color;\n      t.setClearColor(n * e / 255, n * r / 255, n * i / 255, n);\n    } else t.setClearColor(0, 0, 0, 0);\n\n    t.setDepthWriteEnabled(!0), t.setClearDepth(1), t.clear(t.gl.COLOR_BUFFER_BIT | t.gl.DEPTH_BUFFER_BIT), t.setDepthWriteEnabled(!1);\n  }\n\n  beforeRenderLayer(e, t, s) {\n    const {\n      context: r,\n      blendMode: i,\n      effects: n,\n      requireFBO: o,\n      drawPhase: a\n    } = e;\n    if (o || j(a, i, n, s)) r.bindFramebuffer(this._fbos.blend), r.setColorMask(!0, !0, !0, !0), r.setClearColor(0, 0, 0, 0), r.setDepthWriteEnabled(!0), r.setClearDepth(1), r.clear(r.gl.COLOR_BUFFER_BIT | r.gl.DEPTH_BUFFER_BIT), r.setDepthWriteEnabled(!1);else {\n      const e = this._getOutputFBO();\n\n      r.bindFramebuffer(e);\n    }\n    r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setStencilTestEnabled(!0), r.setClearStencil(t), r.setStencilWriteMask(255), r.clear(r.gl.STENCIL_BUFFER_BIT);\n  }\n\n  compositeLayer(s, r) {\n    const {\n      context: i,\n      blendMode: n,\n      effects: a,\n      requireFBO: h,\n      drawPhase: l\n    } = s;\n\n    if (h || j(l, n, a, r)) {\n      e(a) && a.length > 0 && l === o.MAP && this._applyEffects(s, a);\n\n      const h = this._getOutputFBO();\n\n      i.bindFramebuffer(h), i.setStencilTestEnabled(!1), i.setStencilWriteMask(0), i.setBlendingEnabled(!0), i.setBlendFunctionSeparate(x.ONE, x.ONE_MINUS_SRC_ALPHA, x.ONE, x.ONE_MINUS_SRC_ALPHA), i.setColorMask(!0, !0, !0, !0);\n      const f = t(n) || l === o.HIGHLIGHT ? \"normal\" : n;\n\n      this._blendEffect.draw(s, this._fbos.blend.colorTexture, F.NEAREST, f, r);\n    }\n  }\n\n  renderLayers(e) {\n    if (e.bindFramebuffer(this._prevFBO), !this._fbos) return;\n\n    const t = this._getOutputFBO();\n\n    e.setDepthTestEnabled(!1), e.setStencilWriteMask(0), this._isClippedToWorldExtent ? (e.setStencilTestEnabled(!0), e.setStencilFunction(P.EQUAL, 1, 255)) : e.setStencilTestEnabled(!1), this.blitTexture(e, t.colorTexture, F.NEAREST);\n  }\n\n  prepareDisplay(t, s, r) {\n    const {\n      context: i\n    } = t;\n\n    if (i.bindFramebuffer(this._prevFBO), i.setColorMask(!0, !0, !0, !0), e(s)) {\n      const {\n        r: e,\n        g: t,\n        b: r,\n        a: n\n      } = s.color;\n      i.setClearColor(n * e / 255, n * t / 255, n * r / 255, n);\n    } else i.setClearColor(0, 0, 0, 0);\n\n    i.setStencilWriteMask(255), i.setClearStencil(0), i.clear(i.gl.COLOR_BUFFER_BIT | i.gl.STENCIL_BUFFER_BIT), this._isClippedToWorldExtent = this._worldExtentClipRenderer.render(t, r);\n  }\n\n  dispose() {\n    if (this.materialManager.dispose(), this.textureManager.dispose(), this.textureUploadManager.destroy(), this._blitRenderer = s(this._blitRenderer), this._worldExtentClipRenderer = s(this._worldExtentClipRenderer), this._brushCache && (this._brushCache.forEach(e => e.dispose()), this._brushCache.clear(), this._brushCache = null), this._fbos) for (const e in this._fbos) this._fbos[e] && this._fbos[e].dispose();\n\n    for (const e of this._fboPool) e.dispose();\n\n    if (this._fboPool.length = 0, this.effects) for (const e in this.effects) this.effects[e] && this.effects[e].dispose();\n    this._effectsManager.dispose(), this._vtlMaterialManager = s(this._vtlMaterialManager), this._prevFBO = null;\n  }\n\n  getBrush(e, t) {\n    const s = D(e, t);\n\n    let r = this._brushCache.get(s);\n\n    return void 0 === r && (r = new s(), this._brushCache.set(s, r)), this._brushCache.get(s);\n  }\n\n  renderObject(e, t, s, i) {\n    const n = r[s];\n    if (!n) return null;\n\n    let o = this._brushCache.get(n);\n\n    void 0 === o && (o = new n(), this._brushCache.set(n, o)), o.prepareState(e, i), o.draw(e, t, i);\n  }\n\n  renderObjects(e, t, s, i) {\n    const n = r[s];\n    if (!n) return null;\n\n    let o = this._brushCache.get(n);\n\n    void 0 === o && (o = new n(), this._brushCache.set(n, o)), o.drawMany(e, t, i);\n  }\n\n  registerRenderPass(e) {\n    const t = e.brushes.map(e => (this._brushCache.has(e) || this._brushCache.set(e, new e()), this._brushCache.get(e)));\n    return new m(t, e);\n  }\n\n  setHighlightOptions(e) {\n    this.effects.highlight.setHighlightOptions(e);\n  }\n\n  blitTexture(e, t, s, r = 1) {\n    e.setBlendingEnabled(!0), e.setBlendFunctionSeparate(x.ONE, x.ONE_MINUS_SRC_ALPHA, x.ONE, x.ONE_MINUS_SRC_ALPHA), e.setColorMask(!0, !0, !0, !0), this._blitRenderer.render(e, t, s, r);\n  }\n\n  getPostProcessingEffects(e) {\n    return this._effectsManager.getPostProcessingEffects(e);\n  }\n\n  _getOutputFBO() {\n    return null != this._renderTarget ? this._renderTarget : this._fbos.output;\n  }\n\n  _applyEffects(e, t) {\n    const {\n      context: s\n    } = e,\n          r = this._effectsManager.getPostProcessingEffects(t);\n\n    for (const {\n      postProcessingEffect: i,\n      effect: n\n    } of r) s.bindFramebuffer(this._fbos.blend), i.draw(e, this._fbos.blend, n);\n  }\n\n}\n\nfunction j(t, s, r, i) {\n  return t !== o.HIGHLIGHT && (1 !== i || e(s) && \"normal\" !== s || e(r) && r.length > 0);\n}\n\nexport { I as default };","map":{"version":3,"names":["isSome","e","isNone","t","disposeMaybe","s","brushes","r","i","BitBlitRenderer","n","WGLDrawPhase","o","WGLGeometryType","a","WGLSymbologyType","h","l","f","TextureUploadManager","c","WorldExtentClipRenderer","_","AnimationEffect","d","BlendEffect","E","FeatureEffect","b","u","HittestEffect","p","HittestEffectVTL","g","EffectManager","T","m","TextureType","C","PixelFormat","M","PixelType","R","TextureSamplingMode","F","TextureWrapMode","w","TargetType","B","DepthStencilTargetType","S","RenderbufferFormat","O","BlendFactor","x","CompareFunction","P","FramebufferObject","L","Renderbuffer","N","D","LINE","line","TEXT","text","LABEL","label","FILL","DOT_DENSITY","dotDensity","fill","MARKER","HEATMAP","heatmap","PIE_CHART","pieChart","marker","I","constructor","context","_blitRenderer","_worldExtentClipRenderer","_isClippedToWorldExtent","_brushCache","Map","_vtlMaterialManager","_blendEffect","_fboPool","effects","highlight","hittest","hittestVTL","integrate","insideEffect","outsideEffect","materialManager","textureManager","textureUploadManager","_effectsManager","vectorTilesMaterialManager","getRenderTarget","_renderTarget","setRenderTarget","getFbos","_lastWidth","_lastHeight","_fbos","resize","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","width","height","colorTarget","TEXTURE","depthStencilTarget","DEPTH_STENCIL_RENDER_BUFFER","internalFormat","DEPTH_STENCIL","_stencilBuf","output","blend","effect0","acquireFbo","length","pop","descriptor","releaseFbo","push","getSharedStencilBuffer","beforeRenderLayers","getViewport","_prevFBO","getBoundFramebufferObject","bindFramebuffer","setColorMask","color","setClearColor","setDepthWriteEnabled","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","beforeRenderLayer","blendMode","requireFBO","drawPhase","j","_getOutputFBO","setDepthTestEnabled","setStencilTestEnabled","setClearStencil","setStencilWriteMask","STENCIL_BUFFER_BIT","compositeLayer","MAP","_applyEffects","setBlendingEnabled","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","HIGHLIGHT","draw","colorTexture","renderLayers","setStencilFunction","EQUAL","blitTexture","prepareDisplay","render","dispose","destroy","forEach","getBrush","get","set","renderObject","prepareState","renderObjects","drawMany","registerRenderPass","map","has","setHighlightOptions","getPostProcessingEffects","postProcessingEffect","effect","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,disposeMaybe as s}from\"../../../../core/maybe.js\";import{brushes as r}from\"../brushes.js\";import i from\"../vectorTiles/shaders/VTLMaterialManager.js\";import{BitBlitRenderer as n}from\"./BitBlitRenderer.js\";import{WGLDrawPhase as o,WGLGeometryType as a,WGLSymbologyType as h}from\"./enums.js\";import l from\"./MaterialManager.js\";import f from\"./TextureManager.js\";import{TextureUploadManager as c}from\"./TextureUploadManager.js\";import{WorldExtentClipRenderer as _}from\"./WorldExtentClipRenderer.js\";import{AnimationEffect as d}from\"./effects/AnimationEffect.js\";import{BlendEffect as E}from\"./effects/BlendEffect.js\";import{FeatureEffect as b}from\"./effects/FeatureEffect.js\";import u from\"./effects/HighlightEffect.js\";import{HittestEffect as p}from\"./effects/HittestEffect.js\";import{HittestEffectVTL as g}from\"./effects/HittestEffectVTL.js\";import{EffectManager as T}from\"./effects/post-processing/EffectManager.js\";import m from\"./painter/RenderPass.js\";import{TextureType as C,PixelFormat as M,PixelType as R,TextureSamplingMode as F,TextureWrapMode as w,TargetType as B,DepthStencilTargetType as S,RenderbufferFormat as O,BlendFactor as x,CompareFunction as P}from\"../../../webgl/enums.js\";import{FramebufferObject as L}from\"../../../webgl/FramebufferObject.js\";import{Renderbuffer as N}from\"../../../webgl/Renderbuffer.js\";function D(e,t){switch(e){case a.LINE:return r.line;case a.TEXT:return r.text;case a.LABEL:return r.label;case a.FILL:return t===h.DOT_DENSITY?r.dotDensity:r.fill;case a.MARKER:switch(t){case h.HEATMAP:return r.heatmap;case h.PIE_CHART:return r.pieChart;default:return r.marker}}}class I{constructor(e,t,s){this.context=e,this._blitRenderer=new n,this._worldExtentClipRenderer=new _,this._isClippedToWorldExtent=!1,this._brushCache=new Map,this._vtlMaterialManager=new i,this._blendEffect=new E,this._fboPool=[],this.effects={highlight:new u,hittest:new p,hittestVTL:new g,integrate:new d,insideEffect:new b(\"inside\"),outsideEffect:new b(\"outside\")},this.materialManager=new l(e),this.textureManager=new f(t,s),this.textureUploadManager=new c(e,t),this._effectsManager=new T}get vectorTilesMaterialManager(){return this._vtlMaterialManager}getRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getFbos(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(const s in this._fbos)this._fbos[s].resize(e,t);return this._fbos}const s={target:C.TEXTURE_2D,pixelFormat:M.RGBA,dataType:R.UNSIGNED_BYTE,samplingMode:F.NEAREST,wrapMode:w.CLAMP_TO_EDGE,width:e,height:t},r={colorTarget:B.TEXTURE,depthStencilTarget:S.DEPTH_STENCIL_RENDER_BUFFER},i=new N(this.context,{width:e,height:t,internalFormat:O.DEPTH_STENCIL});this._stencilBuf=i,this._fbos={output:new L(this.context,r,s,i),blend:new L(this.context,r,s,i),effect0:new L(this.context,r,s,i)}}return this._fbos}acquireFbo(e,t){let s;s=this._fboPool.length>0?this._fboPool.pop():new L(this.context,{colorTarget:B.TEXTURE,depthStencilTarget:S.DEPTH_STENCIL_RENDER_BUFFER},{target:C.TEXTURE_2D,pixelFormat:M.RGBA,dataType:R.UNSIGNED_BYTE,samplingMode:F.NEAREST,wrapMode:w.CLAMP_TO_EDGE,width:e,height:t},this._stencilBuf);const r=s.descriptor;return r.width===e&&r.height===t||s.resize(e,t),s}releaseFbo(e){this._fboPool.push(e)}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderLayers(t,s=null){const{width:r,height:i}=t.getViewport();this._prevFBO=t.getBoundFramebufferObject();const n=this.getFbos(r,i);if(t.bindFramebuffer(n.output),t.setColorMask(!0,!0,!0,!0),e(s)){const{r:e,g:r,b:i,a:n}=s.color;t.setClearColor(n*e/255,n*r/255,n*i/255,n)}else t.setClearColor(0,0,0,0);t.setDepthWriteEnabled(!0),t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,requireFBO:o,drawPhase:a}=e;if(o||j(a,i,n,s))r.bindFramebuffer(this._fbos.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);else{const e=this._getOutputFBO();r.bindFramebuffer(e)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)}compositeLayer(s,r){const{context:i,blendMode:n,effects:a,requireFBO:h,drawPhase:l}=s;if(h||j(l,n,a,r)){e(a)&&a.length>0&&l===o.MAP&&this._applyEffects(s,a);const h=this._getOutputFBO();i.bindFramebuffer(h),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(x.ONE,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA),i.setColorMask(!0,!0,!0,!0);const f=t(n)||l===o.HIGHLIGHT?\"normal\":n;this._blendEffect.draw(s,this._fbos.blend.colorTexture,F.NEAREST,f,r)}}renderLayers(e){if(e.bindFramebuffer(this._prevFBO),!this._fbos)return;const t=this._getOutputFBO();e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),this._isClippedToWorldExtent?(e.setStencilTestEnabled(!0),e.setStencilFunction(P.EQUAL,1,255)):e.setStencilTestEnabled(!1),this.blitTexture(e,t.colorTexture,F.NEAREST)}prepareDisplay(t,s,r){const{context:i}=t;if(i.bindFramebuffer(this._prevFBO),i.setColorMask(!0,!0,!0,!0),e(s)){const{r:e,g:t,b:r,a:n}=s.color;i.setClearColor(n*e/255,n*t/255,n*r/255,n)}else i.setClearColor(0,0,0,0);i.setStencilWriteMask(255),i.setClearStencil(0),i.clear(i.gl.COLOR_BUFFER_BIT|i.gl.STENCIL_BUFFER_BIT),this._isClippedToWorldExtent=this._worldExtentClipRenderer.render(t,r)}dispose(){if(this.materialManager.dispose(),this.textureManager.dispose(),this.textureUploadManager.destroy(),this._blitRenderer=s(this._blitRenderer),this._worldExtentClipRenderer=s(this._worldExtentClipRenderer),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos)for(const e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();for(const e of this._fboPool)e.dispose();if(this._fboPool.length=0,this.effects)for(const e in this.effects)this.effects[e]&&this.effects[e].dispose();this._effectsManager.dispose(),this._vtlMaterialManager=s(this._vtlMaterialManager),this._prevFBO=null}getBrush(e,t){const s=D(e,t);let r=this._brushCache.get(s);return void 0===r&&(r=new s,this._brushCache.set(s,r)),this._brushCache.get(s)}renderObject(e,t,s,i){const n=r[s];if(!n)return null;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.prepareState(e,i),o.draw(e,t,i)}renderObjects(e,t,s,i){const n=r[s];if(!n)return null;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.drawMany(e,t,i)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new m(t,e)}setHighlightOptions(e){this.effects.highlight.setHighlightOptions(e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(x.ONE,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r)}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}_getOutputFBO(){return null!=this._renderTarget?this._renderTarget:this._fbos.output}_applyEffects(e,t){const{context:s}=e,r=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:i,effect:n}of r)s.bindFramebuffer(this._fbos.blend),i.draw(e,this._fbos.blend,n)}}function j(t,s,r,i){return t!==o.HIGHLIGHT&&(1!==i||e(s)&&\"normal\"!==s||e(r)&&r.length>0)}export{I as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}