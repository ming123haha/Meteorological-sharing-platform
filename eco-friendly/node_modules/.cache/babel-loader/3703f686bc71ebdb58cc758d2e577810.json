{"ast":null,"code":"export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\n\nfunction getTextWidthMap(mapStr) {\n  var map = {};\n\n  if (typeof JSON === 'undefined') {\n    return map;\n  }\n\n  for (var i = 0; i < mapStr.length; i++) {\n    var char = String.fromCharCode(i + 32);\n    var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n    map[char] = size;\n  }\n\n  return map;\n}\n\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n  createCanvas: function () {\n    return typeof document !== 'undefined' && document.createElement('canvas');\n  },\n  measureText: function () {\n    var _ctx;\n\n    var _cachedFont;\n\n    return function (text, font) {\n      if (!_ctx) {\n        var canvas = platformApi.createCanvas();\n        _ctx = canvas && canvas.getContext('2d');\n      }\n\n      if (_ctx) {\n        if (_cachedFont !== font) {\n          _cachedFont = _ctx.font = font || DEFAULT_FONT;\n        }\n\n        return _ctx.measureText(text);\n      } else {\n        text = text || '';\n        font = font || DEFAULT_FONT;\n        var res = /^([0-9]*?)px$/.exec(font);\n        var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\n        var width = 0;\n\n        if (font.indexOf('mono') >= 0) {\n          width = fontSize * text.length;\n        } else {\n          for (var i = 0; i < text.length; i++) {\n            var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n            width += preCalcWidth == null ? fontSize : preCalcWidth * fontSize;\n          }\n        }\n\n        return {\n          width: width\n        };\n      }\n    };\n  }(),\n  loadImage: function (src, onload, onerror) {\n    var image = new Image();\n    image.onload = onload;\n    image.onerror = onerror;\n    image.src = src;\n    return image;\n  }\n};\nexport function setPlatformAPI(newPlatformApis) {\n  for (var key in platformApi) {\n    if (newPlatformApis[key]) {\n      platformApi[key] = newPlatformApis[key];\n    }\n  }\n}","map":{"version":3,"names":["DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","JSON","i","length","char","String","fromCharCode","size","charCodeAt","DEFAULT_TEXT_WIDTH_MAP","platformApi","createCanvas","document","createElement","measureText","_ctx","_cachedFont","text","font","canvas","getContext","res","exec","fontSize","width","indexOf","preCalcWidth","loadImage","src","onload","onerror","image","Image","setPlatformAPI","newPlatformApis","key"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/zrender/lib/core/platform.js"],"sourcesContent":["export var DEFAULT_FONT_SIZE = 12;\r\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\r\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\r\nvar OFFSET = 20;\r\nvar SCALE = 100;\r\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\r\nfunction getTextWidthMap(mapStr) {\r\n    var map = {};\r\n    if (typeof JSON === 'undefined') {\r\n        return map;\r\n    }\r\n    for (var i = 0; i < mapStr.length; i++) {\r\n        var char = String.fromCharCode(i + 32);\r\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\r\n        map[char] = size;\r\n    }\r\n    return map;\r\n}\r\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\r\nexport var platformApi = {\r\n    createCanvas: function () {\r\n        return typeof document !== 'undefined'\r\n            && document.createElement('canvas');\r\n    },\r\n    measureText: (function () {\r\n        var _ctx;\r\n        var _cachedFont;\r\n        return function (text, font) {\r\n            if (!_ctx) {\r\n                var canvas = platformApi.createCanvas();\r\n                _ctx = canvas && canvas.getContext('2d');\r\n            }\r\n            if (_ctx) {\r\n                if (_cachedFont !== font) {\r\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\r\n                }\r\n                return _ctx.measureText(text);\r\n            }\r\n            else {\r\n                text = text || '';\r\n                font = font || DEFAULT_FONT;\r\n                var res = /^([0-9]*?)px$/.exec(font);\r\n                var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\r\n                var width = 0;\r\n                if (font.indexOf('mono') >= 0) {\r\n                    width = fontSize * text.length;\r\n                }\r\n                else {\r\n                    for (var i = 0; i < text.length; i++) {\r\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\r\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\r\n                    }\r\n                }\r\n                return { width: width };\r\n            }\r\n        };\r\n    })(),\r\n    loadImage: function (src, onload, onerror) {\r\n        var image = new Image();\r\n        image.onload = onload;\r\n        image.onerror = onerror;\r\n        image.src = src;\r\n        return image;\r\n    }\r\n};\r\nexport function setPlatformAPI(newPlatformApis) {\r\n    for (var key in platformApi) {\r\n        if (newPlatformApis[key]) {\r\n            platformApi[key] = newPlatformApis[key];\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}