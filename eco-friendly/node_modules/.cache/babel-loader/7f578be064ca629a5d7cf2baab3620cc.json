{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport { throwIfAbortError as o } from \"../../core/promiseUtils.js\";\nimport { normalize as s, removeFile as n } from \"../../core/urlUtils.js\";\nimport l from \"../../portal/Portal.js\";\nimport a from \"../../portal/PortalQueryParams.js\";\nimport { enableWebStyleForceWOSR as m } from \"../../support/featureFlags.js\";\nconst u = {};\n\nasync function f(e, r) {\n  try {\n    return {\n      data: (await b(e, r)).data,\n      baseUrl: n(e),\n      styleUrl: e\n    };\n  } catch (t) {\n    return o(t), null;\n  }\n}\n\nfunction i(e, r, o) {\n  const s = t(r.portal) ? r.portal : l.getDefault();\n  let n;\n  const a = `${s.url} - ${s.user && s.user.username} - ${e}`;\n  return u[a] || (u[a] = y(e, s, o).then(e => (n = e, e.fetchData())).then(r => ({\n    data: r,\n    baseUrl: n.itemUrl ?? \"\",\n    styleName: e\n  }))), u[a];\n}\n\nfunction y(e, t, o) {\n  return t.load(o).then(() => {\n    const r = new a({\n      disableExtraQuery: !0,\n      query: `owner:${j} AND type:${h} AND typekeywords:\"${e}\"`\n    });\n    return t.queryItems(r, o);\n  }).then(({\n    results: t\n  }) => {\n    let s = null;\n    const n = e.toLowerCase();\n    if (t && Array.isArray(t)) for (const e of t) {\n      const r = e.typeKeywords?.some(e => e.toLowerCase() === n);\n\n      if (r && e.type === h && e.owner === j) {\n        s = e;\n        break;\n      }\n    }\n    if (!s) throw new r(\"symbolstyleutils:style-not-found\", `The style '${e}' could not be found`, {\n      styleName: e\n    });\n    return s.load(o);\n  });\n}\n\nfunction c(e, o, s) {\n  return e && t(e.styleUrl) ? f(e.styleUrl, s) : e && t(e.styleName) ? i(e.styleName, o, s) : Promise.reject(new r(\"symbolstyleutils:style-url-and-name-missing\", \"Either styleUrl or styleName is required to resolve a style\"));\n}\n\nfunction p(e) {\n  return null === e || \"CIMSymbolReference\" === e.type ? e : {\n    type: \"CIMSymbolReference\",\n    symbol: e\n  };\n}\n\nfunction d(e, r) {\n  if (\"cimRef\" === r) return e.cimRef;\n  if (e.formatInfos && !m()) for (const t of e.formatInfos) if (\"gltf\" === t.type) return t.href;\n  return e.webRef;\n}\n\nfunction b(r, t) {\n  const o = {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    },\n    ...t\n  };\n  return e(s(r), o);\n}\n\nconst j = \"esri_en\",\n      h = \"Style\",\n      w = \"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";\nexport { w as Style2DUrlTemplate, c as fetchStyle, p as makeCIMSymbolRef, b as requestJSON, d as symbolUrlFromStyleItem };","map":{"version":3,"names":["e","r","isSome","t","throwIfAbortError","o","normalize","s","removeFile","n","l","a","enableWebStyleForceWOSR","m","u","f","data","b","baseUrl","styleUrl","i","portal","getDefault","url","user","username","y","then","fetchData","itemUrl","styleName","load","disableExtraQuery","query","j","h","queryItems","results","toLowerCase","Array","isArray","typeKeywords","some","type","owner","c","Promise","reject","p","symbol","d","cimRef","formatInfos","href","webRef","responseType","w","Style2DUrlTemplate","fetchStyle","makeCIMSymbolRef","requestJSON","symbolUrlFromStyleItem"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/support/styleUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{throwIfAbortError as o}from\"../../core/promiseUtils.js\";import{normalize as s,removeFile as n}from\"../../core/urlUtils.js\";import l from\"../../portal/Portal.js\";import a from\"../../portal/PortalQueryParams.js\";import{enableWebStyleForceWOSR as m}from\"../../support/featureFlags.js\";const u={};async function f(e,r){try{return{data:(await b(e,r)).data,baseUrl:n(e),styleUrl:e}}catch(t){return o(t),null}}function i(e,r,o){const s=t(r.portal)?r.portal:l.getDefault();let n;const a=`${s.url} - ${s.user&&s.user.username} - ${e}`;return u[a]||(u[a]=y(e,s,o).then((e=>(n=e,e.fetchData()))).then((r=>({data:r,baseUrl:n.itemUrl??\"\",styleName:e})))),u[a]}function y(e,t,o){return t.load(o).then((()=>{const r=new a({disableExtraQuery:!0,query:`owner:${j} AND type:${h} AND typekeywords:\"${e}\"`});return t.queryItems(r,o)})).then((({results:t})=>{let s=null;const n=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const r=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(r&&e.type===h&&e.owner===j){s=e;break}}if(!s)throw new r(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function c(e,o,s){return e&&t(e.styleUrl)?f(e.styleUrl,s):e&&t(e.styleName)?i(e.styleName,o,s):Promise.reject(new r(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function p(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function d(e,r){if(\"cimRef\"===r)return e.cimRef;if(e.formatInfos&&!m())for(const t of e.formatInfos)if(\"gltf\"===t.type)return t.href;return e.webRef}function b(r,t){const o={responseType:\"json\",query:{f:\"json\"},...t};return e(s(r),o)}const j=\"esri_en\",h=\"Style\",w=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{w as Style2DUrlTemplate,c as fetchStyle,p as makeCIMSymbolRef,b as requestJSON,d as symbolUrlFromStyleItem};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}