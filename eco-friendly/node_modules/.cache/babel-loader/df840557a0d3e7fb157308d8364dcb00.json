{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { throwIfNotAbortError as e, isAbortError as t, eachAlways as s } from \"../../../../core/promiseUtils.js\";\nimport { addQueryParameters as r } from \"../../../../core/urlUtils.js\";\nimport { open as i } from \"../../../../core/workers/workers.js\";\nimport o from \"./GlyphMosaic.js\";\nimport a from \"./GlyphSource.js\";\nimport l from \"./SpriteMosaic.js\";\nimport c from \"../../tiling/TileKey.js\";\n\nclass n {\n  constructor(e, t, s) {\n    this._layer = e, this._styleRepository = t, this.devicePixelRatio = s, this._spriteMosaic = null, this._glyphMosaic = null, this._connection = null;\n  }\n\n  destroy() {\n    this._connection && (this._connection.close(), this._connection = null), this._styleRepository = null, this._layer = null, this._spriteMosaic && (this._spriteMosaic = null), this._glyphMosaic && (this._glyphMosaic = null);\n  }\n\n  get spriteMosaic() {\n    return this._spriteSourcePromise.then(() => this._spriteMosaic);\n  }\n\n  get glyphMosaic() {\n    return this._glyphMosaic;\n  }\n\n  async start(t) {\n    this._spriteSourcePromise = this._layer.loadSpriteSource(this.devicePixelRatio, t), this._spriteSourcePromise.then(e => {\n      this._spriteMosaic = new l(1024, 1024, 250), this._spriteMosaic.setSpriteSource(e);\n    });\n    const s = new a(this._layer.currentStyleInfo.glyphsUrl ? r(this._layer.currentStyleInfo.glyphsUrl, { ...this._layer.customParameters,\n      token: this._layer.apiKey\n    }) : null);\n    this._glyphMosaic = new o(1024, 1024, s), this._broadcastPromise = i(\"WorkerTileHandler\", {\n      client: this,\n      schedule: t.schedule,\n      signal: t.signal\n    }).then(s => {\n      if (this._connection = s, this._layer && !this._connection.closed) {\n        const r = s.broadcast(\"setStyle\", this._layer.currentStyleInfo.style, t);\n        Promise.all(r).catch(t => e(t));\n      }\n    });\n  }\n\n  async updateStyle(e) {\n    return await this._broadcastPromise, this._broadcastPromise = Promise.all(this._connection.broadcast(\"updateStyle\", e)), this._broadcastPromise;\n  }\n\n  setSpriteSource(e) {\n    const t = new l(1024, 1024, 250);\n    return t.setSpriteSource(e), this._spriteMosaic = t, this._spriteSourcePromise = Promise.resolve(e), t;\n  }\n\n  async setStyle(e, t) {\n    await this._broadcastPromise, this._styleRepository = e, this._spriteSourcePromise = this._layer.loadSpriteSource(this.devicePixelRatio, null), this._spriteSourcePromise.then(e => {\n      this._spriteMosaic = new l(1024, 1024, 250), this._spriteMosaic.setSpriteSource(e);\n    });\n    const s = new a(this._layer.currentStyleInfo.glyphsUrl ? r(this._layer.currentStyleInfo.glyphsUrl, { ...this._layer.customParameters,\n      token: this._layer.apiKey\n    }) : null);\n    return this._glyphMosaic = new o(1024, 1024, s), this._broadcastPromise = Promise.all(this._connection.broadcast(\"setStyle\", t)), this._broadcastPromise;\n  }\n\n  fetchTileData(e, t) {\n    return this._getRefKeys(e, t).then(e => {\n      const s = this._layer.sourceNameToSource,\n            r = [];\n\n      for (const t in s) r.push(t);\n\n      return this._getSourcesData(r, e, t);\n    });\n  }\n\n  parseTileData(e, t) {\n    const s = e && e.data;\n    if (!s) return Promise.resolve(null);\n    const {\n      sourceName2DataAndRefKey: r,\n      transferList: i\n    } = s;\n    return 0 === Object.keys(r).length ? Promise.resolve(null) : this._broadcastPromise.then(() => this._connection.invoke(\"createTileAndParse\", {\n      key: e.key.id,\n      sourceName2DataAndRefKey: r,\n      styleLayerUIDs: e.styleLayerUIDs\n    }, { ...t,\n      transferList: i\n    }));\n  }\n\n  async getSprites(e) {\n    return await this._spriteSourcePromise, this._spriteMosaic.getSpriteItems(e);\n  }\n\n  getGlyphs(e) {\n    return this._glyphMosaic.getGlyphItems(e.font, e.codePoints);\n  }\n\n  async _getTilePayload(e, s, r) {\n    const i = c.pool.acquire(e.id),\n          o = this._layer.sourceNameToSource[s],\n          {\n      level: a,\n      row: l,\n      col: n\n    } = i;\n    c.pool.release(i);\n\n    try {\n      return {\n        protobuff: await o.requestTile(a, l, n, r),\n        sourceName: s\n      };\n    } catch (h) {\n      if (t(h)) throw h;\n      return {\n        protobuff: null,\n        sourceName: s\n      };\n    }\n  }\n\n  _getRefKeys(e, t) {\n    const r = this._layer.sourceNameToSource,\n          i = new Array();\n\n    for (const s in r) {\n      const o = r[s].getRefKey(e, t);\n      i.push(o);\n    }\n\n    return s(i);\n  }\n\n  _getSourcesData(e, t, r) {\n    const i = [];\n\n    for (let s = 0; s < t.length; s++) if (null == t[s].value || null == e[s]) i.push(null);else {\n      const o = this._getTilePayload(t[s].value, e[s], r);\n\n      i.push(o);\n    }\n\n    return s(i).then(e => {\n      const s = {},\n            r = [];\n\n      for (let i = 0; i < e.length; i++) if (e[i].value && e[i].value && e[i].value.protobuff && e[i].value.protobuff.byteLength > 0) {\n        const o = t[i].value.id;\n        s[e[i].value.sourceName] = {\n          refKey: o,\n          protobuff: e[i].value.protobuff\n        }, r.push(e[i].value.protobuff);\n      }\n\n      return {\n        sourceName2DataAndRefKey: s,\n        transferList: r\n      };\n    });\n  }\n\n}\n\nexport { n as TileHandler };","map":{"version":3,"names":["throwIfNotAbortError","e","isAbortError","t","eachAlways","s","addQueryParameters","r","open","i","o","a","l","c","n","constructor","_layer","_styleRepository","devicePixelRatio","_spriteMosaic","_glyphMosaic","_connection","destroy","close","spriteMosaic","_spriteSourcePromise","then","glyphMosaic","start","loadSpriteSource","setSpriteSource","currentStyleInfo","glyphsUrl","customParameters","token","apiKey","_broadcastPromise","client","schedule","signal","closed","broadcast","style","Promise","all","catch","updateStyle","resolve","setStyle","fetchTileData","_getRefKeys","sourceNameToSource","push","_getSourcesData","parseTileData","data","sourceName2DataAndRefKey","transferList","Object","keys","length","invoke","key","id","styleLayerUIDs","getSprites","getSpriteItems","getGlyphs","getGlyphItems","font","codePoints","_getTilePayload","pool","acquire","level","row","col","release","protobuff","requestTile","sourceName","h","Array","getRefKey","value","byteLength","refKey","TileHandler"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{throwIfNotAbortError as e,isAbortError as t,eachAlways as s}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as r}from\"../../../../core/urlUtils.js\";import{open as i}from\"../../../../core/workers/workers.js\";import o from\"./GlyphMosaic.js\";import a from\"./GlyphSource.js\";import l from\"./SpriteMosaic.js\";import c from\"../../tiling/TileKey.js\";class n{constructor(e,t,s){this._layer=e,this._styleRepository=t,this.devicePixelRatio=s,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null}destroy(){this._connection&&(this._connection.close(),this._connection=null),this._styleRepository=null,this._layer=null,this._spriteMosaic&&(this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic=null)}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(t){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,t),this._spriteSourcePromise.then((e=>{this._spriteMosaic=new l(1024,1024,250),this._spriteMosaic.setSpriteSource(e)}));const s=new a(this._layer.currentStyleInfo.glyphsUrl?r(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new o(1024,1024,s),this._broadcastPromise=i(\"WorkerTileHandler\",{client:this,schedule:t.schedule,signal:t.signal}).then((s=>{if(this._connection=s,this._layer&&!this._connection.closed){const r=s.broadcast(\"setStyle\",this._layer.currentStyleInfo.style,t);Promise.all(r).catch((t=>e(t)))}}))}async updateStyle(e){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast(\"updateStyle\",e)),this._broadcastPromise}setSpriteSource(e){const t=new l(1024,1024,250);return t.setSpriteSource(e),this._spriteMosaic=t,this._spriteSourcePromise=Promise.resolve(e),t}async setStyle(e,t){await this._broadcastPromise,this._styleRepository=e,this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null),this._spriteSourcePromise.then((e=>{this._spriteMosaic=new l(1024,1024,250),this._spriteMosaic.setSpriteSource(e)}));const s=new a(this._layer.currentStyleInfo.glyphsUrl?r(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new o(1024,1024,s),this._broadcastPromise=Promise.all(this._connection.broadcast(\"setStyle\",t)),this._broadcastPromise}fetchTileData(e,t){return this._getRefKeys(e,t).then((e=>{const s=this._layer.sourceNameToSource,r=[];for(const t in s)r.push(t);return this._getSourcesData(r,e,t)}))}parseTileData(e,t){const s=e&&e.data;if(!s)return Promise.resolve(null);const{sourceName2DataAndRefKey:r,transferList:i}=s;return 0===Object.keys(r).length?Promise.resolve(null):this._broadcastPromise.then((()=>this._connection.invoke(\"createTileAndParse\",{key:e.key.id,sourceName2DataAndRefKey:r,styleLayerUIDs:e.styleLayerUIDs},{...t,transferList:i})))}async getSprites(e){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(e)}getGlyphs(e){return this._glyphMosaic.getGlyphItems(e.font,e.codePoints)}async _getTilePayload(e,s,r){const i=c.pool.acquire(e.id),o=this._layer.sourceNameToSource[s],{level:a,row:l,col:n}=i;c.pool.release(i);try{return{protobuff:await o.requestTile(a,l,n,r),sourceName:s}}catch(h){if(t(h))throw h;return{protobuff:null,sourceName:s}}}_getRefKeys(e,t){const r=this._layer.sourceNameToSource,i=new Array;for(const s in r){const o=r[s].getRefKey(e,t);i.push(o)}return s(i)}_getSourcesData(e,t,r){const i=[];for(let s=0;s<t.length;s++)if(null==t[s].value||null==e[s])i.push(null);else{const o=this._getTilePayload(t[s].value,e[s],r);i.push(o)}return s(i).then((e=>{const s={},r=[];for(let i=0;i<e.length;i++)if(e[i].value&&e[i].value&&e[i].value.protobuff&&e[i].value.protobuff.byteLength>0){const o=t[i].value.id;s[e[i].value.sourceName]={refKey:o,protobuff:e[i].value.protobuff},r.push(e[i].value.protobuff)}return{sourceName2DataAndRefKey:s,transferList:r}}))}}export{n as TileHandler};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,oBAAoB,IAAIC,CAA/B,EAAiCC,YAAY,IAAIC,CAAjD,EAAmDC,UAAU,IAAIC,CAAjE,QAAuE,kCAAvE;AAA0G,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,8BAAnC;AAAkE,SAAOC,IAAI,IAAIC,CAAf,QAAqB,qCAArB;AAA2D,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,mBAAb;AAAiC,OAAOC,CAAP,MAAa,yBAAb;;AAAuC,MAAMC,CAAN,CAAO;EAACC,WAAW,CAACd,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAKW,MAAL,GAAYf,CAAZ,EAAc,KAAKgB,gBAAL,GAAsBd,CAApC,EAAsC,KAAKe,gBAAL,GAAsBb,CAA5D,EAA8D,KAAKc,aAAL,GAAmB,IAAjF,EAAsF,KAAKC,YAAL,GAAkB,IAAxG,EAA6G,KAAKC,WAAL,GAAiB,IAA9H;EAAmI;;EAAAC,OAAO,GAAE;IAAC,KAAKD,WAAL,KAAmB,KAAKA,WAAL,CAAiBE,KAAjB,IAAyB,KAAKF,WAAL,GAAiB,IAA7D,GAAmE,KAAKJ,gBAAL,GAAsB,IAAzF,EAA8F,KAAKD,MAAL,GAAY,IAA1G,EAA+G,KAAKG,aAAL,KAAqB,KAAKA,aAAL,GAAmB,IAAxC,CAA/G,EAA6J,KAAKC,YAAL,KAAoB,KAAKA,YAAL,GAAkB,IAAtC,CAA7J;EAAyM;;EAAgB,IAAZI,YAAY,GAAE;IAAC,OAAO,KAAKC,oBAAL,CAA0BC,IAA1B,CAAgC,MAAI,KAAKP,aAAzC,CAAP;EAAgE;;EAAe,IAAXQ,WAAW,GAAE;IAAC,OAAO,KAAKP,YAAZ;EAAyB;;EAAW,MAALQ,KAAK,CAACzB,CAAD,EAAG;IAAC,KAAKsB,oBAAL,GAA0B,KAAKT,MAAL,CAAYa,gBAAZ,CAA6B,KAAKX,gBAAlC,EAAmDf,CAAnD,CAA1B,EAAgF,KAAKsB,oBAAL,CAA0BC,IAA1B,CAAgCzB,CAAC,IAAE;MAAC,KAAKkB,aAAL,GAAmB,IAAIP,CAAJ,CAAM,IAAN,EAAW,IAAX,EAAgB,GAAhB,CAAnB,EAAwC,KAAKO,aAAL,CAAmBW,eAAnB,CAAmC7B,CAAnC,CAAxC;IAA8E,CAAlH,CAAhF;IAAqM,MAAMI,CAAC,GAAC,IAAIM,CAAJ,CAAM,KAAKK,MAAL,CAAYe,gBAAZ,CAA6BC,SAA7B,GAAuCzB,CAAC,CAAC,KAAKS,MAAL,CAAYe,gBAAZ,CAA6BC,SAA9B,EAAwC,EAAC,GAAG,KAAKhB,MAAL,CAAYiB,gBAAhB;MAAiCC,KAAK,EAAC,KAAKlB,MAAL,CAAYmB;IAAnD,CAAxC,CAAxC,GAA4I,IAAlJ,CAAR;IAAgK,KAAKf,YAAL,GAAkB,IAAIV,CAAJ,CAAM,IAAN,EAAW,IAAX,EAAgBL,CAAhB,CAAlB,EAAqC,KAAK+B,iBAAL,GAAuB3B,CAAC,CAAC,mBAAD,EAAqB;MAAC4B,MAAM,EAAC,IAAR;MAAaC,QAAQ,EAACnC,CAAC,CAACmC,QAAxB;MAAiCC,MAAM,EAACpC,CAAC,CAACoC;IAA1C,CAArB,CAAD,CAAyEb,IAAzE,CAA+ErB,CAAC,IAAE;MAAC,IAAG,KAAKgB,WAAL,GAAiBhB,CAAjB,EAAmB,KAAKW,MAAL,IAAa,CAAC,KAAKK,WAAL,CAAiBmB,MAArD,EAA4D;QAAC,MAAMjC,CAAC,GAACF,CAAC,CAACoC,SAAF,CAAY,UAAZ,EAAuB,KAAKzB,MAAL,CAAYe,gBAAZ,CAA6BW,KAApD,EAA0DvC,CAA1D,CAAR;QAAqEwC,OAAO,CAACC,GAAR,CAAYrC,CAAZ,EAAesC,KAAf,CAAsB1C,CAAC,IAAEF,CAAC,CAACE,CAAD,CAA1B;MAAgC;IAAC,CAAtP,CAA5D;EAAqT;;EAAiB,MAAX2C,WAAW,CAAC7C,CAAD,EAAG;IAAC,OAAO,MAAM,KAAKmC,iBAAX,EAA6B,KAAKA,iBAAL,GAAuBO,OAAO,CAACC,GAAR,CAAY,KAAKvB,WAAL,CAAiBoB,SAAjB,CAA2B,aAA3B,EAAyCxC,CAAzC,CAAZ,CAApD,EAA6G,KAAKmC,iBAAzH;EAA2I;;EAAAN,eAAe,CAAC7B,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,IAAIS,CAAJ,CAAM,IAAN,EAAW,IAAX,EAAgB,GAAhB,CAAR;IAA6B,OAAOT,CAAC,CAAC2B,eAAF,CAAkB7B,CAAlB,GAAqB,KAAKkB,aAAL,GAAmBhB,CAAxC,EAA0C,KAAKsB,oBAAL,GAA0BkB,OAAO,CAACI,OAAR,CAAgB9C,CAAhB,CAApE,EAAuFE,CAA9F;EAAgG;;EAAc,MAAR6C,QAAQ,CAAC/C,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAM,KAAKiC,iBAAX,EAA6B,KAAKnB,gBAAL,GAAsBhB,CAAnD,EAAqD,KAAKwB,oBAAL,GAA0B,KAAKT,MAAL,CAAYa,gBAAZ,CAA6B,KAAKX,gBAAlC,EAAmD,IAAnD,CAA/E,EAAwI,KAAKO,oBAAL,CAA0BC,IAA1B,CAAgCzB,CAAC,IAAE;MAAC,KAAKkB,aAAL,GAAmB,IAAIP,CAAJ,CAAM,IAAN,EAAW,IAAX,EAAgB,GAAhB,CAAnB,EAAwC,KAAKO,aAAL,CAAmBW,eAAnB,CAAmC7B,CAAnC,CAAxC;IAA8E,CAAlH,CAAxI;IAA6P,MAAMI,CAAC,GAAC,IAAIM,CAAJ,CAAM,KAAKK,MAAL,CAAYe,gBAAZ,CAA6BC,SAA7B,GAAuCzB,CAAC,CAAC,KAAKS,MAAL,CAAYe,gBAAZ,CAA6BC,SAA9B,EAAwC,EAAC,GAAG,KAAKhB,MAAL,CAAYiB,gBAAhB;MAAiCC,KAAK,EAAC,KAAKlB,MAAL,CAAYmB;IAAnD,CAAxC,CAAxC,GAA4I,IAAlJ,CAAR;IAAgK,OAAO,KAAKf,YAAL,GAAkB,IAAIV,CAAJ,CAAM,IAAN,EAAW,IAAX,EAAgBL,CAAhB,CAAlB,EAAqC,KAAK+B,iBAAL,GAAuBO,OAAO,CAACC,GAAR,CAAY,KAAKvB,WAAL,CAAiBoB,SAAjB,CAA2B,UAA3B,EAAsCtC,CAAtC,CAAZ,CAA5D,EAAkH,KAAKiC,iBAA9H;EAAgJ;;EAAAa,aAAa,CAAChD,CAAD,EAAGE,CAAH,EAAK;IAAC,OAAO,KAAK+C,WAAL,CAAiBjD,CAAjB,EAAmBE,CAAnB,EAAsBuB,IAAtB,CAA4BzB,CAAC,IAAE;MAAC,MAAMI,CAAC,GAAC,KAAKW,MAAL,CAAYmC,kBAApB;MAAA,MAAuC5C,CAAC,GAAC,EAAzC;;MAA4C,KAAI,MAAMJ,CAAV,IAAeE,CAAf,EAAiBE,CAAC,CAAC6C,IAAF,CAAOjD,CAAP;;MAAU,OAAO,KAAKkD,eAAL,CAAqB9C,CAArB,EAAuBN,CAAvB,EAAyBE,CAAzB,CAAP;IAAmC,CAA1I,CAAP;EAAoJ;;EAAAmD,aAAa,CAACrD,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAME,CAAC,GAACJ,CAAC,IAAEA,CAAC,CAACsD,IAAb;IAAkB,IAAG,CAAClD,CAAJ,EAAM,OAAOsC,OAAO,CAACI,OAAR,CAAgB,IAAhB,CAAP;IAA6B,MAAK;MAACS,wBAAwB,EAACjD,CAA1B;MAA4BkD,YAAY,EAAChD;IAAzC,IAA4CJ,CAAjD;IAAmD,OAAO,MAAIqD,MAAM,CAACC,IAAP,CAAYpD,CAAZ,EAAeqD,MAAnB,GAA0BjB,OAAO,CAACI,OAAR,CAAgB,IAAhB,CAA1B,GAAgD,KAAKX,iBAAL,CAAuBV,IAAvB,CAA6B,MAAI,KAAKL,WAAL,CAAiBwC,MAAjB,CAAwB,oBAAxB,EAA6C;MAACC,GAAG,EAAC7D,CAAC,CAAC6D,GAAF,CAAMC,EAAX;MAAcP,wBAAwB,EAACjD,CAAvC;MAAyCyD,cAAc,EAAC/D,CAAC,CAAC+D;IAA1D,CAA7C,EAAuH,EAAC,GAAG7D,CAAJ;MAAMsD,YAAY,EAAChD;IAAnB,CAAvH,CAAjC,CAAvD;EAAwO;;EAAgB,MAAVwD,UAAU,CAAChE,CAAD,EAAG;IAAC,OAAO,MAAM,KAAKwB,oBAAX,EAAgC,KAAKN,aAAL,CAAmB+C,cAAnB,CAAkCjE,CAAlC,CAAvC;EAA4E;;EAAAkE,SAAS,CAAClE,CAAD,EAAG;IAAC,OAAO,KAAKmB,YAAL,CAAkBgD,aAAlB,CAAgCnE,CAAC,CAACoE,IAAlC,EAAuCpE,CAAC,CAACqE,UAAzC,CAAP;EAA4D;;EAAqB,MAAfC,eAAe,CAACtE,CAAD,EAAGI,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAME,CAAC,GAACI,CAAC,CAAC2D,IAAF,CAAOC,OAAP,CAAexE,CAAC,CAAC8D,EAAjB,CAAR;IAAA,MAA6BrD,CAAC,GAAC,KAAKM,MAAL,CAAYmC,kBAAZ,CAA+B9C,CAA/B,CAA/B;IAAA,MAAiE;MAACqE,KAAK,EAAC/D,CAAP;MAASgE,GAAG,EAAC/D,CAAb;MAAegE,GAAG,EAAC9D;IAAnB,IAAsBL,CAAvF;IAAyFI,CAAC,CAAC2D,IAAF,CAAOK,OAAP,CAAepE,CAAf;;IAAkB,IAAG;MAAC,OAAM;QAACqE,SAAS,EAAC,MAAMpE,CAAC,CAACqE,WAAF,CAAcpE,CAAd,EAAgBC,CAAhB,EAAkBE,CAAlB,EAAoBP,CAApB,CAAjB;QAAwCyE,UAAU,EAAC3E;MAAnD,CAAN;IAA4D,CAAhE,CAAgE,OAAM4E,CAAN,EAAQ;MAAC,IAAG9E,CAAC,CAAC8E,CAAD,CAAJ,EAAQ,MAAMA,CAAN;MAAQ,OAAM;QAACH,SAAS,EAAC,IAAX;QAAgBE,UAAU,EAAC3E;MAA3B,CAAN;IAAoC;EAAC;;EAAA6C,WAAW,CAACjD,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAMI,CAAC,GAAC,KAAKS,MAAL,CAAYmC,kBAApB;IAAA,MAAuC1C,CAAC,GAAC,IAAIyE,KAAJ,EAAzC;;IAAmD,KAAI,MAAM7E,CAAV,IAAeE,CAAf,EAAiB;MAAC,MAAMG,CAAC,GAACH,CAAC,CAACF,CAAD,CAAD,CAAK8E,SAAL,CAAelF,CAAf,EAAiBE,CAAjB,CAAR;MAA4BM,CAAC,CAAC2C,IAAF,CAAO1C,CAAP;IAAU;;IAAA,OAAOL,CAAC,CAACI,CAAD,CAAR;EAAY;;EAAA4C,eAAe,CAACpD,CAAD,EAAGE,CAAH,EAAKI,CAAL,EAAO;IAAC,MAAME,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAACyD,MAAhB,EAAuBvD,CAAC,EAAxB,EAA2B,IAAG,QAAMF,CAAC,CAACE,CAAD,CAAD,CAAK+E,KAAX,IAAkB,QAAMnF,CAAC,CAACI,CAAD,CAA5B,EAAgCI,CAAC,CAAC2C,IAAF,CAAO,IAAP,EAAhC,KAAiD;MAAC,MAAM1C,CAAC,GAAC,KAAK6D,eAAL,CAAqBpE,CAAC,CAACE,CAAD,CAAD,CAAK+E,KAA1B,EAAgCnF,CAAC,CAACI,CAAD,CAAjC,EAAqCE,CAArC,CAAR;;MAAgDE,CAAC,CAAC2C,IAAF,CAAO1C,CAAP;IAAU;;IAAA,OAAOL,CAAC,CAACI,CAAD,CAAD,CAAKiB,IAAL,CAAWzB,CAAC,IAAE;MAAC,MAAMI,CAAC,GAAC,EAAR;MAAA,MAAWE,CAAC,GAAC,EAAb;;MAAgB,KAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACR,CAAC,CAAC2D,MAAhB,EAAuBnD,CAAC,EAAxB,EAA2B,IAAGR,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,IAAYnF,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAjB,IAAwBnF,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,CAAWN,SAAnC,IAA8C7E,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,CAAWN,SAAX,CAAqBO,UAArB,GAAgC,CAAjF,EAAmF;QAAC,MAAM3E,CAAC,GAACP,CAAC,CAACM,CAAD,CAAD,CAAK2E,KAAL,CAAWrB,EAAnB;QAAsB1D,CAAC,CAACJ,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,CAAWJ,UAAZ,CAAD,GAAyB;UAACM,MAAM,EAAC5E,CAAR;UAAUoE,SAAS,EAAC7E,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,CAAWN;QAA/B,CAAzB,EAAmEvE,CAAC,CAAC6C,IAAF,CAAOnD,CAAC,CAACQ,CAAD,CAAD,CAAK2E,KAAL,CAAWN,SAAlB,CAAnE;MAAgG;;MAAA,OAAM;QAACtB,wBAAwB,EAACnD,CAA1B;QAA4BoD,YAAY,EAAClD;MAAzC,CAAN;IAAkD,CAAtT,CAAP;EAAgU;;AAA5iH;;AAA6iH,SAAOO,CAAC,IAAIyE,WAAZ"},"metadata":{},"sourceType":"module"}