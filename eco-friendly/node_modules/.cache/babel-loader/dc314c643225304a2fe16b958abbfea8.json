{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e, unwrapOr as r } from \"../../../core/maybe.js\";\nimport { c as n, d as t, g as o, b as i, a as s, e as a, l as c } from \"../../../chunks/vec3.js\";\nimport { c as l } from \"../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as d } from \"../../../geometry/projectionEllipsoid.js\";\nimport { containsPoint as u } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { newIntersector as f } from \"../webgl-engine/lib/Intersector.js\";\n\nfunction p(r, n, t, o) {\n  return e(r.renderCoordsHelper.fromRenderCoords(n.eye, j, o)) && u(t, j);\n}\n\nfunction m(e, n) {\n  return e.elevationProvider ? r(e.elevationProvider.getElevation(n[0], n[1], n[2], e.renderCoordsHelper.spatialReference, \"ground\"), 0) : 0;\n}\n\nfunction g(e, r, a, c) {\n  const l = e.state.camera.clone();\n  r && (l.eye = r, l.center = a, l.up = c), v(e, l.ray, w) || n(w, l.center);\n  const d = e.state.constraints,\n        u = d.minimumPoiDistance;\n\n  if (t(l.eye, w) < u) {\n    const r = d.collision.enabled;\n    n(H, l.viewForward), o(H, H, u), r ? l.eye = i(j, w, H) : s(w, l.eye, H);\n    const t = e.renderCoordsHelper,\n          a = t.getAltitude(l.eye),\n          c = d.collision.elevationMargin;\n    r && a < c && (i(H, w, l.eye), l.eye = t.setAltitude(j, c, l.eye), s(w, l.eye, H));\n  }\n\n  return l.center = w, l;\n}\n\nfunction y(e, r, n) {\n  if (!e.state.isGlobal) return !1;\n  const o = m(e, r),\n        i = e.stateManager.constraintsManager.nearFarHeuristic,\n        {\n    far: s\n  } = i.compute(r, n, e.renderDataExtent, o, C),\n        a = s * s;\n  return t(r, n) > a;\n}\n\nfunction v(e, r, n) {\n  let t = M[e.viewingMode];\n  t || (t = f(e.state.viewingMode), t.options.backfacesTerrain = !e.state.isGlobal, t.options.invisibleTerrain = !0, M[e.viewingMode] = t);\n  const {\n    isGlobal: o\n  } = e.state;\n  return !(!e.sceneIntersectionHelper.intersectRay(r, t, n) || y(e, r.origin, n)) || !(!e.renderCoordsHelper.intersectManifold(r, 0, n) || y(e, r.origin, n)) || !!o && b(r, n, d(e.spatialReference).radius);\n}\n\nfunction b(e, r, n) {\n  const t = a(e.origin, e.origin) - n * n,\n        i = t > 0 ? Math.sqrt(t) / 3 : 1;\n  return o(r, e.direction, i / c(e.direction)), s(r, r, e.origin), !0;\n}\n\nconst M = {},\n      j = l(),\n      w = l(),\n      H = l(),\n      C = {\n  near: 0,\n  far: 0\n};\nexport { g as cameraOnContentAlongViewDirection, p as eyeWithinExtent, m as surfaceElevationBelowRenderLocation };","map":{"version":3,"names":["isSome","e","unwrapOr","r","c","n","d","t","g","o","b","i","a","s","l","getReferenceEllipsoid","containsPoint","u","newIntersector","f","p","renderCoordsHelper","fromRenderCoords","eye","j","m","elevationProvider","getElevation","spatialReference","state","camera","clone","center","up","v","ray","w","constraints","minimumPoiDistance","collision","enabled","H","viewForward","getAltitude","elevationMargin","setAltitude","y","isGlobal","stateManager","constraintsManager","nearFarHeuristic","far","compute","renderDataExtent","C","M","viewingMode","options","backfacesTerrain","invisibleTerrain","sceneIntersectionHelper","intersectRay","origin","intersectManifold","radius","Math","sqrt","direction","near","cameraOnContentAlongViewDirection","eyeWithinExtent","surfaceElevationBelowRenderLocation"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/camera/intersectionUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,unwrapOr as r}from\"../../../core/maybe.js\";import{c as n,d as t,g as o,b as i,a as s,e as a,l as c}from\"../../../chunks/vec3.js\";import{c as l}from\"../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as d}from\"../../../geometry/projectionEllipsoid.js\";import{containsPoint as u}from\"../../../geometry/support/aaBoundingRect.js\";import{newIntersector as f}from\"../webgl-engine/lib/Intersector.js\";function p(r,n,t,o){return e(r.renderCoordsHelper.fromRenderCoords(n.eye,j,o))&&u(t,j)}function m(e,n){return e.elevationProvider?r(e.elevationProvider.getElevation(n[0],n[1],n[2],e.renderCoordsHelper.spatialReference,\"ground\"),0):0}function g(e,r,a,c){const l=e.state.camera.clone();r&&(l.eye=r,l.center=a,l.up=c),v(e,l.ray,w)||n(w,l.center);const d=e.state.constraints,u=d.minimumPoiDistance;if(t(l.eye,w)<u){const r=d.collision.enabled;n(H,l.viewForward),o(H,H,u),r?l.eye=i(j,w,H):s(w,l.eye,H);const t=e.renderCoordsHelper,a=t.getAltitude(l.eye),c=d.collision.elevationMargin;r&&a<c&&(i(H,w,l.eye),l.eye=t.setAltitude(j,c,l.eye),s(w,l.eye,H))}return l.center=w,l}function y(e,r,n){if(!e.state.isGlobal)return!1;const o=m(e,r),i=e.stateManager.constraintsManager.nearFarHeuristic,{far:s}=i.compute(r,n,e.renderDataExtent,o,C),a=s*s;return t(r,n)>a}function v(e,r,n){let t=M[e.viewingMode];t||(t=f(e.state.viewingMode),t.options.backfacesTerrain=!e.state.isGlobal,t.options.invisibleTerrain=!0,M[e.viewingMode]=t);const{isGlobal:o}=e.state;return!(!e.sceneIntersectionHelper.intersectRay(r,t,n)||y(e,r.origin,n))||(!(!e.renderCoordsHelper.intersectManifold(r,0,n)||y(e,r.origin,n))||!!o&&b(r,n,d(e.spatialReference).radius))}function b(e,r,n){const t=a(e.origin,e.origin)-n*n,i=t>0?Math.sqrt(t)/3:1;return o(r,e.direction,i/c(e.direction)),s(r,r,e.origin),!0}const M={},j=l(),w=l(),H=l(),C={near:0,far:0};export{g as cameraOnContentAlongViewDirection,p as eyeWithinExtent,m as surfaceElevationBelowRenderLocation};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,EAAmBC,QAAQ,IAAIC,CAA/B,QAAqC,wBAArC;AAA8D,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,EAA4BC,CAAC,IAAIC,CAAjC,EAAmCC,CAAC,IAAIC,CAAxC,EAA0CZ,CAAC,IAAIW,CAA/C,EAAiDE,CAAC,IAAIV,CAAtD,QAA4D,yBAA5D;AAAsF,SAAOA,CAAC,IAAIU,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOC,qBAAqB,IAAIT,CAAhC,QAAsC,0CAAtC;AAAiF,SAAOU,aAAa,IAAIC,CAAxB,QAA8B,6CAA9B;AAA4E,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,oCAA/B;;AAAoE,SAASC,CAAT,CAAWjB,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;EAAC,OAAOR,CAAC,CAACE,CAAC,CAACkB,kBAAF,CAAqBC,gBAArB,CAAsCjB,CAAC,CAACkB,GAAxC,EAA4CC,CAA5C,EAA8Cf,CAA9C,CAAD,CAAD,IAAqDQ,CAAC,CAACV,CAAD,EAAGiB,CAAH,CAA7D;AAAmE;;AAAA,SAASC,CAAT,CAAWxB,CAAX,EAAaI,CAAb,EAAe;EAAC,OAAOJ,CAAC,CAACyB,iBAAF,GAAoBvB,CAAC,CAACF,CAAC,CAACyB,iBAAF,CAAoBC,YAApB,CAAiCtB,CAAC,CAAC,CAAD,CAAlC,EAAsCA,CAAC,CAAC,CAAD,CAAvC,EAA2CA,CAAC,CAAC,CAAD,CAA5C,EAAgDJ,CAAC,CAACoB,kBAAF,CAAqBO,gBAArE,EAAsF,QAAtF,CAAD,EAAiG,CAAjG,CAArB,GAAyH,CAAhI;AAAkI;;AAAA,SAASpB,CAAT,CAAWP,CAAX,EAAaE,CAAb,EAAeS,CAAf,EAAiBR,CAAjB,EAAmB;EAAC,MAAMU,CAAC,GAACb,CAAC,CAAC4B,KAAF,CAAQC,MAAR,CAAeC,KAAf,EAAR;EAA+B5B,CAAC,KAAGW,CAAC,CAACS,GAAF,GAAMpB,CAAN,EAAQW,CAAC,CAACkB,MAAF,GAASpB,CAAjB,EAAmBE,CAAC,CAACmB,EAAF,GAAK7B,CAA3B,CAAD,EAA+B8B,CAAC,CAACjC,CAAD,EAAGa,CAAC,CAACqB,GAAL,EAASC,CAAT,CAAD,IAAc/B,CAAC,CAAC+B,CAAD,EAAGtB,CAAC,CAACkB,MAAL,CAA9C;EAA2D,MAAM1B,CAAC,GAACL,CAAC,CAAC4B,KAAF,CAAQQ,WAAhB;EAAA,MAA4BpB,CAAC,GAACX,CAAC,CAACgC,kBAAhC;;EAAmD,IAAG/B,CAAC,CAACO,CAAC,CAACS,GAAH,EAAOa,CAAP,CAAD,GAAWnB,CAAd,EAAgB;IAAC,MAAMd,CAAC,GAACG,CAAC,CAACiC,SAAF,CAAYC,OAApB;IAA4BnC,CAAC,CAACoC,CAAD,EAAG3B,CAAC,CAAC4B,WAAL,CAAD,EAAmBjC,CAAC,CAACgC,CAAD,EAAGA,CAAH,EAAKxB,CAAL,CAApB,EAA4Bd,CAAC,GAACW,CAAC,CAACS,GAAF,GAAMZ,CAAC,CAACa,CAAD,EAAGY,CAAH,EAAKK,CAAL,CAAR,GAAgB5B,CAAC,CAACuB,CAAD,EAAGtB,CAAC,CAACS,GAAL,EAASkB,CAAT,CAA9C;IAA0D,MAAMlC,CAAC,GAACN,CAAC,CAACoB,kBAAV;IAAA,MAA6BT,CAAC,GAACL,CAAC,CAACoC,WAAF,CAAc7B,CAAC,CAACS,GAAhB,CAA/B;IAAA,MAAoDnB,CAAC,GAACE,CAAC,CAACiC,SAAF,CAAYK,eAAlE;IAAkFzC,CAAC,IAAES,CAAC,GAACR,CAAL,KAASO,CAAC,CAAC8B,CAAD,EAAGL,CAAH,EAAKtB,CAAC,CAACS,GAAP,CAAD,EAAaT,CAAC,CAACS,GAAF,GAAMhB,CAAC,CAACsC,WAAF,CAAcrB,CAAd,EAAgBpB,CAAhB,EAAkBU,CAAC,CAACS,GAApB,CAAnB,EAA4CV,CAAC,CAACuB,CAAD,EAAGtB,CAAC,CAACS,GAAL,EAASkB,CAAT,CAAtD;EAAmE;;EAAA,OAAO3B,CAAC,CAACkB,MAAF,GAASI,CAAT,EAAWtB,CAAlB;AAAoB;;AAAA,SAASgC,CAAT,CAAW7C,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;EAAC,IAAG,CAACJ,CAAC,CAAC4B,KAAF,CAAQkB,QAAZ,EAAqB,OAAM,CAAC,CAAP;EAAS,MAAMtC,CAAC,GAACgB,CAAC,CAACxB,CAAD,EAAGE,CAAH,CAAT;EAAA,MAAeQ,CAAC,GAACV,CAAC,CAAC+C,YAAF,CAAeC,kBAAf,CAAkCC,gBAAnD;EAAA,MAAoE;IAACC,GAAG,EAACtC;EAAL,IAAQF,CAAC,CAACyC,OAAF,CAAUjD,CAAV,EAAYE,CAAZ,EAAcJ,CAAC,CAACoD,gBAAhB,EAAiC5C,CAAjC,EAAmC6C,CAAnC,CAA5E;EAAA,MAAkH1C,CAAC,GAACC,CAAC,GAACA,CAAtH;EAAwH,OAAON,CAAC,CAACJ,CAAD,EAAGE,CAAH,CAAD,GAAOO,CAAd;AAAgB;;AAAA,SAASsB,CAAT,CAAWjC,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;EAAC,IAAIE,CAAC,GAACgD,CAAC,CAACtD,CAAC,CAACuD,WAAH,CAAP;EAAuBjD,CAAC,KAAGA,CAAC,GAACY,CAAC,CAAClB,CAAC,CAAC4B,KAAF,CAAQ2B,WAAT,CAAH,EAAyBjD,CAAC,CAACkD,OAAF,CAAUC,gBAAV,GAA2B,CAACzD,CAAC,CAAC4B,KAAF,CAAQkB,QAA7D,EAAsExC,CAAC,CAACkD,OAAF,CAAUE,gBAAV,GAA2B,CAAC,CAAlG,EAAoGJ,CAAC,CAACtD,CAAC,CAACuD,WAAH,CAAD,GAAiBjD,CAAxH,CAAD;EAA4H,MAAK;IAACwC,QAAQ,EAACtC;EAAV,IAAaR,CAAC,CAAC4B,KAApB;EAA0B,OAAM,EAAE,CAAC5B,CAAC,CAAC2D,uBAAF,CAA0BC,YAA1B,CAAuC1D,CAAvC,EAAyCI,CAAzC,EAA2CF,CAA3C,CAAD,IAAgDyC,CAAC,CAAC7C,CAAD,EAAGE,CAAC,CAAC2D,MAAL,EAAYzD,CAAZ,CAAnD,KAAqE,EAAE,CAACJ,CAAC,CAACoB,kBAAF,CAAqB0C,iBAArB,CAAuC5D,CAAvC,EAAyC,CAAzC,EAA2CE,CAA3C,CAAD,IAAgDyC,CAAC,CAAC7C,CAAD,EAAGE,CAAC,CAAC2D,MAAL,EAAYzD,CAAZ,CAAnD,KAAoE,CAAC,CAACI,CAAF,IAAKC,CAAC,CAACP,CAAD,EAAGE,CAAH,EAAKC,CAAC,CAACL,CAAC,CAAC2B,gBAAH,CAAD,CAAsBoC,MAA3B,CAArJ;AAAyL;;AAAA,SAAStD,CAAT,CAAWT,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;EAAC,MAAME,CAAC,GAACK,CAAC,CAACX,CAAC,CAAC6D,MAAH,EAAU7D,CAAC,CAAC6D,MAAZ,CAAD,GAAqBzD,CAAC,GAACA,CAA/B;EAAA,MAAiCM,CAAC,GAACJ,CAAC,GAAC,CAAF,GAAI0D,IAAI,CAACC,IAAL,CAAU3D,CAAV,IAAa,CAAjB,GAAmB,CAAtD;EAAwD,OAAOE,CAAC,CAACN,CAAD,EAAGF,CAAC,CAACkE,SAAL,EAAexD,CAAC,GAACP,CAAC,CAACH,CAAC,CAACkE,SAAH,CAAlB,CAAD,EAAkCtD,CAAC,CAACV,CAAD,EAAGA,CAAH,EAAKF,CAAC,CAAC6D,MAAP,CAAnC,EAAkD,CAAC,CAA1D;AAA4D;;AAAA,MAAMP,CAAC,GAAC,EAAR;AAAA,MAAW/B,CAAC,GAACV,CAAC,EAAd;AAAA,MAAiBsB,CAAC,GAACtB,CAAC,EAApB;AAAA,MAAuB2B,CAAC,GAAC3B,CAAC,EAA1B;AAAA,MAA6BwC,CAAC,GAAC;EAACc,IAAI,EAAC,CAAN;EAAQjB,GAAG,EAAC;AAAZ,CAA/B;AAA8C,SAAO3C,CAAC,IAAI6D,iCAAZ,EAA8CjD,CAAC,IAAIkD,eAAnD,EAAmE7C,CAAC,IAAI8C,mCAAxE"},"metadata":{},"sourceType":"module"}