{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isNone as e } from \"../../../../../core/maybe.js\";\nimport { ATTRIBUTE_DATA_ANIMATION as t, TEXTURE_BINDING_ATTRIBUTE_DATA_0 as r, TEXTURE_BINDING_ATTRIBUTE_DATA_1 as i } from \"../definitions.js\";\nimport s from \"../VertexStream.js\";\nimport { Effect as a } from \"./Effect.js\";\n\nclass o extends a {\n  constructor() {\n    super(...arguments), this.defines = [], this._desc = {\n      vsPath: \"fx/integrate\",\n      fsPath: \"fx/integrate\",\n      attributes: new Map([[\"a_position\", 0]])\n    };\n  }\n\n  dispose() {\n    this._quad && this._quad.dispose();\n  }\n\n  bind() {}\n\n  unbind() {}\n\n  draw(r, i) {\n    if (!i.size) return;\n    const {\n      context: a,\n      renderingOptions: o\n    } = r;\n    this._quad || (this._quad = new s(a, [0, 0, 1, 0, 0, 1, 1, 1]));\n    const n = a.getBoundFramebufferObject(),\n          {\n      x: u,\n      y: m,\n      width: d,\n      height: f\n    } = a.getViewport();\n    i.bindTextures(a);\n    const c = i.getBlock(t);\n    if (e(c)) return;\n\n    const _ = c.getFBO(a),\n          l = c.getFBO(a, 1);\n\n    a.setViewport(0, 0, i.size, i.size), this._computeDelta(r, l, o.labelsAnimationTime), this._updateAnimationState(r, l, _), a.bindFramebuffer(n), a.setViewport(u, m, d, f);\n  }\n\n  _computeDelta(e, t, s) {\n    const {\n      context: a,\n      painter: o,\n      displayLevel: n\n    } = e,\n          u = o.materialManager.getProgram(this._desc, [\"delta\"]);\n    a.bindFramebuffer(t), a.setClearColor(0, 0, 0, 0), a.clear(a.gl.COLOR_BUFFER_BIT), a.useProgram(u), u.setUniform1i(\"u_maskTexture\", r), u.setUniform1i(\"u_sourceTexture\", i), u.setUniform1f(\"u_timeDelta\", e.deltaTime), u.setUniform1f(\"u_animationTime\", s), u.setUniform1f(\"u_zoomLevel\", Math.round(10 * n)), this._quad.draw();\n  }\n\n  _updateAnimationState(e, t, r) {\n    const {\n      context: i,\n      painter: s\n    } = e,\n          a = s.materialManager.getProgram(this._desc, [\"update\"]);\n    i.bindTexture(t.colorTexture, 1), i.useProgram(a), a.setUniform1i(\"u_sourceTexture\", 1), i.bindFramebuffer(r), i.setClearColor(0, 0, 0, 0), i.clear(i.gl.COLOR_BUFFER_BIT), this._quad.draw();\n  }\n\n}\n\nexport { o as AnimationEffect };","map":{"version":3,"names":["isNone","e","ATTRIBUTE_DATA_ANIMATION","t","TEXTURE_BINDING_ATTRIBUTE_DATA_0","r","TEXTURE_BINDING_ATTRIBUTE_DATA_1","i","s","Effect","a","o","constructor","arguments","defines","_desc","vsPath","fsPath","attributes","Map","dispose","_quad","bind","unbind","draw","size","context","renderingOptions","n","getBoundFramebufferObject","x","u","y","m","width","d","height","f","getViewport","bindTextures","c","getBlock","_","getFBO","l","setViewport","_computeDelta","labelsAnimationTime","_updateAnimationState","bindFramebuffer","painter","displayLevel","materialManager","getProgram","setClearColor","clear","gl","COLOR_BUFFER_BIT","useProgram","setUniform1i","setUniform1f","deltaTime","Math","round","bindTexture","colorTexture","AnimationEffect"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/effects/AnimationEffect.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";import{ATTRIBUTE_DATA_ANIMATION as t,TEXTURE_BINDING_ATTRIBUTE_DATA_0 as r,TEXTURE_BINDING_ATTRIBUTE_DATA_1 as i}from\"../definitions.js\";import s from\"../VertexStream.js\";import{Effect as a}from\"./Effect.js\";class o extends a{constructor(){super(...arguments),this.defines=[],this._desc={vsPath:\"fx/integrate\",fsPath:\"fx/integrate\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._quad&&this._quad.dispose()}bind(){}unbind(){}draw(r,i){if(!i.size)return;const{context:a,renderingOptions:o}=r;this._quad||(this._quad=new s(a,[0,0,1,0,0,1,1,1]));const n=a.getBoundFramebufferObject(),{x:u,y:m,width:d,height:f}=a.getViewport();i.bindTextures(a);const c=i.getBlock(t);if(e(c))return;const _=c.getFBO(a),l=c.getFBO(a,1);a.setViewport(0,0,i.size,i.size),this._computeDelta(r,l,o.labelsAnimationTime),this._updateAnimationState(r,l,_),a.bindFramebuffer(n),a.setViewport(u,m,d,f)}_computeDelta(e,t,s){const{context:a,painter:o,displayLevel:n}=e,u=o.materialManager.getProgram(this._desc,[\"delta\"]);a.bindFramebuffer(t),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),a.useProgram(u),u.setUniform1i(\"u_maskTexture\",r),u.setUniform1i(\"u_sourceTexture\",i),u.setUniform1f(\"u_timeDelta\",e.deltaTime),u.setUniform1f(\"u_animationTime\",s),u.setUniform1f(\"u_zoomLevel\",Math.round(10*n)),this._quad.draw()}_updateAnimationState(e,t,r){const{context:i,painter:s}=e,a=s.materialManager.getProgram(this._desc,[\"update\"]);i.bindTexture(t.colorTexture,1),i.useProgram(a),a.setUniform1i(\"u_sourceTexture\",1),i.bindFramebuffer(r),i.setClearColor(0,0,0,0),i.clear(i.gl.COLOR_BUFFER_BIT),this._quad.draw()}}export{o as AnimationEffect};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}