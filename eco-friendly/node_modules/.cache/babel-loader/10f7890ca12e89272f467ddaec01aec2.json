{"ast":null,"code":"// import tabsection from \"@/components/tabsection\";\nimport echartspie from \"@/components/echartspie\";\nimport echartsline from \"@/components/echartsline\";\nimport scatter from \"@/components/scatter\";\nimport echartsbar from \"@/components/echartsbar\";\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\nexport default {\n  name: \"Home\",\n\n  data() {\n    return {\n      allqualitys: [],\n      airgood: null,\n      airnormal: null,\n      airbad: 0,\n      airall: 0,\n      lngLat: [[110.576, 19.9507], [110.3232, 20.0574]]\n    };\n  },\n\n  mounted() {\n    this.initMap();\n    this.initdata();\n  },\n\n  //引入我的AQI仪表盘组件\n  components: {\n    echartspie: echartspie,\n    // tabsection:tabsection,\n    echartsline: echartsline,\n    scatter: scatter,\n    echartsbar: echartsbar\n  },\n  methods: {\n    initMap() {\n      AMapLoader.load({\n        key: \"0e5904b2829e2e25ffcdecc5685b2209\",\n        // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: \"2.0\",\n        // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: ['AMap.MoveAnimation', 'AMap.ToolBar', 'AMap.Scale', 'AMap.MapType', 'AMap.Geolocation', 'AMap.HawkEye', 'AMap.HeatMap'] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n\n      }).then(AMap => {\n        var _this = this;\n\n        this.map = new AMap.Map(\"container\", {\n          //设置地图容器id\n          resizeEnable: true,\n          mapStyle: 'amap://styles/darkblue',\n          viewMode: \"3D\",\n          //是否为3D地图模式\n          zoom: 9,\n          //初始化地图级别\n          center: [110.3093, 19.2020],\n          //初始化地图中心点位置\n          doubleClickZoom: true,\n          // 是否允许鼠标拖拽\n          dragEnable: true,\n          keyboardEnable: false\n        });\n        let marker;\n\n        for (var i = 0; i < _this.lngLat.length; i++) {\n          marker = new AMap.Marker({\n            position: _this.lngLat[i],\n            map: _this.map\n          });\n          marker.content = [\"<h2>\" + _this.lngLats[i].city + \"  \" + _this.lngLats[i].station + \"</h2>  AQI指数:\" + _this.lngLats[i].aqi + \"   CO指数:\" + _this.lngLats[i].co + \"<br/>\" + \"NO2指数:\" + _this.lngLats[i].no2 + \"   PM2.5指数:\" + _this.lngLats[i].pm25 + \"<br/> PM10指数:\" + _this.lngLats[i].pm10 + \"   SO2指数:\" + _this.lngLats[i].so2 + \"<br/> O3指数:\" + _this.lngLats[i].o3 + \"<br/>\" + \"<a href='https://ditu.amap.com/detail/B000A8URXB?citycode=110105'>详细信息</a>\"];\n          marker.on(\"click\", this.markerClick); //marker.emit(\"click\", { target: marker });\n        }\n      });\n    },\n\n    initdata() {\n      this.request.get(\"/nowatmospheredata/GetAllquality\").then(res => {\n        for (var i = 0; i < res.length; i++) {\n          if (res[i].quality === \"良\") {\n            this.airnormal += 1;\n          } else if (res[i].quality === \"优\") {\n            this.airgood += 1;\n          } else if (res[i].quality === \"差\") {\n            this.airbad += 1;\n          }\n        }\n\n        this.airall = this.airgood + this.airbad + this.airnormal;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA,YADA;;EAEAC;IACA;MACAC,eADA;MAEAC,aAFA;MAGAC,eAHA;MAIAC,SAJA;MAKAC,SALA;MAMAC;IANA;EASA,CAZA;;EAcAC;IACA;IACA;EACA,CAjBA;;EAkBA;EACAC;IACAC,sBADA;IAEA;IACAC,wBAHA;IAIAC,gBAJA;IAKAC;EALA,CAnBA;EA0BAC;IACAC;MACAC;QACAC,uCADA;QACA;QACAC,cAFA;QAEA;QACAC,iIAHA,CAGA;;MAHA,GAIAC,IAJA,CAIAC;QACA;;QACA;UAAA;UACAC,kBADA;UAEAC,kCAFA;UAGAC,cAHA;UAGA;UACAC,OAJA;UAIA;UACAC,2BALA;UAKA;UACAC,qBANA;UAOA;UACAC,gBARA;UASAC;QATA;QAWA;;QACA;UACAC;YACAC,yBADA;YAEAC;UAFA;UAKAF,2KACA,QADA,GACAG,oBADA,GACA,aADA,GACAA,qBADA,GACA,eADA,GACAA,qBADA,GACA,WADA,GACAA,oBADA,GACA,aADA,GACAA,mBADA,GACA,OADA,GAEA,4EAFA;UAKAH,qCAXA,CAYA;QACA;MACA,CAhCA;IAiCA,CAnCA;;IAoCAI;MACA;QACA,qCACA;UACA,4BACA;YACA;UACA,CAHA,MAIA,4BACA;YACA;UACA,CAHA,MAIA,4BACA;YACA;UACA;QACA;;QACA;MACA,CAjBA;IAkBA;;EAvDA;AA1BA","names":["name","data","allqualitys","airgood","airnormal","airbad","airall","lngLat","mounted","components","echartspie","echartsline","scatter","echartsbar","methods","initMap","AMapLoader","key","version","plugins","then","AMap","resizeEnable","mapStyle","viewMode","zoom","center","doubleClickZoom","dragEnable","keyboardEnable","marker","position","map","_this","initdata"],"sourceRoot":"src/views","sources":["DataAnalysis.vue"],"sourcesContent":["<template>\r\n  <!--    主体盒子-->\r\n  <section class=\"mainbox\" >\r\n    <div id=\"container\"  style=\"position:absolute;height: 661.6px;width: 100%\"></div>\r\n    <div class=\"column\">\r\n      <div class=\"panel overview\">\r\n        <div class=\"inner\">\r\n          <h1 style=\"font-size:28px;color:aliceblue;text-align:center;\">测区内气象站总情况</h1>\r\n          <ul>\r\n            <li>\r\n              <h4>{{ this.airall }}</h4>\r\n              <span>天气站总数</span>\r\n            </li>\r\n            <li>\r\n              <h4>{{ this.airgood }}</h4>\r\n              <span>空气优</span>\r\n            </li>\r\n            <li>\r\n              <h4>{{this.airnormal}}}</h4>\r\n              <span>空气良</span>\r\n            </li>\r\n            <li>\r\n              <h4>{{this.airbad}}}</h4>\r\n              <span>空气差</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"panel\">\r\n        <div>\r\n          <div class=\"chart\" >\r\n            <echartspie></echartspie>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      <div class=\"panel\">\r\n        <div >\r\n          <echartsbar></echartsbar>\r\n        </div>\r\n    </div>\r\n      </div>\r\n    <div class=\"column\">\r\n\r\n\r\n\r\n    </div>\r\n    <div class=\"column\">\r\n<!--折线图-->\r\n      <div class=\"panel bar\">\r\n        <echartsline></echartsline>\r\n      </div>\r\n<!--雷达图-->\r\n      <div class=\"panel radar\">\r\n        <scatter></scatter>\r\n      </div>\r\n      </div>\r\n  </section>\r\n\r\n</template>\r\n\r\n<script>\r\n// import tabsection from \"@/components/tabsection\";\r\nimport echartspie from \"@/components/echartspie\";\r\nimport echartsline from \"@/components/echartsline\";\r\nimport scatter from \"@/components/scatter\"\r\nimport echartsbar from \"@/components/echartsbar\"\r\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\r\nexport default {\r\n  name: \"Home\",\r\n  data() {\r\n    return {\r\n      allqualitys:[],\r\n      airgood:null,\r\n      airnormal:null,\r\n      airbad:0,\r\n      airall:0,\r\n      lngLat:[[110.576,19.9507],[110.3232,20.0574]\r\n      ],\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.initMap()\r\n    this.initdata()\r\n  },\r\n  //引入我的AQI仪表盘组件\r\n  components:{\r\n    echartspie :echartspie,\r\n    // tabsection:tabsection,\r\n    echartsline:echartsline,\r\n    scatter:scatter,\r\n    echartsbar:echartsbar,\r\n  },\r\n  methods: {\r\n    initMap(){\r\n      AMapLoader.load({\r\n        key: \"0e5904b2829e2e25ffcdecc5685b2209\",             // 申请好的Web端开发者Key，首次调用 load 时必填\r\n        version: \"2.0\",      // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\r\n        plugins: ['AMap.MoveAnimation', 'AMap.ToolBar', 'AMap.Scale', 'AMap.MapType', 'AMap.Geolocation', 'AMap.HawkEye', 'AMap.HeatMap'],       // 需要使用的的插件列表，如比例尺'AMap.Scale'等\r\n      }).then((AMap) => {\r\n        var _this = this;\r\n        this.map = new AMap.Map(\"container\", {  //设置地图容器id\r\n          resizeEnable: true,\r\n          mapStyle: 'amap://styles/darkblue',\r\n          viewMode: \"3D\",    //是否为3D地图模式\r\n          zoom: 9,           //初始化地图级别\r\n          center: [110.3093, 19.2020], //初始化地图中心点位置\r\n          doubleClickZoom: true,\r\n          // 是否允许鼠标拖拽\r\n          dragEnable: true,\r\n          keyboardEnable: false,\r\n        });\r\n        let marker;\r\n        for (var i = 0; i < _this.lngLat.length; i++) {\r\n          marker = new AMap.Marker({\r\n            position: _this.lngLat[i],\r\n            map: _this.map,\r\n          });\r\n\r\n          marker.content =[\"<h2>\"+_this.lngLats[i].city+\"  \"+_this.lngLats[i].station+\"</h2>  AQI指数:\"+_this.lngLats[i].aqi+\"   CO指数:\"+_this.lngLats[i].co+\"<br/>\" +\r\n          \"NO2指数:\"+_this.lngLats[i].no2+\"   PM2.5指数:\"+_this.lngLats[i].pm25+\"<br/> PM10指数:\"+_this.lngLats[i].pm10+\"   SO2指数:\"+_this.lngLats[i].so2+\"<br/> O3指数:\"+_this.lngLats[i].o3+\"<br/>\" +\r\n          \"<a href='https://ditu.amap.com/detail/B000A8URXB?citycode=110105'>详细信息</a>\"]\r\n\r\n\r\n          marker.on(\"click\", this.markerClick);\r\n          //marker.emit(\"click\", { target: marker });\r\n        }\r\n      })\r\n    },\r\n    initdata(){\r\n      this.request.get(\"/nowatmospheredata/GetAllquality\").then(res=>{\r\n        for(var i=0;i<res.length;i++)\r\n        {\r\n          if(res[i].quality===\"良\")\r\n          {\r\n             this.airnormal+=1\r\n          }\r\n          else if(res[i].quality===\"优\")\r\n          {\r\n              this.airgood+=1\r\n          }\r\n          else if(res[i].quality===\"差\")\r\n          {\r\n              this.airbad+=1\r\n          }\r\n        }\r\n        this.airall=this.airgood+this.airbad+this.airnormal\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.mainbox {\r\n  display: flex;\r\n  /*min-width:100%;*/\r\n  height: 0px;\r\n}\r\n.mainbox .column {\r\n  flex: 4rem;\r\n}\r\n.mainbox .column:nth-child(2) {\r\n  flex: 2;\r\n  margin: 0 0.125rem 0.1875rem;\r\n  /*overflow: hidden;*/\r\n}\r\n/* 利用边框图片切割 */\r\n.mainbox .panel{\r\n  position: relative;\r\n  border: 15px solid transparent;\r\n  border-width: 30px 20px 30px 20px;\r\n  border-image-source: url(../assets/images/blue.png);\r\n  border-image-slice: 78 45 78 45;\r\n  border-image-width: 20px;\r\n}\r\n 让子容器撑开覆盖父容器\r\n.panel .inner{\r\n  position:absolute;\r\n  padding:10px 10px;\r\n  background-color: #fff;\r\n}\r\n.mainbox.column.overview {\r\n  height:200px;\r\n}\r\n.mainbox ul{\r\n  display:flex;\r\n  justify-content:space-between;\r\n  white-space:nowrap;\r\n}\r\n.mainbox ul li span {\r\n  font-size: 15px;\r\n  color:yellow;\r\n  text-align:center;\r\n}\r\n.mainbox ul li h4 {\r\n  font-size:20px;\r\n  color:aliceblue;\r\n  text-align:center;\r\n}\r\ntable {\r\n  border-collapse: collapse;\r\n  color: white;\r\n  width: 100%;\r\n}\r\n\r\ntable, td, th {\r\n  border: transparent;\r\n  height: 40px;\r\n  text-align:center;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}