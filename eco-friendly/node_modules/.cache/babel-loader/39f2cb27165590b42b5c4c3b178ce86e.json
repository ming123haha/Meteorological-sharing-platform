{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { WGLDrawPhase as e } from \"./enums.js\";\nimport r from \"./WGLContainer.js\";\nimport s from \"./brushes/WGLBrushInfo.js\";\nimport t from \"./brushes/WGLBrushStencil.js\";\n\nconst n = (e, r) => e.key.level - r.key.level != 0 ? e.key.level - r.key.level : e.key.row - r.key.row != 0 ? e.key.row - r.key.row : e.key.col - r.key.col;\n\nclass i extends r {\n  constructor(e) {\n    super(), this._tileInfoView = e;\n  }\n\n  get requiresDedicatedFBO() {\n    return !1;\n  }\n\n  renderChildren(e) {\n    this.sortChildren(n), this.setStencilReference(e), super.renderChildren(e);\n  }\n\n  createRenderParams(e) {\n    const {\n      state: r\n    } = e,\n          s = super.createRenderParams(e);\n    return s.requiredLevel = this._tileInfoView.getClosestInfoForScale(r.scale).level, s.displayLevel = this._tileInfoView.tileInfo.scaleToZoom(r.scale), s;\n  }\n\n  prepareRenderPasses(r) {\n    const n = super.prepareRenderPasses(r);\n    return n.push(r.registerRenderPass({\n      name: \"stencil\",\n      brushes: [t],\n      drawPhase: e.DEBUG | e.MAP | e.HIGHLIGHT,\n      target: () => this.getStencilTarget()\n    })), has(\"esri-tiles-debug\") && n.push(r.registerRenderPass({\n      name: \"tileInfo\",\n      brushes: [s],\n      drawPhase: e.DEBUG,\n      target: () => this.children\n    })), n;\n  }\n\n  getStencilTarget() {\n    return this.children;\n  }\n\n  setStencilReference(e) {\n    let r = 1;\n\n    for (const s of this.children) s.stencilRef = r++;\n  }\n\n}\n\nexport { i as default };","map":{"version":3,"names":["has","WGLDrawPhase","e","r","s","t","n","key","level","row","col","i","constructor","_tileInfoView","requiresDedicatedFBO","renderChildren","sortChildren","setStencilReference","createRenderParams","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","tileInfo","scaleToZoom","prepareRenderPasses","push","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","stencilRef","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{WGLDrawPhase as e}from\"./enums.js\";import r from\"./WGLContainer.js\";import s from\"./brushes/WGLBrushInfo.js\";import t from\"./brushes/WGLBrushStencil.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends r{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:\"stencil\",brushes:[t],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()})),has(\"esri-tiles-debug\")&&n.push(r.registerRenderPass({name:\"tileInfo\",brushes:[s],drawPhase:e.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{i as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}