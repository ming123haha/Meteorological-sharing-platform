{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { PathTransformationCursor as t } from \"../CIMCursor.js\";\nimport { PlacementEndings as e } from \"../enums.js\";\nimport { GeometryWalker as s, DashPattern as i, Pos as n } from \"../GeometryWalker.js\";\n\nclass a {\n  static local() {\n    return null === a.instance && (a.instance = new a()), a.instance;\n  }\n\n  execute(t, e, s, i) {\n    return new r(t, e, s);\n  }\n\n}\n\na.instance = null;\n\nclass r extends t {\n  constructor(t, e, n) {\n    super(t, !0, !0), this._geometryWalker = new s(), this._geometryWalker.updateTolerance(n), this._angleToLine = e.angleToLine ?? !0, this._offset = (e.offset ? e.offset : 0) * n, this._originalEndings = e.endings, this._offsetAtEnd = (e.customEndingOffset ? e.customEndingOffset : 0) * n, this._position = -(e.offsetAlongLine ? e.offsetAlongLine : 0) * n, this._pattern = new i(), this._pattern.init(e.placementTemplate, !1), this._pattern.scale(n), this._endings = this._originalEndings;\n  }\n\n  processPath(t) {\n    if (this._pattern.isEmpty()) return null;\n    let s;\n    if (this.iteratePath) s = this._pattern.nextValue();else {\n      this._originalEndings === e.WithFullGap && this.isClosed ? this._endings = e.WithMarkers : this._endings = this._originalEndings, this._pattern.extPtGap = 0;\n      let i,\n          n = !0;\n\n      switch (this._endings) {\n        case e.NoConstraint:\n          i = -this._position, i = this._adjustPosition(i), n = !1;\n          break;\n\n        case e.WithHalfGap:\n        default:\n          i = -this._pattern.lastValue() / 2;\n          break;\n\n        case e.WithFullGap:\n          i = -this._pattern.lastValue(), this._pattern.extPtGap = this._pattern.lastValue();\n          break;\n\n        case e.WithMarkers:\n          i = 0;\n          break;\n\n        case e.Custom:\n          i = -this._position, i = this._adjustPosition(i), this._pattern.extPtGap = .5 * this._offsetAtEnd;\n      }\n\n      if (!this._geometryWalker.init(t, this._pattern, n)) return null;\n\n      this._pattern.reset();\n\n      let a = 0;\n\n      for (; i > a;) i -= a, a = this._pattern.nextValue();\n\n      a -= i, s = a, this.iteratePath = !0;\n    }\n    const i = new n();\n    return this._geometryWalker.nextPointAndAngle(s, i) ? this._endings === e.WithFullGap && this._geometryWalker.isPathEnd() ? (this.iteratePath = !1, null) : this._endings === e.WithMarkers && this._geometryWalker.isPathEnd() && (this.iteratePath = !1, this.isClosed) ? null : (this.internalPlacement.setTranslate(i.pt[0] - this._offset * i.sa, i.pt[1] + this._offset * i.ca), this._angleToLine && this.internalPlacement.setRotateCS(i.ca, i.sa), this.internalPlacement) : (this.iteratePath = !1, null);\n  }\n\n  _adjustPosition(t) {\n    let e = t / this._pattern.length();\n\n    return e -= Math.floor(e), e * this._pattern.length();\n  }\n\n}\n\nexport { a as PlacementAlongLineSameSize };","map":{"version":3,"names":["PathTransformationCursor","t","PlacementEndings","e","GeometryWalker","s","DashPattern","i","Pos","n","a","local","instance","execute","r","constructor","_geometryWalker","updateTolerance","_angleToLine","angleToLine","_offset","offset","_originalEndings","endings","_offsetAtEnd","customEndingOffset","_position","offsetAlongLine","_pattern","init","placementTemplate","scale","_endings","processPath","isEmpty","iteratePath","nextValue","WithFullGap","isClosed","WithMarkers","extPtGap","NoConstraint","_adjustPosition","WithHalfGap","lastValue","Custom","reset","nextPointAndAngle","isPathEnd","internalPlacement","setTranslate","pt","sa","ca","setRotateCS","length","Math","floor","PlacementAlongLineSameSize"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/placements/PlacementAlongLineSameSize.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{PathTransformationCursor as t}from\"../CIMCursor.js\";import{PlacementEndings as e}from\"../enums.js\";import{GeometryWalker as s,DashPattern as i,Pos as n}from\"../GeometryWalker.js\";class a{static local(){return null===a.instance&&(a.instance=new a),a.instance}execute(t,e,s,i){return new r(t,e,s)}}a.instance=null;class r extends t{constructor(t,e,n){super(t,!0,!0),this._geometryWalker=new s,this._geometryWalker.updateTolerance(n),this._angleToLine=e.angleToLine??!0,this._offset=(e.offset?e.offset:0)*n,this._originalEndings=e.endings,this._offsetAtEnd=(e.customEndingOffset?e.customEndingOffset:0)*n,this._position=-(e.offsetAlongLine?e.offsetAlongLine:0)*n,this._pattern=new i,this._pattern.init(e.placementTemplate,!1),this._pattern.scale(n),this._endings=this._originalEndings}processPath(t){if(this._pattern.isEmpty())return null;let s;if(this.iteratePath)s=this._pattern.nextValue();else{this._originalEndings===e.WithFullGap&&this.isClosed?this._endings=e.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let i,n=!0;switch(this._endings){case e.NoConstraint:i=-this._position,i=this._adjustPosition(i),n=!1;break;case e.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case e.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case e.WithMarkers:i=0;break;case e.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,n))return null;this._pattern.reset();let a=0;for(;i>a;)i-=a,a=this._pattern.nextValue();a-=i,s=a,this.iteratePath=!0}const i=new n;return this._geometryWalker.nextPointAndAngle(s,i)?this._endings===e.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===e.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(i.pt[0]-this._offset*i.sa,i.pt[1]+this._offset*i.ca),this._angleToLine&&this.internalPlacement.setRotateCS(i.ca,i.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(t){let e=t/this._pattern.length();return e-=Math.floor(e),e*this._pattern.length()}}export{a as PlacementAlongLineSameSize};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}