{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport r from \"../../../core/Logger.js\";\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { unquantizeMultipoint as o, unquantizePolyline as n, unquantizePolygon as a, unquantizePoint as s } from \"../../../geometry/support/quantizationUtils.js\";\n\nfunction i(e, o, n, a, s) {\n  if (t(e)) return null;\n  const i = e.referencesGeometry() && s ? c(o, a, s) : o,\n        u = e.repurposeFeature(i);\n\n  try {\n    return e.evaluate({ ...n,\n      $feature: u\n    });\n  } catch (m) {\n    return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\", m), null;\n  }\n}\n\nconst u = new Map();\n\nfunction c(e, r, t) {\n  const {\n    transform: o,\n    hasZ: n,\n    hasM: a\n  } = t;\n  u.has(r) || u.set(r, m(r));\n  const s = u.get(r)(e.geometry, o, n, a);\n  return { ...e,\n    geometry: s\n  };\n}\n\nfunction m(t) {\n  const i = {};\n\n  switch (t) {\n    case \"esriGeometryPoint\":\n      return (e, r, t, o) => s(r, i, e, t, o);\n\n    case \"esriGeometryPolygon\":\n      return (e, r, t, o) => a(r, i, e, t, o);\n\n    case \"esriGeometryPolyline\":\n      return (e, r, t, o) => n(r, i, e, t, o);\n\n    case \"esriGeometryMultipoint\":\n      return (e, r, t, n) => o(r, i, e, t, n);\n\n    default:\n      return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new e(\"mapview-arcade\", `Unable to handle geometryType: ${t}`)), e => e;\n  }\n}\n\nexport { i as default };","map":{"version":3,"names":["e","r","isNone","t","unquantizeMultipoint","o","unquantizePolyline","n","unquantizePolygon","a","unquantizePoint","s","i","referencesGeometry","c","u","repurposeFeature","evaluate","$feature","m","getLogger","warn","Map","transform","hasZ","hasM","has","set","get","geometry","error","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isNone as t}from\"../../../core/maybe.js\";import{unquantizeMultipoint as o,unquantizePolyline as n,unquantizePolygon as a,unquantizePoint as s}from\"../../../geometry/support/quantizationUtils.js\";function i(e,o,n,a,s){if(t(e))return null;const i=e.referencesGeometry()&&s?c(o,a,s):o,u=e.repurposeFeature(i);try{return e.evaluate({...n,$feature:u})}catch(m){return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",m),null}}const u=new Map;function c(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;u.has(r)||u.set(r,m(r));const s=u.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function m(t){const i={};switch(t){case\"esriGeometryPoint\":return(e,r,t,o)=>s(r,i,e,t,o);case\"esriGeometryPolygon\":return(e,r,t,o)=>a(r,i,e,t,o);case\"esriGeometryPolyline\":return(e,r,t,o)=>n(r,i,e,t,o);case\"esriGeometryMultipoint\":return(e,r,t,n)=>o(r,i,e,t,n);default:return r.getLogger(\"esri.views.2d.support.arcadeOnDemand\").error(new e(\"mapview-arcade\",`Unable to handle geometryType: ${t}`)),e=>e}}export{i as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}