{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Evented.js\";\nimport t from \"../../../../../core/has.js\";\nimport { r as s } from \"../../../../../chunks/rbush.js\";\nimport { Tile as i } from \"./Tile.js\";\nimport o from \"../../../tiling/TileCoverage.js\";\nimport h from \"../../../tiling/TileKey.js\";\nconst n = {\n  added: [],\n  removed: []\n},\n      r = new Set(),\n      d = new h(0, 0, 0, 0);\n\nclass l extends e {\n  constructor(e) {\n    super(), this._tiles = new Map(), this._index = s(9, t(\"esri-csp-restrictions\") ? e => ({\n      minX: e.bounds[0],\n      minY: e.bounds[1],\n      maxX: e.bounds[2],\n      maxY: e.bounds[3]\n    }) : [\".bounds[0]\", \".bounds[1]\", \".bounds[2]\", \".bounds[3]\"]), this.tiles = [], this.tileScheme = e;\n  }\n\n  destroy() {\n    this.clear();\n  }\n\n  clear() {\n    this.tiles.length = 0, this._tiles.clear(), this._index.clear();\n  }\n\n  has(e) {\n    return this._tiles.has(e);\n  }\n\n  get(e) {\n    return this._tiles.get(e);\n  }\n\n  boundsIntersections(e) {\n    return this._index.search({\n      minX: e[0],\n      minY: e[1],\n      maxX: e[2],\n      maxY: e[3]\n    });\n  }\n\n  updateTiles(e) {\n    const t = {\n      added: [],\n      removed: []\n    };\n\n    for (const s of e.added) if (!this.has(s)) {\n      const e = new i(this.tileScheme, s);\n      this._tiles.set(s, e), this._index.insert(e), t.added.push(e);\n    }\n\n    for (const s of e.removed) if (this.has(s)) {\n      const e = this.get(s);\n      this._tiles.delete(s), this._index.remove(e), t.removed.push(e);\n    }\n\n    this.tiles.length = 0, this._tiles.forEach(e => this.tiles.push(e)), (t.added.length || t.removed.length) && this.emit(\"update\", t);\n  }\n\n  setViewState(e) {\n    const t = this.tileScheme.getTileCoverage(e, 0);\n    if (!t) return;\n    const {\n      spans: s,\n      lodInfo: h\n    } = t,\n          {\n      level: l\n    } = h;\n    if (s.length > 0) for (const {\n      row: o,\n      colFrom: a,\n      colTo: m\n    } of s) for (let e = a; e <= m; e++) {\n      const t = d.set(l, o, h.normalizeCol(e), h.getWorldForColumn(e)).id;\n\n      if (r.add(t), !this.has(t)) {\n        const e = new i(this.tileScheme, t);\n        this._tiles.set(t, e), this._index.insert(e), this.tiles.push(e), n.added.push(e);\n      }\n    }\n\n    for (let i = this.tiles.length - 1; i >= 0; i--) {\n      const e = this.tiles[i];\n      r.has(e.id) || (this._tiles.delete(e.id), this.tiles.splice(i, 1), this._index.remove(e), n.removed.push(e));\n    }\n\n    (n.added.length || n.removed.length) && this.emit(\"update\", n), o.pool.release(t), r.clear(), n.added.length = 0, n.removed.length = 0;\n  }\n\n}\n\nexport { l as default };","map":{"version":3,"names":["e","t","r","s","Tile","i","o","h","n","added","removed","Set","d","l","constructor","_tiles","Map","_index","minX","bounds","minY","maxX","maxY","tiles","tileScheme","destroy","clear","length","has","get","boundsIntersections","search","updateTiles","set","insert","push","delete","remove","forEach","emit","setViewState","getTileCoverage","spans","lodInfo","level","row","colFrom","a","colTo","m","normalizeCol","getWorldForColumn","id","add","splice","pool","release","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/support/TileStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Evented.js\";import t from\"../../../../../core/has.js\";import{r as s}from\"../../../../../chunks/rbush.js\";import{Tile as i}from\"./Tile.js\";import o from\"../../../tiling/TileCoverage.js\";import h from\"../../../tiling/TileKey.js\";const n={added:[],removed:[]},r=new Set,d=new h(0,0,0,0);class l extends e{constructor(e){super(),this._tiles=new Map,this._index=s(9,t(\"esri-csp-restrictions\")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new i(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e)}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit(\"update\",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:h}=t,{level:l}=h;if(s.length>0)for(const{row:o,colFrom:a,colTo:m}of s)for(let e=a;e<=m;e++){const t=d.set(l,o,h.normalizeCol(e),h.getWorldForColumn(e)).id;if(r.add(t),!this.has(t)){const e=new i(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),n.added.push(e)}}for(let i=this.tiles.length-1;i>=0;i--){const e=this.tiles[i];r.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(i,1),this._index.remove(e),n.removed.push(e))}(n.added.length||n.removed.length)&&this.emit(\"update\",n),o.pool.release(t),r.clear(),n.added.length=0,n.removed.length=0}}export{l as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}