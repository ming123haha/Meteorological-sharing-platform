{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../../chunks/tslib.es6.js\";\nimport { cyclicalPI as i } from \"../../../../../core/Cyclical.js\";\nimport { deg2rad as e } from \"../../../../../core/mathUtils.js\";\nimport { createScreenPointArray as n, screenPointObjectToArray as s, createRenderScreenPointArray3 as o } from \"../../../../../core/screenUtils.js\";\nimport { property as r } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as m } from \"../../../../../chunks/vec2.js\";\nimport { c as h, o as c, l as p, b as l, n as u, a as P, g as d, e as g } from \"../../../../../chunks/vec3.js\";\nimport { c as v } from \"../../../../../chunks/vec3f64.js\";\nimport { getReferenceEllipsoid as M } from \"../../../../../geometry/projectionEllipsoid.js\";\nimport { wrapAxisAngle as C } from \"../../../../../geometry/support/axisAngle.js\";\nimport { create as S, fromPositionAndNormal as w, normal as b } from \"../../../../../geometry/support/plane.js\";\nimport { c as f } from \"../../../../../chunks/sphere.js\";\nimport { pixelDistanceToInteractionFactor as j, applyAll as E } from \"../../../camera/constraintUtils.js\";\nimport { ConstraintTypes as y, InteractionType as O, TiltMode as k } from \"../../../camera/constraintUtils/common.js\";\nimport { ExponentialFalloff as A } from \"../../../input/util.js\";\nimport { InteractiveController as z } from \"../InteractiveController.js\";\nimport { PanPlanarMomentumController as R } from \"../momentum/PanPlanarMomentumController.js\";\nimport { PanSphericalMomentumController as x } from \"../momentum/PanSphericalMomentumController.js\";\nimport { RotationMomentumController as _ } from \"../momentum/RotationMomentumController.js\";\nimport { ZoomPlanarMomentumController as H } from \"../momentum/ZoomPlanarMomentumController.js\";\nimport { ZoomSphericalMomentumController as F } from \"../momentum/ZoomSphericalMomentumController.js\";\nimport { NavigationMode as T, pickPointAndInitSphere as U, SpherePickPointFallback as D, decideNavigationMode as I, sphereOrPlanePointFromScreenPoint as L, intersectPlaneFromScreenPointAtEye as Z, applyZoomOnSphere as N, preserveHeadingThreshold as B, applyPanSphericalPreserveHeading as G, applyPanSphericalDirectRotation as V, normalizeRotationDelta as q, applyRotation as J, applyPanPlanar as K, applyZoomToPoint as Q } from \"../../utils/navigationUtils.js\";\nimport { Camera as W } from \"../../../webgl-engine/lib/Camera.js\";\nimport { PanPlanarMomentumEstimator as X } from \"../../../../navigation/PanPlanarMomentumEstimator.js\";\nimport { PanSphericalMomentumEstimator as Y } from \"../../../../navigation/PanSphericalMomentumEstimator.js\";\nimport { RotationMomentumEstimator as $ } from \"../../../../navigation/RotationMomentumEstimator.js\";\nimport { ZoomMomentumEstimator as tt } from \"../../../../navigation/ZoomMomentumEstimator.js\";\nlet it = class extends z {\n  constructor(t) {\n    super(t), this.view = null, this.smoothRotation = new A(.05), this.rotationAxis = v(), this.panningPlane = S(), this.smoothScaling = new A(.05), this.zoomCenterScreen = n(), this.zoomMomentumEstimator = new tt(), this.rotationMomentumEstimator = new $(), this.panSphericalMomentumEstimator = new Y(), this.panPlanarMomentumEstimator = new X(), this.adjustedSphere = f(), this.tmp3d = v(), this.tmpScreenPointArray = n(), this.beginScreenPoint = n(), this.beginScenePoint = v(), this.screenPickPoint = n(), this.navMode = T.Horizontal, this.tmpInteractionDirection = v(), this.constraintOptions = {\n      selection: y.ALL,\n      interactionType: O.NONE,\n      interactionFactor: 0,\n      interactionStartCamera: new W(),\n      interactionDirection: null,\n      tiltMode: k.TUMBLE\n    };\n  }\n\n  get intersectionHelper() {\n    return this.view.sceneIntersectionHelper;\n  }\n\n  begin(t) {\n    if (!this.active) return;\n    const n = this.view.navigation.momentumEnabled;\n    this.zoomMomentumEstimator.enabled = n, this.rotationMomentumEstimator.enabled = n, this.panPlanarMomentumEstimator.enabled = n, this.panSphericalMomentumEstimator.enabled = n, this.beginHeading = -i.normalize(e(this.view.camera.heading)), this.beginRadius = t.radius, this.pointerCount = t.pointers.size, this.beginAngle = t.angle, this.smoothRotation.reset(), s(t.center, this.screenPickPoint), m(this.beginScreenPoint, this.screenPickPoint);\n    const o = M(this.view.spatialReference),\n          r = U(this.intersectionHelper, this.startCamera, this.screenPickPoint, o, D.Silhouette);\n    this.scenePickPoint = r.scenePickPoint, this.sphere = r.sphere, h(this.beginScenePoint, this.scenePickPoint), this.navMode = I(this.startCamera, this.screenPickPoint, r.hasGeometryIntersection, o), this.navMode === T.Vertical && this._preparePlanarPanMode(t), this.constraintOptions.interactionStartCamera.copyFrom(this.startCamera);\n  }\n\n  _preparePlanarPanMode(t) {\n    const i = c(this.tmp3d, this.startCamera.viewForward);\n    w(this.scenePickPoint, i, this.panningPlane);\n    const e = n(this.screenPickPoint[0], 0),\n          r = v(),\n          a = p(this.startCamera.eye);\n    this.adjustedSphere[3] = a < this.sphere[3] ? a - 100 : this.sphere[3], L(this.adjustedSphere, this.startCamera, e, r);\n    const m = o();\n    this.startCamera.projectToRenderScreen(r, m);\n    const M = .9 * m[1];\n    this.screenPickPoint[1] = Math.min(this.screenPickPoint[1], M);\n    const C = this.intersectionHelper.intersectScreen(this.screenPickPoint, this.scenePickPoint);\n    C && w(this.scenePickPoint, b(this.panningPlane), this.panningPlane);\n    const S = v(),\n          f = v(),\n          j = v(),\n          E = 80,\n          y = 5,\n          O = 50;\n    l(S, this.scenePickPoint, this.currentCamera.eye);\n    const k = p(S);\n    u(S, S);\n\n    const A = y * Math.max(Math.abs(this.view.camera.position.z), O),\n          z = this.view._stage.renderView.getMinimalDepthForArea(null, this.screenPickPoint[0], this.screenPickPoint[1], this.view.state.camera, E);\n\n    let R = z ? Math.min(z, A) : A;\n    R = C ? Math.min(R, k) : R, h(j, P(f, this.currentCamera.eye, d(f, S, R))), this.panningPlane[3] = -g(this.panningPlane, j), this.startCamera.center = P(f, this.startCamera.eye, d(f, this.startCamera.viewForward, R));\n    const x = s(t.center, this.tmpScreenPointArray);\n    Z(this.panningPlane, this.startCamera, x, this.beginScenePoint);\n  }\n\n  update(t) {\n    if (!this.active) return;\n    this.currentCamera.copyFrom(this.startCamera);\n    const i = t.pointers.size > 1;\n    this.navMode === T.Horizontal ? (i && this._zoomSpherical(t), this._panningSpherical(t), i && this._rotateSpherical(t)) : (i && this._zoomPlanar(t), this._panningPlanar(t), i && this._rotatePlanar(t));\n  }\n\n  end(t) {\n    t.pointers.size === this.pointerCount && this.update(t), this.finishController();\n    const i = this.zoomMomentumEstimator.evaluateMomentum();\n    if (i) return this.navMode === T.Horizontal ? new F({\n      view: this.view,\n      momentum: i,\n      screenCenter: this.zoomCenterScreen,\n      sceneCenter: this.beginScenePoint,\n      radius: this.sphere[3]\n    }) : new H({\n      view: this.view,\n      momentum: i,\n      zoomCenter: this.beginScenePoint\n    });\n    const e = this.rotationMomentumEstimator.evaluateMomentum();\n    if (e) return new _({\n      view: this.view,\n      momentum: e,\n      center: this.sphere,\n      axis: this.rotationAxis\n    });\n\n    if (this.navMode === T.Horizontal) {\n      const t = this.panSphericalMomentumEstimator.evaluateMomentum();\n      if (t) return new x({\n        view: this.view,\n        momentum: t\n      });\n    } else {\n      const t = this.panPlanarMomentumEstimator.evaluateMomentum();\n      if (t) return new R({\n        view: this.view,\n        momentum: t\n      });\n    }\n\n    return null;\n  }\n\n  _zoomSpherical(t) {\n    const i = this.beginRadius / t.radius,\n          e = .001875 * Math.min(Math.max(t.radius, 40), 120);\n    this.smoothScaling.gain = e, this.smoothScaling.update(i), N(this.sphere, this.currentCamera, this.smoothScaling.value), s(t.center, this.zoomCenterScreen), this.zoomMomentumEstimator.add(this.smoothScaling.value, .001 * t.timestamp), this.constraintOptions.interactionType = O.ZOOM, this.constraintOptions.interactionFactor = j(t.radius - this.beginRadius), E(this.view, this.currentCamera, this.constraintOptions);\n  }\n\n  _panningSpherical(t) {\n    const i = s(t.center, this.tmpScreenPointArray);\n    L(this.sphere, this.currentCamera, i, this.tmp3d), B(this.beginScenePoint, g(this.currentCamera.up, this.beginScenePoint), this.sphere[3], this.beginHeading, this.view.camera.tilt, this.startCamera) ? (G(this.sphere, this.currentCamera, this.beginScenePoint, this.tmp3d, this.beginHeading, this.view.camera.tilt, !1), this.panSphericalMomentumEstimator.addMomentumPreserveHeading(i, this.tmp3d, .001 * t.timestamp, this.startCamera, this.sphere, this.beginHeading, this.view.camera.tilt)) : (V(this.sphere, this.currentCamera, this.beginScenePoint, this.tmp3d, this.view.camera.tilt, !1), this.panSphericalMomentumEstimator.addMomentumDirectRotation(i, this.tmp3d, .001 * t.timestamp, this.startCamera, this.sphere[3], this.view.camera.tilt)), this.constraintOptions.interactionType = O.PAN, this.constraintOptions.interactionFactor = j(this.screenPickPoint, i), E(this.view, this.currentCamera, this.constraintOptions);\n  }\n\n  _rotateSpherical(t) {\n    u(this.rotationAxis, this.scenePickPoint), this.currentCamera.aboveGround || c(this.rotationAxis, this.rotationAxis);\n    const i = this.smoothRotation.value,\n          e = i + q(t.angle - i),\n          n = .00125 * Math.min(Math.max(t.radius, 40), 120);\n    this.smoothRotation.gain = n, this.smoothRotation.update(e);\n    const s = this.smoothRotation.value - this.beginAngle;\n    this.rotationMomentumEstimator.add(s, .001 * t.timestamp), J(this.currentCamera, this.sphere, C(this.rotationAxis, s)), this.constraintOptions.interactionType = O.TUMBLE, this.constraintOptions.interactionFactor = j(t.radius * e), E(this.view, this.currentCamera, this.constraintOptions);\n  }\n\n  _panningPlanar(t) {\n    const i = s(t.center, this.tmpScreenPointArray);\n    Z(this.panningPlane, this.currentCamera, i, this.tmp3d) && (K(this.currentCamera, this.beginScenePoint, this.tmp3d), this.panPlanarMomentumEstimator.add(i, this.tmp3d, .001 * t.timestamp), this.constraintOptions.interactionType = O.PAN, this.constraintOptions.interactionFactor = j(this.beginScreenPoint, i), this.constraintOptions.interactionDirection = this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye, this.tmpInteractionDirection), E(this.view, this.currentCamera, this.constraintOptions), this.constraintOptions.interactionDirection = null);\n  }\n\n  _zoomPlanar(t) {\n    const i = this.beginRadius / t.radius,\n          e = .001875 * Math.min(Math.max(t.radius, 40), 120);\n    this.smoothScaling.gain = e, this.smoothScaling.update(i), this.zoomMomentumEstimator.add(this.smoothScaling.value, .001 * t.timestamp), Q(this.currentCamera, this.beginScenePoint, this.smoothScaling.value, this.view.state.constraints.minimumPoiDistance), this.constraintOptions.interactionType = O.ZOOM, this.constraintOptions.interactionFactor = j(t.radius - this.beginRadius), E(this.view, this.currentCamera, this.constraintOptions);\n  }\n\n  _rotatePlanar(t) {\n    h(this.rotationAxis, this.beginScenePoint), this.currentCamera.aboveGround || c(this.rotationAxis, this.rotationAxis);\n    const i = this.smoothRotation.value;\n    let e = t.angle - i;\n    e = q(e);\n    const n = i + e,\n          s = .00125 * Math.min(Math.max(t.radius, 40), 120);\n    this.smoothRotation.gain = s, this.smoothRotation.update(n);\n    const o = this.smoothRotation.value - this.beginAngle;\n    this.rotationMomentumEstimator.add(o, .001 * t.timestamp), J(this.currentCamera, this.sphere, C(this.rotationAxis, o)), this.constraintOptions.interactionType = O.TUMBLE, this.constraintOptions.interactionFactor = j(t.radius * o), E(this.view, this.currentCamera, this.constraintOptions);\n  }\n\n};\nt([r({\n  constructOnly: !0\n})], it.prototype, \"view\", void 0), it = t([a(\"esri.views.3d.state.controllers.global.PinchAndPanController\")], it);\nexport { it as PinchAndPanController };","map":{"version":3,"names":["_","t","cyclicalPI","i","deg2rad","e","createScreenPointArray","n","screenPointObjectToArray","s","createRenderScreenPointArray3","o","property","r","subclass","a","c","m","h","l","p","b","u","P","g","d","v","getReferenceEllipsoid","M","wrapAxisAngle","C","create","S","fromPositionAndNormal","w","normal","f","pixelDistanceToInteractionFactor","j","applyAll","E","ConstraintTypes","y","InteractionType","O","TiltMode","k","ExponentialFalloff","A","InteractiveController","z","PanPlanarMomentumController","R","PanSphericalMomentumController","x","RotationMomentumController","ZoomPlanarMomentumController","H","ZoomSphericalMomentumController","F","NavigationMode","T","pickPointAndInitSphere","U","SpherePickPointFallback","D","decideNavigationMode","I","sphereOrPlanePointFromScreenPoint","L","intersectPlaneFromScreenPointAtEye","Z","applyZoomOnSphere","N","preserveHeadingThreshold","B","applyPanSphericalPreserveHeading","G","applyPanSphericalDirectRotation","V","normalizeRotationDelta","q","applyRotation","J","applyPanPlanar","K","applyZoomToPoint","Q","Camera","W","PanPlanarMomentumEstimator","X","PanSphericalMomentumEstimator","Y","RotationMomentumEstimator","$","ZoomMomentumEstimator","tt","it","constructor","view","smoothRotation","rotationAxis","panningPlane","smoothScaling","zoomCenterScreen","zoomMomentumEstimator","rotationMomentumEstimator","panSphericalMomentumEstimator","panPlanarMomentumEstimator","adjustedSphere","tmp3d","tmpScreenPointArray","beginScreenPoint","beginScenePoint","screenPickPoint","navMode","Horizontal","tmpInteractionDirection","constraintOptions","selection","ALL","interactionType","NONE","interactionFactor","interactionStartCamera","interactionDirection","tiltMode","TUMBLE","intersectionHelper","sceneIntersectionHelper","begin","active","navigation","momentumEnabled","enabled","beginHeading","normalize","camera","heading","beginRadius","radius","pointerCount","pointers","size","beginAngle","angle","reset","center","spatialReference","startCamera","Silhouette","scenePickPoint","sphere","hasGeometryIntersection","Vertical","_preparePlanarPanMode","copyFrom","viewForward","eye","projectToRenderScreen","Math","min","intersectScreen","currentCamera","max","abs","position","_stage","renderView","getMinimalDepthForArea","state","update","_zoomSpherical","_panningSpherical","_rotateSpherical","_zoomPlanar","_panningPlanar","_rotatePlanar","end","finishController","evaluateMomentum","momentum","screenCenter","sceneCenter","zoomCenter","axis","gain","value","add","timestamp","ZOOM","up","tilt","addMomentumPreserveHeading","addMomentumDirectRotation","PAN","aboveGround","renderCoordsHelper","worldUpAtPosition","constraints","minimumPoiDistance","constructOnly","prototype","PinchAndPanController"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/state/controllers/global/PinchAndPanController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import{cyclicalPI as i}from\"../../../../../core/Cyclical.js\";import{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{createScreenPointArray as n,screenPointObjectToArray as s,createRenderScreenPointArray3 as o}from\"../../../../../core/screenUtils.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as m}from\"../../../../../chunks/vec2.js\";import{c as h,o as c,l as p,b as l,n as u,a as P,g as d,e as g}from\"../../../../../chunks/vec3.js\";import{c as v}from\"../../../../../chunks/vec3f64.js\";import{getReferenceEllipsoid as M}from\"../../../../../geometry/projectionEllipsoid.js\";import{wrapAxisAngle as C}from\"../../../../../geometry/support/axisAngle.js\";import{create as S,fromPositionAndNormal as w,normal as b}from\"../../../../../geometry/support/plane.js\";import{c as f}from\"../../../../../chunks/sphere.js\";import{pixelDistanceToInteractionFactor as j,applyAll as E}from\"../../../camera/constraintUtils.js\";import{ConstraintTypes as y,InteractionType as O,TiltMode as k}from\"../../../camera/constraintUtils/common.js\";import{ExponentialFalloff as A}from\"../../../input/util.js\";import{InteractiveController as z}from\"../InteractiveController.js\";import{PanPlanarMomentumController as R}from\"../momentum/PanPlanarMomentumController.js\";import{PanSphericalMomentumController as x}from\"../momentum/PanSphericalMomentumController.js\";import{RotationMomentumController as _}from\"../momentum/RotationMomentumController.js\";import{ZoomPlanarMomentumController as H}from\"../momentum/ZoomPlanarMomentumController.js\";import{ZoomSphericalMomentumController as F}from\"../momentum/ZoomSphericalMomentumController.js\";import{NavigationMode as T,pickPointAndInitSphere as U,SpherePickPointFallback as D,decideNavigationMode as I,sphereOrPlanePointFromScreenPoint as L,intersectPlaneFromScreenPointAtEye as Z,applyZoomOnSphere as N,preserveHeadingThreshold as B,applyPanSphericalPreserveHeading as G,applyPanSphericalDirectRotation as V,normalizeRotationDelta as q,applyRotation as J,applyPanPlanar as K,applyZoomToPoint as Q}from\"../../utils/navigationUtils.js\";import{Camera as W}from\"../../../webgl-engine/lib/Camera.js\";import{PanPlanarMomentumEstimator as X}from\"../../../../navigation/PanPlanarMomentumEstimator.js\";import{PanSphericalMomentumEstimator as Y}from\"../../../../navigation/PanSphericalMomentumEstimator.js\";import{RotationMomentumEstimator as $}from\"../../../../navigation/RotationMomentumEstimator.js\";import{ZoomMomentumEstimator as tt}from\"../../../../navigation/ZoomMomentumEstimator.js\";let it=class extends z{constructor(t){super(t),this.view=null,this.smoothRotation=new A(.05),this.rotationAxis=v(),this.panningPlane=S(),this.smoothScaling=new A(.05),this.zoomCenterScreen=n(),this.zoomMomentumEstimator=new tt,this.rotationMomentumEstimator=new $,this.panSphericalMomentumEstimator=new Y,this.panPlanarMomentumEstimator=new X,this.adjustedSphere=f(),this.tmp3d=v(),this.tmpScreenPointArray=n(),this.beginScreenPoint=n(),this.beginScenePoint=v(),this.screenPickPoint=n(),this.navMode=T.Horizontal,this.tmpInteractionDirection=v(),this.constraintOptions={selection:y.ALL,interactionType:O.NONE,interactionFactor:0,interactionStartCamera:new W,interactionDirection:null,tiltMode:k.TUMBLE}}get intersectionHelper(){return this.view.sceneIntersectionHelper}begin(t){if(!this.active)return;const n=this.view.navigation.momentumEnabled;this.zoomMomentumEstimator.enabled=n,this.rotationMomentumEstimator.enabled=n,this.panPlanarMomentumEstimator.enabled=n,this.panSphericalMomentumEstimator.enabled=n,this.beginHeading=-i.normalize(e(this.view.camera.heading)),this.beginRadius=t.radius,this.pointerCount=t.pointers.size,this.beginAngle=t.angle,this.smoothRotation.reset(),s(t.center,this.screenPickPoint),m(this.beginScreenPoint,this.screenPickPoint);const o=M(this.view.spatialReference),r=U(this.intersectionHelper,this.startCamera,this.screenPickPoint,o,D.Silhouette);this.scenePickPoint=r.scenePickPoint,this.sphere=r.sphere,h(this.beginScenePoint,this.scenePickPoint),this.navMode=I(this.startCamera,this.screenPickPoint,r.hasGeometryIntersection,o),this.navMode===T.Vertical&&this._preparePlanarPanMode(t),this.constraintOptions.interactionStartCamera.copyFrom(this.startCamera)}_preparePlanarPanMode(t){const i=c(this.tmp3d,this.startCamera.viewForward);w(this.scenePickPoint,i,this.panningPlane);const e=n(this.screenPickPoint[0],0),r=v(),a=p(this.startCamera.eye);this.adjustedSphere[3]=a<this.sphere[3]?a-100:this.sphere[3],L(this.adjustedSphere,this.startCamera,e,r);const m=o();this.startCamera.projectToRenderScreen(r,m);const M=.9*m[1];this.screenPickPoint[1]=Math.min(this.screenPickPoint[1],M);const C=this.intersectionHelper.intersectScreen(this.screenPickPoint,this.scenePickPoint);C&&w(this.scenePickPoint,b(this.panningPlane),this.panningPlane);const S=v(),f=v(),j=v(),E=80,y=5,O=50;l(S,this.scenePickPoint,this.currentCamera.eye);const k=p(S);u(S,S);const A=y*Math.max(Math.abs(this.view.camera.position.z),O),z=this.view._stage.renderView.getMinimalDepthForArea(null,this.screenPickPoint[0],this.screenPickPoint[1],this.view.state.camera,E);let R=z?Math.min(z,A):A;R=C?Math.min(R,k):R,h(j,P(f,this.currentCamera.eye,d(f,S,R))),this.panningPlane[3]=-g(this.panningPlane,j),this.startCamera.center=P(f,this.startCamera.eye,d(f,this.startCamera.viewForward,R));const x=s(t.center,this.tmpScreenPointArray);Z(this.panningPlane,this.startCamera,x,this.beginScenePoint)}update(t){if(!this.active)return;this.currentCamera.copyFrom(this.startCamera);const i=t.pointers.size>1;this.navMode===T.Horizontal?(i&&this._zoomSpherical(t),this._panningSpherical(t),i&&this._rotateSpherical(t)):(i&&this._zoomPlanar(t),this._panningPlanar(t),i&&this._rotatePlanar(t))}end(t){t.pointers.size===this.pointerCount&&this.update(t),this.finishController();const i=this.zoomMomentumEstimator.evaluateMomentum();if(i)return this.navMode===T.Horizontal?new F({view:this.view,momentum:i,screenCenter:this.zoomCenterScreen,sceneCenter:this.beginScenePoint,radius:this.sphere[3]}):new H({view:this.view,momentum:i,zoomCenter:this.beginScenePoint});const e=this.rotationMomentumEstimator.evaluateMomentum();if(e)return new _({view:this.view,momentum:e,center:this.sphere,axis:this.rotationAxis});if(this.navMode===T.Horizontal){const t=this.panSphericalMomentumEstimator.evaluateMomentum();if(t)return new x({view:this.view,momentum:t})}else{const t=this.panPlanarMomentumEstimator.evaluateMomentum();if(t)return new R({view:this.view,momentum:t})}return null}_zoomSpherical(t){const i=this.beginRadius/t.radius,e=.001875*Math.min(Math.max(t.radius,40),120);this.smoothScaling.gain=e,this.smoothScaling.update(i),N(this.sphere,this.currentCamera,this.smoothScaling.value),s(t.center,this.zoomCenterScreen),this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*t.timestamp),this.constraintOptions.interactionType=O.ZOOM,this.constraintOptions.interactionFactor=j(t.radius-this.beginRadius),E(this.view,this.currentCamera,this.constraintOptions)}_panningSpherical(t){const i=s(t.center,this.tmpScreenPointArray);L(this.sphere,this.currentCamera,i,this.tmp3d),B(this.beginScenePoint,g(this.currentCamera.up,this.beginScenePoint),this.sphere[3],this.beginHeading,this.view.camera.tilt,this.startCamera)?(G(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.beginHeading,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumPreserveHeading(i,this.tmp3d,.001*t.timestamp,this.startCamera,this.sphere,this.beginHeading,this.view.camera.tilt)):(V(this.sphere,this.currentCamera,this.beginScenePoint,this.tmp3d,this.view.camera.tilt,!1),this.panSphericalMomentumEstimator.addMomentumDirectRotation(i,this.tmp3d,.001*t.timestamp,this.startCamera,this.sphere[3],this.view.camera.tilt)),this.constraintOptions.interactionType=O.PAN,this.constraintOptions.interactionFactor=j(this.screenPickPoint,i),E(this.view,this.currentCamera,this.constraintOptions)}_rotateSpherical(t){u(this.rotationAxis,this.scenePickPoint),this.currentCamera.aboveGround||c(this.rotationAxis,this.rotationAxis);const i=this.smoothRotation.value,e=i+q(t.angle-i),n=.00125*Math.min(Math.max(t.radius,40),120);this.smoothRotation.gain=n,this.smoothRotation.update(e);const s=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(s,.001*t.timestamp),J(this.currentCamera,this.sphere,C(this.rotationAxis,s)),this.constraintOptions.interactionType=O.TUMBLE,this.constraintOptions.interactionFactor=j(t.radius*e),E(this.view,this.currentCamera,this.constraintOptions)}_panningPlanar(t){const i=s(t.center,this.tmpScreenPointArray);Z(this.panningPlane,this.currentCamera,i,this.tmp3d)&&(K(this.currentCamera,this.beginScenePoint,this.tmp3d),this.panPlanarMomentumEstimator.add(i,this.tmp3d,.001*t.timestamp),this.constraintOptions.interactionType=O.PAN,this.constraintOptions.interactionFactor=j(this.beginScreenPoint,i),this.constraintOptions.interactionDirection=this.view.renderCoordsHelper.worldUpAtPosition(this.currentCamera.eye,this.tmpInteractionDirection),E(this.view,this.currentCamera,this.constraintOptions),this.constraintOptions.interactionDirection=null)}_zoomPlanar(t){const i=this.beginRadius/t.radius,e=.001875*Math.min(Math.max(t.radius,40),120);this.smoothScaling.gain=e,this.smoothScaling.update(i),this.zoomMomentumEstimator.add(this.smoothScaling.value,.001*t.timestamp),Q(this.currentCamera,this.beginScenePoint,this.smoothScaling.value,this.view.state.constraints.minimumPoiDistance),this.constraintOptions.interactionType=O.ZOOM,this.constraintOptions.interactionFactor=j(t.radius-this.beginRadius),E(this.view,this.currentCamera,this.constraintOptions)}_rotatePlanar(t){h(this.rotationAxis,this.beginScenePoint),this.currentCamera.aboveGround||c(this.rotationAxis,this.rotationAxis);const i=this.smoothRotation.value;let e=t.angle-i;e=q(e);const n=i+e,s=.00125*Math.min(Math.max(t.radius,40),120);this.smoothRotation.gain=s,this.smoothRotation.update(n);const o=this.smoothRotation.value-this.beginAngle;this.rotationMomentumEstimator.add(o,.001*t.timestamp),J(this.currentCamera,this.sphere,C(this.rotationAxis,o)),this.constraintOptions.interactionType=O.TUMBLE,this.constraintOptions.interactionFactor=j(t.radius*o),E(this.view,this.currentCamera,this.constraintOptions)}};t([r({constructOnly:!0})],it.prototype,\"view\",void 0),it=t([a(\"esri.views.3d.state.controllers.global.PinchAndPanController\")],it);export{it as PinchAndPanController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}