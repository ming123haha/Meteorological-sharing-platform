{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { isAbortError as r } from \"../../core/promiseUtils.js\";\nimport { isAnimatedPNG as i, parseApng as s } from \"../../views/2d/engine/webgl/animatedFormats/apng.js\";\nimport { isAnimatedGIF as n, parseGif as a } from \"../../views/2d/engine/webgl/animatedFormats/gif.js\";\n\nclass o {\n  constructor() {\n    this._resourceMap = new Map(), this._inFlightResourceMap = new Map(), this.geometryEngine = null;\n  }\n\n  destroy() {\n    this._inFlightResourceMap.clear(), this._resourceMap.clear();\n  }\n\n  getResource(e) {\n    return this._resourceMap.get(e) ?? null;\n  }\n\n  async fetchResource(e, t) {\n    const r = this._resourceMap.get(e);\n\n    if (r) return {\n      width: r.width,\n      height: r.height\n    };\n\n    const i = this._inFlightResourceMap.get(e);\n\n    if (i) return i.then(e => ({\n      width: e.width,\n      height: e.height\n    }));\n    const s = h(e, t);\n    return this._inFlightResourceMap.set(e, i), s.then(t => (this._inFlightResourceMap.delete(e), this._resourceMap.set(e, t), {\n      width: t.width,\n      height: t.height\n    }), () => ({\n      width: 0,\n      height: 0\n    }));\n  }\n\n  deleteResource(e) {\n    this._inFlightResourceMap.delete(e), this._resourceMap.delete(e);\n  }\n\n}\n\nasync function c(i, s) {\n  const n = window.URL.createObjectURL(i);\n\n  try {\n    const {\n      data: t\n    } = await e(n, { ...s,\n      responseType: \"image\"\n    });\n    return t;\n  } catch (a) {\n    if (!r(a)) throw new t(\"mapview-invalid-resource\", `Could not fetch requested resource at ${n}`);\n    throw a;\n  } finally {\n    window.URL.revokeObjectURL(n);\n  }\n}\n\nasync function h(e, t) {\n  const {\n    arrayBuffer: r,\n    mediaType: o\n  } = await u(e, t),\n        h = \"image/png\" === o;\n  if (\"image/gif\" === o && n(r)) return a(r);\n  if (h && i(r)) return s(r, t);\n  return c(new Blob([r], {\n    type: o\n  }), t);\n}\n\nasync function u(i, s) {\n  let n;\n  const a = \";base64,\";\n\n  if (i.includes(a)) {\n    const e = i.indexOf(a),\n          t = i.indexOf(a) + a.length,\n          r = i.substring(t),\n          s = atob(r),\n          o = new Uint8Array(s.length);\n\n    for (let i = 0; i < s.length; i++) o[i] = s.charCodeAt(i);\n\n    n = {\n      arrayBuffer: o.buffer,\n      mediaType: i.substring(0, e).replace(\"data:\", \"\")\n    };\n  } else try {\n    const t = await e(i, {\n      responseType: \"array-buffer\",\n      ...s\n    }),\n          r = t.data;\n    n = {\n      arrayBuffer: r,\n      mediaType: t.getHeader(\"Content-Type\")\n    };\n  } catch (o) {\n    if (!r(o)) throw new t(\"mapview-invalid-resource\", `Could not fetch requested resource at ${i}`);\n  }\n\n  return n;\n}\n\nexport { o as default };","map":{"version":3,"names":["e","t","isAbortError","r","isAnimatedPNG","i","parseApng","s","isAnimatedGIF","n","parseGif","a","o","constructor","_resourceMap","Map","_inFlightResourceMap","geometryEngine","destroy","clear","getResource","get","fetchResource","width","height","then","h","set","delete","deleteResource","c","window","URL","createObjectURL","data","responseType","revokeObjectURL","arrayBuffer","mediaType","u","Blob","type","includes","indexOf","length","substring","atob","Uint8Array","charCodeAt","buffer","replace","getHeader","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{isAbortError as r}from\"../../core/promiseUtils.js\";import{isAnimatedPNG as i,parseApng as s}from\"../../views/2d/engine/webgl/animatedFormats/apng.js\";import{isAnimatedGIF as n,parseGif as a}from\"../../views/2d/engine/webgl/animatedFormats/gif.js\";class o{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};const i=this._inFlightResourceMap.get(e);if(i)return i.then((e=>({width:e.width,height:e.height})));const s=h(e,t);return this._inFlightResourceMap.set(e,i),s.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}}async function c(i,s){const n=window.URL.createObjectURL(i);try{const{data:t}=await e(n,{...s,responseType:\"image\"});return t}catch(a){if(!r(a))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${n}`);throw a}finally{window.URL.revokeObjectURL(n)}}async function h(e,t){const{arrayBuffer:r,mediaType:o}=await u(e,t),h=\"image/png\"===o;if(\"image/gif\"===o&&n(r))return a(r);if(h&&i(r))return s(r,t);return c(new Blob([r],{type:o}),t)}async function u(i,s){let n;const a=\";base64,\";if(i.includes(a)){const e=i.indexOf(a),t=i.indexOf(a)+a.length,r=i.substring(t),s=atob(r),o=new Uint8Array(s.length);for(let i=0;i<s.length;i++)o[i]=s.charCodeAt(i);n={arrayBuffer:o.buffer,mediaType:i.substring(0,e).replace(\"data:\",\"\")}}else try{const t=await e(i,{responseType:\"array-buffer\",...s}),r=t.data;n={arrayBuffer:r,mediaType:t.getHeader(\"Content-Type\")}}catch(o){if(!r(o))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${i}`)}return n}export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}