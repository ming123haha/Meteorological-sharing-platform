{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../Color.js\";\nimport i from \"../../../../analysis/LineOfSightAnalysisObserver.js\";\nimport r from \"../../../../analysis/LineOfSightAnalysisTarget.js\";\nimport a from \"../../../../core/Collection.js\";\nimport n from \"../../../../core/Handles.js\";\nimport s from \"../../../../core/Logger.js\";\nimport { destroyMaybe as o, isSome as l, isNone as c, applySome as u } from \"../../../../core/maybe.js\";\nimport { watch as p, syncAndInitial as h, sync as d, on as g } from \"../../../../core/reactiveUtils.js\";\nimport { property as m } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as _ } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as v, fromPoints as b } from \"../../../../geometry/support/lineSegment.js\";\nimport { getGraphicEffectiveElevationInfo as y, getConvertedElevation as f } from \"../../../../support/elevationInfoUtils.js\";\nimport T from \"../../../../symbols/support/ElevationInfo.js\";\nimport { LineOfSightRayIntersector as C } from \"./LineOfSightRayIntersector.js\";\nimport { LineOfSightToolConfiguration as M } from \"./LineOfSightToolConfiguration.js\";\nimport { createSphereManipulator as w, createSphereManipulatorRenderObjects as L } from \"./lineOfSightToolUtils.js\";\nimport { LaserlineVisualElement as k } from \"../../interactive/visualElements/LaserlineVisualElement.js\";\nimport { IntersectorType as V } from \"../../webgl-engine/lib/IntersectorInterfaces.js\";\nimport \"../../../input/ViewEvents.js\";\nimport { AnalysisToolBase as O } from \"../../../interactive/AnalysisToolBase.js\";\nimport { createManipulatorDragEventPipeline as S } from \"../../../interactive/dragEventPipeline.js\";\nimport { ManipulatorStateCustomFlags as D } from \"../../../interactive/interfaces.js\";\nimport { createScreenPointFromEvent as E } from \"../../../support/screenUtils.js\";\nimport { MouseButton as I } from \"../../../input/IViewEvents.js\";\nvar R;\n!function (e) {\n  e.Ready = \"ready\", e.Creating = \"creating\", e.Created = \"created\";\n}(R || (R = {}));\nconst j = a.ofType(r),\n      P = s.getLogger(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\");\nlet H = class extends O {\n  constructor(e) {\n    super(e), this.preferManipulatorCursor = !0, this.removeIncompleteOnCancel = !1, this.configuration = new M(), this.analysisViewData = null, this._laserlineVisualElement = null, this._grabbedManipulator = null, this._analysisHandles = new n(), this._handles = new n(), this._manipulatorHandles = new n(), this._targetTrackerManipulator = null;\n  }\n\n  initialize() {\n    this._intersector = new C({\n      view: this.view\n    }), this._handles.add(p(() => this.state, e => {\n      e === R.Created && this.finishToolCreation();\n    }, h)), this._observerManipulator = this._createObserverManipulator(), this._handles.add([p(() => ({ ...this.configuration.observer\n    }), () => this._updateObserverManipulatorStyle(), d), p(() => this.analysisViewData.elevationAlignedObserver, e => this._onObserverLocationChange(e), h), p(() => ({ ...this.configuration.laserLine\n    }), () => this._createVisualElements(), h), p(() => this._laserLineRendererDependencies(), e => this._updateLaserLineRenderer(e)), this._connectComputations()]);\n  }\n\n  destroy() {\n    this._handles = o(this._handles), this._manipulatorHandles = o(this._manipulatorHandles), this._analysisHandles = o(this._analysisHandles), this._observerManipulator = null, this._clearCursorTracker(), this._removeVisualElements(), this._intersector = null, this._set(\"analysis\", null);\n  }\n\n  get state() {\n    return this.active ? l(this._grabbedManipulator) ? R.Created : R.Creating : l(this.analysis.observer) && l(this.analysis.observer.position) ? R.Created : R.Ready;\n  }\n\n  get cursor() {\n    return this.active && this._showTracker ? \"crosshair\" : null;\n  }\n\n  get updating() {\n    return !!l(this.analysisViewData) && this.analysisViewData.updating;\n  }\n\n  get _showTracker() {\n    return this.active && \"mouse\" === this._latestPointerMovePointerType;\n  }\n\n  get _shouldRenderTracker() {\n    return this._showTracker && l(this.analysis.observer) && l(this.analysis.observer.position) && !this.hasFocusedManipulators;\n  }\n\n  continue() {\n    this.view.activeTool = this;\n  }\n\n  stop() {\n    this.view.activeTool = null;\n  }\n\n  onEditableChange() {\n    this.analysisViewData.editable = this.internallyEditable;\n  }\n\n  onInputEvent(e) {\n    switch (e.type) {\n      case \"immediate-double-click\":\n        this._doubleClickHandler(e);\n\n        break;\n\n      case \"key-down\":\n        this._keyDownHandler(e);\n\n        break;\n\n      case \"pointer-move\":\n        this._pointerMoveHandler(e);\n\n    }\n  }\n\n  onInputEventAfter(e) {\n    if (\"immediate-click\" === e.type) this._clickHandler(e);\n  }\n\n  onShow() {}\n\n  onHide() {\n    this._grabbedManipulator = null;\n  }\n\n  onDeactivate() {\n    this._clearCursorTracker();\n  }\n\n  _connectComputations() {\n    return g(() => this.analysisViewData.computations, \"change\", e => this._onComputationsCollectionChange(e), {\n      onListenerAdd: e => {\n        for (const t of e) this._connectComputation(t);\n      },\n      onListenerRemove: e => {\n        for (const t of e) this._disconnectComputation(t);\n      },\n      sync: !0\n    });\n  }\n\n  _onComputationsCollectionChange({\n    added: e,\n    removed: t\n  }) {\n    for (const i of t) this._disconnectComputation(i);\n\n    for (const i of e) this._connectComputation(i);\n  }\n\n  _connectComputation(e) {\n    if (this.destroyed) return void P.warn(\"Attempting to connect an analysis to a destroyed LineOfSight tool. Ignoring.\");\n    const t = this._analysisHandles;\n    if (t.has(e)) return;\n\n    const i = this._createTargetManipulator(e.target);\n\n    c(this._targetTrackerManipulator) && i.metadata.target === this.analysisViewData.cursorTarget && (this._targetTrackerManipulator = i, this._targetTrackerManipulator.available = !1, this._targetTrackerManipulator.interactive = !1, this._updateLaserLineRenderer()), t.add([p(() => this._getLineOfSightManipulatorStateDependencies(e), () => this._updateManipulatorState(i, e), h), p(() => e.elevationAlignedTargetLocation, e => this._onTargetLocationChange(e, i), h)], e);\n  }\n\n  _disconnectComputation(e) {\n    if (this.destroyed) return void P.warn(\"Attempting to disconnect an analysis from a destroyed LineOfSight tool. Ignoring.\");\n\n    this._analysisHandles.remove(e);\n\n    const t = this._getTargetManipulator(e.target);\n\n    l(t) && (this.manipulators.remove(t), this._manipulatorHandles.remove(t), l(this._targetTrackerManipulator) && this._targetTrackerManipulator === t && (this._targetTrackerManipulator = null));\n  }\n\n  _clearCursorTracker() {\n    this.analysisViewData.cursorTarget = o(this.analysisViewData.cursorTarget);\n  }\n\n  _createManipulator(e, t, i) {\n    const r = w(this.view, e);\n    return r.metadata = i, this._manipulatorHandles.add([t(r), r.events.on(\"grab-changed\", e => this._manipulatorGrabChanged(r, e)), r.events.on(\"immediate-click\", e => this._manipulatorClick(r, e))], r), this.manipulators.add(r), r;\n  }\n\n  _createTargetManipulator(e) {\n    const t = this.configuration,\n          i = {\n      size: t.target.size,\n      customColor1: t.target.visibleColor,\n      customColor2: t.target.occludedColor,\n      customColor3: t.target.undefinedColor,\n      visible: !0\n    },\n          r = {\n      target: e,\n      type: \"target\"\n    },\n          a = this._createManipulator(i, e => this._createTargetManipulatorDragPipeline(e), r);\n\n    return l(e.position) ? a.elevationAlignedLocation = e.position : a.available = !1, a;\n  }\n\n  _getTargetManipulator(e) {\n    let t = null;\n    return this.manipulators.forEach(i => {\n      const r = i.manipulator;\n      c(t) && \"target\" === r.metadata.type && r.metadata.target === e && (t = r);\n    }), t;\n  }\n\n  _createObserverManipulator() {\n    const e = this.configuration,\n          t = {\n      size: e.observer.size,\n      color: e.observer.color,\n      visible: !0\n    };\n    return this._createManipulator(t, e => this._createObserverManipulatorDragPipeline(e), {\n      type: \"observer\",\n      intersection: null\n    });\n  }\n\n  _updateObserverManipulatorStyle() {\n    const e = this._observerManipulator,\n          t = this.configuration.observer,\n          i = {\n      size: t.size,\n      color: t.color,\n      visible: e.available\n    };\n    e.renderObjects = L(i);\n  }\n\n  _screenToIntersection() {\n    return e => {\n      const t = this._intersector.getScreenPointIntersection(e.screenEnd);\n\n      return c(t) ? null : { ...e,\n        intersection: t\n      };\n    };\n  }\n\n  _createTargetManipulatorDragPipeline(e) {\n    return S(e, (t, i, r) => {\n      i.next(this._screenToIntersection()).next(this._updateTargetDragStep(e)).next(() => this._updateLaserLineRenderer()), r.next(this._cancelTargetDragStep(e.metadata.target)).next(() => this._updateLaserLineRenderer());\n    });\n  }\n\n  _createObserverManipulatorDragPipeline(e) {\n    return S(e, (e, t, i) => {\n      t.next(this._screenToIntersection()).next(this._updateObserverDragStep()).next(() => this._updateLaserLineRenderer()), i.next(this._cancelObserverDragStep()).next(() => this._updateLaserLineRenderer());\n    });\n  }\n\n  _updateObserverDragStep() {\n    return e => (l(e.intersection.point) ? (c(this.analysis.observer) && (this.analysis.observer = new i()), this._updateFromIntersection(this.analysis.observer, e.intersection)) : this.analysis.observer = null, e);\n  }\n\n  _cancelObserverDragStep() {\n    const e = l(this.analysis.observer) && l(this.analysis.observer.position) ? this.analysis.observer.clone() : null;\n    return t => (this.analysis.observer = e, t);\n  }\n\n  _updateTargetDragStep(e) {\n    return t => {\n      this._updateFromIntersection(e.metadata.target, t.intersection);\n\n      const i = t.intersection.point;\n      return l(i) && (e.elevationAlignedLocation = i), t;\n    };\n  }\n\n  _cancelTargetDragStep(e) {\n    const t = u(e.position, e => e.clone());\n    return i => (e.position = t, i);\n  }\n\n  _manipulatorGrabChanged(e, t) {\n    switch (t.action) {\n      case \"start\":\n        this._grabbedManipulator = e;\n        break;\n\n      case \"end\":\n        this._grabbedManipulator === e && (this._grabbedManipulator = null);\n    }\n  }\n\n  _updateManipulatorState(e, t) {\n    const {\n      isValid: i,\n      isTargetVisible: r\n    } = t.computationResult;\n    e.state = i ? r ? D.Custom1 : D.Custom2 : D.Custom3;\n  }\n\n  _getLineOfSightManipulatorStateDependencies(e) {\n    const {\n      isValid: t,\n      isTargetVisible: i\n    } = e.computationResult;\n    return {\n      isValid: t,\n      isTargetVisible: i\n    };\n  }\n\n  _laserLineRendererDependencies() {\n    return {\n      laserlineVisualElement: this._laserlineVisualElement,\n      grabbedManipulator: this._grabbedManipulator,\n      shouldRenderTracker: this._shouldRenderTracker,\n      observerPosition: l(this.analysis.observer) ? this.analysis.observer.position : null,\n      visible: this.visible\n    };\n  }\n\n  _updateLaserLineRenderer(e = this._laserLineRendererDependencies()) {\n    const {\n      laserlineVisualElement: t,\n      grabbedManipulator: i,\n      shouldRenderTracker: r,\n      observerPosition: a,\n      visible: n\n    } = e;\n    if (c(t)) return;\n    const s = l(i) ? i : r && l(a) ? this._targetTrackerManipulator : null;\n    this.configuration.laserLine.enabled && l(s) && n ? (t.visible = !0, t.heightManifoldTarget = s.renderLocation, s !== this._observerManipulator ? t.lineVerticalPlaneSegment = b(this._observerManipulator.renderLocation, s.renderLocation, A) : t.lineVerticalPlaneSegment = null) : (t.visible = !1, t.heightManifoldTarget = null, t.lineVerticalPlaneSegment = null);\n  }\n\n  _createVisualElements() {\n    const e = this.configuration.laserLine;\n    this._removeVisualElements(), this._laserlineVisualElement = new k({\n      view: this.view,\n      attached: !0,\n      visible: this.visible,\n      style: {\n        glowColor: t.toUnitRGB(e.glowColor),\n        glowWidth: e.glowWidth,\n        innerColor: t.toUnitRGB(e.innerColor),\n        innerWidth: e.innerWidth,\n        globalAlpha: e.globalAlpha\n      }\n    });\n  }\n\n  _removeVisualElements() {\n    l(this._laserlineVisualElement) && (this._laserlineVisualElement.destroy(), this._laserlineVisualElement = null);\n  }\n\n  _onObserverLocationChange(e) {\n    c(e) ? this._observerManipulator.available = !1 : (this._observerManipulator.metadata.intersection = null, this._observerManipulator.available = !0, this._observerManipulator.elevationAlignedLocation = e);\n  }\n\n  _onTargetLocationChange(e, t) {\n    l(e) ? (t.elevationAlignedLocation = e, t !== this._targetTrackerManipulator && (t.available = !0)) : t.available = !1;\n  }\n\n  _addPointFromClickEvent(e) {\n    const t = this._intersector.getScreenPointIntersection(e);\n\n    if (!c(t) && !c(t.point)) if (l(this.analysis.observer) && l(this.analysis.observer.position)) {\n      this._clearCursorTracker();\n\n      const e = new r();\n      this._updateFromIntersection(e, t), this.analysis.targets.add(e);\n    } else {\n      const e = new i();\n      this._updateFromIntersection(e, t), this.analysis.observer = e;\n    }\n  }\n\n  _clickHandler(e) {\n    this.active && e.button !== I.Right && (this._addPointFromClickEvent(E(e)), e.stopPropagation());\n  }\n\n  _doubleClickHandler(e) {\n    this.active && e.button !== I.Right && (this.stop(), e.stopPropagation());\n  }\n\n  _keyDownHandler(e) {\n    this.active && \"Escape\" === e.key && (this.stop(), e.stopPropagation());\n  }\n\n  _pointerMoveHandler(e) {\n    if (this.hasFocusedManipulators) return;\n    if (this._latestPointerMovePointerType = e.pointerType, this._updateLaserLineRenderer(), !this._showTracker || c(this.analysis.observer) || c(this.analysis.observer.position)) return;\n\n    const t = E(e),\n          i = this._intersector.getScreenPointIntersection(t);\n\n    l(i) && l(i.point) && (c(this.analysisViewData.cursorTarget) && (this.analysisViewData.cursorTarget = new r()), this._updateFromIntersection(this.analysisViewData.cursorTarget, i), this._updateLaserLineRenderer());\n  }\n\n  _updateFromIntersection(e, t) {\n    if (c(t.point)) return e.position = null, e.elevationInfo = null, void (e.feature = null);\n\n    switch (t.type) {\n      case V.OBJECT:\n        if (l(t.graphic)) {\n          const i = t.graphic,\n                r = y(i);\n          \"on-the-ground\" === r.mode && (r.mode = \"relative-to-ground\", r.offset = 0), e.elevationInfo = new T(r), e.feature = i;\n        } else e.elevationInfo = null, e.feature = null;\n\n        break;\n\n      case V.TERRAIN:\n      case V.I3S:\n        e.elevationInfo = new T({\n          mode: \"on-the-ground\"\n        }), e.feature = null;\n        break;\n\n      default:\n        e.elevationInfo = null, e.feature = null;\n    }\n\n    const i = t.point.clone();\n    i.z = f(this.view, i, {\n      mode: \"absolute-height\",\n      offset: 0\n    }, e.elevationInfo), e.position = i;\n  }\n\n  _manipulatorClick(e, t) {\n    if (\"observer\" === e.metadata.type || e.grabbing || e.dragging || t.button !== I.Right || this.analysis.targets.length <= 1) return;\n    const {\n      target: i\n    } = e.metadata;\n    this.analysis.targets.remove(i), t.stopPropagation();\n  }\n\n  get testInfo() {\n    return {\n      laserLineVisualElement: this._laserlineVisualElement\n    };\n  }\n\n};\ne([m({\n  constructOnly: !0\n})], H.prototype, \"view\", void 0), e([m({\n  constructOnly: !0\n})], H.prototype, \"analysis\", void 0), e([m({\n  readOnly: !0\n})], H.prototype, \"state\", null), e([m({\n  readOnly: !0\n})], H.prototype, \"cursor\", null), e([m({\n  readOnly: !0\n})], H.prototype, \"preferManipulatorCursor\", void 0), e([m()], H.prototype, \"removeIncompleteOnCancel\", void 0), e([m({\n  readOnly: !0\n})], H.prototype, \"updating\", null), e([m({\n  type: M\n})], H.prototype, \"configuration\", void 0), e([m({\n  constructOnly: !0\n})], H.prototype, \"analysisViewData\", void 0), e([m({\n  readOnly: !0\n})], H.prototype, \"_showTracker\", null), e([m()], H.prototype, \"_latestPointerMovePointerType\", void 0), e([m()], H.prototype, \"_shouldRenderTracker\", null), e([m()], H.prototype, \"_laserlineVisualElement\", void 0), e([m()], H.prototype, \"_grabbedManipulator\", void 0), H = e([_(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\")], H);\nconst A = v();\nexport { j as LineOfSightTargetCollection, H as LineOfSightTool };","map":{"version":3,"names":["_","e","t","i","r","a","n","s","destroyMaybe","o","isSome","l","isNone","c","applySome","u","watch","p","syncAndInitial","h","sync","d","on","g","property","m","subclass","create","v","fromPoints","b","getGraphicEffectiveElevationInfo","y","getConvertedElevation","f","T","LineOfSightRayIntersector","C","LineOfSightToolConfiguration","M","createSphereManipulator","w","createSphereManipulatorRenderObjects","L","LaserlineVisualElement","k","IntersectorType","V","AnalysisToolBase","O","createManipulatorDragEventPipeline","S","ManipulatorStateCustomFlags","D","createScreenPointFromEvent","E","MouseButton","I","R","Ready","Creating","Created","j","ofType","P","getLogger","H","constructor","preferManipulatorCursor","removeIncompleteOnCancel","configuration","analysisViewData","_laserlineVisualElement","_grabbedManipulator","_analysisHandles","_handles","_manipulatorHandles","_targetTrackerManipulator","initialize","_intersector","view","add","state","finishToolCreation","_observerManipulator","_createObserverManipulator","observer","_updateObserverManipulatorStyle","elevationAlignedObserver","_onObserverLocationChange","laserLine","_createVisualElements","_laserLineRendererDependencies","_updateLaserLineRenderer","_connectComputations","destroy","_clearCursorTracker","_removeVisualElements","_set","active","analysis","position","cursor","_showTracker","updating","_latestPointerMovePointerType","_shouldRenderTracker","hasFocusedManipulators","continue","activeTool","stop","onEditableChange","editable","internallyEditable","onInputEvent","type","_doubleClickHandler","_keyDownHandler","_pointerMoveHandler","onInputEventAfter","_clickHandler","onShow","onHide","onDeactivate","computations","_onComputationsCollectionChange","onListenerAdd","_connectComputation","onListenerRemove","_disconnectComputation","added","removed","destroyed","warn","has","_createTargetManipulator","target","metadata","cursorTarget","available","interactive","_getLineOfSightManipulatorStateDependencies","_updateManipulatorState","elevationAlignedTargetLocation","_onTargetLocationChange","remove","_getTargetManipulator","manipulators","_createManipulator","events","_manipulatorGrabChanged","_manipulatorClick","size","customColor1","visibleColor","customColor2","occludedColor","customColor3","undefinedColor","visible","_createTargetManipulatorDragPipeline","elevationAlignedLocation","forEach","manipulator","color","_createObserverManipulatorDragPipeline","intersection","renderObjects","_screenToIntersection","getScreenPointIntersection","screenEnd","next","_updateTargetDragStep","_cancelTargetDragStep","_updateObserverDragStep","_cancelObserverDragStep","point","_updateFromIntersection","clone","action","isValid","isTargetVisible","computationResult","Custom1","Custom2","Custom3","laserlineVisualElement","grabbedManipulator","shouldRenderTracker","observerPosition","enabled","heightManifoldTarget","renderLocation","lineVerticalPlaneSegment","A","attached","style","glowColor","toUnitRGB","glowWidth","innerColor","innerWidth","globalAlpha","_addPointFromClickEvent","targets","button","Right","stopPropagation","key","pointerType","elevationInfo","feature","OBJECT","graphic","mode","offset","TERRAIN","I3S","z","grabbing","dragging","length","testInfo","laserLineVisualElement","constructOnly","prototype","readOnly","LineOfSightTargetCollection","LineOfSightTool"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightTool.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Color.js\";import i from\"../../../../analysis/LineOfSightAnalysisObserver.js\";import r from\"../../../../analysis/LineOfSightAnalysisTarget.js\";import a from\"../../../../core/Collection.js\";import n from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{destroyMaybe as o,isSome as l,isNone as c,applySome as u}from\"../../../../core/maybe.js\";import{watch as p,syncAndInitial as h,sync as d,on as g}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as v,fromPoints as b}from\"../../../../geometry/support/lineSegment.js\";import{getGraphicEffectiveElevationInfo as y,getConvertedElevation as f}from\"../../../../support/elevationInfoUtils.js\";import T from\"../../../../symbols/support/ElevationInfo.js\";import{LineOfSightRayIntersector as C}from\"./LineOfSightRayIntersector.js\";import{LineOfSightToolConfiguration as M}from\"./LineOfSightToolConfiguration.js\";import{createSphereManipulator as w,createSphereManipulatorRenderObjects as L}from\"./lineOfSightToolUtils.js\";import{LaserlineVisualElement as k}from\"../../interactive/visualElements/LaserlineVisualElement.js\";import{IntersectorType as V}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import\"../../../input/ViewEvents.js\";import{AnalysisToolBase as O}from\"../../../interactive/AnalysisToolBase.js\";import{createManipulatorDragEventPipeline as S}from\"../../../interactive/dragEventPipeline.js\";import{ManipulatorStateCustomFlags as D}from\"../../../interactive/interfaces.js\";import{createScreenPointFromEvent as E}from\"../../../support/screenUtils.js\";import{MouseButton as I}from\"../../../input/IViewEvents.js\";var R;!function(e){e.Ready=\"ready\",e.Creating=\"creating\",e.Created=\"created\"}(R||(R={}));const j=a.ofType(r),P=s.getLogger(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\");let H=class extends O{constructor(e){super(e),this.preferManipulatorCursor=!0,this.removeIncompleteOnCancel=!1,this.configuration=new M,this.analysisViewData=null,this._laserlineVisualElement=null,this._grabbedManipulator=null,this._analysisHandles=new n,this._handles=new n,this._manipulatorHandles=new n,this._targetTrackerManipulator=null}initialize(){this._intersector=new C({view:this.view}),this._handles.add(p((()=>this.state),(e=>{e===R.Created&&this.finishToolCreation()}),h)),this._observerManipulator=this._createObserverManipulator(),this._handles.add([p((()=>({...this.configuration.observer})),(()=>this._updateObserverManipulatorStyle()),d),p((()=>this.analysisViewData.elevationAlignedObserver),(e=>this._onObserverLocationChange(e)),h),p((()=>({...this.configuration.laserLine})),(()=>this._createVisualElements()),h),p((()=>this._laserLineRendererDependencies()),(e=>this._updateLaserLineRenderer(e))),this._connectComputations()])}destroy(){this._handles=o(this._handles),this._manipulatorHandles=o(this._manipulatorHandles),this._analysisHandles=o(this._analysisHandles),this._observerManipulator=null,this._clearCursorTracker(),this._removeVisualElements(),this._intersector=null,this._set(\"analysis\",null)}get state(){return this.active?l(this._grabbedManipulator)?R.Created:R.Creating:l(this.analysis.observer)&&l(this.analysis.observer.position)?R.Created:R.Ready}get cursor(){return this.active&&this._showTracker?\"crosshair\":null}get updating(){return!!l(this.analysisViewData)&&this.analysisViewData.updating}get _showTracker(){return this.active&&\"mouse\"===this._latestPointerMovePointerType}get _shouldRenderTracker(){return this._showTracker&&l(this.analysis.observer)&&l(this.analysis.observer.position)&&!this.hasFocusedManipulators}continue(){this.view.activeTool=this}stop(){this.view.activeTool=null}onEditableChange(){this.analysisViewData.editable=this.internallyEditable}onInputEvent(e){switch(e.type){case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"key-down\":this._keyDownHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e)}}onInputEventAfter(e){if(\"immediate-click\"===e.type)this._clickHandler(e)}onShow(){}onHide(){this._grabbedManipulator=null}onDeactivate(){this._clearCursorTracker()}_connectComputations(){return g((()=>this.analysisViewData.computations),\"change\",(e=>this._onComputationsCollectionChange(e)),{onListenerAdd:e=>{for(const t of e)this._connectComputation(t)},onListenerRemove:e=>{for(const t of e)this._disconnectComputation(t)},sync:!0})}_onComputationsCollectionChange({added:e,removed:t}){for(const i of t)this._disconnectComputation(i);for(const i of e)this._connectComputation(i)}_connectComputation(e){if(this.destroyed)return void P.warn(\"Attempting to connect an analysis to a destroyed LineOfSight tool. Ignoring.\");const t=this._analysisHandles;if(t.has(e))return;const i=this._createTargetManipulator(e.target);c(this._targetTrackerManipulator)&&i.metadata.target===this.analysisViewData.cursorTarget&&(this._targetTrackerManipulator=i,this._targetTrackerManipulator.available=!1,this._targetTrackerManipulator.interactive=!1,this._updateLaserLineRenderer()),t.add([p((()=>this._getLineOfSightManipulatorStateDependencies(e)),(()=>this._updateManipulatorState(i,e)),h),p((()=>e.elevationAlignedTargetLocation),(e=>this._onTargetLocationChange(e,i)),h)],e)}_disconnectComputation(e){if(this.destroyed)return void P.warn(\"Attempting to disconnect an analysis from a destroyed LineOfSight tool. Ignoring.\");this._analysisHandles.remove(e);const t=this._getTargetManipulator(e.target);l(t)&&(this.manipulators.remove(t),this._manipulatorHandles.remove(t),l(this._targetTrackerManipulator)&&this._targetTrackerManipulator===t&&(this._targetTrackerManipulator=null))}_clearCursorTracker(){this.analysisViewData.cursorTarget=o(this.analysisViewData.cursorTarget)}_createManipulator(e,t,i){const r=w(this.view,e);return r.metadata=i,this._manipulatorHandles.add([t(r),r.events.on(\"grab-changed\",(e=>this._manipulatorGrabChanged(r,e))),r.events.on(\"immediate-click\",(e=>this._manipulatorClick(r,e)))],r),this.manipulators.add(r),r}_createTargetManipulator(e){const t=this.configuration,i={size:t.target.size,customColor1:t.target.visibleColor,customColor2:t.target.occludedColor,customColor3:t.target.undefinedColor,visible:!0},r={target:e,type:\"target\"},a=this._createManipulator(i,(e=>this._createTargetManipulatorDragPipeline(e)),r);return l(e.position)?a.elevationAlignedLocation=e.position:a.available=!1,a}_getTargetManipulator(e){let t=null;return this.manipulators.forEach((i=>{const r=i.manipulator;c(t)&&\"target\"===r.metadata.type&&r.metadata.target===e&&(t=r)})),t}_createObserverManipulator(){const e=this.configuration,t={size:e.observer.size,color:e.observer.color,visible:!0};return this._createManipulator(t,(e=>this._createObserverManipulatorDragPipeline(e)),{type:\"observer\",intersection:null})}_updateObserverManipulatorStyle(){const e=this._observerManipulator,t=this.configuration.observer,i={size:t.size,color:t.color,visible:e.available};e.renderObjects=L(i)}_screenToIntersection(){return e=>{const t=this._intersector.getScreenPointIntersection(e.screenEnd);return c(t)?null:{...e,intersection:t}}}_createTargetManipulatorDragPipeline(e){return S(e,((t,i,r)=>{i.next(this._screenToIntersection()).next(this._updateTargetDragStep(e)).next((()=>this._updateLaserLineRenderer())),r.next(this._cancelTargetDragStep(e.metadata.target)).next((()=>this._updateLaserLineRenderer()))}))}_createObserverManipulatorDragPipeline(e){return S(e,((e,t,i)=>{t.next(this._screenToIntersection()).next(this._updateObserverDragStep()).next((()=>this._updateLaserLineRenderer())),i.next(this._cancelObserverDragStep()).next((()=>this._updateLaserLineRenderer()))}))}_updateObserverDragStep(){return e=>(l(e.intersection.point)?(c(this.analysis.observer)&&(this.analysis.observer=new i),this._updateFromIntersection(this.analysis.observer,e.intersection)):this.analysis.observer=null,e)}_cancelObserverDragStep(){const e=l(this.analysis.observer)&&l(this.analysis.observer.position)?this.analysis.observer.clone():null;return t=>(this.analysis.observer=e,t)}_updateTargetDragStep(e){return t=>{this._updateFromIntersection(e.metadata.target,t.intersection);const i=t.intersection.point;return l(i)&&(e.elevationAlignedLocation=i),t}}_cancelTargetDragStep(e){const t=u(e.position,(e=>e.clone()));return i=>(e.position=t,i)}_manipulatorGrabChanged(e,t){switch(t.action){case\"start\":this._grabbedManipulator=e;break;case\"end\":this._grabbedManipulator===e&&(this._grabbedManipulator=null)}}_updateManipulatorState(e,t){const{isValid:i,isTargetVisible:r}=t.computationResult;e.state=i?r?D.Custom1:D.Custom2:D.Custom3}_getLineOfSightManipulatorStateDependencies(e){const{isValid:t,isTargetVisible:i}=e.computationResult;return{isValid:t,isTargetVisible:i}}_laserLineRendererDependencies(){return{laserlineVisualElement:this._laserlineVisualElement,grabbedManipulator:this._grabbedManipulator,shouldRenderTracker:this._shouldRenderTracker,observerPosition:l(this.analysis.observer)?this.analysis.observer.position:null,visible:this.visible}}_updateLaserLineRenderer(e=this._laserLineRendererDependencies()){const{laserlineVisualElement:t,grabbedManipulator:i,shouldRenderTracker:r,observerPosition:a,visible:n}=e;if(c(t))return;const s=l(i)?i:r&&l(a)?this._targetTrackerManipulator:null;this.configuration.laserLine.enabled&&l(s)&&n?(t.visible=!0,t.heightManifoldTarget=s.renderLocation,s!==this._observerManipulator?t.lineVerticalPlaneSegment=b(this._observerManipulator.renderLocation,s.renderLocation,A):t.lineVerticalPlaneSegment=null):(t.visible=!1,t.heightManifoldTarget=null,t.lineVerticalPlaneSegment=null)}_createVisualElements(){const e=this.configuration.laserLine;this._removeVisualElements(),this._laserlineVisualElement=new k({view:this.view,attached:!0,visible:this.visible,style:{glowColor:t.toUnitRGB(e.glowColor),glowWidth:e.glowWidth,innerColor:t.toUnitRGB(e.innerColor),innerWidth:e.innerWidth,globalAlpha:e.globalAlpha}})}_removeVisualElements(){l(this._laserlineVisualElement)&&(this._laserlineVisualElement.destroy(),this._laserlineVisualElement=null)}_onObserverLocationChange(e){c(e)?this._observerManipulator.available=!1:(this._observerManipulator.metadata.intersection=null,this._observerManipulator.available=!0,this._observerManipulator.elevationAlignedLocation=e)}_onTargetLocationChange(e,t){l(e)?(t.elevationAlignedLocation=e,t!==this._targetTrackerManipulator&&(t.available=!0)):t.available=!1}_addPointFromClickEvent(e){const t=this._intersector.getScreenPointIntersection(e);if(!c(t)&&!c(t.point))if(l(this.analysis.observer)&&l(this.analysis.observer.position)){this._clearCursorTracker();const e=new r;this._updateFromIntersection(e,t),this.analysis.targets.add(e)}else{const e=new i;this._updateFromIntersection(e,t),this.analysis.observer=e}}_clickHandler(e){this.active&&e.button!==I.Right&&(this._addPointFromClickEvent(E(e)),e.stopPropagation())}_doubleClickHandler(e){this.active&&e.button!==I.Right&&(this.stop(),e.stopPropagation())}_keyDownHandler(e){this.active&&\"Escape\"===e.key&&(this.stop(),e.stopPropagation())}_pointerMoveHandler(e){if(this.hasFocusedManipulators)return;if(this._latestPointerMovePointerType=e.pointerType,this._updateLaserLineRenderer(),!this._showTracker||c(this.analysis.observer)||c(this.analysis.observer.position))return;const t=E(e),i=this._intersector.getScreenPointIntersection(t);l(i)&&l(i.point)&&(c(this.analysisViewData.cursorTarget)&&(this.analysisViewData.cursorTarget=new r),this._updateFromIntersection(this.analysisViewData.cursorTarget,i),this._updateLaserLineRenderer())}_updateFromIntersection(e,t){if(c(t.point))return e.position=null,e.elevationInfo=null,void(e.feature=null);switch(t.type){case V.OBJECT:if(l(t.graphic)){const i=t.graphic,r=y(i);\"on-the-ground\"===r.mode&&(r.mode=\"relative-to-ground\",r.offset=0),e.elevationInfo=new T(r),e.feature=i}else e.elevationInfo=null,e.feature=null;break;case V.TERRAIN:case V.I3S:e.elevationInfo=new T({mode:\"on-the-ground\"}),e.feature=null;break;default:e.elevationInfo=null,e.feature=null}const i=t.point.clone();i.z=f(this.view,i,{mode:\"absolute-height\",offset:0},e.elevationInfo),e.position=i}_manipulatorClick(e,t){if(\"observer\"===e.metadata.type||e.grabbing||e.dragging||t.button!==I.Right||this.analysis.targets.length<=1)return;const{target:i}=e.metadata;this.analysis.targets.remove(i),t.stopPropagation()}get testInfo(){return{laserLineVisualElement:this._laserlineVisualElement}}};e([m({constructOnly:!0})],H.prototype,\"view\",void 0),e([m({constructOnly:!0})],H.prototype,\"analysis\",void 0),e([m({readOnly:!0})],H.prototype,\"state\",null),e([m({readOnly:!0})],H.prototype,\"cursor\",null),e([m({readOnly:!0})],H.prototype,\"preferManipulatorCursor\",void 0),e([m()],H.prototype,\"removeIncompleteOnCancel\",void 0),e([m({readOnly:!0})],H.prototype,\"updating\",null),e([m({type:M})],H.prototype,\"configuration\",void 0),e([m({constructOnly:!0})],H.prototype,\"analysisViewData\",void 0),e([m({readOnly:!0})],H.prototype,\"_showTracker\",null),e([m()],H.prototype,\"_latestPointerMovePointerType\",void 0),e([m()],H.prototype,\"_shouldRenderTracker\",null),e([m()],H.prototype,\"_laserlineVisualElement\",void 0),e([m()],H.prototype,\"_grabbedManipulator\",void 0),H=e([_(\"esri.views.3d.interactive.analysisTools.lineOfSight.LineOfSightTool\")],H);const A=v();export{j as LineOfSightTargetCollection,H as LineOfSightTool};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}