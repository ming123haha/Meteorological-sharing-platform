{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport _extends from 'babel-runtime/helpers/extends';\nimport _typeof from 'babel-runtime/helpers/typeof';\nimport { format, complementError, asyncMap, warning, deepMerge } from './util';\nimport validators from './validator/';\nimport { messages as defaultMessages, newMessages } from './messages';\n/**\r\n *  Encapsulates a validation schema.\r\n *\r\n *  @param descriptor An object declaring validation rules\r\n *  for this schema.\r\n */\n\nfunction Schema(descriptor) {\n  this.rules = null;\n  this._messages = defaultMessages;\n  this.define(descriptor);\n}\n\nSchema.prototype = {\n  messages: function messages(_messages) {\n    if (_messages) {\n      this._messages = deepMerge(newMessages(), _messages);\n    }\n\n    return this._messages;\n  },\n  define: function define(rules) {\n    if (!rules) {\n      throw new Error('Cannot configure a schema with no rules');\n    }\n\n    if ((typeof rules === 'undefined' ? 'undefined' : _typeof(rules)) !== 'object' || Array.isArray(rules)) {\n      throw new Error('Rules must be an object');\n    }\n\n    this.rules = {};\n    var z = void 0;\n    var item = void 0;\n\n    for (z in rules) {\n      if (rules.hasOwnProperty(z)) {\n        item = rules[z];\n        this.rules[z] = Array.isArray(item) ? item : [item];\n      }\n    }\n  },\n  validate: function validate(source_) {\n    var _this = this;\n\n    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var oc = arguments[2];\n    var source = source_;\n    var options = o;\n    var callback = oc;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    if (!this.rules || Object.keys(this.rules).length === 0) {\n      if (callback) {\n        callback();\n      }\n\n      return;\n    }\n\n    function complete(results) {\n      var i = void 0;\n      var field = void 0;\n      var errors = [];\n      var fields = {};\n\n      function add(e) {\n        if (Array.isArray(e)) {\n          errors = errors.concat.apply(errors, e);\n        } else {\n          errors.push(e);\n        }\n      }\n\n      for (i = 0; i < results.length; i++) {\n        add(results[i]);\n      }\n\n      if (!errors.length) {\n        errors = null;\n        fields = null;\n      } else {\n        for (i = 0; i < errors.length; i++) {\n          field = errors[i].field;\n          fields[field] = fields[field] || [];\n          fields[field].push(errors[i]);\n        }\n      }\n\n      callback(errors, fields);\n    }\n\n    if (options.messages) {\n      var messages = this.messages();\n\n      if (messages === defaultMessages) {\n        messages = newMessages();\n      }\n\n      deepMerge(messages, options.messages);\n      options.messages = messages;\n    } else {\n      options.messages = this.messages();\n    }\n\n    var arr = void 0;\n    var value = void 0;\n    var series = {};\n    var keys = options.keys || Object.keys(this.rules);\n    keys.forEach(function (z) {\n      arr = _this.rules[z];\n      value = source[z];\n      arr.forEach(function (r) {\n        var rule = r;\n\n        if (typeof rule.transform === 'function') {\n          if (source === source_) {\n            source = _extends({}, source);\n          }\n\n          value = source[z] = rule.transform(value);\n        }\n\n        if (typeof rule === 'function') {\n          rule = {\n            validator: rule\n          };\n        } else {\n          rule = _extends({}, rule);\n        }\n\n        rule.validator = _this.getValidationMethod(rule);\n        rule.field = z;\n        rule.fullField = rule.fullField || z;\n        rule.type = _this.getType(rule);\n\n        if (!rule.validator) {\n          return;\n        }\n\n        series[z] = series[z] || [];\n        series[z].push({\n          rule: rule,\n          value: value,\n          source: source,\n          field: z\n        });\n      });\n    });\n    var errorFields = {};\n    asyncMap(series, options, function (data, doIt) {\n      var rule = data.rule;\n      var deep = (rule.type === 'object' || rule.type === 'array') && (_typeof(rule.fields) === 'object' || _typeof(rule.defaultField) === 'object');\n      deep = deep && (rule.required || !rule.required && data.value);\n      rule.field = data.field;\n\n      function addFullfield(key, schema) {\n        return _extends({}, schema, {\n          fullField: rule.fullField + '.' + key\n        });\n      }\n\n      function cb() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var errors = e;\n\n        if (!Array.isArray(errors)) {\n          errors = [errors];\n        }\n\n        if (errors.length) {\n          warning('async-validator:', errors);\n        }\n\n        if (errors.length && rule.message) {\n          errors = [].concat(rule.message);\n        }\n\n        errors = errors.map(complementError(rule));\n\n        if (options.first && errors.length) {\n          errorFields[rule.field] = 1;\n          return doIt(errors);\n        }\n\n        if (!deep) {\n          doIt(errors);\n        } else {\n          // if rule is required but the target object\n          // does not exist fail at the rule level and don't\n          // go deeper\n          if (rule.required && !data.value) {\n            if (rule.message) {\n              errors = [].concat(rule.message).map(complementError(rule));\n            } else if (options.error) {\n              errors = [options.error(rule, format(options.messages.required, rule.field))];\n            } else {\n              errors = [];\n            }\n\n            return doIt(errors);\n          }\n\n          var fieldsSchema = {};\n\n          if (rule.defaultField) {\n            for (var k in data.value) {\n              if (data.value.hasOwnProperty(k)) {\n                fieldsSchema[k] = rule.defaultField;\n              }\n            }\n          }\n\n          fieldsSchema = _extends({}, fieldsSchema, data.rule.fields);\n\n          for (var f in fieldsSchema) {\n            if (fieldsSchema.hasOwnProperty(f)) {\n              var fieldSchema = Array.isArray(fieldsSchema[f]) ? fieldsSchema[f] : [fieldsSchema[f]];\n              fieldsSchema[f] = fieldSchema.map(addFullfield.bind(null, f));\n            }\n          }\n\n          var schema = new Schema(fieldsSchema);\n          schema.messages(options.messages);\n\n          if (data.rule.options) {\n            data.rule.options.messages = options.messages;\n            data.rule.options.error = options.error;\n          }\n\n          schema.validate(data.value, data.rule.options || options, function (errs) {\n            doIt(errs && errs.length ? errors.concat(errs) : errs);\n          });\n        }\n      }\n\n      var res = rule.validator(rule, data.value, cb, data.source, options);\n\n      if (res && res.then) {\n        res.then(function () {\n          return cb();\n        }, function (e) {\n          return cb(e);\n        });\n      }\n    }, function (results) {\n      complete(results);\n    });\n  },\n  getType: function getType(rule) {\n    if (rule.type === undefined && rule.pattern instanceof RegExp) {\n      rule.type = 'pattern';\n    }\n\n    if (typeof rule.validator !== 'function' && rule.type && !validators.hasOwnProperty(rule.type)) {\n      throw new Error(format('Unknown rule type %s', rule.type));\n    }\n\n    return rule.type || 'string';\n  },\n  getValidationMethod: function getValidationMethod(rule) {\n    if (typeof rule.validator === 'function') {\n      return rule.validator;\n    }\n\n    var keys = Object.keys(rule);\n    var messageIndex = keys.indexOf('message');\n\n    if (messageIndex !== -1) {\n      keys.splice(messageIndex, 1);\n    }\n\n    if (keys.length === 1 && keys[0] === 'required') {\n      return validators.required;\n    }\n\n    return validators[this.getType(rule)] || false;\n  }\n};\n\nSchema.register = function register(type, validator) {\n  if (typeof validator !== 'function') {\n    throw new Error('Cannot register a validator by type, validator is not a function');\n  }\n\n  validators[type] = validator;\n};\n\nSchema.messages = defaultMessages;\nexport default Schema;","map":{"version":3,"names":["_extends","_typeof","format","complementError","asyncMap","warning","deepMerge","validators","messages","defaultMessages","newMessages","Schema","descriptor","rules","_messages","define","prototype","Error","Array","isArray","z","item","hasOwnProperty","validate","source_","_this","o","arguments","length","undefined","oc","source","options","callback","Object","keys","complete","results","i","field","errors","fields","add","e","concat","apply","push","arr","value","series","forEach","r","rule","transform","validator","getValidationMethod","fullField","type","getType","errorFields","data","doIt","deep","defaultField","required","addFullfield","key","schema","cb","message","map","first","error","fieldsSchema","k","f","fieldSchema","bind","errs","res","then","pattern","RegExp","messageIndex","indexOf","splice","register"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/async-validator/es/index.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\r\nimport _typeof from 'babel-runtime/helpers/typeof';\r\nimport { format, complementError, asyncMap, warning, deepMerge } from './util';\r\nimport validators from './validator/';\r\nimport { messages as defaultMessages, newMessages } from './messages';\r\n\r\n/**\r\n *  Encapsulates a validation schema.\r\n *\r\n *  @param descriptor An object declaring validation rules\r\n *  for this schema.\r\n */\r\nfunction Schema(descriptor) {\r\n  this.rules = null;\r\n  this._messages = defaultMessages;\r\n  this.define(descriptor);\r\n}\r\n\r\nSchema.prototype = {\r\n  messages: function messages(_messages) {\r\n    if (_messages) {\r\n      this._messages = deepMerge(newMessages(), _messages);\r\n    }\r\n    return this._messages;\r\n  },\r\n  define: function define(rules) {\r\n    if (!rules) {\r\n      throw new Error('Cannot configure a schema with no rules');\r\n    }\r\n    if ((typeof rules === 'undefined' ? 'undefined' : _typeof(rules)) !== 'object' || Array.isArray(rules)) {\r\n      throw new Error('Rules must be an object');\r\n    }\r\n    this.rules = {};\r\n    var z = void 0;\r\n    var item = void 0;\r\n    for (z in rules) {\r\n      if (rules.hasOwnProperty(z)) {\r\n        item = rules[z];\r\n        this.rules[z] = Array.isArray(item) ? item : [item];\r\n      }\r\n    }\r\n  },\r\n  validate: function validate(source_) {\r\n    var _this = this;\r\n\r\n    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n    var oc = arguments[2];\r\n\r\n    var source = source_;\r\n    var options = o;\r\n    var callback = oc;\r\n    if (typeof options === 'function') {\r\n      callback = options;\r\n      options = {};\r\n    }\r\n    if (!this.rules || Object.keys(this.rules).length === 0) {\r\n      if (callback) {\r\n        callback();\r\n      }\r\n      return;\r\n    }\r\n    function complete(results) {\r\n      var i = void 0;\r\n      var field = void 0;\r\n      var errors = [];\r\n      var fields = {};\r\n\r\n      function add(e) {\r\n        if (Array.isArray(e)) {\r\n          errors = errors.concat.apply(errors, e);\r\n        } else {\r\n          errors.push(e);\r\n        }\r\n      }\r\n\r\n      for (i = 0; i < results.length; i++) {\r\n        add(results[i]);\r\n      }\r\n      if (!errors.length) {\r\n        errors = null;\r\n        fields = null;\r\n      } else {\r\n        for (i = 0; i < errors.length; i++) {\r\n          field = errors[i].field;\r\n          fields[field] = fields[field] || [];\r\n          fields[field].push(errors[i]);\r\n        }\r\n      }\r\n      callback(errors, fields);\r\n    }\r\n\r\n    if (options.messages) {\r\n      var messages = this.messages();\r\n      if (messages === defaultMessages) {\r\n        messages = newMessages();\r\n      }\r\n      deepMerge(messages, options.messages);\r\n      options.messages = messages;\r\n    } else {\r\n      options.messages = this.messages();\r\n    }\r\n    var arr = void 0;\r\n    var value = void 0;\r\n    var series = {};\r\n    var keys = options.keys || Object.keys(this.rules);\r\n    keys.forEach(function (z) {\r\n      arr = _this.rules[z];\r\n      value = source[z];\r\n      arr.forEach(function (r) {\r\n        var rule = r;\r\n        if (typeof rule.transform === 'function') {\r\n          if (source === source_) {\r\n            source = _extends({}, source);\r\n          }\r\n          value = source[z] = rule.transform(value);\r\n        }\r\n        if (typeof rule === 'function') {\r\n          rule = {\r\n            validator: rule\r\n          };\r\n        } else {\r\n          rule = _extends({}, rule);\r\n        }\r\n        rule.validator = _this.getValidationMethod(rule);\r\n        rule.field = z;\r\n        rule.fullField = rule.fullField || z;\r\n        rule.type = _this.getType(rule);\r\n        if (!rule.validator) {\r\n          return;\r\n        }\r\n        series[z] = series[z] || [];\r\n        series[z].push({\r\n          rule: rule,\r\n          value: value,\r\n          source: source,\r\n          field: z\r\n        });\r\n      });\r\n    });\r\n    var errorFields = {};\r\n    asyncMap(series, options, function (data, doIt) {\r\n      var rule = data.rule;\r\n      var deep = (rule.type === 'object' || rule.type === 'array') && (_typeof(rule.fields) === 'object' || _typeof(rule.defaultField) === 'object');\r\n      deep = deep && (rule.required || !rule.required && data.value);\r\n      rule.field = data.field;\r\n      function addFullfield(key, schema) {\r\n        return _extends({}, schema, {\r\n          fullField: rule.fullField + '.' + key\r\n        });\r\n      }\r\n\r\n      function cb() {\r\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\r\n\r\n        var errors = e;\r\n        if (!Array.isArray(errors)) {\r\n          errors = [errors];\r\n        }\r\n        if (errors.length) {\r\n          warning('async-validator:', errors);\r\n        }\r\n        if (errors.length && rule.message) {\r\n          errors = [].concat(rule.message);\r\n        }\r\n\r\n        errors = errors.map(complementError(rule));\r\n\r\n        if (options.first && errors.length) {\r\n          errorFields[rule.field] = 1;\r\n          return doIt(errors);\r\n        }\r\n        if (!deep) {\r\n          doIt(errors);\r\n        } else {\r\n          // if rule is required but the target object\r\n          // does not exist fail at the rule level and don't\r\n          // go deeper\r\n          if (rule.required && !data.value) {\r\n            if (rule.message) {\r\n              errors = [].concat(rule.message).map(complementError(rule));\r\n            } else if (options.error) {\r\n              errors = [options.error(rule, format(options.messages.required, rule.field))];\r\n            } else {\r\n              errors = [];\r\n            }\r\n            return doIt(errors);\r\n          }\r\n\r\n          var fieldsSchema = {};\r\n          if (rule.defaultField) {\r\n            for (var k in data.value) {\r\n              if (data.value.hasOwnProperty(k)) {\r\n                fieldsSchema[k] = rule.defaultField;\r\n              }\r\n            }\r\n          }\r\n          fieldsSchema = _extends({}, fieldsSchema, data.rule.fields);\r\n          for (var f in fieldsSchema) {\r\n            if (fieldsSchema.hasOwnProperty(f)) {\r\n              var fieldSchema = Array.isArray(fieldsSchema[f]) ? fieldsSchema[f] : [fieldsSchema[f]];\r\n              fieldsSchema[f] = fieldSchema.map(addFullfield.bind(null, f));\r\n            }\r\n          }\r\n          var schema = new Schema(fieldsSchema);\r\n          schema.messages(options.messages);\r\n          if (data.rule.options) {\r\n            data.rule.options.messages = options.messages;\r\n            data.rule.options.error = options.error;\r\n          }\r\n          schema.validate(data.value, data.rule.options || options, function (errs) {\r\n            doIt(errs && errs.length ? errors.concat(errs) : errs);\r\n          });\r\n        }\r\n      }\r\n\r\n      var res = rule.validator(rule, data.value, cb, data.source, options);\r\n      if (res && res.then) {\r\n        res.then(function () {\r\n          return cb();\r\n        }, function (e) {\r\n          return cb(e);\r\n        });\r\n      }\r\n    }, function (results) {\r\n      complete(results);\r\n    });\r\n  },\r\n  getType: function getType(rule) {\r\n    if (rule.type === undefined && rule.pattern instanceof RegExp) {\r\n      rule.type = 'pattern';\r\n    }\r\n    if (typeof rule.validator !== 'function' && rule.type && !validators.hasOwnProperty(rule.type)) {\r\n      throw new Error(format('Unknown rule type %s', rule.type));\r\n    }\r\n    return rule.type || 'string';\r\n  },\r\n  getValidationMethod: function getValidationMethod(rule) {\r\n    if (typeof rule.validator === 'function') {\r\n      return rule.validator;\r\n    }\r\n    var keys = Object.keys(rule);\r\n    var messageIndex = keys.indexOf('message');\r\n    if (messageIndex !== -1) {\r\n      keys.splice(messageIndex, 1);\r\n    }\r\n    if (keys.length === 1 && keys[0] === 'required') {\r\n      return validators.required;\r\n    }\r\n    return validators[this.getType(rule)] || false;\r\n  }\r\n};\r\n\r\nSchema.register = function register(type, validator) {\r\n  if (typeof validator !== 'function') {\r\n    throw new Error('Cannot register a validator by type, validator is not a function');\r\n  }\r\n  validators[type] = validator;\r\n};\r\n\r\nSchema.messages = defaultMessages;\r\n\r\nexport default Schema;"],"mappings":"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"},"metadata":{},"sourceType":"module"}