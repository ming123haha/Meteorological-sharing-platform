{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport i from \"../../../core/Handles.js\";\nimport s from \"../../../core/has.js\";\nimport r from \"../../../core/Logger.js\";\nimport { isNone as a, isSome as d } from \"../../../core/maybe.js\";\nimport o from \"../../../core/PooledArray.js\";\nimport { EsriPromiseMixin as n } from \"../../../core/Promise.js\";\nimport { isAbortError as h } from \"../../../core/promiseUtils.js\";\nimport { watch as l, initial as u, sync as _ } from \"../../../core/reactiveUtils.js\";\nimport { property as c } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as p } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { projectBoundingRect as g } from \"../../../geometry/projection.js\";\nimport { create as m, intersectsSphere as y } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { makeDehydratedPoint as x } from \"../dehydratedFeatures.js\";\nimport { PromiseQueue as f } from \"../../support/PromiseQueue.js\";\nimport { viewingModeFromString as b } from \"../../../views/ViewingMode.js\";\nimport { addTask as N } from \"../../../views/3d/layers/i3s/I3SFrameTask.js\";\nimport { I3SIndex as v } from \"../../../views/3d/layers/i3s/I3SIndex.js\";\nimport w from \"../../../views/3d/layers/i3s/I3SLodHandling.js\";\nimport { NodeState as C, CacheState as D } from \"../../../views/3d/layers/i3s/I3SNode.js\";\nimport L from \"../../../views/3d/layers/i3s/I3SNodeLoader.js\";\nimport { I3SStreamDataController as S } from \"../../../views/3d/layers/i3s/I3SStreamDataController.js\";\nimport { getVertexCrs as I, getIndexCrs as V, findIntersectingNodes as A } from \"../../../views/3d/layers/i3s/I3SUtil.js\";\nimport F from \"../../../views/3d/layers/i3s/I3SViewportQueries.js\";\nimport { FadeDirection as O } from \"../../../views/3d/layers/support/I3SLayerView.js\";\nimport { toBoundingRect as P } from \"../../../views/3d/support/extentUtils.js\";\nimport { ClientType as U, maxDownloadSlots as M } from \"../../../views/3d/support/index.js\";\nimport { extractSafeScaleBounds as q, scaleBoundsPredicate as G } from \"../../../views/support/layerViewUtils.js\";\nimport { noBudget as j } from \"../../../views/support/Scheduler.js\";\nconst Q = r.getLogger(\"esri.layers.graphics.controllers.I3SOnDemandController\"),\n      T = 100,\n      E = 2,\n      H = 1e4,\n      B = 1e-4,\n      k = 1.2,\n      R = 500,\n      z = 1.5;\nlet K = class extends n(t) {\n  constructor(e) {\n    super(e), this.screenSizeFactor = 0, this.featureTarget = 5e4, this.fixedFeatureTarget = !1, this.updating = !0, this.updatingProgress = 1, this.leavesReached = !1, this.scaleVisibilityEnabled = !0, this._featureLOD = 1, this._stableFeatureLOD = !1, this._isIdle = !1, this._cameraDirty = !0, this._invisibleDirty = !1, this._newLoadingNodes = new o({\n      deallocator: null\n    }), this._loadedNodeScales = new Map(), this._modificationsNodeFilteringArray = new o(), this._downloadingCount = 0, this._loadingNodes = new Map(), this._updatingNodes = new Map(), this._progressMaxNumNodes = 1, this._requiredAttributes = new Array(), this._requiredAttributesDirty = !0, this._updatesDisabled = !1, this.disableIDBCache = !1, this._disableMemCache = !1, this._restartNodeLoading = !1, this._fields = null, this._attributeStorageInfo = null, this._handles = new i(), this._idleQueue = new f(), this._elevationUpdateNodes = new o({\n      deallocator: null\n    }), this._errorCount = 0;\n  }\n\n  get isMeshPyramid() {\n    return \"mesh-pyramids\" === this.layer.profile || \"MeshPyramid\" === this.layer.store.lodType;\n  }\n\n  get isGraphics3D() {\n    return \"points\" === this.layer.profile;\n  }\n\n  get useMaximumNumberOfFeatures() {\n    return !this.isMeshPyramid && (a(this.layer.priority) || \"High\" === this.layer.priority);\n  }\n\n  get indexStreamController() {\n    const e = this.layerView.view.resourceController.createStreamDataRequester(U.I3S_INDEX);\n    return new S(e, this.layer.apiKey);\n  }\n\n  get dataStreamController() {\n    const e = this.layerView.view.resourceController.createStreamDataRequester(U.I3S_DATA);\n    return new S(e, this.layer.apiKey);\n  }\n\n  get crsVertex() {\n    return I(this.layer);\n  }\n\n  get crsIndex() {\n    return V(this.layer);\n  }\n\n  get layer() {\n    return this.layerView.i3slayer;\n  }\n\n  get rootNodeVisible() {\n    if (d(this._index)) {\n      const e = this._index.rootNode;\n      if (d(e)) return this._updateViewData(), this._index.isNodeVisible(e.index);\n    }\n\n    return !0;\n  }\n\n  get index() {\n    return this._index;\n  }\n\n  initialize() {\n    const {\n      layerView: e,\n      layer: t\n    } = this;\n    this._disableMemCache = !e.loadCachedGPUData || !e.addCachedGPUData, this._lodHandling = new w(e), this._defaultGeometrySchema = t.store.defaultGeometrySchema, this.disableIDBCache = s(\"disable-feature:idb-cache\"), \"fields\" in t && (this._fields = t.fields, this._attributeStorageInfo = t.attributeStorageInfo), this.addResolvingPromise(Promise.all([t.indexInfo, t.when(), e.when()]).then(([i]) => {\n      if (this.destroyed || !e || e.destroyed) return;\n      const {\n        view: s\n      } = e,\n            {\n        resourceController: r\n      } = s;\n      this._setClippingArea(s.clippingArea), this.own([l(() => s?.pointsOfInterest?.focus?.renderLocation, e => this._pointOfInterestChanged(e), u), l(() => r.memoryController.memoryFactor, () => this._setCameraDirty(), _), l(() => e.suspended, e => {\n        const t = e ? () => this._updateViewData() : () => this._updateIdleState(!0),\n              i = e ? () => {} : () => this._updateIdleState(!1);\n        this._idleStateCallbacks ? (e && this.cancelNodeLoading(), this.restartNodeLoading(), this._idleStateCallbacks.idleBegin = t, this._idleStateCallbacks.idleEnd = i) : this._idleStateCallbacks = r.scheduler.registerIdleStateCallbacks(t, i);\n      }, u), N(e.view.resourceController.scheduler, {\n        update: (e, t) => this._frame(e, t),\n        needsUpdate: () => this.updating\n      }), l(() => e.uncompressedTextureDownsamplingEnabled, () => this.restartNodeLoading()), l(() => [this.featureTarget, this.fixedFeatureTarget], () => {\n        this._setCameraDirty(), this._stableFeatureLOD = !1;\n      }), l(() => s.state?.contentCamera, () => this._setCameraDirty()), l(() => t.elevationInfo, e => this._elevationInfoChanged(e)), l(() => t.effectiveScaleRange, () => this._scaleBoundsChanged()), l(() => e.lodFactor, () => this._setCameraDirty()), l(() => e.availableFields, () => this._requiredFieldsChange()), l(() => e.holeFilling, e => d(this._index) && (this._index.holeFilling = e))]), this._updateScaleHandles(), this._viewportQueries = new F(this.crsIndex, s.renderCoordsHelper, s.state.contentCamera, !s.state.fixedContentCamera || this.isGraphics3D, this._clippingArea, this.isMeshPyramid ? s.basemapTerrain : s.elevationProvider, b(s.viewingMode), this.layer.elevationInfo, {\n        progressiveLoadFactor: this._getProgressiveLoadFactor(),\n        screenspaceErrorBias: this.lod,\n        angleDependentLoD: this.lod < .5\n      }), this._index = new v(t, i, this.indexStreamController, this._viewportQueries, Q, e.holeFilling, t => e.isNodeLoaded(t), t => e.isNodeReloading(t), e => this._shouldLoadNode(e), e => this._enableFromGPUCache(e, C.Leaf), e => this._needsUpdate(e), () => !this.indexStreamController.busy, t => e.computeVisibilityObb ? e.computeVisibilityObb(t) : null, e?.computeNodeFiltering ? t => e.computeNodeFiltering(t) : void 0), this._index.updateElevationInfo(this.layer.elevationInfo, this.isMeshPyramid), this._index.imModificationsChanged(!!e.hasModifications), this._startNodeLoading();\n    })), this._tmpPoint = x(0, 0, 0, this.crsIndex);\n  }\n\n  updateNodeModificationStatus(e) {\n    const t = this._index,\n          i = this.layerView;\n    d(t) && i?.updateNodeModificationStatus && (this._modificationsNodeFilteringArray.clear(), e.forAll(e => {\n      const i = t.getNode(e);\n      d(i) && this._modificationsNodeFilteringArray.push(i);\n    }), i.updateNodeModificationStatus(this._modificationsNodeFilteringArray), this._invisibleDirty = !0);\n  }\n\n  destroy() {\n    this.cancelNodeLoading(), this._idleStateCallbacks && (this._isIdle = !1, this._idleStateCallbacks.remove(), this._idleStateCallbacks = null), this._handles.destroy(), this._nodeLoader = null, X.prune(), d($) && ($.hide(), $ = null);\n  }\n\n  _getRequiredAttributes() {\n    if (null == this._attributeStorageInfo || !this._fields || !this.layerView.availableFields) return [];\n    const e = this._attributeStorageInfo,\n          t = this._fields,\n          i = this.layer.objectIdField;\n    return this.layerView.availableFields.map(i => {\n      const s = W(e, i),\n            r = W(t, i);\n      return s >= 0 && r >= 0 ? {\n        index: s,\n        name: t[r].name,\n        field: t[r],\n        attributeStorageInfo: e[s]\n      } : null;\n    }).filter(e => null != e && e.name !== i);\n  }\n\n  _requiredFieldsChange() {\n    const e = this._getRequiredAttributes();\n\n    J(this._requiredAttributes, e) || (this._requiredAttributes = e, this._requiredAttributesDirty = !1, this.restartNodeLoading());\n  }\n\n  requestUpdate() {\n    this._requiredAttributesDirty = !0, this.restartNodeLoading();\n  }\n\n  _setClippingArea(e) {\n    const t = m();\n    P(e, t, this.layerView.view.renderSpatialReference) ? this._clippingArea = t : this._clippingArea = null;\n  }\n\n  _pointOfInterestChanged(e) {\n    d(this._viewportQueries) && (this._viewportQueries.setPointOfInterest(e), d(this._index) && (this._index.progressiveLoadPenalty = Y.distancePenalty * this._viewportQueries.distCameraToPOI(), this._index.requestUpdate()));\n  }\n\n  updateClippingArea(e) {\n    this._setClippingArea(e), d(this._viewportQueries) && d(this._index) && (this._viewportQueries.updateClippingArea(this._clippingArea), this._index.invalidateVisibilityCache()), this._setCameraDirty();\n  }\n\n  _setCameraDirty() {\n    this._cameraDirty = !0, this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating();\n  }\n\n  updateElevationChanged(e, t) {\n    const i = this._index;\n    if (a(i) || a(i.rootNode)) return null;\n    const s = this._elevationUpdateNodes;\n    return s.clear(), A(e, t, i.rootNode, this.crsIndex, i, e => s.push(e.index)), s.length && (s.forAll(e => i.updateElevationChanged(e)), this._setCameraDirty()), s;\n  }\n\n  getParentIndex(e) {\n    return d(this._index) && this._index.getParentIndex(e);\n  }\n\n  removeAllGeometryObbs() {\n    d(this._index) && this._index.removeAllGeometryObbs();\n  }\n\n  _elevationInfoChanged(e) {\n    a(this._index) || (this._index.updateElevationInfo(e, this.isMeshPyramid), this._setCameraDirty());\n  }\n\n  _updateScaleHandles() {\n    const e = \"scale-bounds\";\n    this._handles.remove(e), this.areScaleBoundsActive && this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\", e => this._scaleUpdateHandler(e)), e);\n  }\n\n  _scaleBoundsChanged() {\n    this.areScaleBoundsActive || this._loadedNodeScales.clear(), this._updateScaleHandles(), this._setCameraDirty();\n  }\n\n  _scaleUpdateHandler(e) {\n    this._updateScaleInBoundingRect(e.extent, e.spatialReference), this._setCameraDirty();\n  }\n\n  _updateScaleInBoundingRect(e, t) {\n    const i = this._index;\n    if (a(i)) return;\n    const s = i.rootNode;\n    !a(s) && g(e, t, Z, this.crsIndex) && this._loadedNodeScales.forEach((e, t) => {\n      const s = i.getNode(t);\n      d(s) && y(Z, s.mbs) && this._loadedNodeScales.set(t, this._computeScale(s));\n    });\n  }\n\n  restartNodeLoading() {\n    this._restartNodeLoading = !0, this.cancelNodeLoading(), this._evaluateUpdating();\n  }\n\n  schedule(e, t) {\n    return this._idleQueue.push(e, t);\n  }\n\n  reschedule(e, t) {\n    return this._idleQueue.unshift(e, t);\n  }\n\n  get isIntegratedMesh() {\n    return \"integrated-mesh\" === this.layer.type;\n  }\n\n  get areScaleBoundsActive() {\n    const {\n      minScale: e,\n      maxScale: t\n    } = q(this.layer);\n    return this.scaleVisibilityEnabled && (e > 0 || t > 0);\n  }\n\n  get unloadedMemoryEstimate() {\n    return a(this._index) || this.layerView.suspended ? 0 : this._index.getUnloadedMemoryEstimate() * this.lodDropFactor;\n  }\n\n  get indexDepth() {\n    return d(this._index) ? this._index.maxLevel : 0;\n  }\n\n  set disableMemCache(e) {\n    this.layerView.loadCachedGPUData && this.layerView.addCachedGPUData || (this._disableMemCache = !0), this._disableMemCache = e;\n  }\n\n  _frame(e, t) {\n    return this.layerView.suspended ? (this._updateViewData(), this._evaluateUpdating(), -1 / 0) : !this.layerView.visible || a(this._index) ? -1 / 0 : (this._processLogError(e, t), this._index.getPriority());\n  }\n\n  _processLogError(e, t) {\n    try {\n      this._process(e, t);\n    } catch (i) {\n      this._errorCount < 50 ? Q.error(\"Error during processing: \" + i) : 50 === this._errorCount && Q.error(\"Too many errors for this layer. Further errors will not be displayed.\"), this._errorCount++;\n    }\n  }\n\n  _process(e, t) {\n    this._restartNodeLoading && this._startNodeLoading(), null == this._nodeLoader || a(this._index) || (this._updateViewData(), this._invisibleDirty && this._removeInvisibleNodes(e) && (this._invisibleDirty = !1), this.isIntegratedMesh && (e.enabled = !1), e.run(() => this._processIndex(e)), this._updateFeatureLOD(), e.run(() => this._processCache(e)), this.isIntegratedMesh && (e.enabled = !0), e.run(() => this._processNodes(e, t)), this._idleQueue.runTask(e), e.run(() => this._prefetchIndex()), t.numIndexLoading += this._index.getIndexLoading(), t.numNodesLoading += this._downloadingCount, e.run(() => this._lodHandling.lodGlobalHandling(e)), this._evaluateUpdating());\n  }\n\n  _processIndex(e) {\n    if (a(this._index)) return !1;\n\n    if (this._index.dirty) {\n      this._newLoadingNodes.clear(), this._index.update(Array.from(this._loadingNodes.keys()), e, e => this.updateNodeModificationStatus(e)), this._disableMemCache || (this._newLoadingNodes.pushArray(this._index.updates.add.data, this._index.updates.add.length), this._newLoadingNodes.pushArray(this._index.updates.missing.data, this._index.updates.missing.length));\n      const t = this._index.featureEstimate.leavesReached;\n      this._index.isLoading() || t === this._get(\"leavesReached\") || this._set(\"leavesReached\", t);\n    }\n\n    return this._index.load();\n  }\n\n  _prefetchIndex() {\n    return !(a(this._index) || this._loadingNodes.size > 0 || this._index.updates.add.length > 0) && this._index.prefetch();\n  }\n\n  _updateFeatureLOD() {\n    if (!this.useMaximumNumberOfFeatures || a(this._index) || a(this._viewportQueries)) return;\n    const e = !this._index.isLoading(),\n          t = this.featureTarget * this.baseLOD,\n          i = this._index.featureEstimate;\n\n    if (i.estimate = i.estimate || t / 2, this._index.getIndexMissing() > R) {\n      if (this._featureLOD <= B) return;\n      this._featureLOD /= z, this._stableFeatureLOD = !1;\n    } else if (e && i.estimate < t) {\n      if (i.leavesReached || this._featureLOD >= H || this._stableFeatureLOD) return;\n      const e = Math.min(10, Math.max(t / i.estimate, 1.001));\n      this._featureLOD *= e;\n\n      const s = this.lod,\n            r = this._index.checkFeatureTarget(t, s);\n\n      r !== s && (this._featureLOD = r / this.baseLOD, this._stableFeatureLOD = !0);\n    } else {\n      if (!(i.estimate > t * k || e && i.estimate > t)) return;\n      if (this._featureLOD <= B) return;\n      this._featureLOD /= 1 + .25 * (i.estimate / t - 1), this._stableFeatureLOD = !1;\n    }\n\n    this._featureLOD = Math.min(H, Math.max(B, this._featureLOD)), this._viewportQueries.updateScreenSpaceErrorBias(this.lod), this._index.requestUpdate();\n  }\n\n  _processCache(e) {\n    const t = this._index;\n    if (a(t)) return !1;\n\n    for (; this._newLoadingNodes.length > 0 && !e.done;) {\n      const i = this._newLoadingNodes.pop();\n\n      for (let s = t.getParent(i); d(s) && !this.layerView.isNodeLoaded(s.index) && this._isNodeInScaleBounds(s); s = t.getParent(s.index)) if (this._enableFromGPUCache(s, C.Hole)) {\n        e.madeProgress();\n        break;\n      }\n    }\n\n    return e.hasProgressed;\n  }\n\n  _processNodes(e, t) {\n    if (a(this._index)) return !1;\n    let i = (this._isIdle ? T : E) - this._loadingNodes.size;\n    const s = this._index.updates;\n\n    for (s.cancel.forEach(this._cancelNode, this), s.cancel = []; s.remove.length > 0 && !e.done;) this.layerView.removeNode(s.remove.pop()), e.madeProgress();\n\n    for (; s.update.length > 0 && !e.done;) {\n      const t = this._index.getNode(s.update.pop());\n\n      d(t) && (this._updateLoadedNode(t), e.madeProgress());\n    }\n\n    for (; s.add.length > 0 && !e.done && i > 0;) {\n      --i;\n\n      const r = this._index.getNode(s.add.back());\n\n      if (a(r) || r.cacheState !== D.Cached && !this._hasNodeLoadToken(t)) break;\n      s.add.pop(), this._loadNode(r), e.madeProgress();\n    }\n\n    return e.hasProgressed;\n  }\n\n  _cancelAllNodes() {\n    this._loadingNodes.forEach(e => e.abort()), this._loadingNodes.clear(), this._updatingNodes.forEach(e => e.abort()), this._updatingNodes.clear();\n  }\n\n  _cancelNode(e) {\n    const t = this._loadingNodes.get(e);\n\n    t && (t.abort(), this._loadingNodes.delete(e));\n  }\n\n  _hasNodeLoadToken(e) {\n    return !(!this._isIdle && e.numNodesLoading + this._loadingNodes.size >= E) && this._downloadingCount < M && !this.dataStreamController.busy;\n  }\n\n  _evaluateUpdating() {\n    let e = !1,\n        t = 0;\n    if (this.layerView.suspended) e = this._cameraDirty, t = e ? 0 : 1;else {\n      const i = (d(this._index) ? this._index.getIndexMissing() : 0) + 3 * (d(this._index) ? this._index.updates.add.length : 0) + 2 * this._loadingNodes.size;\n      e = !!(i > 0 || this._updatingNodes.size > 0 || this._restartNodeLoading || this._cameraDirty || this._idleQueue.running || this._lodHandling && this._lodHandling.requiresLODGlobalHandling), 0 === i && (this._progressMaxNumNodes = 1), this._progressMaxNumNodes = Math.max(i, this._progressMaxNumNodes), t = 1 - i / this._progressMaxNumNodes;\n    }\n    this.updating = e, this.updatingProgress = t;\n  }\n\n  _updateViewData() {\n    if (!this._cameraDirty || a(this._index) || a(this._viewportQueries)) return;\n    const e = this.layerView.view,\n          {\n      contentCamera: t,\n      fixedContentCamera: i\n    } = e.state;\n    this.screenSizeFactor = 1 / (t.perScreenPixelRatio / 2), this._viewportQueries.updateCamera(t, !i || this.isGraphics3D), this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation), this._viewportQueries.updateScreenSpaceErrorBias(this.lod), this._index.invalidateVisibilityCache(), this._index.progressiveLoadPenalty = Y.distancePenalty * this._viewportQueries.distCameraToPOI(), this._index.requestUpdate(), this._stableFeatureLOD = !1, this._invisibleDirty = !0, this._cameraDirty = !1, this.notifyChange(\"rootNodeVisible\");\n  }\n\n  _getProgressiveLoadFactor() {\n    return this.layerView.view.resourceController.memoryController.memoryFactor < 1 ? 1 : this.layerView.progressiveLoadFactor;\n  }\n\n  get lod() {\n    return this._featureLOD * this.baseLOD;\n  }\n\n  get baseLOD() {\n    const e = this.layerView.lodFactor,\n          t = this.layerView.view.resourceController.memoryController.memoryFactor;\n    return this.fixedFeatureTarget ? 1 : (e > 0 ? e : 1) * t;\n  }\n\n  get lodDropFactor() {\n    if (this.fixedFeatureTarget) return 1;\n    const e = this.layerView.view.resourceController.memoryController;\n    return (Math.min(e.memoryFactor, .5) - e.minQuality) / (.5 - e.minQuality);\n  }\n\n  isGeometryVisible(e) {\n    return d(this._index) && this._index.isGeometryVisible(e.index);\n  }\n\n  updateVisibility(e) {\n    d(this._index) && this._index.invalidateNodeVisibilityCache(e);\n  }\n\n  invalidateGeometryVisibility(e) {\n    d(this._index) && this._index.invalidateGeometryVisibility(e);\n  }\n\n  invalidateVisibilityObbs() {\n    d(this._index) && this._index.invalidateVisibilityObbs();\n  }\n\n  modificationsChanged() {\n    d(this._index) && this._index.imModificationsChanged(!!this.layerView.hasModifications), this._invisibleDirty = !0;\n  }\n\n  _shouldLoadNode(e) {\n    return !(!this._lodHandling.shouldLoadNode(e) || this._shouldDropNode(e)) && !(a(this._index) || !this._index.isGeometryVisible(e.index)) && this._isNodeInScaleBounds(e);\n  }\n\n  _shouldDropNode(e) {\n    if (a(this._viewportQueries)) return !1;\n    const t = this.lodDropFactor;\n    if (t >= 1 || !this._lodHandling.hasNoVisibleChildren(e)) return !1;\n    return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e)) - this._viewportQueries.minDistance > (this._viewportQueries.maxDistance - this._viewportQueries.minDistance) * t;\n  }\n\n  _startNodeLoading() {\n    this._restartNodeLoading = !1;\n    const e = this._index;\n    if (this._updatesDisabled || a(e) || a(this._viewportQueries)) return;\n    this._updateViewData(), this._requiredAttributesDirty && (this._requiredAttributes = this._getRequiredAttributes(), this._requiredAttributesDirty = !1);\n    const t = {\n      textureEncodings: this.layerView.supportedTextureEncodings,\n      uncompressedTextureDownsamplingEnabled: this.layerView.uncompressedTextureDownsamplingEnabled,\n      textureUsageMask: this.layerView.rendererTextureUsage,\n      loadFeatureData: this.useMaximumNumberOfFeatures\n    };\n    this._nodeLoader = new L(this.layer, this.dataStreamController, Q, this._defaultGeometrySchema, this._requiredAttributes, t), e.requestUpdate(), this._lodHandling.startNodeLoading(e => this._isNodeInScaleBounds(e), (e, t) => this._removeNodes(e, t, ee.fadeout), e, {\n      maxLodLevel: this._viewportQueries.maxLodLevel\n    }), this._evaluateUpdating();\n  }\n\n  isNodeLoading() {\n    return null != this._nodeLoader && null != this._index;\n  }\n\n  cancelNodeLoading() {\n    this.isNodeLoading() && (this.indexStreamController.cancelAll(), this.dataStreamController.cancelAll(), this._idleQueue.cancelAll(), this._cancelAllNodes(), this._nodeLoader = null, this._evaluateUpdating());\n  }\n\n  _removeInvisibleNodes(e) {\n    const t = this._index;\n    if (a(t) || a(this._viewportQueries)) return !1;\n    X.clear(), this.layerView.getLoadedNodeIndices(X);\n    const i = 0 === this._viewportQueries.maxDistance,\n          s = i ? () => !1 : e => this._shouldDropNode(e);\n    return X.filterInPlace(e => {\n      const i = t.getNode(e);\n      return a(i) || !t.isGeometryVisible(e) || s(i) || !this._isNodeInScaleBounds(i);\n    }), X.length > 0 && this._lodHandling.setLodGlobalDirty(), this._removeNodes(X, e, ee.pop), !(i && this.lodDropFactor < 1) && (0 === X.length || (X.clear(), !1));\n  }\n\n  markNodeToRemove(e) {\n    X.push(e);\n  }\n\n  removeMarkedNodes() {\n    this._removeNodes(X, j, ee.pop);\n  }\n\n  _removeNodes(e, t, i) {\n    const s = e.length;\n\n    if (0 !== s && !t.done) {\n      for (d(this._index) && this._index.requestUpdate(); e.length > 0 && !t.done;) {\n        const s = e.pop(),\n              r = this._index;\n        i === ee.fadeout && this.layerView.nodeFadeoutEnabled && d(r) && r.isGeometryVisible(s) ? this.layerView.fadeNode(s, O.FadeOut, !0) : this.layerView.removeNode(s), t.madeProgress();\n      }\n\n      if (this._loadedNodeScales.size > 0) for (let t = e.length; t < s; t++) {\n        const i = e.data[t];\n\n        this._loadedNodeScales.delete(i);\n      }\n    }\n  }\n\n  _needsUpdate(e) {\n    if (!e.resources.hasFeatureData || this._updatingNodes.has(e.index)) return !1;\n    const t = this.layerView.getLoadedAttributes(e.index);\n    return null != t && t !== this._requiredAttributes;\n  }\n\n  _updateLoadedNode(e) {\n    const t = new AbortController();\n\n    this._updatingNodes.set(e.index, t);\n\n    (J(this.layerView.getLoadedAttributes(e.index), this._requiredAttributes) ? Promise.resolve(this.layerView.getAttributeData(e.index)) : this._nodeLoader.loadAttributes(e, this._requiredAttributes, t.signal)).then(i => this.schedule(() => this.layerView.updateAttributes(e.index, {\n      loadedAttributes: this._requiredAttributes,\n      attributeData: i\n    }, t.signal), t.signal)).catch(i => {\n      if (!h(i)) return this.layerView.updateAttributes(e.index, {\n        loadedAttributes: this._requiredAttributes,\n        attributeData: {}\n      }, t.signal);\n    }).catch(() => {}).then(() => {\n      this._updatingNodes.delete(e.index), this._evaluateUpdating();\n    }), this._evaluateUpdating();\n  }\n\n  _loadNode(e) {\n    if (this._loadingNodes.has(e.index)) return void Q.error(\"already loading node \" + e.index);\n    const t = new AbortController();\n    this._loadingNodes.set(e.index, t), this._evaluateUpdating(), this._loadAndAddNode(e, t.signal).then(i => {\n      i && d(this._index) && this._loadingNodes.get(e.index) === t && (this._loadingNodes.delete(e.index), this._index.requestUpdate());\n    }).catch(e => {\n      if (!h(e)) throw e;\n    }).finally(() => {\n      this._loadingNodes.get(e.index) === t && this._loadingNodes.delete(e.index), this._evaluateUpdating();\n    });\n  }\n\n  _loadAndAddNode(e, t) {\n    return e.cacheState === D.Uncached ? this._loadUncached(e, t).then(() => !1) : this._loadCached(e, t).then(t => !t && (e.cacheState = D.Uncached, !0)).catch(t => !h(t) && (e.cacheState = D.Uncached, !0));\n  }\n\n  _enableFromGPUCache(e, t) {\n    if (this._disableMemCache || a(this._index)) return !1;\n    if (t === C.Hole && !this._index.useNodeAsHole(e.index)) return !0;\n\n    const i = this._loadCachedGPUData(e);\n\n    return !!i && (this.layerView.addCachedGPUData(e, i, t), this._nodeAdded(), !0);\n  }\n\n  _loadCachedGPUData(e) {\n    const t = this.layerView.loadCachedGPUData(e);\n    return d(t) && d(t.attributeInfo) && J(t.attributeInfo.loadedAttributes, this._requiredAttributes) ? t : (this.layerView.deleteCachedGPUData(t), null);\n  }\n\n  _nodeAdded() {\n    d(this._index) && this._index.requestUpdate(), this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating();\n  }\n\n  updateLoadStatus(e, t) {\n    const i = this._index;\n    d(i) && i.updateChildrenLoaded(e, t ? 1 : -1);\n  }\n\n  _loadCached(e, t) {\n    if (this._enableFromGPUCache(e, C.Leaf)) return Promise.resolve(!0);\n    const i = this.layerView;\n    return !this.disableIDBCache && i.loadCachedNodeData && i.addCachedNodeData ? this.schedule(() => i.loadCachedNodeData(e, t, (t, i) => this._nodeLoader.loadTextures(e, t, i)), t).then(s => {\n      if (a(s)) return !1;\n      const r = this._requiredAttributes;\n      return this.reschedule(() => this._nodeLoader.loadAttributes(e, r, t), t).then(a => this.reschedule(() => i.addCachedNodeData(e, s, {\n        loadedAttributes: r,\n        attributeData: a\n      }, t), t)).then(() => (this._nodeAdded(), !0));\n    }) : Promise.resolve(!1);\n  }\n\n  _loadUncached(e, t) {\n    return this._downloadingCount++, this._nodeLoader.loadNodeData(e, t).catch(e => {\n      throw this._downloadingCount--, e;\n    }).then(i => (this._downloadingCount--, this.schedule(() => this.layerView.addNode(e, i, t), t))).then(() => {\n      this._nodeAdded(), e.cacheState = D.Cached;\n    }).catch(t => {\n      if (!h(t)) throw Q.error(\"#loadNodeData()\", this.layer, `Failed to load node '${e.id}'`, t), e.failed = !0, d(this._index) && this._index.requestUpdate(), t;\n    });\n  }\n\n  _updateIdleState(e) {\n    e !== this._isIdle && (this._isIdle = e, this._evaluateUpdating(), e && this._index && d(this._index) && this._index.resetFailedNodes());\n  }\n\n  _getScale(e) {\n    if (this._loadedNodeScales.has(e.index)) return this._loadedNodeScales.get(e.index);\n\n    const t = this._computeScale(e);\n\n    return this.layerView.isNodeLoaded(e.index) && this._loadedNodeScales.set(e.index, t), t;\n  }\n\n  _computeScale(e) {\n    this._tmpPoint.x = e.mbs[0], this._tmpPoint.y = e.mbs[1], this._tmpPoint.z = e.mbs[2];\n    const t = e.mbs[3];\n    return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint, t);\n  }\n\n  _isNodeInScaleBounds(e) {\n    if (!this.areScaleBoundsActive) return !0;\n\n    const t = this._getScale(e),\n          {\n      minScale: i,\n      maxScale: s\n    } = q(this.layer);\n\n    return G(t, i, s);\n  }\n\n  updateStats(e) {\n    e.index = d(this._index) ? this._index.size : 0, this.isGraphics3D && (e.detail = this._featureLOD, e.target = this.featureTarget * this.baseLOD), d(this._index) && this._index.updateStats(e);\n  }\n\n  get test() {\n    const e = this;\n    return {\n      index: this._index,\n\n      set disableUpdates(t) {\n        e._updatesDisabled = t, t ? e.cancelNodeLoading() : e.requestUpdate();\n      },\n\n      set disableIDBCache(t) {\n        e.disableIDBCache = t;\n      },\n\n      set ignoreServiceObb(t) {\n        d(e._index) && (e._index.ignoreServiceObb = t);\n      },\n\n      shouldLoadNode: t => e._shouldLoadNode(t)\n    };\n  }\n\n  notifyLODUpdate() {\n    this._lodHandling.setLodGlobalDirty(), this._evaluateUpdating(), d(this._index) && this._index.requestUpdate();\n  }\n\n  geometryFilterChanged(e) {\n    const t = this._index;\n    d(t) && t.layerFilterChanged(e), this.requestUpdate();\n  }\n\n};\ne([c({\n  readOnly: !0\n})], K.prototype, \"isMeshPyramid\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"isGraphics3D\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"useMaximumNumberOfFeatures\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"indexStreamController\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"dataStreamController\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"crsVertex\", null), e([c({\n  readOnly: !0\n})], K.prototype, \"crsIndex\", null), e([c()], K.prototype, \"screenSizeFactor\", void 0), e([c()], K.prototype, \"featureTarget\", void 0), e([c()], K.prototype, \"fixedFeatureTarget\", void 0), e([c()], K.prototype, \"layerView\", void 0), e([c()], K.prototype, \"layer\", null), e([c({})], K.prototype, \"updating\", void 0), e([c({})], K.prototype, \"updatingProgress\", void 0), e([c({\n  readOnly: !0\n})], K.prototype, \"leavesReached\", void 0), e([c({\n  constructOnly: !0\n})], K.prototype, \"scaleVisibilityEnabled\", void 0), e([c({\n  readOnly: !0,\n  dependsOn: []\n})], K.prototype, \"rootNodeVisible\", null), K = e([p(\"esri.layers.graphics.controllers.I3SOnDemandController\")], K);\nconst X = new o({\n  deallocator: null\n});\nlet $;\n\nfunction J(e, t) {\n  return d(e) && e.length === t.length && e.every(e => W(t, e.name) >= 0);\n}\n\nfunction W(e, t) {\n  const i = t.toLowerCase();\n\n  for (let s = 0; s < e.length; s++) if (e[s].name.toLowerCase() === i) return s;\n\n  return -1;\n}\n\nconst Y = {\n  factorIM: .2,\n  factor3dObject: .05,\n  distancePenalty: 10\n},\n      Z = m();\nvar ee;\n!function (e) {\n  e[e.pop = 0] = \"pop\", e[e.fadeout = 1] = \"fadeout\";\n}(ee || (ee = {}));\nconst te = K;\nexport { te as default };","map":{"version":3,"names":["_","e","t","i","s","r","isNone","a","isSome","d","o","EsriPromiseMixin","n","isAbortError","h","watch","l","initial","u","sync","property","c","subclass","p","projectBoundingRect","g","create","m","intersectsSphere","y","makeDehydratedPoint","x","PromiseQueue","f","viewingModeFromString","b","addTask","N","I3SIndex","v","w","NodeState","C","CacheState","D","L","I3SStreamDataController","S","getVertexCrs","I","getIndexCrs","V","findIntersectingNodes","A","F","FadeDirection","O","toBoundingRect","P","ClientType","U","maxDownloadSlots","M","extractSafeScaleBounds","q","scaleBoundsPredicate","G","noBudget","j","Q","getLogger","T","E","H","B","k","R","z","K","constructor","screenSizeFactor","featureTarget","fixedFeatureTarget","updating","updatingProgress","leavesReached","scaleVisibilityEnabled","_featureLOD","_stableFeatureLOD","_isIdle","_cameraDirty","_invisibleDirty","_newLoadingNodes","deallocator","_loadedNodeScales","Map","_modificationsNodeFilteringArray","_downloadingCount","_loadingNodes","_updatingNodes","_progressMaxNumNodes","_requiredAttributes","Array","_requiredAttributesDirty","_updatesDisabled","disableIDBCache","_disableMemCache","_restartNodeLoading","_fields","_attributeStorageInfo","_handles","_idleQueue","_elevationUpdateNodes","_errorCount","isMeshPyramid","layer","profile","store","lodType","isGraphics3D","useMaximumNumberOfFeatures","priority","indexStreamController","layerView","view","resourceController","createStreamDataRequester","I3S_INDEX","apiKey","dataStreamController","I3S_DATA","crsVertex","crsIndex","i3slayer","rootNodeVisible","_index","rootNode","_updateViewData","isNodeVisible","index","initialize","loadCachedGPUData","addCachedGPUData","_lodHandling","_defaultGeometrySchema","defaultGeometrySchema","fields","attributeStorageInfo","addResolvingPromise","Promise","all","indexInfo","when","then","destroyed","_setClippingArea","clippingArea","own","pointsOfInterest","focus","renderLocation","_pointOfInterestChanged","memoryController","memoryFactor","_setCameraDirty","suspended","_updateIdleState","_idleStateCallbacks","cancelNodeLoading","restartNodeLoading","idleBegin","idleEnd","scheduler","registerIdleStateCallbacks","update","_frame","needsUpdate","uncompressedTextureDownsamplingEnabled","state","contentCamera","elevationInfo","_elevationInfoChanged","effectiveScaleRange","_scaleBoundsChanged","lodFactor","availableFields","_requiredFieldsChange","holeFilling","_updateScaleHandles","_viewportQueries","renderCoordsHelper","fixedContentCamera","_clippingArea","basemapTerrain","elevationProvider","viewingMode","progressiveLoadFactor","_getProgressiveLoadFactor","screenspaceErrorBias","lod","angleDependentLoD","isNodeLoaded","isNodeReloading","_shouldLoadNode","_enableFromGPUCache","Leaf","_needsUpdate","busy","computeVisibilityObb","computeNodeFiltering","updateElevationInfo","imModificationsChanged","hasModifications","_startNodeLoading","_tmpPoint","updateNodeModificationStatus","clear","forAll","getNode","push","destroy","remove","_nodeLoader","X","prune","$","hide","_getRequiredAttributes","objectIdField","map","W","name","field","filter","J","requestUpdate","renderSpatialReference","setPointOfInterest","progressiveLoadPenalty","Y","distancePenalty","distCameraToPOI","updateClippingArea","invalidateVisibilityCache","setLodGlobalDirty","_evaluateUpdating","updateElevationChanged","length","getParentIndex","removeAllGeometryObbs","areScaleBoundsActive","add","on","_scaleUpdateHandler","_updateScaleInBoundingRect","extent","spatialReference","Z","forEach","mbs","set","_computeScale","schedule","reschedule","unshift","isIntegratedMesh","type","minScale","maxScale","unloadedMemoryEstimate","getUnloadedMemoryEstimate","lodDropFactor","indexDepth","maxLevel","disableMemCache","visible","_processLogError","getPriority","_process","error","_removeInvisibleNodes","enabled","run","_processIndex","_updateFeatureLOD","_processCache","_processNodes","runTask","_prefetchIndex","numIndexLoading","getIndexLoading","numNodesLoading","lodGlobalHandling","dirty","from","keys","pushArray","updates","data","missing","featureEstimate","isLoading","_get","_set","load","size","prefetch","baseLOD","estimate","getIndexMissing","Math","min","max","checkFeatureTarget","updateScreenSpaceErrorBias","done","pop","getParent","_isNodeInScaleBounds","Hole","madeProgress","hasProgressed","cancel","_cancelNode","removeNode","_updateLoadedNode","back","cacheState","Cached","_hasNodeLoadToken","_loadNode","_cancelAllNodes","abort","get","delete","running","requiresLODGlobalHandling","perScreenPixelRatio","updateCamera","notifyChange","minQuality","isGeometryVisible","updateVisibility","invalidateNodeVisibilityCache","invalidateGeometryVisibility","invalidateVisibilityObbs","modificationsChanged","shouldLoadNode","_shouldDropNode","hasNoVisibleChildren","abs","calcCameraDistanceToCenter","minDistance","maxDistance","textureEncodings","supportedTextureEncodings","textureUsageMask","rendererTextureUsage","loadFeatureData","startNodeLoading","_removeNodes","ee","fadeout","maxLodLevel","isNodeLoading","cancelAll","getLoadedNodeIndices","filterInPlace","markNodeToRemove","removeMarkedNodes","nodeFadeoutEnabled","fadeNode","FadeOut","resources","hasFeatureData","has","getLoadedAttributes","AbortController","resolve","getAttributeData","loadAttributes","signal","updateAttributes","loadedAttributes","attributeData","catch","_loadAndAddNode","finally","Uncached","_loadUncached","_loadCached","useNodeAsHole","_loadCachedGPUData","_nodeAdded","attributeInfo","deleteCachedGPUData","updateLoadStatus","updateChildrenLoaded","loadCachedNodeData","addCachedNodeData","loadTextures","loadNodeData","addNode","id","failed","resetFailedNodes","_getScale","getSphereScale","updateStats","detail","target","test","disableUpdates","ignoreServiceObb","notifyLODUpdate","geometryFilterChanged","layerFilterChanged","readOnly","prototype","constructOnly","dependsOn","every","toLowerCase","factorIM","factor3dObject","te","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import i from\"../../../core/Handles.js\";import s from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{isNone as a,isSome as d}from\"../../../core/maybe.js\";import o from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as n}from\"../../../core/Promise.js\";import{isAbortError as h}from\"../../../core/promiseUtils.js\";import{watch as l,initial as u,sync as _}from\"../../../core/reactiveUtils.js\";import{property as c}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as g}from\"../../../geometry/projection.js\";import{create as m,intersectsSphere as y}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as x}from\"../dehydratedFeatures.js\";import{PromiseQueue as f}from\"../../support/PromiseQueue.js\";import{viewingModeFromString as b}from\"../../../views/ViewingMode.js\";import{addTask as N}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as v}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import w from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import{NodeState as C,CacheState as D}from\"../../../views/3d/layers/i3s/I3SNode.js\";import L from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as S}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as I,getIndexCrs as V,findIntersectingNodes as A}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import F from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{FadeDirection as O}from\"../../../views/3d/layers/support/I3SLayerView.js\";import{toBoundingRect as P}from\"../../../views/3d/support/extentUtils.js\";import{ClientType as U,maxDownloadSlots as M}from\"../../../views/3d/support/index.js\";import{extractSafeScaleBounds as q,scaleBoundsPredicate as G}from\"../../../views/support/layerViewUtils.js\";import{noBudget as j}from\"../../../views/support/Scheduler.js\";const Q=r.getLogger(\"esri.layers.graphics.controllers.I3SOnDemandController\"),T=100,E=2,H=1e4,B=1e-4,k=1.2,R=500,z=1.5;let K=class extends(n(t)){constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._newLoadingNodes=new o({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new o,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._handles=new i,this._idleQueue=new f,this._elevationUpdateNodes=new o({deallocator:null}),this._errorCount=0}get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(a(this.layer.priority)||\"High\"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(U.I3S_INDEX);return new S(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(U.I3S_DATA);return new S(e,this.layer.apiKey)}get crsVertex(){return I(this.layer)}get crsIndex(){return V(this.layer)}get layer(){return this.layerView.i3slayer}get rootNodeVisible(){if(d(this._index)){const e=this._index.rootNode;if(d(e))return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new w(e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=s(\"disable-feature:idb-cache\"),\"fields\"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([i])=>{if(this.destroyed||!e||e.destroyed)return;const{view:s}=e,{resourceController:r}=s;this._setClippingArea(s.clippingArea),this.own([l((()=>s?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),u),l((()=>r.memoryController.memoryFactor),(()=>this._setCameraDirty()),_),l((()=>e.suspended),(e=>{const t=e?()=>this._updateViewData():()=>this._updateIdleState(!0),i=e?()=>{}:()=>this._updateIdleState(!1);this._idleStateCallbacks?(e&&this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=r.scheduler.registerIdleStateCallbacks(t,i)}),u),N(e.view.resourceController.scheduler,{update:(e,t)=>this._frame(e,t),needsUpdate:()=>this.updating}),l((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),l((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),l((()=>s.state?.contentCamera),(()=>this._setCameraDirty())),l((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),l((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),l((()=>e.lodFactor),(()=>this._setCameraDirty())),l((()=>e.availableFields),(()=>this._requiredFieldsChange())),l((()=>e.holeFilling),(e=>d(this._index)&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new F(this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?s.basemapTerrain:s.elevationProvider,b(s.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this.lod,angleDependentLoD:this.lod<.5}),this._index=new v(t,i,this.indexStreamController,this._viewportQueries,Q,e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,C.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?e.computeVisibilityObb(t):null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid),this._index.imModificationsChanged(!!e.hasModifications),this._startNodeLoading()}))),this._tmpPoint=x(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;d(t)&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);d(i)&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._handles.destroy(),this._nodeLoader=null,X.prune(),d($)&&($.hide(),$=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=W(e,i),r=W(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();J(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=m();P(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){d(this._viewportQueries)&&(this._viewportQueries.setPointOfInterest(e),d(this._index)&&(this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),d(this._viewportQueries)&&d(this._index)&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateElevationChanged(e,t){const i=this._index;if(a(i)||a(i.rootNode))return null;const s=this._elevationUpdateNodes;return s.clear(),A(e,t,i.rootNode,this.crsIndex,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}getParentIndex(e){return d(this._index)&&this._index.getParentIndex(e)}removeAllGeometryObbs(){d(this._index)&&this._index.removeAllGeometryObbs()}_elevationInfoChanged(e){a(this._index)||(this._index.updateElevationInfo(e,this.isMeshPyramid),this._setCameraDirty())}_updateScaleHandles(){const e=\"scale-bounds\";this._handles.remove(e),this.areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this.areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(a(i))return;const s=i.rootNode;!a(s)&&g(e,t,Z,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);d(s)&&y(Z,s.mbs)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get areScaleBoundsActive(){const{minScale:e,maxScale:t}=q(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return a(this._index)||this.layerView.suspended?0:this._index.getUnloadedMemoryEstimate()*this.lodDropFactor}get indexDepth(){return d(this._index)?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}_frame(e,t){return this.layerView.suspended?(this._updateViewData(),this._evaluateUpdating(),-1/0):!this.layerView.visible||a(this._index)?-1/0:(this._processLogError(e,t),this._index.getPriority())}_processLogError(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?Q.error(\"Error during processing: \"+i):50===this._errorCount&&Q.error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null==this._nodeLoader||a(this._index)||(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this.isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this.isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.getIndexLoading(),t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(a(this._index))return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading()||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(a(this._index)||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||a(this._index)||a(this._viewportQueries))return;const e=!this._index.isLoading(),t=this.featureTarget*this.baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.getIndexMissing()>R){if(this._featureLOD<=B)return;this._featureLOD/=z,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=H||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this.lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this.baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*k||e&&i.estimate>t))return;if(this._featureLOD<=B)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(H,Math.max(B,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(a(t))return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);d(s)&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,C.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(a(this._index))return!1;let i=(this._isIdle?T:E)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());d(t)&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const r=this._index.getNode(s.add.back());if(a(r)||r.cacheState!==D.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(r),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=E)&&(this._downloadingCount<M&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView.suspended)e=this._cameraDirty,t=e?0:1;else{const i=(d(this._index)?this._index.getIndexMissing():0)+3*(d(this._index)?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}this.updating=e,this.updatingProgress=t}_updateViewData(){if(!this._cameraDirty||a(this._index)||a(this._viewportQueries))return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.resourceController.memoryController.memoryFactor<1?1:this.layerView.progressiveLoadFactor}get lod(){return this._featureLOD*this.baseLOD}get baseLOD(){const e=this.layerView.lodFactor,t=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*t}get lodDropFactor(){if(this.fixedFeatureTarget)return 1;const e=this.layerView.view.resourceController.memoryController;return(Math.min(e.memoryFactor,.5)-e.minQuality)/(.5-e.minQuality)}isGeometryVisible(e){return d(this._index)&&this._index.isGeometryVisible(e.index)}updateVisibility(e){d(this._index)&&this._index.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){d(this._index)&&this._index.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){d(this._index)&&this._index.invalidateVisibilityObbs()}modificationsChanged(){d(this._index)&&this._index.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(a(this._index)||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(a(this._viewportQueries))return!1;const t=this.lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||a(e)||a(this._viewportQueries))return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new L(this.layer,this.dataStreamController,Q,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,ee.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(a(t)||a(this._viewportQueries))return!1;X.clear(),this.layerView.getLoadedNodeIndices(X);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return X.filterInPlace((e=>{const i=t.getNode(e);return a(i)||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),X.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(X,e,ee.pop),!(i&&this.lodDropFactor<1)&&(0===X.length||(X.clear(),!1))}markNodeToRemove(e){X.push(e)}removeMarkedNodes(){this._removeNodes(X,j,ee.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(d(this._index)&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===ee.fadeout&&this.layerView.nodeFadeoutEnabled&&d(r)&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,O.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(!e.resources.hasFeatureData||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}_updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t);(J(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes)?Promise.resolve(this.layerView.getAttributeData(e.index)):this._nodeLoader.loadAttributes(e,this._requiredAttributes,t.signal)).then((i=>this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:i},t.signal)),t.signal))).catch((i=>{if(!h(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)})).catch((()=>{})).then((()=>{this._updatingNodes.delete(e.index),this._evaluateUpdating()})),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void Q.error(\"already loading node \"+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&d(this._index)&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!h(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===D.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=D.Uncached,!0))).catch((t=>!h(t)&&(e.cacheState=D.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||a(this._index))return!1;if(t===C.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e);return d(t)&&d(t.attributeInfo)&&J(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){d(this._index)&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;d(i)&&i.updateChildrenLoaded(e,t?1:-1)}_loadCached(e,t){if(this._enableFromGPUCache(e,C.Leaf))return Promise.resolve(!0);const i=this.layerView;return!this.disableIDBCache&&i.loadCachedNodeData&&i.addCachedNodeData?this.schedule((()=>i.loadCachedNodeData(e,t,((t,i)=>this._nodeLoader.loadTextures(e,t,i)))),t).then((s=>{if(a(s))return!1;const r=this._requiredAttributes;return this.reschedule((()=>this._nodeLoader.loadAttributes(e,r,t)),t).then((a=>this.reschedule((()=>i.addCachedNodeData(e,s,{loadedAttributes:r,attributeData:a},t)),t))).then((()=>(this._nodeAdded(),!0)))})):Promise.resolve(!1)}_loadUncached(e,t){return this._downloadingCount++,this._nodeLoader.loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=D.Cached})).catch((t=>{if(!h(t))throw Q.error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,d(this._index)&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&d(this._index)&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=e.mbs[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this.areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=q(this.layer);return G(t,i,s)}updateStats(e){e.index=d(this._index)?this._index.size:0,this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this.baseLOD),d(this._index)&&this._index.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){d(e._index)&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),d(this._index)&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;d(t)&&t.layerFilterChanged(e),this.requestUpdate()}};e([c({readOnly:!0})],K.prototype,\"isMeshPyramid\",null),e([c({readOnly:!0})],K.prototype,\"isGraphics3D\",null),e([c({readOnly:!0})],K.prototype,\"useMaximumNumberOfFeatures\",null),e([c({readOnly:!0})],K.prototype,\"indexStreamController\",null),e([c({readOnly:!0})],K.prototype,\"dataStreamController\",null),e([c({readOnly:!0})],K.prototype,\"crsVertex\",null),e([c({readOnly:!0})],K.prototype,\"crsIndex\",null),e([c()],K.prototype,\"screenSizeFactor\",void 0),e([c()],K.prototype,\"featureTarget\",void 0),e([c()],K.prototype,\"fixedFeatureTarget\",void 0),e([c()],K.prototype,\"layerView\",void 0),e([c()],K.prototype,\"layer\",null),e([c({})],K.prototype,\"updating\",void 0),e([c({})],K.prototype,\"updatingProgress\",void 0),e([c({readOnly:!0})],K.prototype,\"leavesReached\",void 0),e([c({constructOnly:!0})],K.prototype,\"scaleVisibilityEnabled\",void 0),e([c({readOnly:!0,dependsOn:[]})],K.prototype,\"rootNodeVisible\",null),K=e([p(\"esri.layers.graphics.controllers.I3SOnDemandController\")],K);const X=new o({deallocator:null});let $;function J(e,t){return d(e)&&e.length===t.length&&e.every((e=>W(t,e.name)>=0))}function W(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const Y={factorIM:.2,factor3dObject:.05,distancePenalty:10},Z=m();var ee;!function(e){e[e.pop=0]=\"pop\",e[e.fadeout=1]=\"fadeout\"}(ee||(ee={}));const te=K;export{te as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}