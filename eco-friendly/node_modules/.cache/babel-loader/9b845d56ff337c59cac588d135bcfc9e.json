{"ast":null,"code":"import Map from \"@arcgis/core/Map\";\nimport View from \"@arcgis/core/views/MapView\";\nimport MapImageLayer from \"@arcgis/core/layers/MapImageLayer\";\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\nimport Expand from \"@arcgis/core/widgets/Expand\";\nimport Basemap from \"@arcgis/core/Basemap\";\nimport Portal from \"@arcgis/core/portal/Portal\";\nimport Compass from \"@arcgis/core/widgets/Compass\";\nexport default {\n  data() {\n    return {};\n  },\n\n  beforeMount() {},\n\n  created() {},\n\n  mounted() {\n    this.initMap();\n  },\n\n  methods: {\n    initMap() {\n      // esriConfig.portalUrl = \"https://linux111.esrichina.com/arcgis\"\n      const m_Map = new Map({\n        basemap: \"topo-vector\"\n      });\n      const view = new View({\n        container: \"viewDiv\",\n        map: m_Map,\n        center: [115, 32],\n        zoom: 5\n      });\n      const compass = new Compass({\n        //指南针\n        view: view\n      });\n      view.ui.add(compass, \"bottom-left\");\n      let layer = new MapImageLayer({\n        url: \"http://localhost:6080/arcgis/rest/services/graduate/MapServer\"\n      });\n      console.log(layer); // layer.portalItem=\"test\"\n\n      var expand = new Expand({\n        //图层集\n        content: new BasemapGallery({\n          view: view,\n          // 设定图层集有哪些图层\n          source: new Portal({\n            url: \"http://localhost:6080/arcgis/rest/services/graduate/MapServer\"\n          }) // autocasts to LocalBasemapsSource\n\n        })\n      }, \"BasemapGallery\");\n      expand.expanded = false; // this.document.getElementById(\"BasemapGallery\").onmouseover=function(){\n      //   expand.expanded=true\n      // }\n      // this.document.getElementById(\"BasemapGallery\").onmouseout=function(){\n      //   expand.expanded=false\n      // }\n\n      m_Map.add(layer); //鹰眼地图定义\n\n      var overviewMap = new Map({\n        basemap: \"hybrid\"\n      }); //鹰眼地图视图\n\n      var mapView = new MapView({\n        container: \"overviewDiv\",\n        map: overviewMap,\n        constraints: {\n          rotationEnabled: false //不允许旋转\n\n        }\n      }); //去掉缩略图的ui\n\n      mapView.ui.components = []; //全图显示\n\n      var extentButton = document.getElementById(\"fullextent-btn\");\n      extentButton.addEventListener(\"click\", () => {\n        FullExtentShow();\n      }); //定义全图显示函数\n\n      function FullExtentShow() {\n        view.center = [110, 30]; //地图中心点\n\n        view.zoom = 4;\n      }\n\n      view.ui.remove('attribution'); //鹰眼地图监听主地图的extent发生变化\n\n      mapView.when(() => {\n        view.when(() => {\n          setup();\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACA;EACA,CAHA;;EAIAC,eAEA,CANA;;EAOAC,WAEA,CATA;;EAUAC;IACA;EACA,CAZA;;EAaAC;IACAC;MACA;MACA;QACAC;MADA;MAGA;QACAC,oBADA;QAEAC,UAFA;QAGAC,iBAHA;QAIAC;MAJA;MAMA;QAAA;QACAC;MADA;MAGAA;MACA;QACAC;MADA;MAGAC,mBAlBA,CAmBA;;MACA;QAAA;QACAC;UACAH,UADA;UAEA;UACAI;YAAAH;UAAA,EAHA,CAGA;;QAHA;MADA,GAOA,gBAPA;MAQAI,wBA5BA,CA6BA;MACA;MACA;MACA;MACA;MACA;;MACAC,iBAnCA,CAoCA;;MACA;QACAX;MADA,GArCA,CAwCA;;MACA;QACAC,wBADA;QAEAC,gBAFA;QAGAU;UACAC,sBADA,CACA;;QADA;MAHA,GAzCA,CAgDA;;MACAC,2BAjDA,CAmDA;;MACA;MAEAC;QACAC;MAAA,CADA,EAtDA,CAyDA;;MACA;QACAX,wBADA,CACA;;QACAA;MACA;;MAEAA,8BA/DA,CAgEA;;MACAS;QACAT;UACAY;QACA,CAFA;MAGA,CAJA;IAKA;;EAvEA;AAbA","names":["data","beforeMount","created","mounted","methods","initMap","basemap","container","map","center","zoom","view","url","console","content","source","expand","m_Map","constraints","rotationEnabled","mapView","extentButton","FullExtentShow","setup"],"sourceRoot":"src/views","sources":["HomeMap.vue"],"sourcesContent":["<template>\n  <div style=\"position: relative\" id=\"viewDiv\">\n    <div id=\"BasemapGallery\" style=\"position: absolute;top:10px;right: 200px\"></div>\n    <!-- 导出的div -->\n    <div id=\"printMap\"  style=\"position:absolute;top:10px;left: 1410px;box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 2px; \"></div>\n    <!-- 工具条区域 -->\n    <div id=\"overviewDiv\"><div id=\"extentDiv\"></div></div>\n    <div id=\"fullExtent\" style=\"position:absolute;top:10px;left: 210px\">\n      <button title=\"全图显示\" id=\"fullextent-btn\" class=\"esri-widget--button esri-interactive esri-icon-zoom-out-fixed\" style=\"border: none;box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 2px; \"></button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Map from \"@arcgis/core/Map\";\nimport View from \"@arcgis/core/views/MapView\"\nimport MapImageLayer from \"@arcgis/core/layers/MapImageLayer\";\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\nimport Expand from \"@arcgis/core/widgets/Expand\";\nimport Basemap from \"@arcgis/core/Basemap\";\nimport Portal from \"@arcgis/core/portal/Portal\";\nimport Compass from \"@arcgis/core/widgets/Compass\";\n\nexport default {\n  data() {\n    return {}\n  },\n  beforeMount() {\n\n  },\n  created() {\n\n  },\n  mounted() {\n    this.initMap()\n  },\n  methods: {\n    initMap() {\n      // esriConfig.portalUrl = \"https://linux111.esrichina.com/arcgis\"\n      const m_Map = new Map({\n        basemap: \"topo-vector\"\n      })\n      const view = new View({\n        container: \"viewDiv\",\n        map: m_Map,\n        center: [115, 32],\n        zoom: 5\n      })\n      const compass=new Compass({ //指南针\n        view:view\n      });\n      view.ui.add(compass,\"bottom-left\");\n      let layer = new MapImageLayer({\n        url: \"http://localhost:6080/arcgis/rest/services/graduate/MapServer\"\n      });\n      console.log(layer)\n      // layer.portalItem=\"test\"\n      var expand =  new Expand({ //图层集\n        content:new BasemapGallery({\n          view:view,\n          // 设定图层集有哪些图层\n          source: new Portal({url: \"http://localhost:6080/arcgis/rest/services/graduate/MapServer\"}) // autocasts to LocalBasemapsSource\n        }),\n\n      },\"BasemapGallery\")\n      expand.expanded=false\n      // this.document.getElementById(\"BasemapGallery\").onmouseover=function(){\n      //   expand.expanded=true\n      // }\n      // this.document.getElementById(\"BasemapGallery\").onmouseout=function(){\n      //   expand.expanded=false\n      // }\n      m_Map.add(layer);\n      //鹰眼地图定义\n      var overviewMap = new Map({\n        basemap:\"hybrid\"\n      })\n      //鹰眼地图视图\n      var mapView = new MapView({\n        container:\"overviewDiv\",\n        map:overviewMap,\n        constraints:{\n          rotationEnabled:false  //不允许旋转\n        }\n      })\n      //去掉缩略图的ui\n      mapView.ui.components = []\n\n      //全图显示\n      var extentButton = document.getElementById(\"fullextent-btn\")\n\n      extentButton.addEventListener(\"click\",()=>{\n        FullExtentShow()})\n\n      //定义全图显示函数\n      function FullExtentShow(){\n        view.center=[110,30] //地图中心点\n        view.zoom=4\n      }\n\n      view.ui.remove('attribution')\n      //鹰眼地图监听主地图的extent发生变化\n      mapView.when(() => {\n        view.when(() => {\n          setup();\n        });\n      });\n    }\n  }\n}\n</script>\n\n<style>\nhtml,body,#viewDiv{\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n}\n#overviewDiv {\n  position: absolute;\n  bottom: 20px;\n  right: 12px;\n  width: 300px;\n  height: 200px;\n  border: 1px solid black;\n  z-index: 1;\n  overflow: hidden;\n}\n</style>"]},"metadata":{},"sourceType":"module"}