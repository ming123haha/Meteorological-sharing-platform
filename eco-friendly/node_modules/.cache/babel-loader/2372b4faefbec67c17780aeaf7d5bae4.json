{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { unwrap as e } from \"../../../core/maybe.js\";\nimport { a as t } from \"../../../chunks/vec2f64.js\";\nimport { SnappingAlgorithm as o } from \"./SnappingAlgorithm.js\";\nimport { squareDistance as r } from \"./snappingUtils.js\";\nimport { LineSnappingCandidate as s } from \"./candidates/LineSnappingCandidate.js\";\nimport { anyMapPointToScreenPoint as i } from \"../support/viewUtils.js\";\nimport { projectPointToLine as n } from \"../../support/geometry2dUtils.js\";\n\nclass d extends o {\n  snapNewVertex(e, t) {\n    const o = t.editGeometryOperations.data.components[0],\n          r = o.edges.length,\n          s = [];\n    if (r < 1) return s;\n    const n = t.coordinateHelper,\n          d = i(e, n, t.elevationInfo, this.view),\n          p = o.edges[r - 1];\n    let a = p;\n\n    do {\n      this.edgeExceedsShortLineThreshold(a, t) && this._processCandidateProposal(a.leftVertex.pos, a.rightVertex.pos, e, d, t, s), a = a.leftVertex.leftEdge;\n    } while (a && a !== p);\n\n    return s;\n  }\n\n  snapExistingVertex(t, o) {\n    const r = [],\n          s = e(o.vertexHandle),\n          n = s.component;\n    if (n.edges.length < 2) return r;\n    const d = o.coordinateHelper,\n          p = i(t, d, o.elevationInfo, this.view),\n          a = s.leftEdge,\n          h = s.rightEdge;\n    a && h && this.edgeExceedsShortLineThreshold(a, o) && this.edgeExceedsShortLineThreshold(h, o) && this._processCandidateProposal(a.leftVertex.pos, h.rightVertex.pos, t, p, o, r);\n    const l = n.edges[0];\n    let g = l;\n\n    do {\n      g !== s.leftEdge && g !== s.rightEdge && this.edgeExceedsShortLineThreshold(g, o) && this._processCandidateProposal(g.leftVertex.pos, g.rightVertex.pos, t, p, o, r), g = g.rightVertex.rightEdge;\n    } while (g && g !== l);\n\n    return r;\n  }\n\n  _processCandidateProposal(e, o, d, p, a, h) {\n    const l = n(t(), d, e, o),\n          {\n      coordinateHelper: g,\n      elevationInfo: c,\n      pointer: f\n    } = a,\n          m = g.fromXYZ(l, g.getZ(d, 0));\n    r(p, i(m, g, c, this.view)) < this.squaredProximityTreshold(f) && h.push(new s({\n      coordinateHelper: g,\n      lineStart: e,\n      lineEnd: o,\n      targetPoint: m,\n      elevationInfo: c\n    }));\n  }\n\n}\n\nexport { d as LineSnapper };","map":{"version":3,"names":["unwrap","e","a","t","SnappingAlgorithm","o","squareDistance","r","LineSnappingCandidate","s","anyMapPointToScreenPoint","i","projectPointToLine","n","d","snapNewVertex","editGeometryOperations","data","components","edges","length","coordinateHelper","elevationInfo","view","p","edgeExceedsShortLineThreshold","_processCandidateProposal","leftVertex","pos","rightVertex","leftEdge","snapExistingVertex","vertexHandle","component","h","rightEdge","l","g","c","pointer","f","m","fromXYZ","getZ","squaredProximityTreshold","push","lineStart","lineEnd","targetPoint","LineSnapper"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/LineSnapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../../../core/maybe.js\";import{a as t}from\"../../../chunks/vec2f64.js\";import{SnappingAlgorithm as o}from\"./SnappingAlgorithm.js\";import{squareDistance as r}from\"./snappingUtils.js\";import{LineSnappingCandidate as s}from\"./candidates/LineSnappingCandidate.js\";import{anyMapPointToScreenPoint as i}from\"../support/viewUtils.js\";import{projectPointToLine as n}from\"../../support/geometry2dUtils.js\";class d extends o{snapNewVertex(e,t){const o=t.editGeometryOperations.data.components[0],r=o.edges.length,s=[];if(r<1)return s;const n=t.coordinateHelper,d=i(e,n,t.elevationInfo,this.view),p=o.edges[r-1];let a=p;do{this.edgeExceedsShortLineThreshold(a,t)&&this._processCandidateProposal(a.leftVertex.pos,a.rightVertex.pos,e,d,t,s),a=a.leftVertex.leftEdge}while(a&&a!==p);return s}snapExistingVertex(t,o){const r=[],s=e(o.vertexHandle),n=s.component;if(n.edges.length<2)return r;const d=o.coordinateHelper,p=i(t,d,o.elevationInfo,this.view),a=s.leftEdge,h=s.rightEdge;a&&h&&this.edgeExceedsShortLineThreshold(a,o)&&this.edgeExceedsShortLineThreshold(h,o)&&this._processCandidateProposal(a.leftVertex.pos,h.rightVertex.pos,t,p,o,r);const l=n.edges[0];let g=l;do{g!==s.leftEdge&&g!==s.rightEdge&&this.edgeExceedsShortLineThreshold(g,o)&&this._processCandidateProposal(g.leftVertex.pos,g.rightVertex.pos,t,p,o,r),g=g.rightVertex.rightEdge}while(g&&g!==l);return r}_processCandidateProposal(e,o,d,p,a,h){const l=n(t(),d,e,o),{coordinateHelper:g,elevationInfo:c,pointer:f}=a,m=g.fromXYZ(l,g.getZ(d,0));r(p,i(m,g,c,this.view))<this.squaredProximityTreshold(f)&&h.push(new s({coordinateHelper:g,lineStart:e,lineEnd:o,targetPoint:m,elevationInfo:c}))}}export{d as LineSnapper};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}