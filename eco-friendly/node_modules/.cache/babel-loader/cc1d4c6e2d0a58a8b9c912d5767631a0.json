{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../Graphic.js\";\nimport r from \"../../../request.js\";\nimport s from \"../../../TimeExtent.js\";\nimport a from \"../../../core/Error.js\";\nimport i from \"../../../core/has.js\";\nimport { JSONMap as o } from \"../../../core/jsonMap.js\";\nimport n from \"../../../core/Loadable.js\";\nimport { isSome as u, isNone as d } from \"../../../core/maybe.js\";\nimport { setDeepValue as l } from \"../../../core/object.js\";\nimport { debounce as c } from \"../../../core/promiseUtils.js\";\nimport { dataComponents as h } from \"../../../core/urlUtils.js\";\nimport { property as p } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as y } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport m from \"../../../geometry/Extent.js\";\nimport { fromJSON as f } from \"../../../geometry/support/jsonUtils.js\";\nimport { createDrawingInfo as g } from \"./support/clientSideDefaults.js\";\nimport R from \"./support/QueryTask.js\";\nimport { unapplyEditsZUnitScaling as F } from \"../../../rest/query/operations/editsZScale.js\";\nimport { processAttachmentQueryResult as b } from \"../../../rest/query/operations/queryAttachments.js\";\nimport q from \"../../../geometry/SpatialReference.js\";\nconst I = new o({\n  originalAndCurrentFeatures: \"original-and-current-features\",\n  none: \"none\"\n});\n\nasync function _(e) {\n  if (\"string\" == typeof e) {\n    const t = h(e);\n    return t || {\n      data: e\n    };\n  }\n\n  return new Promise((t, r) => {\n    const s = new FileReader();\n    s.readAsDataURL(e), s.onload = () => t(h(s.result)), s.onerror = e => r(e);\n  });\n}\n\nconst O = new Set([\"Feature Layer\", \"Table\"]);\nlet S = class extends n {\n  constructor() {\n    super(...arguments), this.type = \"feature-layer\", this.refresh = c(async () => {\n      await this.load();\n      const e = this.sourceJSON.editingInfo?.lastEditDate;\n      if (null == e) return {\n        dataChanged: !0,\n        updates: {}\n      };\n\n      try {\n        await this._fetchService(null);\n      } catch {\n        return {\n          dataChanged: !0,\n          updates: {}\n        };\n      }\n\n      const t = e !== this.sourceJSON.editingInfo?.lastEditDate;\n      return {\n        dataChanged: t,\n        updates: t ? {\n          editingInfo: this.sourceJSON.editingInfo,\n          extent: this.sourceJSON.extent\n        } : null\n      };\n    });\n  }\n\n  load(e) {\n    const t = u(e) ? e.signal : null;\n    return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON, t)), Promise.resolve(this);\n  }\n\n  get queryTask() {\n    const {\n      capabilities: {\n        query: {\n          supportsFormatPBF: e\n        }\n      },\n      parsedUrl: t,\n      dynamicDataSource: r,\n      infoFor3D: s,\n      gdbVersion: a,\n      spatialReference: o,\n      fieldsIndex: n\n    } = this.layer,\n          u = i(\"featurelayer-pbf\") && e && d(s) ? \"pbf\" : \"json\";\n    return new R({\n      url: t.path,\n      format: u,\n      fieldsIndex: n,\n      infoFor3D: s,\n      dynamicDataSource: r,\n      gdbVersion: a,\n      sourceSpatialReference: o\n    });\n  }\n\n  async addAttachment(e, t) {\n    await this.load();\n\n    const s = e.attributes[this.layer.objectIdField],\n          a = this.layer.parsedUrl.path + \"/\" + s + \"/addAttachment\",\n          i = this._getLayerRequestOptions(),\n          o = this._getFormDataForAttachment(t, i.query);\n\n    try {\n      const e = await r(a, {\n        body: o\n      });\n      return this._createFeatureEditResult(e.data.addAttachmentResult);\n    } catch (n) {\n      throw this._createAttachmentErrorResult(s, n);\n    }\n  }\n\n  async updateAttachment(e, t, s) {\n    await this.load();\n\n    const a = e.attributes[this.layer.objectIdField],\n          i = this.layer.parsedUrl.path + \"/\" + a + \"/updateAttachment\",\n          o = this._getLayerRequestOptions({\n      query: {\n        attachmentId: t\n      }\n    }),\n          n = this._getFormDataForAttachment(s, o.query);\n\n    try {\n      const e = await r(i, {\n        body: n\n      });\n      return this._createFeatureEditResult(e.data.updateAttachmentResult);\n    } catch (u) {\n      throw this._createAttachmentErrorResult(a, u);\n    }\n  }\n\n  async applyEdits(e, t) {\n    await this.load();\n\n    const s = e.addFeatures.map(this._serializeFeature, this),\n          a = e.updateFeatures.map(this._serializeFeature, this),\n          i = this._getFeatureIds(e.deleteFeatures, t?.globalIdUsed);\n\n    F(s, a, this.layer.spatialReference);\n    const o = [],\n          n = [],\n          u = [...e.deleteAttachments];\n\n    for (const r of e.addAttachments) o.push(await this._serializeAttachment(r));\n\n    for (const r of e.updateAttachments) n.push(await this._serializeAttachment(r));\n\n    const d = o.length || n.length || u.length ? {\n      adds: o,\n      updates: n,\n      deletes: u\n    } : null,\n          l = {\n      gdbVersion: t?.gdbVersion || this.layer.gdbVersion,\n      rollbackOnFailure: t?.rollbackOnFailureEnabled,\n      useGlobalIds: t?.globalIdUsed,\n      returnEditMoment: t?.returnEditMoment,\n      usePreviousEditMoment: t?.usePreviousEditMoment,\n      sessionId: t?.sessionId\n    };\n    t?.returnServiceEditsOption ? (l.edits = JSON.stringify([{\n      id: this.layer.layerId,\n      adds: s,\n      updates: a,\n      deletes: i,\n      attachments: d\n    }]), l.returnServiceEditsOption = I.toJSON(t?.returnServiceEditsOption), l.returnServiceEditsInSourceSR = t?.returnServiceEditsInSourceSR) : (l.adds = s.length ? JSON.stringify(s) : null, l.updates = a.length ? JSON.stringify(a) : null, l.deletes = i.length ? t?.globalIdUsed ? JSON.stringify(i) : i.join(\",\") : null, l.attachments = d && JSON.stringify(d));\n\n    const c = this._getLayerRequestOptions({\n      method: \"post\",\n      query: l\n    }),\n          h = t?.returnServiceEditsOption ? this.layer.url : this.layer.parsedUrl.path,\n          p = await r(h + \"/applyEdits\", c);\n\n    return this._createEditsResult(p);\n  }\n\n  async deleteAttachments(e, t) {\n    await this.load();\n    const s = e.attributes[this.layer.objectIdField],\n          a = this.layer.parsedUrl.path + \"/\" + s + \"/deleteAttachments\";\n\n    try {\n      return (await r(a, this._getLayerRequestOptions({\n        query: {\n          attachmentIds: t.join(\",\")\n        },\n        method: \"post\"\n      }))).data.deleteAttachmentResults.map(this._createFeatureEditResult);\n    } catch (i) {\n      throw this._createAttachmentErrorResult(s, i);\n    }\n  }\n\n  fetchRecomputedExtents(e = {}) {\n    const t = e.signal;\n    return this.load({\n      signal: t\n    }).then(async () => {\n      const t = this._getLayerRequestOptions({ ...e,\n        query: {\n          returnUpdates: !0\n        }\n      }),\n            {\n        layerId: a,\n        url: i\n      } = this.layer,\n            {\n        data: o\n      } = await r(`${i}/${a}`, t),\n            {\n        id: n,\n        extent: u,\n        fullExtent: d,\n        timeExtent: l\n      } = o,\n            c = u || d;\n\n      return {\n        id: n,\n        fullExtent: c && m.fromJSON(c),\n        timeExtent: l && s.fromJSON({\n          start: l[0],\n          end: l[1]\n        })\n      };\n    });\n  }\n\n  async queryAttachments(e, t = {}) {\n    const {\n      parsedUrl: s\n    } = this.layer,\n          a = s.path;\n    await this.load();\n\n    const i = this._getLayerRequestOptions(t);\n\n    if (!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")) {\n      const {\n        objectIds: t\n      } = e,\n            s = [];\n\n      for (const e of t) {\n        const t = a + \"/\" + e + \"/attachments\";\n        s.push(r(t, i));\n      }\n\n      return Promise.all(s).then(e => t.map((t, r) => ({\n        parentObjectId: t,\n        attachmentInfos: e[r].data.attachmentInfos\n      }))).then(e => b(e, a));\n    }\n\n    return this.queryTask.executeAttachmentQuery(e, i);\n  }\n\n  async queryFeatures(e, t) {\n    return await this.load(), this.queryTask.execute(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryFeaturesJSON(e, t) {\n    return await this.load(), this.queryTask.executeJSON(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForIds(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryFeatureCount(e, t) {\n    return await this.load(), this.queryTask.executeForCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryExtent(e, t) {\n    return await this.load(), this.queryTask.executeForExtent(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryRelatedFeatures(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQuery(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryRelatedFeaturesCount(e, t) {\n    return await this.load(), this.queryTask.executeRelationshipQueryForCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopFeatures(e, t) {\n    return await this.load(), this.queryTask.executeTopFeaturesQuery(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopObjectIds(e, t) {\n    return await this.load(), this.queryTask.executeForTopIds(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopExtents(e, t) {\n    return await this.load(), this.queryTask.executeForTopExtents(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  async queryTopCount(e, t) {\n    return await this.load(), this.queryTask.executeForTopCount(e, { ...t,\n      query: this._createRequestQueryOptions(t)\n    });\n  }\n\n  _createRequestQueryOptions(e) {\n    const t = { ...this.layer.customParameters,\n      token: this.layer.apiKey,\n      ...e?.query\n    };\n    return this.layer.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t;\n  }\n\n  async _fetchService(e, t) {\n    if (!e) {\n      const {\n        data: s\n      } = await r(this.layer.parsedUrl.path, this._getLayerRequestOptions({\n        query: i(\"featurelayer-advanced-symbols\") ? {\n          returnAdvancedSymbols: !0\n        } : {},\n        signal: t\n      }));\n      e = s;\n    }\n\n    this.sourceJSON = this._patchServiceJSON(e);\n    const s = e.type;\n    if (!O.has(s)) throw new a(\"feature-layer-source:unsupported-type\", `Source type \"${s}\" is not supported`);\n  }\n\n  _patchServiceJSON(e) {\n    if (\"Table\" !== e.type && e.geometryType && !e?.drawingInfo?.renderer && !e.defaultSymbol) {\n      const t = g(e.geometryType).renderer;\n      l(\"drawingInfo.renderer\", t, e);\n    }\n\n    return \"esriGeometryMultiPatch\" === e.geometryType && e.infoFor3D && (e.geometryType = \"mesh\"), e;\n  }\n\n  _serializeFeature(e) {\n    const {\n      geometry: t,\n      attributes: r\n    } = e;\n    return d(t) ? {\n      attributes: r\n    } : \"mesh\" === t.type || \"extent\" === t.type ? null : {\n      geometry: t.toJSON(),\n      attributes: r\n    };\n  }\n\n  async _serializeAttachment(e) {\n    const {\n      feature: t,\n      attachment: r\n    } = e,\n          {\n      globalId: s,\n      name: a,\n      contentType: i,\n      data: o,\n      uploadId: n\n    } = r,\n          u = {\n      globalId: s,\n      parentGlobalId: null,\n      contentType: null,\n      name: null,\n      uploadId: null,\n      data: null\n    };\n    if (t && (u.parentGlobalId = \"attributes\" in t ? t.attributes && t.attributes[this.layer.globalIdField] : t.globalId), n) u.uploadId = n;else if (o) {\n      const e = await _(o);\n      u.contentType = e.mediaType, u.data = e.data, o instanceof File && (u.name = o.name);\n    }\n    return a && (u.name = a), i && (u.contentType = i), u;\n  }\n\n  _getFeatureIds(e, t) {\n    const r = e[0];\n    return r ? this._canUseGlobalIds(t, e) ? this._getGlobalIdsFromFeatureIdentifier(e) : \"objectId\" in r ? this._getObjectIdsFromFeatureIdentifier(e) : this._getIdsFromFeatures(e) : [];\n  }\n\n  _getIdsFromFeatures(e) {\n    const t = this.layer.objectIdField;\n    return e.map(e => e.attributes && e.attributes[t]);\n  }\n\n  _canUseGlobalIds(e, t) {\n    return e && \"globalId\" in t[0];\n  }\n\n  _getObjectIdsFromFeatureIdentifier(e) {\n    return e.map(e => e.objectId);\n  }\n\n  _getGlobalIdsFromFeatureIdentifier(e) {\n    return e.map(e => e.globalId);\n  }\n\n  _createEditsResult(e) {\n    const t = e.data,\n          {\n      layerId: r\n    } = this.layer,\n          s = [];\n    let a = null;\n    if (Array.isArray(t)) for (const n of t) s.push({\n      id: n.id,\n      editedFeatures: n.editedFeatures\n    }), n.id === r && (a = {\n      addResults: n.addResults,\n      updateResults: n.updateResults,\n      deleteResults: n.deleteResults,\n      attachments: n.attachments,\n      editMoment: n.editMoment\n    });else a = t;\n    const i = a?.attachments,\n          o = {\n      addFeatureResults: a.addResults ? a.addResults.map(this._createFeatureEditResult, this) : [],\n      updateFeatureResults: a.updateResults ? a.updateResults.map(this._createFeatureEditResult, this) : [],\n      deleteFeatureResults: a.deleteResults ? a.deleteResults.map(this._createFeatureEditResult, this) : [],\n      addAttachmentResults: i && i.addResults ? i.addResults.map(this._createFeatureEditResult, this) : [],\n      updateAttachmentResults: i && i.updateResults ? i.updateResults.map(this._createFeatureEditResult, this) : [],\n      deleteAttachmentResults: i && i.deleteResults ? i.deleteResults.map(this._createFeatureEditResult, this) : []\n    };\n\n    if (a.editMoment && (o.editMoment = a.editMoment), s.length > 0) {\n      o.editedFeatureResults = [];\n\n      for (const e of s) {\n        const {\n          adds: t,\n          updates: r,\n          deletes: s,\n          spatialReference: a\n        } = e.editedFeatures,\n              i = a ? new q(a) : null;\n        o.editedFeatureResults.push({\n          layerId: e.id,\n          editedFeatures: {\n            adds: t?.map(e => this._createEditedFeature(e, i)) || [],\n            updates: r?.map(e => ({\n              original: this._createEditedFeature(e[0], i),\n              current: this._createEditedFeature(e[1], i)\n            })) || [],\n            deletes: s?.map(e => this._createEditedFeature(e, i)) || [],\n            spatialReference: i\n          }\n        });\n      }\n    }\n\n    return o;\n  }\n\n  _createEditedFeature(e, r) {\n    return new t({\n      attributes: e.attributes,\n      geometry: f({ ...e.geometry,\n        spatialReference: r\n      })\n    });\n  }\n\n  _createFeatureEditResult(e) {\n    const t = !0 === e.success ? null : e.error || {\n      code: void 0,\n      description: void 0\n    };\n    return {\n      objectId: e.objectId,\n      globalId: e.globalId,\n      error: t ? new a(\"feature-layer-source:edit-failure\", t.description, {\n        code: t.code\n      }) : null\n    };\n  }\n\n  _createAttachmentErrorResult(e, t) {\n    const r = t.details.messages && t.details.messages[0] || t.message,\n          s = t.details.httpStatus || t.details.messageCode;\n    return {\n      objectId: e,\n      globalId: null,\n      error: new a(\"feature-layer-source:attachment-failure\", r, {\n        code: s\n      })\n    };\n  }\n\n  _getFormDataForAttachment(e, t) {\n    const r = e instanceof FormData ? e : e && e.elements ? new FormData(e) : null;\n    if (r) for (const s in t) {\n      const e = t[s];\n      null != e && (r.set ? r.set(s, e) : r.append(s, e));\n    }\n    return r;\n  }\n\n  _getLayerRequestOptions(e = {}) {\n    const {\n      parsedUrl: t,\n      gdbVersion: r,\n      dynamicDataSource: s\n    } = this.layer;\n    return { ...e,\n      query: {\n        gdbVersion: r,\n        layer: s ? JSON.stringify({\n          source: s\n        }) : void 0,\n        ...t.query,\n        f: \"json\",\n        ...this._createRequestQueryOptions(e)\n      },\n      responseType: \"json\"\n    };\n  }\n\n};\ne([p()], S.prototype, \"type\", void 0), e([p({\n  constructOnly: !0\n})], S.prototype, \"layer\", void 0), e([p({\n  readOnly: !0\n})], S.prototype, \"queryTask\", null), S = e([y(\"esri.layers.graphics.sources.FeatureLayerSource\")], S);\nconst E = S;\nexport { E as default };","map":{"version":3,"names":["_","e","t","r","s","a","i","JSONMap","o","n","isSome","u","isNone","d","setDeepValue","l","debounce","c","dataComponents","h","property","p","subclass","y","m","fromJSON","f","createDrawingInfo","g","R","unapplyEditsZUnitScaling","F","processAttachmentQueryResult","b","q","I","originalAndCurrentFeatures","none","data","Promise","FileReader","readAsDataURL","onload","result","onerror","O","Set","S","constructor","arguments","type","refresh","load","sourceJSON","editingInfo","lastEditDate","dataChanged","updates","_fetchService","extent","signal","addResolvingPromise","layer","resolve","queryTask","capabilities","query","supportsFormatPBF","parsedUrl","dynamicDataSource","infoFor3D","gdbVersion","spatialReference","fieldsIndex","url","path","format","sourceSpatialReference","addAttachment","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","_createFeatureEditResult","addAttachmentResult","_createAttachmentErrorResult","updateAttachment","attachmentId","updateAttachmentResult","applyEdits","addFeatures","map","_serializeFeature","updateFeatures","_getFeatureIds","deleteFeatures","globalIdUsed","deleteAttachments","addAttachments","push","_serializeAttachment","updateAttachments","length","adds","deletes","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","attachments","toJSON","returnServiceEditsInSourceSR","join","method","_createEditsResult","attachmentIds","deleteAttachmentResults","fetchRecomputedExtents","then","returnUpdates","fullExtent","timeExtent","start","end","queryAttachments","get","objectIds","all","parentObjectId","attachmentInfos","executeAttachmentQuery","queryFeatures","execute","_createRequestQueryOptions","queryFeaturesJSON","executeJSON","queryObjectIds","executeForIds","queryFeatureCount","executeForCount","queryExtent","executeForExtent","queryRelatedFeatures","executeRelationshipQuery","queryRelatedFeaturesCount","executeRelationshipQueryForCount","queryTopFeatures","executeTopFeaturesQuery","queryTopObjectIds","executeForTopIds","queryTopExtents","executeForTopExtents","queryTopCount","executeForTopCount","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","_patchServiceJSON","has","geometryType","drawingInfo","renderer","defaultSymbol","geometry","feature","attachment","globalId","name","contentType","uploadId","parentGlobalId","globalIdField","mediaType","File","_canUseGlobalIds","_getGlobalIdsFromFeatureIdentifier","_getObjectIdsFromFeatureIdentifier","_getIdsFromFeatures","objectId","Array","isArray","editedFeatures","addResults","updateResults","deleteResults","editMoment","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","_createEditedFeature","original","current","success","error","code","description","details","messages","message","httpStatus","messageCode","FormData","elements","set","append","source","responseType","prototype","constructOnly","readOnly","E","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../request.js\";import s from\"../../../TimeExtent.js\";import a from\"../../../core/Error.js\";import i from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import n from\"../../../core/Loadable.js\";import{isSome as u,isNone as d}from\"../../../core/maybe.js\";import{setDeepValue as l}from\"../../../core/object.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{dataComponents as h}from\"../../../core/urlUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../geometry/Extent.js\";import{fromJSON as f}from\"../../../geometry/support/jsonUtils.js\";import{createDrawingInfo as g}from\"./support/clientSideDefaults.js\";import R from\"./support/QueryTask.js\";import{unapplyEditsZUnitScaling as F}from\"../../../rest/query/operations/editsZScale.js\";import{processAttachmentQueryResult as b}from\"../../../rest/query/operations/queryAttachments.js\";import q from\"../../../geometry/SpatialReference.js\";const I=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"});async function _(e){if(\"string\"==typeof e){const t=h(e);return t||{data:e}}return new Promise(((t,r)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(h(s.result)),s.onerror=e=>r(e)}))}const O=new Set([\"Feature Layer\",\"Table\"]);let S=class extends n{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}))}load(e){const t=u(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:t,dynamicDataSource:r,infoFor3D:s,gdbVersion:a,spatialReference:o,fieldsIndex:n}=this.layer,u=i(\"featurelayer-pbf\")&&e&&d(s)?\"pbf\":\"json\";return new R({url:t.path,format:u,fieldsIndex:n,infoFor3D:s,dynamicDataSource:r,gdbVersion:a,sourceSpatialReference:o})}async addAttachment(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/addAttachment\",i=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,i.query);try{const e=await r(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(s,n)}}async updateAttachment(e,t,s){await this.load();const a=e.attributes[this.layer.objectIdField],i=this.layer.parsedUrl.path+\"/\"+a+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(s,o.query);try{const e=await r(i,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async applyEdits(e,t){await this.load();const s=e.addFeatures.map(this._serializeFeature,this),a=e.updateFeatures.map(this._serializeFeature,this),i=this._getFeatureIds(e.deleteFeatures,t?.globalIdUsed);F(s,a,this.layer.spatialReference);const o=[],n=[],u=[...e.deleteAttachments];for(const r of e.addAttachments)o.push(await this._serializeAttachment(r));for(const r of e.updateAttachments)n.push(await this._serializeAttachment(r));const d=o.length||n.length||u.length?{adds:o,updates:n,deletes:u}:null,l={gdbVersion:t?.gdbVersion||this.layer.gdbVersion,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:t?.globalIdUsed,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,sessionId:t?.sessionId};t?.returnServiceEditsOption?(l.edits=JSON.stringify([{id:this.layer.layerId,adds:s,updates:a,deletes:i,attachments:d}]),l.returnServiceEditsOption=I.toJSON(t?.returnServiceEditsOption),l.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(l.adds=s.length?JSON.stringify(s):null,l.updates=a.length?JSON.stringify(a):null,l.deletes=i.length?t?.globalIdUsed?JSON.stringify(i):i.join(\",\"):null,l.attachments=d&&JSON.stringify(d));const c=this._getLayerRequestOptions({method:\"post\",query:l}),h=t?.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,p=await r(h+\"/applyEdits\",c);return this._createEditsResult(p)}async deleteAttachments(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/deleteAttachments\";try{return(await r(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(i){throw this._createAttachmentErrorResult(s,i)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await r(`${i}/${a}`,t),{id:n,extent:u,fullExtent:d,timeExtent:l}=o,c=u||d;return{id:n,fullExtent:c&&m.fromJSON(c),timeExtent:l&&s.fromJSON({start:l[0],end:l[1]})}}))}async queryAttachments(e,t={}){const{parsedUrl:s}=this.layer,a=s.path;await this.load();const i=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,s=[];for(const e of t){const t=a+\"/\"+e+\"/attachments\";s.push(r(t,i))}return Promise.all(s).then((e=>t.map(((t,r)=>({parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}))))).then((e=>b(e,a)))}return this.queryTask.executeAttachmentQuery(e,i)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:s}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:i(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:t}));e=s}this.sourceJSON=this._patchServiceJSON(e);const s=e.type;if(!O.has(s))throw new a(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}_patchServiceJSON(e){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=g(e.geometryType).renderer;l(\"drawingInfo.renderer\",t,e)}return\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),e}_serializeFeature(e){const{geometry:t,attributes:r}=e;return d(t)?{attributes:r}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:r}}async _serializeAttachment(e){const{feature:t,attachment:r}=e,{globalId:s,name:a,contentType:i,data:o,uploadId:n}=r,u={globalId:s,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(o){const e=await _(o);u.contentType=e.mediaType,u.data=e.data,o instanceof File&&(u.name=o.name)}return a&&(u.name=a),i&&(u.contentType=i),u}_getFeatureIds(e,t){const r=e[0];return r?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):\"objectId\"in r?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map((e=>e.attributes&&e.attributes[t]))}_canUseGlobalIds(e,t){return e&&\"globalId\"in t[0]}_getObjectIdsFromFeatureIdentifier(e){return e.map((e=>e.objectId))}_getGlobalIdsFromFeatureIdentifier(e){return e.map((e=>e.globalId))}_createEditsResult(e){const t=e.data,{layerId:r}=this.layer,s=[];let a=null;if(Array.isArray(t))for(const n of t)s.push({id:n.id,editedFeatures:n.editedFeatures}),n.id===r&&(a={addResults:n.addResults,updateResults:n.updateResults,deleteResults:n.deleteResults,attachments:n.attachments,editMoment:n.editMoment});else a=t;const i=a?.attachments,o={addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:i&&i.addResults?i.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:i&&i.updateResults?i.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:i&&i.deleteResults?i.deleteResults.map(this._createFeatureEditResult,this):[]};if(a.editMoment&&(o.editMoment=a.editMoment),s.length>0){o.editedFeatureResults=[];for(const e of s){const{adds:t,updates:r,deletes:s,spatialReference:a}=e.editedFeatures,i=a?new q(a):null;o.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:t?.map((e=>this._createEditedFeature(e,i)))||[],updates:r?.map((e=>({original:this._createEditedFeature(e[0],i),current:this._createEditedFeature(e[1],i)})))||[],deletes:s?.map((e=>this._createEditedFeature(e,i)))||[],spatialReference:i}})}}return o}_createEditedFeature(e,r){return new t({attributes:e.attributes,geometry:f({...e.geometry,spatialReference:r})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new a(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const r=t.details.messages&&t.details.messages[0]||t.message,s=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new a(\"feature-layer-source:attachment-failure\",r,{code:s})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const s in t){const e=t[s];null!=e&&(r.set?r.set(s,e):r.append(s,e))}return r}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:r,dynamicDataSource:s}=this.layer;return{...e,query:{gdbVersion:r,layer:s?JSON.stringify({source:s}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}};e([p()],S.prototype,\"type\",void 0),e([p({constructOnly:!0})],S.prototype,\"layer\",void 0),e([p({readOnly:!0})],S.prototype,\"queryTask\",null),S=e([y(\"esri.layers.graphics.sources.FeatureLayerSource\")],S);const E=S;export{E as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}