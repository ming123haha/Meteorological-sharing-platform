{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { equals as i } from \"../../../../core/arrayUtils.js\";\nimport r from \"../../../../core/Handles.js\";\nimport { smoothstep as s } from \"../../../../core/mathUtils.js\";\nimport { isNone as o, disposeMaybe as a, releaseMaybe as n } from \"../../../../core/maybe.js\";\nimport { watch as h, syncAndInitial as c } from \"../../../../core/reactiveUtils.js\";\nimport { property as _ } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as u } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { z as l, c as m } from \"../../../../chunks/vec3.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { ShaderTechniqueConfiguration as d } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { BindParameters as g } from \"./BindParameters.js\";\nimport { Camera as f } from \"./Camera.js\";\nimport { ZERO as w } from \"./depthRange.js\";\nimport { createQuadVAO as v } from \"./glUtil3D.js\";\nimport { ShadowCastRenderer as b, shadowCastDisabledElevationThreshold as A, shadowCastDisableElevationMax as y, shadowCastDisableElevationMin as R } from \"./ShadowCastRenderer.js\";\nimport { ShadowMap as T } from \"./ShadowMap.js\";\nimport { S, s as D } from \"../../../../chunks/ShadowCastAccumulate.glsl.js\";\nimport { ShadowCastAccumulateTechnique as j } from \"../shaders/ShadowCastAccumulateTechnique.js\";\nimport { TaskPriority as C } from \"../../../support/Scheduler.js\";\nimport { TargetType as F, DepthStencilTargetType as E, TextureType as P, PixelFormat as q, PixelType as x, TextureSamplingMode as M, TextureWrapMode as U, ClearBufferBit as O } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as L } from \"../../../webgl/FramebufferObject.js\";\nimport { vertexCount as B } from \"../../../webgl/Util.js\";\nvar I;\nlet N = I = class extends t {\n  constructor(e, t, i, s, a, n) {\n    super({}), this._rctx = e, this._stage = i, this._prepareForShadowMapPass = s, this._renderToShadowMap = a, this._requestRender = n, this._progress = 0, this._sampleCount = 0, this._passParameters = new S(), this._enabled = !1, this._cachedLightDirections = [], this._depthRange = w, this._previewing = !1, this._handles = new r(), this._cameraForcedForScreenshot = !1, this._bindParameters = new g(new T(e, i.viewingMode), null, null), this._bindParameters.shadowMap.enabled = !0, this._bindParameters.camera = new f(), this._vao = v(e);\n    const _ = {\n      colorTarget: F.TEXTURE,\n      depthStencilTarget: E.NONE,\n      width: 0,\n      height: 0\n    },\n          u = {\n      target: P.TEXTURE_2D,\n      pixelFormat: q.RGBA,\n      dataType: x.UNSIGNED_BYTE,\n      samplingMode: M.LINEAR,\n      wrapMode: U.CLAMP_TO_EDGE,\n      width: 0,\n      height: 0\n    };\n    this._fbo = new L(e, _, u), this._accumulationRenderer = new b(t, e, this, n);\n    const l = this._stage.resourceController.scheduler;\n    this._handles.add(l.registerTask(C.SHADOW_ACCUMULATOR, this)), this._handles.add(h(() => i.renderView, e => {\n      this._handles.remove(I.renderViewHandleKey), o(e) || this._handles.add(e.events.on(\"force-camera-for-screenshot\", () => this._cameraForcedForScreenshot = !0), I.renderViewHandleKey);\n    }, c));\n  }\n\n  normalizeCtorArgs() {\n    return {};\n  }\n\n  get computedSamples() {\n    return this._progress;\n  }\n\n  get shadowCastTexture() {\n    return this._fbo.colorTexture;\n  }\n\n  get isAccumulating() {\n    return this._isPreviewing || this._isRefining;\n  }\n\n  get accumulationTechnique() {\n    if (o(this._accumulationTechnique)) {\n      const e = {\n        rctx: this._rctx,\n        viewingMode: this._stage.viewingMode\n      };\n      this._accumulationTechnique = new j(e, new d());\n    }\n\n    return this._accumulationTechnique;\n  }\n\n  get _isRefining() {\n    return this._isActive && !this._isDoneAccumulating && !this._previewing;\n  }\n\n  get _isPreviewing() {\n    return this._isActive && this._previewing;\n  }\n\n  get _isActive() {\n    return this._enabled && this._sampleCount > 0;\n  }\n\n  get canAccumulate() {\n    return null !== this._passParameters.linearDepthTexture && this._depthRange !== w && this._opacityFromElevation > A;\n  }\n\n  get _isDoneAccumulating() {\n    return this._progress >= this._sampleCount;\n  }\n\n  get _lightDirections() {\n    return this._cachedLightDirections;\n  }\n\n  set _lightDirections(e) {\n    const t = this._cachedLightDirections;\n    if (i(t, e, l)) return;\n    const r = e.length;\n    t.length = r, this._sampleCount = Math.min(D, r);\n\n    for (let i = 0; i < r; ++i) {\n      const r = e[i],\n            s = t[i] || p();\n      m(s, r), t[i] = s;\n    }\n\n    this._invalidate();\n  }\n\n  get _opacityFromElevation() {\n    return this._accumulationRenderer.opacityFromElevation;\n  }\n\n  set _opacityFromElevation(e) {\n    this._accumulationRenderer.opacityFromElevation = e;\n  }\n\n  get running() {\n    return this._isRefining && this.canAccumulate && this._progress > 0;\n  }\n\n  runTask(e) {\n    for (this._prepareForShadowMapPass(this._bindParameters); !e.done && !this._isDoneAccumulating;) this._accumulateShadow(), e.madeProgress();\n\n    this._requestRender();\n  }\n\n  renderAccumulation(e, t, i, r) {\n    if (this._passParameters.linearDepthTexture = e, this._depthRange = t, this._updateCamera(i), this._bindParameters.contentCamera = r, this.notifyChange(\"canAccumulate\"), !this.isAccumulating || !this.canAccumulate) return;\n    (this._previewing || 0 === this._progress || this._cameraForcedForScreenshot) && this._clear();\n    const s = this._cameraForcedForScreenshot ? this._sampleCount : Math.min(I.previewSamples, this._sampleCount - this._progress);\n\n    for (let o = 0; o < s; ++o) this._accumulateShadow();\n\n    this._cameraForcedForScreenshot = !1;\n  }\n\n  render(e) {\n    this._accumulationRenderer.render(e);\n  }\n\n  dispose() {\n    this._stop(), this._handles.destroy(), this._accumulationRenderer = a(this._accumulationRenderer), this._bindParameters.shadowMap.dispose(), this._fbo = a(this._fbo), this._vao = a(this._vao), this._accumulationTechnique = n(this._accumulationTechnique), this._cachedLightDirections.length = 0, this._sampleCount = 0;\n  }\n\n  setOptions(e) {\n    void 0 !== e.enabled && (this.enabled = e.enabled), void 0 !== e.previewing && (this.previewing = e.previewing), void 0 !== e.lightDirections && (this.lightDirections = e.lightDirections), this._accumulationRenderer.setOptions(e);\n  }\n\n  set previewing(e) {\n    this._previewing !== e && (this._previewing = e, this._requestRenderIfEnabled());\n  }\n\n  set lightDirections(e) {\n    this._lightDirections = e;\n  }\n\n  readAccumulatedShadow(e, t) {\n    if (!this._isActive || this._progress < 1 || e < 0 || e > this._fbo.width || t < 0 || t > this._fbo.height) return 0;\n    const i = k;\n    return this._fbo.readPixels(e, t, 1, 1, q.RGBA, x.UNSIGNED_BYTE, i), i[0] / this._progress;\n  }\n\n  _start() {\n    this._progress = 0, this._enabled = !0;\n  }\n\n  _stop() {\n    this._enabled = !1;\n  }\n\n  _invalidate() {\n    this._progress = 0, this._requestRenderIfEnabled();\n  }\n\n  _clear() {\n    this._rctx.bindFramebuffer(this._fbo), this._rctx.setClearColor(0, 0, 0, 0), this._rctx.clearSafe(O.COLOR_BUFFER_BIT), this._progress = 0;\n  }\n\n  _accumulateShadow() {\n    const e = this._lightDirections[this._progress];\n    this._renderToShadowMap(this._bindParameters, e, this._depthRange), this._passParameters.origin = this._bindParameters.camera.center, this._rctx.bindFramebuffer(this._fbo);\n    const t = this.accumulationTechnique;\n    this._rctx.bindTechnique(t, this._passParameters, this._bindParameters), this._rctx.bindVAO(this._vao), this._rctx.drawArrays(t.primitiveType, 0, B(this._vao, \"geometry\")), this._progress++;\n  }\n\n  _updateCamera(e) {\n    e.equals(this._bindParameters.camera) || (this._bindParameters.camera.copyFrom(e), this._fbo.resize(e.fullWidth, e.fullHeight), this._opacityFromElevation = 1 - s(R, y, e.relativeElevation));\n  }\n\n  set enabled(e) {\n    e !== this._enabled && (e ? this._start() : this._stop());\n  }\n\n  _requestRenderIfEnabled() {\n    this._enabled && this._requestRender();\n  }\n\n  get test() {\n    const e = this;\n    return {\n      lightDirections: this._lightDirections,\n\n      get isDone() {\n        return e._isDoneAccumulating;\n      },\n\n      get isActive() {\n        return e._isActive;\n      }\n\n    };\n  }\n\n};\nN.previewSamples = 6, N.renderViewHandleKey = \"renderView\", e([_()], N.prototype, \"_progress\", void 0), e([_()], N.prototype, \"_sampleCount\", void 0), e([_()], N.prototype, \"_enabled\", void 0), e([_()], N.prototype, \"_depthRange\", void 0), e([_()], N.prototype, \"_previewing\", void 0), e([_()], N.prototype, \"_accumulationRenderer\", void 0), e([_()], N.prototype, \"_isRefining\", null), e([_()], N.prototype, \"_isActive\", null), e([_()], N.prototype, \"canAccumulate\", null), e([_()], N.prototype, \"_isDoneAccumulating\", null), e([_()], N.prototype, \"_opacityFromElevation\", null), e([_()], N.prototype, \"running\", null), N = I = e([u(\"esri.views.3d.webgl-engine.lib.ShadowAccumulator\")], N);\nconst k = new Uint8Array(4);\nexport { N as ShadowAccumulator };","map":{"version":3,"names":["_","e","t","equals","i","r","smoothstep","s","isNone","o","disposeMaybe","a","releaseMaybe","n","watch","h","syncAndInitial","c","property","subclass","u","z","l","m","p","ShaderTechniqueConfiguration","d","BindParameters","g","Camera","f","ZERO","w","createQuadVAO","v","ShadowCastRenderer","b","shadowCastDisabledElevationThreshold","A","shadowCastDisableElevationMax","y","shadowCastDisableElevationMin","R","ShadowMap","T","S","D","ShadowCastAccumulateTechnique","j","TaskPriority","C","TargetType","F","DepthStencilTargetType","E","TextureType","P","PixelFormat","q","PixelType","x","TextureSamplingMode","M","TextureWrapMode","U","ClearBufferBit","O","FramebufferObject","L","vertexCount","B","I","N","constructor","_rctx","_stage","_prepareForShadowMapPass","_renderToShadowMap","_requestRender","_progress","_sampleCount","_passParameters","_enabled","_cachedLightDirections","_depthRange","_previewing","_handles","_cameraForcedForScreenshot","_bindParameters","viewingMode","shadowMap","enabled","camera","_vao","colorTarget","TEXTURE","depthStencilTarget","NONE","width","height","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","LINEAR","wrapMode","CLAMP_TO_EDGE","_fbo","_accumulationRenderer","resourceController","scheduler","add","registerTask","SHADOW_ACCUMULATOR","renderView","remove","renderViewHandleKey","events","on","normalizeCtorArgs","computedSamples","shadowCastTexture","colorTexture","isAccumulating","_isPreviewing","_isRefining","accumulationTechnique","_accumulationTechnique","rctx","_isActive","_isDoneAccumulating","canAccumulate","linearDepthTexture","_opacityFromElevation","_lightDirections","length","Math","min","_invalidate","opacityFromElevation","running","runTask","done","_accumulateShadow","madeProgress","renderAccumulation","_updateCamera","contentCamera","notifyChange","_clear","previewSamples","render","dispose","_stop","destroy","setOptions","previewing","lightDirections","_requestRenderIfEnabled","readAccumulatedShadow","k","readPixels","_start","bindFramebuffer","setClearColor","clearSafe","COLOR_BUFFER_BIT","origin","center","bindTechnique","bindVAO","drawArrays","primitiveType","copyFrom","resize","fullWidth","fullHeight","relativeElevation","test","isDone","isActive","prototype","Uint8Array","ShadowAccumulator"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowAccumulator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{equals as i}from\"../../../../core/arrayUtils.js\";import r from\"../../../../core/Handles.js\";import{smoothstep as s}from\"../../../../core/mathUtils.js\";import{isNone as o,disposeMaybe as a,releaseMaybe as n}from\"../../../../core/maybe.js\";import{watch as h,syncAndInitial as c}from\"../../../../core/reactiveUtils.js\";import{property as _}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{z as l,c as m}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{ShaderTechniqueConfiguration as d}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{BindParameters as g}from\"./BindParameters.js\";import{Camera as f}from\"./Camera.js\";import{ZERO as w}from\"./depthRange.js\";import{createQuadVAO as v}from\"./glUtil3D.js\";import{ShadowCastRenderer as b,shadowCastDisabledElevationThreshold as A,shadowCastDisableElevationMax as y,shadowCastDisableElevationMin as R}from\"./ShadowCastRenderer.js\";import{ShadowMap as T}from\"./ShadowMap.js\";import{S,s as D}from\"../../../../chunks/ShadowCastAccumulate.glsl.js\";import{ShadowCastAccumulateTechnique as j}from\"../shaders/ShadowCastAccumulateTechnique.js\";import{TaskPriority as C}from\"../../../support/Scheduler.js\";import{TargetType as F,DepthStencilTargetType as E,TextureType as P,PixelFormat as q,PixelType as x,TextureSamplingMode as M,TextureWrapMode as U,ClearBufferBit as O}from\"../../../webgl/enums.js\";import{FramebufferObject as L}from\"../../../webgl/FramebufferObject.js\";import{vertexCount as B}from\"../../../webgl/Util.js\";var I;let N=I=class extends t{constructor(e,t,i,s,a,n){super({}),this._rctx=e,this._stage=i,this._prepareForShadowMapPass=s,this._renderToShadowMap=a,this._requestRender=n,this._progress=0,this._sampleCount=0,this._passParameters=new S,this._enabled=!1,this._cachedLightDirections=[],this._depthRange=w,this._previewing=!1,this._handles=new r,this._cameraForcedForScreenshot=!1,this._bindParameters=new g(new T(e,i.viewingMode),null,null),this._bindParameters.shadowMap.enabled=!0,this._bindParameters.camera=new f,this._vao=v(e);const _={colorTarget:F.TEXTURE,depthStencilTarget:E.NONE,width:0,height:0},u={target:P.TEXTURE_2D,pixelFormat:q.RGBA,dataType:x.UNSIGNED_BYTE,samplingMode:M.LINEAR,wrapMode:U.CLAMP_TO_EDGE,width:0,height:0};this._fbo=new L(e,_,u),this._accumulationRenderer=new b(t,e,this,n);const l=this._stage.resourceController.scheduler;this._handles.add(l.registerTask(C.SHADOW_ACCUMULATOR,this)),this._handles.add(h((()=>i.renderView),(e=>{this._handles.remove(I.renderViewHandleKey),o(e)||this._handles.add(e.events.on(\"force-camera-for-screenshot\",(()=>this._cameraForcedForScreenshot=!0)),I.renderViewHandleKey)}),c))}normalizeCtorArgs(){return{}}get computedSamples(){return this._progress}get shadowCastTexture(){return this._fbo.colorTexture}get isAccumulating(){return this._isPreviewing||this._isRefining}get accumulationTechnique(){if(o(this._accumulationTechnique)){const e={rctx:this._rctx,viewingMode:this._stage.viewingMode};this._accumulationTechnique=new j(e,new d)}return this._accumulationTechnique}get _isRefining(){return this._isActive&&!this._isDoneAccumulating&&!this._previewing}get _isPreviewing(){return this._isActive&&this._previewing}get _isActive(){return this._enabled&&this._sampleCount>0}get canAccumulate(){return null!==this._passParameters.linearDepthTexture&&this._depthRange!==w&&this._opacityFromElevation>A}get _isDoneAccumulating(){return this._progress>=this._sampleCount}get _lightDirections(){return this._cachedLightDirections}set _lightDirections(e){const t=this._cachedLightDirections;if(i(t,e,l))return;const r=e.length;t.length=r,this._sampleCount=Math.min(D,r);for(let i=0;i<r;++i){const r=e[i],s=t[i]||p();m(s,r),t[i]=s}this._invalidate()}get _opacityFromElevation(){return this._accumulationRenderer.opacityFromElevation}set _opacityFromElevation(e){this._accumulationRenderer.opacityFromElevation=e}get running(){return this._isRefining&&this.canAccumulate&&this._progress>0}runTask(e){for(this._prepareForShadowMapPass(this._bindParameters);!e.done&&!this._isDoneAccumulating;)this._accumulateShadow(),e.madeProgress();this._requestRender()}renderAccumulation(e,t,i,r){if(this._passParameters.linearDepthTexture=e,this._depthRange=t,this._updateCamera(i),this._bindParameters.contentCamera=r,this.notifyChange(\"canAccumulate\"),!this.isAccumulating||!this.canAccumulate)return;(this._previewing||0===this._progress||this._cameraForcedForScreenshot)&&this._clear();const s=this._cameraForcedForScreenshot?this._sampleCount:Math.min(I.previewSamples,this._sampleCount-this._progress);for(let o=0;o<s;++o)this._accumulateShadow();this._cameraForcedForScreenshot=!1}render(e){this._accumulationRenderer.render(e)}dispose(){this._stop(),this._handles.destroy(),this._accumulationRenderer=a(this._accumulationRenderer),this._bindParameters.shadowMap.dispose(),this._fbo=a(this._fbo),this._vao=a(this._vao),this._accumulationTechnique=n(this._accumulationTechnique),this._cachedLightDirections.length=0,this._sampleCount=0}setOptions(e){void 0!==e.enabled&&(this.enabled=e.enabled),void 0!==e.previewing&&(this.previewing=e.previewing),void 0!==e.lightDirections&&(this.lightDirections=e.lightDirections),this._accumulationRenderer.setOptions(e)}set previewing(e){this._previewing!==e&&(this._previewing=e,this._requestRenderIfEnabled())}set lightDirections(e){this._lightDirections=e}readAccumulatedShadow(e,t){if(!this._isActive||this._progress<1||e<0||e>this._fbo.width||t<0||t>this._fbo.height)return 0;const i=k;return this._fbo.readPixels(e,t,1,1,q.RGBA,x.UNSIGNED_BYTE,i),i[0]/this._progress}_start(){this._progress=0,this._enabled=!0}_stop(){this._enabled=!1}_invalidate(){this._progress=0,this._requestRenderIfEnabled()}_clear(){this._rctx.bindFramebuffer(this._fbo),this._rctx.setClearColor(0,0,0,0),this._rctx.clearSafe(O.COLOR_BUFFER_BIT),this._progress=0}_accumulateShadow(){const e=this._lightDirections[this._progress];this._renderToShadowMap(this._bindParameters,e,this._depthRange),this._passParameters.origin=this._bindParameters.camera.center,this._rctx.bindFramebuffer(this._fbo);const t=this.accumulationTechnique;this._rctx.bindTechnique(t,this._passParameters,this._bindParameters),this._rctx.bindVAO(this._vao),this._rctx.drawArrays(t.primitiveType,0,B(this._vao,\"geometry\")),this._progress++}_updateCamera(e){e.equals(this._bindParameters.camera)||(this._bindParameters.camera.copyFrom(e),this._fbo.resize(e.fullWidth,e.fullHeight),this._opacityFromElevation=1-s(R,y,e.relativeElevation))}set enabled(e){e!==this._enabled&&(e?this._start():this._stop())}_requestRenderIfEnabled(){this._enabled&&this._requestRender()}get test(){const e=this;return{lightDirections:this._lightDirections,get isDone(){return e._isDoneAccumulating},get isActive(){return e._isActive}}}};N.previewSamples=6,N.renderViewHandleKey=\"renderView\",e([_()],N.prototype,\"_progress\",void 0),e([_()],N.prototype,\"_sampleCount\",void 0),e([_()],N.prototype,\"_enabled\",void 0),e([_()],N.prototype,\"_depthRange\",void 0),e([_()],N.prototype,\"_previewing\",void 0),e([_()],N.prototype,\"_accumulationRenderer\",void 0),e([_()],N.prototype,\"_isRefining\",null),e([_()],N.prototype,\"_isActive\",null),e([_()],N.prototype,\"canAccumulate\",null),e([_()],N.prototype,\"_isDoneAccumulating\",null),e([_()],N.prototype,\"_opacityFromElevation\",null),e([_()],N.prototype,\"running\",null),N=I=e([u(\"esri.views.3d.webgl-engine.lib.ShadowAccumulator\")],N);const k=new Uint8Array(4);export{N as ShadowAccumulator};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}