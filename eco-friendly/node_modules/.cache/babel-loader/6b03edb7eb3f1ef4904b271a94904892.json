{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/BidiEngine.js\";\nimport { numericHash as t } from \"../../../../../core/string.js\";\nimport { BucketType as n } from \"../enums.js\";\nimport { C_DEG_TO_RAD as i, log2 as s, interpolate as a } from \"../GeometryUtils.js\";\nimport { TILE_PIXEL_RATIO as o, Anchor as r, TILE_COORD_SIZE as l } from \"../Placement.js\";\nimport { SDF_GLYPH_SIZE as h, TextShaping as x } from \"../TextShaping.js\";\nimport c from \"./BaseBucket.js\";\nimport { TextTransform as d, SymbolPlacement as g, TextWritingMode as f, SymbolAnchor as y, TextJustification as m, RotationAlignment as u } from \"../style/StyleDefinition.js\";\nimport { IconLayout as p, TextLayout as _ } from \"../style/StyleLayer.js\";\nimport { GeometryType as M, Point as P } from \"../../webgl/Geometry.js\";\nconst I = 10;\n\nfunction b(e, t) {\n  return e.iconMosaicItem && t.iconMosaicItem ? e.iconMosaicItem.page === t.iconMosaicItem.page ? 0 : e.iconMosaicItem.page - t.iconMosaicItem.page : e.iconMosaicItem && !t.iconMosaicItem ? 1 : !e.iconMosaicItem && t.iconMosaicItem ? -1 : 0;\n}\n\nclass A extends c {\n  constructor(e, t, i, s, a, o, r, l) {\n    super(e, t, l.getSpriteItems()), this.type = n.SYMBOL, this._markerMap = new Map(), this._glyphMap = new Map(), this._glyphBufferDataStorage = new Map(), this._isIconSDF = !1, this._iconVertexBuffer = i, this._iconIndexBuffer = s, this._textVertexBuffer = a, this._textIndexBuffer = o, this._placementEngine = r, this._workerTileHandler = l;\n  }\n\n  get markerPageMap() {\n    return this._markerMap;\n  }\n\n  get glyphsPageMap() {\n    return this._glyphMap;\n  }\n\n  get symbolInstances() {\n    return this._symbolInstances;\n  }\n\n  getResources(e, n, i) {\n    const s = this.layer,\n          a = this.zoom;\n    e && e.setExtent(this.layerExtent);\n    const o = s.getLayoutProperty(\"icon-image\"),\n          r = s.getLayoutProperty(\"text-field\");\n    let l = s.getLayoutProperty(\"text-transform\"),\n        h = s.getLayoutProperty(\"text-font\");\n    const x = [];\n    let c, g, f, y;\n    o && !o.isDataDriven && (c = o.getValue(a)), r && !r.isDataDriven && (g = r.getValue(a)), l && l.isDataDriven || (f = s.getLayoutValue(\"text-transform\", a), l = null), h && h.isDataDriven || (y = s.getLayoutValue(\"text-font\", a), h = null);\n\n    for (const m of this._features) {\n      const u = m.getGeometry(e);\n      if (!u || 0 === u.length) continue;\n\n      let p, _;\n\n      o && (p = o.isDataDriven ? o.getValue(a, m) : this._replaceKeys(c, m.values), p && n(p));\n      let M = !1;\n\n      if (r && (_ = r.isDataDriven ? r.getValue(a, m) : this._replaceKeys(g, m.values), _)) {\n        switch (_ = _.replace(/\\\\n/g, \"\\n\"), l && (f = l.getValue(a, m)), f) {\n          case d.LOWERCASE:\n            _ = _.toLowerCase();\n            break;\n\n          case d.UPPERCASE:\n            _ = _.toUpperCase();\n        }\n\n        if (A._bidiEngine.hasBidiChar(_)) {\n          let e;\n          e = \"rtl\" === A._bidiEngine.checkContextual(_) ? \"IDNNN\" : \"ICNNN\", _ = A._bidiEngine.bidiTransform(_, e, \"VLYSN\"), M = !0;\n        }\n\n        const e = _.length;\n\n        if (e > 0) {\n          h && (y = h.getValue(a, m));\n\n          for (const t of y) {\n            let n = i[t];\n            n || (n = i[t] = new Set());\n\n            for (let t = 0; t < e; t++) {\n              const e = _.charCodeAt(t);\n\n              n.add(e);\n            }\n          }\n        }\n      }\n\n      if (!p && !_) continue;\n      const P = s.getLayoutValue(\"symbol-sort-key\", a, m),\n            I = {\n        feature: m,\n        sprite: p,\n        label: _,\n        rtl: M,\n        geometry: u,\n        hash: (_ ? t(_) : 0) ^ (p ? t(p) : 0),\n        priority: P,\n        textFont: y\n      };\n      x.push(I);\n    }\n\n    this._symbolFeatures = x;\n  }\n\n  processFeatures(e) {\n    e && e.setExtent(this.layerExtent);\n    const t = this.layer,\n          n = this.zoom,\n          s = t.getLayoutValue(\"symbol-placement\", n),\n          a = s !== g.POINT,\n          c = t.getLayoutValue(\"symbol-spacing\", n) * o,\n          d = t.getLayoutProperty(\"icon-image\"),\n          P = t.getLayoutProperty(\"text-field\"),\n          I = d ? new p(t, n, a) : null,\n          L = P ? new _(t, n, a) : null,\n          V = this._workerTileHandler;\n    let T;\n    d && (T = V.getSpriteItems()), this._iconIndexStart = 3 * this._iconIndexBuffer.index, this._textIndexStart = 3 * this._textIndexBuffer.index, this._iconIndexCount = 0, this._textIndexCount = 0, this._markerMap.clear(), this._glyphMap.clear();\n    const w = [];\n    let B = 1;\n    L && L.size && (B = L.size / h);\n    const C = L ? L.maxAngle * i : 0,\n          R = L ? L.size * o : 0;\n\n    for (const i of this._symbolFeatures) {\n      let e;\n      I && T && i.sprite && (e = T[i.sprite], e && e.sdf && (this._isIconSDF = !0));\n      let t;\n      !!e && I.update(n, i.feature);\n      let d = 0;\n      const p = i.label;\n\n      if (p) {\n        L.update(n, i.feature);\n        const e = a ? L.keepUpright : L.writingMode && L.writingMode.includes(f.VERTICAL);\n        let s = .5;\n\n        switch (L.anchor) {\n          case y.TOP_LEFT:\n          case y.LEFT:\n          case y.BOTTOM_LEFT:\n            s = 0;\n            break;\n\n          case y.TOP_RIGHT:\n          case y.RIGHT:\n          case y.BOTTOM_RIGHT:\n            s = 1;\n        }\n\n        let r = .5;\n\n        switch (L.anchor) {\n          case y.TOP_LEFT:\n          case y.TOP:\n          case y.TOP_RIGHT:\n            r = 0;\n            break;\n\n          case y.BOTTOM_LEFT:\n          case y.BOTTOM:\n          case y.BOTTOM_RIGHT:\n            r = 1;\n        }\n\n        let l = .5;\n\n        switch (L.justify) {\n          case m.AUTO:\n            l = s;\n            break;\n\n          case m.LEFT:\n            l = 0;\n            break;\n\n          case m.RIGHT:\n            l = 1;\n        }\n\n        const c = L.letterSpacing * h,\n              g = a ? 0 : L.maxWidth * h,\n              u = L.lineHeight * h,\n              _ = i.textFont.map(e => V.getGlyphItems(e));\n\n        if (t = new x(_, g, u, c, s, r, l).getShaping(p, i.rtl, e), t && t.length > 0) {\n          let e = 1e30,\n              n = -1e30;\n\n          for (const i of t) e = Math.min(e, i.x), n = Math.max(n, i.x);\n\n          d = (n - e + 2 * h) * B * o;\n        }\n      }\n\n      for (let n of i.geometry) {\n        const h = [];\n\n        if (s === g.LINE) {\n          if (t && t.length > 0 && L && L.size) {\n            const e = L.size * o * (2 + Math.min(2, 4 * Math.abs(L.offset[1])));\n            n = A._smoothVertices(n, e);\n          }\n\n          A._pushAnchors(h, n, c, d);\n        } else s === g.LINE_CENTER ? A._pushCenterAnchor(h, n) : i.feature.type === M.Polygon ? A._pushCentroid(h, n) : h.push(new r(n[0].x, n[0].y));\n\n        for (const s of h) {\n          if (s.x < 0 || s.x > l || s.y < 0 || s.y > l) continue;\n          if (a && d > 0 && L.rotationAlignment === u.MAP && !A._honorsTextMaxAngle(n, s, d, C, R)) continue;\n          const o = {\n            shaping: t,\n            line: n,\n            iconMosaicItem: e,\n            anchor: s,\n            symbolFeature: i,\n            textColliders: [],\n            iconColliders: [],\n            textVertexRanges: [],\n            iconVertexRanges: []\n          };\n          w.push(o), this._processFeature(o, I, L);\n        }\n      }\n    }\n\n    w.sort(b), this._addPlacedGlyphs(), this._symbolInstances = w;\n  }\n\n  serialize() {\n    let e = 11;\n    e += this.layerUIDs.length, e += 3 * this.markerPageMap.size, e += 3 * this.glyphsPageMap.size, e += A._symbolsSerializationLength(this._symbolInstances), e += this._iconVertexBuffer.array.length, e += this._iconIndexBuffer.array.length, e += this._textVertexBuffer.array.length, e += this._textIndexBuffer.array.length;\n    const t = new Uint32Array(e),\n          n = new Int32Array(t.buffer),\n          i = new Float32Array(t.buffer);\n    let s = 0;\n    t[s++] = this.type, t[s++] = this.layerUIDs.length;\n\n    for (let a = 0; a < this.layerUIDs.length; a++) t[s++] = this.layerUIDs[a];\n\n    t[s++] = this._isIconSDF ? 1 : 0, t[s++] = this.markerPageMap.size;\n\n    for (const [a, [o, r]] of this.markerPageMap) t[s++] = a, t[s++] = o, t[s++] = r;\n\n    t[s++] = this.glyphsPageMap.size;\n\n    for (const [a, [o, r]] of this.glyphsPageMap) t[s++] = a, t[s++] = o, t[s++] = r;\n\n    t[s++] = this._iconVertexBuffer.index / 4, t[s++] = this._textVertexBuffer.index / 4, s = A.serializeSymbols(t, n, i, s, this._symbolInstances), t[s++] = this._iconVertexBuffer.array.length;\n\n    for (let a = 0; a < this._iconVertexBuffer.array.length; a++) n[s++] = this._iconVertexBuffer.array[a];\n\n    t[s++] = this._iconIndexBuffer.array.length;\n\n    for (let a = 0; a < this._iconIndexBuffer.array.length; a++) t[s++] = this._iconIndexBuffer.array[a];\n\n    t[s++] = this._textVertexBuffer.array.length;\n\n    for (let a = 0; a < this._textVertexBuffer.array.length; a++) n[s++] = this._textVertexBuffer.array[a];\n\n    t[s++] = this._textIndexBuffer.array.length;\n\n    for (let a = 0; a < this._textIndexBuffer.array.length; a++) t[s++] = this._textIndexBuffer.array[a];\n\n    return t.buffer;\n  }\n\n  static _symbolsSerializationLength(e) {\n    let t = 0;\n    t += 1;\n\n    for (const n of e || []) {\n      t += 4, t += 1;\n\n      for (const e of n.textColliders) t += I;\n\n      for (const e of n.iconColliders) t += I;\n\n      t += 1, t += 2 * n.textVertexRanges.length, t += 1, t += 2 * n.iconVertexRanges.length;\n    }\n\n    return t;\n  }\n\n  static serializeSymbols(e, t, n, i, s) {\n    s = s || [], t[i++] = s.length;\n\n    for (const a of s) {\n      t[i++] = a.anchor.x, t[i++] = a.anchor.y, t[i++] = a.symbolFeature.hash, t[i++] = a.symbolFeature.priority, t[i++] = a.textColliders.length + a.iconColliders.length;\n\n      for (const e of a.textColliders) t[i++] = e.xTile, t[i++] = e.yTile, t[i++] = e.dxPixels, t[i++] = e.dyPixels, t[i++] = e.hard ? 1 : 0, t[i++] = e.partIndex, n[i++] = e.minLod, n[i++] = e.maxLod, t[i++] = e.width, t[i++] = e.height;\n\n      for (const e of a.iconColliders) t[i++] = e.xTile, t[i++] = e.yTile, t[i++] = e.dxPixels, t[i++] = e.dyPixels, t[i++] = e.hard ? 1 : 0, t[i++] = e.partIndex, n[i++] = e.minLod, n[i++] = e.maxLod, t[i++] = e.width, t[i++] = e.height;\n\n      t[i++] = a.textVertexRanges.length;\n\n      for (const [e, n] of a.textVertexRanges) t[i++] = e, t[i++] = n;\n\n      t[i++] = a.iconVertexRanges.length;\n\n      for (const [e, n] of a.iconVertexRanges) t[i++] = e, t[i++] = n;\n    }\n\n    return i;\n  }\n\n  _replaceKeys(e, t) {\n    return e.replace(/{([^{}]+)}/g, (e, n) => n in t ? t[n] : \"\");\n  }\n\n  _processFeature(e, t, n) {\n    const {\n      line: i,\n      iconMosaicItem: a,\n      shaping: o,\n      anchor: r\n    } = e,\n          l = this.zoom,\n          h = this.layer,\n          x = !!a;\n    let c = !0;\n    x && (c = t.optional || !a);\n    const d = o && o.length > 0;\n    let g,\n        f,\n        y = !0;\n\n    if (d && (y = n.optional), x && (g = this._placementEngine.getIconPlacement(r, a, t)), (g || c) && (d && (f = this._placementEngine.getTextPlacement(r, o, i, n)), f || y)) {\n      if (g && f || (y || c ? y || f ? c || g || (f = null) : g = null : (g = null, f = null)), f) {\n        const t = h.hasDataDrivenText ? h.textMaterial.encodeAttributes(e.symbolFeature.feature, l, h) : null;\n\n        if (this._storePlacedGlyphs(e, f.shapes, l, n.rotationAlignment, t), f.textColliders) {\n          e.textColliders = f.textColliders;\n\n          for (const e of f.textColliders) {\n            e.minLod = Math.max(l + s(e.minLod), 0), e.maxLod = Math.min(l + s(e.maxLod), 25);\n            const t = e.angle;\n\n            if (t) {\n              const n = Math.cos(t),\n                    i = Math.sin(t),\n                    s = e.dxPixels * n - e.dyPixels * i,\n                    a = e.dxPixels * i + e.dyPixels * n,\n                    o = (e.dxPixels + e.width) * n - e.dyPixels * i,\n                    r = (e.dxPixels + e.width) * i + e.dyPixels * n,\n                    l = e.dxPixels * n - (e.dyPixels + e.height) * i,\n                    h = e.dxPixels * i + (e.dyPixels + e.height) * n,\n                    x = (e.dxPixels + e.width) * n - (e.dyPixels + e.height) * i,\n                    c = (e.dxPixels + e.width) * i + (e.dyPixels + e.height) * n,\n                    d = Math.min(s, o, l, x),\n                    g = Math.max(s, o, l, x),\n                    f = Math.min(a, r, h, c),\n                    y = Math.max(a, r, h, c);\n              e.dxPixels = d, e.dyPixels = f, e.width = g - d, e.height = y - f;\n            }\n          }\n        }\n      }\n\n      if (g) {\n        const n = h.hasDataDrivenIcon ? h.iconMaterial.encodeAttributes(e.symbolFeature.feature, l, h) : null;\n\n        if (this._addPlacedIcons(e, g.shapes, l, a.page, t.rotationAlignment === u.VIEWPORT, n), g.iconColliders) {\n          e.iconColliders = g.iconColliders;\n\n          for (const e of g.iconColliders) {\n            e.minLod = Math.max(l + s(e.minLod), 0), e.maxLod = Math.min(l + s(e.maxLod), 25);\n            const t = e.angle;\n\n            if (t) {\n              const n = Math.cos(t),\n                    i = Math.sin(t),\n                    s = e.dxPixels * n - e.dyPixels * i,\n                    a = e.dxPixels * i + e.dyPixels * n,\n                    o = (e.dxPixels + e.width) * n - e.dyPixels * i,\n                    r = (e.dxPixels + e.width) * i + e.dyPixels * n,\n                    l = e.dxPixels * n - (e.dyPixels + e.height) * i,\n                    h = e.dxPixels * i + (e.dyPixels + e.height) * n,\n                    x = (e.dxPixels + e.width) * n - (e.dyPixels + e.height) * i,\n                    c = (e.dxPixels + e.width) * i + (e.dyPixels + e.height) * n,\n                    d = Math.min(s, o, l, x),\n                    g = Math.max(s, o, l, x),\n                    f = Math.min(a, r, h, c),\n                    y = Math.max(a, r, h, c);\n              e.dxPixels = d, e.dyPixels = f, e.width = g - d, e.height = y - f;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  _addPlacedIcons(e, t, n, i, a, o) {\n    const r = Math.max(n - 1, 0),\n          l = this._iconVertexBuffer,\n          h = this._iconIndexBuffer,\n          x = this._markerMap;\n\n    for (const c of t) {\n      const t = a ? 0 : Math.max(n + s(c.minzoom), r),\n            d = a ? 25 : Math.min(n + s(c.maxzoom), 25);\n      if (d <= t) continue;\n      const g = c.tl,\n            f = c.tr,\n            y = c.bl,\n            m = c.br,\n            u = c.mosaicRect,\n            p = c.labelAngle,\n            _ = c.minAngle,\n            M = c.maxAngle,\n            P = c.anchor,\n            I = l.index,\n            b = u.x,\n            A = u.y,\n            L = b + u.width,\n            V = A + u.height,\n            T = l.index;\n      l.add(P.x, P.y, g.x, g.y, b, A, p, _, M, t, d, o), l.add(P.x, P.y, f.x, f.y, L, A, p, _, M, t, d, o), l.add(P.x, P.y, y.x, y.y, b, V, p, _, M, t, d, o), l.add(P.x, P.y, m.x, m.y, L, V, p, _, M, t, d, o), e.iconVertexRanges.length > 0 && e.iconVertexRanges[0][0] + e.iconVertexRanges[0][1] === T ? e.iconVertexRanges[0][1] += 4 : e.iconVertexRanges.push([T, 4]), h.add(I + 0, I + 1, I + 2), h.add(I + 1, I + 2, I + 3), x.has(i) ? x.get(i)[1] += 6 : x.set(i, [this._iconIndexStart + this._iconIndexCount, 6]), this._iconIndexCount += 6;\n    }\n  }\n\n  _addPlacedGlyphs() {\n    const e = this._textVertexBuffer,\n          t = this._textIndexBuffer,\n          n = this._glyphMap;\n\n    for (const [i, s] of this._glyphBufferDataStorage) for (const a of s) {\n      const s = e.index,\n            o = a.symbolInstance,\n            r = a.ddAttributes,\n            l = e.index;\n      e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.tl[0], a.tl[1], a.xmin, a.ymin, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.tr[0], a.tr[1], a.xmax, a.ymin, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.bl[0], a.bl[1], a.xmin, a.ymax, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.br[0], a.br[1], a.xmax, a.ymax, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), o.textVertexRanges.length > 0 && o.textVertexRanges[0][0] + o.textVertexRanges[0][1] === l ? o.textVertexRanges[0][1] += 4 : o.textVertexRanges.push([l, 4]), t.add(s + 0, s + 1, s + 2), t.add(s + 1, s + 2, s + 3), n.has(i) ? n.get(i)[1] += 6 : n.set(i, [this._textIndexStart + this._textIndexCount, 6]), this._textIndexCount += 6;\n    }\n\n    this._glyphBufferDataStorage.clear();\n  }\n\n  _storePlacedGlyphs(e, t, n, i, a) {\n    const o = Math.max(n - 1, 0),\n          r = i === u.VIEWPORT;\n\n    let l, h, x, c, d, g, f, y, m, p, _;\n\n    for (const u of t) {\n      if (l = r ? 0 : Math.max(n + s(u.minzoom), o), h = r ? 25 : Math.min(n + s(u.maxzoom), 25), h <= l) continue;\n      x = u.tl, c = u.tr, d = u.bl, g = u.br, f = u.labelAngle, y = u.minAngle, m = u.maxAngle, p = u.anchor, _ = u.mosaicRect, this._glyphBufferDataStorage.has(u.page) || this._glyphBufferDataStorage.set(u.page, []);\n\n      this._glyphBufferDataStorage.get(u.page).push({\n        glyphAnchor: [p.x, p.y],\n        tl: [x.x, x.y],\n        tr: [c.x, c.y],\n        bl: [d.x, d.y],\n        br: [g.x, g.y],\n        xmin: _.x,\n        ymin: _.y,\n        xmax: _.x + _.width,\n        ymax: _.y + _.height,\n        labelAngle: f,\n        minAngle: y,\n        maxAngle: m,\n        minLod: l,\n        maxLod: h,\n        placementLod: o,\n        symbolInstance: e,\n        ddAttributes: a\n      });\n    }\n  }\n\n  static _pushAnchors(e, t, n, i) {\n    n += i;\n    let s = 0;\n    const o = t.length - 1;\n\n    for (let a = 0; a < o; a++) s += P.distance(t[a], t[a + 1]);\n\n    let l = i || n;\n    if (l *= .5, s <= l) return;\n    const h = l / s;\n    let x = 0,\n        c = -(n = s / Math.max(Math.round(s / n), 1)) / 2;\n    const d = t.length - 1;\n\n    for (let g = 0; g < d; g++) {\n      const i = t[g],\n            s = t[g + 1],\n            o = s.x - i.x,\n            l = s.y - i.y,\n            d = Math.sqrt(o * o + l * l);\n      let f;\n\n      for (; c + n < x + d;) {\n        c += n;\n        const t = (c - x) / d,\n              y = a(i.x, s.x, t),\n              m = a(i.y, s.y, t);\n        void 0 === f && (f = Math.atan2(l, o)), e.push(new r(y, m, f, g, h));\n      }\n\n      x += d;\n    }\n  }\n\n  static _pushCenterAnchor(e, t) {\n    let n = 0;\n    const i = t.length - 1;\n\n    for (let a = 0; a < i; a++) n += P.distance(t[a], t[a + 1]);\n\n    const s = n / 2;\n    let o = 0;\n    const l = t.length - 1;\n\n    for (let h = 0; h < l; h++) {\n      const n = t[h],\n            i = t[h + 1],\n            l = i.x - n.x,\n            x = i.y - n.y,\n            c = Math.sqrt(l * l + x * x);\n\n      if (s < o + c) {\n        const t = (s - o) / c,\n              d = a(n.x, i.x, t),\n              g = a(n.y, i.y, t),\n              f = Math.atan2(x, l);\n        return void e.push(new r(d, g, f, h, 0));\n      }\n\n      o += c;\n    }\n  }\n\n  static _deviation(e, t, n) {\n    const i = (t.x - e.x) * (n.x - t.x) + (t.y - e.y) * (n.y - t.y),\n          s = (t.x - e.x) * (n.y - t.y) - (t.y - e.y) * (n.x - t.x);\n    return Math.atan2(s, i);\n  }\n\n  static _honorsTextMaxAngle(e, t, n, i, s) {\n    let a = 0;\n    const o = n / 2;\n    let r = new P(t.x, t.y),\n        l = t.segment + 1;\n\n    for (; a > -o;) {\n      if (--l, l < 0) return !1;\n      a -= P.distance(e[l], r), r = e[l];\n    }\n\n    a += P.distance(e[l], e[l + 1]);\n    const h = [];\n    let x = 0;\n    const c = e.length;\n\n    for (; a < o;) {\n      const t = e[l];\n      let n,\n          o = l;\n\n      do {\n        if (++o, o === c) return !1;\n        n = e[o];\n      } while (n.isEqual(t));\n\n      let r,\n          d = o;\n\n      do {\n        if (++d, d === c) return !1;\n        r = e[d];\n      } while (r.isEqual(n));\n\n      const g = this._deviation(t, n, r);\n\n      for (h.push({\n        deviation: g,\n        distToAnchor: a\n      }), x += g; a - h[0].distToAnchor > s;) x -= h.shift().deviation;\n\n      if (Math.abs(x) > i) return !1;\n      a += P.distance(n, r), l = o;\n    }\n\n    return !0;\n  }\n\n  static _smoothVertices(e, t) {\n    if (t <= 0) return e;\n    let n = e.length;\n    if (n < 3) return e;\n    const i = [];\n    let s = 0,\n        a = 0;\n    i.push(0);\n\n    for (let f = 1; f < n; f++) {\n      const t = P.distance(e[f], e[f - 1]);\n      t > 0 && (s += t, i.push(s), a++, a !== f && (e[a] = e[f]));\n    }\n\n    if (n = a + 1, n < 3) return e;\n    t = Math.min(t, .2 * s);\n    const o = e[0].x,\n          r = e[0].y,\n          l = e[n - 1].x,\n          h = e[n - 1].y,\n          x = P.sub(e[0], e[1]);\n    x.normalize(), e[0].x += t * x.x, e[0].y += t * x.y, x.assignSub(e[n - 1], e[n - 2]), x.normalize(), e[n - 1].x += t * x.x, e[n - 1].y += t * x.y, i[0] -= t, i[n - 1] += t;\n    const c = [];\n    c.push(new P(o, r));\n    const d = 1e-6,\n          g = .5 * t;\n\n    for (let f = 1; f < n - 1; f++) {\n      let s = 0,\n          a = 0,\n          o = 0;\n\n      for (let n = f - 1; n >= 0; n--) {\n        const r = g + i[n + 1] - i[f];\n        if (r < 0) break;\n        const l = i[n + 1] - i[n],\n              h = i[f] - i[n] < g ? 1 : r / l;\n        if (h < d) break;\n        const x = h * h,\n              c = h * r - .5 * x * l,\n              y = h * l / t,\n              m = e[n + 1],\n              u = e[n].x - m.x,\n              p = e[n].y - m.y;\n        s += y / c * (m.x * h * r + .5 * x * (r * u - l * m.x) - x * h * l * u / 3), a += y / c * (m.y * h * r + .5 * x * (r * p - l * m.y) - x * h * l * p / 3), o += y;\n      }\n\n      for (let r = f + 1; r < n; r++) {\n        const n = g - i[r - 1] + i[f];\n        if (n < 0) break;\n        const l = i[r] - i[r - 1],\n              h = i[r] - i[f] < g ? 1 : n / l;\n        if (h < d) break;\n        const x = h * h,\n              c = h * n - .5 * x * l,\n              y = h * l / t,\n              m = e[r - 1],\n              u = e[r].x - m.x,\n              p = e[r].y - m.y;\n        s += y / c * (m.x * h * n + .5 * x * (n * u - l * m.x) - x * h * l * u / 3), a += y / c * (m.y * h * n + .5 * x * (n * p - l * m.y) - x * h * l * p / 3), o += y;\n      }\n\n      c.push(new P(s / o, a / o));\n    }\n\n    return c.push(new P(l, h)), e[0].x = o, e[0].y = r, e[n - 1].x = l, e[n - 1].y = h, c;\n  }\n\n  static _pushCentroid(e, t) {\n    const n = 0,\n          i = 0,\n          s = 4096,\n          a = 4096,\n          o = t.length - 1;\n    let l = 0,\n        h = 0,\n        x = 0,\n        c = t[0].x,\n        d = t[0].y;\n    c > s && (c = s), c < n && (c = n), d > a && (d = a), d < i && (d = i);\n\n    for (let r = 1; r < o; r++) {\n      let e = t[r].x,\n          o = t[r].y,\n          g = t[r + 1].x,\n          f = t[r + 1].y;\n      e > s && (e = s), e < n && (e = n), o > a && (o = a), o < i && (o = i), g > s && (g = s), g < n && (g = n), f > a && (f = a), f < i && (f = i);\n      const y = (e - c) * (f - d) - (g - c) * (o - d);\n      l += y * (c + e + g), h += y * (d + o + f), x += y;\n    }\n\n    l /= 3 * x, h /= 3 * x, isNaN(l) || isNaN(h) || e.push(new r(l, h));\n  }\n\n}\n\nA._bidiEngine = new e();\nexport { A as default };","map":{"version":3,"names":["e","numericHash","t","BucketType","n","C_DEG_TO_RAD","i","log2","s","interpolate","a","TILE_PIXEL_RATIO","o","Anchor","r","TILE_COORD_SIZE","l","SDF_GLYPH_SIZE","h","TextShaping","x","c","TextTransform","d","SymbolPlacement","g","TextWritingMode","f","SymbolAnchor","y","TextJustification","m","RotationAlignment","u","IconLayout","p","TextLayout","_","GeometryType","M","Point","P","I","b","iconMosaicItem","page","A","constructor","getSpriteItems","type","SYMBOL","_markerMap","Map","_glyphMap","_glyphBufferDataStorage","_isIconSDF","_iconVertexBuffer","_iconIndexBuffer","_textVertexBuffer","_textIndexBuffer","_placementEngine","_workerTileHandler","markerPageMap","glyphsPageMap","symbolInstances","_symbolInstances","getResources","layer","zoom","setExtent","layerExtent","getLayoutProperty","isDataDriven","getValue","getLayoutValue","_features","getGeometry","length","_replaceKeys","values","replace","LOWERCASE","toLowerCase","UPPERCASE","toUpperCase","_bidiEngine","hasBidiChar","checkContextual","bidiTransform","Set","charCodeAt","add","feature","sprite","label","rtl","geometry","hash","priority","textFont","push","_symbolFeatures","processFeatures","POINT","L","V","T","_iconIndexStart","index","_textIndexStart","_iconIndexCount","_textIndexCount","clear","w","B","size","C","maxAngle","R","sdf","update","keepUpright","writingMode","includes","VERTICAL","anchor","TOP_LEFT","LEFT","BOTTOM_LEFT","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","TOP","BOTTOM","justify","AUTO","letterSpacing","maxWidth","lineHeight","map","getGlyphItems","getShaping","Math","min","max","LINE","abs","offset","_smoothVertices","_pushAnchors","LINE_CENTER","_pushCenterAnchor","Polygon","_pushCentroid","rotationAlignment","MAP","_honorsTextMaxAngle","shaping","line","symbolFeature","textColliders","iconColliders","textVertexRanges","iconVertexRanges","_processFeature","sort","_addPlacedGlyphs","serialize","layerUIDs","_symbolsSerializationLength","array","Uint32Array","Int32Array","buffer","Float32Array","serializeSymbols","xTile","yTile","dxPixels","dyPixels","hard","partIndex","minLod","maxLod","width","height","optional","getIconPlacement","getTextPlacement","hasDataDrivenText","textMaterial","encodeAttributes","_storePlacedGlyphs","shapes","angle","cos","sin","hasDataDrivenIcon","iconMaterial","_addPlacedIcons","VIEWPORT","minzoom","maxzoom","tl","tr","bl","br","mosaicRect","labelAngle","minAngle","has","get","set","symbolInstance","ddAttributes","glyphAnchor","xmin","ymin","xmax","ymax","placementLod","distance","round","sqrt","atan2","_deviation","segment","isEqual","deviation","distToAnchor","shift","sub","normalize","assignSub","isNaN","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/vectorTiles/buckets/SymbolBucket.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/BidiEngine.js\";import{numericHash as t}from\"../../../../../core/string.js\";import{BucketType as n}from\"../enums.js\";import{C_DEG_TO_RAD as i,log2 as s,interpolate as a}from\"../GeometryUtils.js\";import{TILE_PIXEL_RATIO as o,Anchor as r,TILE_COORD_SIZE as l}from\"../Placement.js\";import{SDF_GLYPH_SIZE as h,TextShaping as x}from\"../TextShaping.js\";import c from\"./BaseBucket.js\";import{TextTransform as d,SymbolPlacement as g,TextWritingMode as f,SymbolAnchor as y,TextJustification as m,RotationAlignment as u}from\"../style/StyleDefinition.js\";import{IconLayout as p,TextLayout as _}from\"../style/StyleLayer.js\";import{GeometryType as M,Point as P}from\"../../webgl/Geometry.js\";const I=10;function b(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}class A extends c{constructor(e,t,i,s,a,o,r,l){super(e,t,l.getSpriteItems()),this.type=n.SYMBOL,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,this._iconVertexBuffer=i,this._iconIndexBuffer=s,this._textVertexBuffer=a,this._textIndexBuffer=o,this._placementEngine=r,this._workerTileHandler=l}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(e,n,i){const s=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);const o=s.getLayoutProperty(\"icon-image\"),r=s.getLayoutProperty(\"text-field\");let l=s.getLayoutProperty(\"text-transform\"),h=s.getLayoutProperty(\"text-font\");const x=[];let c,g,f,y;o&&!o.isDataDriven&&(c=o.getValue(a)),r&&!r.isDataDriven&&(g=r.getValue(a)),l&&l.isDataDriven||(f=s.getLayoutValue(\"text-transform\",a),l=null),h&&h.isDataDriven||(y=s.getLayoutValue(\"text-font\",a),h=null);for(const m of this._features){const u=m.getGeometry(e);if(!u||0===u.length)continue;let p,_;o&&(p=o.isDataDriven?o.getValue(a,m):this._replaceKeys(c,m.values),p&&n(p));let M=!1;if(r&&(_=r.isDataDriven?r.getValue(a,m):this._replaceKeys(g,m.values),_)){switch(_=_.replace(/\\\\n/g,\"\\n\"),l&&(f=l.getValue(a,m)),f){case d.LOWERCASE:_=_.toLowerCase();break;case d.UPPERCASE:_=_.toUpperCase()}if(A._bidiEngine.hasBidiChar(_)){let e;e=\"rtl\"===A._bidiEngine.checkContextual(_)?\"IDNNN\":\"ICNNN\",_=A._bidiEngine.bidiTransform(_,e,\"VLYSN\"),M=!0}const e=_.length;if(e>0){h&&(y=h.getValue(a,m));for(const t of y){let n=i[t];n||(n=i[t]=new Set);for(let t=0;t<e;t++){const e=_.charCodeAt(t);n.add(e)}}}}if(!p&&!_)continue;const P=s.getLayoutValue(\"symbol-sort-key\",a,m),I={feature:m,sprite:p,label:_,rtl:M,geometry:u,hash:(_?t(_):0)^(p?t(p):0),priority:P,textFont:y};x.push(I)}this._symbolFeatures=x}processFeatures(e){e&&e.setExtent(this.layerExtent);const t=this.layer,n=this.zoom,s=t.getLayoutValue(\"symbol-placement\",n),a=s!==g.POINT,c=t.getLayoutValue(\"symbol-spacing\",n)*o,d=t.getLayoutProperty(\"icon-image\"),P=t.getLayoutProperty(\"text-field\"),I=d?new p(t,n,a):null,L=P?new _(t,n,a):null,V=this._workerTileHandler;let T;d&&(T=V.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const w=[];let B=1;L&&L.size&&(B=L.size/h);const C=L?L.maxAngle*i:0,R=L?L.size*o:0;for(const i of this._symbolFeatures){let e;I&&T&&i.sprite&&(e=T[i.sprite],e&&e.sdf&&(this._isIconSDF=!0));let t;!!e&&I.update(n,i.feature);let d=0;const p=i.label;if(p){L.update(n,i.feature);const e=a?L.keepUpright:L.writingMode&&L.writingMode.includes(f.VERTICAL);let s=.5;switch(L.anchor){case y.TOP_LEFT:case y.LEFT:case y.BOTTOM_LEFT:s=0;break;case y.TOP_RIGHT:case y.RIGHT:case y.BOTTOM_RIGHT:s=1}let r=.5;switch(L.anchor){case y.TOP_LEFT:case y.TOP:case y.TOP_RIGHT:r=0;break;case y.BOTTOM_LEFT:case y.BOTTOM:case y.BOTTOM_RIGHT:r=1}let l=.5;switch(L.justify){case m.AUTO:l=s;break;case m.LEFT:l=0;break;case m.RIGHT:l=1}const c=L.letterSpacing*h,g=a?0:L.maxWidth*h,u=L.lineHeight*h,_=i.textFont.map((e=>V.getGlyphItems(e)));if(t=new x(_,g,u,c,s,r,l).getShaping(p,i.rtl,e),t&&t.length>0){let e=1e30,n=-1e30;for(const i of t)e=Math.min(e,i.x),n=Math.max(n,i.x);d=(n-e+2*h)*B*o}}for(let n of i.geometry){const h=[];if(s===g.LINE){if(t&&t.length>0&&L&&L.size){const e=L.size*o*(2+Math.min(2,4*Math.abs(L.offset[1])));n=A._smoothVertices(n,e)}A._pushAnchors(h,n,c,d)}else s===g.LINE_CENTER?A._pushCenterAnchor(h,n):i.feature.type===M.Polygon?A._pushCentroid(h,n):h.push(new r(n[0].x,n[0].y));for(const s of h){if(s.x<0||s.x>l||s.y<0||s.y>l)continue;if(a&&d>0&&L.rotationAlignment===u.MAP&&!A._honorsTextMaxAngle(n,s,d,C,R))continue;const o={shaping:t,line:n,iconMosaicItem:e,anchor:s,symbolFeature:i,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};w.push(o),this._processFeature(o,I,L)}}}w.sort(b),this._addPlacedGlyphs(),this._symbolInstances=w}serialize(){let e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=A._symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;const t=new Uint32Array(e),n=new Int32Array(t.buffer),i=new Float32Array(t.buffer);let s=0;t[s++]=this.type,t[s++]=this.layerUIDs.length;for(let a=0;a<this.layerUIDs.length;a++)t[s++]=this.layerUIDs[a];t[s++]=this._isIconSDF?1:0,t[s++]=this.markerPageMap.size;for(const[a,[o,r]]of this.markerPageMap)t[s++]=a,t[s++]=o,t[s++]=r;t[s++]=this.glyphsPageMap.size;for(const[a,[o,r]]of this.glyphsPageMap)t[s++]=a,t[s++]=o,t[s++]=r;t[s++]=this._iconVertexBuffer.index/4,t[s++]=this._textVertexBuffer.index/4,s=A.serializeSymbols(t,n,i,s,this._symbolInstances),t[s++]=this._iconVertexBuffer.array.length;for(let a=0;a<this._iconVertexBuffer.array.length;a++)n[s++]=this._iconVertexBuffer.array[a];t[s++]=this._iconIndexBuffer.array.length;for(let a=0;a<this._iconIndexBuffer.array.length;a++)t[s++]=this._iconIndexBuffer.array[a];t[s++]=this._textVertexBuffer.array.length;for(let a=0;a<this._textVertexBuffer.array.length;a++)n[s++]=this._textVertexBuffer.array[a];t[s++]=this._textIndexBuffer.array.length;for(let a=0;a<this._textIndexBuffer.array.length;a++)t[s++]=this._textIndexBuffer.array[a];return t.buffer}static _symbolsSerializationLength(e){let t=0;t+=1;for(const n of e||[]){t+=4,t+=1;for(const e of n.textColliders)t+=I;for(const e of n.iconColliders)t+=I;t+=1,t+=2*n.textVertexRanges.length,t+=1,t+=2*n.iconVertexRanges.length}return t}static serializeSymbols(e,t,n,i,s){s=s||[],t[i++]=s.length;for(const a of s){t[i++]=a.anchor.x,t[i++]=a.anchor.y,t[i++]=a.symbolFeature.hash,t[i++]=a.symbolFeature.priority,t[i++]=a.textColliders.length+a.iconColliders.length;for(const e of a.textColliders)t[i++]=e.xTile,t[i++]=e.yTile,t[i++]=e.dxPixels,t[i++]=e.dyPixels,t[i++]=e.hard?1:0,t[i++]=e.partIndex,n[i++]=e.minLod,n[i++]=e.maxLod,t[i++]=e.width,t[i++]=e.height;for(const e of a.iconColliders)t[i++]=e.xTile,t[i++]=e.yTile,t[i++]=e.dxPixels,t[i++]=e.dyPixels,t[i++]=e.hard?1:0,t[i++]=e.partIndex,n[i++]=e.minLod,n[i++]=e.maxLod,t[i++]=e.width,t[i++]=e.height;t[i++]=a.textVertexRanges.length;for(const[e,n]of a.textVertexRanges)t[i++]=e,t[i++]=n;t[i++]=a.iconVertexRanges.length;for(const[e,n]of a.iconVertexRanges)t[i++]=e,t[i++]=n}return i}_replaceKeys(e,t){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?t[n]:\"\"))}_processFeature(e,t,n){const{line:i,iconMosaicItem:a,shaping:o,anchor:r}=e,l=this.zoom,h=this.layer,x=!!a;let c=!0;x&&(c=t.optional||!a);const d=o&&o.length>0;let g,f,y=!0;if(d&&(y=n.optional),x&&(g=this._placementEngine.getIconPlacement(r,a,t)),(g||c)&&(d&&(f=this._placementEngine.getTextPlacement(r,o,i,n)),f||y)){if(g&&f||(y||c?y||f?c||g||(f=null):g=null:(g=null,f=null)),f){const t=h.hasDataDrivenText?h.textMaterial.encodeAttributes(e.symbolFeature.feature,l,h):null;if(this._storePlacedGlyphs(e,f.shapes,l,n.rotationAlignment,t),f.textColliders){e.textColliders=f.textColliders;for(const e of f.textColliders){e.minLod=Math.max(l+s(e.minLod),0),e.maxLod=Math.min(l+s(e.maxLod),25);const t=e.angle;if(t){const n=Math.cos(t),i=Math.sin(t),s=e.dxPixels*n-e.dyPixels*i,a=e.dxPixels*i+e.dyPixels*n,o=(e.dxPixels+e.width)*n-e.dyPixels*i,r=(e.dxPixels+e.width)*i+e.dyPixels*n,l=e.dxPixels*n-(e.dyPixels+e.height)*i,h=e.dxPixels*i+(e.dyPixels+e.height)*n,x=(e.dxPixels+e.width)*n-(e.dyPixels+e.height)*i,c=(e.dxPixels+e.width)*i+(e.dyPixels+e.height)*n,d=Math.min(s,o,l,x),g=Math.max(s,o,l,x),f=Math.min(a,r,h,c),y=Math.max(a,r,h,c);e.dxPixels=d,e.dyPixels=f,e.width=g-d,e.height=y-f}}}}if(g){const n=h.hasDataDrivenIcon?h.iconMaterial.encodeAttributes(e.symbolFeature.feature,l,h):null;if(this._addPlacedIcons(e,g.shapes,l,a.page,t.rotationAlignment===u.VIEWPORT,n),g.iconColliders){e.iconColliders=g.iconColliders;for(const e of g.iconColliders){e.minLod=Math.max(l+s(e.minLod),0),e.maxLod=Math.min(l+s(e.maxLod),25);const t=e.angle;if(t){const n=Math.cos(t),i=Math.sin(t),s=e.dxPixels*n-e.dyPixels*i,a=e.dxPixels*i+e.dyPixels*n,o=(e.dxPixels+e.width)*n-e.dyPixels*i,r=(e.dxPixels+e.width)*i+e.dyPixels*n,l=e.dxPixels*n-(e.dyPixels+e.height)*i,h=e.dxPixels*i+(e.dyPixels+e.height)*n,x=(e.dxPixels+e.width)*n-(e.dyPixels+e.height)*i,c=(e.dxPixels+e.width)*i+(e.dyPixels+e.height)*n,d=Math.min(s,o,l,x),g=Math.max(s,o,l,x),f=Math.min(a,r,h,c),y=Math.max(a,r,h,c);e.dxPixels=d,e.dyPixels=f,e.width=g-d,e.height=y-f}}}}}}_addPlacedIcons(e,t,n,i,a,o){const r=Math.max(n-1,0),l=this._iconVertexBuffer,h=this._iconIndexBuffer,x=this._markerMap;for(const c of t){const t=a?0:Math.max(n+s(c.minzoom),r),d=a?25:Math.min(n+s(c.maxzoom),25);if(d<=t)continue;const g=c.tl,f=c.tr,y=c.bl,m=c.br,u=c.mosaicRect,p=c.labelAngle,_=c.minAngle,M=c.maxAngle,P=c.anchor,I=l.index,b=u.x,A=u.y,L=b+u.width,V=A+u.height,T=l.index;l.add(P.x,P.y,g.x,g.y,b,A,p,_,M,t,d,o),l.add(P.x,P.y,f.x,f.y,L,A,p,_,M,t,d,o),l.add(P.x,P.y,y.x,y.y,b,V,p,_,M,t,d,o),l.add(P.x,P.y,m.x,m.y,L,V,p,_,M,t,d,o),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===T?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([T,4]),h.add(I+0,I+1,I+2),h.add(I+1,I+2,I+3),x.has(i)?x.get(i)[1]+=6:x.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const e=this._textVertexBuffer,t=this._textIndexBuffer,n=this._glyphMap;for(const[i,s]of this._glyphBufferDataStorage)for(const a of s){const s=e.index,o=a.symbolInstance,r=a.ddAttributes,l=e.index;e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tl[0],a.tl[1],a.xmin,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tr[0],a.tr[1],a.xmax,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.bl[0],a.bl[1],a.xmin,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.br[0],a.br[1],a.xmax,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),o.textVertexRanges.length>0&&o.textVertexRanges[0][0]+o.textVertexRanges[0][1]===l?o.textVertexRanges[0][1]+=4:o.textVertexRanges.push([l,4]),t.add(s+0,s+1,s+2),t.add(s+1,s+2,s+3),n.has(i)?n.get(i)[1]+=6:n.set(i,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(e,t,n,i,a){const o=Math.max(n-1,0),r=i===u.VIEWPORT;let l,h,x,c,d,g,f,y,m,p,_;for(const u of t){if(l=r?0:Math.max(n+s(u.minzoom),o),h=r?25:Math.min(n+s(u.maxzoom),25),h<=l)continue;x=u.tl,c=u.tr,d=u.bl,g=u.br,f=u.labelAngle,y=u.minAngle,m=u.maxAngle,p=u.anchor,_=u.mosaicRect,this._glyphBufferDataStorage.has(u.page)||this._glyphBufferDataStorage.set(u.page,[]);this._glyphBufferDataStorage.get(u.page).push({glyphAnchor:[p.x,p.y],tl:[x.x,x.y],tr:[c.x,c.y],bl:[d.x,d.y],br:[g.x,g.y],xmin:_.x,ymin:_.y,xmax:_.x+_.width,ymax:_.y+_.height,labelAngle:f,minAngle:y,maxAngle:m,minLod:l,maxLod:h,placementLod:o,symbolInstance:e,ddAttributes:a})}}static _pushAnchors(e,t,n,i){n+=i;let s=0;const o=t.length-1;for(let a=0;a<o;a++)s+=P.distance(t[a],t[a+1]);let l=i||n;if(l*=.5,s<=l)return;const h=l/s;let x=0,c=-(n=s/Math.max(Math.round(s/n),1))/2;const d=t.length-1;for(let g=0;g<d;g++){const i=t[g],s=t[g+1],o=s.x-i.x,l=s.y-i.y,d=Math.sqrt(o*o+l*l);let f;for(;c+n<x+d;){c+=n;const t=(c-x)/d,y=a(i.x,s.x,t),m=a(i.y,s.y,t);void 0===f&&(f=Math.atan2(l,o)),e.push(new r(y,m,f,g,h))}x+=d}}static _pushCenterAnchor(e,t){let n=0;const i=t.length-1;for(let a=0;a<i;a++)n+=P.distance(t[a],t[a+1]);const s=n/2;let o=0;const l=t.length-1;for(let h=0;h<l;h++){const n=t[h],i=t[h+1],l=i.x-n.x,x=i.y-n.y,c=Math.sqrt(l*l+x*x);if(s<o+c){const t=(s-o)/c,d=a(n.x,i.x,t),g=a(n.y,i.y,t),f=Math.atan2(x,l);return void e.push(new r(d,g,f,h,0))}o+=c}}static _deviation(e,t,n){const i=(t.x-e.x)*(n.x-t.x)+(t.y-e.y)*(n.y-t.y),s=(t.x-e.x)*(n.y-t.y)-(t.y-e.y)*(n.x-t.x);return Math.atan2(s,i)}static _honorsTextMaxAngle(e,t,n,i,s){let a=0;const o=n/2;let r=new P(t.x,t.y),l=t.segment+1;for(;a>-o;){if(--l,l<0)return!1;a-=P.distance(e[l],r),r=e[l]}a+=P.distance(e[l],e[l+1]);const h=[];let x=0;const c=e.length;for(;a<o;){const t=e[l];let n,o=l;do{if(++o,o===c)return!1;n=e[o]}while(n.isEqual(t));let r,d=o;do{if(++d,d===c)return!1;r=e[d]}while(r.isEqual(n));const g=this._deviation(t,n,r);for(h.push({deviation:g,distToAnchor:a}),x+=g;a-h[0].distToAnchor>s;)x-=h.shift().deviation;if(Math.abs(x)>i)return!1;a+=P.distance(n,r),l=o}return!0}static _smoothVertices(e,t){if(t<=0)return e;let n=e.length;if(n<3)return e;const i=[];let s=0,a=0;i.push(0);for(let f=1;f<n;f++){const t=P.distance(e[f],e[f-1]);t>0&&(s+=t,i.push(s),a++,a!==f&&(e[a]=e[f]))}if(n=a+1,n<3)return e;t=Math.min(t,.2*s);const o=e[0].x,r=e[0].y,l=e[n-1].x,h=e[n-1].y,x=P.sub(e[0],e[1]);x.normalize(),e[0].x+=t*x.x,e[0].y+=t*x.y,x.assignSub(e[n-1],e[n-2]),x.normalize(),e[n-1].x+=t*x.x,e[n-1].y+=t*x.y,i[0]-=t,i[n-1]+=t;const c=[];c.push(new P(o,r));const d=1e-6,g=.5*t;for(let f=1;f<n-1;f++){let s=0,a=0,o=0;for(let n=f-1;n>=0;n--){const r=g+i[n+1]-i[f];if(r<0)break;const l=i[n+1]-i[n],h=i[f]-i[n]<g?1:r/l;if(h<d)break;const x=h*h,c=h*r-.5*x*l,y=h*l/t,m=e[n+1],u=e[n].x-m.x,p=e[n].y-m.y;s+=y/c*(m.x*h*r+.5*x*(r*u-l*m.x)-x*h*l*u/3),a+=y/c*(m.y*h*r+.5*x*(r*p-l*m.y)-x*h*l*p/3),o+=y}for(let r=f+1;r<n;r++){const n=g-i[r-1]+i[f];if(n<0)break;const l=i[r]-i[r-1],h=i[r]-i[f]<g?1:n/l;if(h<d)break;const x=h*h,c=h*n-.5*x*l,y=h*l/t,m=e[r-1],u=e[r].x-m.x,p=e[r].y-m.y;s+=y/c*(m.x*h*n+.5*x*(n*u-l*m.x)-x*h*l*u/3),a+=y/c*(m.y*h*n+.5*x*(n*p-l*m.y)-x*h*l*p/3),o+=y}c.push(new P(s/o,a/o))}return c.push(new P(l,h)),e[0].x=o,e[0].y=r,e[n-1].x=l,e[n-1].y=h,c}static _pushCentroid(e,t){const n=0,i=0,s=4096,a=4096,o=t.length-1;let l=0,h=0,x=0,c=t[0].x,d=t[0].y;c>s&&(c=s),c<n&&(c=n),d>a&&(d=a),d<i&&(d=i);for(let r=1;r<o;r++){let e=t[r].x,o=t[r].y,g=t[r+1].x,f=t[r+1].y;e>s&&(e=s),e<n&&(e=n),o>a&&(o=a),o<i&&(o=i),g>s&&(g=s),g<n&&(g=n),f>a&&(f=a),f<i&&(f=i);const y=(e-c)*(f-d)-(g-c)*(o-d);l+=y*(c+e+g),h+=y*(d+o+f),x+=y}l/=3*x,h/=3*x,isNaN(l)||isNaN(h)||e.push(new r(l,h))}}A._bidiEngine=new e;export{A as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}