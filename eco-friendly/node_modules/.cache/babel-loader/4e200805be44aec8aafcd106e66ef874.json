{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { deg2rad as e } from \"../../../core/mathUtils.js\";\nimport { isSome as t, isNone as i, disposeMaybe as n, releaseMaybe as s } from \"../../../core/maybe.js\";\nimport { c as r, m as a, i as h, n as l, f as o, a as c } from \"../../../chunks/vec3.js\";\nimport { c as _ } from \"../../../chunks/vec3f64.js\";\nimport { t as d } from \"../../../chunks/vec4.js\";\nimport { c as m } from \"../../../chunks/vec4f64.js\";\nimport { create as p, fromRay as g, getStart as f, getEnd as u } from \"../../../geometry/support/clipRay.js\";\nimport { intersectClipRay as b } from \"../../../geometry/support/frustum.js\";\nimport { create as P, copy as V, pointAt as E } from \"../../../geometry/support/lineSegment.js\";\nimport { create as L, fromPositionAndNormal as q } from \"../../../geometry/support/plane.js\";\nimport { wrap as D } from \"../../../geometry/support/ray.js\";\nimport { c as S } from \"../../../chunks/sphere.js\";\nimport { LaserlinePathData as R } from \"./LaserlinePathData.js\";\nimport { createQuadVAO as T } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { RenderSlot as U } from \"../webgl-engine/lib/RenderSlot.js\";\nimport { copyParameters as M, updateParameters as C } from \"../webgl-engine/materials/internal/MaterialUtil.js\";\nimport { LaserlinePathTechnique as x } from \"../webgl-engine/shaders/LaserlinePathTechnique.js\";\nimport { LaserlinePathTechniqueConfiguration as A } from \"../webgl-engine/shaders/LaserlinePathTechniqueConfiguration.js\";\nimport { LaserlineTechnique as w } from \"../webgl-engine/shaders/LaserlineTechnique.js\";\nimport { LaserlineTechniqueConfiguration as v } from \"../webgl-engine/shaders/LaserlineTechniqueConfiguration.js\";\nimport { PrimitiveType as j } from \"../../webgl/enums.js\";\n\nconst O = _(),\n      y = m(),\n      I = {\n  glowColor: [1, .5, 0],\n  glowWidth: 8,\n  glowFalloff: 8,\n  innerColor: [1, 1, 1],\n  innerWidth: 1,\n  globalAlpha: .75,\n  angleCutoff: e(6),\n  globalAlphaContrastBoost: 2,\n  __tagStrict: \"NoParameters\"\n};\n\nfunction N(e, t, i, n) {\n  const s = O,\n        h = y;\n  a(s, t, n), r(h, i), h[3] = 0, d(h, h, n), q(s, h, e);\n}\n\nclass H {\n  constructor(e, t = {}, i = {\n    contrastControlEnabled: !1\n  }) {\n    this._renderCoordsHelper = e, this._config = i, this._technique = null, this._heightManifoldEnabled = !1, this._heightManifoldTarget = _(), this._pointDistanceEnabled = !1, this._pointDistanceOrigin = _(), this._pointDistanceTarget = _(), this._lineVerticalPlaneEnabled = !1, this._lineVerticalPlaneSegment = P(), this._intersectsLineEnabled = !1, this._intersectsLineSegment = P(), this._intersectsLineRadius = 3, this._intersectsLineInfinite = !1, this._pathVerticalPlaneEnabled = !1, this._pathVerticalPlaneData = null, this._pathTechnique = null, this.canRender = !0, this._tempNormal = _(), this._tempDir = _(), this._tempUp = _(), this._tempVec3A = _(), this._tempVec3B = _(), this._tempVec4 = m(), this._tempPlane = L(), this._tempSphere = S(), this._parameters = M(t, I);\n  }\n\n  get renderSlots() {\n    return [this._config.contrastControlEnabled ? U.LASERLINES_CONTRAST_CONTROL : U.LASERLINES];\n  }\n\n  get needsLinearDepth() {\n    return !0;\n  }\n\n  get heightManifoldEnabled() {\n    return this._heightManifoldEnabled;\n  }\n\n  set heightManifoldEnabled(e) {\n    this._heightManifoldEnabled !== e && (this._heightManifoldEnabled = e, this._requestRender());\n  }\n\n  get heightManifoldTarget() {\n    return this._heightManifoldTarget;\n  }\n\n  set heightManifoldTarget(e) {\n    r(this._heightManifoldTarget, e), this._requestRender();\n  }\n\n  get pointDistanceEnabled() {\n    return this._pointDistanceEnabled;\n  }\n\n  set pointDistanceEnabled(e) {\n    e !== this._pointDistanceEnabled && (this._pointDistanceEnabled = e, this._requestRender());\n  }\n\n  get pointDistanceTarget() {\n    return this._pointDistanceTarget;\n  }\n\n  set pointDistanceTarget(e) {\n    r(this._pointDistanceTarget, e), this._requestRender();\n  }\n\n  get pointDistanceOrigin() {\n    return this._pointDistanceOrigin;\n  }\n\n  set pointDistanceOrigin(e) {\n    r(this._pointDistanceOrigin, e), this._requestRender();\n  }\n\n  get lineVerticalPlaneEnabled() {\n    return this._lineVerticalPlaneEnabled;\n  }\n\n  set lineVerticalPlaneEnabled(e) {\n    e !== this._lineVerticalPlaneEnabled && (this._lineVerticalPlaneEnabled = e, this._requestRender());\n  }\n\n  get lineVerticalPlaneSegment() {\n    return this._lineVerticalPlaneSegment;\n  }\n\n  set lineVerticalPlaneSegment(e) {\n    V(e, this._lineVerticalPlaneSegment), this._requestRender();\n  }\n\n  get intersectsLineEnabled() {\n    return this._intersectsLineEnabled;\n  }\n\n  set intersectsLineEnabled(e) {\n    e !== this._intersectsLineEnabled && (this._intersectsLineEnabled = e, this._requestRender());\n  }\n\n  get intersectsLineSegment() {\n    return this._intersectsLineSegment;\n  }\n\n  set intersectsLineSegment(e) {\n    V(e, this._intersectsLineSegment), this._requestRender();\n  }\n\n  get intersectsLineRadius() {\n    return this._intersectsLineRadius;\n  }\n\n  set intersectsLineRadius(e) {\n    e !== this._intersectsLineRadius && (this._intersectsLineRadius = e, this._requestRender());\n  }\n\n  get intersectsLineInfinite() {\n    return this._intersectsLineInfinite;\n  }\n\n  set intersectsLineInfinite(e) {\n    e !== this._intersectsLineInfinite && (this._intersectsLineInfinite = e, this._requestRender());\n  }\n\n  get pathVerticalPlaneEnabled() {\n    return this._pathVerticalPlaneEnabled;\n  }\n\n  set pathVerticalPlaneEnabled(e) {\n    e !== this._pathVerticalPlaneEnabled && (this._pathVerticalPlaneEnabled = e, t(this._pathVerticalPlaneData) && this._requestRender());\n  }\n\n  set pathVerticalPlaneVertices(e) {\n    i(this._pathVerticalPlaneData) && (this._pathVerticalPlaneData = new R(this._renderCoordsHelper)), this._pathVerticalPlaneData.vertices = e, this.pathVerticalPlaneEnabled && this._requestRender();\n  }\n\n  set pathVerticalPlaneBuffers(e) {\n    i(this._pathVerticalPlaneData) && (this._pathVerticalPlaneData = new R(this._renderCoordsHelper)), this._pathVerticalPlaneData.buffers = e, this.pathVerticalPlaneEnabled && this._requestRender();\n  }\n\n  setParameters(e) {\n    C(this._parameters, e) && this._requestRender();\n  }\n\n  initializeRenderContext(e) {\n    this._context = e;\n    const t = e.renderContext.rctx;\n    this._quadVAO = T(t), this._techniqueRepository = e.shaderTechniqueRepository, this._techniqueConfig = new v();\n    const i = new A();\n    i.contrastControlEnabled = this._config.contrastControlEnabled, this._pathTechnique = this._techniqueRepository.acquire(x, i);\n  }\n\n  uninitializeRenderContext() {\n    this._quadVAO = n(this._quadVAO), this._technique = s(this._technique), this._pathVerticalPlaneData = n(this._pathVerticalPlaneData), this._pathTechnique = s(this._pathTechnique);\n  }\n\n  prepareTechnique() {\n    return this.heightManifoldEnabled || this.pointDistanceEnabled || this.lineVerticalPlaneSegment || this.intersectsLineEnabled ? (this._techniqueConfig.heightManifoldEnabled = this.heightManifoldEnabled, this._techniqueConfig.lineVerticalPlaneEnabled = this.lineVerticalPlaneEnabled, this._techniqueConfig.pointDistanceEnabled = this.pointDistanceEnabled, this._techniqueConfig.intersectsLineEnabled = this.intersectsLineEnabled, this._techniqueConfig.contrastControlEnabled = this._config.contrastControlEnabled, this._technique = this._techniqueRepository.releaseAndAcquire(w, this._techniqueConfig, this._technique), this._technique) : this._pathTechnique;\n  }\n\n  render(e, t) {\n    (this.heightManifoldEnabled || this.pointDistanceEnabled || this.lineVerticalPlaneSegment || this.intersectsLineEnabled) && this._renderUnified(e, t), this.pathVerticalPlaneEnabled && this._renderPath(e);\n  }\n\n  _renderUnified(e, t) {\n    const i = e.rctx,\n          n = i.bindTechnique(t, this._parameters, e.bindParameters);\n    this._bindGlobalUniforms(e, n), this._bindHeightManifoldUniforms(e, n), this._bindPointDistanceUniforms(e, n), this._bindLineVerticalPlaneUniforms(e, n), this._bindIntersectsLineUniforms(e, n), i.bindVAO(this._quadVAO), i.drawArrays(j.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _renderPath(e) {\n    if (i(this._pathVerticalPlaneData) || i(this._pathTechnique)) return;\n    const t = e.rctx,\n          n = this._pathTechnique,\n          s = t.bindTechnique(n, { ...this._parameters,\n      origin: this._pathVerticalPlaneData.origin\n    }, e.bindParameters);\n    this._bindGlobalUniforms(e, s), this._pathVerticalPlaneData.draw(e.rctx);\n  }\n\n  _bindHeightManifoldUniforms(e, t) {\n    if (!this.heightManifoldEnabled) return;\n    const i = this._tempVec3A,\n          n = this._tempPlane,\n          s = e.bindParameters.camera;\n    this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget, i), N(n, this._heightManifoldTarget, i, s.viewMatrix), t.setUniform4fv(\"heightPlane\", n);\n  }\n\n  _bindPointDistanceUniforms(e, t) {\n    if (!this._pointDistanceEnabled) return;\n    const i = e.bindParameters.camera,\n          n = this._tempSphere;\n    r(n, this._pointDistanceOrigin), a(n, n, i.viewMatrix), n[3] = h(this._pointDistanceOrigin, this._pointDistanceTarget), t.setUniform4f(\"pointDistanceSphere\", n[0], n[1], n[2], n[3]);\n  }\n\n  _bindLineVerticalPlaneUniforms(e, t) {\n    if (!this._lineVerticalPlaneEnabled) return;\n    const i = this._renderCoordsHelper,\n          n = e.bindParameters.camera,\n          s = this._tempPlane,\n          h = this._tempVec3A,\n          _ = this._tempUp,\n          d = this._tempDir,\n          m = this._tempNormal;\n    E(this._lineVerticalPlaneSegment, .5, h), i.worldUpAtPosition(h, _), l(d, this._lineVerticalPlaneSegment.vector), o(m, _, d), l(m, m), N(s, this._lineVerticalPlaneSegment.origin, m, n.viewMatrix), t.setUniform4fv(\"lineVerticalPlane\", s);\n    const p = this._tempVec3A;\n    r(p, this._lineVerticalPlaneSegment.origin), i.setAltitude(p, 0), a(p, p, n.viewMatrix), t.setUniform3fv(\"lineVerticalStart\", p);\n    const g = this._tempVec3B;\n    c(g, this._lineVerticalPlaneSegment.origin, this._lineVerticalPlaneSegment.vector), i.setAltitude(g, 0), a(g, g, n.viewMatrix), t.setUniform3fv(\"lineVerticalEnd\", g);\n  }\n\n  _bindIntersectsLineUniforms(e, t) {\n    if (!this._intersectsLineEnabled) return;\n    const i = z,\n          n = B,\n          s = e.bindParameters.camera;\n\n    if (this._intersectsLineInfinite) {\n      if (g(D(this._intersectsLineSegment.origin, this._intersectsLineSegment.vector), k), k.c0 = -Number.MAX_VALUE, !b(s.frustum, k)) return;\n      f(k, i), u(k, n);\n    } else r(i, this._intersectsLineSegment.origin), c(n, this._intersectsLineSegment.origin, this._intersectsLineSegment.vector);\n\n    const h = this._tempVec3A;\n    a(h, i, s.viewMatrix), t.setUniform3fv(\"intersectsLineStart\", h);\n    const o = this._tempVec4;\n    r(o, this._intersectsLineSegment.vector), this._tempVec4[3] = 0, d(this._tempVec4, this._tempVec4, s.viewMatrix), a(n, n, s.viewMatrix), t.setUniform3fv(\"intersectsLineEnd\", n), l(o, o), t.setUniform3f(\"intersectsLineDirection\", o[0], o[1], o[2]), t.setUniform1f(\"intersectsLineRadius\", this._intersectsLineRadius);\n  }\n\n  _bindGlobalUniforms(e, t) {\n    const i = e.bindParameters.camera;\n    this._heightManifoldEnabled ? t.setUniform1f(\"maxPixelDistance\", 2 * i.computeScreenPixelSizeAt(this._heightManifoldTarget)) : this._pointDistanceEnabled ? t.setUniform1f(\"maxPixelDistance\", 2 * i.computeScreenPixelSizeAt(this._pointDistanceTarget)) : this._lineVerticalPlaneEnabled && t.setUniform1f(\"maxPixelDistance\", 2 * i.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)), t.bindTexture(\"frameColor\", e.offscreenRenderingHelper.mainColorTexture);\n  }\n\n  _requestRender() {\n    this._context && this._context.requestRender();\n  }\n\n}\n\nconst k = p(),\n      z = _(),\n      B = _();\n\nexport { H as LaserLineRenderer };","map":{"version":3,"names":["deg2rad","e","isSome","t","isNone","i","disposeMaybe","n","releaseMaybe","s","c","r","m","a","h","l","f","o","_","d","create","p","fromRay","g","getStart","getEnd","u","intersectClipRay","b","P","copy","V","pointAt","E","L","fromPositionAndNormal","q","wrap","D","S","LaserlinePathData","R","createQuadVAO","T","RenderSlot","U","copyParameters","M","updateParameters","C","LaserlinePathTechnique","x","LaserlinePathTechniqueConfiguration","A","LaserlineTechnique","w","LaserlineTechniqueConfiguration","v","PrimitiveType","j","O","y","I","glowColor","glowWidth","glowFalloff","innerColor","innerWidth","globalAlpha","angleCutoff","globalAlphaContrastBoost","__tagStrict","N","H","constructor","contrastControlEnabled","_renderCoordsHelper","_config","_technique","_heightManifoldEnabled","_heightManifoldTarget","_pointDistanceEnabled","_pointDistanceOrigin","_pointDistanceTarget","_lineVerticalPlaneEnabled","_lineVerticalPlaneSegment","_intersectsLineEnabled","_intersectsLineSegment","_intersectsLineRadius","_intersectsLineInfinite","_pathVerticalPlaneEnabled","_pathVerticalPlaneData","_pathTechnique","canRender","_tempNormal","_tempDir","_tempUp","_tempVec3A","_tempVec3B","_tempVec4","_tempPlane","_tempSphere","_parameters","renderSlots","LASERLINES_CONTRAST_CONTROL","LASERLINES","needsLinearDepth","heightManifoldEnabled","_requestRender","heightManifoldTarget","pointDistanceEnabled","pointDistanceTarget","pointDistanceOrigin","lineVerticalPlaneEnabled","lineVerticalPlaneSegment","intersectsLineEnabled","intersectsLineSegment","intersectsLineRadius","intersectsLineInfinite","pathVerticalPlaneEnabled","pathVerticalPlaneVertices","vertices","pathVerticalPlaneBuffers","buffers","setParameters","initializeRenderContext","_context","renderContext","rctx","_quadVAO","_techniqueRepository","shaderTechniqueRepository","_techniqueConfig","acquire","uninitializeRenderContext","prepareTechnique","releaseAndAcquire","render","_renderUnified","_renderPath","bindTechnique","bindParameters","_bindGlobalUniforms","_bindHeightManifoldUniforms","_bindPointDistanceUniforms","_bindLineVerticalPlaneUniforms","_bindIntersectsLineUniforms","bindVAO","drawArrays","TRIANGLE_STRIP","origin","draw","camera","worldUpAtPosition","viewMatrix","setUniform4fv","setUniform4f","vector","setAltitude","setUniform3fv","z","B","k","c0","Number","MAX_VALUE","frustum","setUniform3f","setUniform1f","computeScreenPixelSizeAt","bindTexture","offscreenRenderingHelper","mainColorTexture","requestRender","LaserLineRenderer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/support/LaserLineRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../core/mathUtils.js\";import{isSome as t,isNone as i,disposeMaybe as n,releaseMaybe as s}from\"../../../core/maybe.js\";import{c as r,m as a,i as h,n as l,f as o,a as c}from\"../../../chunks/vec3.js\";import{c as _}from\"../../../chunks/vec3f64.js\";import{t as d}from\"../../../chunks/vec4.js\";import{c as m}from\"../../../chunks/vec4f64.js\";import{create as p,fromRay as g,getStart as f,getEnd as u}from\"../../../geometry/support/clipRay.js\";import{intersectClipRay as b}from\"../../../geometry/support/frustum.js\";import{create as P,copy as V,pointAt as E}from\"../../../geometry/support/lineSegment.js\";import{create as L,fromPositionAndNormal as q}from\"../../../geometry/support/plane.js\";import{wrap as D}from\"../../../geometry/support/ray.js\";import{c as S}from\"../../../chunks/sphere.js\";import{LaserlinePathData as R}from\"./LaserlinePathData.js\";import{createQuadVAO as T}from\"../webgl-engine/lib/glUtil3D.js\";import{RenderSlot as U}from\"../webgl-engine/lib/RenderSlot.js\";import{copyParameters as M,updateParameters as C}from\"../webgl-engine/materials/internal/MaterialUtil.js\";import{LaserlinePathTechnique as x}from\"../webgl-engine/shaders/LaserlinePathTechnique.js\";import{LaserlinePathTechniqueConfiguration as A}from\"../webgl-engine/shaders/LaserlinePathTechniqueConfiguration.js\";import{LaserlineTechnique as w}from\"../webgl-engine/shaders/LaserlineTechnique.js\";import{LaserlineTechniqueConfiguration as v}from\"../webgl-engine/shaders/LaserlineTechniqueConfiguration.js\";import{PrimitiveType as j}from\"../../webgl/enums.js\";const O=_(),y=m(),I={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:e(6),globalAlphaContrastBoost:2,__tagStrict:\"NoParameters\"};function N(e,t,i,n){const s=O,h=y;a(s,t,n),r(h,i),h[3]=0,d(h,h,n),q(s,h,e)}class H{constructor(e,t={},i={contrastControlEnabled:!1}){this._renderCoordsHelper=e,this._config=i,this._technique=null,this._heightManifoldEnabled=!1,this._heightManifoldTarget=_(),this._pointDistanceEnabled=!1,this._pointDistanceOrigin=_(),this._pointDistanceTarget=_(),this._lineVerticalPlaneEnabled=!1,this._lineVerticalPlaneSegment=P(),this._intersectsLineEnabled=!1,this._intersectsLineSegment=P(),this._intersectsLineRadius=3,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._pathVerticalPlaneData=null,this._pathTechnique=null,this.canRender=!0,this._tempNormal=_(),this._tempDir=_(),this._tempUp=_(),this._tempVec3A=_(),this._tempVec3B=_(),this._tempVec4=m(),this._tempPlane=L(),this._tempSphere=S(),this._parameters=M(t,I)}get renderSlots(){return[this._config.contrastControlEnabled?U.LASERLINES_CONTRAST_CONTROL:U.LASERLINES]}get needsLinearDepth(){return!0}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this._requestRender())}get heightManifoldTarget(){return this._heightManifoldTarget}set heightManifoldTarget(e){r(this._heightManifoldTarget,e),this._requestRender()}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this._requestRender())}get pointDistanceTarget(){return this._pointDistanceTarget}set pointDistanceTarget(e){r(this._pointDistanceTarget,e),this._requestRender()}get pointDistanceOrigin(){return this._pointDistanceOrigin}set pointDistanceOrigin(e){r(this._pointDistanceOrigin,e),this._requestRender()}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this._requestRender())}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){V(e,this._lineVerticalPlaneSegment),this._requestRender()}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this._requestRender())}get intersectsLineSegment(){return this._intersectsLineSegment}set intersectsLineSegment(e){V(e,this._intersectsLineSegment),this._requestRender()}get intersectsLineRadius(){return this._intersectsLineRadius}set intersectsLineRadius(e){e!==this._intersectsLineRadius&&(this._intersectsLineRadius=e,this._requestRender())}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this._requestRender())}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,t(this._pathVerticalPlaneData)&&this._requestRender())}set pathVerticalPlaneVertices(e){i(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new R(this._renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this._requestRender()}set pathVerticalPlaneBuffers(e){i(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new R(this._renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this._requestRender()}setParameters(e){C(this._parameters,e)&&this._requestRender()}initializeRenderContext(e){this._context=e;const t=e.renderContext.rctx;this._quadVAO=T(t),this._techniqueRepository=e.shaderTechniqueRepository,this._techniqueConfig=new v;const i=new A;i.contrastControlEnabled=this._config.contrastControlEnabled,this._pathTechnique=this._techniqueRepository.acquire(x,i)}uninitializeRenderContext(){this._quadVAO=n(this._quadVAO),this._technique=s(this._technique),this._pathVerticalPlaneData=n(this._pathVerticalPlaneData),this._pathTechnique=s(this._pathTechnique)}prepareTechnique(){return this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled?(this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._technique=this._techniqueRepository.releaseAndAcquire(w,this._techniqueConfig,this._technique),this._technique):this._pathTechnique}render(e,t){(this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(e,t),this.pathVerticalPlaneEnabled&&this._renderPath(e)}_renderUnified(e,t){const i=e.rctx,n=i.bindTechnique(t,this._parameters,e.bindParameters);this._bindGlobalUniforms(e,n),this._bindHeightManifoldUniforms(e,n),this._bindPointDistanceUniforms(e,n),this._bindLineVerticalPlaneUniforms(e,n),this._bindIntersectsLineUniforms(e,n),i.bindVAO(this._quadVAO),i.drawArrays(j.TRIANGLE_STRIP,0,4)}_renderPath(e){if(i(this._pathVerticalPlaneData)||i(this._pathTechnique))return;const t=e.rctx,n=this._pathTechnique,s=t.bindTechnique(n,{...this._parameters,origin:this._pathVerticalPlaneData.origin},e.bindParameters);this._bindGlobalUniforms(e,s),this._pathVerticalPlaneData.draw(e.rctx)}_bindHeightManifoldUniforms(e,t){if(!this.heightManifoldEnabled)return;const i=this._tempVec3A,n=this._tempPlane,s=e.bindParameters.camera;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,i),N(n,this._heightManifoldTarget,i,s.viewMatrix),t.setUniform4fv(\"heightPlane\",n)}_bindPointDistanceUniforms(e,t){if(!this._pointDistanceEnabled)return;const i=e.bindParameters.camera,n=this._tempSphere;r(n,this._pointDistanceOrigin),a(n,n,i.viewMatrix),n[3]=h(this._pointDistanceOrigin,this._pointDistanceTarget),t.setUniform4f(\"pointDistanceSphere\",n[0],n[1],n[2],n[3])}_bindLineVerticalPlaneUniforms(e,t){if(!this._lineVerticalPlaneEnabled)return;const i=this._renderCoordsHelper,n=e.bindParameters.camera,s=this._tempPlane,h=this._tempVec3A,_=this._tempUp,d=this._tempDir,m=this._tempNormal;E(this._lineVerticalPlaneSegment,.5,h),i.worldUpAtPosition(h,_),l(d,this._lineVerticalPlaneSegment.vector),o(m,_,d),l(m,m),N(s,this._lineVerticalPlaneSegment.origin,m,n.viewMatrix),t.setUniform4fv(\"lineVerticalPlane\",s);const p=this._tempVec3A;r(p,this._lineVerticalPlaneSegment.origin),i.setAltitude(p,0),a(p,p,n.viewMatrix),t.setUniform3fv(\"lineVerticalStart\",p);const g=this._tempVec3B;c(g,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector),i.setAltitude(g,0),a(g,g,n.viewMatrix),t.setUniform3fv(\"lineVerticalEnd\",g)}_bindIntersectsLineUniforms(e,t){if(!this._intersectsLineEnabled)return;const i=z,n=B,s=e.bindParameters.camera;if(this._intersectsLineInfinite){if(g(D(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),k),k.c0=-Number.MAX_VALUE,!b(s.frustum,k))return;f(k,i),u(k,n)}else r(i,this._intersectsLineSegment.origin),c(n,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);const h=this._tempVec3A;a(h,i,s.viewMatrix),t.setUniform3fv(\"intersectsLineStart\",h);const o=this._tempVec4;r(o,this._intersectsLineSegment.vector),this._tempVec4[3]=0,d(this._tempVec4,this._tempVec4,s.viewMatrix),a(n,n,s.viewMatrix),t.setUniform3fv(\"intersectsLineEnd\",n),l(o,o),t.setUniform3f(\"intersectsLineDirection\",o[0],o[1],o[2]),t.setUniform1f(\"intersectsLineRadius\",this._intersectsLineRadius)}_bindGlobalUniforms(e,t){const i=e.bindParameters.camera;this._heightManifoldEnabled?t.setUniform1f(\"maxPixelDistance\",2*i.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?t.setUniform1f(\"maxPixelDistance\",2*i.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&t.setUniform1f(\"maxPixelDistance\",2*i.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin)),t.bindTexture(\"frameColor\",e.offscreenRenderingHelper.mainColorTexture)}_requestRender(){this._context&&this._context.requestRender()}}const k=p(),z=_(),B=_();export{H as LaserLineRenderer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}