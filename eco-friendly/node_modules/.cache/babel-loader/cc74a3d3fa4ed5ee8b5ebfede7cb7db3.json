{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { property as s } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as t } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { QueueProcessor as o } from \"../../../support/QueueProcessor.js\";\n\nfunction a(e) {\n  return e.some(e => e.globalId);\n}\n\nfunction d(e) {\n  return e.filter(e => !e.error).map(e => e.objectId ?? e.globalId);\n}\n\nfunction i(e, r) {\n  const s = new Set(e);\n\n  for (const t of r.values()) s.add(t);\n\n  return s;\n}\n\nfunction n(e, r) {\n  const s = new Set(e);\n\n  for (const t of r.values()) s.delete(t);\n\n  return s;\n}\n\nlet c = class extends r {\n  constructor(e) {\n    super(e), this._hasGlobalIds = !1;\n  }\n\n  normalizeCtorArgs(e) {\n    return this._queueProcessor = new o({\n      concurrency: 1,\n      process: e.process\n    }), {};\n  }\n\n  destroy() {\n    this.clear();\n  }\n\n  get updating() {\n    return this._queueProcessor.length > 0;\n  }\n\n  clear() {\n    this._queueProcessor.clear();\n  }\n\n  push(e) {\n    const r = this._queueProcessor,\n          s = r.last();\n\n    switch (e.type) {\n      case \"update\":\n      case \"refresh\":\n        if (s?.type === e.type) return;\n        r.push(e).finally(() => this.notifyChange(\"updating\"));\n        break;\n\n      case \"edit\":\n        {\n          const t = \"processed-edit\" === s?.type ? s : null;\n          t && r.popLast();\n\n          const o = this._mergeEdits(t, e);\n\n          for (const e of o) r.push(e).finally(() => this.notifyChange(\"updating\"));\n\n          break;\n        }\n    }\n\n    this.notifyChange(\"updating\");\n  }\n\n  _mergeEdits(e, r) {\n    const {\n      addedFeatures: s,\n      deletedFeatures: t,\n      updatedFeatures: o\n    } = r.edits;\n\n    if (this._hasGlobalIds = this._hasGlobalIds || a(s) || a(o) || a(t), this._hasGlobalIds) {\n      return [e, {\n        type: \"processed-edit\",\n        edits: {\n          addOrModified: [...s, ...o],\n          removed: t\n        }\n      }];\n    }\n\n    const c = new Set(d(e?.edits.addOrModified ?? [])),\n          u = new Set(d(e?.edits.removed ?? [])),\n          p = new Set([...d(s), ...d(o)]),\n          l = new Set(d(t));\n    return [{\n      type: \"processed-edit\",\n      edits: {\n        addOrModified: Array.from(i(n(c, l), p)).map(e => ({\n          objectId: e\n        })),\n        removed: Array.from(i(n(u, p), l)).map(e => ({\n          objectId: e\n        }))\n      }\n    }];\n  }\n\n};\ne([s({\n  readOnly: !0\n})], c.prototype, \"updating\", null), c = e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")], c);\nconst u = c;\nexport { u as default };","map":{"version":3,"names":["_","e","r","property","s","subclass","t","QueueProcessor","o","a","some","globalId","d","filter","error","map","objectId","i","Set","values","add","n","delete","c","constructor","_hasGlobalIds","normalizeCtorArgs","_queueProcessor","concurrency","process","destroy","clear","updating","length","push","last","type","finally","notifyChange","popLast","_mergeEdits","addedFeatures","deletedFeatures","updatedFeatures","edits","addOrModified","removed","u","p","l","Array","from","readOnly","prototype","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function a(e){return e.some((e=>e.globalId))}function d(e){return e.filter((e=>!e.error)).map((e=>e.objectId??e.globalId))}function i(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function n(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let c=class extends r{constructor(e){super(e),this._hasGlobalIds=!1}normalizeCtorArgs(e){return this._queueProcessor=new o({concurrency:1,process:e.process}),{}}destroy(){this.clear()}get updating(){return this._queueProcessor.length>0}clear(){this._queueProcessor.clear()}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if(s?.type===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===s?.type?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){const{addedFeatures:s,deletedFeatures:t,updatedFeatures:o}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||a(s)||a(o)||a(t),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...s,...o],removed:t}}]}const c=new Set(d(e?.edits.addOrModified??[])),u=new Set(d(e?.edits.removed??[])),p=new Set([...d(s),...d(o)]),l=new Set(d(t));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(i(n(c,l),p)).map((e=>({objectId:e}))),removed:Array.from(i(n(u,p),l)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],c.prototype,\"updating\",null),c=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],c);const u=c;export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}