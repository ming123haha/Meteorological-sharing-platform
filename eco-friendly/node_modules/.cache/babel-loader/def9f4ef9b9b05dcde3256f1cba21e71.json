{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { eachAlways as e } from \"../../../../../core/promiseUtils.js\";\nimport t from \"../../../../Point.js\";\nimport { GLB as r } from \"./glb.js\";\nimport { GLTF as o } from \"./gltf.js\";\nimport { ImageOutputType as n, BufferOutputType as s } from \"./types.js\";\nexport { AlphaMode, AttributeType, BufferOutputType, ColorMode, ImageOutputType, MeshMode } from \"./types.js\";\nimport { isArrayBufferPNG as i, encodeBase64DataUri as u } from \"./imageutils.js\";\nexport { Asset } from \"./asset.js\";\nexport { Scene } from \"./scene.js\";\nexport { Node } from \"./node.js\";\nconst f = \"model.gltf\",\n      p = \"model.glb\";\n\nfunction a(a, m, c) {\n  const l = new o(a, m = m || {}, c);\n  let g = l.params;\n  g ? g.origin || (g.origin = new t({\n    x: -1,\n    y: -1,\n    z: -1\n  })) : g = {\n    origin: new t({\n      x: -1,\n      y: -1,\n      z: -1\n    })\n  };\n  const y = g.origin,\n        d = l.gltf,\n        j = d.extras?.promises ?? [];\n  let x = 1,\n      b = 1,\n      B = null;\n  return e(j).then(() => {\n    const e = {\n      origin: y\n    };\n    delete d.extras;\n    const t = \"number\" == typeof m.jsonSpacing ? m.jsonSpacing : 4,\n          o = JSON.stringify(d, (t, r) => {\n      if (\"extras\" !== t) {\n        if (r instanceof ArrayBuffer) {\n          if (i(r)) switch (m.imageOutputType) {\n            case n.DataURI:\n            case n.GLB:\n              break;\n\n            case n.External:\n            default:\n              {\n                const t = `img${b}.png`;\n                return b++, e[t] = r, t;\n              }\n          }\n\n          switch (m.bufferOutputType) {\n            case s.DataURI:\n              return u(r);\n\n            case s.GLB:\n              if (B) throw new Error(\"Already encountered an ArrayBuffer, there should only be one in the GLB format.\");\n              return void (B = r);\n\n            case s.External:\n            default:\n              {\n                const t = `data${x}.bin`;\n                return x++, e[t] = r, t;\n              }\n          }\n        }\n\n        return r;\n      }\n    }, t);\n    return m.bufferOutputType === s.GLB || m.imageOutputType === n.GLB ? e[p] = new r(o, B).buffer : e[f] = o, e;\n  });\n}\n\nfunction m(e, t) {\n  return a(e, {\n    bufferOutputType: s.GLB,\n    imageOutputType: n.GLB,\n    jsonSpacing: 0\n  }, t);\n}\n\nexport { p as MODEL_NAME_GLB, f as MODEL_NAME_GLTF, m as exportGLB, a as exportGLTF };","map":{"version":3,"names":["eachAlways","e","t","GLB","r","GLTF","o","ImageOutputType","n","BufferOutputType","s","AlphaMode","AttributeType","ColorMode","MeshMode","isArrayBufferPNG","i","encodeBase64DataUri","u","Asset","Scene","Node","f","p","a","m","c","l","g","params","origin","x","y","z","d","gltf","j","extras","promises","b","B","then","jsonSpacing","JSON","stringify","ArrayBuffer","imageOutputType","DataURI","External","bufferOutputType","Error","buffer","MODEL_NAME_GLB","MODEL_NAME_GLTF","exportGLB","exportGLTF"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/index.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{eachAlways as e}from\"../../../../../core/promiseUtils.js\";import t from\"../../../../Point.js\";import{GLB as r}from\"./glb.js\";import{GLTF as o}from\"./gltf.js\";import{ImageOutputType as n,BufferOutputType as s}from\"./types.js\";export{AlphaMode,AttributeType,BufferOutputType,ColorMode,ImageOutputType,MeshMode}from\"./types.js\";import{isArrayBufferPNG as i,encodeBase64DataUri as u}from\"./imageutils.js\";export{Asset}from\"./asset.js\";export{Scene}from\"./scene.js\";export{Node}from\"./node.js\";const f=\"model.gltf\",p=\"model.glb\";function a(a,m,c){const l=new o(a,m=m||{},c);let g=l.params;g?g.origin||(g.origin=new t({x:-1,y:-1,z:-1})):g={origin:new t({x:-1,y:-1,z:-1})};const y=g.origin,d=l.gltf,j=d.extras?.promises??[];let x=1,b=1,B=null;return e(j).then((()=>{const e={origin:y};delete d.extras;const t=\"number\"==typeof m.jsonSpacing?m.jsonSpacing:4,o=JSON.stringify(d,((t,r)=>{if(\"extras\"!==t){if(r instanceof ArrayBuffer){if(i(r))switch(m.imageOutputType){case n.DataURI:case n.GLB:break;case n.External:default:{const t=`img${b}.png`;return b++,e[t]=r,t}}switch(m.bufferOutputType){case s.DataURI:return u(r);case s.GLB:if(B)throw new Error(\"Already encountered an ArrayBuffer, there should only be one in the GLB format.\");return void(B=r);case s.External:default:{const t=`data${x}.bin`;return x++,e[t]=r,t}}}return r}}),t);return m.bufferOutputType===s.GLB||m.imageOutputType===n.GLB?e[p]=new r(o,B).buffer:e[f]=o,e}))}function m(e,t){return a(e,{bufferOutputType:s.GLB,imageOutputType:n.GLB,jsonSpacing:0},t)}export{p as MODEL_NAME_GLB,f as MODEL_NAME_GLTF,m as exportGLB,a as exportGLTF};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}