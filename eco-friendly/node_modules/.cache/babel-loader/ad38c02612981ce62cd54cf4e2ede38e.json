{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport o from \"../../core/Error.js\";\nimport { isSome as r } from \"../../core/maybe.js\";\n\nasync function n(n, t, s, a, i, d) {\n  let l = null;\n\n  if (r(s)) {\n    const o = `${n}/nodepages/`,\n          t = o + Math.floor(s.rootIndex / s.nodesPerPage);\n\n    try {\n      return {\n        type: \"page\",\n        rootPage: (await e(t, {\n          query: {\n            f: \"json\",\n            token: a\n          },\n          responseType: \"json\",\n          signal: d\n        })).data,\n        rootIndex: s.rootIndex,\n        pageSize: s.nodesPerPage,\n        lodMetric: s.lodSelectionMetricType,\n        urlPrefix: o\n      };\n    } catch (f) {\n      r(i) && i.warn(\"#fetchIndexInfo()\", \"Failed to load root node page. Falling back to node documents.\", t, f), l = f;\n    }\n  }\n\n  if (!t) return null;\n  const p = `${n}/nodes/`,\n        c = p + (t && t.split(\"/\").pop());\n\n  try {\n    return {\n      type: \"node\",\n      rootNode: (await e(c, {\n        query: {\n          f: \"json\",\n          token: a\n        },\n        responseType: \"json\",\n        signal: d\n      })).data,\n      urlPrefix: p\n    };\n  } catch (f) {\n    throw new o(\"sceneservice:root-node-missing\", \"Root node missing.\", {\n      pageError: l,\n      nodeError: f,\n      url: c\n    });\n  }\n}\n\nexport { n as fetchIndexInfo };","map":{"version":3,"names":["e","o","isSome","r","n","t","s","a","i","d","l","Math","floor","rootIndex","nodesPerPage","type","rootPage","query","f","token","responseType","signal","data","pageSize","lodMetric","lodSelectionMetricType","urlPrefix","warn","p","c","split","pop","rootNode","pageError","nodeError","url","fetchIndexInfo"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/I3SIndexInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";import{isSome as r}from\"../../core/maybe.js\";async function n(n,t,s,a,i,d){let l=null;if(r(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:\"page\",rootPage:(await e(t,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(f){r(i)&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",t,f),l=f}}if(!t)return null;const p=`${n}/nodes/`,c=p+(t&&t.split(\"/\").pop());try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,urlPrefix:p}}catch(f){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:f,url:c})}}export{n as fetchIndexInfo};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,qBAAvB;;AAA6C,eAAeC,CAAf,CAAiBA,CAAjB,EAAmBC,CAAnB,EAAqBC,CAArB,EAAuBC,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6B;EAAC,IAAIC,CAAC,GAAC,IAAN;;EAAW,IAAGP,CAAC,CAACG,CAAD,CAAJ,EAAQ;IAAC,MAAML,CAAC,GAAE,GAAEG,CAAE,aAAb;IAAA,MAA0BC,CAAC,GAACJ,CAAC,GAACU,IAAI,CAACC,KAAL,CAAWN,CAAC,CAACO,SAAF,GAAYP,CAAC,CAACQ,YAAzB,CAA9B;;IAAqE,IAAG;MAAC,OAAM;QAACC,IAAI,EAAC,MAAN;QAAaC,QAAQ,EAAC,CAAC,MAAMhB,CAAC,CAACK,CAAD,EAAG;UAACY,KAAK,EAAC;YAACC,CAAC,EAAC,MAAH;YAAUC,KAAK,EAACZ;UAAhB,CAAP;UAA0Ba,YAAY,EAAC,MAAvC;UAA8CC,MAAM,EAACZ;QAArD,CAAH,CAAR,EAAqEa,IAA3F;QAAgGT,SAAS,EAACP,CAAC,CAACO,SAA5G;QAAsHU,QAAQ,EAACjB,CAAC,CAACQ,YAAjI;QAA8IU,SAAS,EAAClB,CAAC,CAACmB,sBAA1J;QAAiLC,SAAS,EAACzB;MAA3L,CAAN;IAAoM,CAAxM,CAAwM,OAAMiB,CAAN,EAAQ;MAACf,CAAC,CAACK,CAAD,CAAD,IAAMA,CAAC,CAACmB,IAAF,CAAO,mBAAP,EAA2B,gEAA3B,EAA4FtB,CAA5F,EAA8Fa,CAA9F,CAAN,EAAuGR,CAAC,GAACQ,CAAzG;IAA2G;EAAC;;EAAA,IAAG,CAACb,CAAJ,EAAM,OAAO,IAAP;EAAY,MAAMuB,CAAC,GAAE,GAAExB,CAAE,SAAb;EAAA,MAAsByB,CAAC,GAACD,CAAC,IAAEvB,CAAC,IAAEA,CAAC,CAACyB,KAAF,CAAQ,GAAR,EAAaC,GAAb,EAAL,CAAzB;;EAAkD,IAAG;IAAC,OAAM;MAAChB,IAAI,EAAC,MAAN;MAAaiB,QAAQ,EAAC,CAAC,MAAMhC,CAAC,CAAC6B,CAAD,EAAG;QAACZ,KAAK,EAAC;UAACC,CAAC,EAAC,MAAH;UAAUC,KAAK,EAACZ;QAAhB,CAAP;QAA0Ba,YAAY,EAAC,MAAvC;QAA8CC,MAAM,EAACZ;MAArD,CAAH,CAAR,EAAqEa,IAA3F;MAAgGI,SAAS,EAACE;IAA1G,CAAN;EAAmH,CAAvH,CAAuH,OAAMV,CAAN,EAAQ;IAAC,MAAM,IAAIjB,CAAJ,CAAM,gCAAN,EAAuC,oBAAvC,EAA4D;MAACgC,SAAS,EAACvB,CAAX;MAAawB,SAAS,EAAChB,CAAvB;MAAyBiB,GAAG,EAACN;IAA7B,CAA5D,CAAN;EAAmG;AAAC;;AAAA,SAAOzB,CAAC,IAAIgC,cAAZ"},"metadata":{},"sourceType":"module"}