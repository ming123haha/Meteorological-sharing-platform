{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport e from \"../../../core/has.js\";\nimport o from \"../../../core/Loadable.js\";\nimport { isSome as r } from \"../../../core/maybe.js\";\nimport { debounce as s } from \"../../../core/promiseUtils.js\";\nimport { open as i } from \"../../../core/workers/workers.js\";\nimport { property as n } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport c from \"../../../rest/support/FeatureSet.js\";\nimport u from \"../../../geometry/Extent.js\";\nlet l = class extends o {\n  constructor(t) {\n    super(t), this.type = \"csv\", this.refresh = s(async t => {\n      await this.load();\n      const {\n        extent: e,\n        timeExtent: o\n      } = await this._connection.invoke(\"refresh\", t);\n      return this.sourceJSON.extent = e, o && (this.sourceJSON.timeInfo.timeExtent = [o.start, o.end]), {\n        dataChanged: !0,\n        updates: {\n          extent: this.sourceJSON.extent,\n          timeInfo: this.sourceJSON.timeInfo\n        }\n      };\n    });\n  }\n\n  load(t) {\n    const e = r(t) ? t.signal : null;\n    return this.addResolvingPromise(this._startWorker(e)), Promise.resolve(this);\n  }\n\n  destroy() {\n    this._connection?.close(), this._connection = null;\n  }\n\n  async openPorts() {\n    return await this.load(), this._connection.openPorts();\n  }\n\n  async queryFeatures(t, e = {}) {\n    await this.load(e);\n    const o = await this._connection.invoke(\"queryFeatures\", t ? t.toJSON() : null, e);\n    return c.fromJSON(o);\n  }\n\n  async queryFeaturesJSON(t, e = {}) {\n    return await this.load(e), this._connection.invoke(\"queryFeatures\", t ? t.toJSON() : null, e);\n  }\n\n  async queryFeatureCount(t, e = {}) {\n    return await this.load(e), this._connection.invoke(\"queryFeatureCount\", t ? t.toJSON() : null, e);\n  }\n\n  async queryObjectIds(t, e = {}) {\n    return await this.load(e), this._connection.invoke(\"queryObjectIds\", t ? t.toJSON() : null, e);\n  }\n\n  async queryExtent(t, e = {}) {\n    await this.load(e);\n    const o = await this._connection.invoke(\"queryExtent\", t ? t.toJSON() : null, e);\n    return {\n      count: o.count,\n      extent: u.fromJSON(o.extent)\n    };\n  }\n\n  async querySnapping(t, e = {}) {\n    return await this.load(e), this._connection.invoke(\"querySnapping\", t, e);\n  }\n\n  async _startWorker(t) {\n    this._connection = await i(\"CSVSourceWorker\", {\n      strategy: e(\"feature-layers-workers\") ? \"dedicated\" : \"local\",\n      signal: t\n    });\n    const {\n      url: o,\n      delimiter: r,\n      fields: s,\n      latitudeField: n,\n      longitudeField: a,\n      spatialReference: c,\n      timeInfo: u\n    } = this.loadOptions,\n          l = await this._connection.invoke(\"load\", {\n      url: o,\n      customParameters: this.customParameters,\n      parsingOptions: {\n        delimiter: r,\n        fields: s?.map(t => t.toJSON()),\n        latitudeField: n,\n        longitudeField: a,\n        spatialReference: c?.toJSON(),\n        timeInfo: u?.toJSON()\n      }\n    }, {\n      signal: t\n    });\n    this.locationInfo = l.locationInfo, this.sourceJSON = l.layerDefinition, this.delimiter = l.delimiter;\n  }\n\n};\nt([n()], l.prototype, \"type\", void 0), t([n()], l.prototype, \"loadOptions\", void 0), t([n()], l.prototype, \"customParameters\", void 0), t([n()], l.prototype, \"locationInfo\", void 0), t([n()], l.prototype, \"sourceJSON\", void 0), t([n()], l.prototype, \"delimiter\", void 0), l = t([a(\"esri.layers.graphics.sources.CSVSource\")], l);\nexport { l as CSVSource };","map":{"version":3,"names":["_","t","e","o","isSome","r","debounce","s","open","i","property","n","subclass","a","c","u","l","constructor","type","refresh","load","extent","timeExtent","_connection","invoke","sourceJSON","timeInfo","start","end","dataChanged","updates","signal","addResolvingPromise","_startWorker","Promise","resolve","destroy","close","openPorts","queryFeatures","toJSON","fromJSON","queryFeaturesJSON","queryFeatureCount","queryObjectIds","queryExtent","count","querySnapping","strategy","url","delimiter","fields","latitudeField","longitudeField","spatialReference","loadOptions","customParameters","parsingOptions","map","locationInfo","layerDefinition","prototype","CSVSource"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/sources/CSVSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import e from\"../../../core/has.js\";import o from\"../../../core/Loadable.js\";import{isSome as r}from\"../../../core/maybe.js\";import{debounce as s}from\"../../../core/promiseUtils.js\";import{open as i}from\"../../../core/workers/workers.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../rest/support/FeatureSet.js\";import u from\"../../../geometry/Extent.js\";let l=class extends o{constructor(t){super(t),this.type=\"csv\",this.refresh=s((async t=>{await this.load();const{extent:e,timeExtent:o}=await this._connection.invoke(\"refresh\",t);return this.sourceJSON.extent=e,o&&(this.sourceJSON.timeInfo.timeExtent=[o.start,o.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}}))}load(t){const e=r(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(t,e={}){await this.load(e);const o=await this._connection.invoke(\"queryFeatures\",t?t.toJSON():null,e);return c.fromJSON(o)}async queryFeaturesJSON(t,e={}){return await this.load(e),this._connection.invoke(\"queryFeatures\",t?t.toJSON():null,e)}async queryFeatureCount(t,e={}){return await this.load(e),this._connection.invoke(\"queryFeatureCount\",t?t.toJSON():null,e)}async queryObjectIds(t,e={}){return await this.load(e),this._connection.invoke(\"queryObjectIds\",t?t.toJSON():null,e)}async queryExtent(t,e={}){await this.load(e);const o=await this._connection.invoke(\"queryExtent\",t?t.toJSON():null,e);return{count:o.count,extent:u.fromJSON(o.extent)}}async querySnapping(t,e={}){return await this.load(e),this._connection.invoke(\"querySnapping\",t,e)}async _startWorker(t){this._connection=await i(\"CSVSourceWorker\",{strategy:e(\"feature-layers-workers\")?\"dedicated\":\"local\",signal:t});const{url:o,delimiter:r,fields:s,latitudeField:n,longitudeField:a,spatialReference:c,timeInfo:u}=this.loadOptions,l=await this._connection.invoke(\"load\",{url:o,customParameters:this.customParameters,parsingOptions:{delimiter:r,fields:s?.map((t=>t.toJSON())),latitudeField:n,longitudeField:a,spatialReference:c?.toJSON(),timeInfo:u?.toJSON()}},{signal:t});this.locationInfo=l.locationInfo,this.sourceJSON=l.layerDefinition,this.delimiter=l.delimiter}};t([n()],l.prototype,\"type\",void 0),t([n()],l.prototype,\"loadOptions\",void 0),t([n()],l.prototype,\"customParameters\",void 0),t([n()],l.prototype,\"locationInfo\",void 0),t([n()],l.prototype,\"sourceJSON\",void 0),t([n()],l.prototype,\"delimiter\",void 0),l=t([a(\"esri.layers.graphics.sources.CSVSource\")],l);export{l as CSVSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}