{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { lerp as i } from \"../../../../core/mathUtils.js\";\nimport { c as t, g as s, a as h, h as r } from \"../../../../chunks/vec3.js\";\nimport { c as n, f as a, a as o } from \"../../../../chunks/vec3f64.js\";\nimport { SphericalHarmonicsAmbientLight as e, MainLight as c } from \"./Lightsources.js\";\nimport { combineLights as g } from \"./SphericalHarmonics.js\";\n\nclass m {\n  constructor() {\n    this.color = n(), this.intensity = 1;\n  }\n\n}\n\nclass l {\n  constructor() {\n    this.direction = n(), this.ambient = new m(), this.diffuse = new m();\n  }\n\n}\n\nconst _ = .4;\n\nclass L {\n  constructor() {\n    this._shOrder = 2, this._legacy = new l(), this.globalFactor = .5, this.noonFactor = .5, this._sphericalHarmonics = new e(), this._mainLight = new c(n(), a(1, 0, 0), !1);\n  }\n\n  get legacy() {\n    return this._legacy;\n  }\n\n  get sh() {\n    return this._sphericalHarmonics;\n  }\n\n  get mainLight() {\n    return this._mainLight;\n  }\n\n  set(i) {\n    g(i, this._shOrder, this._mainLight, this._sphericalHarmonics), t(this._legacy.direction, this._mainLight.direction);\n    const r = 1 / Math.PI;\n    this._legacy.ambient.color[0] = .282095 * this._sphericalHarmonics.r[0] * r, this._legacy.ambient.color[1] = .282095 * this._sphericalHarmonics.g[0] * r, this._legacy.ambient.color[2] = .282095 * this._sphericalHarmonics.b[0] * r, s(this._legacy.diffuse.color, this._mainLight.intensity, r), t(p, this._legacy.diffuse.color), s(p, p, _ * this.globalFactor), h(this._legacy.ambient.color, this._legacy.ambient.color, p);\n  }\n\n  copyFrom(i) {\n    this._sphericalHarmonics.r = Array.from(i.sh.r), this._sphericalHarmonics.g = Array.from(i.sh.g), this._sphericalHarmonics.b = Array.from(i.sh.b), this._mainLight.direction = o(i.mainLight.direction), this._mainLight.intensity = o(i.mainLight.intensity), this._mainLight.castShadows = i.mainLight.castShadows, this._mainLight.specularStrength = i.mainLight.specularStrength, this._mainLight.environmentStrength = i.mainLight.environmentStrength, this.globalFactor = i.globalFactor, this.noonFactor = i.noonFactor;\n  }\n\n  lerpLighting(s, h, n) {\n    if (r(this._mainLight.intensity, s.mainLight.intensity, h.mainLight.intensity, n), this._mainLight.environmentStrength = i(s.mainLight.environmentStrength, h.mainLight.environmentStrength, n), this._mainLight.specularStrength = i(s.mainLight.specularStrength, h.mainLight.specularStrength, n), t(this._mainLight.direction, h.mainLight.direction), this._mainLight.castShadows = h.mainLight.castShadows, this.globalFactor = i(s.globalFactor, h.globalFactor, n), this.noonFactor = i(s.noonFactor, h.noonFactor, n), s.sh.r.length === h.sh.r.length) for (let t = 0; t < h.sh.r.length; t++) this._sphericalHarmonics.r[t] = i(s.sh.r[t], h.sh.r[t], n), this._sphericalHarmonics.g[t] = i(s.sh.g[t], h.sh.g[t], n), this._sphericalHarmonics.b[t] = i(s.sh.b[t], h.sh.b[t], n);else for (let i = 0; i < h.sh.r.length; i++) this._sphericalHarmonics.r[i] = h.sh.r[i], this._sphericalHarmonics.g[i] = h.sh.g[i], this._sphericalHarmonics.b[i] = h.sh.b[i];\n  }\n\n}\n\nconst p = n();\nexport { L as SceneLighting, _ as ambientBoost };","map":{"version":3,"names":["lerp","i","c","t","g","s","a","h","r","n","f","o","SphericalHarmonicsAmbientLight","e","MainLight","combineLights","m","constructor","color","intensity","l","direction","ambient","diffuse","_","L","_shOrder","_legacy","globalFactor","noonFactor","_sphericalHarmonics","_mainLight","legacy","sh","mainLight","set","Math","PI","b","p","copyFrom","Array","from","castShadows","specularStrength","environmentStrength","lerpLighting","length","SceneLighting","ambientBoost"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{lerp as i}from\"../../../../core/mathUtils.js\";import{c as t,g as s,a as h,h as r}from\"../../../../chunks/vec3.js\";import{c as n,f as a,a as o}from\"../../../../chunks/vec3f64.js\";import{SphericalHarmonicsAmbientLight as e,MainLight as c}from\"./Lightsources.js\";import{combineLights as g}from\"./SphericalHarmonics.js\";class m{constructor(){this.color=n(),this.intensity=1}}class l{constructor(){this.direction=n(),this.ambient=new m,this.diffuse=new m}}const _=.4;class L{constructor(){this._shOrder=2,this._legacy=new l,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new e,this._mainLight=new c(n(),a(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){g(i,this._shOrder,this._mainLight,this._sphericalHarmonics),t(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,s(this._legacy.diffuse.color,this._mainLight.intensity,r),t(p,this._legacy.diffuse.color),s(p,p,_*this.globalFactor),h(this._legacy.ambient.color,this._legacy.ambient.color,p)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),this._mainLight.direction=o(i.mainLight.direction),this._mainLight.intensity=o(i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if(r(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=i(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=i(s.mainLight.specularStrength,h.mainLight.specularStrength,n),t(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=i(s.globalFactor,h.globalFactor,n),this.noonFactor=i(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=i(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=i(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=i(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const p=n();export{L as SceneLighting,_ as ambientBoost};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}