{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { packInterleavedBuffer as e } from \"../../../support/buffer/workerHelper.js\";\nimport { EdgeInputBufferLayout as t } from \"./bufferLayouts.js\";\nimport { extractEdges as n } from \"./edgePreprocessing.js\";\nimport { extract as s, extractEdgeInformation as r, extractEdgeLocationsLayout as i, extractComponentsEdgeLocationsLayout as a } from \"./edgeProcessing.js\";\n\nclass o {\n  async extract(e) {\n    const t = c(e),\n          n = s(t),\n          r = [t.data.buffer];\n    return {\n      result: l(n, r),\n      transferList: r\n    };\n  }\n\n  async extractComponentsEdgeLocations(t) {\n    const s = c(t),\n          i = r(s.data, s.skipDeduplicate, s.indices, s.indicesLength),\n          a = n(i, p, g),\n          o = [];\n    return {\n      result: e(a.regular.instancesData, o),\n      transferList: o\n    };\n  }\n\n  async extractEdgeLocations(t) {\n    const s = c(t),\n          i = r(s.data, s.skipDeduplicate, s.indices, s.indicesLength),\n          a = n(i, f, g),\n          o = [];\n    return {\n      result: e(a.regular.instancesData, o),\n      transferList: o\n    };\n  }\n\n}\n\nfunction c(e) {\n  return {\n    data: t.createView(e.dataBuffer),\n    indices: \"Uint32Array\" === e.indicesType ? new Uint32Array(e.indices) : \"Uint16Array\" === e.indicesType ? new Uint16Array(e.indices) : e.indices,\n    indicesLength: e.indicesLength,\n    writerSettings: e.writerSettings,\n    skipDeduplicate: e.skipDeduplicate\n  };\n}\n\nfunction l(t, n) {\n  n.push(t.regular.lodInfo.lengths.buffer), n.push(t.silhouette.lodInfo.lengths.buffer);\n  return {\n    regular: {\n      instancesData: e(t.regular.instancesData, n),\n      lodInfo: {\n        lengths: t.regular.lodInfo.lengths.buffer\n      }\n    },\n    silhouette: {\n      instancesData: e(t.silhouette.instancesData, n),\n      lodInfo: {\n        lengths: t.silhouette.lodInfo.lengths.buffer\n      }\n    },\n    averageEdgeLength: t.averageEdgeLength\n  };\n}\n\nclass u {\n  allocate(e) {\n    return i.createBuffer(e);\n  }\n\n  trim(e, t) {\n    return e.slice(0, t);\n  }\n\n  write(e, t, n) {\n    e.position0.setVec(t, n.position0), e.position1.setVec(t, n.position1);\n  }\n\n}\n\nclass d {\n  allocate(e) {\n    return a.createBuffer(e);\n  }\n\n  trim(e, t) {\n    return e.slice(0, t);\n  }\n\n  write(e, t, n) {\n    e.position0.setVec(t, n.position0), e.position1.setVec(t, n.position1), e.componentIndex.set(t, n.componentIndex);\n  }\n\n}\n\nconst f = new u(),\n      p = new d(),\n      g = {\n  allocate: () => null,\n  write: () => {},\n  trim: () => null\n};\nexport { o as default };","map":{"version":3,"names":["packInterleavedBuffer","e","EdgeInputBufferLayout","t","extractEdges","n","extract","s","extractEdgeInformation","r","extractEdgeLocationsLayout","i","extractComponentsEdgeLocationsLayout","a","o","c","data","buffer","result","l","transferList","extractComponentsEdgeLocations","skipDeduplicate","indices","indicesLength","p","g","regular","instancesData","extractEdgeLocations","f","createView","dataBuffer","indicesType","Uint32Array","Uint16Array","writerSettings","push","lodInfo","lengths","silhouette","averageEdgeLength","u","allocate","createBuffer","trim","slice","write","position0","setVec","position1","d","componentIndex","set","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{packInterleavedBuffer as e}from\"../../../support/buffer/workerHelper.js\";import{EdgeInputBufferLayout as t}from\"./bufferLayouts.js\";import{extractEdges as n}from\"./edgePreprocessing.js\";import{extract as s,extractEdgeInformation as r,extractEdgeLocationsLayout as i,extractComponentsEdgeLocationsLayout as a}from\"./edgeProcessing.js\";class o{async extract(e){const t=c(e),n=s(t),r=[t.data.buffer];return{result:l(n,r),transferList:r}}async extractComponentsEdgeLocations(t){const s=c(t),i=r(s.data,s.skipDeduplicate,s.indices,s.indicesLength),a=n(i,p,g),o=[];return{result:e(a.regular.instancesData,o),transferList:o}}async extractEdgeLocations(t){const s=c(t),i=r(s.data,s.skipDeduplicate,s.indices,s.indicesLength),a=n(i,f,g),o=[];return{result:e(a.regular.instancesData,o),transferList:o}}}function c(e){return{data:t.createView(e.dataBuffer),indices:\"Uint32Array\"===e.indicesType?new Uint32Array(e.indices):\"Uint16Array\"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function l(t,n){n.push(t.regular.lodInfo.lengths.buffer),n.push(t.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:e(t.regular.instancesData,n),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:e(t.silhouette.instancesData,n),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}class u{allocate(e){return i.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)}}class d{allocate(e){return a.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)}}const f=new u,p=new d,g={allocate:()=>null,write:()=>{},trim:()=>null};export{o as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}