{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { disposeMaybe as s } from \"../../../../core/maybe.js\";\nimport { property as i } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as r } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { g as a, c as o } from \"../../../../chunks/vec4.js\";\nimport { f as n } from \"../../../../chunks/vec4f64.js\";\nimport { createQuadVAO as h } from \"./glUtil3D.js\";\nimport { ShadowCastVisualizeTechnique as u } from \"../shaders/ShadowCastVisualizeTechnique.js\";\nimport { ShadowCastVisualizeTechniqueConfiguration as _, ShadowCastVisualization as l } from \"../shaders/ShadowCastVisualizeTechniqueConfiguration.js\";\nimport { vertexCount as d } from \"../../../webgl/Util.js\";\nconst c = n(.01, 0, .25, 1),\n      p = 4e4,\n      m = 5e4,\n      b = 1 / 512;\nlet q = class extends t {\n  constructor(e, t, s, i) {\n    super({}), this._techniqueRepository = e, this._rctx = t, this._shadowAccumulator = s, this._requestRender = i, this._passParameters = {\n      shadowCastMap: this._shadowCastTexture,\n      sampleScale: 0,\n      color: c,\n      threshold: .5,\n      bandSize: .1,\n      opacityFromElevation: 1,\n      __tagStrict: \"NoParameters\"\n    }, this._techniqueConfig = new _(), this._enabled = !1, this._vao = h(t), this._techniqueConfig.visualization = l.Gradient;\n  }\n\n  normalizeCtorArgs() {\n    return {};\n  }\n\n  dispose() {\n    this._stop(), this._vao = s(this._vao), this._techniqueRepository.release(this._technique), this._technique = null, this._shadowAccumulator = null;\n  }\n\n  get visualizeShadowCastTechnique() {\n    return this._technique = this._techniqueRepository.releaseAndAcquire(u, this._techniqueConfig, this._technique), this._technique;\n  }\n\n  render(e) {\n    if (!this._isRenderingVisualization) return;\n    this._passParameters.sampleScale = 1 / this._computedSamples;\n    const t = this.visualizeShadowCastTechnique;\n    this._rctx.bindVAO(this._vao), this._rctx.bindTechnique(t, this._passParameters, e), this._rctx.drawArrays(t.primitiveType, 0, d(this._vao, \"geometry\"));\n  }\n\n  setOptions(e) {\n    void 0 !== e.enabled && this._setEnabled(e.enabled), void 0 !== e.color && this._setColor(e.color), void 0 !== e.threshold && (this._threshold = e.threshold), void 0 !== e.visualization && (this._visualization = e.visualization), void 0 !== e.bandSize && (this._bandSize = e.bandSize), void 0 !== e.bandsEnabled && (this._bandsEnabled = e.bandsEnabled);\n  }\n\n  get opacityFromElevation() {\n    return this._passParameters.opacityFromElevation;\n  }\n\n  set opacityFromElevation(e) {\n    this._passParameters.opacityFromElevation !== e && (this._passParameters.opacityFromElevation = e, this.notifyChange(\"opacityFromElevation\"));\n  }\n\n  get _isRenderingVisualization() {\n    return this._enabled && this._computedSamples > 0 && this.opacityFromElevation > b;\n  }\n\n  get _computedSamples() {\n    return this._shadowAccumulator.computedSamples;\n  }\n\n  get _shadowCastTexture() {\n    return this._shadowAccumulator.shadowCastTexture;\n  }\n\n  get _threshold() {\n    return this._passParameters.threshold;\n  }\n\n  set _threshold(e) {\n    this._threshold !== e && (this._passParameters.threshold = e, this._requestRenderIfRunning());\n  }\n\n  get _visualization() {\n    return this._techniqueConfig.visualization;\n  }\n\n  set _visualization(e) {\n    e !== this._visualization && (this._techniqueConfig.visualization = e, this._techniqueRepository.release(this._technique), this._technique = null, this._requestRenderIfRunning());\n  }\n\n  get _bandSize() {\n    return this._passParameters.bandSize;\n  }\n\n  set _bandSize(e) {\n    e !== this._bandSize && (this._passParameters.bandSize = e, this._requestRenderIfRunning());\n  }\n\n  get _bandsEnabled() {\n    return this._techniqueConfig.bandsEnabled;\n  }\n\n  set _bandsEnabled(e) {\n    e !== this._bandsEnabled && (this._techniqueConfig.bandsEnabled = e, this._techniqueRepository.release(this._technique), this._technique = null, this._requestRenderIfRunning());\n  }\n\n  _setColor(e) {\n    const t = this._passParameters.color;\n    a(e, t) || (o(this._passParameters.color, e), this._requestRenderIfRunning());\n  }\n\n  _setEnabled(e) {\n    e !== this._enabled && (e ? this._start() : this._stop());\n  }\n\n  _requestRenderIfRunning() {\n    this._enabled && this._requestRender();\n  }\n\n  _start() {\n    this._enabled = !0, this._requestRender();\n  }\n\n  _stop() {\n    this._enabled = !1, this._requestRender();\n  }\n\n};\ne([i()], q.prototype, \"opacityFromElevation\", null), q = e([r(\"esri.views.3d.webgl-engine.lib.ShadowCastRenderer\")], q);\nexport { q as ShadowCastRenderer, m as shadowCastDisableElevationMax, p as shadowCastDisableElevationMin, b as shadowCastDisabledElevationThreshold };","map":{"version":3,"names":["_","e","t","disposeMaybe","s","property","i","subclass","r","g","a","c","o","f","n","createQuadVAO","h","ShadowCastVisualizeTechnique","u","ShadowCastVisualizeTechniqueConfiguration","ShadowCastVisualization","l","vertexCount","d","p","m","b","q","constructor","_techniqueRepository","_rctx","_shadowAccumulator","_requestRender","_passParameters","shadowCastMap","_shadowCastTexture","sampleScale","color","threshold","bandSize","opacityFromElevation","__tagStrict","_techniqueConfig","_enabled","_vao","visualization","Gradient","normalizeCtorArgs","dispose","_stop","release","_technique","visualizeShadowCastTechnique","releaseAndAcquire","render","_isRenderingVisualization","_computedSamples","bindVAO","bindTechnique","drawArrays","primitiveType","setOptions","enabled","_setEnabled","_setColor","_threshold","_visualization","_bandSize","bandsEnabled","_bandsEnabled","notifyChange","computedSamples","shadowCastTexture","_requestRenderIfRunning","_start","prototype","ShadowCastRenderer","shadowCastDisableElevationMax","shadowCastDisableElevationMin","shadowCastDisabledElevationThreshold"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowCastRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{disposeMaybe as s}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{g as a,c as o}from\"../../../../chunks/vec4.js\";import{f as n}from\"../../../../chunks/vec4f64.js\";import{createQuadVAO as h}from\"./glUtil3D.js\";import{ShadowCastVisualizeTechnique as u}from\"../shaders/ShadowCastVisualizeTechnique.js\";import{ShadowCastVisualizeTechniqueConfiguration as _,ShadowCastVisualization as l}from\"../shaders/ShadowCastVisualizeTechniqueConfiguration.js\";import{vertexCount as d}from\"../../../webgl/Util.js\";const c=n(.01,0,.25,1),p=4e4,m=5e4,b=1/512;let q=class extends t{constructor(e,t,s,i){super({}),this._techniqueRepository=e,this._rctx=t,this._shadowAccumulator=s,this._requestRender=i,this._passParameters={shadowCastMap:this._shadowCastTexture,sampleScale:0,color:c,threshold:.5,bandSize:.1,opacityFromElevation:1,__tagStrict:\"NoParameters\"},this._techniqueConfig=new _,this._enabled=!1,this._vao=h(t),this._techniqueConfig.visualization=l.Gradient}normalizeCtorArgs(){return{}}dispose(){this._stop(),this._vao=s(this._vao),this._techniqueRepository.release(this._technique),this._technique=null,this._shadowAccumulator=null}get visualizeShadowCastTechnique(){return this._technique=this._techniqueRepository.releaseAndAcquire(u,this._techniqueConfig,this._technique),this._technique}render(e){if(!this._isRenderingVisualization)return;this._passParameters.sampleScale=1/this._computedSamples;const t=this.visualizeShadowCastTechnique;this._rctx.bindVAO(this._vao),this._rctx.bindTechnique(t,this._passParameters,e),this._rctx.drawArrays(t.primitiveType,0,d(this._vao,\"geometry\"))}setOptions(e){void 0!==e.enabled&&this._setEnabled(e.enabled),void 0!==e.color&&this._setColor(e.color),void 0!==e.threshold&&(this._threshold=e.threshold),void 0!==e.visualization&&(this._visualization=e.visualization),void 0!==e.bandSize&&(this._bandSize=e.bandSize),void 0!==e.bandsEnabled&&(this._bandsEnabled=e.bandsEnabled)}get opacityFromElevation(){return this._passParameters.opacityFromElevation}set opacityFromElevation(e){this._passParameters.opacityFromElevation!==e&&(this._passParameters.opacityFromElevation=e,this.notifyChange(\"opacityFromElevation\"))}get _isRenderingVisualization(){return this._enabled&&this._computedSamples>0&&this.opacityFromElevation>b}get _computedSamples(){return this._shadowAccumulator.computedSamples}get _shadowCastTexture(){return this._shadowAccumulator.shadowCastTexture}get _threshold(){return this._passParameters.threshold}set _threshold(e){this._threshold!==e&&(this._passParameters.threshold=e,this._requestRenderIfRunning())}get _visualization(){return this._techniqueConfig.visualization}set _visualization(e){e!==this._visualization&&(this._techniqueConfig.visualization=e,this._techniqueRepository.release(this._technique),this._technique=null,this._requestRenderIfRunning())}get _bandSize(){return this._passParameters.bandSize}set _bandSize(e){e!==this._bandSize&&(this._passParameters.bandSize=e,this._requestRenderIfRunning())}get _bandsEnabled(){return this._techniqueConfig.bandsEnabled}set _bandsEnabled(e){e!==this._bandsEnabled&&(this._techniqueConfig.bandsEnabled=e,this._techniqueRepository.release(this._technique),this._technique=null,this._requestRenderIfRunning())}_setColor(e){const t=this._passParameters.color;a(e,t)||(o(this._passParameters.color,e),this._requestRenderIfRunning())}_setEnabled(e){e!==this._enabled&&(e?this._start():this._stop())}_requestRenderIfRunning(){this._enabled&&this._requestRender()}_start(){this._enabled=!0,this._requestRender()}_stop(){this._enabled=!1,this._requestRender()}};e([i()],q.prototype,\"opacityFromElevation\",null),q=e([r(\"esri.views.3d.webgl-engine.lib.ShadowCastRenderer\")],q);export{q as ShadowCastRenderer,m as shadowCastDisableElevationMax,p as shadowCastDisableElevationMin,b as shadowCastDisabledElevationThreshold};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}