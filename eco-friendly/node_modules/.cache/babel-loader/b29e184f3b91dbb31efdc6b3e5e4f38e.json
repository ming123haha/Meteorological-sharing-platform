{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/Logger.js\";\nimport { analyzeCIMResource as t } from \"../../../../../../symbols/cim/cimAnalyzer.js\";\nimport { evaluateValueOrFunction as a } from \"../../../../../../symbols/cim/utils.js\";\nimport s from \"./WGLMeshTemplate.js\";\nconst i = e.getLogger(\"esri.views.2d.engine.webgl.WGLDynamicMeshTemplate\");\n\nclass r extends s {\n  constructor(e) {\n    super(), this._ongoingMaterialRequestMap = new Map(), this._materialCache = new Map(), this._dynamicPropertyMap = new Map(), this._cimLayer = e;\n  }\n\n  analyze(e, s, r, n, o) {\n    if (o && 0 === o.length) return null;\n    const l = o && o.length > 0,\n          m = s.readLegacyFeature(),\n          c = s.getObjectId(),\n          h = this._materialCache,\n          u = this._cimLayer.materialHash;\n    if (!u) return i.error(\"A Dynamic mesh template must have a material hash value or function!\"), Promise.reject(null);\n    const p = \"function\" == typeof u ? u(m, r, n, c) : u;\n\n    if (h.has(p)) {\n      const e = h.get(p);\n      return Promise.resolve(e);\n    }\n\n    const g = this._ongoingMaterialRequestMap.get(p);\n\n    if (g) return g;\n    const y = this._cimLayer,\n          M = t(y.cim, this._cimLayer.materialOverrides);\n    M.mosaicHash = p;\n    const {\n      type: d,\n      url: f\n    } = y,\n          _ = {\n      cim: M,\n      type: d,\n      mosaicHash: p,\n      url: f,\n      size: null,\n      dashTemplate: null,\n      text: null,\n      fontName: null,\n      objectId: c,\n      animatedSymbolProperties: null\n    };\n\n    switch (d) {\n      case \"marker\":\n        _.size = a(y.size, m, r, n), _.animatedSymbolProperties = a(y.animatedSymbolProperties, m, r, n);\n        break;\n\n      case \"line\":\n        _.dashTemplate = y.dashTemplate;\n        break;\n\n      case \"text\":\n        _.text = a(y.text, m, r, n), _.fontName = a(y.fontName, m, r, n);\n    }\n\n    const b = e.getMosaicItem(_, o).then(e => (l || (this._ongoingMaterialRequestMap.delete(p), h.set(p, e)), e)).catch(e => (this._ongoingMaterialRequestMap.delete(p), i.error(\".analyze()\", e.message), null));\n    return l || this._ongoingMaterialRequestMap.set(p, b), b;\n  }\n\n}\n\nexport { r as default };","map":{"version":3,"names":["e","analyzeCIMResource","t","evaluateValueOrFunction","a","s","i","getLogger","r","constructor","_ongoingMaterialRequestMap","Map","_materialCache","_dynamicPropertyMap","_cimLayer","analyze","n","o","length","l","m","readLegacyFeature","c","getObjectId","h","u","materialHash","error","Promise","reject","p","has","get","resolve","g","y","M","cim","materialOverrides","mosaicHash","type","d","url","f","_","size","dashTemplate","text","fontName","objectId","animatedSymbolProperties","b","getMosaicItem","then","delete","set","catch","message","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Logger.js\";import{analyzeCIMResource as t}from\"../../../../../../symbols/cim/cimAnalyzer.js\";import{evaluateValueOrFunction as a}from\"../../../../../../symbols/cim/utils.js\";import s from\"./WGLMeshTemplate.js\";const i=e.getLogger(\"esri.views.2d.engine.webgl.WGLDynamicMeshTemplate\");class r extends s{constructor(e){super(),this._ongoingMaterialRequestMap=new Map,this._materialCache=new Map,this._dynamicPropertyMap=new Map,this._cimLayer=e}analyze(e,s,r,n,o){if(o&&0===o.length)return null;const l=o&&o.length>0,m=s.readLegacyFeature(),c=s.getObjectId(),h=this._materialCache,u=this._cimLayer.materialHash;if(!u)return i.error(\"A Dynamic mesh template must have a material hash value or function!\"),Promise.reject(null);const p=\"function\"==typeof u?u(m,r,n,c):u;if(h.has(p)){const e=h.get(p);return Promise.resolve(e)}const g=this._ongoingMaterialRequestMap.get(p);if(g)return g;const y=this._cimLayer,M=t(y.cim,this._cimLayer.materialOverrides);M.mosaicHash=p;const{type:d,url:f}=y,_={cim:M,type:d,mosaicHash:p,url:f,size:null,dashTemplate:null,text:null,fontName:null,objectId:c,animatedSymbolProperties:null};switch(d){case\"marker\":_.size=a(y.size,m,r,n),_.animatedSymbolProperties=a(y.animatedSymbolProperties,m,r,n);break;case\"line\":_.dashTemplate=y.dashTemplate;break;case\"text\":_.text=a(y.text,m,r,n),_.fontName=a(y.fontName,m,r,n)}const b=e.getMosaicItem(_,o).then((e=>(l||(this._ongoingMaterialRequestMap.delete(p),h.set(p,e)),e))).catch((e=>(this._ongoingMaterialRequestMap.delete(p),i.error(\".analyze()\",e.message),null)));return l||this._ongoingMaterialRequestMap.set(p,b),b}}export{r as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}