{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"./chunks/tslib.es6.js\";\nimport { ClonableMixin as e } from \"./core/Clonable.js\";\nimport o from \"./core/Collection.js\";\nimport { JSONSupport as s } from \"./core/JSONSupport.js\";\nimport { clone as r } from \"./core/lang.js\";\nimport i from \"./core/Logger.js\";\nimport { isPromiseLike as n } from \"./core/promiseUtils.js\";\nimport { property as p } from \"./core/accessorSupport/decorators/property.js\";\nimport { cast as l } from \"./core/accessorSupport/decorators/cast.js\";\nimport { reader as a } from \"./core/accessorSupport/decorators/reader.js\";\nimport { subclass as d } from \"./core/accessorSupport/decorators/subclass.js\";\nimport { writer as c } from \"./core/accessorSupport/decorators/writer.js\";\nimport { ensureOneOfType as f } from \"./core/accessorSupport/ensureType.js\";\nimport { collectFields as m, collectArcadeFieldNames as u } from \"./layers/support/fieldUtils.js\";\nimport { persistableTypes as h } from \"./popup/content.js\";\nimport y from \"./popup/ExpressionInfo.js\";\nimport I from \"./popup/FieldInfo.js\";\nimport F from \"./popup/LayerOptions.js\";\nimport _ from \"./popup/RelatedRecordsInfo.js\";\nimport { types as x } from \"./popup/content/support/mediaInfoTypes.js\";\nimport g from \"./support/actions/ActionBase.js\";\nimport w from \"./support/actions/ActionButton.js\";\nimport A from \"./support/actions/ActionToggle.js\";\nimport C from \"./popup/content/MediaContent.js\";\nimport N from \"./popup/content/TextContent.js\";\nimport j from \"./popup/content/AttachmentsContent.js\";\nimport E from \"./popup/content/FieldsContent.js\";\nimport O from \"./popup/content/ExpressionContent.js\";\nimport R from \"./popup/content/RelationshipContent.js\";\nimport S from \"./popup/content/Content.js\";\nimport v from \"./popup/content/CustomContent.js\";\nconst T = \"esri.PopupTemplate\",\n      b = i.getLogger(T),\n      J = \"relationships/\",\n      L = \"expression/\",\n      B = o.ofType({\n  key: \"type\",\n  defaultKeyValue: \"button\",\n  base: g,\n  typeMap: {\n    button: w,\n    toggle: A\n  }\n}),\n      M = {\n  base: S,\n  key: \"type\",\n  typeMap: {\n    media: C,\n    custom: v,\n    text: N,\n    attachments: j,\n    fields: E,\n    expression: O,\n    relationship: R\n  }\n},\n      P = [\"attachments\", \"fields\", \"media\", \"text\", \"expression\", \"relationship\"];\nlet $ = class extends e(s) {\n  constructor() {\n    super(...arguments), this.actions = null, this.content = \"\", this.expressionInfos = null, this.fieldInfos = null, this.layerOptions = null, this.lastEditInfoEnabled = !0, this.outFields = null, this.overwriteActions = !1, this.returnGeometry = !1, this.title = \"\";\n  }\n\n  castContent(t) {\n    return Array.isArray(t) ? t.map(t => f(M, t)) : \"string\" == typeof t || \"function\" == typeof t || t instanceof HTMLElement || n(t) ? t : (b.error(\"content error\", \"unsupported content value\", {\n      value: t\n    }), null);\n  }\n\n  readContent(t, e) {\n    const {\n      popupElements: o\n    } = e;\n    return Array.isArray(o) && o.length > 0 ? this._readPopupInfoElements(e.description, e.mediaInfos, o) : this._readPopupInfo(e);\n  }\n\n  writeContent(t, e, o, s) {\n    \"string\" != typeof t ? Array.isArray(t) && (e.popupElements = t.filter(t => P.includes(t.type)).map(t => t && t.toJSON(s)), e.popupElements.forEach(t => {\n      \"attachments\" === t.type ? this._writeAttachmentContent(e) : \"media\" === t.type ? this._writeMediaContent(t, e) : \"text\" === t.type ? this._writeTextContent(t, e) : \"relationship\" === t.type && this._writeRelationshipContent(t, e);\n    })) : e.description = t;\n  }\n\n  writeFieldInfos(t, e, o, s) {\n    const {\n      content: r\n    } = this,\n          i = Array.isArray(r) ? r : null;\n\n    if (t) {\n      const o = i ? i.filter(t => \"fields\" === t.type) : [],\n            r = o.length && o.every(t => t.fieldInfos?.length);\n      e.fieldInfos = t.filter(Boolean).map(t => {\n        const e = t.toJSON(s);\n        return r && (e.visible = !1), e;\n      });\n    }\n\n    if (i) for (const n of i) \"fields\" === n.type && this._writeFieldsContent(n, e);\n  }\n\n  writeLayerOptions(t, e, o, s) {\n    e[o] = !t || null === t.showNoDataRecords && null === t.returnTopmostRaster ? null : t.toJSON(s);\n  }\n\n  writeTitle(t, e) {\n    e.title = t || \"\";\n  }\n\n  async collectRequiredFields(t, e) {\n    const o = this.expressionInfos || [];\n    await this._collectExpressionInfoFields(t, e, [...o, ...this._getContentExpressionInfos(this.content, o)]), m(t, e, [...(this.outFields || []), ...this._getActionsFields(this.actions), ...this._getTitleFields(this.title), ...this._getContentFields(this.content)]);\n  }\n\n  async getRequiredFields(t) {\n    const e = new Set();\n    return await this.collectRequiredFields(e, t), [...e].sort();\n  }\n\n  _writeFieldsContent(t, e) {\n    if (!Array.isArray(t.fieldInfos) || !t.fieldInfos.length) return;\n    const o = r(t.fieldInfos);\n    Array.isArray(e.fieldInfos) ? o.forEach(t => {\n      const o = e.fieldInfos.find(e => e.fieldName.toLowerCase() === t.fieldName.toLowerCase());\n      o ? o.visible = !0 : e.fieldInfos.push(t);\n    }) : e.fieldInfos = o;\n  }\n\n  _writeAttachmentContent(t) {\n    t.showAttachments || (t.showAttachments = !0);\n  }\n\n  _writeRelationshipContent(t, e) {\n    const o = t.orderByFields?.map(e => this._toFieldOrderJSON(e, t.relationshipId)) || [],\n          s = [...(e.relatedRecordsInfo?.orderByFields || []), ...o];\n    e.relatedRecordsInfo = {\n      showRelatedRecords: !0,\n      ...(s?.length && {\n        orderByFields: s\n      })\n    };\n  }\n\n  _writeTextContent(t, e) {\n    !e.description && t.text && (e.description = t.text);\n  }\n\n  _writeMediaContent(t, e) {\n    if (!Array.isArray(t.mediaInfos) || !t.mediaInfos.length) return;\n    const o = r(t.mediaInfos);\n    Array.isArray(e.mediaInfos) ? e.mediaInfos = [...e.mediaInfos, ...o] : e.mediaInfos = o;\n  }\n\n  _readPopupInfoElements(t, e, o) {\n    const s = {\n      description: !1,\n      mediaInfos: !1\n    };\n    return o.map(o => \"media\" === o.type ? (o.mediaInfos || !e || s.mediaInfos || (o.mediaInfos = e, s.mediaInfos = !0), C.fromJSON(o)) : \"text\" === o.type ? (o.text || !t || s.description || (o.text = t, s.description = !0), N.fromJSON(o)) : \"attachments\" === o.type ? j.fromJSON(o) : \"fields\" === o.type ? E.fromJSON(o) : \"expression\" === o.type ? O.fromJSON(o) : \"relationship\" === o.type ? R.fromJSON(o) : void 0).filter(Boolean);\n  }\n\n  _toRelationshipContent(t) {\n    const {\n      field: e,\n      order: o\n    } = t;\n    if (!e?.startsWith(J)) return null;\n    const s = e.replace(J, \"\").split(\"/\");\n    if (2 !== s.length) return null;\n    const r = parseInt(s[0], 10),\n          i = s[1];\n    return \"number\" == typeof r && i ? R.fromJSON({\n      relationshipId: r,\n      orderByFields: [{\n        field: i,\n        order: o\n      }]\n    }) : null;\n  }\n\n  _toFieldOrderJSON(t, e) {\n    const {\n      order: o,\n      field: s\n    } = t;\n    return {\n      field: `${J}${e}/${s}`,\n      order: o\n    };\n  }\n\n  _readPopupInfo({\n    description: t,\n    mediaInfos: e,\n    showAttachments: o,\n    relatedRecordsInfo: s = {\n      showRelatedRecords: !1\n    }\n  }) {\n    const r = [];\n    t ? r.push(new N({\n      text: t\n    })) : r.push(new E()), Array.isArray(e) && e.length && r.push(C.fromJSON({\n      mediaInfos: e\n    })), o && r.push(j.fromJSON({\n      displayType: \"auto\"\n    }));\n    const {\n      showRelatedRecords: i,\n      orderByFields: n\n    } = s;\n    return i && n?.length && n.forEach(t => {\n      const e = this._toRelationshipContent(t);\n\n      e && r.push(e);\n    }), r.length ? r : t;\n  }\n\n  _getContentElementFields(t) {\n    const e = t?.type;\n    if (\"attachments\" === e) return [...this._extractFieldNames(t.title), ...this._extractFieldNames(t.description)];\n    if (\"custom\" === e) return t.outFields || [];\n    if (\"fields\" === e) return [...this._extractFieldNames(t.title), ...this._extractFieldNames(t.description), ...this._getFieldInfoFields(t.fieldInfos ?? this.fieldInfos)];\n\n    if (\"media\" === e) {\n      const e = t.mediaInfos || [];\n      return [...this._extractFieldNames(t.title), ...this._extractFieldNames(t.description), ...e.reduce((t, e) => [...t, ...this._getMediaInfoFields(e)], [])];\n    }\n\n    return \"text\" === e ? this._extractFieldNames(t.text) : [];\n  }\n\n  _getMediaInfoFields(t) {\n    const {\n      caption: e,\n      title: o,\n      value: s\n    } = t,\n          r = s || {},\n          {\n      fields: i,\n      normalizeField: n,\n      tooltipField: p,\n      sourceURL: l,\n      linkURL: a\n    } = r,\n          d = [...this._extractFieldNames(o), ...this._extractFieldNames(e), ...this._extractFieldNames(l), ...this._extractFieldNames(a), ...(i ?? [])];\n    return n && d.push(n), p && d.push(p), d;\n  }\n\n  _getContentExpressionInfos(t, e) {\n    return Array.isArray(t) ? t.reduce((t, e) => [...t, ...(\"expression\" === e.type && e.expressionInfo ? [e.expressionInfo] : [])], e) : [];\n  }\n\n  _getContentFields(t) {\n    return \"string\" == typeof t ? this._extractFieldNames(t) : Array.isArray(t) ? t.reduce((t, e) => [...t, ...this._getContentElementFields(e)], []) : [];\n  }\n\n  async _collectExpressionInfoFields(t, e, o) {\n    o && (await Promise.all(o.map(o => u(t, e, o.expression))));\n  }\n\n  _getFieldInfoFields(t) {\n    return t ? t.filter(t => void 0 === t.visible || !!t.visible).map(t => t.fieldName).filter(t => !t.startsWith(J) && !t.startsWith(L)) : [];\n  }\n\n  _getActionsFields(t) {\n    return t ? t.toArray().reduce((t, e) => [...t, ...this._getActionFields(e)], []) : [];\n  }\n\n  _getActionFields(t) {\n    const {\n      className: e,\n      title: o,\n      type: s\n    } = t,\n          r = \"button\" === s || \"toggle\" === s ? t.image : \"\";\n    return [...this._extractFieldNames(o), ...this._extractFieldNames(e), ...this._extractFieldNames(r)];\n  }\n\n  _getTitleFields(t) {\n    return \"string\" == typeof t ? this._extractFieldNames(t) : [];\n  }\n\n  _extractFieldNames(t) {\n    if (!t || \"string\" != typeof t) return [];\n    const e = /{[^}]*}/g,\n          o = t.match(e);\n    if (!o) return [];\n    const s = /\\{(\\w+):.+\\}/,\n          r = o.filter(t => !(0 === t.indexOf(`{${J}`) || 0 === t.indexOf(`{${L}`))).map(t => t.replace(s, \"{$1}\"));\n    return r ? r.map(t => t.slice(1, -1)) : [];\n  }\n\n};\nt([p({\n  type: B\n})], $.prototype, \"actions\", void 0), t([p()], $.prototype, \"content\", void 0), t([l(\"content\")], $.prototype, \"castContent\", null), t([a(\"content\", [\"description\", \"fieldInfos\", \"popupElements\", \"mediaInfos\", \"showAttachments\", \"relatedRecordsInfo\"])], $.prototype, \"readContent\", null), t([c(\"content\", {\n  popupElements: {\n    type: o.ofType(h)\n  },\n  showAttachments: {\n    type: Boolean\n  },\n  mediaInfos: {\n    type: o.ofType(x)\n  },\n  description: {\n    type: String\n  },\n  relatedRecordsInfo: {\n    type: _\n  }\n})], $.prototype, \"writeContent\", null), t([p({\n  type: [y],\n  json: {\n    write: !0\n  }\n})], $.prototype, \"expressionInfos\", void 0), t([p({\n  type: [I]\n})], $.prototype, \"fieldInfos\", void 0), t([c(\"fieldInfos\")], $.prototype, \"writeFieldInfos\", null), t([p({\n  type: F\n})], $.prototype, \"layerOptions\", void 0), t([c(\"layerOptions\")], $.prototype, \"writeLayerOptions\", null), t([p({\n  type: Boolean,\n  json: {\n    read: {\n      source: \"showLastEditInfo\"\n    },\n    write: {\n      target: \"showLastEditInfo\"\n    },\n    default: !0\n  }\n})], $.prototype, \"lastEditInfoEnabled\", void 0), t([p()], $.prototype, \"outFields\", void 0), t([p()], $.prototype, \"overwriteActions\", void 0), t([p()], $.prototype, \"returnGeometry\", void 0), t([p({\n  json: {\n    type: String\n  }\n})], $.prototype, \"title\", void 0), t([c(\"title\")], $.prototype, \"writeTitle\", null), $ = t([d(\"esri.PopupTemplate\")], $);\nconst k = $;\nexport { k as default };","map":{"version":3,"names":["_","t","ClonableMixin","e","o","JSONSupport","s","clone","r","i","isPromiseLike","n","property","p","cast","l","reader","a","subclass","d","writer","c","ensureOneOfType","f","collectFields","m","collectArcadeFieldNames","u","persistableTypes","h","y","I","F","types","x","g","w","A","C","N","j","E","O","R","S","v","T","b","getLogger","J","L","B","ofType","key","defaultKeyValue","base","typeMap","button","toggle","M","media","custom","text","attachments","fields","expression","relationship","P","$","constructor","arguments","actions","content","expressionInfos","fieldInfos","layerOptions","lastEditInfoEnabled","outFields","overwriteActions","returnGeometry","title","castContent","Array","isArray","map","HTMLElement","error","value","readContent","popupElements","length","_readPopupInfoElements","description","mediaInfos","_readPopupInfo","writeContent","filter","includes","type","toJSON","forEach","_writeAttachmentContent","_writeMediaContent","_writeTextContent","_writeRelationshipContent","writeFieldInfos","every","Boolean","visible","_writeFieldsContent","writeLayerOptions","showNoDataRecords","returnTopmostRaster","writeTitle","collectRequiredFields","_collectExpressionInfoFields","_getContentExpressionInfos","_getActionsFields","_getTitleFields","_getContentFields","getRequiredFields","Set","sort","find","fieldName","toLowerCase","push","showAttachments","orderByFields","_toFieldOrderJSON","relationshipId","relatedRecordsInfo","showRelatedRecords","fromJSON","_toRelationshipContent","field","order","startsWith","replace","split","parseInt","displayType","_getContentElementFields","_extractFieldNames","_getFieldInfoFields","reduce","_getMediaInfoFields","caption","normalizeField","tooltipField","sourceURL","linkURL","expressionInfo","Promise","all","toArray","_getActionFields","className","image","match","indexOf","slice","prototype","String","json","write","read","source","target","default","k"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/PopupTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"./chunks/tslib.es6.js\";import{ClonableMixin as e}from\"./core/Clonable.js\";import o from\"./core/Collection.js\";import{JSONSupport as s}from\"./core/JSONSupport.js\";import{clone as r}from\"./core/lang.js\";import i from\"./core/Logger.js\";import{isPromiseLike as n}from\"./core/promiseUtils.js\";import{property as p}from\"./core/accessorSupport/decorators/property.js\";import{cast as l}from\"./core/accessorSupport/decorators/cast.js\";import{reader as a}from\"./core/accessorSupport/decorators/reader.js\";import{subclass as d}from\"./core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"./core/accessorSupport/decorators/writer.js\";import{ensureOneOfType as f}from\"./core/accessorSupport/ensureType.js\";import{collectFields as m,collectArcadeFieldNames as u}from\"./layers/support/fieldUtils.js\";import{persistableTypes as h}from\"./popup/content.js\";import y from\"./popup/ExpressionInfo.js\";import I from\"./popup/FieldInfo.js\";import F from\"./popup/LayerOptions.js\";import _ from\"./popup/RelatedRecordsInfo.js\";import{types as x}from\"./popup/content/support/mediaInfoTypes.js\";import g from\"./support/actions/ActionBase.js\";import w from\"./support/actions/ActionButton.js\";import A from\"./support/actions/ActionToggle.js\";import C from\"./popup/content/MediaContent.js\";import N from\"./popup/content/TextContent.js\";import j from\"./popup/content/AttachmentsContent.js\";import E from\"./popup/content/FieldsContent.js\";import O from\"./popup/content/ExpressionContent.js\";import R from\"./popup/content/RelationshipContent.js\";import S from\"./popup/content/Content.js\";import v from\"./popup/content/CustomContent.js\";const T=\"esri.PopupTemplate\",b=i.getLogger(T),J=\"relationships/\",L=\"expression/\",B=o.ofType({key:\"type\",defaultKeyValue:\"button\",base:g,typeMap:{button:w,toggle:A}}),M={base:S,key:\"type\",typeMap:{media:C,custom:v,text:N,attachments:j,fields:E,expression:O,relationship:R}},P=[\"attachments\",\"fields\",\"media\",\"text\",\"expression\",\"relationship\"];let $=class extends(e(s)){constructor(){super(...arguments),this.actions=null,this.content=\"\",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=\"\"}castContent(t){return Array.isArray(t)?t.map((t=>f(M,t))):\"string\"==typeof t||\"function\"==typeof t||t instanceof HTMLElement||n(t)?t:(b.error(\"content error\",\"unsupported content value\",{value:t}),null)}readContent(t,e){const{popupElements:o}=e;return Array.isArray(o)&&o.length>0?this._readPopupInfoElements(e.description,e.mediaInfos,o):this._readPopupInfo(e)}writeContent(t,e,o,s){\"string\"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter((t=>P.includes(t.type))).map((t=>t&&t.toJSON(s))),e.popupElements.forEach((t=>{\"attachments\"===t.type?this._writeAttachmentContent(e):\"media\"===t.type?this._writeMediaContent(t,e):\"text\"===t.type?this._writeTextContent(t,e):\"relationship\"===t.type&&this._writeRelationshipContent(t,e)}))):e.description=t}writeFieldInfos(t,e,o,s){const{content:r}=this,i=Array.isArray(r)?r:null;if(t){const o=i?i.filter((t=>\"fields\"===t.type)):[],r=o.length&&o.every((t=>t.fieldInfos?.length));e.fieldInfos=t.filter(Boolean).map((t=>{const e=t.toJSON(s);return r&&(e.visible=!1),e}))}if(i)for(const n of i)\"fields\"===n.type&&this._writeFieldsContent(n,e)}writeLayerOptions(t,e,o,s){e[o]=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON(s)}writeTitle(t,e){e.title=t||\"\"}async collectRequiredFields(t,e){const o=this.expressionInfos||[];await this._collectExpressionInfoFields(t,e,[...o,...this._getContentExpressionInfos(this.content,o)]),m(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),[...e].sort()}_writeFieldsContent(t,e){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const o=r(t.fieldInfos);Array.isArray(e.fieldInfos)?o.forEach((t=>{const o=e.fieldInfos.find((e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase()));o?o.visible=!0:e.fieldInfos.push(t)})):e.fieldInfos=o}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,e){const o=t.orderByFields?.map((e=>this._toFieldOrderJSON(e,t.relationshipId)))||[],s=[...e.relatedRecordsInfo?.orderByFields||[],...o];e.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text)}_writeMediaContent(t,e){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const o=r(t.mediaInfos);Array.isArray(e.mediaInfos)?e.mediaInfos=[...e.mediaInfos,...o]:e.mediaInfos=o}_readPopupInfoElements(t,e,o){const s={description:!1,mediaInfos:!1};return o.map((o=>\"media\"===o.type?(o.mediaInfos||!e||s.mediaInfos||(o.mediaInfos=e,s.mediaInfos=!0),C.fromJSON(o)):\"text\"===o.type?(o.text||!t||s.description||(o.text=t,s.description=!0),N.fromJSON(o)):\"attachments\"===o.type?j.fromJSON(o):\"fields\"===o.type?E.fromJSON(o):\"expression\"===o.type?O.fromJSON(o):\"relationship\"===o.type?R.fromJSON(o):void 0)).filter(Boolean)}_toRelationshipContent(t){const{field:e,order:o}=t;if(!e?.startsWith(J))return null;const s=e.replace(J,\"\").split(\"/\");if(2!==s.length)return null;const r=parseInt(s[0],10),i=s[1];return\"number\"==typeof r&&i?R.fromJSON({relationshipId:r,orderByFields:[{field:i,order:o}]}):null}_toFieldOrderJSON(t,e){const{order:o,field:s}=t;return{field:`${J}${e}/${s}`,order:o}}_readPopupInfo({description:t,mediaInfos:e,showAttachments:o,relatedRecordsInfo:s={showRelatedRecords:!1}}){const r=[];t?r.push(new N({text:t})):r.push(new E),Array.isArray(e)&&e.length&&r.push(C.fromJSON({mediaInfos:e})),o&&r.push(j.fromJSON({displayType:\"auto\"}));const{showRelatedRecords:i,orderByFields:n}=s;return i&&n?.length&&n.forEach((t=>{const e=this._toRelationshipContent(t);e&&r.push(e)})),r.length?r:t}_getContentElementFields(t){const e=t?.type;if(\"attachments\"===e)return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(\"custom\"===e)return t.outFields||[];if(\"fields\"===e)return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(\"media\"===e){const e=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...e.reduce(((t,e)=>[...t,...this._getMediaInfoFields(e)]),[])]}return\"text\"===e?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:e,title:o,value:s}=t,r=s||{},{fields:i,normalizeField:n,tooltipField:p,sourceURL:l,linkURL:a}=r,d=[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(l),...this._extractFieldNames(a),...i??[]];return n&&d.push(n),p&&d.push(p),d}_getContentExpressionInfos(t,e){return Array.isArray(t)?t.reduce(((t,e)=>[...t,...\"expression\"===e.type&&e.expressionInfo?[e.expressionInfo]:[]]),e):[]}_getContentFields(t){return\"string\"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((t,e)=>[...t,...this._getContentElementFields(e)]),[]):[]}async _collectExpressionInfoFields(t,e,o){o&&await Promise.all(o.map((o=>u(t,e,o.expression))))}_getFieldInfoFields(t){return t?t.filter((t=>void 0===t.visible||!!t.visible)).map((t=>t.fieldName)).filter((t=>!t.startsWith(J)&&!t.startsWith(L))):[]}_getActionsFields(t){return t?t.toArray().reduce(((t,e)=>[...t,...this._getActionFields(e)]),[]):[]}_getActionFields(t){const{className:e,title:o,type:s}=t,r=\"button\"===s||\"toggle\"===s?t.image:\"\";return[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(r)]}_getTitleFields(t){return\"string\"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||\"string\"!=typeof t)return[];const e=/{[^}]*}/g,o=t.match(e);if(!o)return[];const s=/\\{(\\w+):.+\\}/,r=o.filter((t=>!(0===t.indexOf(`{${J}`)||0===t.indexOf(`{${L}`)))).map((t=>t.replace(s,\"{$1}\")));return r?r.map((t=>t.slice(1,-1))):[]}};t([p({type:B})],$.prototype,\"actions\",void 0),t([p()],$.prototype,\"content\",void 0),t([l(\"content\")],$.prototype,\"castContent\",null),t([a(\"content\",[\"description\",\"fieldInfos\",\"popupElements\",\"mediaInfos\",\"showAttachments\",\"relatedRecordsInfo\"])],$.prototype,\"readContent\",null),t([c(\"content\",{popupElements:{type:o.ofType(h)},showAttachments:{type:Boolean},mediaInfos:{type:o.ofType(x)},description:{type:String},relatedRecordsInfo:{type:_}})],$.prototype,\"writeContent\",null),t([p({type:[y],json:{write:!0}})],$.prototype,\"expressionInfos\",void 0),t([p({type:[I]})],$.prototype,\"fieldInfos\",void 0),t([c(\"fieldInfos\")],$.prototype,\"writeFieldInfos\",null),t([p({type:F})],$.prototype,\"layerOptions\",void 0),t([c(\"layerOptions\")],$.prototype,\"writeLayerOptions\",null),t([p({type:Boolean,json:{read:{source:\"showLastEditInfo\"},write:{target:\"showLastEditInfo\"},default:!0}})],$.prototype,\"lastEditInfoEnabled\",void 0),t([p()],$.prototype,\"outFields\",void 0),t([p()],$.prototype,\"overwriteActions\",void 0),t([p()],$.prototype,\"returnGeometry\",void 0),t([p({json:{type:String}})],$.prototype,\"title\",void 0),t([c(\"title\")],$.prototype,\"writeTitle\",null),$=t([d(\"esri.PopupTemplate\")],$);const k=$;export{k as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}