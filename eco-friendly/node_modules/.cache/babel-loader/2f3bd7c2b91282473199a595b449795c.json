{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../../core/HandleOwner.js\";\nimport has from \"../../../../../core/has.js\";\nimport { isNone as r, applySome as s, isSome as i, filterNones as a } from \"../../../../../core/maybe.js\";\nimport { ignoreAbortErrors as o, after as n, throwIfAborted as u, throwIfNotAbortError as g, isAbortError as h } from \"../../../../../core/promiseUtils.js\";\nimport { when as d, whenOnce as c } from \"../../../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as p } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { convertToGeometry as y } from \"../../../../../layers/graphics/featureConversionUtils.js\";\nimport { QueryEngine as f } from \"../../../../../layers/graphics/data/QueryEngine.js\";\nimport m from \"../../../../../layers/support/FieldsIndex.js\";\nimport { FeatureStore2D as S } from \"../FeatureStore2D.js\";\nimport { createSource as _ } from \"../sources/createSource.js\";\nimport v from \"../support/AttributeStore.js\";\nimport { BinStore as b } from \"../support/BinStore.js\";\nimport { ClusterStore as I } from \"../support/ClusterStore.js\";\nimport { ComputedAttributeStorage as Q } from \"../support/ComputedAttributeStorage.js\";\nimport { FeatureSetReaderJSON as w } from \"../support/FeatureSetReaderJSON.js\";\nimport { UpdateToken as E } from \"../support/UpdateToken.js\";\nimport { QueueProcessor as C } from \"../../../../support/QueueProcessor.js\";\nconst F = 5e3,\n      j = \"tileRenderer.featuresView.attributeView.initialize\",\n      T = \"tileRenderer.featuresView.attributeView.requestUpdate\",\n      k = \"tileRenderer.featuresView.requestRender\";\n\nfunction x(e) {\n  return \"worker:port-closed\" === e.name;\n}\n\nfunction R(e) {\n  if (!h(e) && !x(e)) throw e;\n}\n\nfunction A(e) {\n  return \"feature\" === e.type && \"snapshot\" === e.mode;\n}\n\nlet U = class extends t {\n  constructor() {\n    super(...arguments), this._storage = new Q(), this._markedIdsBufId = this._storage.createBitset(), this._lastCleanup = performance.now(), this._cleanupNeeded = !1, this._invalidated = !1, this._tileToResolver = new Map(), this._didEdit = !1, this._updateVersion = 1, this.tileStore = null, this.config = null, this.processor = null, this.remoteClient = null, this.service = null;\n  }\n\n  initialize() {\n    this._initStores(), this._initSource(), this._updateQueue = new C({\n      concurrency: \"geoevent\" === this._source.type ? 1 : 4,\n      process: (e, t) => this._onTileMessage(e, {\n        signal: t\n      })\n    }), this.handles.add([this.tileStore.on(\"update\", this.onTileUpdate.bind(this)), d(() => !this.updating, () => this.onIdle())]), this._checkUpdating = setInterval(() => this.notifyChange(\"updating\"), 300);\n  }\n\n  _initSource() {\n    const e = this.tileStore.tileScheme,\n          t = () => this._updateQueue.length < 50,\n          r = (e, t) => (this._invalidated = !0, this._patchTile(e, t));\n\n    this._source = _(this.service, this.spatialReference, e, r, t, this.featureStore), this._proxyEvents();\n  }\n\n  _proxyEvents() {\n    if (\"geoevent\" === this._source.type) {\n      const e = this._source.events;\n      this.handles.add([e.on(\"connectionStatus\", e => this.remoteClient.invoke(\"setProperty\", {\n        propertyName: \"connectionStatus\",\n        value: e\n      }).catch(R)), e.on(\"errorString\", e => this.remoteClient.invoke(\"setProperty\", {\n        propertyName: \"errorString\",\n        value: e\n      }).catch(R)), e.on(\"data-received\", e => this.remoteClient.invoke(\"emitEvent\", {\n        name: \"data-received\",\n        event: {\n          attributes: e.attributes,\n          centroid: e.centroid,\n          geometry: e.geometry\n        }\n      }).catch(R)), e.on(\"updateRate\", e => this.remoteClient.invoke(\"emitEvent\", {\n        name: \"update-rate\",\n        event: { ...e\n        }\n      }).catch(R))]);\n    }\n  }\n\n  _initAttributeStore(e) {\n    this.attributeStore || (this.attributeStore = new v({\n      type: \"remote\",\n      initialize: (e, t) => o(this.remoteClient.invoke(j, e, {\n        signal: t\n      }).catch(R)),\n      update: (e, t) => o(this.remoteClient.invoke(T, e, {\n        signal: t\n      }).catch(R)),\n      render: e => o(this.remoteClient.invoke(k, void 0, {\n        signal: e\n      }).catch(R))\n    }, e, () => this.notifyChange(\"updating\")));\n  }\n\n  _initStores() {\n    const e = \"snapshot\" === this.service.type ? \"snapshot\" : \"on-demand\",\n          t = {\n      geometryInfo: {\n        geometryType: this.service.geometryType,\n        hasM: !1,\n        hasZ: !1\n      },\n      spatialReference: this.spatialReference,\n      fieldsIndex: this.fieldsIndex,\n      fields: this.service.fields\n    };\n    this.featureStore = new S(t, this._storage, e);\n  }\n\n  _initQueryEngine(e) {\n    const t = this;\n    this.featureQueryEngine?.destroy(), this.featureQueryEngine = new f({\n      definitionExpression: e.schema.source.definitionExpression,\n      fields: this.service.fields,\n      geometryType: this.service.geometryType,\n      objectIdField: this.service.objectIdField,\n      hasM: !1,\n      hasZ: !1,\n      spatialReference: this.spatialReference.toJSON(),\n      cacheSpatialQueries: !0,\n      featureStore: this.featureStore,\n      aggregateAdapter: {\n        getFeatureObjectIds(e) {\n          if (r(t.aggregateStore)) return [];\n          return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map(e => t.getObjectId(e));\n        }\n\n      },\n      timeInfo: this.service.timeInfo\n    });\n  }\n\n  _initAggregateQueryEngine(e, t) {\n    if (this.aggregateQueryEngine?.destroy(), r(e)) return;\n    const s = t.targets.aggregate.params.fields.slice();\n    this.aggregateQueryEngine = new f({\n      definitionExpression: null,\n      fields: s,\n      geometryType: e.geometryInfo.geometryType,\n      objectIdField: e.objectIdField,\n      hasM: e.geometryInfo.hasM,\n      hasZ: e.geometryInfo.hasZ,\n      spatialReference: this.spatialReference.toJSON(),\n      cacheSpatialQueries: !1,\n      featureStore: e,\n      aggregateAdapter: {\n        getFeatureObjectIds: e => []\n      }\n    });\n  }\n\n  destroy() {\n    this._updateQueue.destroy(), this._source.destroy(), this.featureQueryEngine?.destroy(), this.aggregateQueryEngine?.destroy(), this.attributeStore?.destroy();\n\n    for (const e of this.tileStore.tiles) this._source.unsubscribe(e);\n\n    clearInterval(this._checkUpdating);\n  }\n\n  get fieldsIndex() {\n    return new m(this.service.fields);\n  }\n\n  get spatialReference() {\n    return this.tileStore.tileScheme.spatialReference;\n  }\n\n  get updating() {\n    return this.isUpdating();\n  }\n\n  isUpdating() {\n    const e = this._source.updating,\n          t = !!this._updateQueue.length,\n          r = !this.attributeStore || this.attributeStore.isUpdating(),\n          s = e || t || r;\n    return has(\"esri-2d-log-updating\") && console.log(`Updating FeatureController2D: ${s}\\n  -> updatingSource ${e}\\n  -> updateQueue ${t}\\n  -> updatingAttributeStore ${r}\\n`), s;\n  }\n\n  enableEvent(e) {\n    this._source.enableEvent(e.name, e.value);\n  }\n\n  pause() {\n    this._updateQueue.pause(), this._updateQueue.clear();\n  }\n\n  resume() {\n    this._updateQueue.resume();\n  }\n\n  pauseStream() {\n    \"geoevent\" === this._source.type && this._source.pauseStream();\n  }\n\n  resumeStream() {\n    \"geoevent\" === this._source.type && this._source.resumeStream();\n  }\n\n  _initAggregateStore(e) {\n    const t = e.schema.targets?.aggregate?.type,\n          r = s(this.config, e => e.schema.targets?.aggregate?.type);\n\n    if (r !== t && (i(this.aggregateStore) && (this.handles.remove(\"valueRangesChanged\"), this.aggregateStore.destroy(), this.aggregateStore = null), t)) {\n      switch (t) {\n        case \"cluster\":\n          {\n            const e = {\n              geometryInfo: {\n                geometryType: \"esriGeometryPoint\",\n                hasM: !1,\n                hasZ: !1\n              },\n              spatialReference: this.spatialReference,\n              fieldsIndex: this.fieldsIndex,\n              fields: this.service.fields\n            };\n            this.aggregateStore = new I(e, this.spatialReference, this._storage, this.service), this.handles.add(this.aggregateStore.events.on(\"valueRangesChanged\", e => {\n              this.remoteClient.invoke(\"emitEvent\", {\n                name: \"valueRangesChanged\",\n                event: {\n                  valueRanges: e.valueRanges\n                }\n              }).catch(R);\n            }), \"valueRangesChanged\");\n            break;\n          }\n\n        case \"bin\":\n          {\n            const e = {\n              geometryInfo: {\n                geometryType: \"esriGeometryPolygon\",\n                hasM: !1,\n                hasZ: !1\n              },\n              spatialReference: this.spatialReference,\n              fieldsIndex: this.fieldsIndex,\n              fields: this.service.fields\n            };\n            this.aggregateStore = new b(e, this.spatialReference, this._storage, this.service);\n            break;\n          }\n      }\n\n      this.aggregateStore.onTileUpdate({\n        added: this.tileStore.tiles,\n        removed: []\n      });\n    }\n  }\n\n  async update(e, t) {\n    this._updateVersion++, this._initQueryEngine(t), this._initAttributeStore(t), this.pause(), await Promise.all([this._source.update(e, t.schema.source), this.featureStore.updateSchema(e, t.schema.targets.feature), this.attributeStore.update(e, t), this.attributeStore.updateFilters(e, t, this)]), this._initAggregateStore(t), i(this.aggregateStore) && (await this.aggregateStore.updateSchema(e, t.schema.targets.aggregate)), this._initAggregateQueryEngine(this.aggregateStore, t.schema), has(\"esri-2d-update-debug\") && e.describe(), this._set(\"config\", t);\n  }\n\n  async applyUpdate(e) {\n    e.version = this._updateVersion, has(\"esri-2d-update-debug\") && console.debug(`Applying update ${e.version}`), e.mesh && this.clearTiles(), this._updateQueue.resume(), await this._source.applyUpdate(e), this.notifyChange(\"updating\"), await c(() => !this.updating), i(this.aggregateStore) && (await n(10), await c(() => !this.updating));\n  }\n\n  async onEdits({\n    edits: e\n  }) {\n    has(\"esri-2d-update-debug\") && console.debug(\"Applying Edit:\", e), this._didEdit = !0;\n\n    try {\n      const t = e.removed.map(e => e.objectId && -1 !== e.objectId ? e.objectId : this._lookupObjectIdByGlobalId(e.globalId)),\n            r = e.addOrModified.map(({\n        objectId: e\n      }) => e);\n      this.featureStore.invalidate(), await this._source.edit(r, t), this.clearTiles(), this.notifyChange(\"updating\"), i(this.aggregateStore) && this.aggregateStore.clear(), await this._source.resend(), await c(() => !this.updating);\n    } catch (t) {}\n  }\n\n  async refresh(e) {\n    if (!e.dataChanged) {\n      const e = E.empty();\n      return e.storage.filters = !0, this.applyUpdate(e);\n    }\n\n    this.featureStore.invalidate(), this.clearTiles(), this._source.refresh(this._updateVersion, e), this._cleanupNeeded = !0, this.notifyChange(\"updating\"), await c(() => !this.updating);\n  }\n\n  clearTiles() {\n    for (const e of this.tileStore.tiles) this.processor.onTileClear(e);\n  }\n\n  onTileUpdate(e) {\n    i(this.aggregateStore) && this.aggregateStore.onTileUpdate(e);\n\n    for (const t of e.added) this._source.subscribe(t, this._updateVersion), this._level = t.level;\n\n    for (const t of e.removed) this._source.unsubscribe(t), this._cleanupNeeded = !0, this._tileToResolver.has(t.id) && (this._tileToResolver.get(t.id).resolve(), this._tileToResolver.delete(t.id));\n\n    this.notifyChange(\"updating\");\n  }\n\n  async onIdle() {\n    this._invalidated && (this._invalidated = !1, (i(this.aggregateStore) || \"heatmap\" === this.processor.type) && (await this._repushCurrentLevelTiles())), this._markAndSweep();\n  }\n\n  async querySummaryStatistics({\n    query: e,\n    params: t\n  }) {\n    return this.featureQueryEngine.executeQueryForSummaryStatistics(e, t);\n  }\n\n  async queryAggregateSummaryStatistics({\n    query: e,\n    params: t\n  }) {\n    return this.aggregateQueryEngine.executeQueryForSummaryStatistics(e, t);\n  }\n\n  async queryUniqueValues({\n    query: e,\n    params: t\n  }) {\n    return this.featureQueryEngine.executeQueryForUniqueValues(e, t);\n  }\n\n  async queryAggregateUniqueValues({\n    query: e,\n    params: t\n  }) {\n    return this.aggregateQueryEngine.executeQueryForUniqueValues(e, t);\n  }\n\n  async queryClassBreaks({\n    query: e,\n    params: t\n  }) {\n    return this.featureQueryEngine.executeQueryForClassBreaks(e, t);\n  }\n\n  async queryAggregateClassBreaks({\n    query: e,\n    params: t\n  }) {\n    return this.aggregateQueryEngine.executeQueryForClassBreaks(e, t);\n  }\n\n  async queryHistogram({\n    query: e,\n    params: t\n  }) {\n    return this.featureQueryEngine.executeQueryForHistogram(e, t);\n  }\n\n  async queryAggregateHistogram({\n    query: e,\n    params: t\n  }) {\n    return this.aggregateQueryEngine.executeQueryForHistogram(e, t);\n  }\n\n  queryExtent(e) {\n    return this.featureQueryEngine.executeQueryForExtent(e);\n  }\n\n  queryAggregates(e) {\n    return this.aggregateQueryEngine.executeQuery(e);\n  }\n\n  queryAggregateCount(e) {\n    return this.aggregateQueryEngine.executeQueryForCount(e);\n  }\n\n  queryAggregateIds(e) {\n    return this.aggregateQueryEngine.executeQueryForIds(e);\n  }\n\n  queryFeatures(e) {\n    return this.featureQueryEngine.executeQuery(e);\n  }\n\n  async queryVisibleFeatures(e) {\n    const t = await this.featureQueryEngine.executeQuery(e),\n          r = t.objectIdFieldName;\n    return t.features = t.features.filter(e => {\n      const t = e.attributes[r],\n            i = this.getDisplayId(t);\n      return s(i, e => this.attributeStore.isVisible(e));\n    }), t;\n  }\n\n  queryFeatureCount(e) {\n    return this.featureQueryEngine.executeQueryForCount(e);\n  }\n\n  queryLatestObservations(e) {\n    return this.featureQueryEngine.executeQueryForLatestObservations(e);\n  }\n\n  queryObjectIds(e) {\n    return this.featureQueryEngine.executeQueryForIds(e);\n  }\n\n  async queryStatistics() {\n    return this.featureStore.storeStatistics;\n  }\n\n  getObjectId(e) {\n    return this.featureStore.lookupObjectId(e, this._storage);\n  }\n\n  getDisplayId(e) {\n    if (i(this.aggregateStore)) {\n      const t = this.aggregateStore.getDisplayId(e);\n\n      if (r(t)) {\n        const t = this.featureStore.lookupDisplayId(e);\n        return this.aggregateStore.getDisplayIdForReferenceId(t);\n      }\n\n      return t;\n    }\n\n    return this.featureStore.lookupDisplayId(e);\n  }\n\n  getFeatures(e) {\n    const t = [],\n          r = [];\n\n    for (const s of e) {\n      const e = i(this.aggregateStore) ? this.getAggregate(s) : null;\n      if (i(e)) {\n        if (i(e.attributes.referenceId)) {\n          const r = this.getFeature(e.attributes.referenceId);\n          i(r) && t.push(r);\n        } else r.push(e);\n      } else {\n        const e = this.getFeature(s);\n        i(e) && t.push(e);\n      }\n    }\n\n    return {\n      features: t,\n      aggregates: r\n    };\n  }\n\n  getFeature(e) {\n    const t = this.featureStore.lookupFeatureByDisplayId(e, this._storage);\n    if (r(t)) return null;\n    const s = t.readHydratedGeometry(),\n          i = y(s, t.geometryType, t.hasZ, t.hasM);\n    return {\n      attributes: t.readAttributes(),\n      geometry: i\n    };\n  }\n\n  getAggregate(e) {\n    return r(this.aggregateStore) ? null : this.aggregateStore.getAggregate(e);\n  }\n\n  getAggregates() {\n    return r(this.aggregateStore) ? [] : this.aggregateStore.getAggregates();\n  }\n\n  async setHighlight(e) {\n    const t = a(e.map(e => this.getDisplayId(e)));\n    return this.attributeStore.setHighlight(e, t);\n  }\n\n  _lookupObjectIdByGlobalId(e) {\n    const t = this.service.globalIdField;\n    if (r(t)) throw new Error(\"Expected globalIdField to be defined\");\n    let s = null;\n    if (this.featureStore.forEach(r => {\n      e === r.readAttribute(t) && (s = r.getObjectId());\n    }), r(s)) throw new Error(`Expected to find a feature with globalId ${e}`);\n    return s;\n  }\n\n  async _repushCurrentLevelTiles() {\n    const e = this.tileStore.tiles.filter(e => e.level === this._level);\n    e.map(async e => this._patchTile({\n      type: \"append\",\n      id: e.key.id,\n      clear: !0,\n      addOrUpdate: null,\n      end: !1\n    }));\n    const t = e.map(async e => this._patchTile({\n      type: \"append\",\n      id: e.key.id,\n      addOrUpdate: w.fromOptimizedFeatures([], this.service),\n      remove: [],\n      end: !0,\n      isRepush: !0,\n      status: E.empty()\n    }));\n    await Promise.all(t);\n  }\n\n  _maybeForceCleanup() {\n    performance.now() - this._lastCleanup > F && this._markAndSweep();\n  }\n\n  _patchTile(e, t) {\n    const r = this._updateQueue.push(e, t).then(() => {\n      this.notifyChange(\"updating\");\n    }).catch(e => {\n      this.notifyChange(\"updating\");\n    });\n\n    return this.notifyChange(\"updating\"), r;\n  }\n\n  async _onTileMessage(e, t) {\n    if (u(t), has(\"esri-2d-update-debug\")) {\n      const t = s(e.addOrUpdate, e => e.hasFeatures);\n      console.debug(e.id, `FeatureController:onTileMessage: [clear:${e.clear}, end:${e.end}, features: ${t}]`);\n    }\n\n    const a = this.tileStore.get(e.id);\n    if (!a) return;\n    if (e.clear) return this.processor.onTileClear(a);\n    const o = e.status;\n    this._cleanupNeeded = !0;\n    const n = [];\n\n    for (const r of e.remove) {\n      const e = this.featureStore.lookupDisplayId(r);\n      e && n.push(e);\n    }\n\n    e.remove = n;\n\n    try {\n      if (r(e.addOrUpdate)) return void this.processor.onTileMessage(a, { ...e,\n        addOrUpdate: null\n      }, i(this.aggregateStore), t).catch(g);\n\n      if (e.addOrUpdate.setArcadeSpatialReference(this.spatialReference), this.featureStore.hasInstance(e.addOrUpdate.instance) && o.targets.feature || (o.targets.feature = !0, this.featureStore.onTileData(a, e)), !o.storage.data || !o.storage.filters) {\n        o.storage.data = !0, o.storage.filters = !0, this.attributeStore.onTileData(a, e);\n        \"geoevent\" === this._source.type || this._didEdit ? (await this.attributeStore.sendUpdates(), u(t)) : this.attributeStore.sendUpdates();\n      }\n\n      if (i(this.aggregateStore) && !o.targets.aggregate) {\n        o.targets.aggregate = !0;\n\n        const t = A(this._source) && this._source.loading,\n              r = !A(this._source) || t || e.end;\n\n        if (this.aggregateStore.onTileData(a, e, this._storage, this.attributeStore, r), !r) return;\n        o.mesh || (this.attributeStore.onTileData(a, e), await this.attributeStore.sendUpdates());\n      }\n\n      if (!o.mesh) {\n        o.mesh = !0;\n        const r = i(this.aggregateStore) && \"cluster\" === this.aggregateStore.type;\n        await this.processor.onTileMessage(a, e, r, t), u(t);\n      }\n\n      this._maybeForceCleanup();\n    } catch (h) {\n      g(h);\n    }\n  }\n\n  _mark(e, t, r) {\n    const s = (4294901760 & this._storage.getInstanceId(e)) >>> 16;\n    e && (t.add(s), r.set(e));\n  }\n\n  _markAndSweep() {\n    this._lastCleanup = performance.now();\n    if (!(!(\"feature\" === this._source.type && \"snapshot\" === this._source.mode) && (\"geoevent\" === this._source.type || this._cleanupNeeded))) return;\n    this._cleanupNeeded = !1;\n\n    const e = this._storage.getBitset(this._markedIdsBufId),\n          t = new Set();\n\n    e.clear();\n\n    for (const r of this.tileStore.tiles) for (const s of this._source.readers(r.id)) {\n      const r = s.getCursor();\n\n      for (; r.next();) {\n        let s = r.getDisplayId();\n\n        if (!s) {\n          const e = r.getObjectId();\n          s = this.featureStore.lookupDisplayId(e);\n        }\n\n        this._mark(s, t, e);\n      }\n    }\n\n    \"symbol\" === this.processor.type && this.processor.forEachBufferId(r => {\n      this._mark(r, t, e);\n    }), this._updateQueue.forEach(r => {\n      for (const s of r.remove) {\n        const r = this.featureStore.lookupDisplayId(s);\n\n        this._mark(r, t, e);\n      }\n    }), i(this.aggregateStore) && (this.aggregateStore.sweepFeatures(e, this.featureStore), \"sweepAggregates\" in this.aggregateStore && this.aggregateStore.sweepAggregates(this._storage, this.attributeStore, this._level)), this.featureStore.sweepFeatures(e, this._storage, this.attributeStore), this.featureStore.sweepFeatureSets(t);\n  }\n\n};\ne([l({\n  constructOnly: !0\n})], U.prototype, \"tileStore\", void 0), e([l()], U.prototype, \"config\", void 0), e([l({\n  readOnly: !0\n})], U.prototype, \"fieldsIndex\", null), e([l()], U.prototype, \"processor\", void 0), e([l({\n  constructOnly: !0\n})], U.prototype, \"remoteClient\", void 0), e([l({\n  constructOnly: !0\n})], U.prototype, \"service\", void 0), e([l()], U.prototype, \"spatialReference\", null), e([l()], U.prototype, \"updating\", null), U = e([p(\"esri.views.2d.layers.features.controllers.FeatureController2D\")], U);\nconst q = U;\nexport { q as default };","map":{"version":3,"names":["_","e","HandleOwner","t","has","isNone","r","applySome","s","isSome","i","filterNones","a","ignoreAbortErrors","o","after","n","throwIfAborted","u","throwIfNotAbortError","g","isAbortError","h","when","d","whenOnce","c","property","l","subclass","p","convertToGeometry","y","QueryEngine","f","m","FeatureStore2D","S","createSource","v","BinStore","b","ClusterStore","I","ComputedAttributeStorage","Q","FeatureSetReaderJSON","w","UpdateToken","E","QueueProcessor","C","F","j","T","k","x","name","R","A","type","mode","U","constructor","arguments","_storage","_markedIdsBufId","createBitset","_lastCleanup","performance","now","_cleanupNeeded","_invalidated","_tileToResolver","Map","_didEdit","_updateVersion","tileStore","config","processor","remoteClient","service","initialize","_initStores","_initSource","_updateQueue","concurrency","_source","process","_onTileMessage","signal","handles","add","on","onTileUpdate","bind","updating","onIdle","_checkUpdating","setInterval","notifyChange","tileScheme","length","_patchTile","spatialReference","featureStore","_proxyEvents","events","invoke","propertyName","value","catch","event","attributes","centroid","geometry","_initAttributeStore","attributeStore","update","render","geometryInfo","geometryType","hasM","hasZ","fieldsIndex","fields","_initQueryEngine","featureQueryEngine","destroy","definitionExpression","schema","source","objectIdField","toJSON","cacheSpatialQueries","aggregateAdapter","getFeatureObjectIds","aggregateStore","getFeatureDisplayIdsForAggregate","map","getObjectId","timeInfo","_initAggregateQueryEngine","aggregateQueryEngine","targets","aggregate","params","slice","tiles","unsubscribe","clearInterval","isUpdating","console","log","enableEvent","pause","clear","resume","pauseStream","resumeStream","_initAggregateStore","remove","valueRanges","added","removed","Promise","all","updateSchema","feature","updateFilters","describe","_set","applyUpdate","version","debug","mesh","clearTiles","onEdits","edits","objectId","_lookupObjectIdByGlobalId","globalId","addOrModified","invalidate","edit","resend","refresh","dataChanged","empty","storage","filters","onTileClear","subscribe","_level","level","id","get","resolve","delete","_repushCurrentLevelTiles","_markAndSweep","querySummaryStatistics","query","executeQueryForSummaryStatistics","queryAggregateSummaryStatistics","queryUniqueValues","executeQueryForUniqueValues","queryAggregateUniqueValues","queryClassBreaks","executeQueryForClassBreaks","queryAggregateClassBreaks","queryHistogram","executeQueryForHistogram","queryAggregateHistogram","queryExtent","executeQueryForExtent","queryAggregates","executeQuery","queryAggregateCount","executeQueryForCount","queryAggregateIds","executeQueryForIds","queryFeatures","queryVisibleFeatures","objectIdFieldName","features","filter","getDisplayId","isVisible","queryFeatureCount","queryLatestObservations","executeQueryForLatestObservations","queryObjectIds","queryStatistics","storeStatistics","lookupObjectId","lookupDisplayId","getDisplayIdForReferenceId","getFeatures","getAggregate","referenceId","getFeature","push","aggregates","lookupFeatureByDisplayId","readHydratedGeometry","readAttributes","getAggregates","setHighlight","globalIdField","Error","forEach","readAttribute","key","addOrUpdate","end","fromOptimizedFeatures","isRepush","status","_maybeForceCleanup","then","hasFeatures","onTileMessage","setArcadeSpatialReference","hasInstance","instance","onTileData","data","sendUpdates","loading","_mark","getInstanceId","set","getBitset","Set","readers","getCursor","next","forEachBufferId","sweepFeatures","sweepAggregates","sweepFeatureSets","constructOnly","prototype","readOnly","q","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/controllers/FeatureController2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import has from\"../../../../../core/has.js\";import{isNone as r,applySome as s,isSome as i,filterNones as a}from\"../../../../../core/maybe.js\";import{ignoreAbortErrors as o,after as n,throwIfAborted as u,throwIfNotAbortError as g,isAbortError as h}from\"../../../../../core/promiseUtils.js\";import{when as d,whenOnce as c}from\"../../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{convertToGeometry as y}from\"../../../../../layers/graphics/featureConversionUtils.js\";import{QueryEngine as f}from\"../../../../../layers/graphics/data/QueryEngine.js\";import m from\"../../../../../layers/support/FieldsIndex.js\";import{FeatureStore2D as S}from\"../FeatureStore2D.js\";import{createSource as _}from\"../sources/createSource.js\";import v from\"../support/AttributeStore.js\";import{BinStore as b}from\"../support/BinStore.js\";import{ClusterStore as I}from\"../support/ClusterStore.js\";import{ComputedAttributeStorage as Q}from\"../support/ComputedAttributeStorage.js\";import{FeatureSetReaderJSON as w}from\"../support/FeatureSetReaderJSON.js\";import{UpdateToken as E}from\"../support/UpdateToken.js\";import{QueueProcessor as C}from\"../../../../support/QueueProcessor.js\";const F=5e3,j=\"tileRenderer.featuresView.attributeView.initialize\",T=\"tileRenderer.featuresView.attributeView.requestUpdate\",k=\"tileRenderer.featuresView.requestRender\";function x(e){return\"worker:port-closed\"===e.name}function R(e){if(!h(e)&&!x(e))throw e}function A(e){return\"feature\"===e.type&&\"snapshot\"===e.mode}let U=class extends t{constructor(){super(...arguments),this._storage=new Q,this._markedIdsBufId=this._storage.createBitset(),this._lastCleanup=performance.now(),this._cleanupNeeded=!1,this._invalidated=!1,this._tileToResolver=new Map,this._didEdit=!1,this._updateVersion=1,this.tileStore=null,this.config=null,this.processor=null,this.remoteClient=null,this.service=null}initialize(){this._initStores(),this._initSource(),this._updateQueue=new C({concurrency:\"geoevent\"===this._source.type?1:4,process:(e,t)=>this._onTileMessage(e,{signal:t})}),this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this)),d((()=>!this.updating),(()=>this.onIdle()))]),this._checkUpdating=setInterval((()=>this.notifyChange(\"updating\")),300)}_initSource(){const e=this.tileStore.tileScheme,t=()=>this._updateQueue.length<50,r=(e,t)=>(this._invalidated=!0,this._patchTile(e,t));this._source=_(this.service,this.spatialReference,e,r,t,this.featureStore),this._proxyEvents()}_proxyEvents(){if(\"geoevent\"===this._source.type){const e=this._source.events;this.handles.add([e.on(\"connectionStatus\",(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"connectionStatus\",value:e}).catch(R))),e.on(\"errorString\",(e=>this.remoteClient.invoke(\"setProperty\",{propertyName:\"errorString\",value:e}).catch(R))),e.on(\"data-received\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"data-received\",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}}).catch(R))),e.on(\"updateRate\",(e=>this.remoteClient.invoke(\"emitEvent\",{name:\"update-rate\",event:{...e}}).catch(R)))])}}_initAttributeStore(e){this.attributeStore||(this.attributeStore=new v({type:\"remote\",initialize:(e,t)=>o(this.remoteClient.invoke(j,e,{signal:t}).catch(R)),update:(e,t)=>o(this.remoteClient.invoke(T,e,{signal:t}).catch(R)),render:e=>o(this.remoteClient.invoke(k,void 0,{signal:e}).catch(R))},e,(()=>this.notifyChange(\"updating\"))))}_initStores(){const e=\"snapshot\"===this.service.type?\"snapshot\":\"on-demand\",t={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new S(t,this._storage,e)}_initQueryEngine(e){const t=this;this.featureQueryEngine?.destroy(),this.featureQueryEngine=new f({definitionExpression:e.schema.source.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(e){if(r(t.aggregateStore))return[];return t.aggregateStore.getFeatureDisplayIdsForAggregate(e).map((e=>t.getObjectId(e)))}},timeInfo:this.service.timeInfo})}_initAggregateQueryEngine(e,t){if(this.aggregateQueryEngine?.destroy(),r(e))return;const s=t.targets.aggregate.params.fields.slice();this.aggregateQueryEngine=new f({definitionExpression:null,fields:s,geometryType:e.geometryInfo.geometryType,objectIdField:e.objectIdField,hasM:e.geometryInfo.hasM,hasZ:e.geometryInfo.hasZ,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!1,featureStore:e,aggregateAdapter:{getFeatureObjectIds:e=>[]}})}destroy(){this._updateQueue.destroy(),this._source.destroy(),this.featureQueryEngine?.destroy(),this.aggregateQueryEngine?.destroy(),this.attributeStore?.destroy();for(const e of this.tileStore.tiles)this._source.unsubscribe(e);clearInterval(this._checkUpdating)}get fieldsIndex(){return new m(this.service.fields)}get spatialReference(){return this.tileStore.tileScheme.spatialReference}get updating(){return this.isUpdating()}isUpdating(){const e=this._source.updating,t=!!this._updateQueue.length,r=!this.attributeStore||this.attributeStore.isUpdating(),s=e||t||r;return has(\"esri-2d-log-updating\")&&console.log(`Updating FeatureController2D: ${s}\\n  -> updatingSource ${e}\\n  -> updateQueue ${t}\\n  -> updatingAttributeStore ${r}\\n`),s}enableEvent(e){this._source.enableEvent(e.name,e.value)}pause(){this._updateQueue.pause(),this._updateQueue.clear()}resume(){this._updateQueue.resume()}pauseStream(){\"geoevent\"===this._source.type&&this._source.pauseStream()}resumeStream(){\"geoevent\"===this._source.type&&this._source.resumeStream()}_initAggregateStore(e){const t=e.schema.targets?.aggregate?.type,r=s(this.config,(e=>e.schema.targets?.aggregate?.type));if(r!==t&&(i(this.aggregateStore)&&(this.handles.remove(\"valueRangesChanged\"),this.aggregateStore.destroy(),this.aggregateStore=null),t)){switch(t){case\"cluster\":{const e={geometryInfo:{geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new I(e,this.spatialReference,this._storage,this.service),this.handles.add(this.aggregateStore.events.on(\"valueRangesChanged\",(e=>{this.remoteClient.invoke(\"emitEvent\",{name:\"valueRangesChanged\",event:{valueRanges:e.valueRanges}}).catch(R)})),\"valueRangesChanged\");break}case\"bin\":{const e={geometryInfo:{geometryType:\"esriGeometryPolygon\",hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.aggregateStore=new b(e,this.spatialReference,this._storage,this.service);break}}this.aggregateStore.onTileUpdate({added:this.tileStore.tiles,removed:[]})}}async update(e,t){this._updateVersion++,this._initQueryEngine(t),this._initAttributeStore(t),this.pause(),await Promise.all([this._source.update(e,t.schema.source),this.featureStore.updateSchema(e,t.schema.targets.feature),this.attributeStore.update(e,t),this.attributeStore.updateFilters(e,t,this)]),this._initAggregateStore(t),i(this.aggregateStore)&&await this.aggregateStore.updateSchema(e,t.schema.targets.aggregate),this._initAggregateQueryEngine(this.aggregateStore,t.schema),has(\"esri-2d-update-debug\")&&e.describe(),this._set(\"config\",t)}async applyUpdate(e){e.version=this._updateVersion,has(\"esri-2d-update-debug\")&&console.debug(`Applying update ${e.version}`),e.mesh&&this.clearTiles(),this._updateQueue.resume(),await this._source.applyUpdate(e),this.notifyChange(\"updating\"),await c((()=>!this.updating)),i(this.aggregateStore)&&(await n(10),await c((()=>!this.updating)))}async onEdits({edits:e}){has(\"esri-2d-update-debug\")&&console.debug(\"Applying Edit:\",e),this._didEdit=!0;try{const t=e.removed.map((e=>e.objectId&&-1!==e.objectId?e.objectId:this._lookupObjectIdByGlobalId(e.globalId))),r=e.addOrModified.map((({objectId:e})=>e));this.featureStore.invalidate(),await this._source.edit(r,t),this.clearTiles(),this.notifyChange(\"updating\"),i(this.aggregateStore)&&this.aggregateStore.clear(),await this._source.resend(),await c((()=>!this.updating))}catch(t){}}async refresh(e){if(!e.dataChanged){const e=E.empty();return e.storage.filters=!0,this.applyUpdate(e)}this.featureStore.invalidate(),this.clearTiles(),this._source.refresh(this._updateVersion,e),this._cleanupNeeded=!0,this.notifyChange(\"updating\"),await c((()=>!this.updating))}clearTiles(){for(const e of this.tileStore.tiles)this.processor.onTileClear(e)}onTileUpdate(e){i(this.aggregateStore)&&this.aggregateStore.onTileUpdate(e);for(const t of e.added)this._source.subscribe(t,this._updateVersion),this._level=t.level;for(const t of e.removed)this._source.unsubscribe(t),this._cleanupNeeded=!0,this._tileToResolver.has(t.id)&&(this._tileToResolver.get(t.id).resolve(),this._tileToResolver.delete(t.id));this.notifyChange(\"updating\")}async onIdle(){this._invalidated&&(this._invalidated=!1,(i(this.aggregateStore)||\"heatmap\"===this.processor.type)&&await this._repushCurrentLevelTiles()),this._markAndSweep()}async querySummaryStatistics({query:e,params:t}){return this.featureQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryAggregateSummaryStatistics({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForSummaryStatistics(e,t)}async queryUniqueValues({query:e,params:t}){return this.featureQueryEngine.executeQueryForUniqueValues(e,t)}async queryAggregateUniqueValues({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForUniqueValues(e,t)}async queryClassBreaks({query:e,params:t}){return this.featureQueryEngine.executeQueryForClassBreaks(e,t)}async queryAggregateClassBreaks({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForClassBreaks(e,t)}async queryHistogram({query:e,params:t}){return this.featureQueryEngine.executeQueryForHistogram(e,t)}async queryAggregateHistogram({query:e,params:t}){return this.aggregateQueryEngine.executeQueryForHistogram(e,t)}queryExtent(e){return this.featureQueryEngine.executeQueryForExtent(e)}queryAggregates(e){return this.aggregateQueryEngine.executeQuery(e)}queryAggregateCount(e){return this.aggregateQueryEngine.executeQueryForCount(e)}queryAggregateIds(e){return this.aggregateQueryEngine.executeQueryForIds(e)}queryFeatures(e){return this.featureQueryEngine.executeQuery(e)}async queryVisibleFeatures(e){const t=await this.featureQueryEngine.executeQuery(e),r=t.objectIdFieldName;return t.features=t.features.filter((e=>{const t=e.attributes[r],i=this.getDisplayId(t);return s(i,(e=>this.attributeStore.isVisible(e)))})),t}queryFeatureCount(e){return this.featureQueryEngine.executeQueryForCount(e)}queryLatestObservations(e){return this.featureQueryEngine.executeQueryForLatestObservations(e)}queryObjectIds(e){return this.featureQueryEngine.executeQueryForIds(e)}async queryStatistics(){return this.featureStore.storeStatistics}getObjectId(e){return this.featureStore.lookupObjectId(e,this._storage)}getDisplayId(e){if(i(this.aggregateStore)){const t=this.aggregateStore.getDisplayId(e);if(r(t)){const t=this.featureStore.lookupDisplayId(e);return this.aggregateStore.getDisplayIdForReferenceId(t)}return t}return this.featureStore.lookupDisplayId(e)}getFeatures(e){const t=[],r=[];for(const s of e){const e=i(this.aggregateStore)?this.getAggregate(s):null;if(i(e))if(i(e.attributes.referenceId)){const r=this.getFeature(e.attributes.referenceId);i(r)&&t.push(r)}else r.push(e);else{const e=this.getFeature(s);i(e)&&t.push(e)}}return{features:t,aggregates:r}}getFeature(e){const t=this.featureStore.lookupFeatureByDisplayId(e,this._storage);if(r(t))return null;const s=t.readHydratedGeometry(),i=y(s,t.geometryType,t.hasZ,t.hasM);return{attributes:t.readAttributes(),geometry:i}}getAggregate(e){return r(this.aggregateStore)?null:this.aggregateStore.getAggregate(e)}getAggregates(){return r(this.aggregateStore)?[]:this.aggregateStore.getAggregates()}async setHighlight(e){const t=a(e.map((e=>this.getDisplayId(e))));return this.attributeStore.setHighlight(e,t)}_lookupObjectIdByGlobalId(e){const t=this.service.globalIdField;if(r(t))throw new Error(\"Expected globalIdField to be defined\");let s=null;if(this.featureStore.forEach((r=>{e===r.readAttribute(t)&&(s=r.getObjectId())})),r(s))throw new Error(`Expected to find a feature with globalId ${e}`);return s}async _repushCurrentLevelTiles(){const e=this.tileStore.tiles.filter((e=>e.level===this._level));e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,clear:!0,addOrUpdate:null,end:!1})));const t=e.map((async e=>this._patchTile({type:\"append\",id:e.key.id,addOrUpdate:w.fromOptimizedFeatures([],this.service),remove:[],end:!0,isRepush:!0,status:E.empty()})));await Promise.all(t)}_maybeForceCleanup(){performance.now()-this._lastCleanup>F&&this._markAndSweep()}_patchTile(e,t){const r=this._updateQueue.push(e,t).then((()=>{this.notifyChange(\"updating\")})).catch((e=>{this.notifyChange(\"updating\")}));return this.notifyChange(\"updating\"),r}async _onTileMessage(e,t){if(u(t),has(\"esri-2d-update-debug\")){const t=s(e.addOrUpdate,(e=>e.hasFeatures));console.debug(e.id,`FeatureController:onTileMessage: [clear:${e.clear}, end:${e.end}, features: ${t}]`)}const a=this.tileStore.get(e.id);if(!a)return;if(e.clear)return this.processor.onTileClear(a);const o=e.status;this._cleanupNeeded=!0;const n=[];for(const r of e.remove){const e=this.featureStore.lookupDisplayId(r);e&&n.push(e)}e.remove=n;try{if(r(e.addOrUpdate))return void this.processor.onTileMessage(a,{...e,addOrUpdate:null},i(this.aggregateStore),t).catch(g);if(e.addOrUpdate.setArcadeSpatialReference(this.spatialReference),this.featureStore.hasInstance(e.addOrUpdate.instance)&&o.targets.feature||(o.targets.feature=!0,this.featureStore.onTileData(a,e)),!o.storage.data||!o.storage.filters){o.storage.data=!0,o.storage.filters=!0,this.attributeStore.onTileData(a,e);\"geoevent\"===this._source.type||this._didEdit?(await this.attributeStore.sendUpdates(),u(t)):this.attributeStore.sendUpdates()}if(i(this.aggregateStore)&&!o.targets.aggregate){o.targets.aggregate=!0;const t=A(this._source)&&this._source.loading,r=!A(this._source)||t||e.end;if(this.aggregateStore.onTileData(a,e,this._storage,this.attributeStore,r),!r)return;o.mesh||(this.attributeStore.onTileData(a,e),await this.attributeStore.sendUpdates())}if(!o.mesh){o.mesh=!0;const r=i(this.aggregateStore)&&\"cluster\"===this.aggregateStore.type;await this.processor.onTileMessage(a,e,r,t),u(t)}this._maybeForceCleanup()}catch(h){g(h)}}_mark(e,t,r){const s=(4294901760&this._storage.getInstanceId(e))>>>16;e&&(t.add(s),r.set(e))}_markAndSweep(){this._lastCleanup=performance.now();if(!(!(\"feature\"===this._source.type&&\"snapshot\"===this._source.mode)&&(\"geoevent\"===this._source.type||this._cleanupNeeded)))return;this._cleanupNeeded=!1;const e=this._storage.getBitset(this._markedIdsBufId),t=new Set;e.clear();for(const r of this.tileStore.tiles)for(const s of this._source.readers(r.id)){const r=s.getCursor();for(;r.next();){let s=r.getDisplayId();if(!s){const e=r.getObjectId();s=this.featureStore.lookupDisplayId(e)}this._mark(s,t,e)}}\"symbol\"===this.processor.type&&this.processor.forEachBufferId((r=>{this._mark(r,t,e)})),this._updateQueue.forEach((r=>{for(const s of r.remove){const r=this.featureStore.lookupDisplayId(s);this._mark(r,t,e)}})),i(this.aggregateStore)&&(this.aggregateStore.sweepFeatures(e,this.featureStore),\"sweepAggregates\"in this.aggregateStore&&this.aggregateStore.sweepAggregates(this._storage,this.attributeStore,this._level)),this.featureStore.sweepFeatures(e,this._storage,this.attributeStore),this.featureStore.sweepFeatureSets(t)}};e([l({constructOnly:!0})],U.prototype,\"tileStore\",void 0),e([l()],U.prototype,\"config\",void 0),e([l({readOnly:!0})],U.prototype,\"fieldsIndex\",null),e([l()],U.prototype,\"processor\",void 0),e([l({constructOnly:!0})],U.prototype,\"remoteClient\",void 0),e([l({constructOnly:!0})],U.prototype,\"service\",void 0),e([l()],U.prototype,\"spatialReference\",null),e([l()],U.prototype,\"updating\",null),U=e([p(\"esri.views.2d.layers.features.controllers.FeatureController2D\")],U);const q=U;export{q as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}