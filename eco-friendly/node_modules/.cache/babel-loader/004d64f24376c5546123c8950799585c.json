{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as o } from \"../../../../../core/maybe.js\";\nimport { ReadLinearDepth as e } from \"./output/ReadLinearDepth.glsl.js\";\nimport { CameraSpace as r } from \"./util/CameraSpace.glsl.js\";\nimport { Float2PassUniform as l } from \"../shaderModules/Float2PassUniform.js\";\nimport { Float3PassUniform as a } from \"../shaderModules/Float3PassUniform.js\";\nimport { FloatPassUniform as t } from \"../shaderModules/FloatPassUniform.js\";\nimport { glsl as n } from \"../shaderModules/interfaces.js\";\nimport { Texture2DPassUniform as d } from \"../shaderModules/Texture2DPassUniform.js\";\nimport { Texture2DUniform as i } from \"../shaderModules/Texture2DUniform.js\";\n\nfunction s(s, p) {\n  s.extensions.add(\"GL_OES_standard_derivatives\");\n  const u = s.fragment;\n  u.include(e), s.include(r), u.uniforms.add([new t(\"globalAlpha\", o => o.globalAlpha), new a(\"glowColor\", o => o.glowColor), new t(\"glowWidth\", (o, e) => o.glowWidth * e.camera.pixelRatio), new t(\"glowFalloff\", o => o.glowFalloff), new a(\"innerColor\", o => o.innerColor), new t(\"innerWidth\", (o, e) => o.innerWidth * e.camera.pixelRatio), new d(\"depthMap\", (o, e) => e.linearDepthTexture), new l(\"nearFar\", (o, e) => e.camera.nearFar), new i(\"frameColor\")]), u.code.add(n`vec4 blendPremultiplied(vec4 source, vec4 dest) {\nfloat oneMinusSourceAlpha = 1.0 - source.a;\nreturn vec4(\nsource.rgb + dest.rgb * oneMinusSourceAlpha,\nsource.a + dest.a * oneMinusSourceAlpha\n);\n}`), u.code.add(n`vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}`), u.code.add(n`vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}`), u.code.add(n`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\nfloat depth = linearDepthFromTexture(depthMap, uv, nearFar);\nif (-depth == nearFar[0]) {\nreturn false;\n}\npos = reconstructPosition(gl_FragCoord.xy, depth);\nnormal = normalize(cross(dFdx(pos), dFdy(pos)));\nfloat ddepth = fwidth(depth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\nreturn true;\n}`), p.contrastControlEnabled ? (u.uniforms.add(new t(\"globalAlphaContrastBoost\", e => o(e.globalAlphaContrastBoost) ? e.globalAlphaContrastBoost : 1)), u.code.add(n`float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}`)) : u.code.add(n`vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}`);\n}\n\nexport { s as Laserline };","map":{"version":3,"names":["isSome","o","ReadLinearDepth","e","CameraSpace","r","Float2PassUniform","l","Float3PassUniform","a","FloatPassUniform","t","glsl","n","Texture2DPassUniform","d","Texture2DUniform","i","s","p","extensions","add","u","fragment","include","uniforms","globalAlpha","glowColor","glowWidth","camera","pixelRatio","glowFalloff","innerColor","innerWidth","linearDepthTexture","nearFar","code","contrastControlEnabled","globalAlphaContrastBoost","Laserline"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/maybe.js\";import{ReadLinearDepth as e}from\"./output/ReadLinearDepth.glsl.js\";import{CameraSpace as r}from\"./util/CameraSpace.glsl.js\";import{Float2PassUniform as l}from\"../shaderModules/Float2PassUniform.js\";import{Float3PassUniform as a}from\"../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as t}from\"../shaderModules/FloatPassUniform.js\";import{glsl as n}from\"../shaderModules/interfaces.js\";import{Texture2DPassUniform as d}from\"../shaderModules/Texture2DPassUniform.js\";import{Texture2DUniform as i}from\"../shaderModules/Texture2DUniform.js\";function s(s,p){s.extensions.add(\"GL_OES_standard_derivatives\");const u=s.fragment;u.include(e),s.include(r),u.uniforms.add([new t(\"globalAlpha\",(o=>o.globalAlpha)),new a(\"glowColor\",(o=>o.glowColor)),new t(\"glowWidth\",((o,e)=>o.glowWidth*e.camera.pixelRatio)),new t(\"glowFalloff\",(o=>o.glowFalloff)),new a(\"innerColor\",(o=>o.innerColor)),new t(\"innerWidth\",((o,e)=>o.innerWidth*e.camera.pixelRatio)),new d(\"depthMap\",((o,e)=>e.linearDepthTexture)),new l(\"nearFar\",((o,e)=>e.camera.nearFar)),new i(\"frameColor\")]),u.code.add(n`vec4 blendPremultiplied(vec4 source, vec4 dest) {\nfloat oneMinusSourceAlpha = 1.0 - source.a;\nreturn vec4(\nsource.rgb + dest.rgb * oneMinusSourceAlpha,\nsource.a + dest.a * oneMinusSourceAlpha\n);\n}`),u.code.add(n`vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}`),u.code.add(n`vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}`),u.code.add(n`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {\nfloat depth = linearDepthFromTexture(depthMap, uv, nearFar);\nif (-depth == nearFar[0]) {\nreturn false;\n}\npos = reconstructPosition(gl_FragCoord.xy, depth);\nnormal = normalize(cross(dFdx(pos), dFdy(pos)));\nfloat ddepth = fwidth(depth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);\nreturn true;\n}`),p.contrastControlEnabled?(u.uniforms.add(new t(\"globalAlphaContrastBoost\",(e=>o(e.globalAlphaContrastBoost)?e.globalAlphaContrastBoost:1))),u.code.add(n`float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}`)):u.code.add(n`vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}`)}export{s as Laserline};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,8BAAvB;AAAsD,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,kCAAhC;AAAmE,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,4BAA5B;AAAyD,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,uCAAlC;AAA0E,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,uCAAlC;AAA0E,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,sCAAjC;AAAwE,SAAOC,IAAI,IAAIC,CAAf,QAAqB,gCAArB;AAAsD,SAAOC,oBAAoB,IAAIC,CAA/B,QAAqC,0CAArC;AAAgF,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,sCAAjC;;AAAwE,SAASC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;EAACD,CAAC,CAACE,UAAF,CAAaC,GAAb,CAAiB,6BAAjB;EAAgD,MAAMC,CAAC,GAACJ,CAAC,CAACK,QAAV;EAAmBD,CAAC,CAACE,OAAF,CAAUrB,CAAV,GAAae,CAAC,CAACM,OAAF,CAAUnB,CAAV,CAAb,EAA0BiB,CAAC,CAACG,QAAF,CAAWJ,GAAX,CAAe,CAAC,IAAIV,CAAJ,CAAM,aAAN,EAAqBV,CAAC,IAAEA,CAAC,CAACyB,WAA1B,CAAD,EAAyC,IAAIjB,CAAJ,CAAM,WAAN,EAAmBR,CAAC,IAAEA,CAAC,CAAC0B,SAAxB,CAAzC,EAA6E,IAAIhB,CAAJ,CAAM,WAAN,EAAmB,CAACV,CAAD,EAAGE,CAAH,KAAOF,CAAC,CAAC2B,SAAF,GAAYzB,CAAC,CAAC0B,MAAF,CAASC,UAA/C,CAA7E,EAAyI,IAAInB,CAAJ,CAAM,aAAN,EAAqBV,CAAC,IAAEA,CAAC,CAAC8B,WAA1B,CAAzI,EAAiL,IAAItB,CAAJ,CAAM,YAAN,EAAoBR,CAAC,IAAEA,CAAC,CAAC+B,UAAzB,CAAjL,EAAuN,IAAIrB,CAAJ,CAAM,YAAN,EAAoB,CAACV,CAAD,EAAGE,CAAH,KAAOF,CAAC,CAACgC,UAAF,GAAa9B,CAAC,CAAC0B,MAAF,CAASC,UAAjD,CAAvN,EAAqR,IAAIf,CAAJ,CAAM,UAAN,EAAkB,CAACd,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAAC+B,kBAA3B,CAArR,EAAqU,IAAI3B,CAAJ,CAAM,SAAN,EAAiB,CAACN,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAAC0B,MAAF,CAASM,OAAjC,CAArU,EAAgX,IAAIlB,CAAJ,CAAM,YAAN,CAAhX,CAAf,CAA1B,EAA+aK,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AAC3mC;AACA;AACA;AACA;AACA;AACA,EAN8lC,CAA/a,EAM3qBS,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AACjB;AACA,EAFI,CAN2qB,EAQ3qBS,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAVI,CAR2qB,EAkB3qBS,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAVI,CAlB2qB,EA4B3qBM,CAAC,CAACkB,sBAAF,IAA0Bf,CAAC,CAACG,QAAF,CAAWJ,GAAX,CAAe,IAAIV,CAAJ,CAAM,0BAAN,EAAkCR,CAAC,IAAEF,CAAC,CAACE,CAAC,CAACmC,wBAAH,CAAD,GAA8BnC,CAAC,CAACmC,wBAAhC,GAAyD,CAA9F,CAAf,GAAkHhB,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA,EAPgJ,CAA5I,IAOCS,CAAC,CAACc,IAAF,CAAOf,GAAP,CAAWR,CAAE;AAClB;AACA,EAFK,CAnC0qB;AAqC3qB;;AAAA,SAAOK,CAAC,IAAIqB,SAAZ"},"metadata":{},"sourceType":"module"}