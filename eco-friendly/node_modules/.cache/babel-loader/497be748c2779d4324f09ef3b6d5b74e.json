{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { ScreenSpacePass as e } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";\nimport { ReadLinearDepth as r } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { CameraSpace as o } from \"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";\nimport { RgbaFloatEncoding as a } from \"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";\nimport { Float4PassUniform as s } from \"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";\nimport { FloatPassUniform as i } from \"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";\nimport { glsl as n } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as l } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\nimport { Texture2DPassUniform as d } from \"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";\nimport { s as t } from \"./ShadowCastAccumulate.glsl.js\";\nimport { ShadowCastVisualization as c } from \"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";\n\nfunction m(m) {\n  const g = new l(),\n        u = g.fragment;\n  u.include(a), u.include(r), g.include(o), g.include(e);\n  const {\n    visualization: p,\n    bandsEnabled: w\n  } = m;\n  u.constants.add(\"inverseSampleValue\", \"float\", t), u.uniforms.add([new d(\"shadowCastMap\", e => e.shadowCastMap), new i(\"sampleScale\", e => e.sampleScale), new i(\"opacityFromElevation\", e => e.opacityFromElevation), new s(\"uColor\", e => e.color)]);\n  const h = p === c.Gradient,\n        f = p === c.Threshold;\n  return h && w ? u.uniforms.add(new i(\"bandSize\", e => e.bandSize)) : f && u.uniforms.add(new i(\"threshold\", e => e.threshold)), u.code.add(n`\n      void main(void) {\n        vec4 record = texture2D(shadowCastMap, uv);\n        float pixelSamples = record.r * inverseSampleValue;\n        if (pixelSamples < 1.0) {\n          discard;\n        }\n\n        float strength = pixelSamples * sampleScale;\n\n        ${f ? n`\n            if (strength <= threshold) {\n              discard;\n            }` : \"\"}\n\n        ${h && w ? n`strength = ceil(strength / bandSize) * bandSize;` : \"\"}\n\n        gl_FragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${h ? n`* strength` : \"\"});\n      }\n    `), g;\n}\n\nconst g = Object.freeze(Object.defineProperty({\n  __proto__: null,\n  build: m\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nexport { g as S, m as b };","map":{"version":3,"names":["ScreenSpacePass","e","ReadLinearDepth","r","CameraSpace","o","RgbaFloatEncoding","a","Float4PassUniform","s","FloatPassUniform","i","glsl","n","ShaderBuilder","l","Texture2DPassUniform","d","t","ShadowCastVisualization","c","m","g","u","fragment","include","visualization","p","bandsEnabled","w","constants","add","uniforms","shadowCastMap","sampleScale","opacityFromElevation","color","h","Gradient","f","Threshold","bandSize","threshold","code","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","S","b"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/chunks/ShadowCastVisualize.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";import{ReadLinearDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{CameraSpace as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{RgbaFloatEncoding as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float4PassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{s as t}from\"./ShadowCastAccumulate.glsl.js\";import{ShadowCastVisualization as c}from\"../views/3d/webgl-engine/shaders/ShadowCastVisualizeTechniqueConfiguration.js\";function m(m){const g=new l,u=g.fragment;u.include(a),u.include(r),g.include(o),g.include(e);const{visualization:p,bandsEnabled:w}=m;u.constants.add(\"inverseSampleValue\",\"float\",t),u.uniforms.add([new d(\"shadowCastMap\",(e=>e.shadowCastMap)),new i(\"sampleScale\",(e=>e.sampleScale)),new i(\"opacityFromElevation\",(e=>e.opacityFromElevation)),new s(\"uColor\",(e=>e.color))]);const h=p===c.Gradient,f=p===c.Threshold;return h&&w?u.uniforms.add(new i(\"bandSize\",(e=>e.bandSize))):f&&u.uniforms.add(new i(\"threshold\",(e=>e.threshold))),u.code.add(n`\n      void main(void) {\n        vec4 record = texture2D(shadowCastMap, uv);\n        float pixelSamples = record.r * inverseSampleValue;\n        if (pixelSamples < 1.0) {\n          discard;\n        }\n\n        float strength = pixelSamples * sampleScale;\n\n        ${f?n`\n            if (strength <= threshold) {\n              discard;\n            }`:\"\"}\n\n        ${h&&w?n`strength = ceil(strength / bandSize) * bandSize;`:\"\"}\n\n        gl_FragColor = vec4(uColor.xyz, uColor.a * opacityFromElevation ${h?n`* strength`:\"\"});\n      }\n    `),g}const g=Object.freeze(Object.defineProperty({__proto__:null,build:m},Symbol.toStringTag,{value:\"Module\"}));export{g as S,m as b};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}