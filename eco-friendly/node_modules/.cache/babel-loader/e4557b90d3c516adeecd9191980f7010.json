{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from \"../../../core/has.js\";\nimport { isSome as e } from \"../../../core/maybe.js\";\nimport { PooledRBush as t } from \"../../../core/libs/rbush/PooledRBush.js\";\nimport { georeferenceApplyTransform as r } from \"./georeference.js\";\n\nclass n {\n  async createIndex(r, n) {\n    const o = new Array();\n    if (!r.vertexAttributes || !r.vertexAttributes.position) return new t();\n\n    const s = this._createMeshData(r),\n          a = e(n) ? await n.invoke(\"createIndexThread\", s, {\n      transferList: o\n    }) : this.createIndexThread(s).result;\n\n    return this._createPooledRBush().fromJSON(a);\n  }\n\n  createIndexThread(e) {\n    const t = new Float64Array(e.position),\n          r = this._createPooledRBush();\n\n    return e.components ? this._createIndexComponentsThread(r, t, e.components.map(e => new Uint32Array(e))) : this._createIndexAllThread(r, t);\n  }\n\n  _createIndexAllThread(e, t) {\n    const r = new Array(t.length / 9);\n    let n = 0;\n\n    for (let s = 0; s < t.length; s += 9) r[n++] = o(t, s + 0, s + 3, s + 6);\n\n    return e.load(r), {\n      result: e.toJSON()\n    };\n  }\n\n  _createIndexComponentsThread(e, t, r) {\n    let n = 0;\n\n    for (const o of r) n += o.length / 3;\n\n    const s = new Array(n);\n    let a = 0;\n\n    for (const i of r) for (let e = 0; e < i.length; e += 3) s[a++] = o(t, 3 * i[e + 0], 3 * i[e + 1], 3 * i[e + 2]);\n\n    return e.load(s), {\n      result: e.toJSON()\n    };\n  }\n\n  _createMeshData(e) {\n    const t = (e.transform ? r({\n      position: e.vertexAttributes.position,\n      normal: null,\n      tangent: null\n    }, e.transform, e.spatialReference).position : e.vertexAttributes.position).buffer;\n    return !e.components || e.components.some(e => !e.faces) ? {\n      position: t\n    } : {\n      position: t,\n      components: e.components.map(e => e.faces)\n    };\n  }\n\n  _createPooledRBush() {\n    return new t(9, has(\"esri-csp-restrictions\") ? e => e : [\".minX\", \".minY\", \".maxX\", \".maxY\"]);\n  }\n\n}\n\nfunction o(e, t, r, n) {\n  return {\n    minX: Math.min(e[t + 0], e[r + 0], e[n + 0]),\n    maxX: Math.max(e[t + 0], e[r + 0], e[n + 0]),\n    minY: Math.min(e[t + 1], e[r + 1], e[n + 1]),\n    maxY: Math.max(e[t + 1], e[r + 1], e[n + 1]),\n    p0: [e[t + 0], e[t + 1], e[t + 2]],\n    p1: [e[r + 0], e[r + 1], e[r + 2]],\n    p2: [e[n + 0], e[n + 1], e[n + 2]]\n  };\n}\n\nexport { n as default };","map":{"version":3,"names":["has","isSome","e","PooledRBush","t","georeferenceApplyTransform","r","n","createIndex","o","Array","vertexAttributes","position","s","_createMeshData","a","invoke","transferList","createIndexThread","result","_createPooledRBush","fromJSON","Float64Array","components","_createIndexComponentsThread","map","Uint32Array","_createIndexAllThread","length","load","toJSON","i","transform","normal","tangent","spatialReference","buffer","some","faces","minX","Math","min","maxX","max","minY","maxY","p0","p1","p2","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{isSome as e}from\"../../../core/maybe.js\";import{PooledRBush as t}from\"../../../core/libs/rbush/PooledRBush.js\";import{georeferenceApplyTransform as r}from\"./georeference.js\";class n{async createIndex(r,n){const o=new Array;if(!r.vertexAttributes||!r.vertexAttributes.position)return new t;const s=this._createMeshData(r),a=e(n)?await n.invoke(\"createIndexThread\",s,{transferList:o}):this.createIndexThread(s).result;return this._createPooledRBush().fromJSON(a)}createIndexThread(e){const t=new Float64Array(e.position),r=this._createPooledRBush();return e.components?this._createIndexComponentsThread(r,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(r,t)}_createIndexAllThread(e,t){const r=new Array(t.length/9);let n=0;for(let s=0;s<t.length;s+=9)r[n++]=o(t,s+0,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,t,r){let n=0;for(const o of r)n+=o.length/3;const s=new Array(n);let a=0;for(const i of r)for(let e=0;e<i.length;e+=3)s[a++]=o(t,3*i[e+0],3*i[e+1],3*i[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const t=(e.transform?r({position:e.vertexAttributes.position,normal:null,tangent:null},e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:t}:{position:t,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new t(9,has(\"esri-csp-restrictions\")?e=>e:[\".minX\",\".minY\",\".maxX\",\".maxY\"])}}function o(e,t,r,n){return{minX:Math.min(e[t+0],e[r+0],e[n+0]),maxX:Math.max(e[t+0],e[r+0],e[n+0]),minY:Math.min(e[t+1],e[r+1],e[n+1]),maxY:Math.max(e[t+1],e[r+1],e[n+1]),p0:[e[t+0],e[t+1],e[t+2]],p1:[e[r+0],e[r+1],e[r+2]],p2:[e[n+0],e[n+1],e[n+2]]}}export{n as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}