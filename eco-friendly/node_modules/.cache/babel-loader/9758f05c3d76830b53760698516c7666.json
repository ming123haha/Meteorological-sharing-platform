{"ast":null,"code":"import AMapLoader from '@amap/amap-jsapi-loader';\nexport default {\n  data() {\n    return {\n      marker: null,\n      value1: true,\n      map: null,\n      heatMap: null,\n      markers: [],\n      //假数据   经纬度\n      lnglats: [[118.3093, 32.3153], [118.3244, 32.2786], [118.3118, 32.3038]],\n      data: [{\n        \"lng\": 118.3093,\n        \"lat\": 32.3153,\n        //滁州市老年大学监测站\n        \"count\": 41\n      }, {\n        \"lng\": 118.3244,\n        \"lat\": 32.2786,\n        //滁州市人大宾馆\n        \"count\": 79\n      }, {\n        \"lng\": 118.3118,\n        \"lat\": 32.3038,\n        //滁州市市政府原办公楼\"\n        \"count\": 89\n      }, {\n        \"lng\": 110.35,\n        \"lat\": 20.02,\n        //滁州市市政府原办公楼\"\n        \"count\": 100\n      }, {\n        \"lng\": 110.33,\n        \"lat\": 19.98,\n        //滁州市市政府原办公楼\"\n        \"count\": 99\n      }, {\n        \"lng\": 110.72,\n        \"lat\": 19.61,\n        //滁州市市政府原办公楼\"\n        \"count\": 98\n      }, {\n        \"lng\": 110.31,\n        \"lat\": 19.68,\n        //滁州市市政府原办公楼\"\n        \"count\": 90\n      }]\n    };\n  },\n\n  mounted() {\n    //DOM初始化完成进行地图初始化\n    this.initMap();\n  },\n\n  methods: {\n    markerClick(e) {\n      infoWindow.setContent(e.target.content);\n      infoWindow.open(this.map, e.target.getPosition());\n    },\n\n    changValue() {\n      if (!this.value1) {\n        let data = [];\n        this.heatMap.setDataSet({\n          data: data,\n          max: 100\n        });\n      } else {\n        this.heatMap.setDataSet({\n          data: this.data,\n          max: 100\n        });\n      }\n    },\n\n    initMap() {\n      AMapLoader.load({\n        key: \"0e5904b2829e2e25ffcdecc5685b2209\",\n        // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: \"2.0\",\n        // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: ['AMap.MoveAnimation', 'AMap.ToolBar', 'AMap.Scale', 'AMap.MapType', 'AMap.Geolocation', 'AMap.HawkEye', 'AMap.HeatMap'] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n\n      }).then(AMap => {\n        var _this = this;\n\n        this.map = new AMap.Map(\"container\", {\n          //设置地图容器id\n          resizeEnable: true,\n          //mapStyle: 'amap://styles/normal',\n          viewMode: \"3D\",\n          //是否为3D地图模式\n          zoom: 10,\n          //初始化地图级别\n          center: [118.3093, 32.3153],\n          //初始化地图中心点位置\n          doubleClickZoom: true,\n          // 是否允许鼠标拖拽\n          dragEnable: true,\n          keyboardEnable: false\n        }); //实例化信息窗体\n\n        var title = '方恒假日酒店<span style=\"font-size:11px;color:#F00;\">价格:318</span>',\n            content = [];\n        content.push(\"<img src='http://tpc.googlesyndication.com/simgad/5843493769827749134'>地址：北京市朝阳区阜通东大街6号院3号楼东北8.3公里\");\n        content.push(\"电话：010-64733333\");\n        content.push(\"<a href='https://ditu.amap.com/detail/B000A8URXB?citycode=110105'>详细信息</a>\");\n        var infoWindow = new AMap.InfoWindow({\n          offset: new AMap.Pixel(0, -30)\n        });\n\n        for (var i = 0, marker; i < this.lnglats.length; i++) {\n          var marker = new AMap.Marker({\n            position: this.lnglats[i],\n            //不同标记点的经纬度\n            map: this.map,\n            content: createInfoWindow(title, content.join(\"<br/>\")),\n            offset: new AMap.Pixel(2, 2) //设置点偏移量\n            //icon:'//src/assets/login.png'\n\n          });\n          marker.content = '我是第' + (i + 1) + '个Marker';\n          marker.on('click', markerClick);\n          marker.emit('click', {\n            target: marker\n          });\n        } //构建自定义信息窗体\n\n\n        function createInfoWindow(title, content) {\n          var info = document.createElement(\"div\");\n          info.className = \"custom-info input-card content-window-card\"; //可以通过下面的方式修改自定义窗体的宽高\n\n          info.style.width = \"400px\"; // 定义顶部标题\n\n          var top = document.createElement(\"div\");\n          var titleD = document.createElement(\"div\");\n          var closeX = document.createElement(\"img\");\n          top.className = \"info-top\";\n          titleD.innerHTML = title;\n          closeX.src = \"https://webapi.amap.com/images/close2.gif\";\n          closeX.onclick = closeInfoWindow;\n          top.appendChild(titleD);\n          top.appendChild(closeX);\n          info.appendChild(top); // 定义中部内容\n\n          var middle = document.createElement(\"div\");\n          middle.className = \"info-middle\";\n          middle.style.backgroundColor = 'white';\n          middle.innerHTML = content;\n          info.appendChild(middle); // 定义底部内容\n\n          var bottom = document.createElement(\"div\");\n          bottom.className = \"info-bottom\";\n          bottom.style.position = 'relative';\n          bottom.style.top = '0px';\n          bottom.style.margin = '0 auto';\n          var sharp = document.createElement(\"img\");\n          sharp.src = \"https://webapi.amap.com/images/sharp.png\";\n          bottom.appendChild(sharp);\n          info.appendChild(bottom);\n          return info;\n        } //关闭信息窗体\n\n\n        function closeInfoWindow() {\n          _this.map.clearInfoWindow();\n        } // AMap.event.addListener(marker, \"click\", function () {  //监听点标记的点击事件\n        //   infoWindow.open(_this.map, marker.getPosition()); //信息窗体打开\n        // })\n\n\n        function markerClick(e) {\n          infoWindow.setContent(e.target.content);\n          infoWindow.open(_this.map, e.target.getPosition());\n        }\n\n        this.map.setFitView(); // 缩放地图到合适的视野级别\n        //this.map.setFitView([marker])\n\n        this.heatMap = new AMap.HeatMap(this.map, {\n          radius: 50,\n          //给定半径\n          opacity: [0, 1],\n          gradient: {\n            1: '#FF4C2F',\n            0.8: '#FAA53F',\n            0.6: '#FFF100',\n            0.5: '#7DF675',\n            0.4: '#5CE182',\n            0.2: '#29CF6F'\n          }\n        });\n        this.heatMap.setDataSet({\n          data: this.data,\n          max: 100\n        }); // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件\n\n        this.map.addControl(new AMap.ToolBar()); // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺\n\n        this.map.addControl(new AMap.Scale()); // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图\n\n        this.map.addControl(new AMap.HawkEye({\n          isOpen: true\n        })); // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置\n\n        this.map.addControl(new AMap.Geolocation());\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiBA;AAEA;EACAA;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC,SAHA;MAIAC,aAJA;MAKAC,WALA;MAMA;MACAC,UACA,mBADA,EAEA,mBAFA,EAGA,mBAHA,CAPA;MAYAN;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,GAKA;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,CALA,EAUA;QACA,eADA;QAEA,cAFA;QAEA;QACA;MAHA,CAVA,EAeA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CAfA,EAoBA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CApBA,EAyBA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CAzBA,EA8BA;QACA,aADA;QAEA,YAFA;QAEA;QACA;MAHA,CA9BA;IAZA;EAgDA,CAlDA;;EAmDAO;IACA;IACA;EACA,CAtDA;;EAuDAC;IACAC;MACAC;MACAA;IACA,CAJA;;IAKAC;MACA;QACA;QACA;UACAX,UADA;UAEAY;QAFA;MAIA,CANA,MAMA;QACA;UACAZ,eADA;UAEAY;QAFA;MAIA;IACA,CAlBA;;IAqBAC;MACAC;QACAC,uCADA;QACA;QACAC,cAFA;QAEA;QACAC,iIAHA,CAGA;;MAHA,GAIAC,IAJA,CAIAC;QACA;;QACA;UAAA;UACAC,kBADA;UAEA;UACAC,cAHA;UAGA;UACAC,QAJA;UAIA;UACAC,2BALA;UAKA;UACAC,qBANA;UAOA;UACAC,gBARA;UASAC;QATA,GAFA,CAgBA;;QACA;QAAA,IACAC,YADA;QAEAA;QACAA;QACAA;QAEA;UAAAC;QAAA;;QACA;UACA;YACAC,yBADA;YACA;YACA1B,aAFA;YAGAwB,uDAHA;YAIAC,4BAJA,CAIA;YACA;;UALA;UAOA3B;UACAA;UACAA;YAAA6B;UAAA;QACA,CAnCA,CAoCA;;;QACA;UACA;UACAC,8DAFA,CAIA;;UACAA,2BALA,CAMA;;UACA;UACA;UACA;UACAC;UACAC;UACAC;UACAA;UAEAF;UACAA;UACAD,sBAjBA,CAmBA;;UACA;UACAI;UACAA;UACAA;UACAJ,yBAxBA,CA0BA;;UACA;UACAK;UACAA;UACAA;UACAA;UACA;UACAC;UACAD;UACAL;UACA;QACA,CA1EA,CA4EA;;;QACA;UACAO;QACA,CA/EA,CAiFA;QACA;QACA;;;QAGA;UACA5B;UACAA;QACA;;QACA,sBA1FA,CA4FA;QACA;;QAGA;UACA6B,UADA;UACA;UACAC,eAFA;UAGAC;YACA,YADA;YAEA,cAFA;YAGA,cAHA;YAIA,cAJA;YAKA,cALA;YAMA;UANA;QAHA;QAYA;UACAzC,eADA;UAEAY;QAFA,GA5GA,CAgHA;;QACA,wCAjHA,CAmHA;;QACA,sCApHA,CAsHA;;QACA;UAAA8B;QAAA,IAvHA,CA0HA;;QACA;MAGA,CAlIA,EAkIAC,KAlIA,CAkIAC;QACAC;MACA,CApIA;IAqIA;;EA3JA;AAvDA","names":["data","marker","value1","map","heatMap","markers","lnglats","mounted","methods","markerClick","infoWindow","changValue","max","initMap","AMapLoader","key","version","plugins","then","AMap","resizeEnable","viewMode","zoom","center","doubleClickZoom","dragEnable","keyboardEnable","content","offset","position","target","info","top","titleD","closeX","middle","bottom","sharp","_this","radius","opacity","gradient","isOpen","catch","e","console"],"sourceRoot":"src/views","sources":["TrackingOfPollutants.vue"],"sourcesContent":["<template>\r\n  <div class=\"home_div\">\r\n    <div id=\"container\"></div>\r\n      <div class=\"map_title\">\r\n        <el-switch\r\n            v-model=\"value1\"\r\n            active-text=\"显示热力图\"\r\n            inactive-text=\"\"\r\n            @change=\"changValue()\">\r\n        </el-switch>\r\n      </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport AMapLoader from '@amap/amap-jsapi-loader';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      marker: null,\r\n      value1: true,\r\n      map: null,\r\n      heatMap: null,\r\n      markers: [],\r\n      //假数据   经纬度\r\n      lnglats: [\r\n        [118.3093, 32.3153],\r\n        [118.3244, 32.2786],\r\n        [118.3118, 32.3038],\r\n      ],\r\n      data: [{\r\n        \"lng\": 118.3093,\r\n        \"lat\": 32.3153,  //滁州市老年大学监测站\r\n        \"count\": 41\r\n      },\r\n        {\r\n          \"lng\": 118.3244,\r\n          \"lat\": 32.2786,  //滁州市人大宾馆\r\n          \"count\": 79\r\n        },\r\n        {\r\n          \"lng\": 118.3118,\r\n          \"lat\": 32.3038,  //滁州市市政府原办公楼\"\r\n          \"count\": 89\r\n        },\r\n        {\r\n          \"lng\": 110.35,\r\n          \"lat\": 20.02,  //滁州市市政府原办公楼\"\r\n          \"count\": 100\r\n        },\r\n        {\r\n          \"lng\": 110.33,\r\n          \"lat\": 19.98,  //滁州市市政府原办公楼\"\r\n          \"count\": 99\r\n        },\r\n        {\r\n          \"lng\": 110.72,\r\n          \"lat\": 19.61,  //滁州市市政府原办公楼\"\r\n          \"count\": 98\r\n        },\r\n        {\r\n          \"lng\": 110.31,\r\n          \"lat\": 19.68,  //滁州市市政府原办公楼\"\r\n          \"count\": 90\r\n        }]\r\n    }\r\n  },\r\n  mounted() {\r\n    //DOM初始化完成进行地图初始化\r\n    this.initMap();\r\n  },\r\n  methods: {\r\n    markerClick(e){\r\n      infoWindow.setContent(e.target.content);\r\n      infoWindow.open(this.map, e.target.getPosition());\r\n    },\r\n    changValue() {\r\n      if (!this.value1) {\r\n        let data = []\r\n        this.heatMap.setDataSet({\r\n          data: data,\r\n          max: 100\r\n        });\r\n      } else {\r\n        this.heatMap.setDataSet({\r\n          data: this.data,\r\n          max: 100\r\n        });\r\n      }\r\n    },\r\n\r\n\r\n    initMap() {\r\n      AMapLoader.load({\r\n        key: \"0e5904b2829e2e25ffcdecc5685b2209\",             // 申请好的Web端开发者Key，首次调用 load 时必填\r\n        version: \"2.0\",      // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\r\n        plugins: ['AMap.MoveAnimation', 'AMap.ToolBar', 'AMap.Scale', 'AMap.MapType', 'AMap.Geolocation', 'AMap.HawkEye', 'AMap.HeatMap'],       // 需要使用的的插件列表，如比例尺'AMap.Scale'等\r\n      }).then((AMap) => {\r\n        var _this = this;\r\n        this.map = new AMap.Map(\"container\", {  //设置地图容器id\r\n          resizeEnable: true,\r\n          //mapStyle: 'amap://styles/normal',\r\n          viewMode: \"3D\",    //是否为3D地图模式\r\n          zoom: 10,           //初始化地图级别\r\n          center: [118.3093, 32.3153], //初始化地图中心点位置\r\n          doubleClickZoom: true,\r\n          // 是否允许鼠标拖拽\r\n          dragEnable: true,\r\n          keyboardEnable: false,\r\n        });\r\n\r\n\r\n\r\n        //实例化信息窗体\r\n        var title = '方恒假日酒店<span style=\"font-size:11px;color:#F00;\">价格:318</span>',\r\n            content = [];\r\n        content.push(\"<img src='http://tpc.googlesyndication.com/simgad/5843493769827749134'>地址：北京市朝阳区阜通东大街6号院3号楼东北8.3公里\");\r\n        content.push(\"电话：010-64733333\");\r\n        content.push(\"<a href='https://ditu.amap.com/detail/B000A8URXB?citycode=110105'>详细信息</a>\");\r\n\r\n        var infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -30)});\r\n        for (var i = 0, marker; i < this.lnglats.length; i++) {\r\n          var marker = new AMap.Marker({\r\n            position: this.lnglats[i], //不同标记点的经纬度\r\n            map: this.map,\r\n            content: createInfoWindow(title, content.join(\"<br/>\")),\r\n            offset: new AMap.Pixel(2, 2),  //设置点偏移量\r\n            //icon:'//src/assets/login.png'\r\n          });\r\n          marker.content = '我是第' + (i + 1) + '个Marker';\r\n          marker.on('click', markerClick);\r\n          marker.emit('click', {target: marker});\r\n        }\r\n        //构建自定义信息窗体\r\n        function createInfoWindow(title, content) {\r\n          var info = document.createElement(\"div\");\r\n          info.className = \"custom-info input-card content-window-card\";\r\n\r\n          //可以通过下面的方式修改自定义窗体的宽高\r\n          info.style.width = \"400px\";\r\n          // 定义顶部标题\r\n          var top = document.createElement(\"div\");\r\n          var titleD = document.createElement(\"div\");\r\n          var closeX = document.createElement(\"img\");\r\n          top.className = \"info-top\";\r\n          titleD.innerHTML = title;\r\n          closeX.src = \"https://webapi.amap.com/images/close2.gif\";\r\n          closeX.onclick = closeInfoWindow;\r\n\r\n          top.appendChild(titleD);\r\n          top.appendChild(closeX);\r\n          info.appendChild(top);\r\n\r\n          // 定义中部内容\r\n          var middle = document.createElement(\"div\");\r\n          middle.className = \"info-middle\";\r\n          middle.style.backgroundColor = 'white';\r\n          middle.innerHTML = content;\r\n          info.appendChild(middle);\r\n\r\n          // 定义底部内容\r\n          var bottom = document.createElement(\"div\");\r\n          bottom.className = \"info-bottom\";\r\n          bottom.style.position = 'relative';\r\n          bottom.style.top = '0px';\r\n          bottom.style.margin = '0 auto';\r\n          var sharp = document.createElement(\"img\");\r\n          sharp.src = \"https://webapi.amap.com/images/sharp.png\";\r\n          bottom.appendChild(sharp);\r\n          info.appendChild(bottom);\r\n          return info;\r\n        }\r\n\r\n        //关闭信息窗体\r\n        function closeInfoWindow() {\r\n          _this.map.clearInfoWindow();\r\n        }\r\n\r\n        // AMap.event.addListener(marker, \"click\", function () {  //监听点标记的点击事件\r\n        //   infoWindow.open(_this.map, marker.getPosition()); //信息窗体打开\r\n        // })\r\n\r\n\r\n        function markerClick(e){\r\n          infoWindow.setContent(e.target.content);\r\n          infoWindow.open(_this.map, e.target.getPosition());\r\n        }\r\n        this.map.setFitView();\r\n\r\n        // 缩放地图到合适的视野级别\r\n        //this.map.setFitView([marker])\r\n\r\n\r\n        this.heatMap = new AMap.HeatMap(this.map, {\r\n          radius: 50, //给定半径\r\n          opacity: [0, 1],\r\n          gradient: {\r\n            1: '#FF4C2F',\r\n            0.8: '#FAA53F',\r\n            0.6: '#FFF100',\r\n            0.5: '#7DF675',\r\n            0.4: '#5CE182',\r\n            0.2: '#29CF6F',\r\n          }\r\n        });\r\n        this.heatMap.setDataSet({\r\n          data: this.data,\r\n          max: 100\r\n        });\r\n        // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件\r\n        this.map.addControl(new AMap.ToolBar());\r\n\r\n        // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺\r\n        this.map.addControl(new AMap.Scale());\r\n\r\n        // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图\r\n        this.map.addControl(new AMap.HawkEye({isOpen: true}));\r\n\r\n\r\n        // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置\r\n        this.map.addControl(new AMap.Geolocation());\r\n\r\n\r\n      }).catch(e => {\r\n        console.log(e);\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n.home_div{\r\n  padding:0px;\r\n  margin: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n#container{\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n}\r\n.map_title{\r\n  position:absolute;\r\n  z-index: 1;\r\n  width: 100%;\r\n  height: 50px;\r\n\r\n}\r\n.amap-logo{\r\n  display: none;\r\n}\r\n.amap-copyright {\r\n  opacity:0;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}