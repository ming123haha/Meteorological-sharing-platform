{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport e from \"../../../core/Error.js\";\nimport { unwrap as r, isNone as s, isSome as o } from \"../../../core/maybe.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../PixelBlock.js\";\nimport l from \"../RasterInfo.js\";\nimport f from \"../RasterStorageInfo.js\";\nimport c from \"./BaseRaster.js\";\nimport { parseSpatialReference as m, parsePAMInfo as p } from \"./pamParser.js\";\nimport { getElement as h, getElementValue as u } from \"./xmlUtilities.js\";\nimport { isPlatformLittleEndian as g } from \"../rasterFormats/utils.js\";\nimport { estimateStatisticsFromHistograms as d } from \"../rasterFunctions/stretchUtils.js\";\nimport y from \"../../../geometry/SpatialReference.js\";\nimport x from \"../../../geometry/Extent.js\";\nimport w from \"../../../geometry/Point.js\";\nconst I = new Map();\nI.set(\"Int8\", \"s8\"), I.set(\"UInt8\", \"u8\"), I.set(\"Int16\", \"s16\"), I.set(\"UInt16\", \"u16\"), I.set(\"Int32\", \"s32\"), I.set(\"UInt32\", \"u32\"), I.set(\"Float32\", \"f32\"), I.set(\"Float64\", \"f32\"), I.set(\"Double64\", \"f32\");\nconst b = new Map();\nb.set(\"none\", {\n  blobExtension: \".til\",\n  isOneSegment: !0,\n  decoderFormat: \"bip\"\n}), b.set(\"lerc\", {\n  blobExtension: \".lrc\",\n  isOneSegment: !1,\n  decoderFormat: \"lerc\"\n}), b.set(\"deflate\", {\n  blobExtension: \".pzp\",\n  isOneSegment: !0,\n  decoderFormat: \"deflate\"\n}), b.set(\"jpeg\", {\n  blobExtension: \".pjg\",\n  isOneSegment: !0,\n  decoderFormat: \"jpg\"\n});\nlet A = class extends c {\n  constructor() {\n    super(...arguments), this._files = null, this._storageIndex = null, this.datasetFormat = \"MRF\";\n  }\n\n  async open(t) {\n    await this.init(), this.datasetName = this.url.slice(this.url.lastIndexOf(\"/\") + 1);\n\n    const e = t ? r(t.signal) : null,\n          o = await this.request(this.url, {\n      responseType: \"xml\",\n      signal: e\n    }),\n          {\n      rasterInfo: i,\n      files: a\n    } = this._parseHeader(o.data);\n\n    if (-1 === this.ioConfig.skipExtensions?.indexOf(\"aux.xml\")) {\n      const e = await this._fetchAuxiliaryData(t);\n      null != e && (i.statistics = e.statistics ?? i.statistics, i.histograms = e.histograms, e.histograms && s(i.statistics) && (i.statistics = d(e.histograms)));\n    }\n\n    this._set(\"rasterInfo\", i), this._files = a;\n    const n = await this.request(a.index, {\n      responseType: \"array-buffer\",\n      signal: e\n    });\n    this._storageIndex = this._parseIndex(n.data);\n\n    const {\n      blockWidth: l,\n      blockHeight: f\n    } = this.rasterInfo.storageInfo,\n          c = this.rasterInfo.storageInfo.pyramidScalingFactor,\n          {\n      width: m,\n      height: p\n    } = this.rasterInfo,\n          h = [],\n          u = this._getBandSegmentCount();\n\n    let g = 0,\n        y = -1;\n\n    for (; g < this._storageIndex.length;) {\n      y++;\n      const t = Math.ceil(m / l / c ** y) - 1,\n            e = Math.ceil(p / f / c ** y) - 1;\n      g += (t + 1) * (e + 1) * u * 4, h.push({\n        maxRow: e,\n        maxCol: t,\n        minCol: 0,\n        minRow: 0\n      });\n    }\n\n    this.rasterInfo.storageInfo.blockBoundary = h, y > 0 && (this.rasterInfo.storageInfo.firstPyramidLevel = 1, this.rasterInfo.storageInfo.maximumPyramidLevel = y), this.updateTileInfo();\n  }\n\n  async fetchRawTile(t, e, r, s = {}) {\n    const {\n      blockWidth: i,\n      blockHeight: a,\n      blockBoundary: l\n    } = this.rasterInfo.storageInfo,\n          f = l[t];\n    if (!f || f.maxRow < e || f.maxCol < r || f.minRow > e || f.minCol > r) return null;\n\n    const {\n      bandCount: c,\n      pixelType: m\n    } = this.rasterInfo,\n          {\n      ranges: p,\n      actualTileWidth: h,\n      actualTileHeight: u\n    } = this._getTileLocation(t, e, r);\n\n    if (!p || 0 === p.length) return null;\n\n    if (0 === p[0].from && 0 === p[0].to) {\n      const t = new Uint8Array(i * a);\n      return new n({\n        width: i,\n        height: a,\n        pixels: null,\n        mask: t,\n        validPixelCount: 0\n      });\n    }\n\n    const {\n      bandIds: g\n    } = this.ioConfig,\n          d = this._getBandSegmentCount(),\n          y = [];\n\n    let x = 0;\n\n    for (x = 0; x < d; x++) (!g || g.indexOf[x] > -1) && y.push(this.request(this._files.data, {\n      range: {\n        from: p[x].from,\n        to: p[x].to\n      },\n      responseType: \"array-buffer\",\n      signal: s.signal\n    }));\n\n    const w = await Promise.all(y),\n          I = w.map(t => t.data.byteLength).reduce((t, e) => t + e),\n          A = new Uint8Array(I);\n    let F = 0;\n\n    for (x = 0; x < d; x++) A.set(new Uint8Array(w[x].data), F), F += w[x].data.byteLength;\n\n    const _ = b.get(this.rasterInfo.storageInfo.compression).decoderFormat,\n          R = await this.decodePixelBlock(A.buffer, {\n      width: i,\n      height: a,\n      format: _,\n      planes: g?.length || c,\n      pixelType: m\n    });\n\n    if (o(this.rasterInfo.noDataValue) && \"lerc\" !== _ && !R.mask) {\n      const t = this.rasterInfo.noDataValue[0];\n\n      if (null != t) {\n        const e = R.width * R.height,\n              r = new Uint8Array(e);\n        if (Math.abs(t) > 1e24) for (x = 0; x < e; x++) Math.abs((R.pixels[0][x] - t) / t) > 1e-6 && (r[x] = 1);else for (x = 0; x < e; x++) R.pixels[0][x] !== t && (r[x] = 1);\n        R.mask = r;\n      }\n    }\n\n    let S = 0,\n        j = 0;\n\n    if (h !== i || u !== a) {\n      let t = R.mask;\n      if (t) {\n        for (x = 0; x < a; x++) if (j = x * i, x < u) for (S = h; S < i; S++) t[j + S] = 0;else for (S = 0; S < i; S++) t[j + S] = 0;\n      } else for (t = new Uint8Array(i * a), R.mask = t, x = 0; x < u; x++) for (j = x * i, S = 0; S < h; S++) t[j + S] = 1;\n    }\n\n    return R;\n  }\n\n  _parseIndex(t) {\n    if (t.byteLength % 16 > 0) throw \"invalid array buffer must be multiples of 16\";\n    let e, r, s, o, i, a;\n\n    if (g) {\n      for (r = new Uint8Array(t), o = new ArrayBuffer(t.byteLength), s = new Uint8Array(o), i = 0; i < t.byteLength / 4; i++) for (a = 0; a < 4; a++) s[4 * i + a] = r[4 * i + 3 - a];\n\n      e = new Uint32Array(o);\n    } else e = new Uint32Array(t);\n\n    return e;\n  }\n\n  _getBandSegmentCount() {\n    return b.get(this.rasterInfo.storageInfo.compression).isOneSegment ? 1 : this.rasterInfo.bandCount;\n  }\n\n  _getTileLocation(t, e, r) {\n    const {\n      blockWidth: s,\n      blockHeight: o,\n      pyramidScalingFactor: i\n    } = this.rasterInfo.storageInfo,\n          {\n      width: a,\n      height: n\n    } = this.rasterInfo,\n          l = this._getBandSegmentCount();\n\n    let f,\n        c,\n        m,\n        p = 0,\n        h = 0;\n\n    for (m = 0; m < t; m++) h = i ** m, f = Math.ceil(a / s / h), c = Math.ceil(n / o / h), p += f * c;\n\n    h = i ** t, f = Math.ceil(a / s / h), c = Math.ceil(n / o / h), p += e * f + r, p *= 4 * l;\n\n    const u = this._storageIndex.subarray(p, p + 4 * l);\n\n    let g = 0,\n        d = 0;\n    const y = [];\n\n    for (let x = 0; x < l; x++) g = u[4 * x + 0] * 2 ** 32 + u[4 * x + 1], d = g + u[4 * x + 2] * 2 ** 32 + u[4 * x + 3], y.push({\n      from: g,\n      to: d\n    });\n\n    return {\n      ranges: y,\n      actualTileWidth: r < f - 1 ? s : Math.ceil(a / h) - s * (f - 1),\n      actualTileHeight: e < c - 1 ? o : Math.ceil(n / h) - o * (c - 1)\n    };\n  }\n\n  _parseHeader(t) {\n    const r = h(t, \"MRF_META/Raster\");\n    if (!r) throw new e(\"mrf:open\", \"not a valid MRF format\");\n    const s = h(r, \"Size\"),\n          o = parseInt(s.getAttribute(\"x\"), 10),\n          i = parseInt(s.getAttribute(\"y\"), 10),\n          a = parseInt(s.getAttribute(\"c\"), 10),\n          n = (u(r, \"Compression\") || \"none\").toLowerCase();\n    if (!b.has(n)) throw new e(\"mrf:open\", \"currently does not support compression \" + n);\n    const c = u(r, \"DataType\") || \"UInt8\",\n          p = I.get(c);\n    if (null == p) throw new e(\"mrf:open\", \"currently does not support pixel type \" + c);\n    const g = h(r, \"PageSize\"),\n          d = parseInt(g.getAttribute(\"x\"), 10),\n          A = parseInt(g.getAttribute(\"y\"), 10),\n          F = h(r, \"DataValues\");\n\n    let _, R;\n\n    F && (R = F.getAttribute(\"NoData\"), null != R && (_ = R.trim().split(\" \").map(t => parseFloat(t))));\n    if (h(t, \"MRF_META/CachedSource\")) throw new e(\"mrf:open\", \"currently does not support MRF referencing other data files\");\n    const S = h(t, \"MRF_META/GeoTags\"),\n          j = h(S, \"BoundingBox\");\n    let k,\n        M = !1;\n\n    if (null != j) {\n      const t = parseFloat(j.getAttribute(\"minx\")),\n            e = parseFloat(j.getAttribute(\"miny\")),\n            r = parseFloat(j.getAttribute(\"maxx\")),\n            s = parseFloat(j.getAttribute(\"maxy\")),\n            o = u(S, \"Projection\") || \"\";\n      let i = y.WGS84;\n      if (\"LOCAL_CS[]\" !== o) {\n        if (o.toLowerCase().startsWith(\"epsg:\")) {\n          const t = Number(o.slice(5));\n          isNaN(t) || 0 === t || (i = new y({\n            wkid: t\n          }));\n        } else i = m(o) ?? y.WGS84;\n      } else M = !0, i = new y({\n        wkid: 3857\n      });\n      k = new x(t, e, r, s), k.spatialReference = i;\n    } else M = !0, k = new x({\n      xmin: -.5,\n      ymin: .5 - i,\n      xmax: o - .5,\n      ymax: .5,\n      spatialReference: new y({\n        wkid: 3857\n      })\n    });\n\n    const T = h(t, \"MRF_META/Rsets\"),\n          C = parseInt(T && T.getAttribute(\"scale\") || \"2\", 10),\n          U = k.spatialReference,\n          B = new f({\n      origin: new w({\n        x: k.xmin,\n        y: k.ymax,\n        spatialReference: U\n      }),\n      blockWidth: d,\n      blockHeight: A,\n      pyramidBlockWidth: d,\n      pyramidBlockHeight: A,\n      compression: n,\n      pyramidScalingFactor: C\n    }),\n          L = new w({\n      x: k.width / o,\n      y: k.height / i,\n      spatialReference: U\n    }),\n          E = new l({\n      width: o,\n      height: i,\n      extent: k,\n      isPseudoSpatialReference: M,\n      spatialReference: U,\n      bandCount: a,\n      pixelType: p,\n      pixelSize: L,\n      noDataValue: _,\n      storageInfo: B\n    }),\n          P = u(t, \"datafile\"),\n          O = u(t, \"IndexFile\");\n    return {\n      rasterInfo: E,\n      files: {\n        mrf: this.url,\n        index: O || this.url.replace(\".mrf\", \".idx\"),\n        data: P || this.url.replace(\".mrf\", b.get(n).blobExtension)\n      }\n    };\n  }\n\n  async _fetchAuxiliaryData(t) {\n    try {\n      const {\n        data: e\n      } = await this.request(this.url + \".aux.xml\", {\n        responseType: \"xml\",\n        signal: t?.signal\n      });\n      return p(e);\n    } catch {\n      return null;\n    }\n  }\n\n};\nt([i()], A.prototype, \"_files\", void 0), t([i()], A.prototype, \"_storageIndex\", void 0), t([i({\n  type: String,\n  json: {\n    write: !0\n  }\n})], A.prototype, \"datasetFormat\", void 0), A = t([a(\"esri.layers.support.rasterIO.MRFRaster\")], A);\nconst F = A;\nexport { F as default };","map":{"version":3,"names":["_","t","e","unwrap","r","isNone","s","isSome","o","property","i","subclass","a","n","l","f","c","parseSpatialReference","m","parsePAMInfo","p","getElement","h","getElementValue","u","isPlatformLittleEndian","g","estimateStatisticsFromHistograms","d","y","x","w","I","Map","set","b","blobExtension","isOneSegment","decoderFormat","A","constructor","arguments","_files","_storageIndex","datasetFormat","open","init","datasetName","url","slice","lastIndexOf","signal","request","responseType","rasterInfo","files","_parseHeader","data","ioConfig","skipExtensions","indexOf","_fetchAuxiliaryData","statistics","histograms","_set","index","_parseIndex","blockWidth","blockHeight","storageInfo","pyramidScalingFactor","width","height","_getBandSegmentCount","length","Math","ceil","push","maxRow","maxCol","minCol","minRow","blockBoundary","firstPyramidLevel","maximumPyramidLevel","updateTileInfo","fetchRawTile","bandCount","pixelType","ranges","actualTileWidth","actualTileHeight","_getTileLocation","from","to","Uint8Array","pixels","mask","validPixelCount","bandIds","range","Promise","all","map","byteLength","reduce","F","get","compression","R","decodePixelBlock","buffer","format","planes","noDataValue","abs","S","j","ArrayBuffer","Uint32Array","subarray","parseInt","getAttribute","toLowerCase","has","trim","split","parseFloat","k","M","WGS84","startsWith","Number","isNaN","wkid","spatialReference","xmin","ymin","xmax","ymax","T","C","U","B","origin","pyramidBlockWidth","pyramidBlockHeight","L","E","extent","isPseudoSpatialReference","pixelSize","P","O","mrf","replace","prototype","type","String","json","write","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterDatasets/MRFRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{unwrap as r,isNone as s,isSome as o}from\"../../../core/maybe.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../PixelBlock.js\";import l from\"../RasterInfo.js\";import f from\"../RasterStorageInfo.js\";import c from\"./BaseRaster.js\";import{parseSpatialReference as m,parsePAMInfo as p}from\"./pamParser.js\";import{getElement as h,getElementValue as u}from\"./xmlUtilities.js\";import{isPlatformLittleEndian as g}from\"../rasterFormats/utils.js\";import{estimateStatisticsFromHistograms as d}from\"../rasterFunctions/stretchUtils.js\";import y from\"../../../geometry/SpatialReference.js\";import x from\"../../../geometry/Extent.js\";import w from\"../../../geometry/Point.js\";const I=new Map;I.set(\"Int8\",\"s8\"),I.set(\"UInt8\",\"u8\"),I.set(\"Int16\",\"s16\"),I.set(\"UInt16\",\"u16\"),I.set(\"Int32\",\"s32\"),I.set(\"UInt32\",\"u32\"),I.set(\"Float32\",\"f32\"),I.set(\"Float64\",\"f32\"),I.set(\"Double64\",\"f32\");const b=new Map;b.set(\"none\",{blobExtension:\".til\",isOneSegment:!0,decoderFormat:\"bip\"}),b.set(\"lerc\",{blobExtension:\".lrc\",isOneSegment:!1,decoderFormat:\"lerc\"}),b.set(\"deflate\",{blobExtension:\".pzp\",isOneSegment:!0,decoderFormat:\"deflate\"}),b.set(\"jpeg\",{blobExtension:\".pjg\",isOneSegment:!0,decoderFormat:\"jpg\"});let A=class extends c{constructor(){super(...arguments),this._files=null,this._storageIndex=null,this.datasetFormat=\"MRF\"}async open(t){await this.init(),this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1);const e=t?r(t.signal):null,o=await this.request(this.url,{responseType:\"xml\",signal:e}),{rasterInfo:i,files:a}=this._parseHeader(o.data);if(-1===this.ioConfig.skipExtensions?.indexOf(\"aux.xml\")){const e=await this._fetchAuxiliaryData(t);null!=e&&(i.statistics=e.statistics??i.statistics,i.histograms=e.histograms,e.histograms&&s(i.statistics)&&(i.statistics=d(e.histograms)))}this._set(\"rasterInfo\",i),this._files=a;const n=await this.request(a.index,{responseType:\"array-buffer\",signal:e});this._storageIndex=this._parseIndex(n.data);const{blockWidth:l,blockHeight:f}=this.rasterInfo.storageInfo,c=this.rasterInfo.storageInfo.pyramidScalingFactor,{width:m,height:p}=this.rasterInfo,h=[],u=this._getBandSegmentCount();let g=0,y=-1;for(;g<this._storageIndex.length;){y++;const t=Math.ceil(m/l/c**y)-1,e=Math.ceil(p/f/c**y)-1;g+=(t+1)*(e+1)*u*4,h.push({maxRow:e,maxCol:t,minCol:0,minRow:0})}this.rasterInfo.storageInfo.blockBoundary=h,y>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=y),this.updateTileInfo()}async fetchRawTile(t,e,r,s={}){const{blockWidth:i,blockHeight:a,blockBoundary:l}=this.rasterInfo.storageInfo,f=l[t];if(!f||f.maxRow<e||f.maxCol<r||f.minRow>e||f.minCol>r)return null;const{bandCount:c,pixelType:m}=this.rasterInfo,{ranges:p,actualTileWidth:h,actualTileHeight:u}=this._getTileLocation(t,e,r);if(!p||0===p.length)return null;if(0===p[0].from&&0===p[0].to){const t=new Uint8Array(i*a);return new n({width:i,height:a,pixels:null,mask:t,validPixelCount:0})}const{bandIds:g}=this.ioConfig,d=this._getBandSegmentCount(),y=[];let x=0;for(x=0;x<d;x++)(!g||g.indexOf[x]>-1)&&y.push(this.request(this._files.data,{range:{from:p[x].from,to:p[x].to},responseType:\"array-buffer\",signal:s.signal}));const w=await Promise.all(y),I=w.map((t=>t.data.byteLength)).reduce(((t,e)=>t+e)),A=new Uint8Array(I);let F=0;for(x=0;x<d;x++)A.set(new Uint8Array(w[x].data),F),F+=w[x].data.byteLength;const _=b.get(this.rasterInfo.storageInfo.compression).decoderFormat,R=await this.decodePixelBlock(A.buffer,{width:i,height:a,format:_,planes:g?.length||c,pixelType:m});if(o(this.rasterInfo.noDataValue)&&\"lerc\"!==_&&!R.mask){const t=this.rasterInfo.noDataValue[0];if(null!=t){const e=R.width*R.height,r=new Uint8Array(e);if(Math.abs(t)>1e24)for(x=0;x<e;x++)Math.abs((R.pixels[0][x]-t)/t)>1e-6&&(r[x]=1);else for(x=0;x<e;x++)R.pixels[0][x]!==t&&(r[x]=1);R.mask=r}}let S=0,j=0;if(h!==i||u!==a){let t=R.mask;if(t)for(x=0;x<a;x++)if(j=x*i,x<u)for(S=h;S<i;S++)t[j+S]=0;else for(S=0;S<i;S++)t[j+S]=0;else for(t=new Uint8Array(i*a),R.mask=t,x=0;x<u;x++)for(j=x*i,S=0;S<h;S++)t[j+S]=1}return R}_parseIndex(t){if(t.byteLength%16>0)throw\"invalid array buffer must be multiples of 16\";let e,r,s,o,i,a;if(g){for(r=new Uint8Array(t),o=new ArrayBuffer(t.byteLength),s=new Uint8Array(o),i=0;i<t.byteLength/4;i++)for(a=0;a<4;a++)s[4*i+a]=r[4*i+3-a];e=new Uint32Array(o)}else e=new Uint32Array(t);return e}_getBandSegmentCount(){return b.get(this.rasterInfo.storageInfo.compression).isOneSegment?1:this.rasterInfo.bandCount}_getTileLocation(t,e,r){const{blockWidth:s,blockHeight:o,pyramidScalingFactor:i}=this.rasterInfo.storageInfo,{width:a,height:n}=this.rasterInfo,l=this._getBandSegmentCount();let f,c,m,p=0,h=0;for(m=0;m<t;m++)h=i**m,f=Math.ceil(a/s/h),c=Math.ceil(n/o/h),p+=f*c;h=i**t,f=Math.ceil(a/s/h),c=Math.ceil(n/o/h),p+=e*f+r,p*=4*l;const u=this._storageIndex.subarray(p,p+4*l);let g=0,d=0;const y=[];for(let x=0;x<l;x++)g=u[4*x+0]*2**32+u[4*x+1],d=g+u[4*x+2]*2**32+u[4*x+3],y.push({from:g,to:d});return{ranges:y,actualTileWidth:r<f-1?s:Math.ceil(a/h)-s*(f-1),actualTileHeight:e<c-1?o:Math.ceil(n/h)-o*(c-1)}}_parseHeader(t){const r=h(t,\"MRF_META/Raster\");if(!r)throw new e(\"mrf:open\",\"not a valid MRF format\");const s=h(r,\"Size\"),o=parseInt(s.getAttribute(\"x\"),10),i=parseInt(s.getAttribute(\"y\"),10),a=parseInt(s.getAttribute(\"c\"),10),n=(u(r,\"Compression\")||\"none\").toLowerCase();if(!b.has(n))throw new e(\"mrf:open\",\"currently does not support compression \"+n);const c=u(r,\"DataType\")||\"UInt8\",p=I.get(c);if(null==p)throw new e(\"mrf:open\",\"currently does not support pixel type \"+c);const g=h(r,\"PageSize\"),d=parseInt(g.getAttribute(\"x\"),10),A=parseInt(g.getAttribute(\"y\"),10),F=h(r,\"DataValues\");let _,R;F&&(R=F.getAttribute(\"NoData\"),null!=R&&(_=R.trim().split(\" \").map((t=>parseFloat(t)))));if(h(t,\"MRF_META/CachedSource\"))throw new e(\"mrf:open\",\"currently does not support MRF referencing other data files\");const S=h(t,\"MRF_META/GeoTags\"),j=h(S,\"BoundingBox\");let k,M=!1;if(null!=j){const t=parseFloat(j.getAttribute(\"minx\")),e=parseFloat(j.getAttribute(\"miny\")),r=parseFloat(j.getAttribute(\"maxx\")),s=parseFloat(j.getAttribute(\"maxy\")),o=u(S,\"Projection\")||\"\";let i=y.WGS84;if(\"LOCAL_CS[]\"!==o)if(o.toLowerCase().startsWith(\"epsg:\")){const t=Number(o.slice(5));isNaN(t)||0===t||(i=new y({wkid:t}))}else i=m(o)??y.WGS84;else M=!0,i=new y({wkid:3857});k=new x(t,e,r,s),k.spatialReference=i}else M=!0,k=new x({xmin:-.5,ymin:.5-i,xmax:o-.5,ymax:.5,spatialReference:new y({wkid:3857})});const T=h(t,\"MRF_META/Rsets\"),C=parseInt(T&&T.getAttribute(\"scale\")||\"2\",10),U=k.spatialReference,B=new f({origin:new w({x:k.xmin,y:k.ymax,spatialReference:U}),blockWidth:d,blockHeight:A,pyramidBlockWidth:d,pyramidBlockHeight:A,compression:n,pyramidScalingFactor:C}),L=new w({x:k.width/o,y:k.height/i,spatialReference:U}),E=new l({width:o,height:i,extent:k,isPseudoSpatialReference:M,spatialReference:U,bandCount:a,pixelType:p,pixelSize:L,noDataValue:_,storageInfo:B}),P=u(t,\"datafile\"),O=u(t,\"IndexFile\");return{rasterInfo:E,files:{mrf:this.url,index:O||this.url.replace(\".mrf\",\".idx\"),data:P||this.url.replace(\".mrf\",b.get(n).blobExtension)}}}async _fetchAuxiliaryData(t){try{const{data:e}=await this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:t?.signal});return p(e)}catch{return null}}};t([i()],A.prototype,\"_files\",void 0),t([i()],A.prototype,\"_storageIndex\",void 0),t([i({type:String,json:{write:!0}})],A.prototype,\"datasetFormat\",void 0),A=t([a(\"esri.layers.support.rasterIO.MRFRaster\")],A);const F=A;export{F as default};\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAM,sBAAN;AAA6B,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,EAA+BC,MAAM,IAAIC,CAAzC,QAA+C,wBAA/C;AAAwE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,yBAAb;AAAuC,OAAOC,CAAP,MAAa,iBAAb;AAA+B,SAAOC,qBAAqB,IAAIC,CAAhC,EAAkCC,YAAY,IAAIC,CAAlD,QAAwD,gBAAxD;AAAyE,SAAOC,UAAU,IAAIC,CAArB,EAAuBC,eAAe,IAAIC,CAA1C,QAAgD,mBAAhD;AAAoE,SAAOC,sBAAsB,IAAIC,CAAjC,QAAuC,2BAAvC;AAAmE,SAAOC,gCAAgC,IAAIC,CAA3C,QAAiD,oCAAjD;AAAsF,OAAOC,CAAP,MAAa,uCAAb;AAAqD,OAAOC,CAAP,MAAa,6BAAb;AAA2C,OAAOC,CAAP,MAAa,4BAAb;AAA0C,MAAMC,CAAC,GAAC,IAAIC,GAAJ,EAAR;AAAgBD,CAAC,CAACE,GAAF,CAAM,MAAN,EAAa,IAAb,GAAmBF,CAAC,CAACE,GAAF,CAAM,OAAN,EAAc,IAAd,CAAnB,EAAuCF,CAAC,CAACE,GAAF,CAAM,OAAN,EAAc,KAAd,CAAvC,EAA4DF,CAAC,CAACE,GAAF,CAAM,QAAN,EAAe,KAAf,CAA5D,EAAkFF,CAAC,CAACE,GAAF,CAAM,OAAN,EAAc,KAAd,CAAlF,EAAuGF,CAAC,CAACE,GAAF,CAAM,QAAN,EAAe,KAAf,CAAvG,EAA6HF,CAAC,CAACE,GAAF,CAAM,SAAN,EAAgB,KAAhB,CAA7H,EAAoJF,CAAC,CAACE,GAAF,CAAM,SAAN,EAAgB,KAAhB,CAApJ,EAA2KF,CAAC,CAACE,GAAF,CAAM,UAAN,EAAiB,KAAjB,CAA3K;AAAmM,MAAMC,CAAC,GAAC,IAAIF,GAAJ,EAAR;AAAgBE,CAAC,CAACD,GAAF,CAAM,MAAN,EAAa;EAACE,aAAa,EAAC,MAAf;EAAsBC,YAAY,EAAC,CAAC,CAApC;EAAsCC,aAAa,EAAC;AAApD,CAAb,GAAyEH,CAAC,CAACD,GAAF,CAAM,MAAN,EAAa;EAACE,aAAa,EAAC,MAAf;EAAsBC,YAAY,EAAC,CAAC,CAApC;EAAsCC,aAAa,EAAC;AAApD,CAAb,CAAzE,EAAmJH,CAAC,CAACD,GAAF,CAAM,SAAN,EAAgB;EAACE,aAAa,EAAC,MAAf;EAAsBC,YAAY,EAAC,CAAC,CAApC;EAAsCC,aAAa,EAAC;AAApD,CAAhB,CAAnJ,EAAmOH,CAAC,CAACD,GAAF,CAAM,MAAN,EAAa;EAACE,aAAa,EAAC,MAAf;EAAsBC,YAAY,EAAC,CAAC,CAApC;EAAsCC,aAAa,EAAC;AAApD,CAAb,CAAnO;AAA4S,IAAIC,CAAC,GAAC,cAAcvB,CAAd,CAAe;EAACwB,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,MAAL,GAAY,IAAhC,EAAqC,KAAKC,aAAL,GAAmB,IAAxD,EAA6D,KAAKC,aAAL,GAAmB,KAAhF;EAAsF;;EAAU,MAAJC,IAAI,CAAC5C,CAAD,EAAG;IAAC,MAAM,KAAK6C,IAAL,EAAN,EAAkB,KAAKC,WAAL,GAAiB,KAAKC,GAAL,CAASC,KAAT,CAAe,KAAKD,GAAL,CAASE,WAAT,CAAqB,GAArB,IAA0B,CAAzC,CAAnC;;IAA+E,MAAMhD,CAAC,GAACD,CAAC,GAACG,CAAC,CAACH,CAAC,CAACkD,MAAH,CAAF,GAAa,IAAtB;IAAA,MAA2B3C,CAAC,GAAC,MAAM,KAAK4C,OAAL,CAAa,KAAKJ,GAAlB,EAAsB;MAACK,YAAY,EAAC,KAAd;MAAoBF,MAAM,EAACjD;IAA3B,CAAtB,CAAnC;IAAA,MAAwF;MAACoD,UAAU,EAAC5C,CAAZ;MAAc6C,KAAK,EAAC3C;IAApB,IAAuB,KAAK4C,YAAL,CAAkBhD,CAAC,CAACiD,IAApB,CAA/G;;IAAyI,IAAG,CAAC,CAAD,KAAK,KAAKC,QAAL,CAAcC,cAAd,EAA8BC,OAA9B,CAAsC,SAAtC,CAAR,EAAyD;MAAC,MAAM1D,CAAC,GAAC,MAAM,KAAK2D,mBAAL,CAAyB5D,CAAzB,CAAd;MAA0C,QAAMC,CAAN,KAAUQ,CAAC,CAACoD,UAAF,GAAa5D,CAAC,CAAC4D,UAAF,IAAcpD,CAAC,CAACoD,UAA7B,EAAwCpD,CAAC,CAACqD,UAAF,GAAa7D,CAAC,CAAC6D,UAAvD,EAAkE7D,CAAC,CAAC6D,UAAF,IAAczD,CAAC,CAACI,CAAC,CAACoD,UAAH,CAAf,KAAgCpD,CAAC,CAACoD,UAAF,GAAalC,CAAC,CAAC1B,CAAC,CAAC6D,UAAH,CAA9C,CAA5E;IAA2I;;IAAA,KAAKC,IAAL,CAAU,YAAV,EAAuBtD,CAAvB,GAA0B,KAAKgC,MAAL,GAAY9B,CAAtC;IAAwC,MAAMC,CAAC,GAAC,MAAM,KAAKuC,OAAL,CAAaxC,CAAC,CAACqD,KAAf,EAAqB;MAACZ,YAAY,EAAC,cAAd;MAA6BF,MAAM,EAACjD;IAApC,CAArB,CAAd;IAA2E,KAAKyC,aAAL,GAAmB,KAAKuB,WAAL,CAAiBrD,CAAC,CAAC4C,IAAnB,CAAnB;;IAA4C,MAAK;MAACU,UAAU,EAACrD,CAAZ;MAAcsD,WAAW,EAACrD;IAA1B,IAA6B,KAAKuC,UAAL,CAAgBe,WAAlD;IAAA,MAA8DrD,CAAC,GAAC,KAAKsC,UAAL,CAAgBe,WAAhB,CAA4BC,oBAA5F;IAAA,MAAiH;MAACC,KAAK,EAACrD,CAAP;MAASsD,MAAM,EAACpD;IAAhB,IAAmB,KAAKkC,UAAzI;IAAA,MAAoJhC,CAAC,GAAC,EAAtJ;IAAA,MAAyJE,CAAC,GAAC,KAAKiD,oBAAL,EAA3J;;IAAuL,IAAI/C,CAAC,GAAC,CAAN;IAAA,IAAQG,CAAC,GAAC,CAAC,CAAX;;IAAa,OAAKH,CAAC,GAAC,KAAKiB,aAAL,CAAmB+B,MAA1B,GAAkC;MAAC7C,CAAC;MAAG,MAAM5B,CAAC,GAAC0E,IAAI,CAACC,IAAL,CAAU1D,CAAC,GAACJ,CAAF,GAAIE,CAAC,IAAEa,CAAjB,IAAoB,CAA5B;MAAA,MAA8B3B,CAAC,GAACyE,IAAI,CAACC,IAAL,CAAUxD,CAAC,GAACL,CAAF,GAAIC,CAAC,IAAEa,CAAjB,IAAoB,CAApD;MAAsDH,CAAC,IAAE,CAACzB,CAAC,GAAC,CAAH,KAAOC,CAAC,GAAC,CAAT,IAAYsB,CAAZ,GAAc,CAAjB,EAAmBF,CAAC,CAACuD,IAAF,CAAO;QAACC,MAAM,EAAC5E,CAAR;QAAU6E,MAAM,EAAC9E,CAAjB;QAAmB+E,MAAM,EAAC,CAA1B;QAA4BC,MAAM,EAAC;MAAnC,CAAP,CAAnB;IAAiE;;IAAA,KAAK3B,UAAL,CAAgBe,WAAhB,CAA4Ba,aAA5B,GAA0C5D,CAA1C,EAA4CO,CAAC,GAAC,CAAF,KAAM,KAAKyB,UAAL,CAAgBe,WAAhB,CAA4Bc,iBAA5B,GAA8C,CAA9C,EAAgD,KAAK7B,UAAL,CAAgBe,WAAhB,CAA4Be,mBAA5B,GAAgDvD,CAAtG,CAA5C,EAAqJ,KAAKwD,cAAL,EAArJ;EAA2K;;EAAkB,MAAZC,YAAY,CAACrF,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAC,GAAC,EAAT,EAAY;IAAC,MAAK;MAAC6D,UAAU,EAACzD,CAAZ;MAAc0D,WAAW,EAACxD,CAA1B;MAA4BsE,aAAa,EAACpE;IAA1C,IAA6C,KAAKwC,UAAL,CAAgBe,WAAlE;IAAA,MAA8EtD,CAAC,GAACD,CAAC,CAACb,CAAD,CAAjF;IAAqF,IAAG,CAACc,CAAD,IAAIA,CAAC,CAAC+D,MAAF,GAAS5E,CAAb,IAAgBa,CAAC,CAACgE,MAAF,GAAS3E,CAAzB,IAA4BW,CAAC,CAACkE,MAAF,GAAS/E,CAArC,IAAwCa,CAAC,CAACiE,MAAF,GAAS5E,CAApD,EAAsD,OAAO,IAAP;;IAAY,MAAK;MAACmF,SAAS,EAACvE,CAAX;MAAawE,SAAS,EAACtE;IAAvB,IAA0B,KAAKoC,UAApC;IAAA,MAA+C;MAACmC,MAAM,EAACrE,CAAR;MAAUsE,eAAe,EAACpE,CAA1B;MAA4BqE,gBAAgB,EAACnE;IAA7C,IAAgD,KAAKoE,gBAAL,CAAsB3F,CAAtB,EAAwBC,CAAxB,EAA0BE,CAA1B,CAA/F;;IAA4H,IAAG,CAACgB,CAAD,IAAI,MAAIA,CAAC,CAACsD,MAAb,EAAoB,OAAO,IAAP;;IAAY,IAAG,MAAItD,CAAC,CAAC,CAAD,CAAD,CAAKyE,IAAT,IAAe,MAAIzE,CAAC,CAAC,CAAD,CAAD,CAAK0E,EAA3B,EAA8B;MAAC,MAAM7F,CAAC,GAAC,IAAI8F,UAAJ,CAAerF,CAAC,GAACE,CAAjB,CAAR;MAA4B,OAAO,IAAIC,CAAJ,CAAM;QAAC0D,KAAK,EAAC7D,CAAP;QAAS8D,MAAM,EAAC5D,CAAhB;QAAkBoF,MAAM,EAAC,IAAzB;QAA8BC,IAAI,EAAChG,CAAnC;QAAqCiG,eAAe,EAAC;MAArD,CAAN,CAAP;IAAsE;;IAAA,MAAK;MAACC,OAAO,EAACzE;IAAT,IAAY,KAAKgC,QAAtB;IAAA,MAA+B9B,CAAC,GAAC,KAAK6C,oBAAL,EAAjC;IAAA,MAA6D5C,CAAC,GAAC,EAA/D;;IAAkE,IAAIC,CAAC,GAAC,CAAN;;IAAQ,KAAIA,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACF,CAAV,EAAYE,CAAC,EAAb,EAAgB,CAAC,CAACJ,CAAD,IAAIA,CAAC,CAACkC,OAAF,CAAU9B,CAAV,IAAa,CAAC,CAAnB,KAAuBD,CAAC,CAACgD,IAAF,CAAO,KAAKzB,OAAL,CAAa,KAAKV,MAAL,CAAYe,IAAzB,EAA8B;MAAC2C,KAAK,EAAC;QAACP,IAAI,EAACzE,CAAC,CAACU,CAAD,CAAD,CAAK+D,IAAX;QAAgBC,EAAE,EAAC1E,CAAC,CAACU,CAAD,CAAD,CAAKgE;MAAxB,CAAP;MAAmCzC,YAAY,EAAC,cAAhD;MAA+DF,MAAM,EAAC7C,CAAC,CAAC6C;IAAxE,CAA9B,CAAP,CAAvB;;IAA8I,MAAMpB,CAAC,GAAC,MAAMsE,OAAO,CAACC,GAAR,CAAYzE,CAAZ,CAAd;IAAA,MAA6BG,CAAC,GAACD,CAAC,CAACwE,GAAF,CAAOtG,CAAC,IAAEA,CAAC,CAACwD,IAAF,CAAO+C,UAAjB,EAA8BC,MAA9B,CAAsC,CAACxG,CAAD,EAAGC,CAAH,KAAOD,CAAC,GAACC,CAA/C,CAA/B;IAAA,MAAkFqC,CAAC,GAAC,IAAIwD,UAAJ,CAAe/D,CAAf,CAApF;IAAsG,IAAI0E,CAAC,GAAC,CAAN;;IAAQ,KAAI5E,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACF,CAAV,EAAYE,CAAC,EAAb,EAAgBS,CAAC,CAACL,GAAF,CAAM,IAAI6D,UAAJ,CAAehE,CAAC,CAACD,CAAD,CAAD,CAAK2B,IAApB,CAAN,EAAgCiD,CAAhC,GAAmCA,CAAC,IAAE3E,CAAC,CAACD,CAAD,CAAD,CAAK2B,IAAL,CAAU+C,UAAhD;;IAA2D,MAAMxG,CAAC,GAACmC,CAAC,CAACwE,GAAF,CAAM,KAAKrD,UAAL,CAAgBe,WAAhB,CAA4BuC,WAAlC,EAA+CtE,aAAvD;IAAA,MAAqEuE,CAAC,GAAC,MAAM,KAAKC,gBAAL,CAAsBvE,CAAC,CAACwE,MAAxB,EAA+B;MAACxC,KAAK,EAAC7D,CAAP;MAAS8D,MAAM,EAAC5D,CAAhB;MAAkBoG,MAAM,EAAChH,CAAzB;MAA2BiH,MAAM,EAACvF,CAAC,EAAEgD,MAAH,IAAW1D,CAA7C;MAA+CwE,SAAS,EAACtE;IAAzD,CAA/B,CAA7E;;IAAyK,IAAGV,CAAC,CAAC,KAAK8C,UAAL,CAAgB4D,WAAjB,CAAD,IAAgC,WAASlH,CAAzC,IAA4C,CAAC6G,CAAC,CAACZ,IAAlD,EAAuD;MAAC,MAAMhG,CAAC,GAAC,KAAKqD,UAAL,CAAgB4D,WAAhB,CAA4B,CAA5B,CAAR;;MAAuC,IAAG,QAAMjH,CAAT,EAAW;QAAC,MAAMC,CAAC,GAAC2G,CAAC,CAACtC,KAAF,GAAQsC,CAAC,CAACrC,MAAlB;QAAA,MAAyBpE,CAAC,GAAC,IAAI2F,UAAJ,CAAe7F,CAAf,CAA3B;QAA6C,IAAGyE,IAAI,CAACwC,GAAL,CAASlH,CAAT,IAAY,IAAf,EAAoB,KAAI6B,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC5B,CAAV,EAAY4B,CAAC,EAAb,EAAgB6C,IAAI,CAACwC,GAAL,CAAS,CAACN,CAAC,CAACb,MAAF,CAAS,CAAT,EAAYlE,CAAZ,IAAe7B,CAAhB,IAAmBA,CAA5B,IAA+B,IAA/B,KAAsCG,CAAC,CAAC0B,CAAD,CAAD,GAAK,CAA3C,EAApC,KAAuF,KAAIA,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC5B,CAAV,EAAY4B,CAAC,EAAb,EAAgB+E,CAAC,CAACb,MAAF,CAAS,CAAT,EAAYlE,CAAZ,MAAiB7B,CAAjB,KAAqBG,CAAC,CAAC0B,CAAD,CAAD,GAAK,CAA1B;QAA6B+E,CAAC,CAACZ,IAAF,GAAO7F,CAAP;MAAS;IAAC;;IAAA,IAAIgH,CAAC,GAAC,CAAN;IAAA,IAAQC,CAAC,GAAC,CAAV;;IAAY,IAAG/F,CAAC,KAAGZ,CAAJ,IAAOc,CAAC,KAAGZ,CAAd,EAAgB;MAAC,IAAIX,CAAC,GAAC4G,CAAC,CAACZ,IAAR;MAAa,IAAGhG,CAAH;QAAK,KAAI6B,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAClB,CAAV,EAAYkB,CAAC,EAAb,EAAgB,IAAGuF,CAAC,GAACvF,CAAC,GAACpB,CAAJ,EAAMoB,CAAC,GAACN,CAAX,EAAa,KAAI4F,CAAC,GAAC9F,CAAN,EAAQ8F,CAAC,GAAC1G,CAAV,EAAY0G,CAAC,EAAb,EAAgBnH,CAAC,CAACoH,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP,CAA7B,KAA2C,KAAIA,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC1G,CAAV,EAAY0G,CAAC,EAAb,EAAgBnH,CAAC,CAACoH,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP;MAAhF,OAA8F,KAAInH,CAAC,GAAC,IAAI8F,UAAJ,CAAerF,CAAC,GAACE,CAAjB,CAAF,EAAsBiG,CAAC,CAACZ,IAAF,GAAOhG,CAA7B,EAA+B6B,CAAC,GAAC,CAArC,EAAuCA,CAAC,GAACN,CAAzC,EAA2CM,CAAC,EAA5C,EAA+C,KAAIuF,CAAC,GAACvF,CAAC,GAACpB,CAAJ,EAAM0G,CAAC,GAAC,CAAZ,EAAcA,CAAC,GAAC9F,CAAhB,EAAkB8F,CAAC,EAAnB,EAAsBnH,CAAC,CAACoH,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP;IAAS;;IAAA,OAAOP,CAAP;EAAS;;EAAA3C,WAAW,CAACjE,CAAD,EAAG;IAAC,IAAGA,CAAC,CAACuG,UAAF,GAAa,EAAb,GAAgB,CAAnB,EAAqB,MAAK,8CAAL;IAAoD,IAAItG,CAAJ,EAAME,CAAN,EAAQE,CAAR,EAAUE,CAAV,EAAYE,CAAZ,EAAcE,CAAd;;IAAgB,IAAGc,CAAH,EAAK;MAAC,KAAItB,CAAC,GAAC,IAAI2F,UAAJ,CAAe9F,CAAf,CAAF,EAAoBO,CAAC,GAAC,IAAI8G,WAAJ,CAAgBrH,CAAC,CAACuG,UAAlB,CAAtB,EAAoDlG,CAAC,GAAC,IAAIyF,UAAJ,CAAevF,CAAf,CAAtD,EAAwEE,CAAC,GAAC,CAA9E,EAAgFA,CAAC,GAACT,CAAC,CAACuG,UAAF,GAAa,CAA/F,EAAiG9F,CAAC,EAAlG,EAAqG,KAAIE,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC,CAAV,EAAYA,CAAC,EAAb,EAAgBN,CAAC,CAAC,IAAEI,CAAF,GAAIE,CAAL,CAAD,GAASR,CAAC,CAAC,IAAEM,CAAF,GAAI,CAAJ,GAAME,CAAP,CAAV;;MAAoBV,CAAC,GAAC,IAAIqH,WAAJ,CAAgB/G,CAAhB,CAAF;IAAqB,CAApK,MAAyKN,CAAC,GAAC,IAAIqH,WAAJ,CAAgBtH,CAAhB,CAAF;;IAAqB,OAAOC,CAAP;EAAS;;EAAAuE,oBAAoB,GAAE;IAAC,OAAOtC,CAAC,CAACwE,GAAF,CAAM,KAAKrD,UAAL,CAAgBe,WAAhB,CAA4BuC,WAAlC,EAA+CvE,YAA/C,GAA4D,CAA5D,GAA8D,KAAKiB,UAAL,CAAgBiC,SAArF;EAA+F;;EAAAK,gBAAgB,CAAC3F,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAK;MAAC+D,UAAU,EAAC7D,CAAZ;MAAc8D,WAAW,EAAC5D,CAA1B;MAA4B8D,oBAAoB,EAAC5D;IAAjD,IAAoD,KAAK4C,UAAL,CAAgBe,WAAzE;IAAA,MAAqF;MAACE,KAAK,EAAC3D,CAAP;MAAS4D,MAAM,EAAC3D;IAAhB,IAAmB,KAAKyC,UAA7G;IAAA,MAAwHxC,CAAC,GAAC,KAAK2D,oBAAL,EAA1H;;IAAsJ,IAAI1D,CAAJ;IAAA,IAAMC,CAAN;IAAA,IAAQE,CAAR;IAAA,IAAUE,CAAC,GAAC,CAAZ;IAAA,IAAcE,CAAC,GAAC,CAAhB;;IAAkB,KAAIJ,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACjB,CAAV,EAAYiB,CAAC,EAAb,EAAgBI,CAAC,GAACZ,CAAC,IAAEQ,CAAL,EAAOH,CAAC,GAAC4D,IAAI,CAACC,IAAL,CAAUhE,CAAC,GAACN,CAAF,GAAIgB,CAAd,CAAT,EAA0BN,CAAC,GAAC2D,IAAI,CAACC,IAAL,CAAU/D,CAAC,GAACL,CAAF,GAAIc,CAAd,CAA5B,EAA6CF,CAAC,IAAEL,CAAC,GAACC,CAAlD;;IAAoDM,CAAC,GAACZ,CAAC,IAAET,CAAL,EAAOc,CAAC,GAAC4D,IAAI,CAACC,IAAL,CAAUhE,CAAC,GAACN,CAAF,GAAIgB,CAAd,CAAT,EAA0BN,CAAC,GAAC2D,IAAI,CAACC,IAAL,CAAU/D,CAAC,GAACL,CAAF,GAAIc,CAAd,CAA5B,EAA6CF,CAAC,IAAElB,CAAC,GAACa,CAAF,GAAIX,CAApD,EAAsDgB,CAAC,IAAE,IAAEN,CAA3D;;IAA6D,MAAMU,CAAC,GAAC,KAAKmB,aAAL,CAAmB6E,QAAnB,CAA4BpG,CAA5B,EAA8BA,CAAC,GAAC,IAAEN,CAAlC,CAAR;;IAA6C,IAAIY,CAAC,GAAC,CAAN;IAAA,IAAQE,CAAC,GAAC,CAAV;IAAY,MAAMC,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAChB,CAAd,EAAgBgB,CAAC,EAAjB,EAAoBJ,CAAC,GAACF,CAAC,CAAC,IAAEM,CAAF,GAAI,CAAL,CAAD,GAAS,KAAG,EAAZ,GAAeN,CAAC,CAAC,IAAEM,CAAF,GAAI,CAAL,CAAlB,EAA0BF,CAAC,GAACF,CAAC,GAACF,CAAC,CAAC,IAAEM,CAAF,GAAI,CAAL,CAAD,GAAS,KAAG,EAAd,GAAiBN,CAAC,CAAC,IAAEM,CAAF,GAAI,CAAL,CAA9C,EAAsDD,CAAC,CAACgD,IAAF,CAAO;MAACgB,IAAI,EAACnE,CAAN;MAAQoE,EAAE,EAAClE;IAAX,CAAP,CAAtD;;IAA4E,OAAM;MAAC6D,MAAM,EAAC5D,CAAR;MAAU6D,eAAe,EAACtF,CAAC,GAACW,CAAC,GAAC,CAAJ,GAAMT,CAAN,GAAQqE,IAAI,CAACC,IAAL,CAAUhE,CAAC,GAACU,CAAZ,IAAehB,CAAC,IAAES,CAAC,GAAC,CAAJ,CAAlD;MAAyD4E,gBAAgB,EAACzF,CAAC,GAACc,CAAC,GAAC,CAAJ,GAAMR,CAAN,GAAQmE,IAAI,CAACC,IAAL,CAAU/D,CAAC,GAACS,CAAZ,IAAed,CAAC,IAAEQ,CAAC,GAAC,CAAJ;IAAlG,CAAN;EAAgH;;EAAAwC,YAAY,CAACvD,CAAD,EAAG;IAAC,MAAMG,CAAC,GAACkB,CAAC,CAACrB,CAAD,EAAG,iBAAH,CAAT;IAA+B,IAAG,CAACG,CAAJ,EAAM,MAAM,IAAIF,CAAJ,CAAM,UAAN,EAAiB,wBAAjB,CAAN;IAAiD,MAAMI,CAAC,GAACgB,CAAC,CAAClB,CAAD,EAAG,MAAH,CAAT;IAAA,MAAoBI,CAAC,GAACiH,QAAQ,CAACnH,CAAC,CAACoH,YAAF,CAAe,GAAf,CAAD,EAAqB,EAArB,CAA9B;IAAA,MAAuDhH,CAAC,GAAC+G,QAAQ,CAACnH,CAAC,CAACoH,YAAF,CAAe,GAAf,CAAD,EAAqB,EAArB,CAAjE;IAAA,MAA0F9G,CAAC,GAAC6G,QAAQ,CAACnH,CAAC,CAACoH,YAAF,CAAe,GAAf,CAAD,EAAqB,EAArB,CAApG;IAAA,MAA6H7G,CAAC,GAAC,CAACW,CAAC,CAACpB,CAAD,EAAG,aAAH,CAAD,IAAoB,MAArB,EAA6BuH,WAA7B,EAA/H;IAA0K,IAAG,CAACxF,CAAC,CAACyF,GAAF,CAAM/G,CAAN,CAAJ,EAAa,MAAM,IAAIX,CAAJ,CAAM,UAAN,EAAiB,4CAA0CW,CAA3D,CAAN;IAAoE,MAAMG,CAAC,GAACQ,CAAC,CAACpB,CAAD,EAAG,UAAH,CAAD,IAAiB,OAAzB;IAAA,MAAiCgB,CAAC,GAACY,CAAC,CAAC2E,GAAF,CAAM3F,CAAN,CAAnC;IAA4C,IAAG,QAAMI,CAAT,EAAW,MAAM,IAAIlB,CAAJ,CAAM,UAAN,EAAiB,2CAAyCc,CAA1D,CAAN;IAAmE,MAAMU,CAAC,GAACJ,CAAC,CAAClB,CAAD,EAAG,UAAH,CAAT;IAAA,MAAwBwB,CAAC,GAAC6F,QAAQ,CAAC/F,CAAC,CAACgG,YAAF,CAAe,GAAf,CAAD,EAAqB,EAArB,CAAlC;IAAA,MAA2DnF,CAAC,GAACkF,QAAQ,CAAC/F,CAAC,CAACgG,YAAF,CAAe,GAAf,CAAD,EAAqB,EAArB,CAArE;IAAA,MAA8FhB,CAAC,GAACpF,CAAC,CAAClB,CAAD,EAAG,YAAH,CAAjG;;IAAkH,IAAIJ,CAAJ,EAAM6G,CAAN;;IAAQH,CAAC,KAAGG,CAAC,GAACH,CAAC,CAACgB,YAAF,CAAe,QAAf,CAAF,EAA2B,QAAMb,CAAN,KAAU7G,CAAC,GAAC6G,CAAC,CAACgB,IAAF,GAASC,KAAT,CAAe,GAAf,EAAoBvB,GAApB,CAAyBtG,CAAC,IAAE8H,UAAU,CAAC9H,CAAD,CAAtC,CAAZ,CAA9B,CAAD;IAAyF,IAAGqB,CAAC,CAACrB,CAAD,EAAG,uBAAH,CAAJ,EAAgC,MAAM,IAAIC,CAAJ,CAAM,UAAN,EAAiB,6DAAjB,CAAN;IAAsF,MAAMkH,CAAC,GAAC9F,CAAC,CAACrB,CAAD,EAAG,kBAAH,CAAT;IAAA,MAAgCoH,CAAC,GAAC/F,CAAC,CAAC8F,CAAD,EAAG,aAAH,CAAnC;IAAqD,IAAIY,CAAJ;IAAA,IAAMC,CAAC,GAAC,CAAC,CAAT;;IAAW,IAAG,QAAMZ,CAAT,EAAW;MAAC,MAAMpH,CAAC,GAAC8H,UAAU,CAACV,CAAC,CAACK,YAAF,CAAe,MAAf,CAAD,CAAlB;MAAA,MAA2CxH,CAAC,GAAC6H,UAAU,CAACV,CAAC,CAACK,YAAF,CAAe,MAAf,CAAD,CAAvD;MAAA,MAAgFtH,CAAC,GAAC2H,UAAU,CAACV,CAAC,CAACK,YAAF,CAAe,MAAf,CAAD,CAA5F;MAAA,MAAqHpH,CAAC,GAACyH,UAAU,CAACV,CAAC,CAACK,YAAF,CAAe,MAAf,CAAD,CAAjI;MAAA,MAA0JlH,CAAC,GAACgB,CAAC,CAAC4F,CAAD,EAAG,YAAH,CAAD,IAAmB,EAA/K;MAAkL,IAAI1G,CAAC,GAACmB,CAAC,CAACqG,KAAR;MAAc,IAAG,iBAAe1H,CAAlB;QAAoB,IAAGA,CAAC,CAACmH,WAAF,GAAgBQ,UAAhB,CAA2B,OAA3B,CAAH,EAAuC;UAAC,MAAMlI,CAAC,GAACmI,MAAM,CAAC5H,CAAC,CAACyC,KAAF,CAAQ,CAAR,CAAD,CAAd;UAA2BoF,KAAK,CAACpI,CAAD,CAAL,IAAU,MAAIA,CAAd,KAAkBS,CAAC,GAAC,IAAImB,CAAJ,CAAM;YAACyG,IAAI,EAACrI;UAAN,CAAN,CAApB;QAAqC,CAAxG,MAA6GS,CAAC,GAACQ,CAAC,CAACV,CAAD,CAAD,IAAMqB,CAAC,CAACqG,KAAV;MAAjI,OAAsJD,CAAC,GAAC,CAAC,CAAH,EAAKvH,CAAC,GAAC,IAAImB,CAAJ,CAAM;QAACyG,IAAI,EAAC;MAAN,CAAN,CAAP;MAA0BN,CAAC,GAAC,IAAIlG,CAAJ,CAAM7B,CAAN,EAAQC,CAAR,EAAUE,CAAV,EAAYE,CAAZ,CAAF,EAAiB0H,CAAC,CAACO,gBAAF,GAAmB7H,CAApC;IAAsC,CAAla,MAAuauH,CAAC,GAAC,CAAC,CAAH,EAAKD,CAAC,GAAC,IAAIlG,CAAJ,CAAM;MAAC0G,IAAI,EAAC,CAAC,EAAP;MAAUC,IAAI,EAAC,KAAG/H,CAAlB;MAAoBgI,IAAI,EAAClI,CAAC,GAAC,EAA3B;MAA8BmI,IAAI,EAAC,EAAnC;MAAsCJ,gBAAgB,EAAC,IAAI1G,CAAJ,CAAM;QAACyG,IAAI,EAAC;MAAN,CAAN;IAAvD,CAAN,CAAP;;IAAyF,MAAMM,CAAC,GAACtH,CAAC,CAACrB,CAAD,EAAG,gBAAH,CAAT;IAAA,MAA8B4I,CAAC,GAACpB,QAAQ,CAACmB,CAAC,IAAEA,CAAC,CAAClB,YAAF,CAAe,OAAf,CAAH,IAA4B,GAA7B,EAAiC,EAAjC,CAAxC;IAAA,MAA6EoB,CAAC,GAACd,CAAC,CAACO,gBAAjF;IAAA,MAAkGQ,CAAC,GAAC,IAAIhI,CAAJ,CAAM;MAACiI,MAAM,EAAC,IAAIjH,CAAJ,CAAM;QAACD,CAAC,EAACkG,CAAC,CAACQ,IAAL;QAAU3G,CAAC,EAACmG,CAAC,CAACW,IAAd;QAAmBJ,gBAAgB,EAACO;MAApC,CAAN,CAAR;MAAsD3E,UAAU,EAACvC,CAAjE;MAAmEwC,WAAW,EAAC7B,CAA/E;MAAiF0G,iBAAiB,EAACrH,CAAnG;MAAqGsH,kBAAkB,EAAC3G,CAAxH;MAA0HqE,WAAW,EAAC/F,CAAtI;MAAwIyD,oBAAoB,EAACuE;IAA7J,CAAN,CAApG;IAAA,MAA2QM,CAAC,GAAC,IAAIpH,CAAJ,CAAM;MAACD,CAAC,EAACkG,CAAC,CAACzD,KAAF,GAAQ/D,CAAX;MAAaqB,CAAC,EAACmG,CAAC,CAACxD,MAAF,GAAS9D,CAAxB;MAA0B6H,gBAAgB,EAACO;IAA3C,CAAN,CAA7Q;IAAA,MAAkUM,CAAC,GAAC,IAAItI,CAAJ,CAAM;MAACyD,KAAK,EAAC/D,CAAP;MAASgE,MAAM,EAAC9D,CAAhB;MAAkB2I,MAAM,EAACrB,CAAzB;MAA2BsB,wBAAwB,EAACrB,CAApD;MAAsDM,gBAAgB,EAACO,CAAvE;MAAyEvD,SAAS,EAAC3E,CAAnF;MAAqF4E,SAAS,EAACpE,CAA/F;MAAiGmI,SAAS,EAACJ,CAA3G;MAA6GjC,WAAW,EAAClH,CAAzH;MAA2HqE,WAAW,EAAC0E;IAAvI,CAAN,CAApU;IAAA,MAAqdS,CAAC,GAAChI,CAAC,CAACvB,CAAD,EAAG,UAAH,CAAxd;IAAA,MAAuewJ,CAAC,GAACjI,CAAC,CAACvB,CAAD,EAAG,WAAH,CAA1e;IAA0f,OAAM;MAACqD,UAAU,EAAC8F,CAAZ;MAAc7F,KAAK,EAAC;QAACmG,GAAG,EAAC,KAAK1G,GAAV;QAAciB,KAAK,EAACwF,CAAC,IAAE,KAAKzG,GAAL,CAAS2G,OAAT,CAAiB,MAAjB,EAAwB,MAAxB,CAAvB;QAAuDlG,IAAI,EAAC+F,CAAC,IAAE,KAAKxG,GAAL,CAAS2G,OAAT,CAAiB,MAAjB,EAAwBxH,CAAC,CAACwE,GAAF,CAAM9F,CAAN,EAASuB,aAAjC;MAA/D;IAApB,CAAN;EAA2I;;EAAyB,MAAnByB,mBAAmB,CAAC5D,CAAD,EAAG;IAAC,IAAG;MAAC,MAAK;QAACwD,IAAI,EAACvD;MAAN,IAAS,MAAM,KAAKkD,OAAL,CAAa,KAAKJ,GAAL,GAAS,UAAtB,EAAiC;QAACK,YAAY,EAAC,KAAd;QAAoBF,MAAM,EAAClD,CAAC,EAAEkD;MAA9B,CAAjC,CAApB;MAA4F,OAAO/B,CAAC,CAAClB,CAAD,CAAR;IAAY,CAA5G,CAA4G,MAAK;MAAC,OAAO,IAAP;IAAY;EAAC;;AAAv4L,CAArB;AAA85LD,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAO6B,CAAC,CAACqH,SAAT,EAAmB,QAAnB,EAA4B,KAAK,CAAjC,CAAD,EAAqC3J,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAO6B,CAAC,CAACqH,SAAT,EAAmB,eAAnB,EAAmC,KAAK,CAAxC,CAAtC,EAAiF3J,CAAC,CAAC,CAACS,CAAC,CAAC;EAACmJ,IAAI,EAACC,MAAN;EAAaC,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC;EAAR;AAAlB,CAAD,CAAF,CAAD,EAAoCzH,CAAC,CAACqH,SAAtC,EAAgD,eAAhD,EAAgE,KAAK,CAArE,CAAlF,EAA0JrH,CAAC,GAACtC,CAAC,CAAC,CAACW,CAAC,CAAC,wCAAD,CAAF,CAAD,EAA+C2B,CAA/C,CAA7J;AAA+M,MAAMmE,CAAC,GAACnE,CAAR;AAAU,SAAOmE,CAAC,IAAIuD,OAAZ"},"metadata":{},"sourceType":"module"}