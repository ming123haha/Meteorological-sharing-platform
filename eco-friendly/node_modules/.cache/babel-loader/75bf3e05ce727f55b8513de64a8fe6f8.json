{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../core/maybe.js\";\nimport { f as t, c as r } from \"../../../chunks/vec3f64.js\";\nimport { projectVectorToVector as i } from \"../../../geometry/projection.js\";\nimport s from \"../../../geometry/SpatialReference.js\";\nimport { wrap as a } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as o } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { intersectsAABB as n } from \"../../../geometry/support/frustum.js\";\nimport { isPlateCarree as h } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { createPlanarGlobePatch as c, updateCornerElevationsPlanar as l, updateEdgesElevationsAndNormalsPlanar as m } from \"./PatchGeometryFactory.js\";\nimport { Tile as p, CenterPosition as d } from \"./Tile.js\";\nimport { intersectAabbInvDirBefore as u } from \"../webgl-engine/materials/internal/MaterialUtil.js\";\n\nclass f extends p {\n  constructor(e, t, r) {\n    super(), this.horizontalScaleFactor = 1, this.extentInRenderSR = o(), void 0 !== e && this.init(e, t, r);\n  }\n\n  init(r, a, o) {\n    super.init(r, a, o);\n    const n = o.view.renderSpatialReference,\n          c = o.spatialReference,\n          l = e(n) && h(n) && c.isGeographic ? this.ellipsoid.radius * Math.PI / 180 : 1;\n    this.horizontalScaleFactor = l;\n    const m = this.surface.isWebMercatorOnPlateeCarree,\n          p = this.extentInRenderSR,\n          d = this.extent;\n\n    if (m) {\n      const e = t(d[0], d[1], 0);\n      i(e, s.WebMercator, e, s.PlateCarree);\n      const r = t(d[2], d[3], 0);\n      i(r, s.WebMercator, r, s.PlateCarree), p[0] = e[0], p[1] = e[1], p[2] = r[0], p[3] = r[1];\n    } else for (let e = 0; e < 4; ++e) p[e] = d[e] * l;\n\n    this.centerAtSeaLevel[0] = .5 * (p[0] + p[2]), this.centerAtSeaLevel[1] = .5 * (p[1] + p[3]), this.centerAtSeaLevel[2] = 0, this._edgeLen = Math.max(p[2] - p[0], p[3] - p[1]), this._edgeLen2 = this._edgeLen * this._edgeLen, this.updateRadiusAndCenter();\n  }\n\n  updateRadiusAndCenter() {\n    this._updateCenter();\n\n    const e = this.extentInRenderSR,\n          t = .5 * (e[2] - e[0]),\n          r = .5 * (e[3] - e[1]),\n          i = Math.sqrt(t * t + r * r),\n          s = .5 * (this.elevationBounds[0] - this.elevationBounds[1]),\n          a = Math.max(i, s);\n    this._center[d.MIDDLE][3] = a;\n  }\n\n  _isVisible(e) {\n    return n(e, this._aabb());\n  }\n\n  _aabb() {\n    const e = this.extentInRenderSR;\n    return a(e[0], e[1], this.elevationBounds[0], e[2], e[3], this.elevationBounds[1]);\n  }\n\n  intersectsRay(e, t, r, i) {\n    return g[0] = 1 / t[0], g[1] = 1 / t[1], g[2] = 1 / t[2], u(this._aabb(), e, g, r, i);\n  }\n\n  createGeometry() {\n    c(this.renderData, this.horizontalScaleFactor), this.setMemoryDirty();\n  }\n\n  getDefaultVerticesPerRowOnLevel() {\n    return this.level < 9 ? 3 : 2;\n  }\n\n  updateCornerElevations() {\n    l(this.renderData, this.horizontalScaleFactor);\n  }\n\n  updateEdgeElevations() {\n    m(this.renderData, this.horizontalScaleFactor);\n  }\n\n}\n\nconst g = r();\nexport { f as PlanarPatch };","map":{"version":3,"names":["isSome","e","f","t","c","r","projectVectorToVector","i","s","wrap","a","create","o","intersectsAABB","n","isPlateCarree","h","createPlanarGlobePatch","updateCornerElevationsPlanar","l","updateEdgesElevationsAndNormalsPlanar","m","Tile","p","CenterPosition","d","intersectAabbInvDirBefore","u","constructor","horizontalScaleFactor","extentInRenderSR","init","view","renderSpatialReference","spatialReference","isGeographic","ellipsoid","radius","Math","PI","surface","isWebMercatorOnPlateeCarree","extent","WebMercator","PlateCarree","centerAtSeaLevel","_edgeLen","max","_edgeLen2","updateRadiusAndCenter","_updateCenter","sqrt","elevationBounds","_center","MIDDLE","_isVisible","_aabb","intersectsRay","g","createGeometry","renderData","setMemoryDirty","getDefaultVerticesPerRowOnLevel","level","updateCornerElevations","updateEdgeElevations","PlanarPatch"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/PlanarPatch.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{f as t,c as r}from\"../../../chunks/vec3f64.js\";import{projectVectorToVector as i}from\"../../../geometry/projection.js\";import s from\"../../../geometry/SpatialReference.js\";import{wrap as a}from\"../../../geometry/support/aaBoundingBox.js\";import{create as o}from\"../../../geometry/support/aaBoundingRect.js\";import{intersectsAABB as n}from\"../../../geometry/support/frustum.js\";import{isPlateCarree as h}from\"../../../geometry/support/spatialReferenceUtils.js\";import{createPlanarGlobePatch as c,updateCornerElevationsPlanar as l,updateEdgesElevationsAndNormalsPlanar as m}from\"./PatchGeometryFactory.js\";import{Tile as p,CenterPosition as d}from\"./Tile.js\";import{intersectAabbInvDirBefore as u}from\"../webgl-engine/materials/internal/MaterialUtil.js\";class f extends p{constructor(e,t,r){super(),this.horizontalScaleFactor=1,this.extentInRenderSR=o(),void 0!==e&&this.init(e,t,r)}init(r,a,o){super.init(r,a,o);const n=o.view.renderSpatialReference,c=o.spatialReference,l=e(n)&&h(n)&&c.isGeographic?this.ellipsoid.radius*Math.PI/180:1;this.horizontalScaleFactor=l;const m=this.surface.isWebMercatorOnPlateeCarree,p=this.extentInRenderSR,d=this.extent;if(m){const e=t(d[0],d[1],0);i(e,s.WebMercator,e,s.PlateCarree);const r=t(d[2],d[3],0);i(r,s.WebMercator,r,s.PlateCarree),p[0]=e[0],p[1]=e[1],p[2]=r[0],p[3]=r[1]}else for(let e=0;e<4;++e)p[e]=d[e]*l;this.centerAtSeaLevel[0]=.5*(p[0]+p[2]),this.centerAtSeaLevel[1]=.5*(p[1]+p[3]),this.centerAtSeaLevel[2]=0,this._edgeLen=Math.max(p[2]-p[0],p[3]-p[1]),this._edgeLen2=this._edgeLen*this._edgeLen,this.updateRadiusAndCenter()}updateRadiusAndCenter(){this._updateCenter();const e=this.extentInRenderSR,t=.5*(e[2]-e[0]),r=.5*(e[3]-e[1]),i=Math.sqrt(t*t+r*r),s=.5*(this.elevationBounds[0]-this.elevationBounds[1]),a=Math.max(i,s);this._center[d.MIDDLE][3]=a}_isVisible(e){return n(e,this._aabb())}_aabb(){const e=this.extentInRenderSR;return a(e[0],e[1],this.elevationBounds[0],e[2],e[3],this.elevationBounds[1])}intersectsRay(e,t,r,i){return g[0]=1/t[0],g[1]=1/t[1],g[2]=1/t[2],u(this._aabb(),e,g,r,i)}createGeometry(){c(this.renderData,this.horizontalScaleFactor),this.setMemoryDirty()}getDefaultVerticesPerRowOnLevel(){return this.level<9?3:2}updateCornerElevations(){l(this.renderData,this.horizontalScaleFactor)}updateEdgeElevations(){m(this.renderData,this.horizontalScaleFactor)}}const g=r();export{f as PlanarPatch};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}