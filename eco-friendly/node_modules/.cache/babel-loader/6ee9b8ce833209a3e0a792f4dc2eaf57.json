{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/PooledArray.js\";\nimport { isPromiseLike as t, createAbortError as r } from \"../../../../core/promiseUtils.js\";\nimport { union as n } from \"./depthRange.js\";\nimport { RenderSlot as s } from \"./RenderSlot.js\";\n\nclass i {\n  constructor(t) {\n    this.context = t, this._renderPlugins = new e(), this.slots = [];\n\n    for (let e = 0; e < s.MAX_SLOTS; ++e) this.slots[e] = [];\n  }\n\n  add(e, n, s) {\n    const i = () => {\n      if (s?.aborted) throw n.uninitializeRenderContext(), r();\n\n      this._renderPlugins.push(n);\n\n      for (const t of e) this.slots[t].push(n);\n\n      this.context.requestRender();\n    },\n          o = n.initializeRenderContext(this.context, s);\n\n    if (t(o)) return o.then(i);\n    i();\n  }\n\n  remove(e) {\n    if (null != this._renderPlugins.removeUnordered(e)) {\n      for (let t = 0; t < this.slots.length; ++t) this.slots[t] = this.slots[t].filter(t => t !== e);\n\n      e.uninitializeRenderContext(), this.context.requestRender();\n    }\n  }\n\n  prepareRender() {\n    this._renderPlugins.forAll(e => {\n      e.prepareRender && e.prepareRender(this.context.renderContext);\n    });\n  }\n\n  updateAnimation(e) {\n    let t = !1;\n    return this._renderPlugins.forAll(r => {\n      r.updateAnimation && (t = r.updateAnimation(e) || t);\n    }), t;\n  }\n\n  render() {\n    const e = this.slots[this.context.renderContext.bindParameters.slot],\n          t = new Array();\n    e.filter(e => {\n      if (!e.canRender) return !1;\n\n      if (o(e)) {\n        const r = e.prepareTechnique(this.context.renderContext);\n        return !!r && (t.push(r), !0);\n      }\n\n      return t.push(null), !0;\n    }).forEach((e, r) => e.render(this.context.renderContext, t[r]));\n  }\n\n  queryDepthRange(e) {\n    const t = d;\n    return t.near = 1 / 0, t.far = -1 / 0, this._renderPlugins.forAll(r => {\n      if (r.queryDepthRange) {\n        const s = r.queryDepthRange(e);\n        s && n(t, s, t);\n      }\n    }), t;\n  }\n\n  get needsTransparentPass() {\n    return this._renderPlugins.some(e => e.needsTransparentPass);\n  }\n\n  get needsHighlight() {\n    return this._renderPlugins.some(e => e.needsHighlight);\n  }\n\n  get needsLinearDepth() {\n    return this._renderPlugins.some(e => e.needsLinearDepth);\n  }\n\n  get needsLaserlineWithContrastControl() {\n    const e = this.slots[s.LASERLINES_CONTRAST_CONTROL];\n    return !!e && e.length > 0;\n  }\n\n  get renderOccludedFlags() {\n    return this._renderPlugins.reduce((e, t) => e | t.renderOccludedFlags, 0);\n  }\n\n}\n\nfunction o(e) {\n  return \"prepareTechnique\" in e;\n}\n\nconst d = {\n  near: 0,\n  far: 0\n};\nexport { i as RenderPluginManager };","map":{"version":3,"names":["e","isPromiseLike","t","createAbortError","r","union","n","RenderSlot","s","i","constructor","context","_renderPlugins","slots","MAX_SLOTS","add","aborted","uninitializeRenderContext","push","requestRender","o","initializeRenderContext","then","remove","removeUnordered","length","filter","prepareRender","forAll","renderContext","updateAnimation","render","bindParameters","slot","Array","canRender","prepareTechnique","forEach","queryDepthRange","d","near","far","needsTransparentPass","some","needsHighlight","needsLinearDepth","needsLaserlineWithContrastControl","LASERLINES_CONTRAST_CONTROL","renderOccludedFlags","reduce","RenderPluginManager"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderPluginManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";import{isPromiseLike as t,createAbortError as r}from\"../../../../core/promiseUtils.js\";import{union as n}from\"./depthRange.js\";import{RenderSlot as s}from\"./RenderSlot.js\";class i{constructor(t){this.context=t,this._renderPlugins=new e,this.slots=[];for(let e=0;e<s.MAX_SLOTS;++e)this.slots[e]=[]}add(e,n,s){const i=()=>{if(s?.aborted)throw n.uninitializeRenderContext(),r();this._renderPlugins.push(n);for(const t of e)this.slots[t].push(n);this.context.requestRender()},o=n.initializeRenderContext(this.context,s);if(t(o))return o.then(i);i()}remove(e){if(null!=this._renderPlugins.removeUnordered(e)){for(let t=0;t<this.slots.length;++t)this.slots[t]=this.slots[t].filter((t=>t!==e));e.uninitializeRenderContext(),this.context.requestRender()}}prepareRender(){this._renderPlugins.forAll((e=>{e.prepareRender&&e.prepareRender(this.context.renderContext)}))}updateAnimation(e){let t=!1;return this._renderPlugins.forAll((r=>{r.updateAnimation&&(t=r.updateAnimation(e)||t)})),t}render(){const e=this.slots[this.context.renderContext.bindParameters.slot],t=new Array;e.filter((e=>{if(!e.canRender)return!1;if(o(e)){const r=e.prepareTechnique(this.context.renderContext);return!!r&&(t.push(r),!0)}return t.push(null),!0})).forEach(((e,r)=>e.render(this.context.renderContext,t[r])))}queryDepthRange(e){const t=d;return t.near=1/0,t.far=-1/0,this._renderPlugins.forAll((r=>{if(r.queryDepthRange){const s=r.queryDepthRange(e);s&&n(t,s,t)}})),t}get needsTransparentPass(){return this._renderPlugins.some((e=>e.needsTransparentPass))}get needsHighlight(){return this._renderPlugins.some((e=>e.needsHighlight))}get needsLinearDepth(){return this._renderPlugins.some((e=>e.needsLinearDepth))}get needsLaserlineWithContrastControl(){const e=this.slots[s.LASERLINES_CONTRAST_CONTROL];return!!e&&e.length>0}get renderOccludedFlags(){return this._renderPlugins.reduce(((e,t)=>e|t.renderOccludedFlags),0)}}function o(e){return\"prepareTechnique\"in e}const d={near:0,far:0};export{i as RenderPluginManager};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}