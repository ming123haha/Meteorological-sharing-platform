{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { s as t, m as s } from \"../../../../chunks/mat3.js\";\nimport { c as e } from \"../../../../chunks/mat3f32.js\";\nimport { RasterVFDisplayObject as i } from \"./RasterVFDisplayObject.js\";\nimport { TiledDisplayObject as a } from \"../webgl/TiledDisplayObject.js\";\n\nclass r extends a {\n  constructor(t, s, e, a, r, o, l = null) {\n    super(t, s, e, a, r, o), this.tileData = new i(l), this.tileData.coordScale = [r, o], this.tileData.once(\"isReady\", () => this.ready());\n  }\n\n  destroy() {\n    super.destroy(), this.tileData.destroy(), this.tileData = null, this.stage = null;\n  }\n\n  set stencilRef(t) {\n    this.tileData.stencilRef = t;\n  }\n\n  get stencilRef() {\n    return this.tileData.stencilRef;\n  }\n\n  _createTransforms() {\n    return {\n      dvs: e(),\n      tileMat3: e()\n    };\n  }\n\n  setTransform(e) {\n    super.setTransform(e);\n    const i = this.resolution / (e.resolution * e.pixelRatio),\n          a = this.transforms.tileMat3,\n          [r, o] = this.tileData.offset,\n          l = [this.x + r * this.resolution, this.y - o * this.resolution],\n          [h, n] = e.toScreenNoRotation([0, 0], l),\n          {\n      symbolTileSize: f\n    } = this.tileData.symbolizerParameters,\n          m = Math.round((this.width - this.tileData.offset[0]) / f) * f,\n          c = Math.round((this.height - this.tileData.offset[1]) / f) * f,\n          u = m / this.rangeX * i,\n          D = c / this.rangeY * i;\n    t(a, u, 0, 0, 0, D, 0, h, n, 1), s(this.transforms.dvs, e.displayViewMat3, a), this.tileData.transforms.dvs = this.transforms.dvs;\n  }\n\n  onAttach() {\n    this.tileData.stage = this.stage;\n  }\n\n  onDetach() {\n    this.tileData.stage = null;\n  }\n\n}\n\nexport { r as RasterVFTile };","map":{"version":3,"names":["s","t","m","c","e","RasterVFDisplayObject","i","TiledDisplayObject","a","r","constructor","o","l","tileData","coordScale","once","ready","destroy","stage","stencilRef","_createTransforms","dvs","tileMat3","setTransform","resolution","pixelRatio","transforms","offset","x","y","h","n","toScreenNoRotation","symbolTileSize","f","symbolizerParameters","Math","round","width","height","u","rangeX","D","rangeY","displayViewMat3","onAttach","onDetach","RasterVFTile"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/imagery/RasterVFTile.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../../chunks/mat3.js\";import{c as e}from\"../../../../chunks/mat3f32.js\";import{RasterVFDisplayObject as i}from\"./RasterVFDisplayObject.js\";import{TiledDisplayObject as a}from\"../webgl/TiledDisplayObject.js\";class r extends a{constructor(t,s,e,a,r,o,l=null){super(t,s,e,a,r,o),this.tileData=new i(l),this.tileData.coordScale=[r,o],this.tileData.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.tileData.destroy(),this.tileData=null,this.stage=null}set stencilRef(t){this.tileData.stencilRef=t}get stencilRef(){return this.tileData.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e){super.setTransform(e);const i=this.resolution/(e.resolution*e.pixelRatio),a=this.transforms.tileMat3,[r,o]=this.tileData.offset,l=[this.x+r*this.resolution,this.y-o*this.resolution],[h,n]=e.toScreenNoRotation([0,0],l),{symbolTileSize:f}=this.tileData.symbolizerParameters,m=Math.round((this.width-this.tileData.offset[0])/f)*f,c=Math.round((this.height-this.tileData.offset[1])/f)*f,u=m/this.rangeX*i,D=c/this.rangeY*i;t(a,u,0,0,0,D,0,h,n,1),s(this.transforms.dvs,e.displayViewMat3,a),this.tileData.transforms.dvs=this.transforms.dvs}onAttach(){this.tileData.stage=this.stage}onDetach(){this.tileData.stage=null}}export{r as RasterVFTile};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}