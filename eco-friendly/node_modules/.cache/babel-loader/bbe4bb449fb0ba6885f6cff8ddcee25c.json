{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { WhereClauseCache as i } from \"../../../core/sql/WhereClauseCache.js\";\nconst s = new i(50, 500),\n      n = \"feature-store:unsupported-query\",\n      t = \" as \",\n      r = new Set([\"esriFieldTypeOID\", \"esriFieldTypeSmallInteger\", \"esriFieldTypeInteger\", \"esriFieldTypeSingle\", \"esriFieldTypeDouble\", \"esriFieldTypeLong\", \"esriFieldTypeDate\"]);\n\nfunction o(i, t) {\n  if (!t) return !0;\n  const r = s.get(t, i);\n  if (!r) throw new e(n, \"invalid SQL expression\", {\n    where: t\n  });\n  if (!r.isStandardized) throw new e(n, \"where clause is not standard\", {\n    where: t\n  });\n  return c(i, r.fieldNames, \"where clause contains missing fields\"), !0;\n}\n\nfunction a(i, t, r) {\n  if (!t) return !0;\n  const o = s.get(t, i);\n  if (!o) throw new e(n, \"invalid SQL expression\", {\n    having: t\n  });\n  if (!o.isAggregate) throw new e(n, \"having does not contain a valid aggregate function\", {\n    having: t\n  });\n  const a = o.fieldNames;\n  c(i, a, \"having contains missing fields\");\n  if (!o.getExpressions().every(e => {\n    const {\n      aggregateType: s,\n      field: n\n    } = e,\n          t = i.has(n) && i.get(n).name;\n    return r.some(e => {\n      const {\n        onStatisticField: n,\n        statisticType: r\n      } = e;\n      return (i.has(n) && i.get(n).name) === t && r.toLowerCase().trim() === s;\n    });\n  })) throw new e(n, \"expressions in having should also exist in outStatistics\", {\n    having: t\n  });\n  return !0;\n}\n\nfunction l(e, i) {\n  return e ? s.get(e, i) : null;\n}\n\nfunction c(i, s, t, r = !0) {\n  const o = [];\n\n  for (const u of s) if (\"*\" !== u && !i.has(u)) if (r) {\n    const s = d(u);\n\n    try {\n      const t = l(s, i);\n      if (!t) throw new e(n, \"invalid SQL expression\", {\n        where: s\n      });\n      if (!t.isStandardized) throw new e(n, \"expression is not standard\", {\n        clause: t\n      });\n      c(i, t.fieldNames, \"expression contains missing fields\");\n    } catch (a) {\n      const e = a && a.details;\n      if (e && (e.clause || e.where)) throw a;\n      e && e.missingFields ? o.push(...e.missingFields) : o.push(u);\n    }\n  } else o.push(u);\n\n  if (o.length) throw new e(n, t, {\n    missingFields: o\n  });\n}\n\nfunction d(e) {\n  return e.split(t)[0];\n}\n\nfunction u(e) {\n  return e.split(t)[1];\n}\n\nfunction f(e, i) {\n  const s = i.get(e);\n  return !!s && !r.has(s.type);\n}\n\nexport { u as getAliasFromFieldName, d as getExpressionFromFieldName, l as getWhereClause, f as hasInvalidFieldType, c as validateFields, a as validateHaving, o as validateWhere };","map":{"version":3,"names":["e","WhereClauseCache","i","s","n","t","r","Set","o","get","where","isStandardized","c","fieldNames","a","having","isAggregate","getExpressions","every","aggregateType","field","has","name","some","onStatisticField","statisticType","toLowerCase","trim","l","u","d","clause","details","missingFields","push","length","split","f","type","getAliasFromFieldName","getExpressionFromFieldName","getWhereClause","hasInvalidFieldType","validateFields","validateHaving","validateWhere"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{WhereClauseCache as i}from\"../../../core/sql/WhereClauseCache.js\";const s=new i(50,500),n=\"feature-store:unsupported-query\",t=\" as \",r=new Set([\"esriFieldTypeOID\",\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeLong\",\"esriFieldTypeDate\"]);function o(i,t){if(!t)return!0;const r=s.get(t,i);if(!r)throw new e(n,\"invalid SQL expression\",{where:t});if(!r.isStandardized)throw new e(n,\"where clause is not standard\",{where:t});return c(i,r.fieldNames,\"where clause contains missing fields\"),!0}function a(i,t,r){if(!t)return!0;const o=s.get(t,i);if(!o)throw new e(n,\"invalid SQL expression\",{having:t});if(!o.isAggregate)throw new e(n,\"having does not contain a valid aggregate function\",{having:t});const a=o.fieldNames;c(i,a,\"having contains missing fields\");if(!o.getExpressions().every((e=>{const{aggregateType:s,field:n}=e,t=i.has(n)&&i.get(n).name;return r.some((e=>{const{onStatisticField:n,statisticType:r}=e;return(i.has(n)&&i.get(n).name)===t&&r.toLowerCase().trim()===s}))})))throw new e(n,\"expressions in having should also exist in outStatistics\",{having:t});return!0}function l(e,i){return e?s.get(e,i):null}function c(i,s,t,r=!0){const o=[];for(const u of s)if(\"*\"!==u&&!i.has(u))if(r){const s=d(u);try{const t=l(s,i);if(!t)throw new e(n,\"invalid SQL expression\",{where:s});if(!t.isStandardized)throw new e(n,\"expression is not standard\",{clause:t});c(i,t.fieldNames,\"expression contains missing fields\")}catch(a){const e=a&&a.details;if(e&&(e.clause||e.where))throw a;e&&e.missingFields?o.push(...e.missingFields):o.push(u)}}else o.push(u);if(o.length)throw new e(n,t,{missingFields:o})}function d(e){return e.split(t)[0]}function u(e){return e.split(t)[1]}function f(e,i){const s=i.get(e);return!!s&&!r.has(s.type)}export{u as getAliasFromFieldName,d as getExpressionFromFieldName,l as getWhereClause,f as hasInvalidFieldType,c as validateFields,a as validateHaving,o as validateWhere};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,wBAAb;AAAsC,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,uCAAjC;AAAyE,MAAMC,CAAC,GAAC,IAAID,CAAJ,CAAM,EAAN,EAAS,GAAT,CAAR;AAAA,MAAsBE,CAAC,GAAC,iCAAxB;AAAA,MAA0DC,CAAC,GAAC,MAA5D;AAAA,MAAmEC,CAAC,GAAC,IAAIC,GAAJ,CAAQ,CAAC,kBAAD,EAAoB,2BAApB,EAAgD,sBAAhD,EAAuE,qBAAvE,EAA6F,qBAA7F,EAAmH,mBAAnH,EAAuI,mBAAvI,CAAR,CAArE;;AAA0O,SAASC,CAAT,CAAWN,CAAX,EAAaG,CAAb,EAAe;EAAC,IAAG,CAACA,CAAJ,EAAM,OAAM,CAAC,CAAP;EAAS,MAAMC,CAAC,GAACH,CAAC,CAACM,GAAF,CAAMJ,CAAN,EAAQH,CAAR,CAAR;EAAmB,IAAG,CAACI,CAAJ,EAAM,MAAM,IAAIN,CAAJ,CAAMI,CAAN,EAAQ,wBAAR,EAAiC;IAACM,KAAK,EAACL;EAAP,CAAjC,CAAN;EAAkD,IAAG,CAACC,CAAC,CAACK,cAAN,EAAqB,MAAM,IAAIX,CAAJ,CAAMI,CAAN,EAAQ,8BAAR,EAAuC;IAACM,KAAK,EAACL;EAAP,CAAvC,CAAN;EAAwD,OAAOO,CAAC,CAACV,CAAD,EAAGI,CAAC,CAACO,UAAL,EAAgB,sCAAhB,CAAD,EAAyD,CAAC,CAAjE;AAAmE;;AAAA,SAASC,CAAT,CAAWZ,CAAX,EAAaG,CAAb,EAAeC,CAAf,EAAiB;EAAC,IAAG,CAACD,CAAJ,EAAM,OAAM,CAAC,CAAP;EAAS,MAAMG,CAAC,GAACL,CAAC,CAACM,GAAF,CAAMJ,CAAN,EAAQH,CAAR,CAAR;EAAmB,IAAG,CAACM,CAAJ,EAAM,MAAM,IAAIR,CAAJ,CAAMI,CAAN,EAAQ,wBAAR,EAAiC;IAACW,MAAM,EAACV;EAAR,CAAjC,CAAN;EAAmD,IAAG,CAACG,CAAC,CAACQ,WAAN,EAAkB,MAAM,IAAIhB,CAAJ,CAAMI,CAAN,EAAQ,oDAAR,EAA6D;IAACW,MAAM,EAACV;EAAR,CAA7D,CAAN;EAA+E,MAAMS,CAAC,GAACN,CAAC,CAACK,UAAV;EAAqBD,CAAC,CAACV,CAAD,EAAGY,CAAH,EAAK,gCAAL,CAAD;EAAwC,IAAG,CAACN,CAAC,CAACS,cAAF,GAAmBC,KAAnB,CAA0BlB,CAAC,IAAE;IAAC,MAAK;MAACmB,aAAa,EAAChB,CAAf;MAAiBiB,KAAK,EAAChB;IAAvB,IAA0BJ,CAA/B;IAAA,MAAiCK,CAAC,GAACH,CAAC,CAACmB,GAAF,CAAMjB,CAAN,KAAUF,CAAC,CAACO,GAAF,CAAML,CAAN,EAASkB,IAAtD;IAA2D,OAAOhB,CAAC,CAACiB,IAAF,CAAQvB,CAAC,IAAE;MAAC,MAAK;QAACwB,gBAAgB,EAACpB,CAAlB;QAAoBqB,aAAa,EAACnB;MAAlC,IAAqCN,CAA1C;MAA4C,OAAM,CAACE,CAAC,CAACmB,GAAF,CAAMjB,CAAN,KAAUF,CAAC,CAACO,GAAF,CAAML,CAAN,EAASkB,IAApB,MAA4BjB,CAA5B,IAA+BC,CAAC,CAACoB,WAAF,GAAgBC,IAAhB,OAAyBxB,CAA9D;IAAgE,CAAxH,CAAP;EAAkI,CAA3N,CAAJ,EAAkO,MAAM,IAAIH,CAAJ,CAAMI,CAAN,EAAQ,0DAAR,EAAmE;IAACW,MAAM,EAACV;EAAR,CAAnE,CAAN;EAAqF,OAAM,CAAC,CAAP;AAAS;;AAAA,SAASuB,CAAT,CAAW5B,CAAX,EAAaE,CAAb,EAAe;EAAC,OAAOF,CAAC,GAACG,CAAC,CAACM,GAAF,CAAMT,CAAN,EAAQE,CAAR,CAAD,GAAY,IAApB;AAAyB;;AAAA,SAASU,CAAT,CAAWV,CAAX,EAAaC,CAAb,EAAeE,CAAf,EAAiBC,CAAC,GAAC,CAAC,CAApB,EAAsB;EAAC,MAAME,CAAC,GAAC,EAAR;;EAAW,KAAI,MAAMqB,CAAV,IAAe1B,CAAf,EAAiB,IAAG,QAAM0B,CAAN,IAAS,CAAC3B,CAAC,CAACmB,GAAF,CAAMQ,CAAN,CAAb,EAAsB,IAAGvB,CAAH,EAAK;IAAC,MAAMH,CAAC,GAAC2B,CAAC,CAACD,CAAD,CAAT;;IAAa,IAAG;MAAC,MAAMxB,CAAC,GAACuB,CAAC,CAACzB,CAAD,EAAGD,CAAH,CAAT;MAAe,IAAG,CAACG,CAAJ,EAAM,MAAM,IAAIL,CAAJ,CAAMI,CAAN,EAAQ,wBAAR,EAAiC;QAACM,KAAK,EAACP;MAAP,CAAjC,CAAN;MAAkD,IAAG,CAACE,CAAC,CAACM,cAAN,EAAqB,MAAM,IAAIX,CAAJ,CAAMI,CAAN,EAAQ,4BAAR,EAAqC;QAAC2B,MAAM,EAAC1B;MAAR,CAArC,CAAN;MAAuDO,CAAC,CAACV,CAAD,EAAGG,CAAC,CAACQ,UAAL,EAAgB,oCAAhB,CAAD;IAAuD,CAA9M,CAA8M,OAAMC,CAAN,EAAQ;MAAC,MAAMd,CAAC,GAACc,CAAC,IAAEA,CAAC,CAACkB,OAAb;MAAqB,IAAGhC,CAAC,KAAGA,CAAC,CAAC+B,MAAF,IAAU/B,CAAC,CAACU,KAAf,CAAJ,EAA0B,MAAMI,CAAN;MAAQd,CAAC,IAAEA,CAAC,CAACiC,aAAL,GAAmBzB,CAAC,CAAC0B,IAAF,CAAO,GAAGlC,CAAC,CAACiC,aAAZ,CAAnB,GAA8CzB,CAAC,CAAC0B,IAAF,CAAOL,CAAP,CAA9C;IAAwD;EAAC,CAA1V,MAA+VrB,CAAC,CAAC0B,IAAF,CAAOL,CAAP;;EAAU,IAAGrB,CAAC,CAAC2B,MAAL,EAAY,MAAM,IAAInC,CAAJ,CAAMI,CAAN,EAAQC,CAAR,EAAU;IAAC4B,aAAa,EAACzB;EAAf,CAAV,CAAN;AAAmC;;AAAA,SAASsB,CAAT,CAAW9B,CAAX,EAAa;EAAC,OAAOA,CAAC,CAACoC,KAAF,CAAQ/B,CAAR,EAAW,CAAX,CAAP;AAAqB;;AAAA,SAASwB,CAAT,CAAW7B,CAAX,EAAa;EAAC,OAAOA,CAAC,CAACoC,KAAF,CAAQ/B,CAAR,EAAW,CAAX,CAAP;AAAqB;;AAAA,SAASgC,CAAT,CAAWrC,CAAX,EAAaE,CAAb,EAAe;EAAC,MAAMC,CAAC,GAACD,CAAC,CAACO,GAAF,CAAMT,CAAN,CAAR;EAAiB,OAAM,CAAC,CAACG,CAAF,IAAK,CAACG,CAAC,CAACe,GAAF,CAAMlB,CAAC,CAACmC,IAAR,CAAZ;AAA0B;;AAAA,SAAOT,CAAC,IAAIU,qBAAZ,EAAkCT,CAAC,IAAIU,0BAAvC,EAAkEZ,CAAC,IAAIa,cAAvE,EAAsFJ,CAAC,IAAIK,mBAA3F,EAA+G9B,CAAC,IAAI+B,cAApH,EAAmI7B,CAAC,IAAI8B,cAAxI,EAAuJpC,CAAC,IAAIqC,aAA5J"},"metadata":{},"sourceType":"module"}