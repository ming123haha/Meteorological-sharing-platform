{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Logger.js\";\nimport { disposeMaybe as r, releaseMaybe as t, isNone as i, isSome as o } from \"../../../core/maybe.js\";\nimport { Z as s } from \"../../../chunks/vec2f64.js\";\nimport { RasterColorizerStretchType as n } from \"../../2d/engine/imagery/enums.js\";\nimport { VectorTileRendererHelper3D as l } from \"../../2d/engine/vectorTiles/VectorTileRendererHelper3D.js\";\nimport { BlendLayersTechniqueConfiguration as a, BlendLayersTechnique as h } from \"./BlendLayersTechnique.js\";\nimport { LayerClass as c } from \"./LayerClass.js\";\nimport { RasterColorizerTechniqueConfiguration as u, RasterColorizerTechnique as _ } from \"./RasterColorizerTechnique.js\";\nimport { FBOPool as d } from \"./support/FBOPool.js\";\nimport { LayerBlendMode as b } from \"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";\nimport { TileBlendInput as f } from \"../webgl-engine/core/shaderLibrary/terrain/TileBlendInput.js\";\nimport { B as p, a as T } from \"../../../chunks/BlendLayers.glsl.js\";\nimport { BindParameters as m } from \"../webgl-engine/lib/BindParameters.js\";\nimport { Pos2Tex as y } from \"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";\nimport { createQuadVAO as g } from \"../webgl-engine/lib/glUtil3D.js\";\nimport { PrimitiveType as B, ClearBufferBit as C, TextureType as x } from \"../../webgl/enums.js\";\nimport { Texture as O } from \"../../webgl/Texture.js\";\nimport { vertexCount as F } from \"../../webgl/Util.js\";\nconst q = e.getLogger(\"esri.views.3d.terrain\");\n\nclass L {\n  constructor(e, r) {\n    this._rctx = e, this._techniqueRepository = r, this._fboPools = [], this._doubleBufferFbo = [], this._vectorTileHelper = new l(), this._bindParameters = new m(null, null, null), this._blendLayersTechniqueConfig = new a(), this._poolToWrite = 0, this._vaoQuad = g(this._rctx, y), this._fboPools.push(new d(this._rctx)), this._fboPools.push(new d(this._rctx));\n  }\n\n  dispose() {\n    this._fboPools.forEach(e => {\n      e.clear(), e = null;\n    }), this._fboPools = null, this._doubleBufferFbo.forEach(e => r(e)), this._vaoQuad = r(this._vaoQuad), this._vectorTileHelper = r(this._vectorTileHelper), this._backgroundTechnique = t(this._backgroundTechnique), this._applyOpacityTechnique = t(this._applyOpacityTechnique), this._blendLayersTechnique = t(this._blendLayersTechnique);\n  }\n\n  _getBlendLayersTechnique(e, r, t, i = !1) {\n    return this._blendLayersTechniqueConfig.output = r, this._blendLayersTechniqueConfig.blendMode = e, this._blendLayersTechniqueConfig.baseOpacityMode = t ? r === p.Composite ? T.OnBaseLayer : T.OnBackground : T.One, this._blendLayersTechniqueConfig.premultipliedSource = i, this._blendLayersTechnique = this._techniqueRepository.releaseAndAcquire(h, this._blendLayersTechniqueConfig, this._blendLayersTechnique), this._blendLayersTechnique;\n  }\n\n  drawBackground(e, r) {\n    const t = this._getBlendLayersTechnique(b.Normal, r, !1),\n          i = this._rctx.bindTechnique(t, e, this._bindParameters);\n\n    this._render(i);\n  }\n\n  _render(e) {\n    this._rctx.bindVAO(this._vaoQuad), e.assertCompatibleVertexAttributeLocations(this._vaoQuad), this._rctx.drawArrays(B.TRIANGLE_STRIP, 0, F(this._vaoQuad, \"geometry\"));\n  }\n\n  drawRasterData(e, r, t = !1) {\n    if (i(r.texture)) return;\n    const o = r.baseOpacity < 1;\n    r.blendMode !== b.Normal || o || t ? (r.fboTexture = this._currentFBO.colorTexture, this._switchPool(this._currentFBO.width)) : r.fboTexture = null;\n\n    const s = this._getBlendLayersTechnique(r.blendMode, e, o, t),\n          n = this._rctx.bindTechnique(s, r, this._bindParameters);\n\n    this._render(n);\n  }\n\n  drawImageryTileData(e, r, t) {\n    const i = e.sourceLayerInfo.data;\n    if (!i.source) return;\n    e.tile.surface.layerViewByIndex(e.layerIndex, c.MAP).ensureSymbolizerParameters(i);\n    const o = t.baseOpacity < 1;\n    t.blendMode !== b.Normal || o ? (t.fboTexture = this._currentFBO.colorTexture, this._switchPool(this._currentFBO.width)) : t.fboTexture = null;\n\n    const s = this._getRasterColorizerTechnique(i, r, t.blendMode, o),\n          n = this._rctx.bindTechnique(s);\n\n    if (!i.bind(this._rctx)) return;\n    i.opacity = t.opacity;\n    const l = i.getUniforms();\n    l.scale = e.scale, l.offset = e.offset, l.backgroundColor = t.backgroundColor, l.fboTexture = t.fboTexture, l.baseOpacity = t.baseOpacity, s.bindPass(l, null), this._render(n);\n  }\n\n  _getRasterColorizerTechnique(e, r, t, o) {\n    const s = e.symbolizerParameters,\n          l = [\"stretch\", \"lut\", \"hillshade\"].indexOf(s.type);\n    return i(this._rasterColorizerConfig) && (this._rasterColorizerConfig = new u(), this._rctx.gl.getExtension(\"WEBGL_color_buffer_float\"), this._rctx.gl.getExtension(\"OES_texture_float\")), this._rasterColorizerConfig.tileBlendInput = r === p.ColorComposite ? f.ColorComposite : r === p.GridComposite ? f.GridComposite : f.LayerOnly, this._rasterColorizerConfig.blendMode = t, this._rasterColorizerConfig.baseOpacityMode = o ? r === p.Composite ? T.OnBaseLayer : T.OnBackground : T.One, this._rasterColorizerConfig.colorizerType = l, this._rasterColorizerConfig.applyColormap = !!s.colormap, this._rasterColorizerConfig.stretchType = e.hasStretchTypeNone() ? n.Noop : n.PerBand, this._rasterColorizerTechnique = this._techniqueRepository.releaseAndAcquire(_, this._rasterColorizerConfig, this._rasterColorizerTechnique), this._rasterColorizerTechnique;\n  }\n\n  drawVectorData(e, r, t, i, n, l, a) {\n    const h = this._rctx,\n          u = r.sourceLayerInfo.data,\n          _ = r.tile.surface.layerViewByIndex(r.layerIndex, c.MAP),\n          d = e.baseOpacity < 1 || e.opacity < 1 || e.blendMode !== b.Normal || a !== p.Composite;\n\n    let f;\n    this._getBlendLayersTechnique(e.blendMode, a, e.baseOpacity < 1, d).bindPipelineState(h), d ? (f = this._acquire(n), h.bindFramebuffer(f), h.setClearColor(0, 0, 0, 0), h.clearSafe(C.COLOR_BUFFER_BIT | C.DEPTH_BUFFER_BIT)) : l && h.clearSafe(C.DEPTH_BUFFER_BIT);\n\n    try {\n      this._vectorTileHelper.render(h, r.sourceLod, u, _.painter, _.layer.styleRepository, _.schemaHelper, Math.round(1 / r.scale), r.offset, i, t);\n    } catch (T) {\n      q.warnOnce(\"A render call containing vector tiles did not resolve correctly.\", T);\n    }\n\n    return !o(f) || (h.bindFramebuffer(this._currentFBO), e.texture = f.colorTexture, e.offset = s, e.scale = 1, this.drawRasterData(a, e, d), f.release(), l);\n  }\n\n  copyFBOToTexture(e) {\n    const r = this._rctx,\n          t = r.bindTexture(e.texture, O.TEXTURE_UNIT_FOR_UPDATES),\n          i = e.descriptor;\n    r.gl.copyTexImage2D(x.TEXTURE_2D, 0, i.pixelFormat, 0, 0, i.width, i.height, 0), e.generateMipmap(), r.bindTexture(t, O.TEXTURE_UNIT_FOR_UPDATES);\n  }\n\n  _initFBO(e, r) {\n    this._rctx.bindFramebuffer(e), this._rctx.setViewport(0, 0, r, r), this._rctx.setClearColor(0, 0, 0, 0), this._rctx.setClearDepth(1), this._rctx.clearSafe(C.COLOR_BUFFER_BIT | C.DEPTH_BUFFER_BIT);\n  }\n\n  _acquire(e) {\n    return this._fboPools[this._poolToWrite].acquire(e);\n  }\n\n  bindPool(e, r) {\n    this._poolToWrite = e, null == this._doubleBufferFbo[e] && (this._doubleBufferFbo[e] = this._acquire(r), this._initFBO(this._doubleBufferFbo[e], r));\n  }\n\n  _switchPool(e) {\n    this._releaseCurrentFBO(), this._doubleBufferFbo[this._poolToWrite] = null, this._poolToWrite = 0 === this._poolToWrite ? 1 : 0, this.bindPool(this._poolToWrite, e);\n  }\n\n  get _currentFBO() {\n    return this._doubleBufferFbo[this._poolToWrite];\n  }\n\n  _releaseCurrentFBO() {\n    this._doubleBufferFbo[this._poolToWrite].release(), this._doubleBufferFbo[this._poolToWrite] = null;\n  }\n\n  releasePool() {\n    this._rctx.bindFramebuffer(null), this._releaseCurrentFBO();\n  }\n\n  cleanupFBOPool(e, r) {\n    e === this._lastPixelRatio && r === this._lastNumLayers || (this._fboPools.forEach(e => e.clear()), this._lastPixelRatio = e, this._lastNumLayers = r);\n  }\n\n}\n\nexport { L as TileCompositor };","map":{"version":3,"names":["e","disposeMaybe","r","releaseMaybe","t","isNone","i","isSome","o","Z","s","RasterColorizerStretchType","n","VectorTileRendererHelper3D","l","BlendLayersTechniqueConfiguration","a","BlendLayersTechnique","h","LayerClass","c","RasterColorizerTechniqueConfiguration","u","RasterColorizerTechnique","_","FBOPool","d","LayerBlendMode","b","TileBlendInput","f","B","p","T","BindParameters","m","Pos2Tex","y","createQuadVAO","g","PrimitiveType","ClearBufferBit","C","TextureType","x","Texture","O","vertexCount","F","q","getLogger","L","constructor","_rctx","_techniqueRepository","_fboPools","_doubleBufferFbo","_vectorTileHelper","_bindParameters","_blendLayersTechniqueConfig","_poolToWrite","_vaoQuad","push","dispose","forEach","clear","_backgroundTechnique","_applyOpacityTechnique","_blendLayersTechnique","_getBlendLayersTechnique","output","blendMode","baseOpacityMode","Composite","OnBaseLayer","OnBackground","One","premultipliedSource","releaseAndAcquire","drawBackground","Normal","bindTechnique","_render","bindVAO","assertCompatibleVertexAttributeLocations","drawArrays","TRIANGLE_STRIP","drawRasterData","texture","baseOpacity","fboTexture","_currentFBO","colorTexture","_switchPool","width","drawImageryTileData","sourceLayerInfo","data","source","tile","surface","layerViewByIndex","layerIndex","MAP","ensureSymbolizerParameters","_getRasterColorizerTechnique","bind","opacity","getUniforms","scale","offset","backgroundColor","bindPass","symbolizerParameters","indexOf","type","_rasterColorizerConfig","gl","getExtension","tileBlendInput","ColorComposite","GridComposite","LayerOnly","colorizerType","applyColormap","colormap","stretchType","hasStretchTypeNone","Noop","PerBand","_rasterColorizerTechnique","drawVectorData","bindPipelineState","_acquire","bindFramebuffer","setClearColor","clearSafe","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","render","sourceLod","painter","layer","styleRepository","schemaHelper","Math","round","warnOnce","release","copyFBOToTexture","bindTexture","TEXTURE_UNIT_FOR_UPDATES","descriptor","copyTexImage2D","TEXTURE_2D","pixelFormat","height","generateMipmap","_initFBO","setViewport","setClearDepth","acquire","bindPool","_releaseCurrentFBO","releasePool","cleanupFBOPool","_lastPixelRatio","_lastNumLayers","TileCompositor"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/TileCompositor.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import{disposeMaybe as r,releaseMaybe as t,isNone as i,isSome as o}from\"../../../core/maybe.js\";import{Z as s}from\"../../../chunks/vec2f64.js\";import{RasterColorizerStretchType as n}from\"../../2d/engine/imagery/enums.js\";import{VectorTileRendererHelper3D as l}from\"../../2d/engine/vectorTiles/VectorTileRendererHelper3D.js\";import{BlendLayersTechniqueConfiguration as a,BlendLayersTechnique as h}from\"./BlendLayersTechnique.js\";import{LayerClass as c}from\"./LayerClass.js\";import{RasterColorizerTechniqueConfiguration as u,RasterColorizerTechnique as _}from\"./RasterColorizerTechnique.js\";import{FBOPool as d}from\"./support/FBOPool.js\";import{LayerBlendMode as b}from\"../webgl-engine/core/shaderLibrary/output/BlendOptions.js\";import{TileBlendInput as f}from\"../webgl-engine/core/shaderLibrary/terrain/TileBlendInput.js\";import{B as p,a as T}from\"../../../chunks/BlendLayers.glsl.js\";import{BindParameters as m}from\"../webgl-engine/lib/BindParameters.js\";import{Pos2Tex as y}from\"../webgl-engine/lib/DefaultVertexBufferLayouts.js\";import{createQuadVAO as g}from\"../webgl-engine/lib/glUtil3D.js\";import{PrimitiveType as B,ClearBufferBit as C,TextureType as x}from\"../../webgl/enums.js\";import{Texture as O}from\"../../webgl/Texture.js\";import{vertexCount as F}from\"../../webgl/Util.js\";const q=e.getLogger(\"esri.views.3d.terrain\");class L{constructor(e,r){this._rctx=e,this._techniqueRepository=r,this._fboPools=[],this._doubleBufferFbo=[],this._vectorTileHelper=new l,this._bindParameters=new m(null,null,null),this._blendLayersTechniqueConfig=new a,this._poolToWrite=0,this._vaoQuad=g(this._rctx,y),this._fboPools.push(new d(this._rctx)),this._fboPools.push(new d(this._rctx))}dispose(){this._fboPools.forEach((e=>{e.clear(),e=null})),this._fboPools=null,this._doubleBufferFbo.forEach((e=>r(e))),this._vaoQuad=r(this._vaoQuad),this._vectorTileHelper=r(this._vectorTileHelper),this._backgroundTechnique=t(this._backgroundTechnique),this._applyOpacityTechnique=t(this._applyOpacityTechnique),this._blendLayersTechnique=t(this._blendLayersTechnique)}_getBlendLayersTechnique(e,r,t,i=!1){return this._blendLayersTechniqueConfig.output=r,this._blendLayersTechniqueConfig.blendMode=e,this._blendLayersTechniqueConfig.baseOpacityMode=t?r===p.Composite?T.OnBaseLayer:T.OnBackground:T.One,this._blendLayersTechniqueConfig.premultipliedSource=i,this._blendLayersTechnique=this._techniqueRepository.releaseAndAcquire(h,this._blendLayersTechniqueConfig,this._blendLayersTechnique),this._blendLayersTechnique}drawBackground(e,r){const t=this._getBlendLayersTechnique(b.Normal,r,!1),i=this._rctx.bindTechnique(t,e,this._bindParameters);this._render(i)}_render(e){this._rctx.bindVAO(this._vaoQuad),e.assertCompatibleVertexAttributeLocations(this._vaoQuad),this._rctx.drawArrays(B.TRIANGLE_STRIP,0,F(this._vaoQuad,\"geometry\"))}drawRasterData(e,r,t=!1){if(i(r.texture))return;const o=r.baseOpacity<1;r.blendMode!==b.Normal||o||t?(r.fboTexture=this._currentFBO.colorTexture,this._switchPool(this._currentFBO.width)):r.fboTexture=null;const s=this._getBlendLayersTechnique(r.blendMode,e,o,t),n=this._rctx.bindTechnique(s,r,this._bindParameters);this._render(n)}drawImageryTileData(e,r,t){const i=e.sourceLayerInfo.data;if(!i.source)return;e.tile.surface.layerViewByIndex(e.layerIndex,c.MAP).ensureSymbolizerParameters(i);const o=t.baseOpacity<1;t.blendMode!==b.Normal||o?(t.fboTexture=this._currentFBO.colorTexture,this._switchPool(this._currentFBO.width)):t.fboTexture=null;const s=this._getRasterColorizerTechnique(i,r,t.blendMode,o),n=this._rctx.bindTechnique(s);if(!i.bind(this._rctx))return;i.opacity=t.opacity;const l=i.getUniforms();l.scale=e.scale,l.offset=e.offset,l.backgroundColor=t.backgroundColor,l.fboTexture=t.fboTexture,l.baseOpacity=t.baseOpacity,s.bindPass(l,null),this._render(n)}_getRasterColorizerTechnique(e,r,t,o){const s=e.symbolizerParameters,l=[\"stretch\",\"lut\",\"hillshade\"].indexOf(s.type);return i(this._rasterColorizerConfig)&&(this._rasterColorizerConfig=new u,this._rctx.gl.getExtension(\"WEBGL_color_buffer_float\"),this._rctx.gl.getExtension(\"OES_texture_float\")),this._rasterColorizerConfig.tileBlendInput=r===p.ColorComposite?f.ColorComposite:r===p.GridComposite?f.GridComposite:f.LayerOnly,this._rasterColorizerConfig.blendMode=t,this._rasterColorizerConfig.baseOpacityMode=o?r===p.Composite?T.OnBaseLayer:T.OnBackground:T.One,this._rasterColorizerConfig.colorizerType=l,this._rasterColorizerConfig.applyColormap=!!s.colormap,this._rasterColorizerConfig.stretchType=e.hasStretchTypeNone()?n.Noop:n.PerBand,this._rasterColorizerTechnique=this._techniqueRepository.releaseAndAcquire(_,this._rasterColorizerConfig,this._rasterColorizerTechnique),this._rasterColorizerTechnique}drawVectorData(e,r,t,i,n,l,a){const h=this._rctx,u=r.sourceLayerInfo.data,_=r.tile.surface.layerViewByIndex(r.layerIndex,c.MAP),d=e.baseOpacity<1||e.opacity<1||e.blendMode!==b.Normal||a!==p.Composite;let f;this._getBlendLayersTechnique(e.blendMode,a,e.baseOpacity<1,d).bindPipelineState(h),d?(f=this._acquire(n),h.bindFramebuffer(f),h.setClearColor(0,0,0,0),h.clearSafe(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)):l&&h.clearSafe(C.DEPTH_BUFFER_BIT);try{this._vectorTileHelper.render(h,r.sourceLod,u,_.painter,_.layer.styleRepository,_.schemaHelper,Math.round(1/r.scale),r.offset,i,t)}catch(T){q.warnOnce(\"A render call containing vector tiles did not resolve correctly.\",T)}return!o(f)||(h.bindFramebuffer(this._currentFBO),e.texture=f.colorTexture,e.offset=s,e.scale=1,this.drawRasterData(a,e,d),f.release(),l)}copyFBOToTexture(e){const r=this._rctx,t=r.bindTexture(e.texture,O.TEXTURE_UNIT_FOR_UPDATES),i=e.descriptor;r.gl.copyTexImage2D(x.TEXTURE_2D,0,i.pixelFormat,0,0,i.width,i.height,0),e.generateMipmap(),r.bindTexture(t,O.TEXTURE_UNIT_FOR_UPDATES)}_initFBO(e,r){this._rctx.bindFramebuffer(e),this._rctx.setViewport(0,0,r,r),this._rctx.setClearColor(0,0,0,0),this._rctx.setClearDepth(1),this._rctx.clearSafe(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)}_acquire(e){return this._fboPools[this._poolToWrite].acquire(e)}bindPool(e,r){this._poolToWrite=e,null==this._doubleBufferFbo[e]&&(this._doubleBufferFbo[e]=this._acquire(r),this._initFBO(this._doubleBufferFbo[e],r))}_switchPool(e){this._releaseCurrentFBO(),this._doubleBufferFbo[this._poolToWrite]=null,this._poolToWrite=0===this._poolToWrite?1:0,this.bindPool(this._poolToWrite,e)}get _currentFBO(){return this._doubleBufferFbo[this._poolToWrite]}_releaseCurrentFBO(){this._doubleBufferFbo[this._poolToWrite].release(),this._doubleBufferFbo[this._poolToWrite]=null}releasePool(){this._rctx.bindFramebuffer(null),this._releaseCurrentFBO()}cleanupFBOPool(e,r){e===this._lastPixelRatio&&r===this._lastNumLayers||(this._fboPools.forEach((e=>e.clear())),this._lastPixelRatio=e,this._lastNumLayers=r)}}export{L as TileCompositor};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}