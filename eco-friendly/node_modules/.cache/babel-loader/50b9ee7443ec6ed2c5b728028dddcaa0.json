{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { HandleOwnerMixin as t } from \"../../../../core/HandleOwner.js\";\nimport { destroyHandle as i } from \"../../../../core/handleUtils.js\";\nimport { isSome as s } from \"../../../../core/maybe.js\";\nimport { initial as a, watch as o, sync as n } from \"../../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as u } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { FeatureServiceTiles2D as c } from \"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";\nimport { FeatureServiceTiles3D as d } from \"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";\nimport { convertSnappingCandidate as p } from \"./queryEngineUtils.js\";\nimport { WorkerTileTreeDebugger as h } from \"./WorkerTileTreeDebugger.js\";\nimport { FeatureServiceSnappingSourceWorkerHandle as f } from \"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";\nimport { FeatureServiceTilesSimple as m } from \"./featureServiceSource/FeatureServiceTilesSimple.js\";\nimport y from \"../../../support/debugFlags.js\";\nlet g = class extends t(r) {\n  constructor(e) {\n    super(e);\n  }\n\n  get updateTilesParameters() {\n    return {\n      tiles: this.tilesOfInterest.tiles,\n      tileInfo: this.tilesOfInterest.tileInfo,\n      tileSize: this.tilesOfInterest.tileSize\n    };\n  }\n\n  get updating() {\n    return this.workerHandle.updating || this.updatingHandles.updating;\n  }\n\n  get configuration() {\n    return {\n      filter: this.layer.createQuery(),\n      customParameters: this.layer.customParameters\n    };\n  }\n\n  get availability() {\n    return this.workerHandle.availability;\n  }\n\n  get layer() {\n    return this.layerSource.layer;\n  }\n\n  initialize() {\n    const e = this.view;\n    if (s(e)) switch (e.type) {\n      case \"2d\":\n        this.tilesOfInterest = new c({\n          view: e,\n          layer: this.layer\n        }), this.workerHandle = new f();\n        break;\n\n      case \"3d\":\n        {\n          const r = e.resourceController;\n          this.tilesOfInterest = new d({\n            view: e\n          }), this.workerHandle = new f({\n            schedule: e => r.schedule(e)\n          });\n          break;\n        }\n    } else this.tilesOfInterest = new m({\n      layer: this.layer\n    }), this.workerHandle = new f();\n    this.handles.add([i(this.workerHandle)]), this.workerHandle.setup({\n      layer: this.layer,\n      spatialReference: this.spatialReference,\n      configuration: this.configuration\n    }, null), this.updatingHandles.add(() => this.updateTilesParameters, () => this.workerHandle.updateTiles(this.updateTilesParameters, null), a), this.handles.add([o(() => this.configuration, e => this.workerHandle.configure(e, null), n)]), s(e) && this.handles.add(o(() => y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES, r => {\n      r && !this.debug ? (this.debug = new h({\n        view: e,\n        handle: this.workerHandle\n      }), this.handles.add(i(this.debug), \"debug\")) : !r && this.debug && this.handles.remove(\"debug\");\n    }, a)), this.handles.add(this.layerSource.layer.on(\"apply-edits\", e => {\n      this.workerHandle.applyEdits(e, null);\n    }));\n  }\n\n  refresh() {\n    this.workerHandle.refresh(null);\n  }\n\n  async fetchCandidates(e, r) {\n    return this.tilesOfInterest.pointOfInterest = e.coordinateHelper.vectorToPoint(e.point), (await this.workerHandle.fetchCandidates({ ...e,\n      filter: null\n    }, r)).candidates.map(r => p(r, e.coordinateHelper, e.elevationInfo));\n  }\n\n  getDebugInfo(e) {\n    return this.workerHandle.getDebugInfo(e);\n  }\n\n};\ne([l({\n  constructOnly: !0\n})], g.prototype, \"spatialReference\", void 0), e([l({\n  constructOnly: !0\n})], g.prototype, \"layerSource\", void 0), e([l({\n  constructOnly: !0\n})], g.prototype, \"view\", void 0), e([l()], g.prototype, \"tilesOfInterest\", void 0), e([l({\n  readOnly: !0\n})], g.prototype, \"updateTilesParameters\", null), e([l({\n  readOnly: !0\n})], g.prototype, \"updating\", null), e([l({\n  readOnly: !0\n})], g.prototype, \"configuration\", null), e([l({\n  readOnly: !0\n})], g.prototype, \"availability\", null), g = e([u(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")], g);\nexport { g as FeatureServiceSnappingSource };","map":{"version":3,"names":["_","e","r","HandleOwnerMixin","t","destroyHandle","i","isSome","s","initial","a","watch","o","sync","n","property","l","subclass","u","FeatureServiceTiles2D","c","FeatureServiceTiles3D","d","convertSnappingCandidate","p","WorkerTileTreeDebugger","h","FeatureServiceSnappingSourceWorkerHandle","f","FeatureServiceTilesSimple","m","y","g","constructor","updateTilesParameters","tiles","tilesOfInterest","tileInfo","tileSize","updating","workerHandle","updatingHandles","configuration","filter","layer","createQuery","customParameters","availability","layerSource","initialize","view","type","resourceController","schedule","handles","add","setup","spatialReference","updateTiles","configure","FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES","debug","handle","remove","on","applyEdits","refresh","fetchCandidates","pointOfInterest","coordinateHelper","vectorToPoint","point","candidates","map","elevationInfo","getDebugInfo","constructOnly","prototype","readOnly","FeatureServiceSnappingSource"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{HandleOwnerMixin as t}from\"../../../../core/HandleOwner.js\";import{destroyHandle as i}from\"../../../../core/handleUtils.js\";import{isSome as s}from\"../../../../core/maybe.js\";import{initial as a,watch as o,sync as n}from\"../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{FeatureServiceTiles2D as c}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as d}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{convertSnappingCandidate as p}from\"./queryEngineUtils.js\";import{WorkerTileTreeDebugger as h}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as f}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as m}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";import y from\"../../../support/debugFlags.js\";let g=class extends(t(r)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){const e=this.view;if(s(e))switch(e.type){case\"2d\":this.tilesOfInterest=new c({view:e,layer:this.layer}),this.workerHandle=new f;break;case\"3d\":{const r=e.resourceController;this.tilesOfInterest=new d({view:e}),this.workerHandle=new f({schedule:e=>r.schedule(e)});break}}else this.tilesOfInterest=new m({layer:this.layer}),this.workerHandle=new f;this.handles.add([i(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add((()=>this.updateTilesParameters),(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),a),this.handles.add([o((()=>this.configuration),(e=>this.workerHandle.configure(e,null)),n)]),s(e)&&this.handles.add(o((()=>y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES),(r=>{r&&!this.debug?(this.debug=new h({view:e,handle:this.workerHandle}),this.handles.add(i(this.debug),\"debug\")):!r&&this.debug&&this.handles.remove(\"debug\")}),a)),this.handles.add(this.layerSource.layer.on(\"apply-edits\",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,r){return this.tilesOfInterest.pointOfInterest=e.coordinateHelper.vectorToPoint(e.point),(await this.workerHandle.fetchCandidates({...e,filter:null},r)).candidates.map((r=>p(r,e.coordinateHelper,e.elevationInfo)))}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};e([l({constructOnly:!0})],g.prototype,\"spatialReference\",void 0),e([l({constructOnly:!0})],g.prototype,\"layerSource\",void 0),e([l({constructOnly:!0})],g.prototype,\"view\",void 0),e([l()],g.prototype,\"tilesOfInterest\",void 0),e([l({readOnly:!0})],g.prototype,\"updateTilesParameters\",null),e([l({readOnly:!0})],g.prototype,\"updating\",null),e([l({readOnly:!0})],g.prototype,\"configuration\",null),e([l({readOnly:!0})],g.prototype,\"availability\",null),g=e([u(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],g);export{g as FeatureServiceSnappingSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}