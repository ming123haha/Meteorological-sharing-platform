{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport t from \"../../../core/Evented.js\";\nimport r from \"../../../core/Logger.js\";\nimport { isSome as s, isNone as o } from \"../../../core/maybe.js\";\nimport { fromRect as i } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { create as d } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsOptimizedGeometry as a } from \"../featureConversionUtils.js\";\nimport { BoundsStore as n } from \"./BoundsStore.js\";\nimport { optimizedFeatureQueryEngineAdapter as h } from \"./optimizedFeatureQueryEngineAdapter.js\";\n\nclass u {\n  constructor(e) {\n    this.geometryInfo = e, this._boundsStore = new n(), this._featuresById = new Map(), this._markedIds = new Set(), this.events = new t(), this.featureAdapter = h;\n  }\n\n  get geometryType() {\n    return this.geometryInfo.geometryType;\n  }\n\n  get hasM() {\n    return this.geometryInfo.hasM;\n  }\n\n  get hasZ() {\n    return this.geometryInfo.hasZ;\n  }\n\n  get numFeatures() {\n    return this._featuresById.size;\n  }\n\n  get fullBounds() {\n    return this._boundsStore.fullBounds;\n  }\n\n  get storeStatistics() {\n    let e = 0;\n    return this._featuresById.forEach(t => {\n      s(t.geometry) && t.geometry.coords && (e += t.geometry.coords.length);\n    }), {\n      featureCount: this._featuresById.size,\n      vertexCount: e / (this.hasZ ? this.hasM ? 4 : 3 : this.hasM ? 3 : 2)\n    };\n  }\n\n  add(e) {\n    this._add(e), this._emitChanged();\n  }\n\n  addMany(e) {\n    for (const t of e) this._add(t);\n\n    this._emitChanged();\n  }\n\n  clear() {\n    this._featuresById.clear(), this._boundsStore.clear(), this._emitChanged();\n  }\n\n  removeById(e) {\n    const t = this._featuresById.get(e);\n\n    return t ? (this._remove(t), this._emitChanged(), t) : null;\n  }\n\n  removeManyById(e) {\n    this._boundsStore.invalidateIndex();\n\n    for (const t of e) {\n      const e = this._featuresById.get(t);\n\n      e && this._remove(e);\n    }\n\n    this._emitChanged();\n  }\n\n  forEachBounds(e, t, r) {\n    for (const s of e) {\n      const e = this._boundsStore.get(s.objectId);\n\n      e && t(i(r, e));\n    }\n  }\n\n  getFeature(e) {\n    return this._featuresById.get(e);\n  }\n\n  has(e) {\n    return this._featuresById.has(e);\n  }\n\n  toArray() {\n    return Array.from(this._featuresById.values());\n  }\n\n  forEach(e) {\n    this._featuresById.forEach(t => e(t));\n  }\n\n  forEachInBounds(e, t) {\n    this._boundsStore.forEachInBounds(e, e => {\n      t(this._featuresById.get(e));\n    });\n  }\n\n  startMarkingUsedFeatures() {\n    this._boundsStore.invalidateIndex(), this._markedIds.clear();\n  }\n\n  sweep() {\n    let e = !1;\n    this._featuresById.forEach((t, r) => {\n      this._markedIds.has(r) || (e = !0, this._remove(t));\n    }), this._markedIds.clear(), e && this._emitChanged();\n  }\n\n  _emitChanged() {\n    this.events.emit(\"changed\", void 0);\n  }\n\n  _add(t) {\n    if (!t) return;\n    const i = t.objectId;\n    if (null == i) return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\", \"feature id is missing\", {\n      feature: t\n    }));\n\n    const n = this._featuresById.get(i);\n\n    let h;\n    if (this._markedIds.add(i), n ? (t.displayId = n.displayId, h = this._boundsStore.get(i), this._boundsStore.delete(i)) : s(this.onFeatureAdd) && this.onFeatureAdd(t), o(t.geometry) || !t.geometry.coords || !t.geometry.coords.length) return this._boundsStore.set(i, null), void this._featuresById.set(i, t);\n    h = a(s(h) ? h : d(), t.geometry, this.geometryInfo.hasZ, this.geometryInfo.hasM), s(h) && this._boundsStore.set(i, h), this._featuresById.set(i, t);\n  }\n\n  _remove(e) {\n    return s(this.onFeatureRemove) && this.onFeatureRemove(e), this._markedIds.delete(e.objectId), this._boundsStore.delete(e.objectId), this._featuresById.delete(e.objectId), e;\n  }\n\n}\n\nexport { u as default };","map":{"version":3,"names":["e","t","r","isSome","s","isNone","o","fromRect","i","create","d","getBoundsOptimizedGeometry","a","BoundsStore","n","optimizedFeatureQueryEngineAdapter","h","u","constructor","geometryInfo","_boundsStore","_featuresById","Map","_markedIds","Set","events","featureAdapter","geometryType","hasM","hasZ","numFeatures","size","fullBounds","storeStatistics","forEach","geometry","coords","length","featureCount","vertexCount","add","_add","_emitChanged","addMany","clear","removeById","get","_remove","removeManyById","invalidateIndex","forEachBounds","objectId","getFeature","has","toArray","Array","from","values","forEachInBounds","startMarkingUsedFeatures","sweep","emit","getLogger","error","feature","displayId","delete","onFeatureAdd","set","onFeatureRemove","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}toArray(){return Array.from(this._featuresById.values())}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const n=this._featuresById.get(i);let h;if(this._markedIds.add(i),n?(t.displayId=n.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=a(s(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{u as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}