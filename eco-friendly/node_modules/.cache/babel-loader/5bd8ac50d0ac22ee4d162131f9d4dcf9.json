{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../../request.js\";\nimport { isSome as e } from \"../../../core/maybe.js\";\nimport { join as r, urlToObject as o } from \"../../../core/urlUtils.js\";\nimport { getJsonType as n } from \"../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridian as i } from \"../../../geometry/support/normalizeUtils.js\";\nimport { mapParameters as s } from \"../../operations/urlUtils.js\";\nimport { applyFeatureSetZUnitScaling as u } from \"./queryZScale.js\";\nconst l = \"Layer does not support extent calculation.\";\n\nfunction y(t, r) {\n  const o = t.geometry,\n        i = t.toJSON(),\n        s = i;\n\n  if (e(o) && (s.geometry = JSON.stringify(o), s.geometryType = n(o), s.inSR = o.spatialReference.wkid || JSON.stringify(o.spatialReference)), i.topFilter?.groupByFields && (s.topFilter.groupByFields = i.topFilter.groupByFields.join(\",\")), i.topFilter?.orderByFields && (s.topFilter.orderByFields = i.topFilter.orderByFields.join(\",\")), i.topFilter && (s.topFilter = JSON.stringify(s.topFilter)), i.objectIds && (s.objectIds = i.objectIds.join(\",\")), i.orderByFields && (s.orderByFields = i.orderByFields.join(\",\")), i.outFields && !(r?.returnCountOnly || r?.returnExtentOnly || r?.returnIdsOnly) ? i.outFields.includes(\"*\") ? s.outFields = \"*\" : s.outFields = i.outFields.join(\",\") : delete s.outFields, i.outSR ? s.outSR = i.outSR.wkid || JSON.stringify(i.outSR) : o && i.returnGeometry && (s.outSR = s.inSR), i.returnGeometry && delete i.returnGeometry, i.timeExtent) {\n    const t = i.timeExtent,\n          {\n      start: e,\n      end: r\n    } = t;\n    null == e && null == r || (s.time = e === r ? e : `${null == e ? \"null\" : e},${null == r ? \"null\" : r}`), delete i.timeExtent;\n  }\n\n  return s;\n}\n\nasync function d(t, e, r, o) {\n  const n = await c(t, e, \"json\", o);\n  return u(e, r, n.data), n;\n}\n\nasync function m(t, r, o) {\n  return e(r.timeExtent) && r.timeExtent.isEmpty ? {\n    data: {\n      objectIds: []\n    }\n  } : c(t, r, \"json\", o, {\n    returnIdsOnly: !0\n  });\n}\n\nasync function p(t, r, o) {\n  return e(r.timeExtent) && r.timeExtent.isEmpty ? {\n    data: {\n      count: 0,\n      extent: null\n    }\n  } : c(t, r, \"json\", o, {\n    returnExtentOnly: !0,\n    returnCountOnly: !0\n  }).then(t => {\n    const e = t.data;\n    if (e.hasOwnProperty(\"extent\")) return t;\n    if (e.features) throw new Error(l);\n    if (e.hasOwnProperty(\"count\")) throw new Error(l);\n    return t;\n  });\n}\n\nfunction a(t, r, o) {\n  return e(r.timeExtent) && r.timeExtent.isEmpty ? Promise.resolve({\n    data: {\n      count: 0\n    }\n  }) : c(t, r, \"json\", o, {\n    returnIdsOnly: !0,\n    returnCountOnly: !0\n  });\n}\n\nfunction c(n, u, l, d = {}, m = {}) {\n  const p = \"string\" == typeof n ? o(n) : n,\n        a = u.geometry ? [u.geometry] : [];\n  return d.responseType = \"pbf\" === l ? \"array-buffer\" : \"json\", i(a, null, d).then(o => {\n    const n = o && o[0];\n    e(n) && ((u = u.clone()).geometry = n);\n    const i = s({ ...p.query,\n      f: l,\n      ...m,\n      ...y(u, m)\n    });\n    return t(r(p.path, \"queryTopFeatures\"), { ...d,\n      query: { ...i,\n        ...d.query\n      }\n    });\n  });\n}\n\nexport { a as executeQueryForTopCount, p as executeQueryForTopExtents, m as executeQueryForTopIds, d as executeTopFeaturesQuery, y as queryToQueryStringParameters };","map":{"version":3,"names":["t","isSome","e","join","r","urlToObject","o","getJsonType","n","normalizeCentralMeridian","i","mapParameters","s","applyFeatureSetZUnitScaling","u","l","y","geometry","toJSON","JSON","stringify","geometryType","inSR","spatialReference","wkid","topFilter","groupByFields","orderByFields","objectIds","outFields","returnCountOnly","returnExtentOnly","returnIdsOnly","includes","outSR","returnGeometry","timeExtent","start","end","time","d","c","data","m","isEmpty","p","count","extent","then","hasOwnProperty","features","Error","a","Promise","resolve","responseType","clone","query","f","path","executeQueryForTopCount","executeQueryForTopExtents","executeQueryForTopIds","executeTopFeaturesQuery","queryToQueryStringParameters"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/rest/query/operations/queryTopFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{isSome as e}from\"../../../core/maybe.js\";import{join as r,urlToObject as o}from\"../../../core/urlUtils.js\";import{getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as i}from\"../../../geometry/support/normalizeUtils.js\";import{mapParameters as s}from\"../../operations/urlUtils.js\";import{applyFeatureSetZUnitScaling as u}from\"./queryZScale.js\";const l=\"Layer does not support extent calculation.\";function y(t,r){const o=t.geometry,i=t.toJSON(),s=i;if(e(o)&&(s.geometry=JSON.stringify(o),s.geometryType=n(o),s.inSR=o.spatialReference.wkid||JSON.stringify(o.spatialReference)),i.topFilter?.groupByFields&&(s.topFilter.groupByFields=i.topFilter.groupByFields.join(\",\")),i.topFilter?.orderByFields&&(s.topFilter.orderByFields=i.topFilter.orderByFields.join(\",\")),i.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),i.objectIds&&(s.objectIds=i.objectIds.join(\",\")),i.orderByFields&&(s.orderByFields=i.orderByFields.join(\",\")),i.outFields&&!(r?.returnCountOnly||r?.returnExtentOnly||r?.returnIdsOnly)?i.outFields.includes(\"*\")?s.outFields=\"*\":s.outFields=i.outFields.join(\",\"):delete s.outFields,i.outSR?s.outSR=i.outSR.wkid||JSON.stringify(i.outSR):o&&i.returnGeometry&&(s.outSR=s.inSR),i.returnGeometry&&delete i.returnGeometry,i.timeExtent){const t=i.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${null==e?\"null\":e},${null==r?\"null\":r}`),delete i.timeExtent}return s}async function d(t,e,r,o){const n=await c(t,e,\"json\",o);return u(e,r,n.data),n}async function m(t,r,o){return e(r.timeExtent)&&r.timeExtent.isEmpty?{data:{objectIds:[]}}:c(t,r,\"json\",o,{returnIdsOnly:!0})}async function p(t,r,o){return e(r.timeExtent)&&r.timeExtent.isEmpty?{data:{count:0,extent:null}}:c(t,r,\"json\",o,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty(\"extent\"))return t;if(e.features)throw new Error(l);if(e.hasOwnProperty(\"count\"))throw new Error(l);return t}))}function a(t,r,o){return e(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):c(t,r,\"json\",o,{returnIdsOnly:!0,returnCountOnly:!0})}function c(n,u,l,d={},m={}){const p=\"string\"==typeof n?o(n):n,a=u.geometry?[u.geometry]:[];return d.responseType=\"pbf\"===l?\"array-buffer\":\"json\",i(a,null,d).then((o=>{const n=o&&o[0];e(n)&&((u=u.clone()).geometry=n);const i=s({...p.query,f:l,...m,...y(u,m)});return t(r(p.path,\"queryTopFeatures\"),{...d,query:{...i,...d.query}})}))}export{a as executeQueryForTopCount,p as executeQueryForTopExtents,m as executeQueryForTopIds,d as executeTopFeaturesQuery,y as queryToQueryStringParameters};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}