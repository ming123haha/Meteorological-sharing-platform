{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport o from \"../../../../core/Accessor.js\";\nimport e from \"../../../../core/Logger.js\";\nimport { deg2rad as i } from \"../../../../core/mathUtils.js\";\nimport { isNone as s, isSome as r } from \"../../../../core/maybe.js\";\nimport { isAbortError as a } from \"../../../../core/promiseUtils.js\";\nimport { property as l } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../../../geometry/Point.js\";\nimport c from \"./FlowDisplayData.js\";\nimport { FlowDisplayObject as m } from \"./FlowDisplayObject.js\";\nimport d from \"../../../../geometry/Extent.js\";\nconst h = 1.15;\nlet y = class extends o {\n  constructor(t) {\n    super(t), this._flowDisplayObject = new m(), this._loading = null;\n  }\n\n  initialize() {\n    this.flowContainer.addChild(this._flowDisplayObject);\n  }\n\n  destroy() {\n    this._clear(), this.flowContainer.removeAllChildren();\n  }\n\n  get updating() {\n    return null != this._loading;\n  }\n\n  update(t) {\n    const {\n      flowStyle: o\n    } = this.flowContainer;\n    if (s(o)) return void this._clear();\n    const {\n      extent: i,\n      rotation: l,\n      resolution: n,\n      pixelRatio: p\n    } = t.state,\n          m = u(i, l);\n    m.expand(h);\n    const d = [Math.round((m.xmax - m.xmin) / n), Math.round((m.ymax - m.ymin) / n)],\n          y = new c(o, m, d, p);\n\n    if (r(this._loading)) {\n      if (this._loading.update(y)) return;\n      this._loading.detach(), this._loading = null;\n    }\n\n    !s(this._flowDisplayObject.displayData) && this._flowDisplayObject.displayData.update(y) || (y.load().then(() => {\n      this._flowDisplayObject.clear(), this._flowDisplayObject.displayData = this._loading, this._loading = null;\n    }, t => {\n      a(t) || (e.getLogger(this.declaredClass).error(\"A resource failed to load.\", t), this._loading = null);\n    }), this._loading = y);\n  }\n\n  _clear() {\n    this._flowDisplayObject.clear(), r(this._loading) && (this._loading.detach(), this._loading = null);\n  }\n\n};\nt([l()], y.prototype, \"_loading\", void 0), t([l()], y.prototype, \"flowContainer\", void 0), t([l()], y.prototype, \"updating\", null), y = t([n(\"esri.views.2d.engine.flow.FlowStrategy\")], y);\nconst f = y;\n\nfunction u(t, o) {\n  const e = new p({\n    x: (t.xmax + t.xmin) / 2,\n    y: (t.ymax + t.ymin) / 2,\n    spatialReference: t.spatialReference\n  }),\n        s = t.xmax - t.xmin,\n        r = t.ymax - t.ymin,\n        a = Math.abs(Math.cos(i(o))),\n        l = Math.abs(Math.sin(i(o))),\n        n = a * s + l * r,\n        c = l * s + a * r,\n        m = new d({\n    xmin: e.x - n / 2,\n    ymin: e.y - c / 2,\n    xmax: e.x + n / 2,\n    ymax: e.y + c / 2,\n    spatialReference: t.spatialReference\n  });\n  return m.centerAt(e), m;\n}\n\nexport { f as default };","map":{"version":3,"names":["_","t","o","e","deg2rad","i","isNone","s","isSome","r","isAbortError","a","property","l","subclass","n","p","c","FlowDisplayObject","m","d","h","y","constructor","_flowDisplayObject","_loading","initialize","flowContainer","addChild","destroy","_clear","removeAllChildren","updating","update","flowStyle","extent","rotation","resolution","pixelRatio","state","u","expand","Math","round","xmax","xmin","ymax","ymin","detach","displayData","load","then","clear","getLogger","declaredClass","error","prototype","f","x","spatialReference","abs","cos","sin","centerAt","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/flow/FlowStrategy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import o from\"../../../../core/Accessor.js\";import e from\"../../../../core/Logger.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{isNone as s,isSome as r}from\"../../../../core/maybe.js\";import{isAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../../geometry/Point.js\";import c from\"./FlowDisplayData.js\";import{FlowDisplayObject as m}from\"./FlowDisplayObject.js\";import d from\"../../../../geometry/Extent.js\";const h=1.15;let y=class extends o{constructor(t){super(t),this._flowDisplayObject=new m,this._loading=null}initialize(){this.flowContainer.addChild(this._flowDisplayObject)}destroy(){this._clear(),this.flowContainer.removeAllChildren()}get updating(){return null!=this._loading}update(t){const{flowStyle:o}=this.flowContainer;if(s(o))return void this._clear();const{extent:i,rotation:l,resolution:n,pixelRatio:p}=t.state,m=u(i,l);m.expand(h);const d=[Math.round((m.xmax-m.xmin)/n),Math.round((m.ymax-m.ymin)/n)],y=new c(o,m,d,p);if(r(this._loading)){if(this._loading.update(y))return;this._loading.detach(),this._loading=null}!s(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(y)||(y.load().then((()=>{this._flowDisplayObject.clear(),this._flowDisplayObject.displayData=this._loading,this._loading=null}),(t=>{a(t)||(e.getLogger(this.declaredClass).error(\"A resource failed to load.\",t),this._loading=null)})),this._loading=y)}_clear(){this._flowDisplayObject.clear(),r(this._loading)&&(this._loading.detach(),this._loading=null)}};t([l()],y.prototype,\"_loading\",void 0),t([l()],y.prototype,\"flowContainer\",void 0),t([l()],y.prototype,\"updating\",null),y=t([n(\"esri.views.2d.engine.flow.FlowStrategy\")],y);const f=y;function u(t,o){const e=new p({x:(t.xmax+t.xmin)/2,y:(t.ymax+t.ymin)/2,spatialReference:t.spatialReference}),s=t.xmax-t.xmin,r=t.ymax-t.ymin,a=Math.abs(Math.cos(i(o))),l=Math.abs(Math.sin(i(o))),n=a*s+l*r,c=l*s+a*r,m=new d({xmin:e.x-n/2,ymin:e.y-c/2,xmax:e.x+n/2,ymax:e.y+c/2,spatialReference:t.spatialReference});return m.centerAt(e),m}export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}