{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport \"../../../core/has.js\";\nconst e = new Set([\"+\", \"-\", \"*\", \"/\", \"(\", \")\"]);\n\nfunction t(t, n) {\n  (t = t.replace(/ /g, \"\")).startsWith(\"-\") && (t = \"0\" + t), t.startsWith(\"+\") && (t = t.slice(1, t.length));\n  const r = t.split(\"\"),\n        l = [],\n        o = [];\n  let s = \"\";\n\n  for (let a = 0; a < r.length; a++) {\n    const t = r[a];\n    if (e.has(t)) \"\" !== s && o.push(parseFloat(s)), l.push(t), s = \"\";else {\n      if (\"b\" === t.toLowerCase()) {\n        a++, s = t.concat(r[a]), o.push(n[parseInt(s[1], 10) - 1]), s = \"\";\n        continue;\n      }\n\n      s = s.concat(t), a === r.length - 1 && o.push(parseFloat(s));\n    }\n  }\n\n  return {\n    ops: l,\n    nums: o\n  };\n}\n\nfunction n(e, t, n, r) {\n  if (\"number\" == typeof n && \"number\" == typeof r) return n + r;\n  let l;\n\n  if (\"number\" == typeof n) {\n    l = r.length;\n    const e = n;\n    (n = new Float32Array(l)).fill(e);\n  } else if (l = n.length, r.constructor === Number) {\n    const e = r;\n    (r = new Float32Array(l)).fill(e);\n  }\n\n  const o = new Float32Array(l);\n\n  switch (t) {\n    case \"+\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] + r[t]);\n\n      break;\n\n    case \"-\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] - r[t]);\n\n      break;\n\n    case \"*\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && (o[t] = n[t] * r[t]);\n\n      break;\n\n    case \"/\":\n      for (let t = 0; t < l; t++) (null == e || e[t]) && r[t] && (o[t] = n[t] / r[t]);\n\n      break;\n\n    case \"(\":\n    case \")\":\n      throw \"encountered error with custom band index equation\";\n  }\n\n  return o;\n}\n\nfunction r(e, t) {\n  e.splice(t, 1);\n  let n = 0,\n      r = 0;\n\n  do {\n    n = 0, r = 0;\n\n    for (let t = 0; t < e.length; t++) if (\"(\" === e[t]) n = t;else if (\")\" === e[t]) {\n      r = t;\n      break;\n    }\n\n    r === n + 1 && e.splice(n, 2);\n  } while (r === n + 1);\n\n  return e;\n}\n\nfunction l(e) {\n  if (1 === e.length) return {\n    opIndex: 0,\n    numIndex: 0\n  };\n  let t = 0,\n      n = 0;\n\n  for (let s = 0; s < e.length; s++) if (\"(\" === e[s]) t = s;else if (\")\" === e[s]) {\n    n = s;\n    break;\n  }\n\n  const r = 0 === n ? e : e.slice(t + 1, n);\n  let l = -1;\n\n  for (let s = 0; s < r.length; s++) if (\"*\" === r[s] || \"/\" === r[s]) {\n    l = s;\n    break;\n  }\n\n  if (l > -1) n > 0 && (l += t + 1);else {\n    for (let e = 0; e < r.length; e++) if (\"+\" === r[e] || \"-\" === r[e]) {\n      l = e;\n      break;\n    }\n\n    n > 0 && (l += t + 1);\n  }\n  let o = 0;\n\n  for (let s = 0; s < l; s++) \"(\" === e[s] && o++;\n\n  return {\n    opIndex: l,\n    numIndex: l - o\n  };\n}\n\nfunction o(e, o, s) {\n  let a,\n      {\n    ops: f,\n    nums: i\n  } = t(s, o);\n\n  if (0 === f.length) {\n    const e = 1 === i.length ? i[0] : o[0];\n    if (e instanceof Float32Array) return [e];\n    const t = new Float32Array(o[0].length);\n    return \"number\" == typeof e ? t.fill(e) : t.set(e), [t];\n  }\n\n  for (; f.length > 0;) {\n    const {\n      numIndex: t,\n      opIndex: o\n    } = l(f);\n    if (a = n(e, f[o], i[t], i[t + 1]), 1 === f.length) break;\n    f = r(f, o), i.splice(t, 2, a);\n  }\n\n  return [a];\n}\n\nexport { o as calculateCustomBandIndex };","map":{"version":3,"names":["e","Set","t","n","replace","startsWith","slice","length","r","split","l","o","s","a","has","push","parseFloat","toLowerCase","concat","parseInt","ops","nums","Float32Array","fill","constructor","Number","splice","opIndex","numIndex","f","i","set","calculateCustomBandIndex"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/customBandIndexUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";const e=new Set([\"+\",\"-\",\"*\",\"/\",\"(\",\")\"]);function t(t,n){(t=t.replace(/ /g,\"\")).startsWith(\"-\")&&(t=\"0\"+t),t.startsWith(\"+\")&&(t=t.slice(1,t.length));const r=t.split(\"\"),l=[],o=[];let s=\"\";for(let a=0;a<r.length;a++){const t=r[a];if(e.has(t))\"\"!==s&&o.push(parseFloat(s)),l.push(t),s=\"\";else{if(\"b\"===t.toLowerCase()){a++,s=t.concat(r[a]),o.push(n[parseInt(s[1],10)-1]),s=\"\";continue}s=s.concat(t),a===r.length-1&&o.push(parseFloat(s))}}return{ops:l,nums:o}}function n(e,t,n,r){if(\"number\"==typeof n&&\"number\"==typeof r)return n+r;let l;if(\"number\"==typeof n){l=r.length;const e=n;(n=new Float32Array(l)).fill(e)}else if(l=n.length,r.constructor===Number){const e=r;(r=new Float32Array(l)).fill(e)}const o=new Float32Array(l);switch(t){case\"+\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]+r[t]);break;case\"-\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]-r[t]);break;case\"*\":for(let t=0;t<l;t++)(null==e||e[t])&&(o[t]=n[t]*r[t]);break;case\"/\":for(let t=0;t<l;t++)(null==e||e[t])&&r[t]&&(o[t]=n[t]/r[t]);break;case\"(\":case\")\":throw\"encountered error with custom band index equation\"}return o}function r(e,t){e.splice(t,1);let n=0,r=0;do{n=0,r=0;for(let t=0;t<e.length;t++)if(\"(\"===e[t])n=t;else if(\")\"===e[t]){r=t;break}r===n+1&&e.splice(n,2)}while(r===n+1);return e}function l(e){if(1===e.length)return{opIndex:0,numIndex:0};let t=0,n=0;for(let s=0;s<e.length;s++)if(\"(\"===e[s])t=s;else if(\")\"===e[s]){n=s;break}const r=0===n?e:e.slice(t+1,n);let l=-1;for(let s=0;s<r.length;s++)if(\"*\"===r[s]||\"/\"===r[s]){l=s;break}if(l>-1)n>0&&(l+=t+1);else{for(let e=0;e<r.length;e++)if(\"+\"===r[e]||\"-\"===r[e]){l=e;break}n>0&&(l+=t+1)}let o=0;for(let s=0;s<l;s++)\"(\"===e[s]&&o++;return{opIndex:l,numIndex:l-o}}function o(e,o,s){let a,{ops:f,nums:i}=t(s,o);if(0===f.length){const e=1===i.length?i[0]:o[0];if(e instanceof Float32Array)return[e];const t=new Float32Array(o[0].length);return\"number\"==typeof e?t.fill(e):t.set(e),[t]}for(;f.length>0;){const{numIndex:t,opIndex:o}=l(f);if(a=n(e,f[o],i[t],i[t+1]),1===f.length)break;f=r(f,o),i.splice(t,2,a)}return[a]}export{o as calculateCustomBandIndex};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}