{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Error.js\";\nimport { isSome as s } from \"../../../../core/maybe.js\";\nimport \"../../../../core/Logger.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/set.js\";\nimport { subclass as t } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { unpackFieldNames as o, populateMissingFields as p } from \"../../../../layers/support/fieldUtils.js\";\nimport { getFetchPopupTemplate as a, getRequiredFields as i } from \"../../../layers/support/popupUtils.js\";\n\nconst c = c => {\n  let u = class extends c {\n    _validateFetchPopupFeatures(e) {\n      const {\n        layer: s\n      } = this,\n            {\n        popupEnabled: t\n      } = s;\n      if (!t) return new r(\"scenelayerview3d:fetchPopupFeatures\", \"Popups are disabled\", {\n        layer: s\n      });\n      return a(s, e) ? void 0 : new r(\"scenelayerview3d:fetchPopupFeatures\", \"Layer does not define a popup template\", {\n        layer: s\n      });\n    }\n\n    async prepareFetchPopupFeatures(e) {}\n\n    async fetchPopupFeatures(e, r) {\n      const t = this._validateFetchPopupFeatures(r);\n\n      if (t) throw t;\n      const c = s(r) ? r.clientGraphics : null;\n      if (!c || 0 === c.length) return [];\n      const u = \"scene\" === this.layer.type && s(this.layer.associatedLayer) ? this.layer.associatedLayer : this.layer,\n            n = o(this.layer.fieldsIndex, await i(u, a(this.layer, r)));\n      await this.prepareFetchPopupFeatures(n);\n      const l = new Set(),\n            h = [],\n            y = [];\n\n      for (const s of c) p(n, s, l) ? y.push(s) : h.push(s);\n\n      return 0 === y.length ? h : this.whenGraphicAttributes(y, [...l]).catch(() => y).then(e => h.concat(e));\n    }\n\n  };\n  return u = e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")], u), u;\n};\n\nexport { c as PopupSceneLayerView };","map":{"version":3,"names":["_","e","r","isSome","s","subclass","t","unpackFieldNames","o","populateMissingFields","p","getFetchPopupTemplate","a","getRequiredFields","i","c","u","_validateFetchPopupFeatures","layer","popupEnabled","prepareFetchPopupFeatures","fetchPopupFeatures","clientGraphics","length","type","associatedLayer","n","fieldsIndex","l","Set","h","y","push","whenGraphicAttributes","catch","then","concat","PopupSceneLayerView"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return[];const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?h:this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}