{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from \"../../../../core/has.js\";\nimport { isSome as e } from \"../../../../core/maybe.js\";\nimport { s as t, c as r, n as a, b as s, l as i, g as o, e as n, t as h } from \"../../../../chunks/vec3.js\";\nimport { c, f as u } from \"../../../../chunks/vec3f64.js\";\nimport { ViewingMode as l } from \"../../../ViewingMode.js\";\nimport { newLayout as m } from \"../../support/buffer/InterleavedLayout.js\";\nimport { ShaderOutput as p } from \"../core/shaderLibrary/ShaderOutput.js\";\nimport { NormalAttributeType as d } from \"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";\nimport { NormalsDoubleSidedMode as f } from \"../core/shaderLibrary/shading/Normals.glsl.js\";\nimport { PBRMode as g } from \"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";\nimport { CullFaceOptions as T } from \"../lib/basicInterfaces.js\";\nimport { GLTextureMaterial as _ } from \"../lib/GLTextureMaterial.js\";\nimport { Material as b } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as v } from \"../lib/OrderIndependentTransparency.js\";\nimport { RenderSlot as x } from \"../lib/RenderSlot.js\";\nimport { VertexAttribute as O } from \"../lib/VertexAttribute.js\";\nimport { getVerticalOffsetObject3D as S } from \"../lib/verticalOffsetUtils.js\";\nimport { writeDefaultAttributes as A } from \"./internal/bufferWriterUtils.js\";\nimport { verticalOffsetAtDistance as M, intersectTriangleGeometry as L } from \"./internal/MaterialUtil.js\";\nimport { DefaultMaterialTechnique as E, DefaultMaterialPassParameters as I } from \"../shaders/DefaultMaterialTechnique.js\";\nimport { DefaultMaterialTechniqueConfiguration as w } from \"../shaders/DefaultMaterialTechniqueConfiguration.js\";\nimport { RealisticTreeTechnique as y } from \"../shaders/RealisticTreeTechnique.js\";\n\nclass C extends b {\n  constructor(e) {\n    super(e, P), this.supportsEdges = !0, this._configuration = new w(), this._vertexBufferLayout = j(this.parameters), this._instanceBufferLayout = e.instanced ? B(this.parameters) : null;\n  }\n\n  isVisibleForOutput(e) {\n    return e !== p.Shadow && e !== p.ShadowExludeHighlight && e !== p.ShadowHighlight || this.parameters.castShadows;\n  }\n\n  isVisible() {\n    const t = this.parameters;\n    if (!super.isVisible() || 0 === t.layerOpacity) return !1;\n    const {\n      instanced: r,\n      hasVertexColors: a,\n      hasSymbolColors: s,\n      vvColorEnabled: i\n    } = t,\n          o = e(r) && r.includes(\"color\"),\n          n = \"replace\" === t.colorMixMode,\n          h = t.opacity > 0,\n          c = t.externalColor && t.externalColor[3] > 0;\n    return a && (o || i || s) ? !!n || h : a ? n ? c : h : o || i || s ? !!n || h : n ? c : h;\n  }\n\n  getConfiguration(t, r) {\n    return this._configuration.output = t, this._configuration.hasNormalTexture = !!this.parameters.normalTextureId, this._configuration.hasColorTexture = !!this.parameters.textureId, this._configuration.hasVertexTangents = this.parameters.hasVertexTangents, this._configuration.instanced = !!this.parameters.instanced, this._configuration.instancedDoublePrecision = this.parameters.instancedDoublePrecision, this._configuration.vvSize = this.parameters.vvSizeEnabled, this._configuration.hasVerticalOffset = e(this.parameters.verticalOffset), this._configuration.hasScreenSizePerspective = e(this.parameters.screenSizePerspective), this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.hasSliceHighlight = this.parameters.hasSliceHighlight, this._configuration.alphaDiscardMode = this.parameters.textureAlphaMode, this._configuration.normalType = \"screenDerivative\" === this.parameters.normals ? d.ScreenDerivative : d.Attribute, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, e(this.parameters.customDepthTest) && (this._configuration.customDepthTest = this.parameters.customDepthTest), this._configuration.hasOccludees = this.parameters.hasOccludees, this._configuration.cullFace = this.parameters.hasSlicePlane ? T.None : this.parameters.cullFace, this._configuration.hasMultipassTerrain = r.multipassTerrain.enabled, this._configuration.cullAboveGround = r.multipassTerrain.cullAboveGround, this._configuration.hasModelTransformation = e(this.parameters.modelTransformation), t !== p.Color && t !== p.Alpha || (this._configuration.hasVertexColors = this.parameters.hasVertexColors, this._configuration.hasSymbolColors = this.parameters.hasSymbolColors, this.parameters.treeRendering ? this._configuration.doubleSidedMode = f.WindingOrder : this._configuration.doubleSidedMode = this.parameters.doubleSided && \"normal\" === this.parameters.doubleSidedType ? f.View : this.parameters.doubleSided && \"winding-order\" === this.parameters.doubleSidedType ? f.WindingOrder : f.None, this._configuration.instancedColor = e(this.parameters.instanced) && this.parameters.instanced.includes(\"color\"), this._configuration.receiveShadows = this.parameters.receiveShadows && this.parameters.shadowMappingEnabled, this._configuration.receiveAmbientOcclusion = !!r.ssaoHelper.ready && this.parameters.receiveSSAO, this._configuration.vvColor = this.parameters.vvColorEnabled, this._configuration.textureAlphaPremultiplied = !!this.parameters.textureAlphaPremultiplied, this._configuration.pbrMode = this.parameters.usePBR ? this.parameters.isSchematic ? g.Schematic : g.Normal : g.Disabled, this._configuration.hasMetallicRoughnessTexture = !!this.parameters.metallicRoughnessTextureId, this._configuration.hasEmissionTexture = !!this.parameters.emissiveTextureId, this._configuration.hasOcclusionTexture = !!this.parameters.occlusionTextureId, this._configuration.offsetBackfaces = !(!this.parameters.transparent || !this.parameters.offsetTransparentBackfaces), this._configuration.transparencyPassType = r.transparencyPassType, this._configuration.enableOffset = r.camera.relativeElevation < v, this._configuration.snowCover = this.hasSnowCover(r), this._configuration.hasColorTextureTransform = !!this.parameters.colorTextureTransformMatrix, this._configuration.hasNormalTextureTransform = !!this.parameters.normalTextureTransformMatrix, this._configuration.hasEmissionTextureTransform = !!this.parameters.emissiveTextureTransformMatrix, this._configuration.hasOcclusionTextureTransform = !!this.parameters.occlusionTextureTransformMatrix, this._configuration.hasMetallicRoughnessTextureTransform = !!this.parameters.metallicRoughnessTextureTransformMatrix), this._configuration;\n  }\n\n  hasSnowCover(t) {\n    return e(t.weather) && t.weatherVisible && \"snowy\" === t.weather.type && \"enabled\" === t.weather.snowCover;\n  }\n\n  intersect(c, u, m, p, d, f, g) {\n    if (e(this.parameters.verticalOffset)) {\n      const e = p.camera;\n      t(k, m[12], m[13], m[14]);\n      let c = null;\n\n      switch (p.viewingMode) {\n        case l.Global:\n          c = a(U, k);\n          break;\n\n        case l.Local:\n          c = r(U, G);\n      }\n\n      let u = 0;\n\n      const g = s(q, k, e.eye),\n            T = i(g),\n            _ = o(g, g, 1 / T);\n\n      let b = null;\n      this.parameters.screenSizePerspective && (b = n(c, _)), u += M(e, T, this.parameters.verticalOffset, b, this.parameters.screenSizePerspective), o(c, c, u), h(z, c, p.transform.inverseRotation), d = s(V, d, z), f = s(H, f, z);\n    }\n\n    L(c, u, p, d, f, S(p.verticalOffset), g);\n  }\n\n  requiresSlot(e, t) {\n    if (t === p.Color || t === p.Alpha || t === p.Depth || t === p.Normal || t === p.Shadow || t === p.ShadowHighlight || t === p.ShadowExludeHighlight || t === p.Highlight || t === p.ObjectAndLayerIdColor) {\n      return e === (this.parameters.transparent ? this.parameters.writeDepth ? x.TRANSPARENT_MATERIAL : x.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL : x.OPAQUE_MATERIAL) || e === x.DRAPED_MATERIAL || t === p.ObjectAndLayerIdColor;\n    }\n\n    return !1;\n  }\n\n  createGLMaterial(e) {\n    return new R(e);\n  }\n\n  createBufferWriter() {\n    return new N(this._vertexBufferLayout, this._instanceBufferLayout);\n  }\n\n}\n\nclass R extends _ {\n  constructor(e) {\n    super({ ...e,\n      ...e.material.parameters\n    });\n  }\n\n  _updateParameters(e) {\n    const r = this._material.parameters;\n    this.updateTexture(r.textureId);\n    const a = e.camera.viewInverseTransposeMatrix;\n    return t(r.origin, a[3], a[7], a[11]), this._material.setParameters(this.textureBindParameters), this.ensureTechnique(r.treeRendering ? y : E, e);\n  }\n\n  _updateShadowState(e) {\n    e.shadowMap.enabled !== this._material.parameters.shadowMappingEnabled && this._material.setParameters({\n      shadowMappingEnabled: e.shadowMap.enabled\n    });\n  }\n\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.parameters.hasOccludees && this._material.setParameters({\n      hasOccludees: e.hasOccludees\n    });\n  }\n\n  beginSlot(e) {\n    return this._output !== p.Color && this._output !== p.Alpha || (this._updateShadowState(e), this._updateOccludeeState(e)), this._updateParameters(e);\n  }\n\n}\n\nclass D extends I {\n  constructor() {\n    super(...arguments), this.initTextureTransparent = !1, this.treeRendering = !1, this.hasVertexTangents = !1;\n  }\n\n}\n\nconst P = new D();\n\nclass N {\n  constructor(e, t) {\n    this.vertexBufferLayout = e, this.instanceBufferLayout = t;\n  }\n\n  allocate(e) {\n    return this.vertexBufferLayout.createBuffer(e);\n  }\n\n  elementCount(e) {\n    return e.indices.get(O.POSITION).length;\n  }\n\n  write(e, t, r, a, s) {\n    A(r, this.vertexBufferLayout, e, t, a, s);\n  }\n\n}\n\nfunction j(e) {\n  const t = e.textureId || e.normalTextureId || e.metallicRoughnessTextureId || e.emissiveTextureId || e.occlusionTextureId,\n        r = m().vec3f(O.POSITION).vec3f(O.NORMAL);\n  return e.hasVertexTangents && r.vec4f(O.TANGENT), t && r.vec2f(O.UV0), e.hasVertexColors && r.vec4u8(O.COLOR), e.hasSymbolColors && r.vec4u8(O.SYMBOLCOLOR), has(\"enable-feature:objectAndLayerId-rendering\") && r.vec4u8(O.OBJECTANDLAYERIDCOLOR), r;\n}\n\nfunction B(t) {\n  let r = m();\n  return r = t.instancedDoublePrecision ? r.vec3f(O.MODELORIGINHI).vec3f(O.MODELORIGINLO).mat3f(O.MODEL).mat3f(O.MODELNORMAL) : r.mat4f(O.MODEL).mat4f(O.MODELNORMAL), e(t.instanced) && t.instanced.includes(\"color\") && (r = r.vec4f(O.INSTANCECOLOR)), e(t.instanced) && t.instanced.includes(\"featureAttribute\") && (r = r.vec4f(O.INSTANCEFEATUREATTRIBUTE)), e(t.instanced) && t.instanced.includes(\"objectAndLayerIdColor\") && (r = r.vec4u8(O.OBJECTANDLAYERIDCOLOR_INSTANCED)), r;\n}\n\nconst V = c(),\n      H = c(),\n      G = u(0, 0, 1),\n      U = c(),\n      z = c(),\n      k = c(),\n      q = c();\nexport { R as DefaultGLMaterial, C as DefaultMaterial, D as DefaultMaterialParameters, B as getInstanceBufferLayout };","map":{"version":3,"names":["has","isSome","e","s","t","c","r","n","a","b","l","i","g","o","h","f","u","ViewingMode","newLayout","m","ShaderOutput","p","NormalAttributeType","d","NormalsDoubleSidedMode","PBRMode","CullFaceOptions","T","GLTextureMaterial","_","Material","OITPolygonOffsetLimit","v","RenderSlot","x","VertexAttribute","O","getVerticalOffsetObject3D","S","writeDefaultAttributes","A","verticalOffsetAtDistance","M","intersectTriangleGeometry","L","DefaultMaterialTechnique","E","DefaultMaterialPassParameters","I","DefaultMaterialTechniqueConfiguration","w","RealisticTreeTechnique","y","C","constructor","P","supportsEdges","_configuration","_vertexBufferLayout","j","parameters","_instanceBufferLayout","instanced","B","isVisibleForOutput","Shadow","ShadowExludeHighlight","ShadowHighlight","castShadows","isVisible","layerOpacity","hasVertexColors","hasSymbolColors","vvColorEnabled","includes","colorMixMode","opacity","externalColor","getConfiguration","output","hasNormalTexture","normalTextureId","hasColorTexture","textureId","hasVertexTangents","instancedDoublePrecision","vvSize","vvSizeEnabled","hasVerticalOffset","verticalOffset","hasScreenSizePerspective","screenSizePerspective","hasSlicePlane","hasSliceHighlight","alphaDiscardMode","textureAlphaMode","normalType","normals","ScreenDerivative","Attribute","transparent","writeDepth","customDepthTest","hasOccludees","cullFace","None","hasMultipassTerrain","multipassTerrain","enabled","cullAboveGround","hasModelTransformation","modelTransformation","Color","Alpha","treeRendering","doubleSidedMode","WindingOrder","doubleSided","doubleSidedType","View","instancedColor","receiveShadows","shadowMappingEnabled","receiveAmbientOcclusion","ssaoHelper","ready","receiveSSAO","vvColor","textureAlphaPremultiplied","pbrMode","usePBR","isSchematic","Schematic","Normal","Disabled","hasMetallicRoughnessTexture","metallicRoughnessTextureId","hasEmissionTexture","emissiveTextureId","hasOcclusionTexture","occlusionTextureId","offsetBackfaces","offsetTransparentBackfaces","transparencyPassType","enableOffset","camera","relativeElevation","snowCover","hasSnowCover","hasColorTextureTransform","colorTextureTransformMatrix","hasNormalTextureTransform","normalTextureTransformMatrix","hasEmissionTextureTransform","emissiveTextureTransformMatrix","hasOcclusionTextureTransform","occlusionTextureTransformMatrix","hasMetallicRoughnessTextureTransform","metallicRoughnessTextureTransformMatrix","weather","weatherVisible","type","intersect","k","viewingMode","Global","U","Local","G","q","eye","z","transform","inverseRotation","V","H","requiresSlot","Depth","Highlight","ObjectAndLayerIdColor","TRANSPARENT_MATERIAL","TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL","OPAQUE_MATERIAL","DRAPED_MATERIAL","createGLMaterial","R","createBufferWriter","N","material","_updateParameters","_material","updateTexture","viewInverseTransposeMatrix","origin","setParameters","textureBindParameters","ensureTechnique","_updateShadowState","shadowMap","_updateOccludeeState","beginSlot","_output","D","arguments","initTextureTransparent","vertexBufferLayout","instanceBufferLayout","allocate","createBuffer","elementCount","indices","get","POSITION","length","write","vec3f","NORMAL","vec4f","TANGENT","vec2f","UV0","vec4u8","COLOR","SYMBOLCOLOR","OBJECTANDLAYERIDCOLOR","MODELORIGINHI","MODELORIGINLO","mat3f","MODEL","MODELNORMAL","mat4f","INSTANCECOLOR","INSTANCEFEATUREATTRIBUTE","OBJECTANDLAYERIDCOLOR_INSTANCED","DefaultGLMaterial","DefaultMaterial","DefaultMaterialParameters","getInstanceBufferLayout"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{isSome as e}from\"../../../../core/maybe.js\";import{s as t,c as r,n as a,b as s,l as i,g as o,e as n,t as h}from\"../../../../chunks/vec3.js\";import{c,f as u}from\"../../../../chunks/vec3f64.js\";import{ViewingMode as l}from\"../../../ViewingMode.js\";import{newLayout as m}from\"../../support/buffer/InterleavedLayout.js\";import{ShaderOutput as p}from\"../core/shaderLibrary/ShaderOutput.js\";import{NormalAttributeType as d}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{NormalsDoubleSidedMode as f}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as g}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{CullFaceOptions as T}from\"../lib/basicInterfaces.js\";import{GLTextureMaterial as _}from\"../lib/GLTextureMaterial.js\";import{Material as b}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as v}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as x}from\"../lib/RenderSlot.js\";import{VertexAttribute as O}from\"../lib/VertexAttribute.js\";import{getVerticalOffsetObject3D as S}from\"../lib/verticalOffsetUtils.js\";import{writeDefaultAttributes as A}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as M,intersectTriangleGeometry as L}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechnique as E,DefaultMaterialPassParameters as I}from\"../shaders/DefaultMaterialTechnique.js\";import{DefaultMaterialTechniqueConfiguration as w}from\"../shaders/DefaultMaterialTechniqueConfiguration.js\";import{RealisticTreeTechnique as y}from\"../shaders/RealisticTreeTechnique.js\";class C extends b{constructor(e){super(e,P),this.supportsEdges=!0,this._configuration=new w,this._vertexBufferLayout=j(this.parameters),this._instanceBufferLayout=e.instanced?B(this.parameters):null}isVisibleForOutput(e){return e!==p.Shadow&&e!==p.ShadowExludeHighlight&&e!==p.ShadowHighlight||this.parameters.castShadows}isVisible(){const t=this.parameters;if(!super.isVisible()||0===t.layerOpacity)return!1;const{instanced:r,hasVertexColors:a,hasSymbolColors:s,vvColorEnabled:i}=t,o=e(r)&&r.includes(\"color\"),n=\"replace\"===t.colorMixMode,h=t.opacity>0,c=t.externalColor&&t.externalColor[3]>0;return a&&(o||i||s)?!!n||h:a?n?c:h:o||i||s?!!n||h:n?c:h}getConfiguration(t,r){return this._configuration.output=t,this._configuration.hasNormalTexture=!!this.parameters.normalTextureId,this._configuration.hasColorTexture=!!this.parameters.textureId,this._configuration.hasVertexTangents=this.parameters.hasVertexTangents,this._configuration.instanced=!!this.parameters.instanced,this._configuration.instancedDoublePrecision=this.parameters.instancedDoublePrecision,this._configuration.vvSize=this.parameters.vvSizeEnabled,this._configuration.hasVerticalOffset=e(this.parameters.verticalOffset),this._configuration.hasScreenSizePerspective=e(this.parameters.screenSizePerspective),this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasSliceHighlight=this.parameters.hasSliceHighlight,this._configuration.alphaDiscardMode=this.parameters.textureAlphaMode,this._configuration.normalType=\"screenDerivative\"===this.parameters.normals?d.ScreenDerivative:d.Attribute,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,e(this.parameters.customDepthTest)&&(this._configuration.customDepthTest=this.parameters.customDepthTest),this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.cullFace=this.parameters.hasSlicePlane?T.None:this.parameters.cullFace,this._configuration.hasMultipassTerrain=r.multipassTerrain.enabled,this._configuration.cullAboveGround=r.multipassTerrain.cullAboveGround,this._configuration.hasModelTransformation=e(this.parameters.modelTransformation),t!==p.Color&&t!==p.Alpha||(this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.hasSymbolColors=this.parameters.hasSymbolColors,this.parameters.treeRendering?this._configuration.doubleSidedMode=f.WindingOrder:this._configuration.doubleSidedMode=this.parameters.doubleSided&&\"normal\"===this.parameters.doubleSidedType?f.View:this.parameters.doubleSided&&\"winding-order\"===this.parameters.doubleSidedType?f.WindingOrder:f.None,this._configuration.instancedColor=e(this.parameters.instanced)&&this.parameters.instanced.includes(\"color\"),this._configuration.receiveShadows=this.parameters.receiveShadows&&this.parameters.shadowMappingEnabled,this._configuration.receiveAmbientOcclusion=!!r.ssaoHelper.ready&&this.parameters.receiveSSAO,this._configuration.vvColor=this.parameters.vvColorEnabled,this._configuration.textureAlphaPremultiplied=!!this.parameters.textureAlphaPremultiplied,this._configuration.pbrMode=this.parameters.usePBR?this.parameters.isSchematic?g.Schematic:g.Normal:g.Disabled,this._configuration.hasMetallicRoughnessTexture=!!this.parameters.metallicRoughnessTextureId,this._configuration.hasEmissionTexture=!!this.parameters.emissiveTextureId,this._configuration.hasOcclusionTexture=!!this.parameters.occlusionTextureId,this._configuration.offsetBackfaces=!(!this.parameters.transparent||!this.parameters.offsetTransparentBackfaces),this._configuration.transparencyPassType=r.transparencyPassType,this._configuration.enableOffset=r.camera.relativeElevation<v,this._configuration.snowCover=this.hasSnowCover(r),this._configuration.hasColorTextureTransform=!!this.parameters.colorTextureTransformMatrix,this._configuration.hasNormalTextureTransform=!!this.parameters.normalTextureTransformMatrix,this._configuration.hasEmissionTextureTransform=!!this.parameters.emissiveTextureTransformMatrix,this._configuration.hasOcclusionTextureTransform=!!this.parameters.occlusionTextureTransformMatrix,this._configuration.hasMetallicRoughnessTextureTransform=!!this.parameters.metallicRoughnessTextureTransformMatrix),this._configuration}hasSnowCover(t){return e(t.weather)&&t.weatherVisible&&\"snowy\"===t.weather.type&&\"enabled\"===t.weather.snowCover}intersect(c,u,m,p,d,f,g){if(e(this.parameters.verticalOffset)){const e=p.camera;t(k,m[12],m[13],m[14]);let c=null;switch(p.viewingMode){case l.Global:c=a(U,k);break;case l.Local:c=r(U,G)}let u=0;const g=s(q,k,e.eye),T=i(g),_=o(g,g,1/T);let b=null;this.parameters.screenSizePerspective&&(b=n(c,_)),u+=M(e,T,this.parameters.verticalOffset,b,this.parameters.screenSizePerspective),o(c,c,u),h(z,c,p.transform.inverseRotation),d=s(V,d,z),f=s(H,f,z)}L(c,u,p,d,f,S(p.verticalOffset),g)}requiresSlot(e,t){if(t===p.Color||t===p.Alpha||t===p.Depth||t===p.Normal||t===p.Shadow||t===p.ShadowHighlight||t===p.ShadowExludeHighlight||t===p.Highlight||t===p.ObjectAndLayerIdColor){return e===(this.parameters.transparent?this.parameters.writeDepth?x.TRANSPARENT_MATERIAL:x.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:x.OPAQUE_MATERIAL)||e===x.DRAPED_MATERIAL||t===p.ObjectAndLayerIdColor}return!1}createGLMaterial(e){return new R(e)}createBufferWriter(){return new N(this._vertexBufferLayout,this._instanceBufferLayout)}}class R extends _{constructor(e){super({...e,...e.material.parameters})}_updateParameters(e){const r=this._material.parameters;this.updateTexture(r.textureId);const a=e.camera.viewInverseTransposeMatrix;return t(r.origin,a[3],a[7],a[11]),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(r.treeRendering?y:E,e)}_updateShadowState(e){e.shadowMap.enabled!==this._material.parameters.shadowMappingEnabled&&this._material.setParameters({shadowMappingEnabled:e.shadowMap.enabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){return this._output!==p.Color&&this._output!==p.Alpha||(this._updateShadowState(e),this._updateOccludeeState(e)),this._updateParameters(e)}}class D extends I{constructor(){super(...arguments),this.initTextureTransparent=!1,this.treeRendering=!1,this.hasVertexTangents=!1}}const P=new D;class N{constructor(e,t){this.vertexBufferLayout=e,this.instanceBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(O.POSITION).length}write(e,t,r,a,s){A(r,this.vertexBufferLayout,e,t,a,s)}}function j(e){const t=e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId,r=m().vec3f(O.POSITION).vec3f(O.NORMAL);return e.hasVertexTangents&&r.vec4f(O.TANGENT),t&&r.vec2f(O.UV0),e.hasVertexColors&&r.vec4u8(O.COLOR),e.hasSymbolColors&&r.vec4u8(O.SYMBOLCOLOR),has(\"enable-feature:objectAndLayerId-rendering\")&&r.vec4u8(O.OBJECTANDLAYERIDCOLOR),r}function B(t){let r=m();return r=t.instancedDoublePrecision?r.vec3f(O.MODELORIGINHI).vec3f(O.MODELORIGINLO).mat3f(O.MODEL).mat3f(O.MODELNORMAL):r.mat4f(O.MODEL).mat4f(O.MODELNORMAL),e(t.instanced)&&t.instanced.includes(\"color\")&&(r=r.vec4f(O.INSTANCECOLOR)),e(t.instanced)&&t.instanced.includes(\"featureAttribute\")&&(r=r.vec4f(O.INSTANCEFEATUREATTRIBUTE)),e(t.instanced)&&t.instanced.includes(\"objectAndLayerIdColor\")&&(r=r.vec4u8(O.OBJECTANDLAYERIDCOLOR_INSTANCED)),r}const V=c(),H=c(),G=u(0,0,1),U=c(),z=c(),k=c(),q=c();export{R as DefaultGLMaterial,C as DefaultMaterial,D as DefaultMaterialParameters,B as getInstanceBufferLayout};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}