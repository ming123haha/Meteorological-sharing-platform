{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { id as e } from \"../kernel.js\";\nimport t from \"../request.js\";\nimport a from \"./featureSetCollection.js\";\nimport r from \"./featureset/actions/AttributeFilter.js\";\nimport n from \"./featureset/actions/GroupBy.js\";\nimport i from \"./featureset/actions/OrderBy.js\";\nimport s from \"./featureset/actions/SpatialFilter.js\";\nimport l from \"./featureset/actions/Top.js\";\nimport o from \"./featureset/sources/FeatureLayerDynamic.js\";\nimport u from \"./featureset/sources/FeatureLayerMemory.js\";\nimport c from \"./featureset/sources/FeatureLayerRelated.js\";\nimport d from \"./featureset/support/cache.js\";\nimport f from \"./featureset/support/FeatureSet.js\";\nimport { extractServiceUrl as m } from \"./featureset/support/shared.js\";\nimport { WhereClause as y } from \"../core/sql/WhereClause.js\";\nimport p from \"../layers/FeatureLayer.js\";\nimport h from \"../portal/Portal.js\";\nimport L from \"../portal/PortalItem.js\";\n\nfunction _() {\n  null === d.applicationCache && (d.applicationCache = new d());\n}\n\nasync function w(e, t) {\n  if (d.applicationCache) {\n    const r = d.applicationCache.getLayerInfo(e);\n\n    if (r) {\n      const a = await r;\n      return new p({\n        url: e,\n        outFields: t,\n        sourceJSON: a\n      });\n    }\n\n    const n = new p({\n      url: e,\n      outFields: t\n    }),\n          i = (async () => (await n.load(), n.sourceJSON))();\n\n    if (d.applicationCache) {\n      d.applicationCache.setLayerInfo(e, i);\n\n      try {\n        return await i, n;\n      } catch (a) {\n        throw d.applicationCache.clearLayerInfo(e), a;\n      }\n    }\n\n    return await i, n;\n  }\n\n  return new p({\n    url: e,\n    outFields: t\n  });\n}\n\nasync function I(e, t, a, r, n, i = null) {\n  return S(await w(e, [\"*\"]), t, a, r, n, i);\n}\n\nfunction S(e, t = null, a = null, r = !0, n = null, i = null) {\n  return !0 === e._hasMemorySource() ? new u({\n    layer: e,\n    spatialReference: t,\n    outFields: a,\n    includeGeometry: r,\n    lrucache: n,\n    interceptor: i\n  }) : new o({\n    layer: e,\n    spatialReference: t,\n    outFields: a,\n    includeGeometry: r,\n    lrucache: n,\n    interceptor: i\n  });\n}\n\nasync function N(e) {\n  if (null !== d.applicationCache) {\n    const t = d.applicationCache.getLayerInfo(e);\n    if (null !== t) return t;\n  }\n\n  const a = (async () => {\n    const a = await t(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    });\n    return a.data ? a.data : null;\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(e, a);\n\n    try {\n      return await a;\n    } catch (r) {\n      throw d.applicationCache.clearLayerInfo(e), r;\n    }\n  }\n\n  return a;\n}\n\nasync function F(e, a) {\n  const r = \"QUERYDATAELEMTS:\" + a.toString() + \":\" + e;\n\n  if (null !== d.applicationCache) {\n    const e = d.applicationCache.getLayerInfo(r);\n    if (null !== e) return e;\n  }\n\n  const n = (async () => {\n    const r = await t(e + \"/queryDataElements\", {\n      method: \"post\",\n      responseType: \"json\",\n      query: {\n        layers: JSON.stringify([a.toString()]),\n        f: \"json\"\n      }\n    });\n\n    if (r.data) {\n      const e = r.data;\n      if (e.layerDataElements && e.layerDataElements[0]) return e.layerDataElements[0];\n    }\n\n    throw new Error(\"Not Found\");\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(r, n);\n\n    try {\n      return await n;\n    } catch (i) {\n      throw d.applicationCache.clearLayerInfo(r), i;\n    }\n  }\n\n  return n;\n}\n\nasync function T(e) {\n  if (null !== d.applicationCache) {\n    const t = d.applicationCache.getLayerInfo(e);\n    if (null !== t) return t;\n  }\n\n  const a = (async () => {\n    const a = await t(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    });\n\n    if (a.data) {\n      const e = a.data;\n      return e.layers || (e.layers = []), e.tables || (e.tables = []), e;\n    }\n\n    return {\n      layers: [],\n      tables: []\n    };\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(e, a);\n\n    try {\n      return await a;\n    } catch (r) {\n      throw d.applicationCache.clearLayerInfo(e), r;\n    }\n  }\n\n  return a;\n}\n\nasync function g(e, t) {\n  const a = {\n    metadata: null,\n    networkId: -1,\n    unVersion: 3,\n    terminals: [],\n    queryelem: null,\n    layerNameLkp: {},\n    lkp: null\n  },\n        r = await T(e);\n\n  if (a.metadata = r, r.controllerDatasetLayers && void 0 !== r.controllerDatasetLayers.utilityNetworkLayerId && null !== r.controllerDatasetLayers.utilityNetworkLayerId) {\n    if (r.layers) for (const e of r.layers) a.layerNameLkp[e.id] = e.name;\n    if (r.tables) for (const e of r.tables) a.layerNameLkp[e.id] = e.name;\n    const n = r.controllerDatasetLayers.utilityNetworkLayerId;\n    a.networkId = n;\n    const i = await F(e, n);\n\n    if (i) {\n      a.queryelem = i, a.queryelem && a.queryelem.dataElement && void 0 !== a.queryelem.dataElement.schemaGeneration && (a.unVersion = a.queryelem.dataElement.schemaGeneration), a.lkp = {}, a.queryelem.dataElement.domainNetworks || (a.queryelem.dataElement.domainNetworks = []);\n\n      for (const e of a.queryelem.dataElement.domainNetworks) {\n        for (const t of e.edgeSources ? e.edgeSources : []) {\n          const e = {\n            layerId: t.layerId,\n            sourceId: t.sourceId,\n            className: a.layerNameLkp[t.layerId] ? a.layerNameLkp[t.layerId] : null\n          };\n          e.className && (a.lkp[e.className] = e);\n        }\n\n        for (const t of e.junctionSources ? e.junctionSources : []) {\n          const e = {\n            layerId: t.layerId,\n            sourceId: t.sourceId,\n            className: a.layerNameLkp[t.layerId] ? a.layerNameLkp[t.layerId] : null\n          };\n          e.className && (a.lkp[e.className] = e);\n        }\n      }\n\n      if (a.queryelem.dataElement.terminalConfigurations) for (const e of a.queryelem.dataElement.terminalConfigurations) for (const t of e.terminals) a.terminals.push({\n        terminalId: t.terminalId,\n        terminalName: t.terminalName\n      });\n      const r = await N(e + \"/\" + n);\n\n      if (r.systemLayers && void 0 !== r.systemLayers.associationsTableId && null !== r.systemLayers.associationsTableId) {\n        const n = [];\n        a.unVersion >= 4 && (n.push(\"STATUS\"), n.push(\"PERCENTALONG\"));\n        let i = await I(e + \"/\" + r.systemLayers.associationsTableId.toString(), t, [\"OBJECTID\", \"FROMNETWORKSOURCEID\", \"TONETWORKSOURCEID\", \"FROMGLOBALID\", \"TOGLOBALID\", \"TOTERMINALID\", \"FROMTERMINALID\", \"ASSOCIATIONTYPE\", \"ISCONTENTVISIBLE\", \"GLOBALID\", ...n], !1, null, null);\n        return await i.load(), a.unVersion >= 4 && (i = i.filter(y.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\", i.getFieldsIndex())), await i.load()), {\n          lkp: a.lkp,\n          associations: i,\n          unVersion: a.unVersion,\n          terminals: a.terminals\n        };\n      }\n\n      return {\n        associations: null,\n        unVersion: a.unVersion,\n        lkp: null,\n        terminals: []\n      };\n    }\n\n    return {\n      associations: null,\n      unVersion: a.unVersion,\n      lkp: null,\n      terminals: []\n    };\n  }\n\n  return {\n    associations: null,\n    unVersion: a.unVersion,\n    lkp: null,\n    terminals: []\n  };\n}\n\nasync function A(e, t, a, r = null, n = null, i = !0, s = null, l = null) {\n  let o = e.serviceUrl();\n  if (!o) return null;\n  o = \"/\" === o.charAt(o.length - 1) ? o + t.relatedTableId.toString() : o + \"/\" + t.relatedTableId.toString();\n  const u = await I(o, r, n, i, s, l);\n  return new c({\n    layer: e,\n    relatedLayer: u,\n    relationship: t,\n    objectId: a,\n    spatialReference: r,\n    outFields: n,\n    includeGeometry: i,\n    lrucache: s,\n    interceptor: l\n  });\n}\n\nr.registerAction(), n.registerAction(), i.registerAction(), s.registerAction(), l.registerAction();\n\nclass C extends a {\n  constructor(e, t = null, a = null, r = null) {\n    super(), this._map = e, this._overridespref = t, this.lrucache = a, this.interceptor = r, this._instantLayers = [];\n  }\n\n  _makeAndAddFeatureSet(e, t = !0, a = null) {\n    const r = S(e, this._overridespref, null === a ? [\"*\"] : a, t, this.lrucache, this.interceptor);\n    return this._instantLayers.push({\n      featureset: r,\n      opitem: e,\n      includeGeometry: t,\n      outFields: JSON.stringify(a)\n    }), r;\n  }\n\n  async featureSetByName(e, t = !0, a = null) {\n    if (void 0 !== this._map.loaded && void 0 !== this._map.load && !1 === this._map.loaded) return await this._map.load(), this.featureSetByName(e, t, a);\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let i = 0; i < this._instantLayers.length; i++) {\n      const a = this._instantLayers[i];\n      if (a.opitem.title === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[i].featureset;\n    }\n\n    const n = this._map.allLayers.find(t => t instanceof p && t.title === e);\n\n    if (n) return this._makeAndAddFeatureSet(n, t, a);\n\n    if (this._map.tables) {\n      const r = this._map.tables.find(t => !!(t.title && t.title === e || t.title && t.title === e));\n\n      if (r) {\n        if (r instanceof p) return this._makeAndAddFeatureSet(r, t, a);\n        if (r._materializedTable) ;else {\n          const e = r.outFields ? r : { ...r,\n            outFields: [\"*\"]\n          };\n          r._materializedTable = new p(e);\n        }\n        return await r._materializedTable.load(), this._makeAndAddFeatureSet(r._materializedTable, t, a);\n      }\n    }\n\n    return null;\n  }\n\n  async featureSetById(e, t = !0, a = [\"*\"]) {\n    if (void 0 !== this._map.loaded && void 0 !== this._map.load && !1 === this._map.loaded) return await this._map.load(), this.featureSetById(e, t, a);\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let i = 0; i < this._instantLayers.length; i++) {\n      const a = this._instantLayers[i];\n      if (a.opitem.id === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[i].featureset;\n    }\n\n    const n = this._map.allLayers.find(t => t instanceof p && t.id === e);\n\n    if (n) return this._makeAndAddFeatureSet(n, t, a);\n\n    if (this._map.tables) {\n      const r = this._map.tables.find(t => t.id === e);\n\n      if (r) {\n        if (r instanceof p) return this._makeAndAddFeatureSet(r, t, a);\n        if (r._materializedTable) ;else {\n          const e = { ...r,\n            outFields: [\"*\"]\n          };\n          r._materializedTable = new p(e);\n        }\n        return await r._materializedTable.load(), this._makeAndAddFeatureSet(r._materializedTable, t, a);\n      }\n    }\n\n    return null;\n  }\n\n}\n\nclass k extends a {\n  constructor(e, t = null, a = null, r = null) {\n    super(), this._url = e, this._overridespref = t, this.lrucache = a, this.interceptor = r, this.metadata = null, this._instantLayers = [];\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  _makeAndAddFeatureSet(e, t = !0, a = null) {\n    const r = S(e, this._overridespref, null === a ? [\"*\"] : a, t, this.lrucache);\n    return this._instantLayers.push({\n      featureset: r,\n      opitem: e,\n      includeGeometry: t,\n      outFields: JSON.stringify(a)\n    }), r;\n  }\n\n  async _loadMetaData() {\n    const e = await T(this._url);\n    return this.metadata = e, e;\n  }\n\n  load() {\n    return this._loadMetaData();\n  }\n\n  clone() {\n    return new k(this._url, this._overridespref, this.lrucache, this.interceptor);\n  }\n\n  async featureSetByName(e, t = !0, a = null) {\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let s = 0; s < this._instantLayers.length; s++) {\n      const a = this._instantLayers[s];\n      if (a.opitem.title === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[s].featureset;\n    }\n\n    const n = await this._loadMetaData();\n    let i = null;\n\n    for (const s of n.layers ? n.layers : []) s.name === e && (i = s);\n\n    if (!i) for (const s of n.tables ? n.tables : []) s.name === e && (i = s);\n\n    if (i) {\n      const e = await w(this._url + \"/\" + i.id, [\"*\"]);\n      return this._makeAndAddFeatureSet(e, t, a);\n    }\n\n    return null;\n  }\n\n  async featureSetById(e, t = !0, a = [\"*\"]) {\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n    e = null != e ? e.toString() : \"\";\n\n    for (let s = 0; s < this._instantLayers.length; s++) {\n      const a = this._instantLayers[s];\n      if (a.opitem.id === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[s].featureset;\n    }\n\n    const n = await this._loadMetaData();\n    let i = null;\n\n    for (const s of n.layers ? n.layers : []) null !== s.id && void 0 !== s.id && s.id.toString() === e && (i = s);\n\n    if (!i) for (const s of n.tables ? n.tables : []) null !== s.id && void 0 !== s.id && s.id.toString() === e && (i = s);\n\n    if (i) {\n      const e = await w(this._url + \"/\" + i.id, [\"*\"]);\n      return this._makeAndAddFeatureSet(e, t, a);\n    }\n\n    return null;\n  }\n\n}\n\nfunction j(e, t, a = null, r = null) {\n  return new C(e, t, a, r);\n}\n\nfunction O(e, t, a = null, r = null) {\n  return new k(e, t, a, r);\n}\n\nfunction E(e, t) {\n  if (null === e) return t;\n  return new h({\n    url: e.field(\"url\")\n  });\n}\n\nasync function b(a, r, n) {\n  if (!e.findCredential(a.restUrl)) return null;\n  if (\"loaded\" === a.loadStatus && \"\" === r && a.user && a.user.sourceJSON && !1 === n) return a.user.sourceJSON;\n\n  if (\"\" === r) {\n    const e = await t(a.restUrl + \"/community/self\", {\n      responseType: \"json\",\n      query: {\n        f: \"json\",\n        ...(!1 === n ? {} : {\n          returnUserLicenseTypeExtensions: !0\n        })\n      }\n    });\n\n    if (e.data) {\n      const t = e.data;\n      if (t && t.username) return t;\n    }\n\n    return null;\n  }\n\n  const i = await t(a.restUrl + \"/community/users/\" + r, {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    }\n  });\n\n  if (i.data) {\n    const e = i.data;\n    return e.error ? null : e;\n  }\n\n  return null;\n}\n\nfunction D(e, t, a, r, n) {\n  if (null === e) return null;\n\n  if (e instanceof p) {\n    switch (t) {\n      case \"datasource\":\n        return S(e, n, e.outFields, !0, a, r).getDataSourceFeatureSet();\n\n      case \"parent\":\n      case \"root\":\n        return S(e, n, e.outFields, !0, a, r);\n    }\n\n    return null;\n  }\n\n  if (e instanceof f) switch (t) {\n    case \"datasource\":\n      return e.getDataSourceFeatureSet();\n\n    case \"parent\":\n      return e;\n\n    case \"root\":\n      return e.getRootFeatureSet();\n  }\n  return null;\n}\n\nasync function q(e, t, a, r, n, i, s, l = null) {\n  if (d.applicationCache) {\n    const o = d.applicationCache.getLayerInfo(e + \":\" + i.url);\n\n    if (o) {\n      const e = await o;\n      return S(new p({\n        url: m(e.url) + \"/\" + t,\n        outFields: [\"*\"]\n      }), a, r, n, s, l);\n    }\n  }\n\n  const o = new L({\n    id: e,\n    portal: i\n  }).load();\n  d.applicationCache && d.applicationCache.setLayerInfo(e + \":\" + i.url, o);\n\n  try {\n    const e = await o;\n    return S(new p({\n      url: m(e.url) + \"/\" + t,\n      outFields: [\"*\"]\n    }), a, r, n, s, l);\n  } catch (u) {\n    throw d.applicationCache && d.applicationCache.clearLayerInfo(e + \":\" + i.url), u;\n  }\n}\n\nexport { g as constructAssociationMetaDataFeatureSetFromUrl, S as constructFeatureSet, q as constructFeatureSetFromPortalItem, A as constructFeatureSetFromRelationship, I as constructFeatureSetFromUrl, D as convertToFeatureSet, j as createFeatureSetCollectionFromMap, O as createFeatureSetCollectionFromService, E as getPortal, _ as initialiseMetaDataCache, b as lookupUser };","map":{"version":3,"names":["id","e","t","a","r","n","i","s","l","o","u","c","d","f","extractServiceUrl","m","WhereClause","y","p","h","L","_","applicationCache","w","getLayerInfo","url","outFields","sourceJSON","load","setLayerInfo","clearLayerInfo","I","S","_hasMemorySource","layer","spatialReference","includeGeometry","lrucache","interceptor","N","responseType","query","data","F","toString","method","layers","JSON","stringify","layerDataElements","Error","T","tables","g","metadata","networkId","unVersion","terminals","queryelem","layerNameLkp","lkp","controllerDatasetLayers","utilityNetworkLayerId","name","dataElement","schemaGeneration","domainNetworks","edgeSources","layerId","sourceId","className","junctionSources","terminalConfigurations","push","terminalId","terminalName","systemLayers","associationsTableId","filter","create","getFieldsIndex","associations","A","serviceUrl","charAt","length","relatedTableId","relatedLayer","relationship","objectId","registerAction","C","constructor","_map","_overridespref","_instantLayers","_makeAndAddFeatureSet","featureset","opitem","featureSetByName","loaded","slice","sort","title","allLayers","find","_materializedTable","featureSetById","k","_url","_loadMetaData","clone","j","O","E","field","b","findCredential","restUrl","loadStatus","user","returnUserLicenseTypeExtensions","username","error","D","getDataSourceFeatureSet","getRootFeatureSet","q","portal","constructAssociationMetaDataFeatureSetFromUrl","constructFeatureSet","constructFeatureSetFromPortalItem","constructFeatureSetFromRelationship","constructFeatureSetFromUrl","convertToFeatureSet","createFeatureSetCollectionFromMap","createFeatureSetCollectionFromService","getPortal","initialiseMetaDataCache","lookupUser"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureSetUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{id as e}from\"../kernel.js\";import t from\"../request.js\";import a from\"./featureSetCollection.js\";import r from\"./featureset/actions/AttributeFilter.js\";import n from\"./featureset/actions/GroupBy.js\";import i from\"./featureset/actions/OrderBy.js\";import s from\"./featureset/actions/SpatialFilter.js\";import l from\"./featureset/actions/Top.js\";import o from\"./featureset/sources/FeatureLayerDynamic.js\";import u from\"./featureset/sources/FeatureLayerMemory.js\";import c from\"./featureset/sources/FeatureLayerRelated.js\";import d from\"./featureset/support/cache.js\";import f from\"./featureset/support/FeatureSet.js\";import{extractServiceUrl as m}from\"./featureset/support/shared.js\";import{WhereClause as y}from\"../core/sql/WhereClause.js\";import p from\"../layers/FeatureLayer.js\";import h from\"../portal/Portal.js\";import L from\"../portal/PortalItem.js\";function _(){null===d.applicationCache&&(d.applicationCache=new d)}async function w(e,t){if(d.applicationCache){const r=d.applicationCache.getLayerInfo(e);if(r){const a=await r;return new p({url:e,outFields:t,sourceJSON:a})}const n=new p({url:e,outFields:t}),i=(async()=>(await n.load(),n.sourceJSON))();if(d.applicationCache){d.applicationCache.setLayerInfo(e,i);try{return await i,n}catch(a){throw d.applicationCache.clearLayerInfo(e),a}}return await i,n}return new p({url:e,outFields:t})}async function I(e,t,a,r,n,i=null){return S(await w(e,[\"*\"]),t,a,r,n,i)}function S(e,t=null,a=null,r=!0,n=null,i=null){return!0===e._hasMemorySource()?new u({layer:e,spatialReference:t,outFields:a,includeGeometry:r,lrucache:n,interceptor:i}):new o({layer:e,spatialReference:t,outFields:a,includeGeometry:r,lrucache:n,interceptor:i})}async function N(e){if(null!==d.applicationCache){const t=d.applicationCache.getLayerInfo(e);if(null!==t)return t}const a=(async()=>{const a=await t(e,{responseType:\"json\",query:{f:\"json\"}});return a.data?a.data:null})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(e,a);try{return await a}catch(r){throw d.applicationCache.clearLayerInfo(e),r}}return a}async function F(e,a){const r=\"QUERYDATAELEMTS:\"+a.toString()+\":\"+e;if(null!==d.applicationCache){const e=d.applicationCache.getLayerInfo(r);if(null!==e)return e}const n=(async()=>{const r=await t(e+\"/queryDataElements\",{method:\"post\",responseType:\"json\",query:{layers:JSON.stringify([a.toString()]),f:\"json\"}});if(r.data){const e=r.data;if(e.layerDataElements&&e.layerDataElements[0])return e.layerDataElements[0]}throw new Error(\"Not Found\")})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(r,n);try{return await n}catch(i){throw d.applicationCache.clearLayerInfo(r),i}}return n}async function T(e){if(null!==d.applicationCache){const t=d.applicationCache.getLayerInfo(e);if(null!==t)return t}const a=(async()=>{const a=await t(e,{responseType:\"json\",query:{f:\"json\"}});if(a.data){const e=a.data;return e.layers||(e.layers=[]),e.tables||(e.tables=[]),e}return{layers:[],tables:[]}})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(e,a);try{return await a}catch(r){throw d.applicationCache.clearLayerInfo(e),r}}return a}async function g(e,t){const a={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null},r=await T(e);if(a.metadata=r,r.controllerDatasetLayers&&void 0!==r.controllerDatasetLayers.utilityNetworkLayerId&&null!==r.controllerDatasetLayers.utilityNetworkLayerId){if(r.layers)for(const e of r.layers)a.layerNameLkp[e.id]=e.name;if(r.tables)for(const e of r.tables)a.layerNameLkp[e.id]=e.name;const n=r.controllerDatasetLayers.utilityNetworkLayerId;a.networkId=n;const i=await F(e,n);if(i){a.queryelem=i,a.queryelem&&a.queryelem.dataElement&&void 0!==a.queryelem.dataElement.schemaGeneration&&(a.unVersion=a.queryelem.dataElement.schemaGeneration),a.lkp={},a.queryelem.dataElement.domainNetworks||(a.queryelem.dataElement.domainNetworks=[]);for(const e of a.queryelem.dataElement.domainNetworks){for(const t of e.edgeSources?e.edgeSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}for(const t of e.junctionSources?e.junctionSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}}if(a.queryelem.dataElement.terminalConfigurations)for(const e of a.queryelem.dataElement.terminalConfigurations)for(const t of e.terminals)a.terminals.push({terminalId:t.terminalId,terminalName:t.terminalName});const r=await N(e+\"/\"+n);if(r.systemLayers&&void 0!==r.systemLayers.associationsTableId&&null!==r.systemLayers.associationsTableId){const n=[];a.unVersion>=4&&(n.push(\"STATUS\"),n.push(\"PERCENTALONG\"));let i=await I(e+\"/\"+r.systemLayers.associationsTableId.toString(),t,[\"OBJECTID\",\"FROMNETWORKSOURCEID\",\"TONETWORKSOURCEID\",\"FROMGLOBALID\",\"TOGLOBALID\",\"TOTERMINALID\",\"FROMTERMINALID\",\"ASSOCIATIONTYPE\",\"ISCONTENTVISIBLE\",\"GLOBALID\",...n],!1,null,null);return await i.load(),a.unVersion>=4&&(i=i.filter(y.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\",i.getFieldsIndex())),await i.load()),{lkp:a.lkp,associations:i,unVersion:a.unVersion,terminals:a.terminals}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}async function A(e,t,a,r=null,n=null,i=!0,s=null,l=null){let o=e.serviceUrl();if(!o)return null;o=\"/\"===o.charAt(o.length-1)?o+t.relatedTableId.toString():o+\"/\"+t.relatedTableId.toString();const u=await I(o,r,n,i,s,l);return new c({layer:e,relatedLayer:u,relationship:t,objectId:a,spatialReference:r,outFields:n,includeGeometry:i,lrucache:s,interceptor:l})}r.registerAction(),n.registerAction(),i.registerAction(),s.registerAction(),l.registerAction();class C extends a{constructor(e,t=null,a=null,r=null){super(),this._map=e,this._overridespref=t,this.lrucache=a,this.interceptor=r,this._instantLayers=[]}_makeAndAddFeatureSet(e,t=!0,a=null){const r=S(e,this._overridespref,null===a?[\"*\"]:a,t,this.lrucache,this.interceptor);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async featureSetByName(e,t=!0,a=null){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetByName(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=this._map.allLayers.find((t=>t instanceof p&&t.title===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>!!(t.title&&t.title===e||t.title&&t.title===e)));if(r){if(r instanceof p)return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e=r.outFields?r:{...r,outFields:[\"*\"]};r._materializedTable=new p(e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}async featureSetById(e,t=!0,a=[\"*\"]){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetById(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=this._map.allLayers.find((t=>t instanceof p&&t.id===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>t.id===e));if(r){if(r instanceof p)return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e={...r,outFields:[\"*\"]};r._materializedTable=new p(e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}}class k extends a{constructor(e,t=null,a=null,r=null){super(),this._url=e,this._overridespref=t,this.lrucache=a,this.interceptor=r,this.metadata=null,this._instantLayers=[]}get url(){return this._url}_makeAndAddFeatureSet(e,t=!0,a=null){const r=S(e,this._overridespref,null===a?[\"*\"]:a,t,this.lrucache);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async _loadMetaData(){const e=await T(this._url);return this.metadata=e,e}load(){return this._loadMetaData()}clone(){return new k(this._url,this._overridespref,this.lrucache,this.interceptor)}async featureSetByName(e,t=!0,a=null){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=await this._loadMetaData();let i=null;for(const s of n.layers?n.layers:[])s.name===e&&(i=s);if(!i)for(const s of n.tables?n.tables:[])s.name===e&&(i=s);if(i){const e=await w(this._url+\"/\"+i.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}async featureSetById(e,t=!0,a=[\"*\"]){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);e=null!=e?e.toString():\"\";for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=await this._loadMetaData();let i=null;for(const s of n.layers?n.layers:[])null!==s.id&&void 0!==s.id&&s.id.toString()===e&&(i=s);if(!i)for(const s of n.tables?n.tables:[])null!==s.id&&void 0!==s.id&&s.id.toString()===e&&(i=s);if(i){const e=await w(this._url+\"/\"+i.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}}function j(e,t,a=null,r=null){return new C(e,t,a,r)}function O(e,t,a=null,r=null){return new k(e,t,a,r)}function E(e,t){if(null===e)return t;return new h({url:e.field(\"url\")})}async function b(a,r,n){if(!e.findCredential(a.restUrl))return null;if(\"loaded\"===a.loadStatus&&\"\"===r&&a.user&&a.user.sourceJSON&&!1===n)return a.user.sourceJSON;if(\"\"===r){const e=await t(a.restUrl+\"/community/self\",{responseType:\"json\",query:{f:\"json\",...!1===n?{}:{returnUserLicenseTypeExtensions:!0}}});if(e.data){const t=e.data;if(t&&t.username)return t}return null}const i=await t(a.restUrl+\"/community/users/\"+r,{responseType:\"json\",query:{f:\"json\"}});if(i.data){const e=i.data;return e.error?null:e}return null}function D(e,t,a,r,n){if(null===e)return null;if(e instanceof p){switch(t){case\"datasource\":return S(e,n,e.outFields,!0,a,r).getDataSourceFeatureSet();case\"parent\":case\"root\":return S(e,n,e.outFields,!0,a,r)}return null}if(e instanceof f)switch(t){case\"datasource\":return e.getDataSourceFeatureSet();case\"parent\":return e;case\"root\":return e.getRootFeatureSet()}return null}async function q(e,t,a,r,n,i,s,l=null){if(d.applicationCache){const o=d.applicationCache.getLayerInfo(e+\":\"+i.url);if(o){const e=await o;return S(new p({url:m(e.url)+\"/\"+t,outFields:[\"*\"]}),a,r,n,s,l)}}const o=new L({id:e,portal:i}).load();d.applicationCache&&d.applicationCache.setLayerInfo(e+\":\"+i.url,o);try{const e=await o;return S(new p({url:m(e.url)+\"/\"+t,outFields:[\"*\"]}),a,r,n,s,l)}catch(u){throw d.applicationCache&&d.applicationCache.clearLayerInfo(e+\":\"+i.url),u}}export{g as constructAssociationMetaDataFeatureSetFromUrl,S as constructFeatureSet,q as constructFeatureSetFromPortalItem,A as constructFeatureSetFromRelationship,I as constructFeatureSetFromUrl,D as convertToFeatureSet,j as createFeatureSetCollectionFromMap,O as createFeatureSetCollectionFromService,E as getPortal,_ as initialiseMetaDataCache,b as lookupUser};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}