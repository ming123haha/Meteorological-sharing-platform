{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { getExpressionFromFieldName as e, getWhereClause as s, getAliasFromFieldName as i } from \"./attributeSupport.js\";\nimport { getNormalizedValue as a } from \"../../../statistics/utils.js\";\n\nclass r {\n  constructor(t, a, r) {\n    this._fieldDataCache = new Map(), this._returnDistinctMap = new Map(), this.returnDistinctValues = t.returnDistinctValues, this.fieldsIndex = r, this.featureAdapter = a;\n    const l = t.outFields;\n\n    if (l && !l.includes(\"*\")) {\n      this.outFields = l;\n      let t = 0;\n\n      for (const a of l) {\n        const l = e(a),\n              u = this.fieldsIndex.get(l),\n              n = u ? null : s(l, r),\n              c = u ? u.name : i(a) || \"FIELD_EXP_\" + t++;\n\n        this._fieldDataCache.set(a, {\n          alias: c,\n          clause: n\n        });\n      }\n    }\n  }\n\n  countDistinctValues(t) {\n    return this.returnDistinctValues ? (t.forEach(t => this.getAttributes(t)), this._returnDistinctMap.size) : t.length;\n  }\n\n  getAttributes(t) {\n    const e = this._processAttributesForOutFields(t);\n\n    return this._processAttributesForDistinctValues(e);\n  }\n\n  getFieldValue(t, e, i) {\n    const a = i ? i.name : e;\n    let r = null;\n    return this._fieldDataCache.has(a) ? r = this._fieldDataCache.get(a).clause : i || (r = s(e, this.fieldsIndex), this._fieldDataCache.set(a, {\n      alias: a,\n      clause: r\n    })), i ? this.featureAdapter.getAttribute(t, a) : r.calculateValue(t, this.featureAdapter);\n  }\n\n  getNormalizedValue(t, e) {\n    const s = e.normalizationType,\n          i = e.normalizationTotal;\n    let r = this.getFieldValue(t, e.field, e.fieldInfo);\n\n    if (s && Number.isFinite(r)) {\n      const l = this.getFieldValue(t, e.normalizationField, e.normalizationFieldInfo);\n      r = a(r, s, l, i);\n    }\n\n    return r;\n  }\n\n  getExpressionValue(t, e, s, i) {\n    const a = {\n      attributes: this.featureAdapter.getAttributes(t),\n      layer: {\n        fields: this.fieldsIndex.fields\n      }\n    },\n          r = i.createExecContext(a, s);\n    return i.executeFunction(e, r);\n  }\n\n  getExpressionValues(t, e, s, i) {\n    const a = {\n      fields: this.fieldsIndex.fields\n    };\n    return t.map(t => {\n      const r = {\n        attributes: this.featureAdapter.getAttributes(t),\n        layer: a\n      },\n            l = i.createExecContext(r, s);\n      return i.executeFunction(e, l);\n    });\n  }\n\n  validateItem(t, e) {\n    return this._fieldDataCache.has(e) || this._fieldDataCache.set(e, {\n      alias: e,\n      clause: s(e, this.fieldsIndex)\n    }), this._fieldDataCache.get(e).clause.testFeature(t, this.featureAdapter);\n  }\n\n  validateItems(t, e) {\n    return this._fieldDataCache.has(e) || this._fieldDataCache.set(e, {\n      alias: e,\n      clause: s(e, this.fieldsIndex)\n    }), this._fieldDataCache.get(e).clause.testSet(t, this.featureAdapter);\n  }\n\n  _processAttributesForOutFields(t) {\n    const e = this.outFields;\n    if (!e || !e.length) return this.featureAdapter.getAttributes(t);\n    const s = {};\n\n    for (const i of e) {\n      const {\n        alias: e,\n        clause: a\n      } = this._fieldDataCache.get(i);\n\n      s[e] = a ? a.calculateValue(t, this.featureAdapter) : this.featureAdapter.getAttribute(t, e);\n    }\n\n    return s;\n  }\n\n  _processAttributesForDistinctValues(e) {\n    if (t(e) || !this.returnDistinctValues) return e;\n    const s = this.outFields,\n          i = [];\n    if (s) for (const t of s) {\n      const {\n        alias: s\n      } = this._fieldDataCache.get(t);\n\n      i.push(e[s]);\n    } else for (const t in e) i.push(e[t]);\n    const a = `${(s || [\"*\"]).join(\",\")}=${i.join(\",\")}`;\n    let r = this._returnDistinctMap.get(a) || 0;\n    return this._returnDistinctMap.set(a, ++r), r > 1 ? null : e;\n  }\n\n}\n\nexport { r as default };","map":{"version":3,"names":["isNone","t","getExpressionFromFieldName","e","getWhereClause","s","getAliasFromFieldName","i","getNormalizedValue","a","r","constructor","_fieldDataCache","Map","_returnDistinctMap","returnDistinctValues","fieldsIndex","featureAdapter","l","outFields","includes","u","get","n","c","name","set","alias","clause","countDistinctValues","forEach","getAttributes","size","length","_processAttributesForOutFields","_processAttributesForDistinctValues","getFieldValue","has","getAttribute","calculateValue","normalizationType","normalizationTotal","field","fieldInfo","Number","isFinite","normalizationField","normalizationFieldInfo","getExpressionValue","attributes","layer","fields","createExecContext","executeFunction","getExpressionValues","map","validateItem","testFeature","validateItems","testSet","push","join","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{getExpressionFromFieldName as e,getWhereClause as s,getAliasFromFieldName as i}from\"./attributeSupport.js\";import{getNormalizedValue as a}from\"../../../statistics/utils.js\";class r{constructor(t,a,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=a;const l=t.outFields;if(l&&!l.includes(\"*\")){this.outFields=l;let t=0;for(const a of l){const l=e(a),u=this.fieldsIndex.get(l),n=u?null:s(l,r),c=u?u.name:i(a)||\"FIELD_EXP_\"+t++;this._fieldDataCache.set(a,{alias:c,clause:n})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,i){const a=i?i.name:e;let r=null;return this._fieldDataCache.has(a)?r=this._fieldDataCache.get(a).clause:i||(r=s(e,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:r})),i?this.featureAdapter.getAttribute(t,a):r.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,e){const s=e.normalizationType,i=e.normalizationTotal;let r=this.getFieldValue(t,e.field,e.fieldInfo);if(s&&Number.isFinite(r)){const l=this.getFieldValue(t,e.normalizationField,e.normalizationFieldInfo);r=a(r,s,l,i)}return r}getExpressionValue(t,e,s,i){const a={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},r=i.createExecContext(a,s);return i.executeFunction(e,r)}getExpressionValues(t,e,s,i){const a={fields:this.fieldsIndex.fields};return t.map((t=>{const r={attributes:this.featureAdapter.getAttributes(t),layer:a},l=i.createExecContext(r,s);return i.executeFunction(e,l)}))}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:s(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testFeature(t,this.featureAdapter)}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:s(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const s={};for(const i of e){const{alias:e,clause:a}=this._fieldDataCache.get(i);s[e]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return s}_processAttributesForDistinctValues(e){if(t(e)||!this.returnDistinctValues)return e;const s=this.outFields,i=[];if(s)for(const t of s){const{alias:s}=this._fieldDataCache.get(t);i.push(e[s])}else for(const t in e)i.push(e[t]);const a=`${(s||[\"*\"]).join(\",\")}=${i.join(\",\")}`;let r=this._returnDistinctMap.get(a)||0;return this._returnDistinctMap.set(a,++r),r>1?null:e}}export{r as default};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,wBAAvB;AAAgD,SAAOC,0BAA0B,IAAIC,CAArC,EAAuCC,cAAc,IAAIC,CAAzD,EAA2DC,qBAAqB,IAAIC,CAApF,QAA0F,uBAA1F;AAAkH,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,8BAAnC;;AAAkE,MAAMC,CAAN,CAAO;EAACC,WAAW,CAACV,CAAD,EAAGQ,CAAH,EAAKC,CAAL,EAAO;IAAC,KAAKE,eAAL,GAAqB,IAAIC,GAAJ,EAArB,EAA6B,KAAKC,kBAAL,GAAwB,IAAID,GAAJ,EAArD,EAA6D,KAAKE,oBAAL,GAA0Bd,CAAC,CAACc,oBAAzF,EAA8G,KAAKC,WAAL,GAAiBN,CAA/H,EAAiI,KAAKO,cAAL,GAAoBR,CAArJ;IAAuJ,MAAMS,CAAC,GAACjB,CAAC,CAACkB,SAAV;;IAAoB,IAAGD,CAAC,IAAE,CAACA,CAAC,CAACE,QAAF,CAAW,GAAX,CAAP,EAAuB;MAAC,KAAKD,SAAL,GAAeD,CAAf;MAAiB,IAAIjB,CAAC,GAAC,CAAN;;MAAQ,KAAI,MAAMQ,CAAV,IAAeS,CAAf,EAAiB;QAAC,MAAMA,CAAC,GAACf,CAAC,CAACM,CAAD,CAAT;QAAA,MAAaY,CAAC,GAAC,KAAKL,WAAL,CAAiBM,GAAjB,CAAqBJ,CAArB,CAAf;QAAA,MAAuCK,CAAC,GAACF,CAAC,GAAC,IAAD,GAAMhB,CAAC,CAACa,CAAD,EAAGR,CAAH,CAAjD;QAAA,MAAuDc,CAAC,GAACH,CAAC,GAACA,CAAC,CAACI,IAAH,GAAQlB,CAAC,CAACE,CAAD,CAAD,IAAM,eAAaR,CAAC,EAAtF;;QAAyF,KAAKW,eAAL,CAAqBc,GAArB,CAAyBjB,CAAzB,EAA2B;UAACkB,KAAK,EAACH,CAAP;UAASI,MAAM,EAACL;QAAhB,CAA3B;MAA+C;IAAC;EAAC;;EAAAM,mBAAmB,CAAC5B,CAAD,EAAG;IAAC,OAAO,KAAKc,oBAAL,IAA2Bd,CAAC,CAAC6B,OAAF,CAAW7B,CAAC,IAAE,KAAK8B,aAAL,CAAmB9B,CAAnB,CAAd,GAAsC,KAAKa,kBAAL,CAAwBkB,IAAzF,IAA+F/B,CAAC,CAACgC,MAAxG;EAA+G;;EAAAF,aAAa,CAAC9B,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAK+B,8BAAL,CAAoCjC,CAApC,CAAR;;IAA+C,OAAO,KAAKkC,mCAAL,CAAyChC,CAAzC,CAAP;EAAmD;;EAAAiC,aAAa,CAACnC,CAAD,EAAGE,CAAH,EAAKI,CAAL,EAAO;IAAC,MAAME,CAAC,GAACF,CAAC,GAACA,CAAC,CAACkB,IAAH,GAAQtB,CAAjB;IAAmB,IAAIO,CAAC,GAAC,IAAN;IAAW,OAAO,KAAKE,eAAL,CAAqByB,GAArB,CAAyB5B,CAAzB,IAA4BC,CAAC,GAAC,KAAKE,eAAL,CAAqBU,GAArB,CAAyBb,CAAzB,EAA4BmB,MAA1D,GAAiErB,CAAC,KAAGG,CAAC,GAACL,CAAC,CAACF,CAAD,EAAG,KAAKa,WAAR,CAAH,EAAwB,KAAKJ,eAAL,CAAqBc,GAArB,CAAyBjB,CAAzB,EAA2B;MAACkB,KAAK,EAAClB,CAAP;MAASmB,MAAM,EAAClB;IAAhB,CAA3B,CAA3B,CAAlE,EAA6IH,CAAC,GAAC,KAAKU,cAAL,CAAoBqB,YAApB,CAAiCrC,CAAjC,EAAmCQ,CAAnC,CAAD,GAAuCC,CAAC,CAAC6B,cAAF,CAAiBtC,CAAjB,EAAmB,KAAKgB,cAAxB,CAA5L;EAAoO;;EAAAT,kBAAkB,CAACP,CAAD,EAAGE,CAAH,EAAK;IAAC,MAAME,CAAC,GAACF,CAAC,CAACqC,iBAAV;IAAA,MAA4BjC,CAAC,GAACJ,CAAC,CAACsC,kBAAhC;IAAmD,IAAI/B,CAAC,GAAC,KAAK0B,aAAL,CAAmBnC,CAAnB,EAAqBE,CAAC,CAACuC,KAAvB,EAA6BvC,CAAC,CAACwC,SAA/B,CAAN;;IAAgD,IAAGtC,CAAC,IAAEuC,MAAM,CAACC,QAAP,CAAgBnC,CAAhB,CAAN,EAAyB;MAAC,MAAMQ,CAAC,GAAC,KAAKkB,aAAL,CAAmBnC,CAAnB,EAAqBE,CAAC,CAAC2C,kBAAvB,EAA0C3C,CAAC,CAAC4C,sBAA5C,CAAR;MAA4ErC,CAAC,GAACD,CAAC,CAACC,CAAD,EAAGL,CAAH,EAAKa,CAAL,EAAOX,CAAP,CAAH;IAAa;;IAAA,OAAOG,CAAP;EAAS;;EAAAsC,kBAAkB,CAAC/C,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;IAAC,MAAME,CAAC,GAAC;MAACwC,UAAU,EAAC,KAAKhC,cAAL,CAAoBc,aAApB,CAAkC9B,CAAlC,CAAZ;MAAiDiD,KAAK,EAAC;QAACC,MAAM,EAAC,KAAKnC,WAAL,CAAiBmC;MAAzB;IAAvD,CAAR;IAAA,MAAiGzC,CAAC,GAACH,CAAC,CAAC6C,iBAAF,CAAoB3C,CAApB,EAAsBJ,CAAtB,CAAnG;IAA4H,OAAOE,CAAC,CAAC8C,eAAF,CAAkBlD,CAAlB,EAAoBO,CAApB,CAAP;EAA8B;;EAAA4C,mBAAmB,CAACrD,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;IAAC,MAAME,CAAC,GAAC;MAAC0C,MAAM,EAAC,KAAKnC,WAAL,CAAiBmC;IAAzB,CAAR;IAAyC,OAAOlD,CAAC,CAACsD,GAAF,CAAOtD,CAAC,IAAE;MAAC,MAAMS,CAAC,GAAC;QAACuC,UAAU,EAAC,KAAKhC,cAAL,CAAoBc,aAApB,CAAkC9B,CAAlC,CAAZ;QAAiDiD,KAAK,EAACzC;MAAvD,CAAR;MAAA,MAAkES,CAAC,GAACX,CAAC,CAAC6C,iBAAF,CAAoB1C,CAApB,EAAsBL,CAAtB,CAApE;MAA6F,OAAOE,CAAC,CAAC8C,eAAF,CAAkBlD,CAAlB,EAAoBe,CAApB,CAAP;IAA8B,CAAtI,CAAP;EAAgJ;;EAAAsC,YAAY,CAACvD,CAAD,EAAGE,CAAH,EAAK;IAAC,OAAO,KAAKS,eAAL,CAAqByB,GAArB,CAAyBlC,CAAzB,KAA6B,KAAKS,eAAL,CAAqBc,GAArB,CAAyBvB,CAAzB,EAA2B;MAACwB,KAAK,EAACxB,CAAP;MAASyB,MAAM,EAACvB,CAAC,CAACF,CAAD,EAAG,KAAKa,WAAR;IAAjB,CAA3B,CAA7B,EAAgG,KAAKJ,eAAL,CAAqBU,GAArB,CAAyBnB,CAAzB,EAA4ByB,MAA5B,CAAmC6B,WAAnC,CAA+CxD,CAA/C,EAAiD,KAAKgB,cAAtD,CAAvG;EAA6K;;EAAAyC,aAAa,CAACzD,CAAD,EAAGE,CAAH,EAAK;IAAC,OAAO,KAAKS,eAAL,CAAqByB,GAArB,CAAyBlC,CAAzB,KAA6B,KAAKS,eAAL,CAAqBc,GAArB,CAAyBvB,CAAzB,EAA2B;MAACwB,KAAK,EAACxB,CAAP;MAASyB,MAAM,EAACvB,CAAC,CAACF,CAAD,EAAG,KAAKa,WAAR;IAAjB,CAA3B,CAA7B,EAAgG,KAAKJ,eAAL,CAAqBU,GAArB,CAAyBnB,CAAzB,EAA4ByB,MAA5B,CAAmC+B,OAAnC,CAA2C1D,CAA3C,EAA6C,KAAKgB,cAAlD,CAAvG;EAAyK;;EAAAiB,8BAA8B,CAACjC,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAKgB,SAAb;IAAuB,IAAG,CAAChB,CAAD,IAAI,CAACA,CAAC,CAAC8B,MAAV,EAAiB,OAAO,KAAKhB,cAAL,CAAoBc,aAApB,CAAkC9B,CAAlC,CAAP;IAA4C,MAAMI,CAAC,GAAC,EAAR;;IAAW,KAAI,MAAME,CAAV,IAAeJ,CAAf,EAAiB;MAAC,MAAK;QAACwB,KAAK,EAACxB,CAAP;QAASyB,MAAM,EAACnB;MAAhB,IAAmB,KAAKG,eAAL,CAAqBU,GAArB,CAAyBf,CAAzB,CAAxB;;MAAoDF,CAAC,CAACF,CAAD,CAAD,GAAKM,CAAC,GAACA,CAAC,CAAC8B,cAAF,CAAiBtC,CAAjB,EAAmB,KAAKgB,cAAxB,CAAD,GAAyC,KAAKA,cAAL,CAAoBqB,YAApB,CAAiCrC,CAAjC,EAAmCE,CAAnC,CAA/C;IAAqF;;IAAA,OAAOE,CAAP;EAAS;;EAAA8B,mCAAmC,CAAChC,CAAD,EAAG;IAAC,IAAGF,CAAC,CAACE,CAAD,CAAD,IAAM,CAAC,KAAKY,oBAAf,EAAoC,OAAOZ,CAAP;IAAS,MAAME,CAAC,GAAC,KAAKc,SAAb;IAAA,MAAuBZ,CAAC,GAAC,EAAzB;IAA4B,IAAGF,CAAH,EAAK,KAAI,MAAMJ,CAAV,IAAeI,CAAf,EAAiB;MAAC,MAAK;QAACsB,KAAK,EAACtB;MAAP,IAAU,KAAKO,eAAL,CAAqBU,GAArB,CAAyBrB,CAAzB,CAAf;;MAA2CM,CAAC,CAACqD,IAAF,CAAOzD,CAAC,CAACE,CAAD,CAAR;IAAa,CAA/E,MAAoF,KAAI,MAAMJ,CAAV,IAAeE,CAAf,EAAiBI,CAAC,CAACqD,IAAF,CAAOzD,CAAC,CAACF,CAAD,CAAR;IAAa,MAAMQ,CAAC,GAAE,GAAE,CAACJ,CAAC,IAAE,CAAC,GAAD,CAAJ,EAAWwD,IAAX,CAAgB,GAAhB,CAAqB,IAAGtD,CAAC,CAACsD,IAAF,CAAO,GAAP,CAAY,EAA/C;IAAiD,IAAInD,CAAC,GAAC,KAAKI,kBAAL,CAAwBQ,GAAxB,CAA4Bb,CAA5B,KAAgC,CAAtC;IAAwC,OAAO,KAAKK,kBAAL,CAAwBY,GAAxB,CAA4BjB,CAA5B,EAA8B,EAAEC,CAAhC,GAAmCA,CAAC,GAAC,CAAF,GAAI,IAAJ,GAASP,CAAnD;EAAqD;;AAA/iF;;AAAgjF,SAAOO,CAAC,IAAIoD,OAAZ"},"metadata":{},"sourceType":"module"}