{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../core/Error.js\";\nimport { unwrap as r, isNone as i } from \"../../../core/maybe.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../RasterInfo.js\";\nimport o from \"../RasterStorageInfo.js\";\nimport f from \"./BaseRaster.js\";\nimport { parseSpatialReference as l, parsePAMInfo as m } from \"./pamParser.js\";\nimport { parseSignature as u, getImageInfo as p, parseIFD as c, parseFieldValues as h, isBSQConfig as d } from \"../rasterFormats/TiffDecoder.js\";\nimport y from \"../rasterFormats/TiffTags.js\";\nimport { estimateStatisticsFromHistograms as g } from \"../rasterFunctions/stretchUtils.js\";\nimport x from \"../rasterTransforms/PolynomialTransform.js\";\nimport T from \"../../../geometry/SpatialReference.js\";\nimport I from \"../../../geometry/Extent.js\";\nimport w from \"../../../geometry/Point.js\";\n\nconst _ = (e, t) => {\n  const r = e.get(t);\n  return r && r.values;\n},\n      b = (e, t) => {\n  const r = e.get(t);\n  return r && r.values[0];\n};\n\nlet E = class extends f {\n  constructor() {\n    super(...arguments), this._files = null, this._headerInfo = null, this._bufferSize = 1048576, this.datasetFormat = \"TIFF\";\n  }\n\n  async open(e) {\n    await this.init();\n    const s = e ? r(e.signal) : null,\n          {\n      data: a\n    } = await this.request(this.url, {\n      range: {\n        from: 0,\n        to: this._bufferSize\n      },\n      responseType: \"array-buffer\",\n      signal: s\n    });\n    if (!a) throw new t(\"tiffraster:open\", \"failed to open url \" + this.url);\n    this.datasetName = this.url.slice(this.url.lastIndexOf(\"/\") + 1);\n    const {\n      littleEndian: f,\n      firstIFD: m,\n      isBigTiff: c\n    } = u(a),\n          h = [];\n    await this._readIFDs(h, a, f, m, 0, c ? 8 : 4, s);\n    const d = p(h),\n          {\n      width: y,\n      height: _,\n      tileWidth: b,\n      tileHeight: E,\n      planes: S,\n      pixelType: F,\n      compression: R,\n      firstPyramidLevel: k,\n      maximumPyramidLevel: v,\n      pyramidBlockWidth: j,\n      pyramidBlockHeight: B,\n      tileBoundary: D,\n      affine: L,\n      metadata: z\n    } = d,\n          O = d.extent.spatialReference?.wkt || d.extent.spatialReference?.wkid;\n    let P = l(O),\n        H = !1;\n    null == P && (H = !0, P = new T({\n      wkid: 3857\n    }));\n    const A = new I({ ...d.extent,\n      spatialReference: P\n    }),\n          G = new w(A ? {\n      x: A.xmin,\n      y: A.ymax,\n      spatialReference: P\n    } : {\n      x: 0,\n      y: 0\n    }),\n          q = new o({\n      blockWidth: b,\n      blockHeight: E,\n      pyramidBlockWidth: j,\n      pyramidBlockHeight: B,\n      compression: R,\n      origin: G,\n      firstPyramidLevel: k,\n      maximumPyramidLevel: v,\n      blockBoundary: D\n    }),\n          C = new w({\n      x: (A.xmax - A.xmin) / y,\n      y: (A.ymax - A.ymin) / _,\n      spatialReference: P\n    }),\n          W = z ? {\n      BandProperties: z.bandProperties,\n      DataType: z.dataType\n    } : {},\n          U = new n({\n      width: y,\n      height: _,\n      bandCount: S,\n      pixelType: F,\n      compression: R,\n      pixelSize: C,\n      storageInfo: q,\n      spatialReference: P,\n      isPseudoSpatialReference: H,\n      keyProperties: W,\n      extent: A,\n      statistics: z ? z.statistics : null\n    });\n\n    if (L?.length && (U.nativeExtent = new I({\n      xmin: -.5,\n      ymin: .5 - _,\n      xmax: y - .5,\n      ymax: .5,\n      spatialReference: P\n    }), U.transform = new x({\n      polynomialOrder: 1,\n      forwardCoefficients: [L[2] + L[0] / 2, L[5] - L[3] / 2, L[0], L[3], -L[1], -L[4]]\n    }), U.extent = U.transform.forwardTransform(U.nativeExtent), U.pixelSize = new w({\n      x: (A.xmax - A.xmin) / y,\n      y: (A.ymax - A.ymin) / _,\n      spatialReference: P\n    }), q.origin.x = -.5, q.origin.y = .5), !this.ioConfig.skipExtensions?.includes(\"aux.xml\")) {\n      const t = await this._fetchAuxiliaryData(e);\n\n      if (null != t) {\n        if (U.statistics = t.statistics ?? U.statistics, U.histograms = t.histograms, t.histograms && i(U.statistics) && (U.statistics = g(t.histograms)), t.transform && !L) {\n          U.transform = t.transform, U.nativeExtent = U.extent;\n          const e = U.transform.forwardTransform(U.nativeExtent);\n          U.pixelSize = new w({\n            x: (e.xmax - e.xmin) / y,\n            y: (e.ymax - e.ymin) / _,\n            spatialReference: P\n          }), U.extent = e;\n        }\n\n        U.spatialReference || (U.spatialReference = t.spatialReference);\n      }\n    }\n\n    if (this._set(\"rasterInfo\", U), this._headerInfo = {\n      littleEndian: f,\n      isBigTiff: c,\n      ifds: h,\n      ...d\n    }, !this._headerInfo.isSupported) throw new t(\"tiffraster:open\", \"this tiff is not supported: \" + this._headerInfo.message);\n    this.updateTileInfo();\n  }\n\n  async fetchRawTile(e, t, r, i = {}) {\n    if (!this._headerInfo?.isSupported || this.isBlockOutside(e, t, r)) return null;\n\n    const s = this._getTileLocation(e, t, r);\n\n    if (!s) return null;\n    const {\n      ranges: a,\n      actualTileWidth: n,\n      actualTileHeight: o,\n      ifd: f\n    } = s,\n          l = a.map(e => this.request(this.url, {\n      range: e,\n      responseType: \"array-buffer\",\n      signal: i.signal\n    })),\n          m = await Promise.all(l),\n          u = m.map(e => e.data.byteLength).reduce((e, t) => e + t),\n          p = 1 === m.length ? m[0].data : new ArrayBuffer(u),\n          c = [0],\n          h = [0];\n\n    if (m.length > 1) {\n      const e = new Uint8Array(p);\n\n      for (let t = 0, r = 0; t < m.length; t++) {\n        const i = m[t].data;\n        e.set(new Uint8Array(i), r), c[t] = r, r += i.byteLength, h[t] = i.byteLength;\n      }\n    }\n\n    const {\n      blockWidth: d,\n      blockHeight: y\n    } = this.getBlockWidthHeight(e),\n          g = await this.decodePixelBlock(p, {\n      format: \"tiff\",\n      customOptions: {\n        headerInfo: this._headerInfo,\n        ifd: f,\n        offsets: c,\n        sizes: h\n      },\n      width: d,\n      height: y,\n      planes: null,\n      pixelType: null\n    });\n    let x, T, I;\n\n    if (n !== d || o !== y) {\n      let e = g.mask;\n      if (e) {\n        for (x = 0; x < y; x++) if (I = x * d, x < o) for (T = n; T < d; T++) e[I + T] = 0;else for (T = 0; T < d; T++) e[I + T] = 0;\n      } else for (e = new Uint8Array(d * y), g.mask = e, x = 0; x < o; x++) for (I = x * d, T = 0; T < n; T++) e[I + T] = 1;\n    }\n\n    return g;\n  }\n\n  async _readIFDs(e, t, r, i, s, a = 4, n) {\n    if (!i) return null;\n\n    if (i >= t.byteLength || i < 0) {\n      t = (await this.request(this.url, {\n        range: {\n          from: i + s,\n          to: i + s + this._bufferSize\n        },\n        responseType: \"array-buffer\",\n        signal: n\n      })).data, s = i + s, i = 0;\n    }\n\n    const o = await this._readIFD(t, r, i, s, y.TIFF_TAGS, a, n);\n    if (e.push(o.ifd), !o.nextIFD) return null;\n    await this._readIFDs(e, t, r, o.nextIFD - s, s, a, n);\n  }\n\n  async _readIFD(e, t, r, i, s = y.TIFF_TAGS, a = 4, n) {\n    if (!e) return null;\n    const o = c(e, t, r, i, s, a);\n\n    if (o.success) {\n      const r = [];\n\n      if (o.ifd.forEach(e => {\n        e.values || r.push(e);\n      }), r.length > 0) {\n        const s = r.map(e => e.offlineOffsetSize),\n              a = Math.min.apply(null, s.map(e => e[0]));\n\n        if (Math.min.apply(null, s.map(e => e[0] + e[1])) - a <= this._bufferSize) {\n          const {\n            data: s\n          } = await this.request(this.url, {\n            range: {\n              from: a,\n              to: a + this._bufferSize\n            },\n            responseType: \"array-buffer\",\n            signal: n\n          });\n          e = s, i = a, r.forEach(r => h(e, t, r, i));\n        }\n      }\n\n      if (o.ifd.has(\"GEOKEYDIRECTORY\")) {\n        const r = o.ifd.get(\"GEOKEYDIRECTORY\"),\n              s = r.values;\n\n        if (s && s.length > 4) {\n          const a = s[0] + \".\" + s[1] + \".\" + s[2],\n                o = await this._readIFD(e, t, r.valueOffset + 6 - i, i, y.GEO_KEYS, 2, n);\n          r.data = o.ifd, r.data && r.data.set(\"GEOTIFFVersion\", {\n            id: 0,\n            type: 2,\n            valueCount: 1,\n            valueOffset: null,\n            values: [a]\n          });\n        }\n      }\n\n      return o;\n    }\n\n    if (o.requiredBufferSize && o.requiredBufferSize !== e.byteLength) {\n      const r = await this.request(this.url, {\n        range: {\n          from: i,\n          to: i + o.requiredBufferSize + 4\n        },\n        responseType: \"array-buffer\",\n        signal: n\n      });\n      return (e = r.data).byteLength < o.requiredBufferSize ? null : this._readIFD(e, t, 0, i, y.TIFF_TAGS, 4, n);\n    }\n  }\n\n  _getTileLocation(e, t, r) {\n    const {\n      firstPyramidLevel: i,\n      blockBoundary: s\n    } = this.rasterInfo.storageInfo,\n          a = 0 === e ? 0 : e - (i - 1),\n          n = this._headerInfo.ifds[a];\n    if (!n) return null;\n\n    const o = d(n, this._headerInfo),\n          f = _(n, \"TILEOFFSETS\");\n\n    if (void 0 === f) return null;\n\n    const l = _(n, \"TILEBYTECOUNTS\"),\n          {\n      minRow: m,\n      minCol: u,\n      maxRow: p,\n      maxCol: c\n    } = s[a];\n\n    if (t > p || r > c || t < m || r < u) return null;\n    const h = b(n, \"IMAGEWIDTH\"),\n          y = b(n, \"IMAGELENGTH\"),\n          g = b(n, \"TILEWIDTH\"),\n          x = b(n, \"TILELENGTH\"),\n          T = o ? this.rasterInfo.bandCount : 1,\n          I = T * t * (c + 1) + r,\n          w = [{\n      from: f[I],\n      to: f[I + T - 1] + l[I + T - 1] - 1\n    }];\n\n    if (o) {\n      let e = !0;\n\n      for (let t = 0; t < T; t++) if (f[I + t] + l[I + t] !== f[I + t + 1]) {\n        e = !1;\n        break;\n      }\n\n      if (!e) for (let t = 0; t < T; t++) w[t] = {\n        from: f[I + t],\n        to: f[I + t] + l[I + t] - 1\n      };\n    }\n\n    const E = f[I],\n          S = l[I];\n    if (null == E || null == S) return null;\n    return {\n      ranges: w,\n      ifd: n,\n      actualTileWidth: r === c ? h % g : g,\n      actualTileHeight: t === p ? y % x : x\n    };\n  }\n\n  async _fetchAuxiliaryData(e) {\n    try {\n      const {\n        data: t\n      } = await this.request(this.url + \".aux.xml\", {\n        responseType: \"xml\",\n        signal: e?.signal\n      });\n      return m(t);\n    } catch {\n      return null;\n    }\n  }\n\n};\ne([s()], E.prototype, \"_files\", void 0), e([s()], E.prototype, \"_headerInfo\", void 0), e([s()], E.prototype, \"_bufferSize\", void 0), e([s({\n  type: String,\n  json: {\n    write: !0\n  }\n})], E.prototype, \"datasetFormat\", void 0), E = e([a(\"esri.layers.support.rasterDatasets.TIFFRaster\")], E);\nconst S = E;\nexport { S as default };","map":{"version":3,"names":["_","e","t","unwrap","r","isNone","i","property","s","subclass","a","n","o","f","parseSpatialReference","l","parsePAMInfo","m","parseSignature","u","getImageInfo","p","parseIFD","c","parseFieldValues","h","isBSQConfig","d","y","estimateStatisticsFromHistograms","g","x","T","I","w","get","values","b","E","constructor","arguments","_files","_headerInfo","_bufferSize","datasetFormat","open","init","signal","data","request","url","range","from","to","responseType","datasetName","slice","lastIndexOf","littleEndian","firstIFD","isBigTiff","_readIFDs","width","height","tileWidth","tileHeight","planes","S","pixelType","F","compression","R","firstPyramidLevel","k","maximumPyramidLevel","v","pyramidBlockWidth","j","pyramidBlockHeight","B","tileBoundary","D","affine","L","metadata","z","O","extent","spatialReference","wkt","wkid","P","H","A","G","xmin","ymax","q","blockWidth","blockHeight","origin","blockBoundary","C","xmax","ymin","W","BandProperties","bandProperties","DataType","dataType","U","bandCount","pixelSize","storageInfo","isPseudoSpatialReference","keyProperties","statistics","length","nativeExtent","transform","polynomialOrder","forwardCoefficients","forwardTransform","ioConfig","skipExtensions","includes","_fetchAuxiliaryData","histograms","_set","ifds","isSupported","message","updateTileInfo","fetchRawTile","isBlockOutside","_getTileLocation","ranges","actualTileWidth","actualTileHeight","ifd","map","Promise","all","byteLength","reduce","ArrayBuffer","Uint8Array","set","getBlockWidthHeight","decodePixelBlock","format","customOptions","headerInfo","offsets","sizes","mask","_readIFD","TIFF_TAGS","push","nextIFD","success","forEach","offlineOffsetSize","Math","min","apply","has","valueOffset","GEO_KEYS","id","type","valueCount","requiredBufferSize","rasterInfo","minRow","minCol","maxRow","maxCol","prototype","String","json","write","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterDatasets/TIFFRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../core/Error.js\";import{unwrap as r,isNone as i}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../RasterInfo.js\";import o from\"../RasterStorageInfo.js\";import f from\"./BaseRaster.js\";import{parseSpatialReference as l,parsePAMInfo as m}from\"./pamParser.js\";import{parseSignature as u,getImageInfo as p,parseIFD as c,parseFieldValues as h,isBSQConfig as d}from\"../rasterFormats/TiffDecoder.js\";import y from\"../rasterFormats/TiffTags.js\";import{estimateStatisticsFromHistograms as g}from\"../rasterFunctions/stretchUtils.js\";import x from\"../rasterTransforms/PolynomialTransform.js\";import T from\"../../../geometry/SpatialReference.js\";import I from\"../../../geometry/Extent.js\";import w from\"../../../geometry/Point.js\";const _=(e,t)=>{const r=e.get(t);return r&&r.values},b=(e,t)=>{const r=e.get(t);return r&&r.values[0]};let E=class extends f{constructor(){super(...arguments),this._files=null,this._headerInfo=null,this._bufferSize=1048576,this.datasetFormat=\"TIFF\"}async open(e){await this.init();const s=e?r(e.signal):null,{data:a}=await this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:\"array-buffer\",signal:s});if(!a)throw new t(\"tiffraster:open\",\"failed to open url \"+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1);const{littleEndian:f,firstIFD:m,isBigTiff:c}=u(a),h=[];await this._readIFDs(h,a,f,m,0,c?8:4,s);const d=p(h),{width:y,height:_,tileWidth:b,tileHeight:E,planes:S,pixelType:F,compression:R,firstPyramidLevel:k,maximumPyramidLevel:v,pyramidBlockWidth:j,pyramidBlockHeight:B,tileBoundary:D,affine:L,metadata:z}=d,O=d.extent.spatialReference?.wkt||d.extent.spatialReference?.wkid;let P=l(O),H=!1;null==P&&(H=!0,P=new T({wkid:3857}));const A=new I({...d.extent,spatialReference:P}),G=new w(A?{x:A.xmin,y:A.ymax,spatialReference:P}:{x:0,y:0}),q=new o({blockWidth:b,blockHeight:E,pyramidBlockWidth:j,pyramidBlockHeight:B,compression:R,origin:G,firstPyramidLevel:k,maximumPyramidLevel:v,blockBoundary:D}),C=new w({x:(A.xmax-A.xmin)/y,y:(A.ymax-A.ymin)/_,spatialReference:P}),W=z?{BandProperties:z.bandProperties,DataType:z.dataType}:{},U=new n({width:y,height:_,bandCount:S,pixelType:F,compression:R,pixelSize:C,storageInfo:q,spatialReference:P,isPseudoSpatialReference:H,keyProperties:W,extent:A,statistics:z?z.statistics:null});if(L?.length&&(U.nativeExtent=new I({xmin:-.5,ymin:.5-_,xmax:y-.5,ymax:.5,spatialReference:P}),U.transform=new x({polynomialOrder:1,forwardCoefficients:[L[2]+L[0]/2,L[5]-L[3]/2,L[0],L[3],-L[1],-L[4]]}),U.extent=U.transform.forwardTransform(U.nativeExtent),U.pixelSize=new w({x:(A.xmax-A.xmin)/y,y:(A.ymax-A.ymin)/_,spatialReference:P}),q.origin.x=-.5,q.origin.y=.5),!this.ioConfig.skipExtensions?.includes(\"aux.xml\")){const t=await this._fetchAuxiliaryData(e);if(null!=t){if(U.statistics=t.statistics??U.statistics,U.histograms=t.histograms,t.histograms&&i(U.statistics)&&(U.statistics=g(t.histograms)),t.transform&&!L){U.transform=t.transform,U.nativeExtent=U.extent;const e=U.transform.forwardTransform(U.nativeExtent);U.pixelSize=new w({x:(e.xmax-e.xmin)/y,y:(e.ymax-e.ymin)/_,spatialReference:P}),U.extent=e}U.spatialReference||(U.spatialReference=t.spatialReference)}}if(this._set(\"rasterInfo\",U),this._headerInfo={littleEndian:f,isBigTiff:c,ifds:h,...d},!this._headerInfo.isSupported)throw new t(\"tiffraster:open\",\"this tiff is not supported: \"+this._headerInfo.message);this.updateTileInfo()}async fetchRawTile(e,t,r,i={}){if(!this._headerInfo?.isSupported||this.isBlockOutside(e,t,r))return null;const s=this._getTileLocation(e,t,r);if(!s)return null;const{ranges:a,actualTileWidth:n,actualTileHeight:o,ifd:f}=s,l=a.map((e=>this.request(this.url,{range:e,responseType:\"array-buffer\",signal:i.signal}))),m=await Promise.all(l),u=m.map((e=>e.data.byteLength)).reduce(((e,t)=>e+t)),p=1===m.length?m[0].data:new ArrayBuffer(u),c=[0],h=[0];if(m.length>1){const e=new Uint8Array(p);for(let t=0,r=0;t<m.length;t++){const i=m[t].data;e.set(new Uint8Array(i),r),c[t]=r,r+=i.byteLength,h[t]=i.byteLength}}const{blockWidth:d,blockHeight:y}=this.getBlockWidthHeight(e),g=await this.decodePixelBlock(p,{format:\"tiff\",customOptions:{headerInfo:this._headerInfo,ifd:f,offsets:c,sizes:h},width:d,height:y,planes:null,pixelType:null});let x,T,I;if(n!==d||o!==y){let e=g.mask;if(e)for(x=0;x<y;x++)if(I=x*d,x<o)for(T=n;T<d;T++)e[I+T]=0;else for(T=0;T<d;T++)e[I+T]=0;else for(e=new Uint8Array(d*y),g.mask=e,x=0;x<o;x++)for(I=x*d,T=0;T<n;T++)e[I+T]=1}return g}async _readIFDs(e,t,r,i,s,a=4,n){if(!i)return null;if(i>=t.byteLength||i<0){t=(await this.request(this.url,{range:{from:i+s,to:i+s+this._bufferSize},responseType:\"array-buffer\",signal:n})).data,s=i+s,i=0}const o=await this._readIFD(t,r,i,s,y.TIFF_TAGS,a,n);if(e.push(o.ifd),!o.nextIFD)return null;await this._readIFDs(e,t,r,o.nextIFD-s,s,a,n)}async _readIFD(e,t,r,i,s=y.TIFF_TAGS,a=4,n){if(!e)return null;const o=c(e,t,r,i,s,a);if(o.success){const r=[];if(o.ifd.forEach((e=>{e.values||r.push(e)})),r.length>0){const s=r.map((e=>e.offlineOffsetSize)),a=Math.min.apply(null,s.map((e=>e[0])));if(Math.min.apply(null,s.map((e=>e[0]+e[1])))-a<=this._bufferSize){const{data:s}=await this.request(this.url,{range:{from:a,to:a+this._bufferSize},responseType:\"array-buffer\",signal:n});e=s,i=a,r.forEach((r=>h(e,t,r,i)))}}if(o.ifd.has(\"GEOKEYDIRECTORY\")){const r=o.ifd.get(\"GEOKEYDIRECTORY\"),s=r.values;if(s&&s.length>4){const a=s[0]+\".\"+s[1]+\".\"+s[2],o=await this._readIFD(e,t,r.valueOffset+6-i,i,y.GEO_KEYS,2,n);r.data=o.ifd,r.data&&r.data.set(\"GEOTIFFVersion\",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]})}}return o}if(o.requiredBufferSize&&o.requiredBufferSize!==e.byteLength){const r=await this.request(this.url,{range:{from:i,to:i+o.requiredBufferSize+4},responseType:\"array-buffer\",signal:n});return(e=r.data).byteLength<o.requiredBufferSize?null:this._readIFD(e,t,0,i,y.TIFF_TAGS,4,n)}}_getTileLocation(e,t,r){const{firstPyramidLevel:i,blockBoundary:s}=this.rasterInfo.storageInfo,a=0===e?0:e-(i-1),n=this._headerInfo.ifds[a];if(!n)return null;const o=d(n,this._headerInfo),f=_(n,\"TILEOFFSETS\");if(void 0===f)return null;const l=_(n,\"TILEBYTECOUNTS\"),{minRow:m,minCol:u,maxRow:p,maxCol:c}=s[a];if(t>p||r>c||t<m||r<u)return null;const h=b(n,\"IMAGEWIDTH\"),y=b(n,\"IMAGELENGTH\"),g=b(n,\"TILEWIDTH\"),x=b(n,\"TILELENGTH\"),T=o?this.rasterInfo.bandCount:1,I=T*t*(c+1)+r,w=[{from:f[I],to:f[I+T-1]+l[I+T-1]-1}];if(o){let e=!0;for(let t=0;t<T;t++)if(f[I+t]+l[I+t]!==f[I+t+1]){e=!1;break}if(!e)for(let t=0;t<T;t++)w[t]={from:f[I+t],to:f[I+t]+l[I+t]-1}}const E=f[I],S=l[I];if(null==E||null==S)return null;return{ranges:w,ifd:n,actualTileWidth:r===c?h%g:g,actualTileHeight:t===p?y%x:x}}async _fetchAuxiliaryData(e){try{const{data:t}=await this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:e?.signal});return m(t)}catch{return null}}};e([s()],E.prototype,\"_files\",void 0),e([s()],E.prototype,\"_headerInfo\",void 0),e([s()],E.prototype,\"_bufferSize\",void 0),e([s({type:String,json:{write:!0}})],E.prototype,\"datasetFormat\",void 0),E=e([a(\"esri.layers.support.rasterDatasets.TIFFRaster\")],E);const S=E;export{S as default};\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAM,sBAAN;AAA6B,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,wBAAnC;AAA4D,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,sBAAN;AAA6B,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,yBAAb;AAAuC,OAAOC,CAAP,MAAa,iBAAb;AAA+B,SAAOC,qBAAqB,IAAIC,CAAhC,EAAkCC,YAAY,IAAIC,CAAlD,QAAwD,gBAAxD;AAAyE,SAAOC,cAAc,IAAIC,CAAzB,EAA2BC,YAAY,IAAIC,CAA3C,EAA6CC,QAAQ,IAAIC,CAAzD,EAA2DC,gBAAgB,IAAIC,CAA/E,EAAiFC,WAAW,IAAIC,CAAhG,QAAsG,iCAAtG;AAAwI,OAAOC,CAAP,MAAa,8BAAb;AAA4C,SAAOC,gCAAgC,IAAIC,CAA3C,QAAiD,oCAAjD;AAAsF,OAAOC,CAAP,MAAa,4CAAb;AAA0D,OAAOC,CAAP,MAAa,uCAAb;AAAqD,OAAOC,CAAP,MAAa,6BAAb;AAA2C,OAAOC,CAAP,MAAa,4BAAb;;AAA0C,MAAMlC,CAAC,GAAC,CAACC,CAAD,EAAGC,CAAH,KAAO;EAAC,MAAME,CAAC,GAACH,CAAC,CAACkC,GAAF,CAAMjC,CAAN,CAAR;EAAiB,OAAOE,CAAC,IAAEA,CAAC,CAACgC,MAAZ;AAAmB,CAApD;AAAA,MAAqDC,CAAC,GAAC,CAACpC,CAAD,EAAGC,CAAH,KAAO;EAAC,MAAME,CAAC,GAACH,CAAC,CAACkC,GAAF,CAAMjC,CAAN,CAAR;EAAiB,OAAOE,CAAC,IAAEA,CAAC,CAACgC,MAAF,CAAS,CAAT,CAAV;AAAsB,CAAtG;;AAAuG,IAAIE,CAAC,GAAC,cAAczB,CAAd,CAAe;EAAC0B,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,MAAL,GAAY,IAAhC,EAAqC,KAAKC,WAAL,GAAiB,IAAtD,EAA2D,KAAKC,WAAL,GAAiB,OAA5E,EAAoF,KAAKC,aAAL,GAAmB,MAAvG;EAA8G;;EAAU,MAAJC,IAAI,CAAC5C,CAAD,EAAG;IAAC,MAAM,KAAK6C,IAAL,EAAN;IAAkB,MAAMtC,CAAC,GAACP,CAAC,GAACG,CAAC,CAACH,CAAC,CAAC8C,MAAH,CAAF,GAAa,IAAtB;IAAA,MAA2B;MAACC,IAAI,EAACtC;IAAN,IAAS,MAAM,KAAKuC,OAAL,CAAa,KAAKC,GAAlB,EAAsB;MAACC,KAAK,EAAC;QAACC,IAAI,EAAC,CAAN;QAAQC,EAAE,EAAC,KAAKV;MAAhB,CAAP;MAAoCW,YAAY,EAAC,cAAjD;MAAgEP,MAAM,EAACvC;IAAvE,CAAtB,CAA1C;IAA2I,IAAG,CAACE,CAAJ,EAAM,MAAM,IAAIR,CAAJ,CAAM,iBAAN,EAAwB,wBAAsB,KAAKgD,GAAnD,CAAN;IAA8D,KAAKK,WAAL,GAAiB,KAAKL,GAAL,CAASM,KAAT,CAAe,KAAKN,GAAL,CAASO,WAAT,CAAqB,GAArB,IAA0B,CAAzC,CAAjB;IAA6D,MAAK;MAACC,YAAY,EAAC7C,CAAd;MAAgB8C,QAAQ,EAAC1C,CAAzB;MAA2B2C,SAAS,EAACrC;IAArC,IAAwCJ,CAAC,CAACT,CAAD,CAA9C;IAAA,MAAkDe,CAAC,GAAC,EAApD;IAAuD,MAAM,KAAKoC,SAAL,CAAepC,CAAf,EAAiBf,CAAjB,EAAmBG,CAAnB,EAAqBI,CAArB,EAAuB,CAAvB,EAAyBM,CAAC,GAAC,CAAD,GAAG,CAA7B,EAA+Bf,CAA/B,CAAN;IAAwC,MAAMmB,CAAC,GAACN,CAAC,CAACI,CAAD,CAAT;IAAA,MAAa;MAACqC,KAAK,EAAClC,CAAP;MAASmC,MAAM,EAAC/D,CAAhB;MAAkBgE,SAAS,EAAC3B,CAA5B;MAA8B4B,UAAU,EAAC3B,CAAzC;MAA2C4B,MAAM,EAACC,CAAlD;MAAoDC,SAAS,EAACC,CAA9D;MAAgEC,WAAW,EAACC,CAA5E;MAA8EC,iBAAiB,EAACC,CAAhG;MAAkGC,mBAAmB,EAACC,CAAtH;MAAwHC,iBAAiB,EAACC,CAA1I;MAA4IC,kBAAkB,EAACC,CAA/J;MAAiKC,YAAY,EAACC,CAA9K;MAAgLC,MAAM,EAACC,CAAvL;MAAyLC,QAAQ,EAACC;IAAlM,IAAqM1D,CAAlN;IAAA,MAAoN2D,CAAC,GAAC3D,CAAC,CAAC4D,MAAF,CAASC,gBAAT,EAA2BC,GAA3B,IAAgC9D,CAAC,CAAC4D,MAAF,CAASC,gBAAT,EAA2BE,IAAjR;IAAsR,IAAIC,CAAC,GAAC5E,CAAC,CAACuE,CAAD,CAAP;IAAA,IAAWM,CAAC,GAAC,CAAC,CAAd;IAAgB,QAAMD,CAAN,KAAUC,CAAC,GAAC,CAAC,CAAH,EAAKD,CAAC,GAAC,IAAI3D,CAAJ,CAAM;MAAC0D,IAAI,EAAC;IAAN,CAAN,CAAjB;IAAqC,MAAMG,CAAC,GAAC,IAAI5D,CAAJ,CAAM,EAAC,GAAGN,CAAC,CAAC4D,MAAN;MAAaC,gBAAgB,EAACG;IAA9B,CAAN,CAAR;IAAA,MAAgDG,CAAC,GAAC,IAAI5D,CAAJ,CAAM2D,CAAC,GAAC;MAAC9D,CAAC,EAAC8D,CAAC,CAACE,IAAL;MAAUnE,CAAC,EAACiE,CAAC,CAACG,IAAd;MAAmBR,gBAAgB,EAACG;IAApC,CAAD,GAAwC;MAAC5D,CAAC,EAAC,CAAH;MAAKH,CAAC,EAAC;IAAP,CAA/C,CAAlD;IAAA,MAA4GqE,CAAC,GAAC,IAAIrF,CAAJ,CAAM;MAACsF,UAAU,EAAC7D,CAAZ;MAAc8D,WAAW,EAAC7D,CAA1B;MAA4BsC,iBAAiB,EAACC,CAA9C;MAAgDC,kBAAkB,EAACC,CAAnE;MAAqET,WAAW,EAACC,CAAjF;MAAmF6B,MAAM,EAACN,CAA1F;MAA4FtB,iBAAiB,EAACC,CAA9G;MAAgHC,mBAAmB,EAACC,CAApI;MAAsI0B,aAAa,EAACpB;IAApJ,CAAN,CAA9G;IAAA,MAA4QqB,CAAC,GAAC,IAAIpE,CAAJ,CAAM;MAACH,CAAC,EAAC,CAAC8D,CAAC,CAACU,IAAF,GAAOV,CAAC,CAACE,IAAV,IAAgBnE,CAAnB;MAAqBA,CAAC,EAAC,CAACiE,CAAC,CAACG,IAAF,GAAOH,CAAC,CAACW,IAAV,IAAgBxG,CAAvC;MAAyCwF,gBAAgB,EAACG;IAA1D,CAAN,CAA9Q;IAAA,MAAkVc,CAAC,GAACpB,CAAC,GAAC;MAACqB,cAAc,EAACrB,CAAC,CAACsB,cAAlB;MAAiCC,QAAQ,EAACvB,CAAC,CAACwB;IAA5C,CAAD,GAAuD,EAA5Y;IAAA,MAA+YC,CAAC,GAAC,IAAInG,CAAJ,CAAM;MAACmD,KAAK,EAAClC,CAAP;MAASmC,MAAM,EAAC/D,CAAhB;MAAkB+G,SAAS,EAAC5C,CAA5B;MAA8BC,SAAS,EAACC,CAAxC;MAA0CC,WAAW,EAACC,CAAtD;MAAwDyC,SAAS,EAACV,CAAlE;MAAoEW,WAAW,EAAChB,CAAhF;MAAkFT,gBAAgB,EAACG,CAAnG;MAAqGuB,wBAAwB,EAACtB,CAA9H;MAAgIuB,aAAa,EAACV,CAA9I;MAAgJlB,MAAM,EAACM,CAAvJ;MAAyJuB,UAAU,EAAC/B,CAAC,GAACA,CAAC,CAAC+B,UAAH,GAAc;IAAnL,CAAN,CAAjZ;;IAAilB,IAAGjC,CAAC,EAAEkC,MAAH,KAAYP,CAAC,CAACQ,YAAF,GAAe,IAAIrF,CAAJ,CAAM;MAAC8D,IAAI,EAAC,CAAC,EAAP;MAAUS,IAAI,EAAC,KAAGxG,CAAlB;MAAoBuG,IAAI,EAAC3E,CAAC,GAAC,EAA3B;MAA8BoE,IAAI,EAAC,EAAnC;MAAsCR,gBAAgB,EAACG;IAAvD,CAAN,CAAf,EAAgFmB,CAAC,CAACS,SAAF,GAAY,IAAIxF,CAAJ,CAAM;MAACyF,eAAe,EAAC,CAAjB;MAAmBC,mBAAmB,EAAC,CAACtC,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAK,CAAX,EAAaA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAK,CAAvB,EAAyBA,CAAC,CAAC,CAAD,CAA1B,EAA8BA,CAAC,CAAC,CAAD,CAA/B,EAAmC,CAACA,CAAC,CAAC,CAAD,CAArC,EAAyC,CAACA,CAAC,CAAC,CAAD,CAA3C;IAAvC,CAAN,CAA5F,EAA2L2B,CAAC,CAACvB,MAAF,GAASuB,CAAC,CAACS,SAAF,CAAYG,gBAAZ,CAA6BZ,CAAC,CAACQ,YAA/B,CAApM,EAAiPR,CAAC,CAACE,SAAF,GAAY,IAAI9E,CAAJ,CAAM;MAACH,CAAC,EAAC,CAAC8D,CAAC,CAACU,IAAF,GAAOV,CAAC,CAACE,IAAV,IAAgBnE,CAAnB;MAAqBA,CAAC,EAAC,CAACiE,CAAC,CAACG,IAAF,GAAOH,CAAC,CAACW,IAAV,IAAgBxG,CAAvC;MAAyCwF,gBAAgB,EAACG;IAA1D,CAAN,CAA7P,EAAiUM,CAAC,CAACG,MAAF,CAASrE,CAAT,GAAW,CAAC,EAA7U,EAAgVkE,CAAC,CAACG,MAAF,CAASxE,CAAT,GAAW,EAAvW,GAA2W,CAAC,KAAK+F,QAAL,CAAcC,cAAd,EAA8BC,QAA9B,CAAuC,SAAvC,CAA/W,EAAia;MAAC,MAAM3H,CAAC,GAAC,MAAM,KAAK4H,mBAAL,CAAyB7H,CAAzB,CAAd;;MAA0C,IAAG,QAAMC,CAAT,EAAW;QAAC,IAAG4G,CAAC,CAACM,UAAF,GAAalH,CAAC,CAACkH,UAAF,IAAcN,CAAC,CAACM,UAA7B,EAAwCN,CAAC,CAACiB,UAAF,GAAa7H,CAAC,CAAC6H,UAAvD,EAAkE7H,CAAC,CAAC6H,UAAF,IAAczH,CAAC,CAACwG,CAAC,CAACM,UAAH,CAAf,KAAgCN,CAAC,CAACM,UAAF,GAAatF,CAAC,CAAC5B,CAAC,CAAC6H,UAAH,CAA9C,CAAlE,EAAgI7H,CAAC,CAACqH,SAAF,IAAa,CAACpC,CAAjJ,EAAmJ;UAAC2B,CAAC,CAACS,SAAF,GAAYrH,CAAC,CAACqH,SAAd,EAAwBT,CAAC,CAACQ,YAAF,GAAeR,CAAC,CAACvB,MAAzC;UAAgD,MAAMtF,CAAC,GAAC6G,CAAC,CAACS,SAAF,CAAYG,gBAAZ,CAA6BZ,CAAC,CAACQ,YAA/B,CAAR;UAAqDR,CAAC,CAACE,SAAF,GAAY,IAAI9E,CAAJ,CAAM;YAACH,CAAC,EAAC,CAAC9B,CAAC,CAACsG,IAAF,GAAOtG,CAAC,CAAC8F,IAAV,IAAgBnE,CAAnB;YAAqBA,CAAC,EAAC,CAAC3B,CAAC,CAAC+F,IAAF,GAAO/F,CAAC,CAACuG,IAAV,IAAgBxG,CAAvC;YAAyCwF,gBAAgB,EAACG;UAA1D,CAAN,CAAZ,EAAgFmB,CAAC,CAACvB,MAAF,GAAStF,CAAzF;QAA2F;;QAAA6G,CAAC,CAACtB,gBAAF,KAAqBsB,CAAC,CAACtB,gBAAF,GAAmBtF,CAAC,CAACsF,gBAA1C;MAA4D;IAAC;;IAAA,IAAG,KAAKwC,IAAL,CAAU,YAAV,EAAuBlB,CAAvB,GAA0B,KAAKpE,WAAL,GAAiB;MAACgB,YAAY,EAAC7C,CAAd;MAAgB+C,SAAS,EAACrC,CAA1B;MAA4B0G,IAAI,EAACxG,CAAjC;MAAmC,GAAGE;IAAtC,CAA3C,EAAoF,CAAC,KAAKe,WAAL,CAAiBwF,WAAzG,EAAqH,MAAM,IAAIhI,CAAJ,CAAM,iBAAN,EAAwB,iCAA+B,KAAKwC,WAAL,CAAiByF,OAAxE,CAAN;IAAuF,KAAKC,cAAL;EAAsB;;EAAkB,MAAZC,YAAY,CAACpI,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAC,GAAC,EAAT,EAAY;IAAC,IAAG,CAAC,KAAKoC,WAAL,EAAkBwF,WAAnB,IAAgC,KAAKI,cAAL,CAAoBrI,CAApB,EAAsBC,CAAtB,EAAwBE,CAAxB,CAAnC,EAA8D,OAAO,IAAP;;IAAY,MAAMI,CAAC,GAAC,KAAK+H,gBAAL,CAAsBtI,CAAtB,EAAwBC,CAAxB,EAA0BE,CAA1B,CAAR;;IAAqC,IAAG,CAACI,CAAJ,EAAM,OAAO,IAAP;IAAY,MAAK;MAACgI,MAAM,EAAC9H,CAAR;MAAU+H,eAAe,EAAC9H,CAA1B;MAA4B+H,gBAAgB,EAAC9H,CAA7C;MAA+C+H,GAAG,EAAC9H;IAAnD,IAAsDL,CAA3D;IAAA,MAA6DO,CAAC,GAACL,CAAC,CAACkI,GAAF,CAAO3I,CAAC,IAAE,KAAKgD,OAAL,CAAa,KAAKC,GAAlB,EAAsB;MAACC,KAAK,EAAClD,CAAP;MAASqD,YAAY,EAAC,cAAtB;MAAqCP,MAAM,EAACzC,CAAC,CAACyC;IAA9C,CAAtB,CAAV,CAA/D;IAAA,MAAwJ9B,CAAC,GAAC,MAAM4H,OAAO,CAACC,GAAR,CAAY/H,CAAZ,CAAhK;IAAA,MAA+KI,CAAC,GAACF,CAAC,CAAC2H,GAAF,CAAO3I,CAAC,IAAEA,CAAC,CAAC+C,IAAF,CAAO+F,UAAjB,EAA8BC,MAA9B,CAAsC,CAAC/I,CAAD,EAAGC,CAAH,KAAOD,CAAC,GAACC,CAA/C,CAAjL;IAAA,MAAoOmB,CAAC,GAAC,MAAIJ,CAAC,CAACoG,MAAN,GAAapG,CAAC,CAAC,CAAD,CAAD,CAAK+B,IAAlB,GAAuB,IAAIiG,WAAJ,CAAgB9H,CAAhB,CAA7P;IAAA,MAAgRI,CAAC,GAAC,CAAC,CAAD,CAAlR;IAAA,MAAsRE,CAAC,GAAC,CAAC,CAAD,CAAxR;;IAA4R,IAAGR,CAAC,CAACoG,MAAF,GAAS,CAAZ,EAAc;MAAC,MAAMpH,CAAC,GAAC,IAAIiJ,UAAJ,CAAe7H,CAAf,CAAR;;MAA0B,KAAI,IAAInB,CAAC,GAAC,CAAN,EAAQE,CAAC,GAAC,CAAd,EAAgBF,CAAC,GAACe,CAAC,CAACoG,MAApB,EAA2BnH,CAAC,EAA5B,EAA+B;QAAC,MAAMI,CAAC,GAACW,CAAC,CAACf,CAAD,CAAD,CAAK8C,IAAb;QAAkB/C,CAAC,CAACkJ,GAAF,CAAM,IAAID,UAAJ,CAAe5I,CAAf,CAAN,EAAwBF,CAAxB,GAA2BmB,CAAC,CAACrB,CAAD,CAAD,GAAKE,CAAhC,EAAkCA,CAAC,IAAEE,CAAC,CAACyI,UAAvC,EAAkDtH,CAAC,CAACvB,CAAD,CAAD,GAAKI,CAAC,CAACyI,UAAzD;MAAoE;IAAC;;IAAA,MAAK;MAAC7C,UAAU,EAACvE,CAAZ;MAAcwE,WAAW,EAACvE;IAA1B,IAA6B,KAAKwH,mBAAL,CAAyBnJ,CAAzB,CAAlC;IAAA,MAA8D6B,CAAC,GAAC,MAAM,KAAKuH,gBAAL,CAAsBhI,CAAtB,EAAwB;MAACiI,MAAM,EAAC,MAAR;MAAeC,aAAa,EAAC;QAACC,UAAU,EAAC,KAAK9G,WAAjB;QAA6BiG,GAAG,EAAC9H,CAAjC;QAAmC4I,OAAO,EAAClI,CAA3C;QAA6CmI,KAAK,EAACjI;MAAnD,CAA7B;MAAmFqC,KAAK,EAACnC,CAAzF;MAA2FoC,MAAM,EAACnC,CAAlG;MAAoGsC,MAAM,EAAC,IAA3G;MAAgHE,SAAS,EAAC;IAA1H,CAAxB,CAAtE;IAA+N,IAAIrC,CAAJ,EAAMC,CAAN,EAAQC,CAAR;;IAAU,IAAGtB,CAAC,KAAGgB,CAAJ,IAAOf,CAAC,KAAGgB,CAAd,EAAgB;MAAC,IAAI3B,CAAC,GAAC6B,CAAC,CAAC6H,IAAR;MAAa,IAAG1J,CAAH;QAAK,KAAI8B,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACH,CAAV,EAAYG,CAAC,EAAb,EAAgB,IAAGE,CAAC,GAACF,CAAC,GAACJ,CAAJ,EAAMI,CAAC,GAACnB,CAAX,EAAa,KAAIoB,CAAC,GAACrB,CAAN,EAAQqB,CAAC,GAACL,CAAV,EAAYK,CAAC,EAAb,EAAgB/B,CAAC,CAACgC,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP,CAA7B,KAA2C,KAAIA,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACL,CAAV,EAAYK,CAAC,EAAb,EAAgB/B,CAAC,CAACgC,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP;MAAhF,OAA8F,KAAI/B,CAAC,GAAC,IAAIiJ,UAAJ,CAAevH,CAAC,GAACC,CAAjB,CAAF,EAAsBE,CAAC,CAAC6H,IAAF,GAAO1J,CAA7B,EAA+B8B,CAAC,GAAC,CAArC,EAAuCA,CAAC,GAACnB,CAAzC,EAA2CmB,CAAC,EAA5C,EAA+C,KAAIE,CAAC,GAACF,CAAC,GAACJ,CAAJ,EAAMK,CAAC,GAAC,CAAZ,EAAcA,CAAC,GAACrB,CAAhB,EAAkBqB,CAAC,EAAnB,EAAsB/B,CAAC,CAACgC,CAAC,GAACD,CAAH,CAAD,GAAO,CAAP;IAAS;;IAAA,OAAOF,CAAP;EAAS;;EAAe,MAAT+B,SAAS,CAAC5D,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAC,GAAC,CAAb,EAAeC,CAAf,EAAiB;IAAC,IAAG,CAACL,CAAJ,EAAM,OAAO,IAAP;;IAAY,IAAGA,CAAC,IAAEJ,CAAC,CAAC6I,UAAL,IAAiBzI,CAAC,GAAC,CAAtB,EAAwB;MAACJ,CAAC,GAAC,CAAC,MAAM,KAAK+C,OAAL,CAAa,KAAKC,GAAlB,EAAsB;QAACC,KAAK,EAAC;UAACC,IAAI,EAAC9C,CAAC,GAACE,CAAR;UAAU6C,EAAE,EAAC/C,CAAC,GAACE,CAAF,GAAI,KAAKmC;QAAtB,CAAP;QAA0CW,YAAY,EAAC,cAAvD;QAAsEP,MAAM,EAACpC;MAA7E,CAAtB,CAAP,EAA+GqC,IAAjH,EAAsHxC,CAAC,GAACF,CAAC,GAACE,CAA1H,EAA4HF,CAAC,GAAC,CAA9H;IAAgI;;IAAA,MAAMM,CAAC,GAAC,MAAM,KAAKgJ,QAAL,CAAc1J,CAAd,EAAgBE,CAAhB,EAAkBE,CAAlB,EAAoBE,CAApB,EAAsBoB,CAAC,CAACiI,SAAxB,EAAkCnJ,CAAlC,EAAoCC,CAApC,CAAd;IAAqD,IAAGV,CAAC,CAAC6J,IAAF,CAAOlJ,CAAC,CAAC+H,GAAT,GAAc,CAAC/H,CAAC,CAACmJ,OAApB,EAA4B,OAAO,IAAP;IAAY,MAAM,KAAKlG,SAAL,CAAe5D,CAAf,EAAiBC,CAAjB,EAAmBE,CAAnB,EAAqBQ,CAAC,CAACmJ,OAAF,GAAUvJ,CAA/B,EAAiCA,CAAjC,EAAmCE,CAAnC,EAAqCC,CAArC,CAAN;EAA8C;;EAAc,MAARiJ,QAAQ,CAAC3J,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAC,GAACoB,CAAC,CAACiI,SAAb,EAAuBnJ,CAAC,GAAC,CAAzB,EAA2BC,CAA3B,EAA6B;IAAC,IAAG,CAACV,CAAJ,EAAM,OAAO,IAAP;IAAY,MAAMW,CAAC,GAACW,CAAC,CAACtB,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAX,CAAT;;IAAuB,IAAGE,CAAC,CAACoJ,OAAL,EAAa;MAAC,MAAM5J,CAAC,GAAC,EAAR;;MAAW,IAAGQ,CAAC,CAAC+H,GAAF,CAAMsB,OAAN,CAAehK,CAAC,IAAE;QAACA,CAAC,CAACmC,MAAF,IAAUhC,CAAC,CAAC0J,IAAF,CAAO7J,CAAP,CAAV;MAAoB,CAAvC,GAA0CG,CAAC,CAACiH,MAAF,GAAS,CAAtD,EAAwD;QAAC,MAAM7G,CAAC,GAACJ,CAAC,CAACwI,GAAF,CAAO3I,CAAC,IAAEA,CAAC,CAACiK,iBAAZ,CAAR;QAAA,MAAwCxJ,CAAC,GAACyJ,IAAI,CAACC,GAAL,CAASC,KAAT,CAAe,IAAf,EAAoB7J,CAAC,CAACoI,GAAF,CAAO3I,CAAC,IAAEA,CAAC,CAAC,CAAD,CAAX,CAApB,CAA1C;;QAAgF,IAAGkK,IAAI,CAACC,GAAL,CAASC,KAAT,CAAe,IAAf,EAAoB7J,CAAC,CAACoI,GAAF,CAAO3I,CAAC,IAAEA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,CAApB,IAA2CS,CAA3C,IAA8C,KAAKiC,WAAtD,EAAkE;UAAC,MAAK;YAACK,IAAI,EAACxC;UAAN,IAAS,MAAM,KAAKyC,OAAL,CAAa,KAAKC,GAAlB,EAAsB;YAACC,KAAK,EAAC;cAACC,IAAI,EAAC1C,CAAN;cAAQ2C,EAAE,EAAC3C,CAAC,GAAC,KAAKiC;YAAlB,CAAP;YAAsCW,YAAY,EAAC,cAAnD;YAAkEP,MAAM,EAACpC;UAAzE,CAAtB,CAApB;UAAuHV,CAAC,GAACO,CAAF,EAAIF,CAAC,GAACI,CAAN,EAAQN,CAAC,CAAC6J,OAAF,CAAW7J,CAAC,IAAEqB,CAAC,CAACxB,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,CAAf,CAAR;QAAmC;MAAC;;MAAA,IAAGM,CAAC,CAAC+H,GAAF,CAAM2B,GAAN,CAAU,iBAAV,CAAH,EAAgC;QAAC,MAAMlK,CAAC,GAACQ,CAAC,CAAC+H,GAAF,CAAMxG,GAAN,CAAU,iBAAV,CAAR;QAAA,MAAqC3B,CAAC,GAACJ,CAAC,CAACgC,MAAzC;;QAAgD,IAAG5B,CAAC,IAAEA,CAAC,CAAC6G,MAAF,GAAS,CAAf,EAAiB;UAAC,MAAM3G,CAAC,GAACF,CAAC,CAAC,CAAD,CAAD,GAAK,GAAL,GAASA,CAAC,CAAC,CAAD,CAAV,GAAc,GAAd,GAAkBA,CAAC,CAAC,CAAD,CAA3B;UAAA,MAA+BI,CAAC,GAAC,MAAM,KAAKgJ,QAAL,CAAc3J,CAAd,EAAgBC,CAAhB,EAAkBE,CAAC,CAACmK,WAAF,GAAc,CAAd,GAAgBjK,CAAlC,EAAoCA,CAApC,EAAsCsB,CAAC,CAAC4I,QAAxC,EAAiD,CAAjD,EAAmD7J,CAAnD,CAAvC;UAA6FP,CAAC,CAAC4C,IAAF,GAAOpC,CAAC,CAAC+H,GAAT,EAAavI,CAAC,CAAC4C,IAAF,IAAQ5C,CAAC,CAAC4C,IAAF,CAAOmG,GAAP,CAAW,gBAAX,EAA4B;YAACsB,EAAE,EAAC,CAAJ;YAAMC,IAAI,EAAC,CAAX;YAAaC,UAAU,EAAC,CAAxB;YAA0BJ,WAAW,EAAC,IAAtC;YAA2CnI,MAAM,EAAC,CAAC1B,CAAD;UAAlD,CAA5B,CAArB;QAAyG;MAAC;;MAAA,OAAOE,CAAP;IAAS;;IAAA,IAAGA,CAAC,CAACgK,kBAAF,IAAsBhK,CAAC,CAACgK,kBAAF,KAAuB3K,CAAC,CAAC8I,UAAlD,EAA6D;MAAC,MAAM3I,CAAC,GAAC,MAAM,KAAK6C,OAAL,CAAa,KAAKC,GAAlB,EAAsB;QAACC,KAAK,EAAC;UAACC,IAAI,EAAC9C,CAAN;UAAQ+C,EAAE,EAAC/C,CAAC,GAACM,CAAC,CAACgK,kBAAJ,GAAuB;QAAlC,CAAP;QAA4CtH,YAAY,EAAC,cAAzD;QAAwEP,MAAM,EAACpC;MAA/E,CAAtB,CAAd;MAAuH,OAAM,CAACV,CAAC,GAACG,CAAC,CAAC4C,IAAL,EAAW+F,UAAX,GAAsBnI,CAAC,CAACgK,kBAAxB,GAA2C,IAA3C,GAAgD,KAAKhB,QAAL,CAAc3J,CAAd,EAAgBC,CAAhB,EAAkB,CAAlB,EAAoBI,CAApB,EAAsBsB,CAAC,CAACiI,SAAxB,EAAkC,CAAlC,EAAoClJ,CAApC,CAAtD;IAA6F;EAAC;;EAAA4H,gBAAgB,CAACtI,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAK;MAACoE,iBAAiB,EAAClE,CAAnB;MAAqB+F,aAAa,EAAC7F;IAAnC,IAAsC,KAAKqK,UAAL,CAAgB5D,WAA3D;IAAA,MAAuEvG,CAAC,GAAC,MAAIT,CAAJ,GAAM,CAAN,GAAQA,CAAC,IAAEK,CAAC,GAAC,CAAJ,CAAlF;IAAA,MAAyFK,CAAC,GAAC,KAAK+B,WAAL,CAAiBuF,IAAjB,CAAsBvH,CAAtB,CAA3F;IAAoH,IAAG,CAACC,CAAJ,EAAM,OAAO,IAAP;;IAAY,MAAMC,CAAC,GAACe,CAAC,CAAChB,CAAD,EAAG,KAAK+B,WAAR,CAAT;IAAA,MAA8B7B,CAAC,GAACb,CAAC,CAACW,CAAD,EAAG,aAAH,CAAjC;;IAAmD,IAAG,KAAK,CAAL,KAASE,CAAZ,EAAc,OAAO,IAAP;;IAAY,MAAME,CAAC,GAACf,CAAC,CAACW,CAAD,EAAG,gBAAH,CAAT;IAAA,MAA8B;MAACmK,MAAM,EAAC7J,CAAR;MAAU8J,MAAM,EAAC5J,CAAjB;MAAmB6J,MAAM,EAAC3J,CAA1B;MAA4B4J,MAAM,EAAC1J;IAAnC,IAAsCf,CAAC,CAACE,CAAD,CAArE;;IAAyE,IAAGR,CAAC,GAACmB,CAAF,IAAKjB,CAAC,GAACmB,CAAP,IAAUrB,CAAC,GAACe,CAAZ,IAAeb,CAAC,GAACe,CAApB,EAAsB,OAAO,IAAP;IAAY,MAAMM,CAAC,GAACY,CAAC,CAAC1B,CAAD,EAAG,YAAH,CAAT;IAAA,MAA0BiB,CAAC,GAACS,CAAC,CAAC1B,CAAD,EAAG,aAAH,CAA7B;IAAA,MAA+CmB,CAAC,GAACO,CAAC,CAAC1B,CAAD,EAAG,WAAH,CAAlD;IAAA,MAAkEoB,CAAC,GAACM,CAAC,CAAC1B,CAAD,EAAG,YAAH,CAArE;IAAA,MAAsFqB,CAAC,GAACpB,CAAC,GAAC,KAAKiK,UAAL,CAAgB9D,SAAjB,GAA2B,CAApH;IAAA,MAAsH9E,CAAC,GAACD,CAAC,GAAC9B,CAAF,IAAKqB,CAAC,GAAC,CAAP,IAAUnB,CAAlI;IAAA,MAAoI8B,CAAC,GAAC,CAAC;MAACkB,IAAI,EAACvC,CAAC,CAACoB,CAAD,CAAP;MAAWoB,EAAE,EAACxC,CAAC,CAACoB,CAAC,GAACD,CAAF,GAAI,CAAL,CAAD,GAASjB,CAAC,CAACkB,CAAC,GAACD,CAAF,GAAI,CAAL,CAAV,GAAkB;IAAhC,CAAD,CAAtI;;IAA2K,IAAGpB,CAAH,EAAK;MAAC,IAAIX,CAAC,GAAC,CAAC,CAAP;;MAAS,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC8B,CAAd,EAAgB9B,CAAC,EAAjB,EAAoB,IAAGW,CAAC,CAACoB,CAAC,GAAC/B,CAAH,CAAD,GAAOa,CAAC,CAACkB,CAAC,GAAC/B,CAAH,CAAR,KAAgBW,CAAC,CAACoB,CAAC,GAAC/B,CAAF,GAAI,CAAL,CAApB,EAA4B;QAACD,CAAC,GAAC,CAAC,CAAH;QAAK;MAAM;;MAAA,IAAG,CAACA,CAAJ,EAAM,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC8B,CAAd,EAAgB9B,CAAC,EAAjB,EAAoBgC,CAAC,CAAChC,CAAD,CAAD,GAAK;QAACkD,IAAI,EAACvC,CAAC,CAACoB,CAAC,GAAC/B,CAAH,CAAP;QAAamD,EAAE,EAACxC,CAAC,CAACoB,CAAC,GAAC/B,CAAH,CAAD,GAAOa,CAAC,CAACkB,CAAC,GAAC/B,CAAH,CAAR,GAAc;MAA9B,CAAL;IAAsC;;IAAA,MAAMoC,CAAC,GAACzB,CAAC,CAACoB,CAAD,CAAT;IAAA,MAAakC,CAAC,GAACpD,CAAC,CAACkB,CAAD,CAAhB;IAAoB,IAAG,QAAMK,CAAN,IAAS,QAAM6B,CAAlB,EAAoB,OAAO,IAAP;IAAY,OAAM;MAACqE,MAAM,EAACtG,CAAR;MAAUyG,GAAG,EAAChI,CAAd;MAAgB8H,eAAe,EAACrI,CAAC,KAAGmB,CAAJ,GAAME,CAAC,GAACK,CAAR,GAAUA,CAA1C;MAA4C4G,gBAAgB,EAACxI,CAAC,KAAGmB,CAAJ,GAAMO,CAAC,GAACG,CAAR,GAAUA;IAAvE,CAAN;EAAgF;;EAAyB,MAAnB+F,mBAAmB,CAAC7H,CAAD,EAAG;IAAC,IAAG;MAAC,MAAK;QAAC+C,IAAI,EAAC9C;MAAN,IAAS,MAAM,KAAK+C,OAAL,CAAa,KAAKC,GAAL,GAAS,UAAtB,EAAiC;QAACI,YAAY,EAAC,KAAd;QAAoBP,MAAM,EAAC9C,CAAC,EAAE8C;MAA9B,CAAjC,CAApB;MAA4F,OAAO9B,CAAC,CAACf,CAAD,CAAR;IAAY,CAA5G,CAA4G,MAAK;MAAC,OAAO,IAAP;IAAY;EAAC;;AAAryL,CAArB;AAA4zLD,CAAC,CAAC,CAACO,CAAC,EAAF,CAAD,EAAO8B,CAAC,CAAC4I,SAAT,EAAmB,QAAnB,EAA4B,KAAK,CAAjC,CAAD,EAAqCjL,CAAC,CAAC,CAACO,CAAC,EAAF,CAAD,EAAO8B,CAAC,CAAC4I,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAAtC,EAA+EjL,CAAC,CAAC,CAACO,CAAC,EAAF,CAAD,EAAO8B,CAAC,CAAC4I,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAAhF,EAAyHjL,CAAC,CAAC,CAACO,CAAC,CAAC;EAACkK,IAAI,EAACS,MAAN;EAAaC,IAAI,EAAC;IAACC,KAAK,EAAC,CAAC;EAAR;AAAlB,CAAD,CAAF,CAAD,EAAoC/I,CAAC,CAAC4I,SAAtC,EAAgD,eAAhD,EAAgE,KAAK,CAArE,CAA1H,EAAkM5I,CAAC,GAACrC,CAAC,CAAC,CAACS,CAAC,CAAC,+CAAD,CAAF,CAAD,EAAsD4B,CAAtD,CAArM;AAA8P,MAAM6B,CAAC,GAAC7B,CAAR;AAAU,SAAO6B,CAAC,IAAImH,OAAZ"},"metadata":{},"sourceType":"module"}