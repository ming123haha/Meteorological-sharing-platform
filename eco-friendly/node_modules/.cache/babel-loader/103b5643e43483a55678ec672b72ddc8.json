{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from \"../has.js\";\nvar t;\n!function (t) {\n  t[t.HANDSHAKE = 0] = \"HANDSHAKE\", t[t.OPEN = 1] = \"OPEN\", t[t.OPENED = 2] = \"OPENED\", t[t.RESPONSE = 3] = \"RESPONSE\", t[t.INVOKE = 4] = \"INVOKE\", t[t.ABORT = 5] = \"ABORT\", t[t.CLOSE = 6] = \"CLOSE\", t[t.OPEN_PORT = 7] = \"OPEN_PORT\", t[t.ON = 8] = \"ON\";\n}(t || (t = {}));\nlet e = 0;\n\nfunction r() {\n  return e++;\n}\n\nfunction n(t) {\n  return t && \"object\" == typeof t && (\"result\" in t || \"transferList\" in t);\n}\n\nfunction s(t) {\n  return t ? \"string\" == typeof t ? JSON.stringify({\n    name: \"message\",\n    message: t\n  }) : t.toJSON ? JSON.stringify(t) : JSON.stringify({\n    name: t.name,\n    message: t.message,\n    details: t.details || {\n      stack: t.stack\n    }\n  }) : null;\n}\n\nfunction o(e, r, f, a) {\n  if (r.type === t.OPEN_PORT) return void e.postMessage(r, [r.port]);\n  if (r.type !== t.INVOKE && r.type !== t.RESPONSE) return void e.postMessage(r);\n  let u;\n\n  if (n(f) ? (u = i(f.transferList), r.data = f.result) : (u = i(a), r.data = f), u) {\n    if (has(\"ff\")) for (const n of u) if (\"byteLength\" in n && n.byteLength > 267386880) {\n      const n = \"Worker call with large ArrayBuffer would crash Firefox\";\n\n      switch (r.type) {\n        case t.INVOKE:\n          throw n;\n\n        case t.RESPONSE:\n          return void o(e, {\n            type: t.RESPONSE,\n            jobId: r.jobId,\n            error: s(n)\n          });\n      }\n    }\n    e.postMessage(r, u);\n  } else e.postMessage(r);\n}\n\nfunction f(t) {\n  if (!t) return null;\n  const e = t.data;\n  return e ? \"string\" == typeof e ? JSON.parse(e) : e : null;\n}\n\nfunction i(t) {\n  if (!t || !t.length) return null;\n  if (has(\"esri-workers-arraybuffer-transfer\")) return t;\n  const e = t.filter(t => !a(t));\n  return e.length ? e : null;\n}\n\nfunction a(t) {\n  return t instanceof ArrayBuffer || t && t.constructor && \"ArrayBuffer\" === t.constructor.name;\n}\n\nexport { t as MessageType, n as isTranferableResult, r as newJobId, o as postMessage, f as receiveMessage, s as toInvokeError };","map":{"version":3,"names":["has","t","HANDSHAKE","OPEN","OPENED","RESPONSE","INVOKE","ABORT","CLOSE","OPEN_PORT","ON","e","r","n","s","JSON","stringify","name","message","toJSON","details","stack","o","f","a","type","postMessage","port","u","i","transferList","data","result","byteLength","jobId","error","parse","length","filter","ArrayBuffer","constructor","MessageType","isTranferableResult","newJobId","receiveMessage","toInvokeError"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/workers/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../has.js\";var t;!function(t){t[t.HANDSHAKE=0]=\"HANDSHAKE\",t[t.OPEN=1]=\"OPEN\",t[t.OPENED=2]=\"OPENED\",t[t.RESPONSE=3]=\"RESPONSE\",t[t.INVOKE=4]=\"INVOKE\",t[t.ABORT=5]=\"ABORT\",t[t.CLOSE=6]=\"CLOSE\",t[t.OPEN_PORT=7]=\"OPEN_PORT\",t[t.ON=8]=\"ON\"}(t||(t={}));let e=0;function r(){return e++}function n(t){return t&&\"object\"==typeof t&&(\"result\"in t||\"transferList\"in t)}function s(t){return t?\"string\"==typeof t?JSON.stringify({name:\"message\",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function o(e,r,f,a){if(r.type===t.OPEN_PORT)return void e.postMessage(r,[r.port]);if(r.type!==t.INVOKE&&r.type!==t.RESPONSE)return void e.postMessage(r);let u;if(n(f)?(u=i(f.transferList),r.data=f.result):(u=i(a),r.data=f),u){if(has(\"ff\"))for(const n of u)if(\"byteLength\"in n&&n.byteLength>267386880){const n=\"Worker call with large ArrayBuffer would crash Firefox\";switch(r.type){case t.INVOKE:throw n;case t.RESPONSE:return void o(e,{type:t.RESPONSE,jobId:r.jobId,error:s(n)})}}e.postMessage(r,u)}else e.postMessage(r)}function f(t){if(!t)return null;const e=t.data;return e?\"string\"==typeof e?JSON.parse(e):e:null}function i(t){if(!t||!t.length)return null;if(has(\"esri-workers-arraybuffer-transfer\"))return t;const e=t.filter((t=>!a(t)));return e.length?e:null}function a(t){return t instanceof ArrayBuffer||t&&t.constructor&&\"ArrayBuffer\"===t.constructor.name}export{t as MessageType,n as isTranferableResult,r as newJobId,o as postMessage,f as receiveMessage,s as toInvokeError};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}