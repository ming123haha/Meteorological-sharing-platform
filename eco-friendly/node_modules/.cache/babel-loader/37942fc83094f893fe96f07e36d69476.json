{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { packFloatRGBA as e } from \"../../../../core/floatRGBA.js\";\nimport { disposeMaybe as t, isNone as r, isSome as i } from \"../../../../core/maybe.js\";\nimport { PixelFormat as o, PixelType as a, TextureWrapMode as n } from \"../../../webgl/enums.js\";\nimport { Texture as s } from \"../../../webgl/Texture.js\";\n\nclass c {\n  constructor(e) {\n    this._rctx = e, this.cache = new Map();\n  }\n\n  dispose() {\n    this.cache.forEach(e => e.texture = t(e.texture)), this.cache.clear();\n  }\n\n  _acquire(e) {\n    if (r(e)) return null;\n\n    const t = this._patternId(e),\n          i = this.cache.get(t);\n\n    if (i) return i.refCount++, i.bind;\n    const c = e.pixelRatio,\n          {\n      encodedData: h,\n      sdfNormalizer: l,\n      pixels: p,\n      paddedPixels: d\n    } = u(e.pattern, c),\n          f = p / c,\n          x = {\n      refCount: 1,\n      texture: null,\n      bind: e => (r(x.texture) && (x.texture = new s(this._rctx, {\n        width: d,\n        height: 1,\n        internalFormat: o.RGBA,\n        pixelFormat: o.RGBA,\n        dataType: a.UNSIGNED_BYTE,\n        wrapMode: n.CLAMP_TO_EDGE\n      }, h)), e.bindTexture(\"stipplePatternTexture\", x.texture), {\n        pixelSize: f,\n        sdfNormalizer: l,\n        pixels: p\n      })\n    };\n    return this.cache.set(t, x), x.bind;\n  }\n\n  release(e) {\n    if (r(e)) return;\n\n    const t = this._patternId(e),\n          o = this.cache.get(t);\n\n    o && (o.refCount--, 0 === o.refCount && (i(o.texture) && o.texture.dispose(), this.cache.delete(t)));\n  }\n\n  swap(e, t) {\n    const r = this._acquire(t);\n\n    return this.release(e), r;\n  }\n\n  _patternId(e) {\n    return `${e.pattern.join(\",\")}-r${e.pixelRatio}`;\n  }\n\n}\n\nfunction u(t, r) {\n  const i = t.map(e => Math.round(e * r)),\n        o = 1 / r,\n        a = Math.floor(i.reduce((e, t) => e + t)),\n        n = i.reduce((e, t) => Math.max(e, t)),\n        s = (Math.floor(.5 * (n - 1)) + .5) * o,\n        c = [];\n  let u = 1;\n\n  for (const e of i) {\n    for (let t = 0; t < e; t++) {\n      const r = u * (Math.min(t, e - 1 - t) + .5) * o / s * .5 + .5;\n      c.push(r);\n    }\n\n    u = -u;\n  }\n\n  const h = Math.round(i[0] / 2),\n        l = [...c.slice(h), ...c.slice(0, h)],\n        p = a + 2,\n        d = new Uint8Array(4 * p);\n  let f = 4;\n\n  for (const x of l) e(x, d, f), f += 4;\n\n  return d.copyWithin(0, f - 4, f), d.copyWithin(f, 4, 8), {\n    encodedData: d,\n    sdfNormalizer: s,\n    paddedPixels: p,\n    pixels: a\n  };\n}\n\nexport { c as StippleTextureRepository };","map":{"version":3,"names":["packFloatRGBA","e","disposeMaybe","t","isNone","r","isSome","i","PixelFormat","o","PixelType","a","TextureWrapMode","n","Texture","s","c","constructor","_rctx","cache","Map","dispose","forEach","texture","clear","_acquire","_patternId","get","refCount","bind","pixelRatio","encodedData","h","sdfNormalizer","l","pixels","p","paddedPixels","d","u","pattern","f","x","width","height","internalFormat","RGBA","pixelFormat","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","bindTexture","pixelSize","set","release","delete","swap","join","map","Math","round","floor","reduce","max","min","push","slice","Uint8Array","copyWithin","StippleTextureRepository"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/materials/StippleTextureRepository.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as e}from\"../../../../core/floatRGBA.js\";import{disposeMaybe as t,isNone as r,isSome as i}from\"../../../../core/maybe.js\";import{PixelFormat as o,PixelType as a,TextureWrapMode as n}from\"../../../webgl/enums.js\";import{Texture as s}from\"../../../webgl/Texture.js\";class c{constructor(e){this._rctx=e,this.cache=new Map}dispose(){this.cache.forEach((e=>e.texture=t(e.texture))),this.cache.clear()}_acquire(e){if(r(e))return null;const t=this._patternId(e),i=this.cache.get(t);if(i)return i.refCount++,i.bind;const c=e.pixelRatio,{encodedData:h,sdfNormalizer:l,pixels:p,paddedPixels:d}=u(e.pattern,c),f=p/c,x={refCount:1,texture:null,bind:e=>(r(x.texture)&&(x.texture=new s(this._rctx,{width:d,height:1,internalFormat:o.RGBA,pixelFormat:o.RGBA,dataType:a.UNSIGNED_BYTE,wrapMode:n.CLAMP_TO_EDGE},h)),e.bindTexture(\"stipplePatternTexture\",x.texture),{pixelSize:f,sdfNormalizer:l,pixels:p})};return this.cache.set(t,x),x.bind}release(e){if(r(e))return;const t=this._patternId(e),o=this.cache.get(t);o&&(o.refCount--,0===o.refCount&&(i(o.texture)&&o.texture.dispose(),this.cache.delete(t)))}swap(e,t){const r=this._acquire(t);return this.release(e),r}_patternId(e){return`${e.pattern.join(\",\")}-r${e.pixelRatio}`}}function u(t,r){const i=t.map((e=>Math.round(e*r))),o=1/r,a=Math.floor(i.reduce(((e,t)=>e+t))),n=i.reduce(((e,t)=>Math.max(e,t))),s=(Math.floor(.5*(n-1))+.5)*o,c=[];let u=1;for(const e of i){for(let t=0;t<e;t++){const r=u*(Math.min(t,e-1-t)+.5)*o/s*.5+.5;c.push(r)}u=-u}const h=Math.round(i[0]/2),l=[...c.slice(h),...c.slice(0,h)],p=a+2,d=new Uint8Array(4*p);let f=4;for(const x of l)e(x,d,f),f+=4;return d.copyWithin(0,f-4,f),d.copyWithin(f,4,8),{encodedData:d,sdfNormalizer:s,paddedPixels:p,pixels:a}}export{c as StippleTextureRepository};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}