{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { ShaderOutput as e } from \"./ShaderOutput.js\";\nimport { VertexPosition as r } from \"./attributes/VertexPosition.glsl.js\";\nimport { Float2PassUniform as a } from \"../shaderModules/Float2PassUniform.js\";\nimport { glsl as o } from \"../shaderModules/interfaces.js\";\n\nfunction t(e) {\n  e.varyings.add(\"linearDepth\", \"float\");\n}\n\nfunction i(e) {\n  e.vertex.uniforms.add(new a(\"nearFar\", (e, r) => r.camera.nearFar));\n}\n\nfunction n(e) {\n  e.vertex.code.add(o`float calculateLinearDepth(vec2 nearFar,float z) {\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n}`);\n}\n\nfunction d(a, d) {\n  const {\n    vertex: s\n  } = a;\n\n  switch (d.output) {\n    case e.Color:\n      if (d.receiveShadows) return t(a), void s.code.add(o`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);\n      break;\n\n    case e.Depth:\n    case e.Shadow:\n    case e.ShadowHighlight:\n    case e.ShadowExludeHighlight:\n      return a.include(r, d), t(a), i(a), n(a), void s.code.add(o`void forwardLinearDepth() {\nlinearDepth = calculateLinearDepth(nearFar, vPosition_view.z);\n}`);\n  }\n\n  s.code.add(o`void forwardLinearDepth() {}`);\n}\n\nexport { d as ForwardLinearDepth, n as addCalculateLinearDepth, t as addLinearDepth, i as addNearFar };","map":{"version":3,"names":["ShaderOutput","e","VertexPosition","r","Float2PassUniform","a","glsl","o","t","varyings","add","i","vertex","uniforms","camera","nearFar","n","code","d","s","output","Color","receiveShadows","Depth","Shadow","ShadowHighlight","ShadowExludeHighlight","include","ForwardLinearDepth","addCalculateLinearDepth","addLinearDepth","addNearFar"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"./ShaderOutput.js\";import{VertexPosition as r}from\"./attributes/VertexPosition.glsl.js\";import{Float2PassUniform as a}from\"../shaderModules/Float2PassUniform.js\";import{glsl as o}from\"../shaderModules/interfaces.js\";function t(e){e.varyings.add(\"linearDepth\",\"float\")}function i(e){e.vertex.uniforms.add(new a(\"nearFar\",((e,r)=>r.camera.nearFar)))}function n(e){e.vertex.code.add(o`float calculateLinearDepth(vec2 nearFar,float z) {\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n}`)}function d(a,d){const{vertex:s}=a;switch(d.output){case e.Color:if(d.receiveShadows)return t(a),void s.code.add(o`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case e.Depth:case e.Shadow:case e.ShadowHighlight:case e.ShadowExludeHighlight:return a.include(r,d),t(a),i(a),n(a),void s.code.add(o`void forwardLinearDepth() {\nlinearDepth = calculateLinearDepth(nearFar, vPosition_view.z);\n}`)}s.code.add(o`void forwardLinearDepth() {}`)}export{d as ForwardLinearDepth,n as addCalculateLinearDepth,t as addLinearDepth,i as addNearFar};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,YAAY,IAAIC,CAAvB,QAA6B,mBAA7B;AAAiD,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qCAA/B;AAAqE,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,uCAAlC;AAA0E,SAAOC,IAAI,IAAIC,CAAf,QAAqB,gCAArB;;AAAsD,SAASC,CAAT,CAAWP,CAAX,EAAa;EAACA,CAAC,CAACQ,QAAF,CAAWC,GAAX,CAAe,aAAf,EAA6B,OAA7B;AAAsC;;AAAA,SAASC,CAAT,CAAWV,CAAX,EAAa;EAACA,CAAC,CAACW,MAAF,CAASC,QAAT,CAAkBH,GAAlB,CAAsB,IAAIL,CAAJ,CAAM,SAAN,EAAiB,CAACJ,CAAD,EAAGE,CAAH,KAAOA,CAAC,CAACW,MAAF,CAASC,OAAjC,CAAtB;AAAkE;;AAAA,SAASC,CAAT,CAAWf,CAAX,EAAa;EAACA,CAAC,CAACW,MAAF,CAASK,IAAT,CAAcP,GAAd,CAAkBH,CAAE;AAC5Z;AACA,EAFwY;AAEpY;;AAAA,SAASW,CAAT,CAAWb,CAAX,EAAaa,CAAb,EAAe;EAAC,MAAK;IAACN,MAAM,EAACO;EAAR,IAAWd,CAAhB;;EAAkB,QAAOa,CAAC,CAACE,MAAT;IAAiB,KAAKnB,CAAC,CAACoB,KAAP;MAAa,IAAGH,CAAC,CAACI,cAAL,EAAoB,OAAOd,CAAC,CAACH,CAAD,CAAD,EAAK,KAAKc,CAAC,CAACF,IAAF,CAAOP,GAAP,CAAWH,CAAE,4DAAb,CAAjB;MAA2F;;IAAM,KAAKN,CAAC,CAACsB,KAAP;IAAa,KAAKtB,CAAC,CAACuB,MAAP;IAAc,KAAKvB,CAAC,CAACwB,eAAP;IAAuB,KAAKxB,CAAC,CAACyB,qBAAP;MAA6B,OAAOrB,CAAC,CAACsB,OAAF,CAAUxB,CAAV,EAAYe,CAAZ,GAAeV,CAAC,CAACH,CAAD,CAAhB,EAAoBM,CAAC,CAACN,CAAD,CAArB,EAAyBW,CAAC,CAACX,CAAD,CAA1B,EAA8B,KAAKc,CAAC,CAACF,IAAF,CAAOP,GAAP,CAAWH,CAAE;AAC/T;AACA,EAFkT,CAA1C;EAAlO;;EAElCY,CAAC,CAACF,IAAF,CAAOP,GAAP,CAAWH,CAAE,8BAAb;AAA4C;;AAAA,SAAOW,CAAC,IAAIU,kBAAZ,EAA+BZ,CAAC,IAAIa,uBAApC,EAA4DrB,CAAC,IAAIsB,cAAjE,EAAgFnB,CAAC,IAAIoB,UAArF"},"metadata":{},"sourceType":"module"}