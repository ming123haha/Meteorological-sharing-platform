{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Logger.js\";\nimport { EventMatch as t } from \"./EventMatch.js\";\nconst n = e.getLogger(\"esri.views.input.InputHandler\");\n\nclass i {\n  constructor(e) {\n    this._manager = null, this._incoming = {}, this._outgoing = {}, this._incomingEventMatches = null, this._incomingEventTypes = null, this._outgoingEventTypes = null, this._hasSideEffects = e;\n  }\n\n  get incomingEventMatches() {\n    if (!this._incomingEventMatches) {\n      this._incomingEventMatches = [];\n\n      for (const e in this._incoming) {\n        const t = this._incoming[e];\n\n        for (const e of t) this._incomingEventMatches.push(e.match);\n      }\n    }\n\n    return this._incomingEventMatches;\n  }\n\n  get incomingEventTypes() {\n    return this._incomingEventTypes || (this._incomingEventTypes = this.incomingEventMatches.map(e => e.eventType)), this._incomingEventTypes;\n  }\n\n  get outgoingEventTypes() {\n    return this._outgoingEventTypes || (this._outgoingEventTypes = Object.keys(this._outgoing)), this._outgoingEventTypes;\n  }\n\n  get hasSideEffects() {\n    return this._hasSideEffects;\n  }\n\n  get hasPendingInputs() {\n    return !1;\n  }\n\n  onInstall(e) {\n    this._manager ? n.error(\"This InputHandler has already been registered with an InputManager\") : (e.setEventCallback(e => this._handleEvent(e)), e.setUninstallCallback(() => this._onUninstall()), this._manager = e);\n  }\n\n  onUninstall() {}\n\n  registerIncoming(e, n, i) {\n    let a;\n    \"function\" == typeof n ? (i = n, a = []) : a = n || [];\n\n    const o = \"string\" == typeof e ? new t(e, a) : e,\n          h = () => {\n      this._incomingEventTypes = null, this._incomingEventMatches = null;\n    },\n          r = e => {\n      const t = this._incoming[e.match.eventType];\n\n      if (t) {\n        const n = t.indexOf(e);\n        t.splice(n, 1), h(), this._manager && this._manager.updateDependencies();\n      }\n    },\n          g = new s(o, i, {\n      onPause: r,\n      onRemove: r,\n      onResume: e => {\n        const t = this._incoming[e.match.eventType];\n        t && !t.includes(e) && (t.push(e), h(), this._manager && this._manager.updateDependencies());\n      }\n    });\n\n    let c = this._incoming[o.eventType];\n    return c || (c = [], this._incoming[o.eventType] = c), c.push(g), h(), this._manager && this._manager.updateDependencies(), g;\n  }\n\n  registerOutgoing(e) {\n    if (this._outgoing[e]) throw new Error(\"There is already a callback registered for this outgoing InputEvent: \" + e);\n    const t = new a(e, {\n      onEmit: (e, t, n, i) => {\n        this._manager?.emit(e.eventType, t, n, i);\n      },\n      onRemove: e => {\n        delete this._outgoing[e.eventType], this._manager?.updateDependencies();\n      }\n    });\n    return this._outgoing[e] = t, this._outgoingEventTypes = null, this._manager && this._manager.updateDependencies(), t;\n  }\n\n  startCapturingPointer(e) {\n    this._manager?.setPointerCapture(e, !0);\n  }\n\n  stopCapturingPointer(e) {\n    this._manager?.setPointerCapture(e, !1);\n  }\n\n  refreshHasPendingInputs() {\n    this._manager?.refreshHasPendingInputs();\n  }\n\n  _onUninstall() {\n    this._manager ? (this.onUninstall(), this._manager = null) : n.error(\"This InputHandler is not registered with an InputManager\");\n  }\n\n  _handleEvent(e) {\n    const t = this._incoming[e.type];\n    if (t) for (const n of t) if (n.match.matches(e) && (n.callback?.(e), e.shouldStopPropagation())) break;\n  }\n\n}\n\nclass s {\n  constructor(e, t, n) {\n    this.match = e, this._callback = t, this._handler = n;\n  }\n\n  pause() {\n    this._handler.onPause(this);\n  }\n\n  resume() {\n    this._handler.onResume(this);\n  }\n\n  remove() {\n    this._handler.onRemove(this);\n  }\n\n  get callback() {\n    return this._callback;\n  }\n\n}\n\nclass a {\n  constructor(e, t) {\n    this.eventType = e, this._removed = !1, this._handler = t;\n  }\n\n  emit(e, t, n) {\n    this._removed || this._handler.onEmit(this, e, t, n);\n  }\n\n  remove() {\n    this._removed = !0, this._handler.onRemove(this);\n  }\n\n}\n\nexport { i as InputHandler };","map":{"version":3,"names":["e","EventMatch","t","n","getLogger","i","constructor","_manager","_incoming","_outgoing","_incomingEventMatches","_incomingEventTypes","_outgoingEventTypes","_hasSideEffects","incomingEventMatches","push","match","incomingEventTypes","map","eventType","outgoingEventTypes","Object","keys","hasSideEffects","hasPendingInputs","onInstall","error","setEventCallback","_handleEvent","setUninstallCallback","_onUninstall","onUninstall","registerIncoming","a","o","h","r","indexOf","splice","updateDependencies","g","s","onPause","onRemove","onResume","includes","c","registerOutgoing","Error","onEmit","emit","startCapturingPointer","setPointerCapture","stopCapturingPointer","refreshHasPendingInputs","type","matches","callback","shouldStopPropagation","_callback","_handler","pause","resume","remove","_removed","InputHandler"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/input/InputHandler.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Logger.js\";import{EventMatch as t}from\"./EventMatch.js\";const n=e.getLogger(\"esri.views.input.InputHandler\");class i{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?n.error(\"This InputHandler has already been registered with an InputManager\"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,n,i){let a;\"function\"==typeof n?(i=n,a=[]):a=n||[];const o=\"string\"==typeof e?new t(e,a):e,h=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},r=e=>{const t=this._incoming[e.match.eventType];if(t){const n=t.indexOf(e);t.splice(n,1),h(),this._manager&&this._manager.updateDependencies()}},g=new s(o,i,{onPause:r,onRemove:r,onResume:e=>{const t=this._incoming[e.match.eventType];t&&!t.includes(e)&&(t.push(e),h(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[o.eventType];return c||(c=[],this._incoming[o.eventType]=c),c.push(g),h(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(e){if(this._outgoing[e])throw new Error(\"There is already a callback registered for this outgoing InputEvent: \"+e);const t=new a(e,{onEmit:(e,t,n,i)=>{this._manager?.emit(e.eventType,t,n,i)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):n.error(\"This InputHandler is not registered with an InputManager\")}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const n of t)if(n.match.matches(e)&&(n.callback?.(e),e.shouldStopPropagation()))break}}class s{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class a{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}remove(){this._removed=!0,this._handler.onRemove(this)}}export{i as InputHandler};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}