{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { adjustStaticAGOUrl as e } from \"../../../../core/devEnvironmentUtils.js\";\nimport { get as t, isSome as r, isNone as s } from \"../../../../core/maybe.js\";\nimport { a as o } from \"../../../../chunks/mat3.js\";\nimport { c as i } from \"../../../../chunks/mat3f64.js\";\nimport { a } from \"../../../../chunks/mat4.js\";\nimport { c as u } from \"../../../../chunks/mat4f64.js\";\nimport { m as n, b as l, G as c, l as m, n as d, h as f } from \"../../../../chunks/vec3.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { empty as x, expandWithVec3 as g } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as h, BufferViewVec4f as b, BufferViewVec2f as R, BufferViewVec4u8 as v, BufferViewVec4u16 as B, BufferViewVec3u8 as M, BufferViewVec3u16 as T } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { t as w, a as y, s as j } from \"../../../../chunks/vec32.js\";\nimport { t as O, s as E } from \"../../../../chunks/vec42.js\";\nimport { createBuffer as C } from \"../../../../geometry/support/buffer/utils.js\";\nimport { DefaultLoadingContext as S } from \"../../glTF/DefaultLoadingContext.js\";\nimport { load as A } from \"../../glTF/loader.js\";\nimport { triangleFanToTriangles as N, triangleStripToTriangles as I, trianglesToTriangles as L } from \"../../glTF/internal/indexUtils.js\";\nimport { load as F, processLoadResult as k } from \"./wosrLoader.js\";\nimport { AlphaDiscardMode as P, DepthTestFunction as V, CullFaceOptions as G } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Geometry as _ } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Texture as D } from \"../../webgl-engine/lib/Texture.js\";\nimport { VertexAttribute as z } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as U } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { COLOR_GAMMA as q } from \"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";\nimport { PrimitiveType as W } from \"../../../webgl/enums.js\";\nimport { n as $ } from \"../../../../chunks/vec22.js\";\nimport { c as K, f as Q } from \"../../../../chunks/vec43.js\";\nimport { c as H } from \"../../../../chunks/vec33.js\";\n\nasync function J(s, o) {\n  const i = X(e(s));\n\n  if (\"wosr\" === i.fileType) {\n    const e = await (o.cache ? o.cache.loadWOSR(i.url, o) : F(i.url, o)),\n          t = k(e, o);\n    return {\n      lods: [t],\n      referenceBoundingBox: t.boundingBox,\n      isEsriSymbolResource: !1,\n      isWosr: !0,\n      remove: e.remove\n    };\n  }\n\n  const a = await (o.cache ? o.cache.loadGLTF(i.url, o, o.usePBR) : A(new S(o.streamDataRequester), i.url, o, o.usePBR)),\n        u = t(a.model.meta, \"ESRI_proxyEllipsoid\");\n  a.meta.isEsriSymbolResource && r(u) && a.meta.uri.includes(\"/RealisticTrees/\") && te(a, u);\n  const n = a.meta.isEsriSymbolResource ? {\n    usePBR: o.usePBR,\n    isSchematic: !1,\n    treeRendering: !!a.customMeta.esriTreeRendering,\n    mrrFactors: [0, 1, .2]\n  } : {\n    usePBR: o.usePBR,\n    isSchematic: !1,\n    treeRendering: !1,\n    mrrFactors: [0, 1, .5]\n  },\n        l = { ...o.materialParamsMixin,\n    treeRendering: !!a.customMeta.esriTreeRendering\n  };\n\n  if (null != i.specifiedLodIndex) {\n    const e = Y(a, n, l, i.specifiedLodIndex);\n    let t = e[0].boundingBox;\n\n    if (0 !== i.specifiedLodIndex) {\n      t = Y(a, n, l, 0)[0].boundingBox;\n    }\n\n    return {\n      lods: e,\n      referenceBoundingBox: t,\n      isEsriSymbolResource: a.meta.isEsriSymbolResource,\n      isWosr: !1,\n      remove: a.remove\n    };\n  }\n\n  const c = Y(a, n, l);\n  return {\n    lods: c,\n    referenceBoundingBox: c[0].boundingBox,\n    isEsriSymbolResource: a.meta.isEsriSymbolResource,\n    isWosr: !1,\n    remove: a.remove\n  };\n}\n\nfunction X(e) {\n  const t = e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);\n  if (t) return {\n    fileType: \"gltf\",\n    url: t[1],\n    specifiedLodIndex: null != t[4] ? Number(t[4]) : null\n  };\n  return e.match(/(.*\\.(json|json\\.gz))$/) ? {\n    fileType: \"wosr\",\n    url: e,\n    specifiedLodIndex: null\n  } : {\n    fileType: \"unknown\",\n    url: e,\n    specifiedLodIndex: null\n  };\n}\n\nfunction Y(e, t, s, a) {\n  const u = e.model,\n        n = i(),\n        l = new Array(),\n        c = new Map(),\n        m = new Map();\n  return u.lods.forEach((e, i) => {\n    if (void 0 !== a && i !== a) return;\n    const d = {\n      name: e.name,\n      stageResources: {\n        textures: new Array(),\n        materials: new Array(),\n        geometries: new Array()\n      },\n      lodThreshold: r(e.lodThreshold) ? e.lodThreshold : null,\n      pivotOffset: [0, 0, 0],\n      numberOfVertices: 0,\n      boundingBox: x()\n    };\n    l.push(d), e.parts.forEach(e => {\n      const i = e.material + (e.attributes.normal ? \"_normal\" : \"\") + (e.attributes.color ? \"_color\" : \"\") + (e.attributes.texCoord0 ? \"_texCoord0\" : \"\") + (e.attributes.tangent ? \"_tangent\" : \"\"),\n            a = u.materials.get(e.material),\n            l = r(e.attributes.texCoord0),\n            f = r(e.attributes.normal),\n            p = Z(a.alphaMode);\n\n      if (!c.has(i)) {\n        if (l) {\n          if (r(a.textureColor) && !m.has(a.textureColor)) {\n            const e = u.textures.get(a.textureColor),\n                  t = { ...e.parameters,\n              preMultiplyAlpha: p !== P.Opaque\n            };\n            m.set(a.textureColor, new D(e.data, t));\n          }\n\n          if (r(a.textureNormal) && !m.has(a.textureNormal)) {\n            const e = u.textures.get(a.textureNormal);\n            m.set(a.textureNormal, new D(e.data, e.parameters));\n          }\n\n          if (r(a.textureOcclusion) && !m.has(a.textureOcclusion)) {\n            const e = u.textures.get(a.textureOcclusion);\n            m.set(a.textureOcclusion, new D(e.data, e.parameters));\n          }\n\n          if (r(a.textureEmissive) && !m.has(a.textureEmissive)) {\n            const e = u.textures.get(a.textureEmissive);\n            m.set(a.textureEmissive, new D(e.data, e.parameters));\n          }\n\n          if (r(a.textureMetallicRoughness) && !m.has(a.textureMetallicRoughness)) {\n            const e = u.textures.get(a.textureMetallicRoughness);\n            m.set(a.textureMetallicRoughness, new D(e.data, e.parameters));\n          }\n        }\n\n        const o = a.color[0] ** (1 / q),\n              n = a.color[1] ** (1 / q),\n              d = a.color[2] ** (1 / q),\n              x = a.emissiveFactor[0] ** (1 / q),\n              g = a.emissiveFactor[1] ** (1 / q),\n              h = a.emissiveFactor[2] ** (1 / q),\n              b = r(a.textureColor) && l ? m.get(a.textureColor) : null;\n        c.set(i, new U({ ...t,\n          transparent: p === P.Blend,\n          customDepthTest: V.Lequal,\n          textureAlphaMode: p,\n          textureAlphaCutoff: a.alphaCutoff,\n          diffuse: [o, n, d],\n          ambient: [o, n, d],\n          opacity: a.opacity,\n          doubleSided: a.doubleSided,\n          doubleSidedType: \"winding-order\",\n          cullFace: a.doubleSided ? G.None : G.Back,\n          hasVertexColors: !!e.attributes.color,\n          hasVertexTangents: !!e.attributes.tangent,\n          normals: f ? \"default\" : \"screenDerivative\",\n          castShadows: !0,\n          receiveSSAO: !0,\n          textureId: r(b) ? b.id : void 0,\n          colorMixMode: a.colorMixMode,\n          normalTextureId: r(a.textureNormal) && l ? m.get(a.textureNormal).id : void 0,\n          textureAlphaPremultiplied: r(b) && !!b.params.preMultiplyAlpha,\n          occlusionTextureId: r(a.textureOcclusion) && l ? m.get(a.textureOcclusion).id : void 0,\n          emissiveTextureId: r(a.textureEmissive) && l ? m.get(a.textureEmissive).id : void 0,\n          metallicRoughnessTextureId: r(a.textureMetallicRoughness) && l ? m.get(a.textureMetallicRoughness).id : void 0,\n          emissiveFactor: [x, g, h],\n          mrrFactors: [a.metallicFactor, a.roughnessFactor, t.mrrFactors[2]],\n          isSchematic: !1,\n          ...s\n        }));\n      }\n\n      const x = ee(e.indices || e.attributes.position.count, e.primitiveType),\n            S = e.attributes.position.count,\n            A = C(h, S);\n      w(A, e.attributes.position, e.transform);\n      const N = [[z.POSITION, {\n        data: A.typedBuffer,\n        size: A.elementCount,\n        exclusive: !0\n      }]],\n            I = [[z.POSITION, x]];\n\n      if (r(e.attributes.normal)) {\n        const t = C(h, S);\n        o(n, e.transform), y(t, e.attributes.normal, n), N.push([z.NORMAL, {\n          data: t.typedBuffer,\n          size: t.elementCount,\n          exclusive: !0\n        }]), I.push([z.NORMAL, x]);\n      }\n\n      if (r(e.attributes.tangent)) {\n        const t = C(b, S);\n        o(n, e.transform), O(t, e.attributes.tangent, n), N.push([z.TANGENT, {\n          data: t.typedBuffer,\n          size: t.elementCount,\n          exclusive: !0\n        }]), I.push([z.TANGENT, x]);\n      }\n\n      if (r(e.attributes.texCoord0)) {\n        const t = C(R, S);\n        $(t, e.attributes.texCoord0), N.push([z.UV0, {\n          data: t.typedBuffer,\n          size: t.elementCount,\n          exclusive: !0\n        }]), I.push([z.UV0, x]);\n      }\n\n      if (r(e.attributes.color)) {\n        const t = C(v, S);\n        if (4 === e.attributes.color.elementCount) e.attributes.color instanceof b ? E(t, e.attributes.color, 255) : e.attributes.color instanceof v ? K(t, e.attributes.color) : e.attributes.color instanceof B && E(t, e.attributes.color, 1 / 256);else {\n          Q(t, 255, 255, 255, 255);\n          const r = new M(t.buffer, 0, 4);\n          e.attributes.color instanceof h ? j(r, e.attributes.color, 255) : e.attributes.color instanceof M ? H(r, e.attributes.color) : e.attributes.color instanceof T && j(r, e.attributes.color, 1 / 256);\n        }\n        N.push([z.COLOR, {\n          data: t.typedBuffer,\n          size: t.elementCount,\n          exclusive: !0\n        }]), I.push([z.COLOR, x]);\n      }\n\n      const L = new _(N, I);\n      d.stageResources.geometries.push(L), d.stageResources.materials.push(c.get(i)), l && (r(a.textureColor) && d.stageResources.textures.push(m.get(a.textureColor)), r(a.textureNormal) && d.stageResources.textures.push(m.get(a.textureNormal)), r(a.textureOcclusion) && d.stageResources.textures.push(m.get(a.textureOcclusion)), r(a.textureEmissive) && d.stageResources.textures.push(m.get(a.textureEmissive)), r(a.textureMetallicRoughness) && d.stageResources.textures.push(m.get(a.textureMetallicRoughness))), d.numberOfVertices += S;\n      const F = L.boundingInfo;\n      r(F) && (g(d.boundingBox, F.getBBMin()), g(d.boundingBox, F.getBBMax()));\n    });\n  }), l;\n}\n\nfunction Z(e) {\n  switch (e) {\n    case \"BLEND\":\n      return P.Blend;\n\n    case \"MASK\":\n      return P.Mask;\n\n    case \"OPAQUE\":\n    case null:\n    case void 0:\n      return P.Opaque;\n  }\n}\n\nfunction ee(e, t) {\n  switch (t) {\n    case W.TRIANGLES:\n      return L(e);\n\n    case W.TRIANGLE_STRIP:\n      return I(e);\n\n    case W.TRIANGLE_FAN:\n      return N(e);\n  }\n}\n\nfunction te(e, t) {\n  for (let r = 0; r < e.model.lods.length; ++r) {\n    const o = e.model.lods[r];\n    e.customMeta.esriTreeRendering = !0;\n\n    for (const i of o.parts) {\n      const o = i.attributes.normal;\n      if (s(o)) return;\n      const x = i.attributes.position,\n            g = x.count,\n            b = p(),\n            R = p(),\n            B = p(),\n            M = C(v, g),\n            T = C(h, g),\n            w = a(u(), i.transform);\n\n      for (let s = 0; s < g; s++) {\n        x.getVec(s, R), o.getVec(s, b), n(R, R, i.transform), l(B, R, t.center), c(B, B, t.radius);\n        const a = B[2],\n              u = m(B),\n              p = Math.min(.45 + .55 * u * u, 1);\n        c(B, B, t.radius), n(B, B, w), d(B, B), r + 1 !== e.model.lods.length && e.model.lods.length > 1 && f(B, B, b, a > -1 ? .2 : Math.min(-4 * a - 3.8, 1)), T.setVec(s, B), M.set(s, 0, 255 * p), M.set(s, 1, 255 * p), M.set(s, 2, 255 * p), M.set(s, 3, 255);\n      }\n\n      i.attributes.normal = T, i.attributes.color = M;\n    }\n  }\n}\n\nexport { J as fetch, Y as gltfToEngineResources, X as parseUrl };","map":{"version":3,"names":["adjustStaticAGOUrl","e","get","t","isSome","r","isNone","s","a","o","c","i","u","m","n","b","l","G","d","h","f","p","empty","x","expandWithVec3","g","BufferViewVec3f","BufferViewVec4f","BufferViewVec2f","R","BufferViewVec4u8","v","BufferViewVec4u16","B","BufferViewVec3u8","M","BufferViewVec3u16","T","w","y","j","O","E","createBuffer","C","DefaultLoadingContext","S","load","A","triangleFanToTriangles","N","triangleStripToTriangles","I","trianglesToTriangles","L","F","processLoadResult","k","AlphaDiscardMode","P","DepthTestFunction","V","CullFaceOptions","Geometry","_","Texture","D","VertexAttribute","z","DefaultMaterial","U","COLOR_GAMMA","q","PrimitiveType","W","$","K","Q","H","J","X","fileType","cache","loadWOSR","url","lods","referenceBoundingBox","boundingBox","isEsriSymbolResource","isWosr","remove","loadGLTF","usePBR","streamDataRequester","model","meta","uri","includes","te","isSchematic","treeRendering","customMeta","esriTreeRendering","mrrFactors","materialParamsMixin","specifiedLodIndex","Y","match","Number","Array","Map","forEach","name","stageResources","textures","materials","geometries","lodThreshold","pivotOffset","numberOfVertices","push","parts","material","attributes","normal","color","texCoord0","tangent","Z","alphaMode","has","textureColor","parameters","preMultiplyAlpha","Opaque","set","data","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","emissiveFactor","transparent","Blend","customDepthTest","Lequal","textureAlphaMode","textureAlphaCutoff","alphaCutoff","diffuse","ambient","opacity","doubleSided","doubleSidedType","cullFace","None","Back","hasVertexColors","hasVertexTangents","normals","castShadows","receiveSSAO","textureId","id","colorMixMode","normalTextureId","textureAlphaPremultiplied","params","occlusionTextureId","emissiveTextureId","metallicRoughnessTextureId","metallicFactor","roughnessFactor","ee","indices","position","count","primitiveType","transform","POSITION","typedBuffer","size","elementCount","exclusive","NORMAL","TANGENT","UV0","buffer","COLOR","boundingInfo","getBBMin","getBBMax","Mask","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","length","getVec","center","radius","Math","min","setVec","fetch","gltfToEngineResources","parseUrl"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{a as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a}from\"../../../../chunks/mat4.js\";import{c as u}from\"../../../../chunks/mat4f64.js\";import{m as n,b as l,G as c,l as m,n as d,h as f}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as x,expandWithVec3 as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as R,BufferViewVec4u8 as v,BufferViewVec4u16 as B,BufferViewVec3u8 as M,BufferViewVec3u16 as T}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as w,a as y,s as j}from\"../../../../chunks/vec32.js\";import{t as O,s as E}from\"../../../../chunks/vec42.js\";import{createBuffer as C}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as S}from\"../../glTF/DefaultLoadingContext.js\";import{load as A}from\"../../glTF/loader.js\";import{triangleFanToTriangles as N,triangleStripToTriangles as I,trianglesToTriangles as L}from\"../../glTF/internal/indexUtils.js\";import{load as F,processLoadResult as k}from\"./wosrLoader.js\";import{AlphaDiscardMode as P,DepthTestFunction as V,CullFaceOptions as G}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as _}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as D}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as z}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as U}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as q}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as W}from\"../../../webgl/enums.js\";import{n as $}from\"../../../../chunks/vec22.js\";import{c as K,f as Q}from\"../../../../chunks/vec43.js\";import{c as H}from\"../../../../chunks/vec33.js\";async function J(s,o){const i=X(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):F(i.url,o)),t=k(e,o);return{lods:[t],referenceBoundingBox:t.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:e.remove}}const a=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):A(new S(o.streamDataRequester),i.url,o,o.usePBR)),u=t(a.model.meta,\"ESRI_proxyEllipsoid\");a.meta.isEsriSymbolResource&&r(u)&&a.meta.uri.includes(\"/RealisticTrees/\")&&te(a,u);const n=a.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:!!a.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,treeRendering:!1,mrrFactors:[0,1,.5]},l={...o.materialParamsMixin,treeRendering:!!a.customMeta.esriTreeRendering};if(null!=i.specifiedLodIndex){const e=Y(a,n,l,i.specifiedLodIndex);let t=e[0].boundingBox;if(0!==i.specifiedLodIndex){t=Y(a,n,l,0)[0].boundingBox}return{lods:e,referenceBoundingBox:t,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}const c=Y(a,n,l);return{lods:c,referenceBoundingBox:c[0].boundingBox,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}function X(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function Y(e,t,s,a){const u=e.model,n=i(),l=new Array,c=new Map,m=new Map;return u.lods.forEach(((e,i)=>{if(void 0!==a&&i!==a)return;const d={name:e.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:r(e.lodThreshold)?e.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:x()};l.push(d),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=u.materials.get(e.material),l=r(e.attributes.texCoord0),f=r(e.attributes.normal),p=Z(a.alphaMode);if(!c.has(i)){if(l){if(r(a.textureColor)&&!m.has(a.textureColor)){const e=u.textures.get(a.textureColor),t={...e.parameters,preMultiplyAlpha:p!==P.Opaque};m.set(a.textureColor,new D(e.data,t))}if(r(a.textureNormal)&&!m.has(a.textureNormal)){const e=u.textures.get(a.textureNormal);m.set(a.textureNormal,new D(e.data,e.parameters))}if(r(a.textureOcclusion)&&!m.has(a.textureOcclusion)){const e=u.textures.get(a.textureOcclusion);m.set(a.textureOcclusion,new D(e.data,e.parameters))}if(r(a.textureEmissive)&&!m.has(a.textureEmissive)){const e=u.textures.get(a.textureEmissive);m.set(a.textureEmissive,new D(e.data,e.parameters))}if(r(a.textureMetallicRoughness)&&!m.has(a.textureMetallicRoughness)){const e=u.textures.get(a.textureMetallicRoughness);m.set(a.textureMetallicRoughness,new D(e.data,e.parameters))}}const o=a.color[0]**(1/q),n=a.color[1]**(1/q),d=a.color[2]**(1/q),x=a.emissiveFactor[0]**(1/q),g=a.emissiveFactor[1]**(1/q),h=a.emissiveFactor[2]**(1/q),b=r(a.textureColor)&&l?m.get(a.textureColor):null;c.set(i,new U({...t,transparent:p===P.Blend,customDepthTest:V.Lequal,textureAlphaMode:p,textureAlphaCutoff:a.alphaCutoff,diffuse:[o,n,d],ambient:[o,n,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?G.None:G.Back,hasVertexColors:!!e.attributes.color,hasVertexTangents:!!e.attributes.tangent,normals:f?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(b)?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&l?m.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:r(b)&&!!b.params.preMultiplyAlpha,occlusionTextureId:r(a.textureOcclusion)&&l?m.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&l?m.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&l?m.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[x,g,h],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,...s}))}const x=ee(e.indices||e.attributes.position.count,e.primitiveType),S=e.attributes.position.count,A=C(h,S);w(A,e.attributes.position,e.transform);const N=[[z.POSITION,{data:A.typedBuffer,size:A.elementCount,exclusive:!0}]],I=[[z.POSITION,x]];if(r(e.attributes.normal)){const t=C(h,S);o(n,e.transform),y(t,e.attributes.normal,n),N.push([z.NORMAL,{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([z.NORMAL,x])}if(r(e.attributes.tangent)){const t=C(b,S);o(n,e.transform),O(t,e.attributes.tangent,n),N.push([z.TANGENT,{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([z.TANGENT,x])}if(r(e.attributes.texCoord0)){const t=C(R,S);$(t,e.attributes.texCoord0),N.push([z.UV0,{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([z.UV0,x])}if(r(e.attributes.color)){const t=C(v,S);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?E(t,e.attributes.color,255):e.attributes.color instanceof v?K(t,e.attributes.color):e.attributes.color instanceof B&&E(t,e.attributes.color,1/256);else{Q(t,255,255,255,255);const r=new M(t.buffer,0,4);e.attributes.color instanceof h?j(r,e.attributes.color,255):e.attributes.color instanceof M?H(r,e.attributes.color):e.attributes.color instanceof T&&j(r,e.attributes.color,1/256)}N.push([z.COLOR,{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([z.COLOR,x])}const L=new _(N,I);d.stageResources.geometries.push(L),d.stageResources.materials.push(c.get(i)),l&&(r(a.textureColor)&&d.stageResources.textures.push(m.get(a.textureColor)),r(a.textureNormal)&&d.stageResources.textures.push(m.get(a.textureNormal)),r(a.textureOcclusion)&&d.stageResources.textures.push(m.get(a.textureOcclusion)),r(a.textureEmissive)&&d.stageResources.textures.push(m.get(a.textureEmissive)),r(a.textureMetallicRoughness)&&d.stageResources.textures.push(m.get(a.textureMetallicRoughness))),d.numberOfVertices+=S;const F=L.boundingInfo;r(F)&&(g(d.boundingBox,F.getBBMin()),g(d.boundingBox,F.getBBMax()))}))})),l}function Z(e){switch(e){case\"BLEND\":return P.Blend;case\"MASK\":return P.Mask;case\"OPAQUE\":case null:case void 0:return P.Opaque}}function ee(e,t){switch(t){case W.TRIANGLES:return L(e);case W.TRIANGLE_STRIP:return I(e);case W.TRIANGLE_FAN:return N(e)}}function te(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];e.customMeta.esriTreeRendering=!0;for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const x=i.attributes.position,g=x.count,b=p(),R=p(),B=p(),M=C(v,g),T=C(h,g),w=a(u(),i.transform);for(let s=0;s<g;s++){x.getVec(s,R),o.getVec(s,b),n(R,R,i.transform),l(B,R,t.center),c(B,B,t.radius);const a=B[2],u=m(B),p=Math.min(.45+.55*u*u,1);c(B,B,t.radius),n(B,B,w),d(B,B),r+1!==e.model.lods.length&&e.model.lods.length>1&&f(B,B,b,a>-1?.2:Math.min(-4*a-3.8,1)),T.setVec(s,B),M.set(s,0,255*p),M.set(s,1,255*p),M.set(s,2,255*p),M.set(s,3,255)}i.attributes.normal=T,i.attributes.color=M}}}export{J as fetch,Y as gltfToEngineResources,X as parseUrl};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}