{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { remove as t } from \"../../../../core/arrayUtils.js\";\nimport { isSome as i } from \"../../../../core/maybe.js\";\nimport { getObjectId as e } from \"../../../../layers/graphics/dehydratedFeatures.js\";\n\nclass s {\n  constructor(t) {\n    this.graphicsCore = t, this.idToState = new Map(), this.states = new Set();\n    const i = t.owner.layer && t.owner.layer.objectIdField;\n    i ? (this.getGraphicId = t => e(t, i), this.getGraphics3DGraphicById = t => this.graphicsCore.getGraphics3DGraphicByObjectId(t)) : (this.getGraphicId = t => t.uid, this.getGraphics3DGraphicById = t => this.graphicsCore.getGraphics3DGraphicById(t));\n  }\n\n  destroy() {\n    this.idToState.clear(), this.states.forEach((t, i) => this.remove(i));\n  }\n\n  add(t) {\n    const e = {\n      remove: () => this.remove(t)\n    };\n    if (this.states.has(t)) return e;\n    const s = this.getGraphicId(t.graphic),\n          a = this.getGraphics3DGraphicById(s);\n    this.states.has(t) || this.states.add(t);\n    return this._ensureStateList(s).push(t), t.displaying = !!i(a) && a.isVisible(), t.isDraped = !!i(a) && a.isDraped, t.tracking = !0, i(a) && t.emit(\"changed\", {}), e;\n  }\n\n  remove(i) {\n    if (this.states.has(i)) {\n      if (this.idToState.size) {\n        const e = this.getGraphicId(i.graphic),\n              s = this.idToState.get(e);\n        s && (t(s, i), 0 === s.length && this.idToState.delete(e));\n      }\n\n      this.states.delete(i), i.tracking = !1, i.displaying = !1;\n    }\n  }\n\n  addGraphic(t) {\n    this._forEachState(t, i => {\n      i.displaying = t.isVisible(), i.isDraped = t.isDraped, i.emit(\"changed\", {});\n    });\n  }\n\n  removeGraphic(t) {\n    this._forEachState(t, t => {\n      t.displaying = !1, t.isDraped = !1;\n    });\n  }\n\n  updateGraphicGeometry(t) {\n    this._forEachState(t, t => {\n      t.emit(\"changed\", {});\n    });\n  }\n\n  updateGraphicVisibility(t) {\n    this._forEachState(t, i => {\n      i.displaying = t.isVisible();\n    });\n  }\n\n  allGraphicsDeleted() {\n    this.states.forEach(t => {\n      t.displaying = !1;\n    });\n  }\n\n  _ensureStateList(t) {\n    const i = this.idToState.get(t);\n    if (i) return i;\n    const e = new Array();\n    return this.idToState.set(t, e), e;\n  }\n\n  _forEachState(t, i) {\n    if (0 === this.states.size || 0 === this.idToState.size) return;\n    const e = this.getGraphicId(t.graphic),\n          s = this.idToState.get(e);\n    null != s && s.forEach(i);\n  }\n\n}\n\nexport { s as GraphicStateTracking };","map":{"version":3,"names":["remove","t","isSome","i","getObjectId","e","s","constructor","graphicsCore","idToState","Map","states","Set","owner","layer","objectIdField","getGraphicId","getGraphics3DGraphicById","getGraphics3DGraphicByObjectId","uid","destroy","clear","forEach","add","has","graphic","a","_ensureStateList","push","displaying","isVisible","isDraped","tracking","emit","size","get","length","delete","addGraphic","_forEachState","removeGraphic","updateGraphicGeometry","updateGraphicVisibility","allGraphicsDeleted","Array","set","GraphicStateTracking"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{remove as t}from\"../../../../core/arrayUtils.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{getObjectId as e}from\"../../../../layers/graphics/dehydratedFeatures.js\";class s{constructor(t){this.graphicsCore=t,this.idToState=new Map,this.states=new Set;const i=t.owner.layer&&t.owner.layer.objectIdField;i?(this.getGraphicId=t=>e(t,i),this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicByObjectId(t)):(this.getGraphicId=t=>t.uid,this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicById(t))}destroy(){this.idToState.clear(),this.states.forEach(((t,i)=>this.remove(i)))}add(t){const e={remove:()=>this.remove(t)};if(this.states.has(t))return e;const s=this.getGraphicId(t.graphic),a=this.getGraphics3DGraphicById(s);this.states.has(t)||this.states.add(t);return this._ensureStateList(s).push(t),t.displaying=!!i(a)&&a.isVisible(),t.isDraped=!!i(a)&&a.isDraped,t.tracking=!0,i(a)&&t.emit(\"changed\",{}),e}remove(i){if(this.states.has(i)){if(this.idToState.size){const e=this.getGraphicId(i.graphic),s=this.idToState.get(e);s&&(t(s,i),0===s.length&&this.idToState.delete(e))}this.states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this._forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit(\"changed\",{})}))}removeGraphic(t){this._forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this._forEachState(t,(t=>{t.emit(\"changed\",{})}))}updateGraphicVisibility(t){this._forEachState(t,(i=>{i.displaying=t.isVisible()}))}allGraphicsDeleted(){this.states.forEach((t=>{t.displaying=!1}))}_ensureStateList(t){const i=this.idToState.get(t);if(i)return i;const e=new Array;return this.idToState.set(t,e),e}_forEachState(t,i){if(0===this.states.size||0===this.idToState.size)return;const e=this.getGraphicId(t.graphic),s=this.idToState.get(e);null!=s&&s.forEach(i)}}export{s as GraphicStateTracking};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}