{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e, unwrapOr as t } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as o, WGLSymbologyType as r } from \"../enums.js\";\nimport { createProgramDescriptor as a } from \"../Utils.js\";\nimport i from \"./WGLGeometryBrush.js\";\nimport { FillMaterialKey as n } from \"../materialKey/MaterialKey.js\";\nimport { getTechniqueFromMaterialKey as s } from \"../techniques/utils.js\";\nimport { PrimitiveType as m, DataType as l } from \"../../../../webgl/enums.js\";\n\nfunction u(e) {\n  const t = {\n    geometry: [{\n      location: 0,\n      name: \"a_pos\",\n      count: 2,\n      type: l.SHORT\n    }, {\n      location: 1,\n      name: \"a_id\",\n      count: 3,\n      type: l.UNSIGNED_BYTE\n    }, {\n      location: 2,\n      name: \"a_bitset\",\n      count: 1,\n      type: l.UNSIGNED_BYTE\n    }, {\n      location: 3,\n      name: \"a_color\",\n      count: 4,\n      type: l.UNSIGNED_BYTE,\n      normalized: !0\n    }, {\n      location: 4,\n      name: \"a_aux1\",\n      count: 4,\n      type: l.UNSIGNED_SHORT\n    }, {\n      location: 5,\n      name: \"a_aux2\",\n      count: 4,\n      type: l.SHORT\n    }, {\n      location: 6,\n      name: \"a_aux3\",\n      count: 4,\n      type: l.UNSIGNED_BYTE\n    }, {\n      location: 7,\n      name: \"a_zoomRange\",\n      count: 2,\n      type: l.UNSIGNED_SHORT\n    }]\n  };\n\n  switch (e.symbologyType) {\n    case r.SIMPLE:\n    case r.OUTLINE_FILL_SIMPLE:\n      t.geometry.splice(7, 1), t.geometry.splice(4, 1);\n  }\n\n  return {\n    shader: \"materials/fill\",\n    vertexLayout: t\n  };\n}\n\nclass c extends i {\n  dispose() {}\n\n  getGeometryType() {\n    return o.FILL;\n  }\n\n  supportsSymbology(e) {\n    return e !== r.DOT_DENSITY;\n  }\n\n  drawGeometry(o, r, i, l) {\n    const {\n      context: c,\n      painter: y,\n      rendererInfo: p,\n      requiredLevel: _,\n      passOptions: d,\n      requestRender: f,\n      allowDelayedRender: E\n    } = o,\n          S = n.load(i.materialKey),\n          g = s(S.data),\n          N = e(d) && \"hittest\" === d.type,\n          T = y.materialManager,\n          {\n      shader: I,\n      vertexLayout: U,\n      hittestAttributes: x\n    } = t(g.programSpec, u(S));\n    let L = m.TRIANGLES,\n        h = a(S.data, U);\n    N && (h = this._getTriangleDesc(i.materialKey, h, x), L = m.POINTS);\n    const {\n      attributes: G,\n      bufferLayouts: O\n    } = h,\n          b = T.getMaterialProgram(o, S, I, G, l);\n    if (E && e(f) && !b.isCompiled) return void f();\n\n    if (c.useProgram(b), this._setSharedUniforms(b, o, r), b.setUniform2f(\"u_tileOffset\", 512 * r.key.col, 512 * r.key.row), S.textureBinding) {\n      y.textureManager.bindTextures(c, b, S);\n      const e = 1 / 2 ** (_ - r.key.level);\n      b.setUniform1f(\"u_zoomFactor\", e);\n    }\n\n    const D = 1 / o.pixelRatio;\n    b.setUniform1f(\"u_blur\", D), b.setUniform1f(\"u_antialiasing\", D), this._setSizeVVUniforms(S, b, p, r), this._setColorAndOpacityVVUniforms(S, b, p);\n    const R = i.target.getVAO(c, O, G, N);\n    let w = i.indexCount,\n        j = i.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    N && (w /= 3, j /= 3), c.bindVAO(R), this._drawFills(o, r, b, L, w, j);\n  }\n\n  _drawFills(e, t, o, r, a, i) {\n    e.context.drawElements(r, a, l.UNSIGNED_INT, i);\n  }\n\n}\n\nexport { c as default };","map":{"version":3,"names":["isSome","e","unwrapOr","t","WGLGeometryType","o","WGLSymbologyType","r","createProgramDescriptor","a","i","FillMaterialKey","n","getTechniqueFromMaterialKey","s","PrimitiveType","m","DataType","l","u","geometry","location","name","count","type","SHORT","UNSIGNED_BYTE","normalized","UNSIGNED_SHORT","symbologyType","SIMPLE","OUTLINE_FILL_SIMPLE","splice","shader","vertexLayout","c","dispose","getGeometryType","FILL","supportsSymbology","DOT_DENSITY","drawGeometry","context","painter","y","rendererInfo","p","requiredLevel","_","passOptions","d","requestRender","f","allowDelayedRender","E","S","load","materialKey","g","data","N","T","materialManager","I","U","hittestAttributes","x","programSpec","L","TRIANGLES","h","_getTriangleDesc","POINTS","attributes","G","bufferLayouts","O","b","getMaterialProgram","isCompiled","useProgram","_setSharedUniforms","setUniform2f","key","col","row","textureBinding","textureManager","bindTextures","level","setUniform1f","D","pixelRatio","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","R","target","getVAO","w","indexCount","j","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","_drawFills","drawElements","UNSIGNED_INT","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushFill.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,unwrapOr as t}from\"../../../../../core/maybe.js\";import{WGLGeometryType as o,WGLSymbologyType as r}from\"../enums.js\";import{createProgramDescriptor as a}from\"../Utils.js\";import i from\"./WGLGeometryBrush.js\";import{FillMaterialKey as n}from\"../materialKey/MaterialKey.js\";import{getTechniqueFromMaterialKey as s}from\"../techniques/utils.js\";import{PrimitiveType as m,DataType as l}from\"../../../../webgl/enums.js\";function u(e){const t={geometry:[{location:0,name:\"a_pos\",count:2,type:l.SHORT},{location:1,name:\"a_id\",count:3,type:l.UNSIGNED_BYTE},{location:2,name:\"a_bitset\",count:1,type:l.UNSIGNED_BYTE},{location:3,name:\"a_color\",count:4,type:l.UNSIGNED_BYTE,normalized:!0},{location:4,name:\"a_aux1\",count:4,type:l.UNSIGNED_SHORT},{location:5,name:\"a_aux2\",count:4,type:l.SHORT},{location:6,name:\"a_aux3\",count:4,type:l.UNSIGNED_BYTE},{location:7,name:\"a_zoomRange\",count:2,type:l.UNSIGNED_SHORT}]};switch(e.symbologyType){case r.SIMPLE:case r.OUTLINE_FILL_SIMPLE:t.geometry.splice(7,1),t.geometry.splice(4,1)}return{shader:\"materials/fill\",vertexLayout:t}}class c extends i{dispose(){}getGeometryType(){return o.FILL}supportsSymbology(e){return e!==r.DOT_DENSITY}drawGeometry(o,r,i,l){const{context:c,painter:y,rendererInfo:p,requiredLevel:_,passOptions:d,requestRender:f,allowDelayedRender:E}=o,S=n.load(i.materialKey),g=s(S.data),N=e(d)&&\"hittest\"===d.type,T=y.materialManager,{shader:I,vertexLayout:U,hittestAttributes:x}=t(g.programSpec,u(S));let L=m.TRIANGLES,h=a(S.data,U);N&&(h=this._getTriangleDesc(i.materialKey,h,x),L=m.POINTS);const{attributes:G,bufferLayouts:O}=h,b=T.getMaterialProgram(o,S,I,G,l);if(E&&e(f)&&!b.isCompiled)return void f();if(c.useProgram(b),this._setSharedUniforms(b,o,r),b.setUniform2f(\"u_tileOffset\",512*r.key.col,512*r.key.row),S.textureBinding){y.textureManager.bindTextures(c,b,S);const e=1/2**(_-r.key.level);b.setUniform1f(\"u_zoomFactor\",e)}const D=1/o.pixelRatio;b.setUniform1f(\"u_blur\",D),b.setUniform1f(\"u_antialiasing\",D),this._setSizeVVUniforms(S,b,p,r),this._setColorAndOpacityVVUniforms(S,b,p);const R=i.target.getVAO(c,O,G,N);let w=i.indexCount,j=i.indexFrom*Uint32Array.BYTES_PER_ELEMENT;N&&(w/=3,j/=3),c.bindVAO(R),this._drawFills(o,r,b,L,w,j)}_drawFills(e,t,o,r,a,i){e.context.drawElements(r,a,l.UNSIGNED_INT,i)}}export{c as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}