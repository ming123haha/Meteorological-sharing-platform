{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport n from \"../../geometry/Extent.js\";\nimport i from \"../../geometry/Point.js\";\nimport { getReferenceEllipsoidFromWKID as r } from \"../../geometry/projectionEllipsoid.js\";\nimport o from \"../../geometry/support/WKIDUnitConversion.js\";\nimport { isAxesOrderReversedForWkid as l } from \"../ogc/crsUtils.js\";\nimport { visitXML as s } from \"../ogc/xmlUtils.js\";\nimport a from \"./TileInfo.js\";\nconst c = 90.71428571428571;\n\nfunction u(t) {\n  const n = t.replace(/ows:/gi, \"\");\n  if (!m(\"Contents\", new DOMParser().parseFromString(n, \"text/xml\").documentElement)) throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\", \"the wmts get capabilities response is not compliant\", {\n    text: t\n  });\n}\n\nfunction p(t, n) {\n  t = t.replace(/ows:/gi, \"\");\n  const i = new DOMParser().parseFromString(t, \"text/xml\").documentElement,\n        r = new Map(),\n        o = new Map(),\n        l = m(\"Contents\", i);\n  if (!l) throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");\n  const s = m(\"OperationsMetadata\", i)?.querySelector(\"[name='GetTile']\"),\n        a = s?.getElementsByTagName(\"Get\"),\n        c = a && Array.prototype.slice.call(a),\n        u = n.url?.indexOf(\"https\"),\n        p = void 0 !== u && u > -1;\n  let f,\n      d,\n      x = n.serviceMode,\n      M = n?.url;\n  if (c && c.length && c.some(e => {\n    const t = m(\"Constraint\", e);\n    return !t || w(\"AllowedValues\", \"Value\", x, t) ? (M = e.attributes[0].nodeValue, !0) : (!t || w(\"AllowedValues\", \"Value\", \"RESTful\", t) || w(\"AllowedValues\", \"Value\", \"REST\", t) ? d = e.attributes[0].nodeValue : t && !w(\"AllowedValues\", \"Value\", \"KVP\", t) || (f = e.attributes[0].nodeValue), !1);\n  }), !M) if (d) M = d, x = \"RESTful\";else if (f) M = f, x = \"KVP\";else {\n    const e = m(\"ServiceMetadataURL\", i);\n    M = e?.getAttribute(\"xlink:href\");\n  }\n  const T = M.indexOf(\"1.0.0/\");\n  -1 === T && \"RESTful\" === x ? M += \"/\" : T > -1 && (M = M.substring(0, T)), \"KVP\" === x && (M += T > -1 ? \"\" : \"?\"), p && (M = M.replace(/^http:/i, \"https:\"));\n  const y = h(\"ServiceIdentification>ServiceTypeVersion\", i),\n        R = h(\"ServiceIdentification>AccessConstraints\", i),\n        S = R && /^none$/i.test(R) ? null : R,\n        V = g(\"Layer\", l),\n        b = g(\"TileMatrixSet\", l),\n        E = V.map(e => {\n    const t = h(\"Identifier\", e);\n    return r.set(t, e), C(t, e, b, p, y);\n  });\n  return {\n    copyright: S,\n    dimensionMap: o,\n    layerMap: r,\n    layers: E,\n    serviceMode: x,\n    tileUrl: M\n  };\n}\n\nfunction f(e) {\n  return e.layers.forEach(e => {\n    e.tileMatrixSets?.forEach(e => {\n      const t = e.tileInfo;\n      t && 96 !== t.dpi && (t.lods?.forEach(n => {\n        n.scale = 96 * n.scale / t.dpi, n.resolution = U(t.spatialReference?.wkid, n.scale * c / 96, e.id);\n      }), t.dpi = 96);\n    });\n  }), e;\n}\n\nfunction d(e) {\n  return e.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction m(e, t) {\n  for (let n = 0; n < t.childNodes.length; n++) {\n    const i = t.childNodes[n];\n    if (d(i) && i.nodeName === e) return i;\n  }\n\n  return null;\n}\n\nfunction g(e, t) {\n  const n = [];\n\n  for (let i = 0; i < t.childNodes.length; i++) {\n    const r = t.childNodes[i];\n    d(r) && r.nodeName === e && n.push(r);\n  }\n\n  return n;\n}\n\nfunction x(e, n) {\n  const i = [];\n\n  for (let t = 0; t < n.childNodes.length; t++) {\n    const r = n.childNodes[t];\n    d(r) && r.nodeName === e && i.push(r);\n  }\n\n  return i.map(e => e.textContent).filter(t);\n}\n\nfunction h(e, t) {\n  return e.split(\">\").forEach(e => {\n    t && (t = m(e, t));\n  }), t && t.textContent;\n}\n\nfunction w(e, t, n, i) {\n  let r;\n  return Array.prototype.slice.call(i.childNodes).some(i => {\n    if (i.nodeName.includes(e)) {\n      const e = m(t, i),\n            o = e && e.textContent;\n      if (o === n || n.split(\":\") && n.split(\":\")[1] === o) return r = i, !0;\n    }\n\n    return !1;\n  }), r;\n}\n\nfunction C(e, t, n, i, r) {\n  const o = h(\"Abstract\", t),\n        l = x(\"Format\", t);\n  return {\n    id: e,\n    fullExtent: S(t),\n    fullExtents: V(t),\n    description: o,\n    formats: l,\n    styles: b(t, i),\n    title: h(\"Title\", t),\n    tileMatrixSets: E(r, t, n)\n  };\n}\n\nfunction M(e, t) {\n  const n = [],\n        i = e.layerMap?.get(t);\n  if (!i) return null;\n  const r = g(\"ResourceURL\", i),\n        o = g(\"Dimension\", i);\n  let l, s, a, c;\n  return o.length && (l = h(\"Identifier\", o[0]), s = x(\"Default\", o[0]) || x(\"Value\", o[0])), o.length > 1 && (a = h(\"Identifier\", o[1]), c = x(\"Default\", o[1]) || x(\"Value\", o[1])), e.dimensionMap.set(t, {\n    dimensions: s,\n    dimensions2: c\n  }), r.forEach(e => {\n    let t = e.getAttribute(\"template\");\n\n    if (\"tile\" === e.getAttribute(\"resourceType\")) {\n      if (l && s.length) if (t.includes(\"{\" + l + \"}\")) t = t.replace(\"{\" + l + \"}\", \"{dimensionValue}\");else {\n        const e = t.toLowerCase().indexOf(\"{\" + l.toLowerCase() + \"}\");\n        e > -1 && (t = t.substring(0, e) + \"{dimensionValue}\" + t.substring(e + l.length + 2));\n      }\n      if (a && c.length) if (t.includes(\"{\" + a + \"}\")) t = t.replace(\"{\" + a + \"}\", \"{dimensionValue2}\");else {\n        const e = t.toLowerCase().indexOf(\"{\" + a.toLowerCase() + \"}\");\n        e > -1 && (t = t.substring(0, e) + \"{dimensionValue2}\" + t.substring(e + a.length + 2));\n      }\n      n.push({\n        template: t,\n        format: e.getAttribute(\"format\"),\n        resourceType: \"tile\"\n      });\n    }\n  }), n;\n}\n\nfunction T(e, t, n, i, r, o, l, s) {\n  const a = y(e, t, i);\n  if (!(a?.length > 0)) return \"\";\n  const {\n    dimensionMap: c\n  } = e,\n        u = c.get(t).dimensions?.[0],\n        p = c.get(t).dimensions2?.[0];\n  return a[l % a.length].template.replace(/\\{Style\\}/gi, r ?? \"\").replace(/\\{TileMatrixSet\\}/gi, n ?? \"\").replace(/\\{TileMatrix\\}/gi, o).replace(/\\{TileRow\\}/gi, \"\" + l).replace(/\\{TileCol\\}/gi, \"\" + s).replace(/\\{dimensionValue\\}/gi, u).replace(/\\{dimensionValue2\\}/gi, p);\n}\n\nfunction y(e, t, n) {\n  const i = M(e, t),\n        r = i?.filter(e => e.format === n);\n  return (r?.length ? r : i) ?? [];\n}\n\nfunction R(e, t, n, i) {\n  const {\n    dimensionMap: r\n  } = e,\n        o = M(e, t);\n  let l = \"\";\n\n  if (o && o.length > 0) {\n    const e = r.get(t).dimensions && r.get(t).dimensions[0],\n          s = r.get(t).dimensions2 && r.get(t).dimensions2[0];\n    l = o[0].template, l.indexOf(\".xxx\") === l.length - 4 && (l = l.slice(0, l.length - 4)), l = l.replace(/\\{Style\\}/gi, i), l = l.replace(/\\{TileMatrixSet\\}/gi, n), l = l.replace(/\\{TileMatrix\\}/gi, \"{level}\"), l = l.replace(/\\{TileRow\\}/gi, \"{row}\"), l = l.replace(/\\{TileCol\\}/gi, \"{col}\"), l = l.replace(/\\{dimensionValue\\}/gi, e), l = l.replace(/\\{dimensionValue2\\}/gi, s);\n  }\n\n  return l;\n}\n\nfunction S(e) {\n  const t = m(\"WGS84BoundingBox\", e),\n        n = t ? h(\"LowerCorner\", t).split(\" \") : [\"-180\", \"-90\"],\n        i = t ? h(\"UpperCorner\", t).split(\" \") : [\"180\", \"90\"];\n  return {\n    xmin: parseFloat(n[0]),\n    ymin: parseFloat(n[1]),\n    xmax: parseFloat(i[0]),\n    ymax: parseFloat(i[1]),\n    spatialReference: {\n      wkid: 4326\n    }\n  };\n}\n\nfunction V(e) {\n  const t = [];\n  return s(e, {\n    BoundingBox: e => {\n      if (!e.getAttribute(\"crs\")) return;\n      const n = e.getAttribute(\"crs\").toLowerCase(),\n            i = I(n),\n            r = n.includes(\"epsg\") && l(i.wkid);\n      let o, a, c, u;\n      s(e, {\n        LowerCorner: e => {\n          [o, a] = e.textContent.split(\" \").map(e => Number.parseFloat(e)), r && ([o, a] = [a, o]);\n        },\n        UpperCorner: e => {\n          [c, u] = e.textContent.split(\" \").map(e => Number.parseFloat(e)), r && ([c, u] = [u, c]);\n        }\n      }), t.push({\n        xmin: o,\n        ymin: a,\n        xmax: c,\n        ymax: u,\n        spatialReference: i\n      });\n    }\n  }), t;\n}\n\nfunction b(e, t) {\n  return g(\"Style\", e).map(e => {\n    const n = m(\"LegendURL\", e),\n          i = m(\"Keywords\", e),\n          r = i ? x(\"Keyword\", i) : [];\n    let o = n && n.getAttribute(\"xlink:href\");\n    t && (o = o && o.replace(/^http:/i, \"https:\"));\n    return {\n      abstract: h(\"Abstract\", e),\n      id: h(\"Identifier\", e),\n      isDefault: \"true\" === e.getAttribute(\"isDefault\"),\n      keywords: r,\n      legendUrl: o,\n      title: h(\"Title\", e)\n    };\n  });\n}\n\nfunction E(e, t, n) {\n  return g(\"TileMatrixSetLink\", t).map(t => L(e, t, n));\n}\n\nfunction L(e, t, n) {\n  const i = m(\"TileMatrixSet\", t).textContent,\n        r = x(\"TileMatrix\", t),\n        o = n.find(e => {\n    const t = m(\"Identifier\", e),\n          n = t && t.textContent;\n    return !!(n === i || i.split(\":\") && i.split(\":\")[1] === n);\n  }),\n        l = m(\"TileMatrixSetLimits\", t),\n        s = l && g(\"TileMatrixLimits\", l),\n        c = new Map();\n  if (s?.length) for (const a of s) {\n    const e = m(\"TileMatrix\", a).textContent,\n          t = +m(\"MinTileRow\", a).textContent,\n          n = +m(\"MaxTileRow\", a).textContent,\n          i = +m(\"MinTileCol\", a).textContent,\n          r = +m(\"MaxTileCol\", a).textContent;\n    c.set(e, {\n      minCol: i,\n      maxCol: r,\n      minRow: t,\n      maxRow: n\n    });\n  }\n  const u = h(\"SupportedCRS\", o).toLowerCase(),\n        p = N(o, u),\n        f = p.spatialReference,\n        d = m(\"TileMatrix\", o),\n        C = [parseInt(h(\"TileWidth\", d), 10), parseInt(h(\"TileHeight\", d), 10)],\n        M = [];\n  if (r.length) r.forEach((e, t) => {\n    const n = w(\"TileMatrix\", \"Identifier\", e, o);\n    M.push(D(n, u, t, i, c));\n  });else {\n    g(\"TileMatrix\", o).forEach((e, t) => {\n      M.push(D(e, u, t, i, c));\n    });\n  }\n  const T = v(e, o, p, C, M[0]).toJSON(),\n        y = new a({\n    dpi: 96,\n    spatialReference: f,\n    size: C,\n    origin: p,\n    lods: M\n  }).toJSON();\n  return {\n    id: i,\n    fullExtent: T,\n    tileInfo: y\n  };\n}\n\nfunction I(e) {\n  e = e.toLowerCase();\n  let n = parseInt(e.split(\":\").pop(), 10);\n  900913 !== n && 3857 !== n || (n = 102100);\n  const i = k(e);\n  return t(i) && (n = i), {\n    wkid: n\n  };\n}\n\nfunction N(e, t) {\n  return A(m(\"TileMatrix\", e), t);\n}\n\nfunction A(e, t) {\n  const n = I(t),\n        [r, o] = h(\"TopLeftCorner\", e).split(\" \").map(e => parseFloat(e)),\n        s = t.includes(\"epsg\") && l(n.wkid);\n  return new i(s ? {\n    x: o,\n    y: r,\n    spatialReference: n\n  } : {\n    x: r,\n    y: o,\n    spatialReference: n\n  });\n}\n\nfunction v(e, t, i, r, o) {\n  const l = m(\"BoundingBox\", t);\n  let s, a, c, u, p, f;\n  if (l && (s = h(\"LowerCorner\", l).split(\" \"), a = h(\"UpperCorner\", l).split(\" \")), s && s.length > 1 && a && a.length > 1) c = parseFloat(s[0]), p = parseFloat(s[1]), u = parseFloat(a[0]), f = parseFloat(a[1]);else {\n    const e = m(\"TileMatrix\", t),\n          n = parseInt(h(\"MatrixWidth\", e), 10),\n          l = parseInt(h(\"MatrixHeight\", e), 10);\n    c = i.x, f = i.y, u = c + n * r[0] * o.resolution, p = f - l * r[1] * o.resolution;\n  }\n  return F(e, i.spatialReference, i) ? new n(p, c, f, u, i.spatialReference) : new n(c, p, u, f, i.spatialReference);\n}\n\nfunction F(e, t, n) {\n  return \"1.0.0\" === e && l(t.wkid) && !(n.spatialReference.isGeographic && n.x < -90 && n.y >= -90);\n}\n\nvar O;\n\nfunction k(e) {\n  return e.includes(\"crs84\") || e.includes(\"crs:84\") ? O.CRS84 : e.includes(\"crs83\") || e.includes(\"crs:83\") ? O.CRS83 : e.includes(\"crs27\") || e.includes(\"crs:27\") ? O.CRS27 : null;\n}\n\nfunction D(e, t, n, i, r) {\n  const o = I(t),\n        l = h(\"Identifier\", e);\n  let s = parseFloat(h(\"ScaleDenominator\", e));\n  const a = U(o.wkid, s, i);\n  s *= 96 / c;\n  const u = +h(\"MatrixWidth\", e),\n        p = +h(\"MatrixHeight\", e),\n        {\n    maxCol: f = u - 1,\n    maxRow: d = p - 1,\n    minCol: m = 0,\n    minRow: g = 0\n  } = r.get(l) ?? {},\n        {\n    x,\n    y: w\n  } = A(e, t);\n  return {\n    cols: [m, f],\n    level: n,\n    levelValue: l,\n    origin: [x, w],\n    scale: s,\n    resolution: a,\n    rows: [g, d]\n  };\n}\n\nfunction U(e, t, n) {\n  let i;\n  return i = o.hasOwnProperty(\"\" + e) ? o.values[o[e]] : \"default028mm\" === n ? 6370997 * Math.PI / 180 : r(e).metersPerDegree, 7 * t / 25e3 / i;\n}\n\n!function (e) {\n  e[e.CRS84 = 4326] = \"CRS84\", e[e.CRS83 = 4269] = \"CRS83\", e[e.CRS27 = 4267] = \"CRS27\";\n}(O || (O = {}));\nexport { T as getTileUrlFromResourceUrls, R as getTileUrlTemplateFromResourceUrls, y as getTileUrlTemplates, p as parseCapabilities, f as parseResourceInfo, u as validateCapabilities };","map":{"version":3,"names":["e","isSome","t","n","i","getReferenceEllipsoidFromWKID","r","o","isAxesOrderReversedForWkid","l","visitXML","s","a","c","u","replace","m","DOMParser","parseFromString","documentElement","text","p","Map","querySelector","getElementsByTagName","Array","prototype","slice","call","url","indexOf","f","d","x","serviceMode","M","length","some","w","attributes","nodeValue","getAttribute","T","substring","y","h","R","S","test","V","g","b","E","map","set","C","copyright","dimensionMap","layerMap","layers","tileUrl","forEach","tileMatrixSets","tileInfo","dpi","lods","scale","resolution","U","spatialReference","wkid","id","nodeType","Node","ELEMENT_NODE","childNodes","nodeName","push","textContent","filter","split","includes","fullExtent","fullExtents","description","formats","styles","title","get","dimensions","dimensions2","toLowerCase","template","format","resourceType","xmin","parseFloat","ymin","xmax","ymax","BoundingBox","I","LowerCorner","Number","UpperCorner","abstract","isDefault","keywords","legendUrl","L","find","minCol","maxCol","minRow","maxRow","N","parseInt","D","v","toJSON","size","origin","pop","k","A","F","isGeographic","O","CRS84","CRS83","CRS27","cols","level","levelValue","rows","hasOwnProperty","values","Math","PI","metersPerDegree","getTileUrlFromResourceUrls","getTileUrlTemplateFromResourceUrls","getTileUrlTemplates","parseCapabilities","parseResourceInfo","validateCapabilities"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/wmtsUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import n from\"../../geometry/Extent.js\";import i from\"../../geometry/Point.js\";import{getReferenceEllipsoidFromWKID as r}from\"../../geometry/projectionEllipsoid.js\";import o from\"../../geometry/support/WKIDUnitConversion.js\";import{isAxesOrderReversedForWkid as l}from\"../ogc/crsUtils.js\";import{visitXML as s}from\"../ogc/xmlUtils.js\";import a from\"./TileInfo.js\";const c=90.71428571428571;function u(t){const n=t.replace(/ows:/gi,\"\");if(!m(\"Contents\",(new DOMParser).parseFromString(n,\"text/xml\").documentElement))throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\",\"the wmts get capabilities response is not compliant\",{text:t})}function p(t,n){t=t.replace(/ows:/gi,\"\");const i=(new DOMParser).parseFromString(t,\"text/xml\").documentElement,r=new Map,o=new Map,l=m(\"Contents\",i);if(!l)throw new e(\"wmtslayer:wmts-capabilities-xml-is-not-valid\");const s=m(\"OperationsMetadata\",i)?.querySelector(\"[name='GetTile']\"),a=s?.getElementsByTagName(\"Get\"),c=a&&Array.prototype.slice.call(a),u=n.url?.indexOf(\"https\"),p=void 0!==u&&u>-1;let f,d,x=n.serviceMode,M=n?.url;if(c&&c.length&&c.some((e=>{const t=m(\"Constraint\",e);return!t||w(\"AllowedValues\",\"Value\",x,t)?(M=e.attributes[0].nodeValue,!0):(!t||w(\"AllowedValues\",\"Value\",\"RESTful\",t)||w(\"AllowedValues\",\"Value\",\"REST\",t)?d=e.attributes[0].nodeValue:t&&!w(\"AllowedValues\",\"Value\",\"KVP\",t)||(f=e.attributes[0].nodeValue),!1)})),!M)if(d)M=d,x=\"RESTful\";else if(f)M=f,x=\"KVP\";else{const e=m(\"ServiceMetadataURL\",i);M=e?.getAttribute(\"xlink:href\")}const T=M.indexOf(\"1.0.0/\");-1===T&&\"RESTful\"===x?M+=\"/\":T>-1&&(M=M.substring(0,T)),\"KVP\"===x&&(M+=T>-1?\"\":\"?\"),p&&(M=M.replace(/^http:/i,\"https:\"));const y=h(\"ServiceIdentification>ServiceTypeVersion\",i),R=h(\"ServiceIdentification>AccessConstraints\",i),S=R&&/^none$/i.test(R)?null:R,V=g(\"Layer\",l),b=g(\"TileMatrixSet\",l),E=V.map((e=>{const t=h(\"Identifier\",e);return r.set(t,e),C(t,e,b,p,y)}));return{copyright:S,dimensionMap:o,layerMap:r,layers:E,serviceMode:x,tileUrl:M}}function f(e){return e.layers.forEach((e=>{e.tileMatrixSets?.forEach((e=>{const t=e.tileInfo;t&&96!==t.dpi&&(t.lods?.forEach((n=>{n.scale=96*n.scale/t.dpi,n.resolution=U(t.spatialReference?.wkid,n.scale*c/96,e.id)})),t.dpi=96)}))})),e}function d(e){return e.nodeType===Node.ELEMENT_NODE}function m(e,t){for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];if(d(i)&&i.nodeName===e)return i}return null}function g(e,t){const n=[];for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];d(r)&&r.nodeName===e&&n.push(r)}return n}function x(e,n){const i=[];for(let t=0;t<n.childNodes.length;t++){const r=n.childNodes[t];d(r)&&r.nodeName===e&&i.push(r)}return i.map((e=>e.textContent)).filter(t)}function h(e,t){return e.split(\">\").forEach((e=>{t&&(t=m(e,t))})),t&&t.textContent}function w(e,t,n,i){let r;return Array.prototype.slice.call(i.childNodes).some((i=>{if(i.nodeName.includes(e)){const e=m(t,i),o=e&&e.textContent;if(o===n||n.split(\":\")&&n.split(\":\")[1]===o)return r=i,!0}return!1})),r}function C(e,t,n,i,r){const o=h(\"Abstract\",t),l=x(\"Format\",t);return{id:e,fullExtent:S(t),fullExtents:V(t),description:o,formats:l,styles:b(t,i),title:h(\"Title\",t),tileMatrixSets:E(r,t,n)}}function M(e,t){const n=[],i=e.layerMap?.get(t);if(!i)return null;const r=g(\"ResourceURL\",i),o=g(\"Dimension\",i);let l,s,a,c;return o.length&&(l=h(\"Identifier\",o[0]),s=x(\"Default\",o[0])||x(\"Value\",o[0])),o.length>1&&(a=h(\"Identifier\",o[1]),c=x(\"Default\",o[1])||x(\"Value\",o[1])),e.dimensionMap.set(t,{dimensions:s,dimensions2:c}),r.forEach((e=>{let t=e.getAttribute(\"template\");if(\"tile\"===e.getAttribute(\"resourceType\")){if(l&&s.length)if(t.includes(\"{\"+l+\"}\"))t=t.replace(\"{\"+l+\"}\",\"{dimensionValue}\");else{const e=t.toLowerCase().indexOf(\"{\"+l.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue}\"+t.substring(e+l.length+2))}if(a&&c.length)if(t.includes(\"{\"+a+\"}\"))t=t.replace(\"{\"+a+\"}\",\"{dimensionValue2}\");else{const e=t.toLowerCase().indexOf(\"{\"+a.toLowerCase()+\"}\");e>-1&&(t=t.substring(0,e)+\"{dimensionValue2}\"+t.substring(e+a.length+2))}n.push({template:t,format:e.getAttribute(\"format\"),resourceType:\"tile\"})}})),n}function T(e,t,n,i,r,o,l,s){const a=y(e,t,i);if(!(a?.length>0))return\"\";const{dimensionMap:c}=e,u=c.get(t).dimensions?.[0],p=c.get(t).dimensions2?.[0];return a[l%a.length].template.replace(/\\{Style\\}/gi,r??\"\").replace(/\\{TileMatrixSet\\}/gi,n??\"\").replace(/\\{TileMatrix\\}/gi,o).replace(/\\{TileRow\\}/gi,\"\"+l).replace(/\\{TileCol\\}/gi,\"\"+s).replace(/\\{dimensionValue\\}/gi,u).replace(/\\{dimensionValue2\\}/gi,p)}function y(e,t,n){const i=M(e,t),r=i?.filter((e=>e.format===n));return(r?.length?r:i)??[]}function R(e,t,n,i){const{dimensionMap:r}=e,o=M(e,t);let l=\"\";if(o&&o.length>0){const e=r.get(t).dimensions&&r.get(t).dimensions[0],s=r.get(t).dimensions2&&r.get(t).dimensions2[0];l=o[0].template,l.indexOf(\".xxx\")===l.length-4&&(l=l.slice(0,l.length-4)),l=l.replace(/\\{Style\\}/gi,i),l=l.replace(/\\{TileMatrixSet\\}/gi,n),l=l.replace(/\\{TileMatrix\\}/gi,\"{level}\"),l=l.replace(/\\{TileRow\\}/gi,\"{row}\"),l=l.replace(/\\{TileCol\\}/gi,\"{col}\"),l=l.replace(/\\{dimensionValue\\}/gi,e),l=l.replace(/\\{dimensionValue2\\}/gi,s)}return l}function S(e){const t=m(\"WGS84BoundingBox\",e),n=t?h(\"LowerCorner\",t).split(\" \"):[\"-180\",\"-90\"],i=t?h(\"UpperCorner\",t).split(\" \"):[\"180\",\"90\"];return{xmin:parseFloat(n[0]),ymin:parseFloat(n[1]),xmax:parseFloat(i[0]),ymax:parseFloat(i[1]),spatialReference:{wkid:4326}}}function V(e){const t=[];return s(e,{BoundingBox:e=>{if(!e.getAttribute(\"crs\"))return;const n=e.getAttribute(\"crs\").toLowerCase(),i=I(n),r=n.includes(\"epsg\")&&l(i.wkid);let o,a,c,u;s(e,{LowerCorner:e=>{[o,a]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([o,a]=[a,o])},UpperCorner:e=>{[c,u]=e.textContent.split(\" \").map((e=>Number.parseFloat(e))),r&&([c,u]=[u,c])}}),t.push({xmin:o,ymin:a,xmax:c,ymax:u,spatialReference:i})}}),t}function b(e,t){return g(\"Style\",e).map((e=>{const n=m(\"LegendURL\",e),i=m(\"Keywords\",e),r=i?x(\"Keyword\",i):[];let o=n&&n.getAttribute(\"xlink:href\");t&&(o=o&&o.replace(/^http:/i,\"https:\"));return{abstract:h(\"Abstract\",e),id:h(\"Identifier\",e),isDefault:\"true\"===e.getAttribute(\"isDefault\"),keywords:r,legendUrl:o,title:h(\"Title\",e)}}))}function E(e,t,n){return g(\"TileMatrixSetLink\",t).map((t=>L(e,t,n)))}function L(e,t,n){const i=m(\"TileMatrixSet\",t).textContent,r=x(\"TileMatrix\",t),o=n.find((e=>{const t=m(\"Identifier\",e),n=t&&t.textContent;return!!(n===i||i.split(\":\")&&i.split(\":\")[1]===n)})),l=m(\"TileMatrixSetLimits\",t),s=l&&g(\"TileMatrixLimits\",l),c=new Map;if(s?.length)for(const a of s){const e=m(\"TileMatrix\",a).textContent,t=+m(\"MinTileRow\",a).textContent,n=+m(\"MaxTileRow\",a).textContent,i=+m(\"MinTileCol\",a).textContent,r=+m(\"MaxTileCol\",a).textContent;c.set(e,{minCol:i,maxCol:r,minRow:t,maxRow:n})}const u=h(\"SupportedCRS\",o).toLowerCase(),p=N(o,u),f=p.spatialReference,d=m(\"TileMatrix\",o),C=[parseInt(h(\"TileWidth\",d),10),parseInt(h(\"TileHeight\",d),10)],M=[];if(r.length)r.forEach(((e,t)=>{const n=w(\"TileMatrix\",\"Identifier\",e,o);M.push(D(n,u,t,i,c))}));else{g(\"TileMatrix\",o).forEach(((e,t)=>{M.push(D(e,u,t,i,c))}))}const T=v(e,o,p,C,M[0]).toJSON(),y=new a({dpi:96,spatialReference:f,size:C,origin:p,lods:M}).toJSON();return{id:i,fullExtent:T,tileInfo:y}}function I(e){e=e.toLowerCase();let n=parseInt(e.split(\":\").pop(),10);900913!==n&&3857!==n||(n=102100);const i=k(e);return t(i)&&(n=i),{wkid:n}}function N(e,t){return A(m(\"TileMatrix\",e),t)}function A(e,t){const n=I(t),[r,o]=h(\"TopLeftCorner\",e).split(\" \").map((e=>parseFloat(e))),s=t.includes(\"epsg\")&&l(n.wkid);return new i(s?{x:o,y:r,spatialReference:n}:{x:r,y:o,spatialReference:n})}function v(e,t,i,r,o){const l=m(\"BoundingBox\",t);let s,a,c,u,p,f;if(l&&(s=h(\"LowerCorner\",l).split(\" \"),a=h(\"UpperCorner\",l).split(\" \")),s&&s.length>1&&a&&a.length>1)c=parseFloat(s[0]),p=parseFloat(s[1]),u=parseFloat(a[0]),f=parseFloat(a[1]);else{const e=m(\"TileMatrix\",t),n=parseInt(h(\"MatrixWidth\",e),10),l=parseInt(h(\"MatrixHeight\",e),10);c=i.x,f=i.y,u=c+n*r[0]*o.resolution,p=f-l*r[1]*o.resolution}return F(e,i.spatialReference,i)?new n(p,c,f,u,i.spatialReference):new n(c,p,u,f,i.spatialReference)}function F(e,t,n){return\"1.0.0\"===e&&l(t.wkid)&&!(n.spatialReference.isGeographic&&n.x<-90&&n.y>=-90)}var O;function k(e){return e.includes(\"crs84\")||e.includes(\"crs:84\")?O.CRS84:e.includes(\"crs83\")||e.includes(\"crs:83\")?O.CRS83:e.includes(\"crs27\")||e.includes(\"crs:27\")?O.CRS27:null}function D(e,t,n,i,r){const o=I(t),l=h(\"Identifier\",e);let s=parseFloat(h(\"ScaleDenominator\",e));const a=U(o.wkid,s,i);s*=96/c;const u=+h(\"MatrixWidth\",e),p=+h(\"MatrixHeight\",e),{maxCol:f=u-1,maxRow:d=p-1,minCol:m=0,minRow:g=0}=r.get(l)??{},{x,y:w}=A(e,t);return{cols:[m,f],level:n,levelValue:l,origin:[x,w],scale:s,resolution:a,rows:[g,d]}}function U(e,t,n){let i;return i=o.hasOwnProperty(\"\"+e)?o.values[o[e]]:\"default028mm\"===n?6370997*Math.PI/180:r(e).metersPerDegree,7*t/25e3/i}!function(e){e[e.CRS84=4326]=\"CRS84\",e[e.CRS83=4269]=\"CRS83\",e[e.CRS27=4267]=\"CRS27\"}(O||(O={}));export{T as getTileUrlFromResourceUrls,R as getTileUrlTemplateFromResourceUrls,y as getTileUrlTemplates,p as parseCapabilities,f as parseResourceInfo,u as validateCapabilities};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}