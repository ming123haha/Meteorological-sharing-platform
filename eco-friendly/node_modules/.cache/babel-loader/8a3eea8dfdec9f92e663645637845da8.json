{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport r from \"../../../Error.js\";\nimport e from \"../../../Logger.js\";\nimport { setDeepValue as t } from \"../../../object.js\";\nimport { isCollection as n } from \"./type.js\";\n\nfunction i(r, e) {\n  if (!e.write || e.write.writer || !1 === e.write.enabled && !e.write.overridePolicy) return;\n  const t = r?.ndimArray ?? 0;\n  r && (1 === t || \"type\" in r && n(r.type)) ? e.write.writer = a : t > 1 ? e.write.writer = l(t) : e.types ? Array.isArray(e.types) ? e.write.writer = f(e.types[0]) : e.write.writer = o(e.types) : e.write.writer = s;\n}\n\nfunction o(r) {\n  return (e, t, n, i) => e ? u(e, r, i) ? s(e, t, n, i) : void 0 : s(e, t, n, i);\n}\n\nfunction u(t, n, i) {\n  for (const r in n.typeMap) if (t instanceof n.typeMap[r]) return !0;\n\n  if (i?.messages) {\n    const o = n.errorContext ?? \"type\",\n          u = `Values of type '${(\"function\" != typeof n.key ? t[n.key] : t.declaredClass) ?? \"Unknown\"}' cannot be written`;\n    i && i.messages && t && i.messages.push(new r(`${o}:unsupported`, u, {\n      definition: t,\n      context: i\n    })), e.getLogger(\"esri.core.accessorSupport.extensions.serializableProperty.writer\").error(u);\n  }\n\n  return !1;\n}\n\nfunction f(r) {\n  return (e, t, n, i) => {\n    if (!e || !Array.isArray(e)) return s(e, t, n, i);\n    return s(e.filter(e => u(e, r, i)), t, n, i);\n  };\n}\n\nfunction s(r, e, n, i) {\n  t(n, p(r, i), e);\n}\n\nfunction p(r, e) {\n  return r && \"function\" == typeof r.write ? r.write({}, e) : r && \"function\" == typeof r.toJSON ? r.toJSON() : \"number\" == typeof r ? y(r) : r;\n}\n\nfunction y(r) {\n  return r === -1 / 0 ? -Number.MAX_VALUE : r === 1 / 0 ? Number.MAX_VALUE : isNaN(r) ? null : r;\n}\n\nfunction a(r, e, n, i) {\n  let o;\n  null === r ? o = null : r && \"function\" == typeof r.map ? (o = r.map(r => p(r, i)), \"function\" == typeof o.toArray && (o = o.toArray())) : o = [p(r, i)], t(n, o, e);\n}\n\nfunction c(r, e, t) {\n  return 0 !== t && Array.isArray(r) ? r.map(r => c(r, e, t - 1)) : p(r, e);\n}\n\nfunction l(r) {\n  return (e, n, i, o) => {\n    let u;\n    if (null === e) u = null;else {\n      u = c(e, o, r);\n      let t = r,\n          n = u;\n\n      for (; t > 0 && Array.isArray(n);) t--, n = n[0];\n\n      if (void 0 !== n) for (let r = 0; r < t; r++) u = [u];\n    }\n    t(i, u, n);\n  };\n}\n\nexport { i as create, y as numberToJSON };","map":{"version":3,"names":["r","e","setDeepValue","t","isCollection","n","i","write","writer","enabled","overridePolicy","ndimArray","type","a","l","types","Array","isArray","f","o","s","u","typeMap","messages","errorContext","key","declaredClass","push","definition","context","getLogger","error","filter","p","toJSON","y","Number","MAX_VALUE","isNaN","map","toArray","c","create","numberToJSON"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/accessorSupport/extensions/serializableProperty/writer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport r from\"../../../Error.js\";import e from\"../../../Logger.js\";import{setDeepValue as t}from\"../../../object.js\";import{isCollection as n}from\"./type.js\";function i(r,e){if(!e.write||e.write.writer||!1===e.write.enabled&&!e.write.overridePolicy)return;const t=r?.ndimArray??0;r&&(1===t||\"type\"in r&&n(r.type))?e.write.writer=a:t>1?e.write.writer=l(t):e.types?Array.isArray(e.types)?e.write.writer=f(e.types[0]):e.write.writer=o(e.types):e.write.writer=s}function o(r){return(e,t,n,i)=>e?u(e,r,i)?s(e,t,n,i):void 0:s(e,t,n,i)}function u(t,n,i){for(const r in n.typeMap)if(t instanceof n.typeMap[r])return!0;if(i?.messages){const o=n.errorContext??\"type\",u=`Values of type '${(\"function\"!=typeof n.key?t[n.key]:t.declaredClass)??\"Unknown\"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new r(`${o}:unsupported`,u,{definition:t,context:i})),e.getLogger(\"esri.core.accessorSupport.extensions.serializableProperty.writer\").error(u)}return!1}function f(r){return(e,t,n,i)=>{if(!e||!Array.isArray(e))return s(e,t,n,i);return s(e.filter((e=>u(e,r,i))),t,n,i)}}function s(r,e,n,i){t(n,p(r,i),e)}function p(r,e){return r&&\"function\"==typeof r.write?r.write({},e):r&&\"function\"==typeof r.toJSON?r.toJSON():\"number\"==typeof r?y(r):r}function y(r){return r===-1/0?-Number.MAX_VALUE:r===1/0?Number.MAX_VALUE:isNaN(r)?null:r}function a(r,e,n,i){let o;null===r?o=null:r&&\"function\"==typeof r.map?(o=r.map((r=>p(r,i))),\"function\"==typeof o.toArray&&(o=o.toArray())):o=[p(r,i)],t(n,o,e)}function c(r,e,t){return 0!==t&&Array.isArray(r)?r.map((r=>c(r,e,t-1))):p(r,e)}function l(r){return(e,n,i,o)=>{let u;if(null===e)u=null;else{u=c(e,o,r);let t=r,n=u;for(;t>0&&Array.isArray(n);)t--,n=n[0];if(void 0!==n)for(let r=0;r<t;r++)u=[u]}t(i,u,n)}}export{i as create,y as numberToJSON};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}