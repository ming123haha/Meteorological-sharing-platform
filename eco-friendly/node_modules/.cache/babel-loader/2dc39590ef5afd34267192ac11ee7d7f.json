{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as s } from \"../../../core/maybe.js\";\nimport { property as e } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport r from \"./BaseRasterFunction.js\";\nimport { lookupPixels as i } from \"./pixelUtils.js\";\nimport u from \"./StretchFunctionArguments.js\";\nimport { getStretchCutoff as n, createStretchLUT as p, stretch as c } from \"./stretchUtils.js\";\nlet a = class extends r {\n  constructor() {\n    super(...arguments), this.functionName = \"Stretch\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"], this.lookup = null, this.cutOffs = null;\n  }\n\n  _bindSourceRasters() {\n    this.lookup = null, this.cutOffs = null;\n    const t = this.sourceRasterInfos[0],\n          {\n      pixelType: s\n    } = t,\n          {\n      functionArguments: e\n    } = this,\n          {\n      dynamicRangeAdjustment: o,\n      gamma: r,\n      useGamma: i\n    } = e;\n\n    if (!o && [\"u8\", \"u16\", \"s8\", \"s16\"].includes(s)) {\n      const o = n(e.toJSON(), {\n        rasterInfo: t\n      });\n      this.lookup = p({\n        pixelType: s,\n        ...o,\n        gamma: i ? r : null\n      });\n    } else o && (this.cutOffs = n(e.toJSON(), {\n      rasterInfo: t\n    }));\n\n    this.outputPixelType = this._getOutputPixelType(s);\n    const u = t.clone();\n    return u.pixelType = this.outputPixelType, u.statistics = null, u.histograms = null, \"u8\" === this.outputPixelType && (u.keyProperties.DataType = \"processed\"), this.rasterInfo = u, {\n      success: !0\n    };\n  }\n\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (s(e)) return e;\n    const {\n      lookup: o\n    } = this;\n    if (o) return i(e, { ...o,\n      outputPixelType: this.rasterInfo.pixelType\n    });\n    const {\n      functionArguments: r\n    } = this,\n          u = this.cutOffs || n(r.toJSON(), {\n      rasterInfo: this.sourceRasterInfos[0],\n      pixelBlock: e\n    }),\n          p = r.useGamma ? r.gamma : null;\n    return c(e, { ...u,\n      gamma: p,\n      outputPixelType: this.outputPixelType\n    });\n  }\n\n};\nt([e({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], a.prototype, \"functionName\", void 0), t([e({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], a.prototype, \"functionArguments\", void 0), t([e()], a.prototype, \"rasterArgumentNames\", void 0), t([e({\n  json: {\n    write: !0\n  }\n})], a.prototype, \"lookup\", void 0), t([e({\n  json: {\n    write: !0\n  }\n})], a.prototype, \"cutOffs\", void 0), a = t([o(\"esri.layers.support.rasterFunctions.StretchFunction\")], a);\nconst l = a;\nexport { l as default };","map":{"version":3,"names":["_","t","isNone","s","property","e","subclass","o","r","lookupPixels","i","u","getStretchCutoff","n","createStretchLUT","p","stretch","c","a","constructor","arguments","functionName","functionArguments","rasterArgumentNames","lookup","cutOffs","_bindSourceRasters","sourceRasterInfos","pixelType","dynamicRangeAdjustment","gamma","useGamma","includes","toJSON","rasterInfo","outputPixelType","_getOutputPixelType","clone","statistics","histograms","keyProperties","DataType","success","_processPixels","pixelBlocks","pixelBlock","json","write","name","prototype","type","l","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/StretchFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isNone as s}from\"../../../core/maybe.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import r from\"./BaseRasterFunction.js\";import{lookupPixels as i}from\"./pixelUtils.js\";import u from\"./StretchFunctionArguments.js\";import{getStretchCutoff as n,createStretchLUT as p,stretch as c}from\"./stretchUtils.js\";let a=class extends r{constructor(){super(...arguments),this.functionName=\"Stretch\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"],this.lookup=null,this.cutOffs=null}_bindSourceRasters(){this.lookup=null,this.cutOffs=null;const t=this.sourceRasterInfos[0],{pixelType:s}=t,{functionArguments:e}=this,{dynamicRangeAdjustment:o,gamma:r,useGamma:i}=e;if(!o&&[\"u8\",\"u16\",\"s8\",\"s16\"].includes(s)){const o=n(e.toJSON(),{rasterInfo:t});this.lookup=p({pixelType:s,...o,gamma:i?r:null})}else o&&(this.cutOffs=n(e.toJSON(),{rasterInfo:t}));this.outputPixelType=this._getOutputPixelType(s);const u=t.clone();return u.pixelType=this.outputPixelType,u.statistics=null,u.histograms=null,\"u8\"===this.outputPixelType&&(u.keyProperties.DataType=\"processed\"),this.rasterInfo=u,{success:!0}}_processPixels(t){const e=t.pixelBlocks?.[0];if(s(e))return e;const{lookup:o}=this;if(o)return i(e,{...o,outputPixelType:this.rasterInfo.pixelType});const{functionArguments:r}=this,u=this.cutOffs||n(r.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:e}),p=r.useGamma?r.gamma:null;return c(e,{...u,gamma:p,outputPixelType:this.outputPixelType})}};t([e({json:{write:!0,name:\"rasterFunction\"}})],a.prototype,\"functionName\",void 0),t([e({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],a.prototype,\"functionArguments\",void 0),t([e()],a.prototype,\"rasterArgumentNames\",void 0),t([e({json:{write:!0}})],a.prototype,\"lookup\",void 0),t([e({json:{write:!0}})],a.prototype,\"cutOffs\",void 0),a=t([o(\"esri.layers.support.rasterFunctions.StretchFunction\")],a);const l=a;export{l as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}