{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../../core/maybe.js\";\nimport { TranslateAnchor as r } from \"../../vectorTiles/style/StyleDefinition.js\";\nimport { WGLDrawPhase as i } from \"../enums.js\";\nimport { u32to4Xu8 as a } from \"../number.js\";\nimport n from \"./WGLBrush.js\";\nimport { CompareFunction as s, PrimitiveType as o, DataType as l } from \"../../../../webgl/enums.js\";\n\nclass c extends n {\n  constructor() {\n    super(...arguments), this._programOptions = {\n      id: !1\n    };\n  }\n\n  dispose() {}\n\n  drawMany(n, c) {\n    const {\n      context: m,\n      displayLevel: d,\n      requiredLevel: f,\n      state: u,\n      drawPhase: p,\n      painter: y,\n      spriteMosaic: g,\n      styleLayerUID: v,\n      requestRender: E,\n      allowDelayedRender: M\n    } = n;\n    if (!c.some(e => e.layerData.get(v)?.circleIndexCount ?? !1)) return;\n\n    const T = n.styleLayer,\n          x = T.circleMaterial,\n          I = y.vectorTilesMaterialManager,\n          U = 1.2,\n          _ = T.getPaintValue(\"circle-translate\", d),\n          R = T.getPaintValue(\"circle-translate-anchor\", d),\n          h = p === i.HITTEST,\n          D = this._programOptions;\n\n    D.id = h;\n    const L = I.getMaterialProgram(m, x, D);\n    if (M && e(E) && !L.isCompiled) return void E();\n    m.useProgram(L), L.setUniformMatrix3fv(\"u_displayMat3\", R === r.VIEWPORT ? u.displayMat3 : u.displayViewMat3), L.setUniform2fv(\"u_circleTranslation\", _), L.setUniform1f(\"u_depth\", T.z), L.setUniform1f(\"u_antialiasingWidth\", U);\n    let S = -1;\n\n    if (h) {\n      const e = a(v + 1);\n      L.setUniform4fv(\"u_id\", e);\n    }\n\n    for (const e of c) {\n      if (!e.layerData.has(v)) continue;\n      e.key.level !== S && (S = e.key.level, x.setDataUniforms(L, d, T, S, g));\n      const r = e.layerData.get(v);\n      if (!r.circleIndexCount) continue;\n      r.prepareForRendering(m);\n      const i = r.circleVertexArrayObject;\n      t(i) || (m.bindVAO(i), L.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), f !== e.key.level ? m.setStencilFunction(s.EQUAL, e.stencilRef, 255) : m.setStencilFunction(s.GREATER, 255, 255), m.drawElements(o.TRIANGLES, r.circleIndexCount, l.UNSIGNED_INT, Uint32Array.BYTES_PER_ELEMENT * r.circleIndexStart), e.triangleCount += r.circleIndexCount / 3);\n    }\n  }\n\n}\n\nexport { c as WGLBrushVTLCircle };","map":{"version":3,"names":["isSome","e","isNone","t","TranslateAnchor","r","WGLDrawPhase","i","u32to4Xu8","a","n","CompareFunction","s","PrimitiveType","o","DataType","l","c","constructor","arguments","_programOptions","id","dispose","drawMany","context","m","displayLevel","d","requiredLevel","f","state","u","drawPhase","p","painter","y","spriteMosaic","g","styleLayerUID","v","requestRender","E","allowDelayedRender","M","some","layerData","get","circleIndexCount","T","styleLayer","x","circleMaterial","I","vectorTilesMaterialManager","U","_","getPaintValue","R","h","HITTEST","D","L","getMaterialProgram","isCompiled","useProgram","setUniformMatrix3fv","VIEWPORT","displayMat3","displayViewMat3","setUniform2fv","setUniform1f","z","S","setUniform4fv","has","key","level","setDataUniforms","prepareForRendering","circleVertexArrayObject","bindVAO","transforms","dvs","setStencilFunction","EQUAL","stencilRef","GREATER","drawElements","TRIANGLES","UNSIGNED_INT","Uint32Array","BYTES_PER_ELEMENT","circleIndexStart","triangleCount","WGLBrushVTLCircle"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLCircle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../core/maybe.js\";import{TranslateAnchor as r}from\"../../vectorTiles/style/StyleDefinition.js\";import{WGLDrawPhase as i}from\"../enums.js\";import{u32to4Xu8 as a}from\"../number.js\";import n from\"./WGLBrush.js\";import{CompareFunction as s,PrimitiveType as o,DataType as l}from\"../../../../webgl/enums.js\";class c extends n{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(n,c){const{context:m,displayLevel:d,requiredLevel:f,state:u,drawPhase:p,painter:y,spriteMosaic:g,styleLayerUID:v,requestRender:E,allowDelayedRender:M}=n;if(!c.some((e=>e.layerData.get(v)?.circleIndexCount??!1)))return;const T=n.styleLayer,x=T.circleMaterial,I=y.vectorTilesMaterialManager,U=1.2,_=T.getPaintValue(\"circle-translate\",d),R=T.getPaintValue(\"circle-translate-anchor\",d),h=p===i.HITTEST,D=this._programOptions;D.id=h;const L=I.getMaterialProgram(m,x,D);if(M&&e(E)&&!L.isCompiled)return void E();m.useProgram(L),L.setUniformMatrix3fv(\"u_displayMat3\",R===r.VIEWPORT?u.displayMat3:u.displayViewMat3),L.setUniform2fv(\"u_circleTranslation\",_),L.setUniform1f(\"u_depth\",T.z),L.setUniform1f(\"u_antialiasingWidth\",U);let S=-1;if(h){const e=a(v+1);L.setUniform4fv(\"u_id\",e)}for(const e of c){if(!e.layerData.has(v))continue;e.key.level!==S&&(S=e.key.level,x.setDataUniforms(L,d,T,S,g));const r=e.layerData.get(v);if(!r.circleIndexCount)continue;r.prepareForRendering(m);const i=r.circleVertexArrayObject;t(i)||(m.bindVAO(i),L.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),f!==e.key.level?m.setStencilFunction(s.EQUAL,e.stencilRef,255):m.setStencilFunction(s.GREATER,255,255),m.drawElements(o.TRIANGLES,r.circleIndexCount,l.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*r.circleIndexStart),e.triangleCount+=r.circleIndexCount/3)}}}export{c as WGLBrushVTLCircle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}