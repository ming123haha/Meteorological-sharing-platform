{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/has.js\";\nimport { isSome as e, unwrapOrThrow as r, isNone as s } from \"../../../../core/maybe.js\";\nimport { FreeList as a } from \"./cpuMapped/FreeList.js\";\nconst i = t(\"esri-2d-log-allocations\");\n\nclass n {\n  constructor(t) {\n    this._array = t;\n  }\n\n  get array() {\n    return this._array;\n  }\n\n  get length() {\n    return this._array.length;\n  }\n\n  static create(t) {\n    const e = _.acquire(t);\n\n    return new n(e);\n  }\n\n  expand(t) {\n    const e = _.acquire(t);\n\n    e.set(this._array), _.release(this._array), this._array = e;\n  }\n\n  destroy() {\n    _.release(this._array);\n  }\n\n  set(t, e) {\n    this._array.set(t._array, e);\n  }\n\n  slice() {\n    const t = _.acquire(this._array.byteLength);\n\n    return t.set(this._array), new n(t);\n  }\n\n}\n\nclass o {\n  constructor() {\n    this._data = new ArrayBuffer(o.BYTE_LENGTH), this._freeList = new a({\n      start: 0,\n      end: this._data.byteLength\n    });\n  }\n\n  static get BYTE_LENGTH() {\n    return 64e6;\n  }\n\n  get buffer() {\n    return this._data;\n  }\n\n  allocate(t) {\n    const e = this._freeList.firstFit(t);\n\n    return s(e) ? null : new Uint32Array(this._data, e, t / Uint32Array.BYTES_PER_ELEMENT);\n  }\n\n  free(t) {\n    this._freeList.free(t.byteOffset, t.byteLength);\n  }\n\n}\n\nclass c {\n  constructor() {\n    this._bytesAllocated = 0, this._pages = [], this._pagesByBuffer = new Map(), this._addPage();\n  }\n\n  get _bytesTotal() {\n    return this._pages.length * o.BYTE_LENGTH;\n  }\n\n  acquire(t) {\n    if (this._bytesAllocated += t, i && console.log(`Allocating ${t}, (${this._bytesAllocated} / ${this._bytesTotal})`), t > o.BYTE_LENGTH) return new Uint32Array(t / Uint32Array.BYTES_PER_ELEMENT);\n\n    for (const r of this._pages) {\n      const s = r.allocate(t);\n      if (e(s)) return s;\n    }\n\n    return r(this._addPage().allocate(t), \"Expected to allocate page\");\n  }\n\n  release(t) {\n    this._bytesAllocated -= t.byteLength, i && console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);\n\n    const e = this._pagesByBuffer.get(t.buffer);\n\n    e && e.free(t);\n  }\n\n  _addPage() {\n    const t = new o();\n    return this._pages.push(t), this._pagesByBuffer.set(t.buffer, t), t;\n  }\n\n}\n\nconst _ = new c();\n\nexport { n as TypedBuffer };","map":{"version":3,"names":["t","isSome","e","unwrapOrThrow","r","isNone","s","FreeList","a","i","n","constructor","_array","array","length","create","_","acquire","expand","set","release","destroy","slice","byteLength","o","_data","ArrayBuffer","BYTE_LENGTH","_freeList","start","end","buffer","allocate","firstFit","Uint32Array","BYTES_PER_ELEMENT","free","byteOffset","c","_bytesAllocated","_pages","_pagesByBuffer","Map","_addPage","_bytesTotal","console","log","get","push","TypedBuffer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/BufferPool.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{isSome as e,unwrapOrThrow as r,isNone as s}from\"../../../../core/maybe.js\";import{FreeList as a}from\"./cpuMapped/FreeList.js\";const i=t(\"esri-2d-log-allocations\");class n{constructor(t){this._array=t}get array(){return this._array}get length(){return this._array.length}static create(t){const e=_.acquire(t);return new n(e)}expand(t){const e=_.acquire(t);e.set(this._array),_.release(this._array),this._array=e}destroy(){_.release(this._array)}set(t,e){this._array.set(t._array,e)}slice(){const t=_.acquire(this._array.byteLength);return t.set(this._array),new n(t)}}class o{constructor(){this._data=new ArrayBuffer(o.BYTE_LENGTH),this._freeList=new a({start:0,end:this._data.byteLength})}static get BYTE_LENGTH(){return 64e6}get buffer(){return this._data}allocate(t){const e=this._freeList.firstFit(t);return s(e)?null:new Uint32Array(this._data,e,t/Uint32Array.BYTES_PER_ELEMENT)}free(t){this._freeList.free(t.byteOffset,t.byteLength)}}class c{constructor(){this._bytesAllocated=0,this._pages=[],this._pagesByBuffer=new Map,this._addPage()}get _bytesTotal(){return this._pages.length*o.BYTE_LENGTH}acquire(t){if(this._bytesAllocated+=t,i&&console.log(`Allocating ${t}, (${this._bytesAllocated} / ${this._bytesTotal})`),t>o.BYTE_LENGTH)return new Uint32Array(t/Uint32Array.BYTES_PER_ELEMENT);for(const r of this._pages){const s=r.allocate(t);if(e(s))return s}return r(this._addPage().allocate(t),\"Expected to allocate page\")}release(t){this._bytesAllocated-=t.byteLength,i&&console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);const e=this._pagesByBuffer.get(t.buffer);e&&e.free(t)}_addPage(){const t=new o;return this._pages.push(t),this._pagesByBuffer.set(t.buffer,t),t}}const _=new c;export{n as TypedBuffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}