{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../../../core/HandleOwner.js\";\nimport { isSome as r, isNone as i } from \"../../../../../../core/maybe.js\";\nimport { watch as s, initial as o } from \"../../../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../../core/arrayUtils.js\";\nimport \"../../../../../../core/has.js\";\nimport \"../../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { Visibility as c } from \"../../../../layers/support/FeatureTileDescriptor3D.js\";\nimport { distanceToTile as a } from \"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";\nlet p = class extends t {\n  constructor(e) {\n    super(e), this.pointOfInterest = null;\n  }\n\n  get tiles() {\n    const e = this.tilesCoveringView,\n          t = this.effectivePointOfInterest;\n\n    if (r(t)) {\n      const r = e.map(e => a(t, e));\n\n      for (let i = 1; i < r.length; i++) if (r[i - 1] > r[i]) return e.sort((e, r) => a(t, e) - a(t, r)), e.slice();\n    }\n\n    return e;\n  }\n\n  get tilesCoveringView() {\n    return this._filterTiles(this.view.featureTiles?.tiles?.toArray()).map(u);\n  }\n\n  get tileInfo() {\n    return this.view.featureTiles?.tilingScheme.toTileInfo() ?? null;\n  }\n\n  get tileSize() {\n    return this.view.featureTiles?.tileSize ?? 256;\n  }\n\n  get effectivePointOfInterest() {\n    const e = this.pointOfInterest;\n    return r(e) ? e : this.view.pointsOfInterest?.focus.location;\n  }\n\n  initialize() {\n    this.handles.add(s(() => this.view.featureTiles, e => {\n      this.handles.remove(m), e && this.handles.add(e.addClient(), m);\n    }, o));\n  }\n\n  _filterTiles(e) {\n    if (i(e)) return [];\n    return e.filter(e => Math.abs(e.measures.screenRect[3] - e.measures.screenRect[1]) > f && e.measures.visibility === c.VISIBLE_ON_SURFACE);\n  }\n\n};\n\nfunction u({\n  lij: [e, t, r],\n  extent: i\n}) {\n  return {\n    id: `${e}/${t}/${r}`,\n    level: e,\n    row: t,\n    col: r,\n    extent: i\n  };\n}\n\ne([n({\n  readOnly: !0\n})], p.prototype, \"tiles\", null), e([n({\n  readOnly: !0\n})], p.prototype, \"tilesCoveringView\", null), e([n({\n  readOnly: !0\n})], p.prototype, \"tileInfo\", null), e([n({\n  readOnly: !0\n})], p.prototype, \"tileSize\", null), e([n({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), e([n()], p.prototype, \"pointOfInterest\", void 0), e([n()], p.prototype, \"effectivePointOfInterest\", null), p = e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")], p);\nconst f = 50,\n      m = \"feature-tiles\";\nexport { p as FeatureServiceTiles3D };","map":{"version":3,"names":["_","e","HandleOwner","t","isSome","r","isNone","i","watch","s","initial","o","property","n","subclass","l","Visibility","c","distanceToTile","a","p","constructor","pointOfInterest","tiles","tilesCoveringView","effectivePointOfInterest","map","length","sort","slice","_filterTiles","view","featureTiles","toArray","u","tileInfo","tilingScheme","toTileInfo","tileSize","pointsOfInterest","focus","location","initialize","handles","add","remove","m","addClient","filter","Math","abs","measures","screenRect","f","visibility","VISIBLE_ON_SURFACE","lij","extent","id","level","row","col","readOnly","prototype","constructOnly","FeatureServiceTiles3D"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../../core/HandleOwner.js\";import{isSome as r,isNone as i}from\"../../../../../../core/maybe.js\";import{watch as s,initial as o}from\"../../../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/arrayUtils.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{Visibility as c}from\"../../../../layers/support/FeatureTileDescriptor3D.js\";import{distanceToTile as a}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let p=class extends t{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(r(t)){const r=e.map((e=>a(t,e)));for(let i=1;i<r.length;i++)if(r[i-1]>r[i])return e.sort(((e,r)=>a(t,e)-a(t,r))),e.slice()}return e}get tilesCoveringView(){return this._filterTiles(this.view.featureTiles?.tiles?.toArray()).map(u)}get tileInfo(){return this.view.featureTiles?.tilingScheme.toTileInfo()??null}get tileSize(){return this.view.featureTiles?.tileSize??256}get effectivePointOfInterest(){const e=this.pointOfInterest;return r(e)?e:this.view.pointsOfInterest?.focus.location}initialize(){this.handles.add(s((()=>this.view.featureTiles),(e=>{this.handles.remove(m),e&&this.handles.add(e.addClient(),m)}),o))}_filterTiles(e){if(i(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>f&&e.measures.visibility===c.VISIBLE_ON_SURFACE))}};function u({lij:[e,t,r],extent:i}){return{id:`${e}/${t}/${r}`,level:e,row:t,col:r,extent:i}}e([n({readOnly:!0})],p.prototype,\"tiles\",null),e([n({readOnly:!0})],p.prototype,\"tilesCoveringView\",null),e([n({readOnly:!0})],p.prototype,\"tileInfo\",null),e([n({readOnly:!0})],p.prototype,\"tileSize\",null),e([n({constructOnly:!0})],p.prototype,\"view\",void 0),e([n()],p.prototype,\"pointOfInterest\",void 0),e([n()],p.prototype,\"effectivePointOfInterest\",null),p=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],p);const f=50,m=\"feature-tiles\";export{p as FeatureServiceTiles3D};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}