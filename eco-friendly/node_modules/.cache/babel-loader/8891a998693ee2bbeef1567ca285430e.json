{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Error.js\";\nimport e from \"../../../../core/Logger.js\";\nimport { isSome as r, isNone as s } from \"../../../../core/maybe.js\";\nimport { watch as i } from \"../../../../core/reactiveUtils.js\";\nimport { c as o } from \"../../../../chunks/mat3f32.js\";\nimport { DisplayObject as h } from \"../DisplayObject.js\";\nimport a from \"./Mesh2D.js\";\nimport { VertexArrayObject as c } from \"../../../webgl/VertexArrayObject.js\";\n\nconst n = e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),\n      m = t => parseFloat(t) / 100;\n\nclass p extends h {\n  constructor(t, e) {\n    super(), this._clip = e, this._cache = {}, this.stage = t, this._handle = i(() => e.version, () => this._invalidate()), this.ready();\n  }\n\n  static fromClipArea(t, e) {\n    return new p(t, e);\n  }\n\n  _destroyGL() {\n    r(this._cache.mesh) && (this._cache.mesh.destroy(), this._cache.mesh = null), r(this._cache.vao) && (this._cache.vao.dispose(), this._cache.vao = null);\n  }\n\n  destroy() {\n    this._destroyGL(), this._handle.remove();\n  }\n\n  getVAO(t, e, r, i) {\n    const [o, h] = e.size;\n\n    if (\"geometry\" !== this._clip.type && this._lastWidth === o && this._lastHeight === h || (this._lastWidth = o, this._lastHeight = h, this._destroyGL()), s(this._cache.vao)) {\n      const s = this._createMesh(e, this._clip),\n            o = s.getIndexBuffer(t),\n            h = s.getVertexBuffers(t);\n\n      this._cache.mesh = s, this._cache.vao = new c(t, r, i, h, o);\n    }\n\n    return this._cache.vao;\n  }\n\n  _createTransforms() {\n    return {\n      dvs: o()\n    };\n  }\n\n  _invalidate() {\n    this._destroyGL(), this.requestRender();\n  }\n\n  _createScreenRect(t, e) {\n    const [r, s] = t.size,\n          i = \"string\" == typeof e.left ? m(e.left) * r : e.left,\n          o = \"string\" == typeof e.right ? m(e.right) * r : e.right,\n          h = \"string\" == typeof e.top ? m(e.top) * s : e.top,\n          a = \"string\" == typeof e.bottom ? m(e.bottom) * s : e.bottom,\n          c = i,\n          n = h;\n    return {\n      x: c,\n      y: n,\n      width: Math.max(r - o - c, 0),\n      height: Math.max(s - a - n, 0)\n    };\n  }\n\n  _createMesh(e, r) {\n    switch (r.type) {\n      case \"rect\":\n        return a.fromRect(this._createScreenRect(e, r));\n\n      case \"path\":\n        return a.fromPath(r);\n\n      case \"geometry\":\n        return a.fromGeometry(e, r);\n\n      default:\n        return n.error(new t(\"mapview-bad-type\", \"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")), a.fromRect({\n          x: 0,\n          y: 0,\n          width: 1,\n          height: 1\n        });\n    }\n  }\n\n}\n\nexport { p as default };","map":{"version":3,"names":["t","e","isSome","r","isNone","s","watch","i","c","o","DisplayObject","h","a","VertexArrayObject","n","getLogger","m","parseFloat","p","constructor","_clip","_cache","stage","_handle","version","_invalidate","ready","fromClipArea","_destroyGL","mesh","destroy","vao","dispose","remove","getVAO","size","type","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","_createTransforms","dvs","requestRender","_createScreenRect","left","right","top","bottom","x","y","width","Math","max","height","fromRect","fromPath","fromGeometry","error","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{watch as i}from\"../../../../core/reactiveUtils.js\";import{c as o}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as h}from\"../DisplayObject.js\";import a from\"./Mesh2D.js\";import{VertexArrayObject as c}from\"../../../webgl/VertexArrayObject.js\";const n=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),m=t=>parseFloat(t)/100;class p extends h{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=i((()=>e.version),(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new p(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new c(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:o()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?m(e.left)*r:e.left,o=\"string\"==typeof e.right?m(e.right)*r:e.right,h=\"string\"==typeof e.top?m(e.top)*s:e.top,a=\"string\"==typeof e.bottom?m(e.bottom)*s:e.bottom,c=i,n=h;return{x:c,y:n,width:Math.max(r-o-c,0),height:Math.max(s-a-n,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return a.fromRect(this._createScreenRect(e,r));case\"path\":return a.fromPath(r);case\"geometry\":return a.fromGeometry(e,r);default:return n.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),a.fromRect({x:0,y:0,width:1,height:1})}}}export{p as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,2BAAb;AAAyC,OAAOC,CAAP,MAAa,4BAAb;AAA0C,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,2BAAnC;AAA+D,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,mCAAtB;AAA0D,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,qBAA9B;AAAoD,OAAOC,CAAP,MAAa,aAAb;AAA2B,SAAOC,iBAAiB,IAAIL,CAA5B,QAAkC,qCAAlC;;AAAwE,MAAMM,CAAC,GAACb,CAAC,CAACc,SAAF,CAAY,yCAAZ,CAAR;AAAA,MAA+DC,CAAC,GAAChB,CAAC,IAAEiB,UAAU,CAACjB,CAAD,CAAV,GAAc,GAAlF;;AAAsF,MAAMkB,CAAN,SAAgBP,CAAhB,CAAiB;EAACQ,WAAW,CAACnB,CAAD,EAAGC,CAAH,EAAK;IAAC,SAAQ,KAAKmB,KAAL,GAAWnB,CAAnB,EAAqB,KAAKoB,MAAL,GAAY,EAAjC,EAAoC,KAAKC,KAAL,GAAWtB,CAA/C,EAAiD,KAAKuB,OAAL,GAAahB,CAAC,CAAE,MAAIN,CAAC,CAACuB,OAAR,EAAkB,MAAI,KAAKC,WAAL,EAAtB,CAA/D,EAA0G,KAAKC,KAAL,EAA1G;EAAuH;;EAAmB,OAAZC,YAAY,CAAC3B,CAAD,EAAGC,CAAH,EAAK;IAAC,OAAO,IAAIiB,CAAJ,CAAMlB,CAAN,EAAQC,CAAR,CAAP;EAAkB;;EAAA2B,UAAU,GAAE;IAACzB,CAAC,CAAC,KAAKkB,MAAL,CAAYQ,IAAb,CAAD,KAAsB,KAAKR,MAAL,CAAYQ,IAAZ,CAAiBC,OAAjB,IAA2B,KAAKT,MAAL,CAAYQ,IAAZ,GAAiB,IAAlE,GAAwE1B,CAAC,CAAC,KAAKkB,MAAL,CAAYU,GAAb,CAAD,KAAqB,KAAKV,MAAL,CAAYU,GAAZ,CAAgBC,OAAhB,IAA0B,KAAKX,MAAL,CAAYU,GAAZ,GAAgB,IAA/D,CAAxE;EAA6I;;EAAAD,OAAO,GAAE;IAAC,KAAKF,UAAL,IAAkB,KAAKL,OAAL,CAAaU,MAAb,EAAlB;EAAwC;;EAAAC,MAAM,CAAClC,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOI,CAAP,EAAS;IAAC,MAAK,CAACE,CAAD,EAAGE,CAAH,IAAMV,CAAC,CAACkC,IAAb;;IAAkB,IAAG,eAAa,KAAKf,KAAL,CAAWgB,IAAxB,IAA8B,KAAKC,UAAL,KAAkB5B,CAAhD,IAAmD,KAAK6B,WAAL,KAAmB3B,CAAtE,KAA0E,KAAK0B,UAAL,GAAgB5B,CAAhB,EAAkB,KAAK6B,WAAL,GAAiB3B,CAAnC,EAAqC,KAAKiB,UAAL,EAA/G,GAAkIvB,CAAC,CAAC,KAAKgB,MAAL,CAAYU,GAAb,CAAtI,EAAwJ;MAAC,MAAM1B,CAAC,GAAC,KAAKkC,WAAL,CAAiBtC,CAAjB,EAAmB,KAAKmB,KAAxB,CAAR;MAAA,MAAuCX,CAAC,GAACJ,CAAC,CAACmC,cAAF,CAAiBxC,CAAjB,CAAzC;MAAA,MAA6DW,CAAC,GAACN,CAAC,CAACoC,gBAAF,CAAmBzC,CAAnB,CAA/D;;MAAqF,KAAKqB,MAAL,CAAYQ,IAAZ,GAAiBxB,CAAjB,EAAmB,KAAKgB,MAAL,CAAYU,GAAZ,GAAgB,IAAIvB,CAAJ,CAAMR,CAAN,EAAQG,CAAR,EAAUI,CAAV,EAAYI,CAAZ,EAAcF,CAAd,CAAnC;IAAoD;;IAAA,OAAO,KAAKY,MAAL,CAAYU,GAAnB;EAAuB;;EAAAW,iBAAiB,GAAE;IAAC,OAAM;MAACC,GAAG,EAAClC,CAAC;IAAN,CAAN;EAAgB;;EAAAgB,WAAW,GAAE;IAAC,KAAKG,UAAL,IAAkB,KAAKgB,aAAL,EAAlB;EAAuC;;EAAAC,iBAAiB,CAAC7C,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAK,CAACE,CAAD,EAAGE,CAAH,IAAML,CAAC,CAACmC,IAAb;IAAA,MAAkB5B,CAAC,GAAC,YAAU,OAAON,CAAC,CAAC6C,IAAnB,GAAwB9B,CAAC,CAACf,CAAC,CAAC6C,IAAH,CAAD,GAAU3C,CAAlC,GAAoCF,CAAC,CAAC6C,IAA1D;IAAA,MAA+DrC,CAAC,GAAC,YAAU,OAAOR,CAAC,CAAC8C,KAAnB,GAAyB/B,CAAC,CAACf,CAAC,CAAC8C,KAAH,CAAD,GAAW5C,CAApC,GAAsCF,CAAC,CAAC8C,KAAzG;IAAA,MAA+GpC,CAAC,GAAC,YAAU,OAAOV,CAAC,CAAC+C,GAAnB,GAAuBhC,CAAC,CAACf,CAAC,CAAC+C,GAAH,CAAD,GAAS3C,CAAhC,GAAkCJ,CAAC,CAAC+C,GAArJ;IAAA,MAAyJpC,CAAC,GAAC,YAAU,OAAOX,CAAC,CAACgD,MAAnB,GAA0BjC,CAAC,CAACf,CAAC,CAACgD,MAAH,CAAD,GAAY5C,CAAtC,GAAwCJ,CAAC,CAACgD,MAArM;IAAA,MAA4MzC,CAAC,GAACD,CAA9M;IAAA,MAAgNO,CAAC,GAACH,CAAlN;IAAoN,OAAM;MAACuC,CAAC,EAAC1C,CAAH;MAAK2C,CAAC,EAACrC,CAAP;MAASsC,KAAK,EAACC,IAAI,CAACC,GAAL,CAASnD,CAAC,GAACM,CAAF,GAAID,CAAb,EAAe,CAAf,CAAf;MAAiC+C,MAAM,EAACF,IAAI,CAACC,GAAL,CAASjD,CAAC,GAACO,CAAF,GAAIE,CAAb,EAAe,CAAf;IAAxC,CAAN;EAAiE;;EAAAyB,WAAW,CAACtC,CAAD,EAAGE,CAAH,EAAK;IAAC,QAAOA,CAAC,CAACiC,IAAT;MAAe,KAAI,MAAJ;QAAW,OAAOxB,CAAC,CAAC4C,QAAF,CAAW,KAAKX,iBAAL,CAAuB5C,CAAvB,EAAyBE,CAAzB,CAAX,CAAP;;MAA+C,KAAI,MAAJ;QAAW,OAAOS,CAAC,CAAC6C,QAAF,CAAWtD,CAAX,CAAP;;MAAqB,KAAI,UAAJ;QAAe,OAAOS,CAAC,CAAC8C,YAAF,CAAezD,CAAf,EAAiBE,CAAjB,CAAP;;MAA2B;QAAQ,OAAOW,CAAC,CAAC6C,KAAF,CAAQ,IAAI3D,CAAJ,CAAM,kBAAN,EAAyB,oEAAzB,CAAR,GAAwGY,CAAC,CAAC4C,QAAF,CAAW;UAACN,CAAC,EAAC,CAAH;UAAKC,CAAC,EAAC,CAAP;UAASC,KAAK,EAAC,CAAf;UAAiBG,MAAM,EAAC;QAAxB,CAAX,CAA/G;IAA3J;EAAkT;;AAAn6C;;AAAo6C,SAAOrC,CAAC,IAAI0C,OAAZ"},"metadata":{},"sourceType":"module"}