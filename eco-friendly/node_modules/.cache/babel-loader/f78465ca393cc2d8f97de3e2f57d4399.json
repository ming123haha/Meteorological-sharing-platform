{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { BufferViewVec4u8 as t } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { TextureType as e, PixelFormat as i, PixelType as s, TextureSamplingMode as r, TextureWrapMode as h } from \"../../../../webgl/enums.js\";\nimport { Texture as d } from \"../../../../webgl/Texture.js\";\n\nclass a {\n  constructor(a, u = 1) {\n    this.rctx = a, this.fieldCount = u, this.textureWidth = 4096, this.dirty = !0, this.texture = new d(this.rctx, {\n      target: e.TEXTURE_2D,\n      pixelFormat: i.RGBA,\n      dataType: s.UNSIGNED_BYTE,\n      samplingMode: r.NEAREST,\n      wrapMode: h.CLAMP_TO_EDGE,\n      width: this.textureWidth,\n      height: 1,\n      flipped: !1\n    }), this.data = new t(new ArrayBuffer(4 * this.textureWidth));\n  }\n\n  dispose() {\n    this.texture.dispose(), this.texture = void 0, this.data = void 0;\n  }\n\n  setData(t, e, i, s, r, h) {\n    const d = t * this.fieldCount + e;\n    this.dirty = !0, this.data.set(d, 0, i), this.data.set(d, 1, s), this.data.set(d, 2, r), this.data.set(d, 3, h);\n  }\n\n  setDataElement(t, e, i, s) {\n    const r = t * this.fieldCount + e;\n    this.dirty = !0, this.data.set(r, i, s);\n  }\n\n  resizeToFit(e) {\n    const i = e * this.fieldCount;\n\n    if (i >= this.data.count) {\n      const e = Math.ceil((i + 1) / this.textureWidth) * this.textureWidth,\n            s = new t(new ArrayBuffer(4 * e));\n      s.typedBuffer.set(this.data.typedBuffer), this.data = s;\n    }\n  }\n\n  updateTexture() {\n    if (!this.dirty) return;\n    const t = this.texture.descriptor.width,\n          e = this.texture.descriptor.height;\n    this.data.count > t * e && this.texture.resize(t, this.data.count / t), this.texture.setData(this.data.typedBuffer), this.dirty = !1;\n  }\n\n  bind(t, e, i) {\n    t.bindTexture(e, this.texture), t.setUniform2f(i, 1 / this.texture.descriptor.width, 1 / this.texture.descriptor.height);\n  }\n\n}\n\nexport { a as TextureBackedBuffer };","map":{"version":3,"names":["BufferViewVec4u8","t","TextureType","e","PixelFormat","i","PixelType","s","TextureSamplingMode","r","TextureWrapMode","h","Texture","d","a","constructor","u","rctx","fieldCount","textureWidth","dirty","texture","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","width","height","flipped","data","ArrayBuffer","dispose","setData","set","setDataElement","resizeToFit","count","Math","ceil","typedBuffer","updateTexture","descriptor","resize","bind","bindTexture","setUniform2f","TextureBackedBuffer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/TextureBackedBuffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{BufferViewVec4u8 as t}from\"../../../../../geometry/support/buffer/BufferView.js\";import{TextureType as e,PixelFormat as i,PixelType as s,TextureSamplingMode as r,TextureWrapMode as h}from\"../../../../webgl/enums.js\";import{Texture as d}from\"../../../../webgl/Texture.js\";class a{constructor(a,u=1){this.rctx=a,this.fieldCount=u,this.textureWidth=4096,this.dirty=!0,this.texture=new d(this.rctx,{target:e.TEXTURE_2D,pixelFormat:i.RGBA,dataType:s.UNSIGNED_BYTE,samplingMode:r.NEAREST,wrapMode:h.CLAMP_TO_EDGE,width:this.textureWidth,height:1,flipped:!1}),this.data=new t(new ArrayBuffer(4*this.textureWidth))}dispose(){this.texture.dispose(),this.texture=void 0,this.data=void 0}setData(t,e,i,s,r,h){const d=t*this.fieldCount+e;this.dirty=!0,this.data.set(d,0,i),this.data.set(d,1,s),this.data.set(d,2,r),this.data.set(d,3,h)}setDataElement(t,e,i,s){const r=t*this.fieldCount+e;this.dirty=!0,this.data.set(r,i,s)}resizeToFit(e){const i=e*this.fieldCount;if(i>=this.data.count){const e=Math.ceil((i+1)/this.textureWidth)*this.textureWidth,s=new t(new ArrayBuffer(4*e));s.typedBuffer.set(this.data.typedBuffer),this.data=s}}updateTexture(){if(!this.dirty)return;const t=this.texture.descriptor.width,e=this.texture.descriptor.height;this.data.count>t*e&&this.texture.resize(t,this.data.count/t),this.texture.setData(this.data.typedBuffer),this.dirty=!1}bind(t,e,i){t.bindTexture(e,this.texture),t.setUniform2f(i,1/this.texture.descriptor.width,1/this.texture.descriptor.height)}}export{a as TextureBackedBuffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}