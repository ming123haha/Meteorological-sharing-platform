{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/Error.js\";\nimport t from \"../../../../../../core/Logger.js\";\nimport { clamp as i } from \"../../../../../../core/mathUtils.js\";\nimport { unwrap as n, isNone as o } from \"../../../../../../core/maybe.js\";\nimport { pt2px as s } from \"../../../../../../core/screenUtils.js\";\nimport { Alignment as r } from \"../../../../../../symbols/cim/enums.js\";\nimport { isMapAligned as a, getAlignmentFromPlacement as l, getXDirection as h, getYDirection as c } from \"../../alignmentUtils.js\";\nimport { premultiplyAlphaRGBAArray as m } from \"../../color.js\";\nimport { TEXT_PLACEMENT_PADDING as _ } from \"../../definitions.js\";\nimport { WGLGeometryType as f } from \"../../enums.js\";\nimport { i8888to32 as g } from \"../../number.js\";\nimport { LabelMaterialKey as p } from \"../../materialKey/MaterialKey.js\";\nimport { smoothPaths as u, pathDivide as d } from \"./segmentUtils.js\";\nimport b from \"./WGLTextTemplate.js\";\n\nconst y = t.getLogger(\"esri.views.2d.engine.webgl.WGLLabelTemplate\"),\n      x = (t, i = \"mapview-labeling\") => y.error(new e(i, t)),\n      L = 1,\n      P = 0,\n      M = 4,\n      S = 25;\n\nfunction w(e, t) {\n  const n = !!e.minScale && t.scaleToZoom(e.minScale) || 0;\n  return i(n, 0, 25.5);\n}\n\nfunction v(e, t) {\n  const n = !!e.maxScale && t.scaleToZoom(e.maxScale) || 255;\n  return i(n, 0, 25.5);\n}\n\nfunction A(e) {\n  const t = new Map();\n  return i => (t.has(i) || t.set(i, e(i)), t.get(i));\n}\n\nconst Z = A(e => {\n  let t = 0;\n  if (0 === e) return 1 / 0;\n\n  for (; !(e % 2);) t++, e /= 2;\n\n  return t;\n}),\n      I = e => Math.floor(127 * e + 127),\n      O = e => Math.floor(10 * e),\n      z = e => Math.round(e * (254 / 360));\n\nclass G extends b {\n  constructor(e, t, i, n) {\n    super(e, i.font.size, i.haloSize || 0, i.font.size, i.color && m(i.color) || 0, i.haloColor && m(i.haloColor) || 0, i.horizontalAlignment, i.verticalAlignment, a(t.labelPlacement) ? r.MAP : r.SCREEN, i.font.decoration, !1, i.angle || 0, i.xoffset, i.yoffset, i.lineWidth, i.lineHeight, null, null, null, null, null), this._outLineLabelAngle = 0, this._refPlacementPadding = 0, this._refPlacementDirX = 0, this._refPlacementDirY = 0, this._refOffsetX = 0, this._refOffsetY = 0, this._zoomLevel = 0, this.geometryType = f.LABEL, this._allowOverrun = t.allowOverrun ?? !1, this._repeatLabel = t.repeatLabel ?? !0, this._labelPosition = t.labelPosition ?? \"curved\";\n    const o = w(t, n),\n          h = v(t, n),\n          c = t.labelPlacement,\n          [g, u] = l(c);\n    this._xAlignD = g, this._yAlignD = u, this._minZoom = o, this._maxZoom = h, this._refPlacementPadding = s(i.haloSize) + _, this._repeatLabelDistance = t.repeatLabelDistance ? s(t.repeatLabelDistance) : 128;\n    const d = p.load(e);\n    d.sdf = !0, this._materialKey = d.data;\n  }\n\n  static fromLabelClass(e, t) {\n    if (\"esriServerLinePlacementCenterAlong\" === e.labelPlacement) {\n      const t = e.symbol;\n      t.xoffset = 0, t.yoffset = 0, t.angle = 0, t.font.decoration = \"none\";\n    }\n\n    return new G(e.materialKey, e, e.symbol, t);\n  }\n\n  get _shapedBox() {\n    return n(this._shapingInfo).bounds;\n  }\n\n  setZoomLevel(e) {\n    this._zoomLevel = e;\n  }\n\n  bindReferenceTemplate(e) {\n    let t = h(this._xAlignD),\n        i = c(this._yAlignD);\n    if (this._refOffsetX = 0, this._refOffsetY = 0, o(e)) return void (this._refSymbolAndPlacementOffset = g(0, 0, I(t), I(i)));\n\n    if (\"circle\" === e.boundsType && (t || i)) {\n      const e = Math.sqrt(t * t + i * i);\n      t /= e, i /= e;\n    }\n\n    const n = Math.max(e.height, e.width),\n          s = this._refPlacementPadding * M;\n    this._refSymbolAndPlacementOffset = g(s, n, I(t), I(i)), this._referenceSize = n, this._refPlacementDirX = t, this._refPlacementDirY = i, this._refOffsetX = e.xOffset, this._refOffsetY = e.yOffset;\n  }\n\n  _write(e, t) {\n    if (o(this._shapingInfo)) return;\n    const i = this._shapingInfo,\n          n = t.getDisplayId(),\n          s = \"esriGeometryPolygon\" === t.geometryType ? t.readLegacyCentroid() : t.readLegacyGeometry();\n    if (s) switch (this._current = {\n      out: e,\n      inId: n,\n      inShaping: i,\n      zoomLevel: this._zoomLevel\n    }, t.geometryType) {\n      case \"esriGeometryPolyline\":\n        this._placeLineLabels(s);\n\n        break;\n\n      case \"esriGeometryPoint\":\n      case \"esriGeometryPolygon\":\n        this._placePointLabels(s);\n\n        break;\n\n      default:\n        x(\"mapview-labeling\", `Geometry of type ${t.geometryType} is not supported`);\n    }\n  }\n\n  _isVisible(e, t) {\n    const i = O(this._current.zoomLevel);\n    return O(e) <= i && i <= O(t);\n  }\n\n  _placePointLabels(e) {\n    const {\n      out: t,\n      inId: i,\n      inShaping: n\n    } = this._current;\n\n    this._writeGlyphs(t, i, e, n);\n  }\n\n  _placeLineLabels(e) {\n    const t = u(e.paths, this._current.inShaping.bounds.width),\n          i = this._placeSubdivGlyphs.bind(this),\n          n = (this._shapedBox.width + this._repeatLabelDistance) / (1 << L);\n\n    for (const o of t) d(o, n, i, this._repeatLabel);\n  }\n\n  _placeSubdivGlyphs(e, t, i, n) {\n    const o = Z(t),\n          s = this._shapedBox.width / (1 << L),\n          r = Math.sqrt(this._repeatLabelDistance) / (1 << L),\n          a = Math.min(i, n - i),\n          l = this._current.inShaping.isMultiline ? S : Math.log2(a / (r + s / 2)),\n          h = 0 === t ? l : Math.min(o, l),\n          c = Math.max(this._minZoom, this._current.zoomLevel + L - h),\n          m = this._current.zoomLevel - c,\n          _ = this._shapedBox.width / 2 * 2 ** m;\n\n    this._current.inShaping.isMultiline ? 0 === t && this._placeStraight(e, c) : this._allowOverrun && m < 0 ? this._placeStraightAlong(e, this._minZoom) : \"parallel\" === this._labelPosition ? this._placeStraightAlong(e, c) : \"curved\" === this._labelPosition && this._placeCurved(e, c, _);\n  }\n\n  _placeStraight(e, t) {\n    const {\n      out: i,\n      inId: n,\n      inShaping: o\n    } = this._current,\n          s = Math.ceil(e.angle * (180 / Math.PI) % 360),\n          r = Math.ceil((e.angle * (180 / Math.PI) + 180) % 360);\n    this._outLineLabelAngle = z(s), this._writeGlyphs(i, n, e, o, t), this._outLineLabelAngle = z(r), this._writeGlyphs(i, n, e, o, t);\n  }\n\n  _placeCurved(e, t, i) {\n    const {\n      out: n,\n      inId: o\n    } = this._current;\n    n.metricStart(o, t, e.x, e.y, 0, 0, 0, 0);\n    const s = e.clone(),\n          r = e.angle * (180 / Math.PI) % 360,\n          a = (e.angle * (180 / Math.PI) + 180) % 360;\n    this._outLineLabelAngle = z(r), this._placeFirst(s, t, 1), this._placeBack(e, s, t, i, 1), this._placeForward(e, s, t, i, 1), this._outLineLabelAngle = z(a), this._placeFirst(s, t, 0), this._placeBack(e, s, t, i, 0), this._placeForward(e, s, t, i, 0), n.metricEnd();\n  }\n\n  _placeStraightAlong(e, t) {\n    const {\n      out: i,\n      inId: n\n    } = this._current;\n    i.metricStart(n, t, e.x, e.y, 0, 0, 0, 0);\n    const o = e.clone(),\n          s = e.angle * (180 / Math.PI) % 360,\n          r = (e.angle * (180 / Math.PI) + 180) % 360;\n    this._outLineLabelAngle = z(s), this._placeFirst(o, t, 1, !0), this._outLineLabelAngle = z(r), this._placeFirst(o, t, 0, !0), i.metricEnd();\n  }\n\n  _placeBack(e, t, i, n, o) {\n    const s = e.clone();\n    let r = e.backwardLength + P;\n\n    for (; s.prev() && !(r >= n);) this._placeOnSegment(s, t, r, i, -1, o), r += s.length + P;\n  }\n\n  _placeForward(e, t, i, n, o) {\n    const s = e.clone();\n    let r = e.remainingLength + P;\n\n    for (; s.next() && !(r >= n);) this._placeOnSegment(s, t, r, i, 1, o), r += s.length + P;\n  }\n\n  _placeFirst(e, t, i, n = !1) {\n    const o = e,\n          s = this._current.inShaping,\n          r = s.glyphs,\n          a = this._current.zoomLevel,\n          {\n      out: l,\n      inId: h\n    } = this._current;\n\n    for (const c of r) {\n      const r = c.x > s.bounds.x ? i : 1 - i,\n            m = r * e.remainingLength + (1 - r) * e.backwardLength,\n            _ = Math.abs(c.x + c.width / 2 - s.bounds.x),\n            f = Math.max(0, a + Math.log2(_ / (m + P))),\n            g = Math.max(t, n ? 0 : f);\n\n      if (c.maxZoom = S, c.angle = e.angle + (1 - i) * Math.PI, c.minZoom = g, this._writeGlyph(l, h, o.x, o.y, c), i && this._isVisible(c.minZoom, c.maxZoom)) {\n        const e = c.bounds;\n        l.metricBoxWrite(e.center[0], e.center[1], e.width, e.height);\n      }\n    }\n  }\n\n  _placeOnSegment(e, t, i, n, o, s) {\n    const r = this._current.inShaping.glyphs,\n          {\n      out: a,\n      inId: l\n    } = this._current,\n          h = this._current.inShaping,\n          c = this._current.zoomLevel,\n          m = e.dx / e.length,\n          _ = e.dy / e.length,\n          f = {\n      x: e.x + i * -o * m,\n      y: e.y + i * -o * _\n    };\n\n    for (const g of r) {\n      const r = g.x > h.bounds.x ? s : 1 - s;\n      if (!(r && 1 === o || !r && -1 === o)) continue;\n\n      const m = Math.abs(g.x + g.width / 2 - h.bounds.x),\n            _ = Math.max(0, c + Math.log2(m / i) - .1),\n            p = Math.max(n, c + Math.log2(m / (i + e.length + P)));\n\n      if (0 !== _ && (g.angle = e.angle + (1 - s) * Math.PI, g.minZoom = p, g.maxZoom = _, this._writeGlyph(a, l, f.x, f.y, g), s && this._isVisible(g.minZoom, g.maxZoom))) {\n        const i = g.bounds,\n              n = e.x - t.x,\n              o = e.y - t.y;\n        a.metricBoxWrite(i.center[0] + n, i.center[1] + o, i.width, i.height);\n      }\n    }\n  }\n\n  _writeGlyphs(e, t, i, n, o = this._minZoom) {\n    if (i.x < 0 || i.x >= 512 || i.y < 0 || i.y >= 512) return;\n    const s = i.x + this._refOffsetX,\n          r = i.y - this._refOffsetY;\n\n    for (const c of n.glyphs) c.minZoom = o, c.maxZoom = this._maxZoom, this._writeGlyph(e, t, s, r, c);\n\n    const a = this._refPlacementDirX,\n          l = this._refPlacementDirY,\n          h = n.boundsT;\n    e.metricStart(t, o, s, r, a, l, this._referenceSize, this._materialKey), e.metricBoxWrite(h.center[0], h.center[1], h.width, h.height), e.metricEnd();\n  }\n\n  _writeVertexCommon(e, t, i, n) {\n    const o = this._color,\n          s = this._haloColor,\n          r = g(0, 0, this._size, this._haloSize),\n          a = Math.max(n.minZoom, this._minZoom),\n          l = Math.min(n.maxZoom, this._maxZoom),\n          h = g(O(a), O(l), this._outLineLabelAngle, 0);\n    e.vertexWrite(i), e.vertexWrite(t), e.vertexWrite(o), e.vertexWrite(s), e.vertexWrite(r), e.vertexWrite(this._refSymbolAndPlacementOffset), e.vertexWrite(h);\n  }\n\n}\n\nexport { G as default };","map":{"version":3,"names":["e","t","clamp","i","unwrap","n","isNone","o","pt2px","s","Alignment","r","isMapAligned","a","getAlignmentFromPlacement","l","getXDirection","h","getYDirection","c","premultiplyAlphaRGBAArray","m","TEXT_PLACEMENT_PADDING","_","WGLGeometryType","f","i8888to32","g","LabelMaterialKey","p","smoothPaths","u","pathDivide","d","b","y","getLogger","x","error","L","P","M","S","w","minScale","scaleToZoom","v","maxScale","A","Map","has","set","get","Z","I","Math","floor","O","z","round","G","constructor","font","size","haloSize","color","haloColor","horizontalAlignment","verticalAlignment","labelPlacement","MAP","SCREEN","decoration","angle","xoffset","yoffset","lineWidth","lineHeight","_outLineLabelAngle","_refPlacementPadding","_refPlacementDirX","_refPlacementDirY","_refOffsetX","_refOffsetY","_zoomLevel","geometryType","LABEL","_allowOverrun","allowOverrun","_repeatLabel","repeatLabel","_labelPosition","labelPosition","_xAlignD","_yAlignD","_minZoom","_maxZoom","_repeatLabelDistance","repeatLabelDistance","load","sdf","_materialKey","data","fromLabelClass","symbol","materialKey","_shapedBox","_shapingInfo","bounds","setZoomLevel","bindReferenceTemplate","_refSymbolAndPlacementOffset","boundsType","sqrt","max","height","width","_referenceSize","xOffset","yOffset","_write","getDisplayId","readLegacyCentroid","readLegacyGeometry","_current","out","inId","inShaping","zoomLevel","_placeLineLabels","_placePointLabels","_isVisible","_writeGlyphs","paths","_placeSubdivGlyphs","bind","min","isMultiline","log2","_placeStraight","_placeStraightAlong","_placeCurved","ceil","PI","metricStart","clone","_placeFirst","_placeBack","_placeForward","metricEnd","backwardLength","prev","_placeOnSegment","length","remainingLength","next","glyphs","abs","maxZoom","minZoom","_writeGlyph","metricBoxWrite","center","dx","dy","boundsT","_writeVertexCommon","_color","_haloColor","_size","_haloSize","vertexWrite","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Error.js\";import t from\"../../../../../../core/Logger.js\";import{clamp as i}from\"../../../../../../core/mathUtils.js\";import{unwrap as n,isNone as o}from\"../../../../../../core/maybe.js\";import{pt2px as s}from\"../../../../../../core/screenUtils.js\";import{Alignment as r}from\"../../../../../../symbols/cim/enums.js\";import{isMapAligned as a,getAlignmentFromPlacement as l,getXDirection as h,getYDirection as c}from\"../../alignmentUtils.js\";import{premultiplyAlphaRGBAArray as m}from\"../../color.js\";import{TEXT_PLACEMENT_PADDING as _}from\"../../definitions.js\";import{WGLGeometryType as f}from\"../../enums.js\";import{i8888to32 as g}from\"../../number.js\";import{LabelMaterialKey as p}from\"../../materialKey/MaterialKey.js\";import{smoothPaths as u,pathDivide as d}from\"./segmentUtils.js\";import b from\"./WGLTextTemplate.js\";const y=t.getLogger(\"esri.views.2d.engine.webgl.WGLLabelTemplate\"),x=(t,i=\"mapview-labeling\")=>y.error(new e(i,t)),L=1,P=0,M=4,S=25;function w(e,t){const n=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return i(n,0,25.5)}function v(e,t){const n=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return i(n,0,25.5)}function A(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const Z=A((e=>{let t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t})),I=e=>Math.floor(127*e+127),O=e=>Math.floor(10*e),z=e=>Math.round(e*(254/360));class G extends b{constructor(e,t,i,n){super(e,i.font.size,i.haloSize||0,i.font.size,i.color&&m(i.color)||0,i.haloColor&&m(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,a(t.labelPlacement)?r.MAP:r.SCREEN,i.font.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null,null,null,null),this._outLineLabelAngle=0,this._refPlacementPadding=0,this._refPlacementDirX=0,this._refPlacementDirY=0,this._refOffsetX=0,this._refOffsetY=0,this._zoomLevel=0,this.geometryType=f.LABEL,this._allowOverrun=t.allowOverrun??!1,this._repeatLabel=t.repeatLabel??!0,this._labelPosition=t.labelPosition??\"curved\";const o=w(t,n),h=v(t,n),c=t.labelPlacement,[g,u]=l(c);this._xAlignD=g,this._yAlignD=u,this._minZoom=o,this._maxZoom=h,this._refPlacementPadding=s(i.haloSize)+_,this._repeatLabelDistance=t.repeatLabelDistance?s(t.repeatLabelDistance):128;const d=p.load(e);d.sdf=!0,this._materialKey=d.data}static fromLabelClass(e,t){if(\"esriServerLinePlacementCenterAlong\"===e.labelPlacement){const t=e.symbol;t.xoffset=0,t.yoffset=0,t.angle=0,t.font.decoration=\"none\"}return new G(e.materialKey,e,e.symbol,t)}get _shapedBox(){return n(this._shapingInfo).bounds}setZoomLevel(e){this._zoomLevel=e}bindReferenceTemplate(e){let t=h(this._xAlignD),i=c(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,o(e))return void(this._refSymbolAndPlacementOffset=g(0,0,I(t),I(i)));if(\"circle\"===e.boundsType&&(t||i)){const e=Math.sqrt(t*t+i*i);t/=e,i/=e}const n=Math.max(e.height,e.width),s=this._refPlacementPadding*M;this._refSymbolAndPlacementOffset=g(s,n,I(t),I(i)),this._referenceSize=n,this._refPlacementDirX=t,this._refPlacementDirY=i,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}_write(e,t){if(o(this._shapingInfo))return;const i=this._shapingInfo,n=t.getDisplayId(),s=\"esriGeometryPolygon\"===t.geometryType?t.readLegacyCentroid():t.readLegacyGeometry();if(s)switch(this._current={out:e,inId:n,inShaping:i,zoomLevel:this._zoomLevel},t.geometryType){case\"esriGeometryPolyline\":this._placeLineLabels(s);break;case\"esriGeometryPoint\":case\"esriGeometryPolygon\":this._placePointLabels(s);break;default:x(\"mapview-labeling\",`Geometry of type ${t.geometryType} is not supported`)}}_isVisible(e,t){const i=O(this._current.zoomLevel);return O(e)<=i&&i<=O(t)}_placePointLabels(e){const{out:t,inId:i,inShaping:n}=this._current;this._writeGlyphs(t,i,e,n)}_placeLineLabels(e){const t=u(e.paths,this._current.inShaping.bounds.width),i=this._placeSubdivGlyphs.bind(this),n=(this._shapedBox.width+this._repeatLabelDistance)/(1<<L);for(const o of t)d(o,n,i,this._repeatLabel)}_placeSubdivGlyphs(e,t,i,n){const o=Z(t),s=this._shapedBox.width/(1<<L),r=Math.sqrt(this._repeatLabelDistance)/(1<<L),a=Math.min(i,n-i),l=this._current.inShaping.isMultiline?S:Math.log2(a/(r+s/2)),h=0===t?l:Math.min(o,l),c=Math.max(this._minZoom,this._current.zoomLevel+L-h),m=this._current.zoomLevel-c,_=this._shapedBox.width/2*2**m;this._current.inShaping.isMultiline?0===t&&this._placeStraight(e,c):this._allowOverrun&&m<0?this._placeStraightAlong(e,this._minZoom):\"parallel\"===this._labelPosition?this._placeStraightAlong(e,c):\"curved\"===this._labelPosition&&this._placeCurved(e,c,_)}_placeStraight(e,t){const{out:i,inId:n,inShaping:o}=this._current,s=Math.ceil(e.angle*(180/Math.PI)%360),r=Math.ceil((e.angle*(180/Math.PI)+180)%360);this._outLineLabelAngle=z(s),this._writeGlyphs(i,n,e,o,t),this._outLineLabelAngle=z(r),this._writeGlyphs(i,n,e,o,t)}_placeCurved(e,t,i){const{out:n,inId:o}=this._current;n.metricStart(o,t,e.x,e.y,0,0,0,0);const s=e.clone(),r=e.angle*(180/Math.PI)%360,a=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=z(r),this._placeFirst(s,t,1),this._placeBack(e,s,t,i,1),this._placeForward(e,s,t,i,1),this._outLineLabelAngle=z(a),this._placeFirst(s,t,0),this._placeBack(e,s,t,i,0),this._placeForward(e,s,t,i,0),n.metricEnd()}_placeStraightAlong(e,t){const{out:i,inId:n}=this._current;i.metricStart(n,t,e.x,e.y,0,0,0,0);const o=e.clone(),s=e.angle*(180/Math.PI)%360,r=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=z(s),this._placeFirst(o,t,1,!0),this._outLineLabelAngle=z(r),this._placeFirst(o,t,0,!0),i.metricEnd()}_placeBack(e,t,i,n,o){const s=e.clone();let r=e.backwardLength+P;for(;s.prev()&&!(r>=n);)this._placeOnSegment(s,t,r,i,-1,o),r+=s.length+P}_placeForward(e,t,i,n,o){const s=e.clone();let r=e.remainingLength+P;for(;s.next()&&!(r>=n);)this._placeOnSegment(s,t,r,i,1,o),r+=s.length+P}_placeFirst(e,t,i,n=!1){const o=e,s=this._current.inShaping,r=s.glyphs,a=this._current.zoomLevel,{out:l,inId:h}=this._current;for(const c of r){const r=c.x>s.bounds.x?i:1-i,m=r*e.remainingLength+(1-r)*e.backwardLength,_=Math.abs(c.x+c.width/2-s.bounds.x),f=Math.max(0,a+Math.log2(_/(m+P))),g=Math.max(t,n?0:f);if(c.maxZoom=S,c.angle=e.angle+(1-i)*Math.PI,c.minZoom=g,this._writeGlyph(l,h,o.x,o.y,c),i&&this._isVisible(c.minZoom,c.maxZoom)){const e=c.bounds;l.metricBoxWrite(e.center[0],e.center[1],e.width,e.height)}}}_placeOnSegment(e,t,i,n,o,s){const r=this._current.inShaping.glyphs,{out:a,inId:l}=this._current,h=this._current.inShaping,c=this._current.zoomLevel,m=e.dx/e.length,_=e.dy/e.length,f={x:e.x+i*-o*m,y:e.y+i*-o*_};for(const g of r){const r=g.x>h.bounds.x?s:1-s;if(!(r&&1===o||!r&&-1===o))continue;const m=Math.abs(g.x+g.width/2-h.bounds.x),_=Math.max(0,c+Math.log2(m/i)-.1),p=Math.max(n,c+Math.log2(m/(i+e.length+P)));if(0!==_&&(g.angle=e.angle+(1-s)*Math.PI,g.minZoom=p,g.maxZoom=_,this._writeGlyph(a,l,f.x,f.y,g),s&&this._isVisible(g.minZoom,g.maxZoom))){const i=g.bounds,n=e.x-t.x,o=e.y-t.y;a.metricBoxWrite(i.center[0]+n,i.center[1]+o,i.width,i.height)}}}_writeGlyphs(e,t,i,n,o=this._minZoom){if(i.x<0||i.x>=512||i.y<0||i.y>=512)return;const s=i.x+this._refOffsetX,r=i.y-this._refOffsetY;for(const c of n.glyphs)c.minZoom=o,c.maxZoom=this._maxZoom,this._writeGlyph(e,t,s,r,c);const a=this._refPlacementDirX,l=this._refPlacementDirY,h=n.boundsT;e.metricStart(t,o,s,r,a,l,this._referenceSize,this._materialKey),e.metricBoxWrite(h.center[0],h.center[1],h.width,h.height),e.metricEnd()}_writeVertexCommon(e,t,i,n){const o=this._color,s=this._haloColor,r=g(0,0,this._size,this._haloSize),a=Math.max(n.minZoom,this._minZoom),l=Math.min(n.maxZoom,this._maxZoom),h=g(O(a),O(l),this._outLineLabelAngle,0);e.vertexWrite(i),e.vertexWrite(t),e.vertexWrite(o),e.vertexWrite(s),e.vertexWrite(r),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(h)}}export{G as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}