{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../Graphic.js\";\nimport t from \"../../../core/Collection.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as h } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { LayerView2DMixin as r } from \"./LayerView2D.js\";\nimport a from \"./graphics/GraphicContainer.js\";\nimport p from \"./graphics/GraphicsView2D.js\";\nimport o from \"../../layers/LayerView.js\";\nconst g = {\n  remove() {},\n\n  pause() {},\n\n  resume() {}\n\n};\nlet c = class extends r(o) {\n  constructor() {\n    super(...arguments), this._highlightIds = new Map();\n  }\n\n  attach() {\n    this.graphicsView = new p({\n      requestUpdateCallback: () => this.requestUpdate(),\n      view: this.view,\n      graphics: this.layer.graphics,\n      container: new a(this.view.featuresTilingScheme)\n    }), this._updateHighlight(), this.container.addChild(this.graphicsView.container), this.handles.add(this.layer.on(\"graphic-update\", this.graphicsView.graphicUpdateHandler), \"graphicslayerview2d\");\n  }\n\n  detach() {\n    this.container.removeAllChildren(), this.graphicsView.destroy(), this.graphicsView = null, this.handles.remove(\"graphicslayerview2d\");\n  }\n\n  async hitTest(i) {\n    return this.graphicsView ? this.graphicsView.hitTest(i).map(e => ({\n      type: \"graphic\",\n      graphic: e,\n      mapPoint: i,\n      layer: this.layer\n    })) : null;\n  }\n\n  async fetchPopupFeatures(i) {\n    if (this.graphicsView) return this.graphicsView.hitTest(i).filter(i => !!i.popupTemplate);\n  }\n\n  queryGraphics() {\n    return Promise.resolve(this.graphicsView.graphics);\n  }\n\n  update(i) {\n    this.graphicsView.processUpdate(i);\n  }\n\n  moveStart() {}\n\n  viewChange() {\n    this.graphicsView.viewChange();\n  }\n\n  moveEnd() {}\n\n  isUpdating() {\n    return !this.graphicsView || this.graphicsView.updating;\n  }\n\n  highlight(i) {\n    let s;\n    return \"number\" == typeof i ? s = [i] : i instanceof e ? s = [i.uid] : Array.isArray(i) && i.length > 0 ? s = \"number\" == typeof i[0] ? i : i.map(i => i && i.uid) : t.isCollection(i) && i.length > 0 && (s = i.map(i => i && i.uid).toArray()), s = s?.filter(i => null != i), s.length ? (this._addHighlight(s), {\n      remove: () => this._removeHighlight(s)\n    }) : g;\n  }\n\n  _addHighlight(i) {\n    for (const e of i) if (this._highlightIds.has(e)) {\n      const i = this._highlightIds.get(e);\n\n      this._highlightIds.set(e, i + 1);\n    } else this._highlightIds.set(e, 1);\n\n    this._updateHighlight();\n  }\n\n  _removeHighlight(i) {\n    for (const e of i) if (this._highlightIds.has(e)) {\n      const i = this._highlightIds.get(e) - 1;\n      0 === i ? this._highlightIds.delete(e) : this._highlightIds.set(e, i);\n    }\n\n    this._updateHighlight();\n  }\n\n  _updateHighlight() {\n    this.graphicsView?.setHighlight(Array.from(this._highlightIds.keys()));\n  }\n\n};\ni([s()], c.prototype, \"graphicsView\", void 0), c = i([h(\"esri.views.2d.layers.GraphicsLayerView2D\")], c);\nconst l = c;\nexport { l as default };","map":{"version":3,"names":["_","i","e","t","property","s","subclass","h","LayerView2DMixin","r","a","p","o","g","remove","pause","resume","c","constructor","arguments","_highlightIds","Map","attach","graphicsView","requestUpdateCallback","requestUpdate","view","graphics","layer","container","featuresTilingScheme","_updateHighlight","addChild","handles","add","on","graphicUpdateHandler","detach","removeAllChildren","destroy","hitTest","map","type","graphic","mapPoint","fetchPopupFeatures","filter","popupTemplate","queryGraphics","Promise","resolve","update","processUpdate","moveStart","viewChange","moveEnd","isUpdating","updating","highlight","uid","Array","isArray","length","isCollection","toArray","_addHighlight","_removeHighlight","has","get","set","delete","setHighlight","from","keys","prototype","l","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/GraphicsLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import e from\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as r}from\"./LayerView2D.js\";import a from\"./graphics/GraphicContainer.js\";import p from\"./graphics/GraphicsView2D.js\";import o from\"../../layers/LayerView.js\";const g={remove(){},pause(){},resume(){}};let c=class extends(r(o)){constructor(){super(...arguments),this._highlightIds=new Map}attach(){this.graphicsView=new p({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new a(this.view.featuresTilingScheme)}),this._updateHighlight(),this.container.addChild(this.graphicsView.container),this.handles.add(this.layer.on(\"graphic-update\",this.graphicsView.graphicUpdateHandler),\"graphicslayerview2d\")}detach(){this.container.removeAllChildren(),this.graphicsView.destroy(),this.graphicsView=null,this.handles.remove(\"graphicslayerview2d\")}async hitTest(i){return this.graphicsView?this.graphicsView.hitTest(i).map((e=>({type:\"graphic\",graphic:e,mapPoint:i,layer:this.layer}))):null}async fetchPopupFeatures(i){if(this.graphicsView)return this.graphicsView.hitTest(i).filter((i=>!!i.popupTemplate))}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(i){this.graphicsView.processUpdate(i)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(i){let s;return\"number\"==typeof i?s=[i]:i instanceof e?s=[i.uid]:Array.isArray(i)&&i.length>0?s=\"number\"==typeof i[0]?i:i.map((i=>i&&i.uid)):t.isCollection(i)&&i.length>0&&(s=i.map((i=>i&&i.uid)).toArray()),s=s?.filter((i=>null!=i)),s.length?(this._addHighlight(s),{remove:()=>this._removeHighlight(s)}):g}_addHighlight(i){for(const e of i)if(this._highlightIds.has(e)){const i=this._highlightIds.get(e);this._highlightIds.set(e,i+1)}else this._highlightIds.set(e,1);this._updateHighlight()}_removeHighlight(i){for(const e of i)if(this._highlightIds.has(e)){const i=this._highlightIds.get(e)-1;0===i?this._highlightIds.delete(e):this._highlightIds.set(e,i)}this._updateHighlight()}_updateHighlight(){this.graphicsView?.setHighlight(Array.from(this._highlightIds.keys()))}};i([s()],c.prototype,\"graphicsView\",void 0),c=i([h(\"esri.views.2d.layers.GraphicsLayerView2D\")],c);const l=c;export{l as default};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,qBAAb;AAAmC,OAAOC,CAAP,MAAa,6BAAb;AAA2C,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,6BAAN;AAAoC,OAAM,6CAAN;AAAoD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,kBAAjC;AAAoD,OAAOC,CAAP,MAAa,gCAAb;AAA8C,OAAOC,CAAP,MAAa,8BAAb;AAA4C,OAAOC,CAAP,MAAa,2BAAb;AAAyC,MAAMC,CAAC,GAAC;EAACC,MAAM,GAAE,CAAE,CAAX;;EAAYC,KAAK,GAAE,CAAE,CAArB;;EAAsBC,MAAM,GAAE,CAAE;;AAAhC,CAAR;AAA0C,IAAIC,CAAC,GAAC,cAAcR,CAAC,CAACG,CAAD,CAAf,CAAmB;EAACM,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,aAAL,GAAmB,IAAIC,GAAJ,EAAvC;EAA+C;;EAAAC,MAAM,GAAE;IAAC,KAAKC,YAAL,GAAkB,IAAIZ,CAAJ,CAAM;MAACa,qBAAqB,EAAC,MAAI,KAAKC,aAAL,EAA3B;MAAgDC,IAAI,EAAC,KAAKA,IAA1D;MAA+DC,QAAQ,EAAC,KAAKC,KAAL,CAAWD,QAAnF;MAA4FE,SAAS,EAAC,IAAInB,CAAJ,CAAM,KAAKgB,IAAL,CAAUI,oBAAhB;IAAtG,CAAN,CAAlB,EAAsK,KAAKC,gBAAL,EAAtK,EAA8L,KAAKF,SAAL,CAAeG,QAAf,CAAwB,KAAKT,YAAL,CAAkBM,SAA1C,CAA9L,EAAmP,KAAKI,OAAL,CAAaC,GAAb,CAAiB,KAAKN,KAAL,CAAWO,EAAX,CAAc,gBAAd,EAA+B,KAAKZ,YAAL,CAAkBa,oBAAjD,CAAjB,EAAwF,qBAAxF,CAAnP;EAAkW;;EAAAC,MAAM,GAAE;IAAC,KAAKR,SAAL,CAAeS,iBAAf,IAAmC,KAAKf,YAAL,CAAkBgB,OAAlB,EAAnC,EAA+D,KAAKhB,YAAL,GAAkB,IAAjF,EAAsF,KAAKU,OAAL,CAAanB,MAAb,CAAoB,qBAApB,CAAtF;EAAiI;;EAAa,MAAP0B,OAAO,CAACvC,CAAD,EAAG;IAAC,OAAO,KAAKsB,YAAL,GAAkB,KAAKA,YAAL,CAAkBiB,OAAlB,CAA0BvC,CAA1B,EAA6BwC,GAA7B,CAAkCvC,CAAC,KAAG;MAACwC,IAAI,EAAC,SAAN;MAAgBC,OAAO,EAACzC,CAAxB;MAA0B0C,QAAQ,EAAC3C,CAAnC;MAAqC2B,KAAK,EAAC,KAAKA;IAAhD,CAAH,CAAnC,CAAlB,GAAkH,IAAzH;EAA8H;;EAAwB,MAAlBiB,kBAAkB,CAAC5C,CAAD,EAAG;IAAC,IAAG,KAAKsB,YAAR,EAAqB,OAAO,KAAKA,YAAL,CAAkBiB,OAAlB,CAA0BvC,CAA1B,EAA6B6C,MAA7B,CAAqC7C,CAAC,IAAE,CAAC,CAACA,CAAC,CAAC8C,aAA5C,CAAP;EAAmE;;EAAAC,aAAa,GAAE;IAAC,OAAOC,OAAO,CAACC,OAAR,CAAgB,KAAK3B,YAAL,CAAkBI,QAAlC,CAAP;EAAmD;;EAAAwB,MAAM,CAAClD,CAAD,EAAG;IAAC,KAAKsB,YAAL,CAAkB6B,aAAlB,CAAgCnD,CAAhC;EAAmC;;EAAAoD,SAAS,GAAE,CAAE;;EAAAC,UAAU,GAAE;IAAC,KAAK/B,YAAL,CAAkB+B,UAAlB;EAA+B;;EAAAC,OAAO,GAAE,CAAE;;EAAAC,UAAU,GAAE;IAAC,OAAM,CAAC,KAAKjC,YAAN,IAAoB,KAAKA,YAAL,CAAkBkC,QAA5C;EAAqD;;EAAAC,SAAS,CAACzD,CAAD,EAAG;IAAC,IAAII,CAAJ;IAAM,OAAM,YAAU,OAAOJ,CAAjB,GAAmBI,CAAC,GAAC,CAACJ,CAAD,CAArB,GAAyBA,CAAC,YAAYC,CAAb,GAAeG,CAAC,GAAC,CAACJ,CAAC,CAAC0D,GAAH,CAAjB,GAAyBC,KAAK,CAACC,OAAN,CAAc5D,CAAd,KAAkBA,CAAC,CAAC6D,MAAF,GAAS,CAA3B,GAA6BzD,CAAC,GAAC,YAAU,OAAOJ,CAAC,CAAC,CAAD,CAAlB,GAAsBA,CAAtB,GAAwBA,CAAC,CAACwC,GAAF,CAAOxC,CAAC,IAAEA,CAAC,IAAEA,CAAC,CAAC0D,GAAf,CAAvD,GAA4ExD,CAAC,CAAC4D,YAAF,CAAe9D,CAAf,KAAmBA,CAAC,CAAC6D,MAAF,GAAS,CAA5B,KAAgCzD,CAAC,GAACJ,CAAC,CAACwC,GAAF,CAAOxC,CAAC,IAAEA,CAAC,IAAEA,CAAC,CAAC0D,GAAf,EAAqBK,OAArB,EAAlC,CAA9H,EAAgM3D,CAAC,GAACA,CAAC,EAAEyC,MAAH,CAAW7C,CAAC,IAAE,QAAMA,CAApB,CAAlM,EAA0NI,CAAC,CAACyD,MAAF,IAAU,KAAKG,aAAL,CAAmB5D,CAAnB,GAAsB;MAACS,MAAM,EAAC,MAAI,KAAKoD,gBAAL,CAAsB7D,CAAtB;IAAZ,CAAhC,IAAuEQ,CAAvS;EAAyS;;EAAAoD,aAAa,CAAChE,CAAD,EAAG;IAAC,KAAI,MAAMC,CAAV,IAAeD,CAAf,EAAiB,IAAG,KAAKmB,aAAL,CAAmB+C,GAAnB,CAAuBjE,CAAvB,CAAH,EAA6B;MAAC,MAAMD,CAAC,GAAC,KAAKmB,aAAL,CAAmBgD,GAAnB,CAAuBlE,CAAvB,CAAR;;MAAkC,KAAKkB,aAAL,CAAmBiD,GAAnB,CAAuBnE,CAAvB,EAAyBD,CAAC,GAAC,CAA3B;IAA8B,CAA9F,MAAmG,KAAKmB,aAAL,CAAmBiD,GAAnB,CAAuBnE,CAAvB,EAAyB,CAAzB;;IAA4B,KAAK6B,gBAAL;EAAwB;;EAAAmC,gBAAgB,CAACjE,CAAD,EAAG;IAAC,KAAI,MAAMC,CAAV,IAAeD,CAAf,EAAiB,IAAG,KAAKmB,aAAL,CAAmB+C,GAAnB,CAAuBjE,CAAvB,CAAH,EAA6B;MAAC,MAAMD,CAAC,GAAC,KAAKmB,aAAL,CAAmBgD,GAAnB,CAAuBlE,CAAvB,IAA0B,CAAlC;MAAoC,MAAID,CAAJ,GAAM,KAAKmB,aAAL,CAAmBkD,MAAnB,CAA0BpE,CAA1B,CAAN,GAAmC,KAAKkB,aAAL,CAAmBiD,GAAnB,CAAuBnE,CAAvB,EAAyBD,CAAzB,CAAnC;IAA+D;;IAAA,KAAK8B,gBAAL;EAAwB;;EAAAA,gBAAgB,GAAE;IAAC,KAAKR,YAAL,EAAmBgD,YAAnB,CAAgCX,KAAK,CAACY,IAAN,CAAW,KAAKpD,aAAL,CAAmBqD,IAAnB,EAAX,CAAhC;EAAuE;;AAAzzD,CAAzB;AAAo1DxE,CAAC,CAAC,CAACI,CAAC,EAAF,CAAD,EAAOY,CAAC,CAACyD,SAAT,EAAmB,cAAnB,EAAkC,KAAK,CAAvC,CAAD,EAA2CzD,CAAC,GAAChB,CAAC,CAAC,CAACM,CAAC,CAAC,0CAAD,CAAF,CAAD,EAAiDU,CAAjD,CAA9C;AAAkG,MAAM0D,CAAC,GAAC1D,CAAR;AAAU,SAAO0D,CAAC,IAAIC,OAAZ"},"metadata":{},"sourceType":"module"}