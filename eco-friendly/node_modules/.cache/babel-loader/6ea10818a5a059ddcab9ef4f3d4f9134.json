{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../../core/HandleOwner.js\";\nimport { property as r } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as s } from \"../../../../../chunks/vec3f64.js\";\nimport { WorkerHandle as i } from \"../../../../../core/workers/WorkerHandle.js\";\nimport { f as n } from \"../../../../../chunks/sphere.js\";\nimport { absoluteHeightElevationInfo as a } from \"../../../../../support/elevationInfoUtils.js\";\nimport { EdgeSnappingCandidate as d } from \"../../candidates/EdgeSnappingCandidate.js\";\nimport { VertexSnappingCandidate as c } from \"../../candidates/VertexSnappingCandidate.js\";\nlet p = class extends t {\n  constructor(e) {\n    super(e), this.availability = 0, this._ids = new Set(), this.tmpP = s();\n  }\n\n  destroy() {\n    this.workerHandle.destroy(), this.workerHandle = null;\n  }\n\n  initialize() {\n    this.workerHandle = new l(this.schedule, {\n      fetchAllEdgeLocations: (e, t) => this._fetchAllEdgeLocations(e, t)\n    });\n  }\n\n  async fetchCandidates(e, t) {\n    const r = e.coordinateHelper.toXYZ(e.point);\n    this.view.renderCoordsHelper.toRenderCoords(r, e.coordinateHelper.spatialReference, r);\n    const o = \"number\" == typeof e.distance ? e.distance : e.distance.pixelSize,\n          s = await this.workerHandle.invoke({\n      bounds: n(r[0], r[1], r[2], o),\n      types: e.types\n    }, t),\n          i = e.coordinateHelper;\n    return s.candidates.sort((e, t) => e.distance - t.distance), s.candidates.map(e => this._convertCandidate(i, e));\n  }\n\n  async add(e, t) {\n    this._ids.add(e.id), await this.workerHandle.invokeMethod(\"add\", e, t);\n  }\n\n  async remove(e, t) {\n    this._ids.delete(e.id), await this.workerHandle.invokeMethod(\"remove\", e, t);\n  }\n\n  _convertCandidate(e, t) {\n    switch (t.type) {\n      case \"edge\":\n        return new d({\n          coordinateHelper: e,\n          objectId: t.objectId,\n          targetPoint: this._convertRenderCoordinate(e, t.target),\n          edgeStart: this._convertRenderCoordinate(e, t.start),\n          edgeEnd: this._convertRenderCoordinate(e, t.end),\n          elevationInfo: a\n        });\n\n      case \"vertex\":\n        return new c({\n          coordinateHelper: e,\n          objectId: t.objectId,\n          targetPoint: this._convertRenderCoordinate(e, t.target),\n          elevationInfo: a\n        });\n    }\n  }\n\n  _convertRenderCoordinate(e, t) {\n    return this.view.renderCoordsHelper.fromRenderCoords(t, this.tmpP, e.spatialReference), e.fromXYZ(this.tmpP);\n  }\n\n  async _fetchAllEdgeLocations(e, t) {\n    const r = [],\n          o = [];\n\n    for (const {\n      id: s,\n      uid: i\n    } of e.components) this._ids.has(s) && r.push((async () => {\n      const e = await this.fetchEdgeLocations(s, t.signal);\n      return o.push(e.locations.buffer), {\n        id: s,\n        uid: i,\n        objectIds: e.objectIds,\n        locations: e.locations.buffer,\n        origin: e.origin,\n        type: e.type\n      };\n    })());\n\n    return {\n      result: {\n        components: (await Promise.all(r)).filter(({\n          id: e\n        }) => this._ids.has(e))\n      },\n      transferList: o\n    };\n  }\n\n};\ne([r({\n  constructOnly: !0\n})], p.prototype, \"view\", void 0), e([r({\n  constructOnly: !0\n})], p.prototype, \"fetchEdgeLocations\", void 0), e([r({\n  constructOnly: !0\n})], p.prototype, \"schedule\", void 0), e([r({\n  readOnly: !0\n})], p.prototype, \"availability\", void 0), p = e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")], p);\n\nclass l extends i {\n  constructor(e, t) {\n    super(\"SceneLayerSnappingSourceWorker\", \"fetchCandidates\", {}, e, {\n      strategy: \"dedicated\",\n      client: t\n    });\n  }\n\n}\n\nexport { p as SceneLayerSnappingSourceWorkerHandle };","map":{"version":3,"names":["_","e","HandleOwner","t","property","r","subclass","o","c","s","WorkerHandle","i","f","n","absoluteHeightElevationInfo","a","EdgeSnappingCandidate","d","VertexSnappingCandidate","p","constructor","availability","_ids","Set","tmpP","destroy","workerHandle","initialize","l","schedule","fetchAllEdgeLocations","_fetchAllEdgeLocations","fetchCandidates","coordinateHelper","toXYZ","point","view","renderCoordsHelper","toRenderCoords","spatialReference","distance","pixelSize","invoke","bounds","types","candidates","sort","map","_convertCandidate","add","id","invokeMethod","remove","delete","type","objectId","targetPoint","_convertRenderCoordinate","target","edgeStart","start","edgeEnd","end","elevationInfo","fromRenderCoords","fromXYZ","uid","components","has","push","fetchEdgeLocations","signal","locations","buffer","objectIds","origin","result","Promise","all","filter","transferList","constructOnly","prototype","readOnly","strategy","client","SceneLayerSnappingSourceWorkerHandle"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorkerHandle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as s}from\"../../../../../chunks/vec3f64.js\";import{WorkerHandle as i}from\"../../../../../core/workers/WorkerHandle.js\";import{f as n}from\"../../../../../chunks/sphere.js\";import{absoluteHeightElevationInfo as a}from\"../../../../../support/elevationInfoUtils.js\";import{EdgeSnappingCandidate as d}from\"../../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as c}from\"../../candidates/VertexSnappingCandidate.js\";let p=class extends t{constructor(e){super(e),this.availability=0,this._ids=new Set,this.tmpP=s()}destroy(){this.workerHandle.destroy(),this.workerHandle=null}initialize(){this.workerHandle=new l(this.schedule,{fetchAllEdgeLocations:(e,t)=>this._fetchAllEdgeLocations(e,t)})}async fetchCandidates(e,t){const r=e.coordinateHelper.toXYZ(e.point);this.view.renderCoordsHelper.toRenderCoords(r,e.coordinateHelper.spatialReference,r);const o=\"number\"==typeof e.distance?e.distance:e.distance.pixelSize,s=await this.workerHandle.invoke({bounds:n(r[0],r[1],r[2],o),types:e.types},t),i=e.coordinateHelper;return s.candidates.sort(((e,t)=>e.distance-t.distance)),s.candidates.map((e=>this._convertCandidate(i,e)))}async add(e,t){this._ids.add(e.id),await this.workerHandle.invokeMethod(\"add\",e,t)}async remove(e,t){this._ids.delete(e.id),await this.workerHandle.invokeMethod(\"remove\",e,t)}_convertCandidate(e,t){switch(t.type){case\"edge\":return new d({coordinateHelper:e,objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),edgeStart:this._convertRenderCoordinate(e,t.start),edgeEnd:this._convertRenderCoordinate(e,t.end),elevationInfo:a});case\"vertex\":return new c({coordinateHelper:e,objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),elevationInfo:a})}}_convertRenderCoordinate(e,t){return this.view.renderCoordsHelper.fromRenderCoords(t,this.tmpP,e.spatialReference),e.fromXYZ(this.tmpP)}async _fetchAllEdgeLocations(e,t){const r=[],o=[];for(const{id:s,uid:i}of e.components)this._ids.has(s)&&r.push((async()=>{const e=await this.fetchEdgeLocations(s,t.signal);return o.push(e.locations.buffer),{id:s,uid:i,objectIds:e.objectIds,locations:e.locations.buffer,origin:e.origin,type:e.type}})());return{result:{components:(await Promise.all(r)).filter((({id:e})=>this._ids.has(e)))},transferList:o}}};e([r({constructOnly:!0})],p.prototype,\"view\",void 0),e([r({constructOnly:!0})],p.prototype,\"fetchEdgeLocations\",void 0),e([r({constructOnly:!0})],p.prototype,\"schedule\",void 0),e([r({readOnly:!0})],p.prototype,\"availability\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],p);class l extends i{constructor(e,t){super(\"SceneLayerSnappingSourceWorker\",\"fetchCandidates\",{},e,{strategy:\"dedicated\",client:t})}}export{p as SceneLayerSnappingSourceWorkerHandle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}