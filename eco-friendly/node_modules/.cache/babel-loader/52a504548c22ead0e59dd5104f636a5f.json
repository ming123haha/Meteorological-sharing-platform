{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { nextHighestPowerOfTwo as e } from \"../../../core/mathUtils.js\";\nimport { create as t, offset as r, copy as s } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { RenderTargetType as i, OverlayIndex as a } from \"./interfaces.js\";\nimport { ValidationState as o } from \"../webgl-engine/lib/basicInterfaces.js\";\nimport { fromValues as n } from \"../webgl-engine/lib/LocalOriginFactory.js\";\nvar h;\n!function (e) {\n  e[e.None = 0] = \"None\", e[e.ColorAndWater = 1] = \"ColorAndWater\", e[e.Highlight = 2] = \"Highlight\", e[e.Occluded = 3] = \"Occluded\";\n}(h || (h = {}));\n\nclass l {\n  constructor(e, r) {\n    this.index = e, this.renderTargets = r, this._extent = t(), this.resolution = 0, this.renderLocalOrigin = n(0, 0, 0, \"O\"), this.pixelRatio = 1, this.mapUnitsPerPixel = 1, this.canvasGeometries = new u(), this.validTargets = null, this.hasDrapedFeatureSource = !1, this.hasDrapedRasterSource = !1, this.hasTargetWithoutRasterImage = !1, this.index = e, this.validTargets = new Array(r.renderTargets.length).fill(!1);\n  }\n\n  get extent() {\n    return this._extent;\n  }\n\n  getValidTexture(e) {\n    return this.validTargets[e] ? this.renderTargets.getTarget(e).getTexture() : null;\n  }\n\n  get _needsColorWithoutRasterImage() {\n    return this.hasDrapedRasterSource && this.hasDrapedFeatureSource && this.hasTargetWithoutRasterImage;\n  }\n\n  getColorTexture(e) {\n    const t = e === h.ColorAndWater ? this.renderTargets.getTarget(i.Color) : e === h.Highlight ? this.renderTargets.getTarget(i.Highlight) : this.renderTargets.getTarget(i.Occluded);\n    return t ? t.getTexture() : null;\n  }\n\n  getColorTextureNoRasterImage() {\n    return this._needsColorWithoutRasterImage ? this.getValidTexture(i.ColorNoRasterImage) : this.hasDrapedFeatureSource ? this.getValidTexture(i.Color) : null;\n  }\n\n  getNormalTexture(e) {\n    const t = e === h.ColorAndWater ? this.renderTargets.getTarget(i.Water) : null;\n    return t ? t.getTexture() : null;\n  }\n\n  draw(e, t) {\n    const r = this.computeRenderTargetValidityBitfield();\n\n    for (const s of this.renderTargets.renderTargets) s.type !== i.ColorNoRasterImage || this._needsColorWithoutRasterImage ? this.validTargets[s.type] = e.drawTarget(this, s, t) : this.validTargets[s.type] = !1;\n\n    return r ^ this.computeRenderTargetValidityBitfield() ? o.CHANGED : o.UNCHANGED;\n  }\n\n  computeRenderTargetValidityBitfield() {\n    const e = this.validTargets;\n    return +e[i.Color] | +e[i.ColorNoRasterImage] << 1 | +e[i.Highlight] << 2 | +e[i.Water] << 3 | +e[i.Occluded] << 4;\n  }\n\n  setupGeometryViewsCyclical(e) {\n    this.setupGeometryViewsDirect();\n    const t = .001 * e.range;\n\n    if (this._extent[0] - t <= e.min) {\n      const t = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      r(this._extent, e.range, 0, t);\n    }\n\n    if (this._extent[2] + t >= e.max) {\n      const t = this.canvasGeometries.extents[this.canvasGeometries.numViews++];\n      r(this._extent, -e.range, 0, t);\n    }\n  }\n\n  setupGeometryViewsDirect() {\n    this.canvasGeometries.numViews = 1, s(this.canvasGeometries.extents[0], this._extent);\n  }\n\n  hasSomeSizedView() {\n    for (let e = 0; e < this.canvasGeometries.numViews; e++) {\n      const t = this.canvasGeometries.extents[e];\n      if (t[0] !== t[2] && t[1] !== t[3]) return !0;\n    }\n\n    return !1;\n  }\n\n  applyViewport(e) {\n    e.setViewport(this.index === a.INNER ? 0 : this.resolution, 0, this.resolution, this.resolution);\n  }\n\n}\n\nfunction g(t, r, s) {\n  return Math.min(e(Math.max(t, r) + 256), s);\n}\n\nclass u {\n  constructor() {\n    this.extents = [t(), t(), t()], this.numViews = 0;\n  }\n\n}\n\nexport { l as Overlay, h as OverlaySource, g as computeOverlayResolution };","map":{"version":3,"names":["nextHighestPowerOfTwo","e","create","t","offset","r","copy","s","RenderTargetType","i","OverlayIndex","a","ValidationState","o","fromValues","n","h","None","ColorAndWater","Highlight","Occluded","l","constructor","index","renderTargets","_extent","resolution","renderLocalOrigin","pixelRatio","mapUnitsPerPixel","canvasGeometries","u","validTargets","hasDrapedFeatureSource","hasDrapedRasterSource","hasTargetWithoutRasterImage","Array","length","fill","extent","getValidTexture","getTarget","getTexture","_needsColorWithoutRasterImage","getColorTexture","Color","getColorTextureNoRasterImage","ColorNoRasterImage","getNormalTexture","Water","draw","computeRenderTargetValidityBitfield","type","drawTarget","CHANGED","UNCHANGED","setupGeometryViewsCyclical","setupGeometryViewsDirect","range","min","extents","numViews","max","hasSomeSizedView","applyViewport","setViewport","INNER","g","Math","Overlay","OverlaySource","computeOverlayResolution"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/Overlay.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as e}from\"../../../core/mathUtils.js\";import{create as t,offset as r,copy as s}from\"../../../geometry/support/aaBoundingRect.js\";import{RenderTargetType as i,OverlayIndex as a}from\"./interfaces.js\";import{ValidationState as o}from\"../webgl-engine/lib/basicInterfaces.js\";import{fromValues as n}from\"../webgl-engine/lib/LocalOriginFactory.js\";var h;!function(e){e[e.None=0]=\"None\",e[e.ColorAndWater=1]=\"ColorAndWater\",e[e.Highlight=2]=\"Highlight\",e[e.Occluded=3]=\"Occluded\"}(h||(h={}));class l{constructor(e,r){this.index=e,this.renderTargets=r,this._extent=t(),this.resolution=0,this.renderLocalOrigin=n(0,0,0,\"O\"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new u,this.validTargets=null,this.hasDrapedFeatureSource=!1,this.hasDrapedRasterSource=!1,this.hasTargetWithoutRasterImage=!1,this.index=e,this.validTargets=new Array(r.renderTargets.length).fill(!1)}get extent(){return this._extent}getValidTexture(e){return this.validTargets[e]?this.renderTargets.getTarget(e).getTexture():null}get _needsColorWithoutRasterImage(){return this.hasDrapedRasterSource&&this.hasDrapedFeatureSource&&this.hasTargetWithoutRasterImage}getColorTexture(e){const t=e===h.ColorAndWater?this.renderTargets.getTarget(i.Color):e===h.Highlight?this.renderTargets.getTarget(i.Highlight):this.renderTargets.getTarget(i.Occluded);return t?t.getTexture():null}getColorTextureNoRasterImage(){return this._needsColorWithoutRasterImage?this.getValidTexture(i.ColorNoRasterImage):this.hasDrapedFeatureSource?this.getValidTexture(i.Color):null}getNormalTexture(e){const t=e===h.ColorAndWater?this.renderTargets.getTarget(i.Water):null;return t?t.getTexture():null}draw(e,t){const r=this.computeRenderTargetValidityBitfield();for(const s of this.renderTargets.renderTargets)s.type!==i.ColorNoRasterImage||this._needsColorWithoutRasterImage?this.validTargets[s.type]=e.drawTarget(this,s,t):this.validTargets[s.type]=!1;return r^this.computeRenderTargetValidityBitfield()?o.CHANGED:o.UNCHANGED}computeRenderTargetValidityBitfield(){const e=this.validTargets;return+e[i.Color]|+e[i.ColorNoRasterImage]<<1|+e[i.Highlight]<<2|+e[i.Water]<<3|+e[i.Occluded]<<4}setupGeometryViewsCyclical(e){this.setupGeometryViewsDirect();const t=.001*e.range;if(this._extent[0]-t<=e.min){const t=this.canvasGeometries.extents[this.canvasGeometries.numViews++];r(this._extent,e.range,0,t)}if(this._extent[2]+t>=e.max){const t=this.canvasGeometries.extents[this.canvasGeometries.numViews++];r(this._extent,-e.range,0,t)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,s(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}applyViewport(e){e.setViewport(this.index===a.INNER?0:this.resolution,0,this.resolution,this.resolution)}}function g(t,r,s){return Math.min(e(Math.max(t,r)+256),s)}class u{constructor(){this.extents=[t(),t(),t()],this.numViews=0}}export{l as Overlay,h as OverlaySource,g as computeOverlayResolution};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}