{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { id as t } from \"../../kernel.js\";\nimport e from \"../../request.js\";\nimport { toHSV as i, toRGB as r } from \"../../core/colorUtils.js\";\nimport n from \"../../core/Error.js\";\nimport has from \"../../core/has.js\";\nimport \"../../libs/maquette/projection.js\";\nimport { createProjector as o } from \"../../libs/maquette/projector.js\";\nimport { renderSVG as a } from \"./svgUtils.js\";\nimport { getCSSFilterFromEffectList as c } from \"./utils.js\";\nconst s = o();\n\nfunction h(t, e, i) {\n  const r = Math.ceil(e[0]),\n        n = Math.ceil(e[1]);\n  if (!t.some(t => !!t.length)) return null;\n  const o = i && i.node || document.createElement(\"div\");\n  return null != i.opacity && (o.style.opacity = i.opacity.toString()), null != i.effectView && (o.style.filter = c(i.effectView)), s.append(o, a.bind(null, t, r, n, i)), o;\n}\n\nfunction l(t, e) {\n  t = Math.ceil(t), e = Math.ceil(e);\n  const i = document.createElement(\"canvas\");\n  i.width = t, i.height = e, i.style.width = t + \"px\", i.style.height = e + \"px\";\n  const r = i.getContext(\"2d\");\n  return r.clearRect(0, 0, t, e), r;\n}\n\nfunction m(t, i, r) {\n  return t ? e(t, {\n    responseType: \"image\"\n  }).then(t => {\n    const e = t.data,\n          n = e.width,\n          o = e.height,\n          a = n / o;\n    let c = i;\n\n    if (r) {\n      const t = Math.max(n, o);\n      c = Math.min(c, t);\n    }\n\n    return {\n      image: e,\n      width: a <= 1 ? Math.ceil(c * a) : c,\n      height: a <= 1 ? c : Math.ceil(c / a)\n    };\n  }) : Promise.reject(new n(\"renderUtils: imageDataSize\", \"href not provided.\"));\n}\n\nfunction g(t, e) {\n  return !(!t || \"ignore\" === e) && (\"multiply\" !== e || 255 !== t.r || 255 !== t.g || 255 !== t.b || 1 !== t.a);\n}\n\nfunction u(t, e, n, o, a) {\n  switch (a) {\n    case \"multiply\":\n      t[e + 0] *= n[0], t[e + 1] *= n[1], t[e + 2] *= n[2], t[e + 3] *= n[3];\n      break;\n\n    default:\n      {\n        const a = i({\n          r: t[e + 0],\n          g: t[e + 1],\n          b: t[e + 2]\n        });\n        a.h = o.h, a.s = o.s, a.v = a.v / 100 * o.v;\n        const c = r(a);\n        t[e + 0] = c.r, t[e + 1] = c.g, t[e + 2] = c.b, t[e + 3] *= n[3];\n        break;\n      }\n  }\n}\n\nfunction d(e, r, n, o, a) {\n  return m(e, r, a).then(a => {\n    const c = a.width ? a.width : r,\n          s = a.height ? a.height : r;\n\n    if (a.image && g(n, o)) {\n      let t = a.image.width,\n          r = a.image.height;\n      has(\"edge\") && /\\.svg$/i.test(e) && (t -= 1, r -= 1);\n      const h = l(c, s);\n      h.drawImage(a.image, 0, 0, t, r, 0, 0, c, s);\n      const m = h.getImageData(0, 0, c, s),\n            g = [n.r / 255, n.g / 255, n.b / 255, n.a],\n            d = i(n);\n\n      for (let e = 0; e < m.data.length; e += 4) u(m.data, e, g, d, o);\n\n      h.putImageData(m, 0, 0), e = h.canvas.toDataURL(\"image/png\");\n    } else {\n      const i = t && t.findCredential(e);\n\n      if (i && i.token) {\n        const t = e.includes(\"?\") ? \"&\" : \"?\";\n        e = `${e}${t}token=${i.token}`;\n      }\n    }\n\n    return {\n      url: e,\n      width: c,\n      height: s\n    };\n  }).catch(() => ({\n    url: e,\n    width: r,\n    height: r\n  }));\n}\n\nexport { h as renderSymbol, d as tintImageWithColor };","map":{"version":3,"names":["id","t","e","toHSV","i","toRGB","r","n","has","createProjector","o","renderSVG","a","getCSSFilterFromEffectList","c","s","h","Math","ceil","some","length","node","document","createElement","opacity","style","toString","effectView","filter","append","bind","l","width","height","getContext","clearRect","m","responseType","then","data","max","min","image","Promise","reject","g","b","u","v","d","test","drawImage","getImageData","putImageData","canvas","toDataURL","findCredential","token","includes","url","catch","renderSymbol","tintImageWithColor"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/support/renderUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{id as t}from\"../../kernel.js\";import e from\"../../request.js\";import{toHSV as i,toRGB as r}from\"../../core/colorUtils.js\";import n from\"../../core/Error.js\";import has from\"../../core/has.js\";import\"../../libs/maquette/projection.js\";import{createProjector as o}from\"../../libs/maquette/projector.js\";import{renderSVG as a}from\"./svgUtils.js\";import{getCSSFilterFromEffectList as c}from\"./utils.js\";const s=o();function h(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some((t=>!!t.length)))return null;const o=i&&i.node||document.createElement(\"div\");return null!=i.opacity&&(o.style.opacity=i.opacity.toString()),null!=i.effectView&&(o.style.filter=c(i.effectView)),s.append(o,a.bind(null,t,r,n,i)),o}function l(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement(\"canvas\");i.width=t,i.height=e,i.style.width=t+\"px\",i.style.height=e+\"px\";const r=i.getContext(\"2d\");return r.clearRect(0,0,t,e),r}function m(t,i,r){return t?e(t,{responseType:\"image\"}).then((t=>{const e=t.data,n=e.width,o=e.height,a=n/o;let c=i;if(r){const t=Math.max(n,o);c=Math.min(c,t)}return{image:e,width:a<=1?Math.ceil(c*a):c,height:a<=1?c:Math.ceil(c/a)}})):Promise.reject(new n(\"renderUtils: imageDataSize\",\"href not provided.\"))}function g(t,e){return!(!t||\"ignore\"===e)&&(\"multiply\"!==e||255!==t.r||255!==t.g||255!==t.b||1!==t.a)}function u(t,e,n,o,a){switch(a){case\"multiply\":t[e+0]*=n[0],t[e+1]*=n[1],t[e+2]*=n[2],t[e+3]*=n[3];break;default:{const a=i({r:t[e+0],g:t[e+1],b:t[e+2]});a.h=o.h,a.s=o.s,a.v=a.v/100*o.v;const c=r(a);t[e+0]=c.r,t[e+1]=c.g,t[e+2]=c.b,t[e+3]*=n[3];break}}}function d(e,r,n,o,a){return m(e,r,a).then((a=>{const c=a.width?a.width:r,s=a.height?a.height:r;if(a.image&&g(n,o)){let t=a.image.width,r=a.image.height;has(\"edge\")&&/\\.svg$/i.test(e)&&(t-=1,r-=1);const h=l(c,s);h.drawImage(a.image,0,0,t,r,0,0,c,s);const m=h.getImageData(0,0,c,s),g=[n.r/255,n.g/255,n.b/255,n.a],d=i(n);for(let e=0;e<m.data.length;e+=4)u(m.data,e,g,d,o);h.putImageData(m,0,0),e=h.canvas.toDataURL(\"image/png\")}else{const i=t&&t.findCredential(e);if(i&&i.token){const t=e.includes(\"?\")?\"&\":\"?\";e=`${e}${t}token=${i.token}`}}return{url:e,width:c,height:s}})).catch((()=>({url:e,width:r,height:r})))}export{h as renderSymbol,d as tintImageWithColor};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}