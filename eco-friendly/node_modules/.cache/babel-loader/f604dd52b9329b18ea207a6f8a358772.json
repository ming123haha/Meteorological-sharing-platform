{"ast":null,"code":"/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}, // Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}]; // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","map":{"version":3,"names":["zrUtil","visualSolution","VisualMapping","getVisualFromData","visualMapEncodingHandlers","createOnAllSeries","reset","seriesModel","ecModel","resetDefines","eachComponent","visualMapModel","pipelineContext","isTargetSeries","large","push","incrementalApplyVisual","stateList","targetVisuals","bind","getValueState","getDataDimensionIndex","getData","data","visualMetaList","visualMeta","getVisualMeta","getColorVisual","stops","outerColors","dimIdx","dimension","setVisual","value","valueState","mappings","visualTypes","prepareVisualTypes","resultVisual","color","i","len","length","type","mapping","applyVisual","getVisual","key"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/echarts/lib/component/visualMap/visualEncoding.js"],"sourcesContent":["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport * as visualSolution from '../../visual/visualSolution.js';\r\nimport VisualMapping from '../../visual/VisualMapping.js';\r\nimport { getVisualFromData } from '../../visual/helper.js';\r\nexport var visualMapEncodingHandlers = [{\r\n  createOnAllSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    var resetDefines = [];\r\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\r\n      var pipelineContext = seriesModel.pipelineContext;\r\n\r\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\r\n        return;\r\n      }\r\n\r\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\r\n    });\r\n    return resetDefines;\r\n  }\r\n}, // Only support color.\r\n{\r\n  createOnAllSeries: true,\r\n  reset: function (seriesModel, ecModel) {\r\n    var data = seriesModel.getData();\r\n    var visualMetaList = [];\r\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\r\n      if (visualMapModel.isTargetSeries(seriesModel)) {\r\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\r\n          stops: [],\r\n          outerColors: []\r\n        };\r\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\r\n\r\n        if (dimIdx >= 0) {\r\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\r\n          visualMeta.dimension = dimIdx;\r\n          visualMetaList.push(visualMeta);\r\n        }\r\n      }\r\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\r\n\r\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\r\n  }\r\n}]; // FIXME\r\n// performance and export for heatmap?\r\n// value can be Infinity or -Infinity\r\n\r\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\r\n  var mappings = visualMapModel.targetVisuals[valueState];\r\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\r\n  var resultVisual = {\r\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\r\n\r\n  };\r\n\r\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\r\n    var type = visualTypes[i];\r\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\r\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\r\n  }\r\n\r\n  return resultVisual.color;\r\n\r\n  function getVisual(key) {\r\n    return resultVisual[key];\r\n  }\r\n\r\n  function setVisual(key, value) {\r\n    resultVisual[key] = value;\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}