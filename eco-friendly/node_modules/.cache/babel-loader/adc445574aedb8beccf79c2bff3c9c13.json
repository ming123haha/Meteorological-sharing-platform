{"ast":null,"code":"import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\n\nvar Clip = function () {\n  function Clip(opts) {\n    this._inited = false;\n    this._startTime = 0;\n    this._pausedTime = 0;\n    this._paused = false;\n    this._life = opts.life || 1000;\n    this._delay = opts.delay || 0;\n    this.loop = opts.loop || false;\n    this.onframe = opts.onframe || noop;\n    this.ondestroy = opts.ondestroy || noop;\n    this.onrestart = opts.onrestart || noop;\n    opts.easing && this.setEasing(opts.easing);\n  }\n\n  Clip.prototype.step = function (globalTime, deltaTime) {\n    if (!this._inited) {\n      this._startTime = globalTime + this._delay;\n      this._inited = true;\n    }\n\n    if (this._paused) {\n      this._pausedTime += deltaTime;\n      return;\n    }\n\n    var life = this._life;\n    var elapsedTime = globalTime - this._startTime - this._pausedTime;\n    var percent = elapsedTime / life;\n\n    if (percent < 0) {\n      percent = 0;\n    }\n\n    percent = Math.min(percent, 1);\n    var easingFunc = this.easingFunc;\n    var schedule = easingFunc ? easingFunc(percent) : percent;\n    this.onframe(schedule);\n\n    if (percent === 1) {\n      if (this.loop) {\n        var remainder = elapsedTime % life;\n        this._startTime = globalTime - remainder;\n        this._pausedTime = 0;\n        this.onrestart();\n      } else {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Clip.prototype.pause = function () {\n    this._paused = true;\n  };\n\n  Clip.prototype.resume = function () {\n    this._paused = false;\n  };\n\n  Clip.prototype.setEasing = function (easing) {\n    this.easing = easing;\n    this.easingFunc = isFunction(easing) ? easing : easingFuncs[easing] || createCubicEasingFunc(easing);\n  };\n\n  return Clip;\n}();\n\nexport default Clip;","map":{"version":3,"names":["easingFuncs","isFunction","noop","createCubicEasingFunc","Clip","opts","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","onframe","ondestroy","onrestart","easing","setEasing","prototype","step","globalTime","deltaTime","elapsedTime","percent","Math","min","easingFunc","schedule","remainder","pause","resume"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/zrender/lib/animation/Clip.js"],"sourcesContent":["import easingFuncs from './easing.js';\r\nimport { isFunction, noop } from '../core/util.js';\r\nimport { createCubicEasingFunc } from './cubicEasing.js';\r\nvar Clip = (function () {\r\n    function Clip(opts) {\r\n        this._inited = false;\r\n        this._startTime = 0;\r\n        this._pausedTime = 0;\r\n        this._paused = false;\r\n        this._life = opts.life || 1000;\r\n        this._delay = opts.delay || 0;\r\n        this.loop = opts.loop || false;\r\n        this.onframe = opts.onframe || noop;\r\n        this.ondestroy = opts.ondestroy || noop;\r\n        this.onrestart = opts.onrestart || noop;\r\n        opts.easing && this.setEasing(opts.easing);\r\n    }\r\n    Clip.prototype.step = function (globalTime, deltaTime) {\r\n        if (!this._inited) {\r\n            this._startTime = globalTime + this._delay;\r\n            this._inited = true;\r\n        }\r\n        if (this._paused) {\r\n            this._pausedTime += deltaTime;\r\n            return;\r\n        }\r\n        var life = this._life;\r\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\r\n        var percent = elapsedTime / life;\r\n        if (percent < 0) {\r\n            percent = 0;\r\n        }\r\n        percent = Math.min(percent, 1);\r\n        var easingFunc = this.easingFunc;\r\n        var schedule = easingFunc ? easingFunc(percent) : percent;\r\n        this.onframe(schedule);\r\n        if (percent === 1) {\r\n            if (this.loop) {\r\n                var remainder = elapsedTime % life;\r\n                this._startTime = globalTime - remainder;\r\n                this._pausedTime = 0;\r\n                this.onrestart();\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Clip.prototype.pause = function () {\r\n        this._paused = true;\r\n    };\r\n    Clip.prototype.resume = function () {\r\n        this._paused = false;\r\n    };\r\n    Clip.prototype.setEasing = function (easing) {\r\n        this.easing = easing;\r\n        this.easingFunc = isFunction(easing)\r\n            ? easing\r\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\r\n    };\r\n    return Clip;\r\n}());\r\nexport default Clip;\r\n"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,aAAxB;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,iBAAjC;AACA,SAASC,qBAAT,QAAsC,kBAAtC;;AACA,IAAIC,IAAI,GAAI,YAAY;EACpB,SAASA,IAAT,CAAcC,IAAd,EAAoB;IAChB,KAAKC,OAAL,GAAe,KAAf;IACA,KAAKC,UAAL,GAAkB,CAAlB;IACA,KAAKC,WAAL,GAAmB,CAAnB;IACA,KAAKC,OAAL,GAAe,KAAf;IACA,KAAKC,KAAL,GAAaL,IAAI,CAACM,IAAL,IAAa,IAA1B;IACA,KAAKC,MAAL,GAAcP,IAAI,CAACQ,KAAL,IAAc,CAA5B;IACA,KAAKC,IAAL,GAAYT,IAAI,CAACS,IAAL,IAAa,KAAzB;IACA,KAAKC,OAAL,GAAeV,IAAI,CAACU,OAAL,IAAgBb,IAA/B;IACA,KAAKc,SAAL,GAAiBX,IAAI,CAACW,SAAL,IAAkBd,IAAnC;IACA,KAAKe,SAAL,GAAiBZ,IAAI,CAACY,SAAL,IAAkBf,IAAnC;IACAG,IAAI,CAACa,MAAL,IAAe,KAAKC,SAAL,CAAed,IAAI,CAACa,MAApB,CAAf;EACH;;EACDd,IAAI,CAACgB,SAAL,CAAeC,IAAf,GAAsB,UAAUC,UAAV,EAAsBC,SAAtB,EAAiC;IACnD,IAAI,CAAC,KAAKjB,OAAV,EAAmB;MACf,KAAKC,UAAL,GAAkBe,UAAU,GAAG,KAAKV,MAApC;MACA,KAAKN,OAAL,GAAe,IAAf;IACH;;IACD,IAAI,KAAKG,OAAT,EAAkB;MACd,KAAKD,WAAL,IAAoBe,SAApB;MACA;IACH;;IACD,IAAIZ,IAAI,GAAG,KAAKD,KAAhB;IACA,IAAIc,WAAW,GAAGF,UAAU,GAAG,KAAKf,UAAlB,GAA+B,KAAKC,WAAtD;IACA,IAAIiB,OAAO,GAAGD,WAAW,GAAGb,IAA5B;;IACA,IAAIc,OAAO,GAAG,CAAd,EAAiB;MACbA,OAAO,GAAG,CAAV;IACH;;IACDA,OAAO,GAAGC,IAAI,CAACC,GAAL,CAASF,OAAT,EAAkB,CAAlB,CAAV;IACA,IAAIG,UAAU,GAAG,KAAKA,UAAtB;IACA,IAAIC,QAAQ,GAAGD,UAAU,GAAGA,UAAU,CAACH,OAAD,CAAb,GAAyBA,OAAlD;IACA,KAAKV,OAAL,CAAac,QAAb;;IACA,IAAIJ,OAAO,KAAK,CAAhB,EAAmB;MACf,IAAI,KAAKX,IAAT,EAAe;QACX,IAAIgB,SAAS,GAAGN,WAAW,GAAGb,IAA9B;QACA,KAAKJ,UAAL,GAAkBe,UAAU,GAAGQ,SAA/B;QACA,KAAKtB,WAAL,GAAmB,CAAnB;QACA,KAAKS,SAAL;MACH,CALD,MAMK;QACD,OAAO,IAAP;MACH;IACJ;;IACD,OAAO,KAAP;EACH,CA/BD;;EAgCAb,IAAI,CAACgB,SAAL,CAAeW,KAAf,GAAuB,YAAY;IAC/B,KAAKtB,OAAL,GAAe,IAAf;EACH,CAFD;;EAGAL,IAAI,CAACgB,SAAL,CAAeY,MAAf,GAAwB,YAAY;IAChC,KAAKvB,OAAL,GAAe,KAAf;EACH,CAFD;;EAGAL,IAAI,CAACgB,SAAL,CAAeD,SAAf,GAA2B,UAAUD,MAAV,EAAkB;IACzC,KAAKA,MAAL,GAAcA,MAAd;IACA,KAAKU,UAAL,GAAkB3B,UAAU,CAACiB,MAAD,CAAV,GACZA,MADY,GAEZlB,WAAW,CAACkB,MAAD,CAAX,IAAuBf,qBAAqB,CAACe,MAAD,CAFlD;EAGH,CALD;;EAMA,OAAOd,IAAP;AACH,CA3DW,EAAZ;;AA4DA,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}