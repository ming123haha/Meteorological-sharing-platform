{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/RandomLCG.js\";\nimport { a as o, n as e } from \"../../../../../chunks/vec3.js\";\nimport { c as n } from \"../../../../../chunks/vec3f64.js\";\nimport { glLayout as i } from \"../../../support/buffer/glUtil.js\";\nimport { RegularEdgeInstancesLayout as r, SilhouetteEdgeInstancesLayout as s } from \"./bufferLayouts.js\";\n\nclass a {\n  updateSettings(t) {\n    this.settings = t, this._edgeHashFunction = t.reducedPrecision ? f : p;\n  }\n\n  write(t, o, e) {\n    const n = this._edgeHashFunction(e);\n\n    y.seed = n;\n    const i = y.getIntRange(0, 255),\n          r = y.getIntRange(0, this.settings.variants - 1),\n          s = .7,\n          a = y.getFloat(),\n          c = 255 * (.5 * g(-(1 - Math.min(a / s, 1)) + Math.max(0, a - s) / (1 - s), 1.2) + .5);\n    t.position0.setVec(o, e.position0), t.position1.setVec(o, e.position1), t.componentIndex.set(o, e.componentIndex), t.variantOffset.set(o, i), t.variantStroke.set(o, r), t.variantExtension.set(o, c);\n  }\n\n  trim(t, o) {\n    return t.slice(0, o);\n  }\n\n}\n\nconst c = new Float32Array(6),\n      m = new Uint32Array(c.buffer),\n      u = new Uint32Array(1);\n\nfunction p(t) {\n  const o = c;\n  o[0] = t.position0[0], o[1] = t.position0[1], o[2] = t.position0[2], o[3] = t.position1[0], o[4] = t.position1[1], o[5] = t.position1[2], u[0] = 5381;\n\n  for (let e = 0; e < m.length; e++) u[0] = 31 * u[0] + m[e];\n\n  return u[0];\n}\n\nfunction f(t) {\n  const o = c;\n  o[0] = h(t.position0[0]), o[1] = h(t.position0[1]), o[2] = h(t.position0[2]), o[3] = h(t.position1[0]), o[4] = h(t.position1[1]), o[5] = h(t.position1[2]), u[0] = 5381;\n\n  for (let e = 0; e < m.length; e++) u[0] = 31 * u[0] + m[e];\n\n  return u[0];\n}\n\nconst l = 1e4;\n\nfunction h(t) {\n  return Math.round(t * l) / l;\n}\n\nfunction g(t, o) {\n  const e = t < 0 ? -1 : 1;\n  return Math.abs(t) ** o * e;\n}\n\nclass d {\n  constructor() {\n    this._commonWriter = new a();\n  }\n\n  updateSettings(t) {\n    this._commonWriter.updateSettings(t);\n  }\n\n  allocate(t) {\n    return r.createBuffer(t);\n  }\n\n  write(t, n, i) {\n    this._commonWriter.write(t, n, i), o(_, i.faceNormal0, i.faceNormal1), e(_, _), t.normal.setVec(n, _);\n  }\n\n  trim(t, o) {\n    return this._commonWriter.trim(t, o);\n  }\n\n}\n\nd.Layout = r, d.glLayout = i(r, 1);\n\nclass w {\n  constructor() {\n    this._commonWriter = new a();\n  }\n\n  updateSettings(t) {\n    this._commonWriter.updateSettings(t);\n  }\n\n  allocate(t) {\n    return s.createBuffer(t);\n  }\n\n  write(t, o, e) {\n    this._commonWriter.write(t, o, e), t.normalA.setVec(o, e.faceNormal0), t.normalB.setVec(o, e.faceNormal1);\n  }\n\n  trim(t, o) {\n    return this._commonWriter.trim(t, o);\n  }\n\n}\n\nw.Layout = s, w.glLayout = i(s, 1);\n\nconst _ = n(),\n      y = new t();\n\nexport { a as CommonBufferWriter, d as RegularEdgeBufferWriter, w as SilhouetteEdgeBufferWriter };","map":{"version":3,"names":["t","a","o","n","e","c","glLayout","i","RegularEdgeInstancesLayout","r","SilhouetteEdgeInstancesLayout","s","updateSettings","settings","_edgeHashFunction","reducedPrecision","f","p","write","y","seed","getIntRange","variants","getFloat","g","Math","min","max","position0","setVec","position1","componentIndex","set","variantOffset","variantStroke","variantExtension","trim","slice","Float32Array","m","Uint32Array","buffer","u","length","h","l","round","abs","d","constructor","_commonWriter","allocate","createBuffer","_","faceNormal0","faceNormal1","normal","Layout","w","normalA","normalB","CommonBufferWriter","RegularEdgeBufferWriter","SilhouetteEdgeBufferWriter"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/RandomLCG.js\";import{a as o,n as e}from\"../../../../../chunks/vec3.js\";import{c as n}from\"../../../../../chunks/vec3f64.js\";import{glLayout as i}from\"../../../support/buffer/glUtil.js\";import{RegularEdgeInstancesLayout as r,SilhouetteEdgeInstancesLayout as s}from\"./bufferLayouts.js\";class a{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?f:p}write(t,o,e){const n=this._edgeHashFunction(e);y.seed=n;const i=y.getIntRange(0,255),r=y.getIntRange(0,this.settings.variants-1),s=.7,a=y.getFloat(),c=255*(.5*g(-(1-Math.min(a/s,1))+Math.max(0,a-s)/(1-s),1.2)+.5);t.position0.setVec(o,e.position0),t.position1.setVec(o,e.position1),t.componentIndex.set(o,e.componentIndex),t.variantOffset.set(o,i),t.variantStroke.set(o,r),t.variantExtension.set(o,c)}trim(t,o){return t.slice(0,o)}}const c=new Float32Array(6),m=new Uint32Array(c.buffer),u=new Uint32Array(1);function p(t){const o=c;o[0]=t.position0[0],o[1]=t.position0[1],o[2]=t.position0[2],o[3]=t.position1[0],o[4]=t.position1[1],o[5]=t.position1[2],u[0]=5381;for(let e=0;e<m.length;e++)u[0]=31*u[0]+m[e];return u[0]}function f(t){const o=c;o[0]=h(t.position0[0]),o[1]=h(t.position0[1]),o[2]=h(t.position0[2]),o[3]=h(t.position1[0]),o[4]=h(t.position1[1]),o[5]=h(t.position1[2]),u[0]=5381;for(let e=0;e<m.length;e++)u[0]=31*u[0]+m[e];return u[0]}const l=1e4;function h(t){return Math.round(t*l)/l}function g(t,o){const e=t<0?-1:1;return Math.abs(t)**o*e}class d{constructor(){this._commonWriter=new a}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return r.createBuffer(t)}write(t,n,i){this._commonWriter.write(t,n,i),o(_,i.faceNormal0,i.faceNormal1),e(_,_),t.normal.setVec(n,_)}trim(t,o){return this._commonWriter.trim(t,o)}}d.Layout=r,d.glLayout=i(r,1);class w{constructor(){this._commonWriter=new a}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return s.createBuffer(t)}write(t,o,e){this._commonWriter.write(t,o,e),t.normalA.setVec(o,e.faceNormal0),t.normalB.setVec(o,e.faceNormal1)}trim(t,o){return this._commonWriter.trim(t,o)}}w.Layout=s,w.glLayout=i(s,1);const _=n(),y=new t;export{a as CommonBufferWriter,d as RegularEdgeBufferWriter,w as SilhouetteEdgeBufferWriter};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}