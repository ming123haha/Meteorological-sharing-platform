{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { nextTick as e } from \"../nextTick.js\";\nimport s from \"./RemoteClient.js\";\nimport { MessageType as r, receiveMessage as t } from \"./utils.js\";\n\nclass n {\n  constructor() {\n    const e = document.createDocumentFragment();\n    [\"addEventListener\", \"dispatchEvent\", \"removeEventListener\"].forEach(s => {\n      this[s] = (...r) => e[s](...r);\n    });\n  }\n\n}\n\nclass a {\n  constructor() {\n    this._dispatcher = new n(), this._workerPostMessage({\n      type: r.HANDSHAKE\n    });\n  }\n\n  terminate() {}\n\n  get onmessage() {\n    return this._onmessageHandler;\n  }\n\n  set onmessage(e) {\n    this._onmessageHandler && this.removeEventListener(\"message\", this._onmessageHandler), this._onmessageHandler = e, e && this.addEventListener(\"message\", e);\n  }\n\n  get onmessageerror() {\n    return this._onmessageerrorHandler;\n  }\n\n  set onmessageerror(e) {\n    this._onmessageerrorHandler && this.removeEventListener(\"messageerror\", this._onmessageerrorHandler), this._onmessageerrorHandler = e, e && this.addEventListener(\"messageerror\", e);\n  }\n\n  get onerror() {\n    return this._onerrorHandler;\n  }\n\n  set onerror(e) {\n    this._onerrorHandler && this.removeEventListener(\"error\", this._onerrorHandler), this._onerrorHandler = e, e && this.addEventListener(\"error\", e);\n  }\n\n  postMessage(s) {\n    e(() => {\n      this._workerMessageHandler(new MessageEvent(\"message\", {\n        data: s\n      }));\n    });\n  }\n\n  dispatchEvent(e) {\n    return this._dispatcher.dispatchEvent(e);\n  }\n\n  addEventListener(e, s, r) {\n    this._dispatcher.addEventListener(e, s, r);\n  }\n\n  removeEventListener(e, s, r) {\n    this._dispatcher.removeEventListener(e, s, r);\n  }\n\n  _workerPostMessage(s) {\n    e(() => {\n      this.dispatchEvent(new MessageEvent(\"message\", {\n        data: s\n      }));\n    });\n  }\n\n  async _workerMessageHandler(e) {\n    const n = t(e);\n\n    if (n && n.type === r.OPEN) {\n      const {\n        modulePath: e,\n        jobId: t\n      } = n;\n      let a = await s.loadWorker(e);\n      a || (a = await import(\n      /* @vite-ignore */\n\n      /* webpackIgnore: true */\n      e));\n      const o = s.connect(a);\n\n      this._workerPostMessage({\n        type: r.OPENED,\n        jobId: t,\n        data: o\n      });\n    }\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"names":["nextTick","e","s","MessageType","r","receiveMessage","t","n","constructor","document","createDocumentFragment","forEach","a","_dispatcher","_workerPostMessage","type","HANDSHAKE","terminate","onmessage","_onmessageHandler","removeEventListener","addEventListener","onmessageerror","_onmessageerrorHandler","onerror","_onerrorHandler","postMessage","_workerMessageHandler","MessageEvent","data","dispatchEvent","OPEN","modulePath","jobId","loadWorker","o","connect","OPENED","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/workers/WorkerFallback.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{nextTick as e}from\"../nextTick.js\";import s from\"./RemoteClient.js\";import{MessageType as r,receiveMessage as t}from\"./utils.js\";class n{constructor(){const e=document.createDocumentFragment();[\"addEventListener\",\"dispatchEvent\",\"removeEventListener\"].forEach((s=>{this[s]=(...r)=>e[s](...r)}))}}class a{constructor(){this._dispatcher=new n,this._workerPostMessage({type:r.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(\"message\",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(\"message\",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(\"messageerror\",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(\"messageerror\",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(\"error\",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(\"error\",e)}postMessage(s){e((()=>{this._workerMessageHandler(new MessageEvent(\"message\",{data:s}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,s,r){this._dispatcher.addEventListener(e,s,r)}removeEventListener(e,s,r){this._dispatcher.removeEventListener(e,s,r)}_workerPostMessage(s){e((()=>{this.dispatchEvent(new MessageEvent(\"message\",{data:s}))}))}async _workerMessageHandler(e){const n=t(e);if(n&&n.type===r.OPEN){const{modulePath:e,jobId:t}=n;let a=await s.loadWorker(e);a||(a=await import(/* @vite-ignore */ /* webpackIgnore: true */e));const o=s.connect(a);this._workerPostMessage({type:r.OPENED,jobId:t,data:o})}}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}