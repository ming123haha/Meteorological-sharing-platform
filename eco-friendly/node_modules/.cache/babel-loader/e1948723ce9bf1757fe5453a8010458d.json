{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { HandleOwnerMixin as s } from \"../../../core/HandleOwner.js\";\nimport { IdentifiableMixin as r } from \"../../../core/Identifiable.js\";\nimport { isAbortError as i } from \"../../../core/promiseUtils.js\";\nimport { watch as o, whenOnce as a } from \"../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { findSpatialReference as p } from \"../../../support/basemapUtils.js\";\nlet c = class extends r(s(t)) {\n  constructor(e) {\n    super(e), this.compatibilityFunction = null, this.error = null, this.state = \"loading\", this.view = null;\n  }\n\n  initialize() {\n    const e = () => this.refresh();\n\n    this.handles.add([o(() => this.basemap?.loadStatus, e), o(() => this.compatibilityFunction, e), o(() => this.view && \"basemapTerrain\" in this.view && this.view.basemapTerrain?.tilingScheme, e), o(() => this.view?.ready, e), o(() => this.view?.spatialReference, e)]), this.refresh();\n  }\n\n  destroy() {\n    this._cancelRefresh(), this.basemap = null, this.compatibilityFunction = null, this.view = null;\n  }\n\n  get _spatialReferenceTask() {\n    return p(this.view, this.basemap);\n  }\n\n  set basemap(e) {\n    const t = this._get(\"basemap\");\n\n    t && t.cancelLoad(), e && e.load().catch(() => {}), this._set(\"basemap\", e);\n  }\n\n  get spatialReference() {\n    return this._spatialReferenceTask.spatialReference;\n  }\n\n  refresh() {\n    this._cancelRefresh(), this._set(\"state\", \"loading\");\n    const e = this.basemap?.loadStatus;\n    if (\"loaded\" !== e && \"failed\" !== e) return;\n    if (!this.compatibilityFunction) return void (\"loaded\" === e ? (this._set(\"state\", \"ready\"), this._set(\"error\", null)) : (this._set(\"state\", \"error\"), this._set(\"error\", this.basemap.loadError)));\n    const t = new AbortController(),\n          {\n      signal: s\n    } = t;\n    this.compatibilityFunction(this, {\n      signal: s\n    }).then(() => a(() => !this._spatialReferenceTask.updating, s)).then(() => {\n      this._set(\"state\", \"ready\"), this._set(\"error\", null);\n    }).catch(e => {\n      i(e) || (this._set(\"state\", \"error\"), this._set(\"error\", e));\n    }), this._refreshController = t;\n  }\n\n  _cancelRefresh() {\n    this._refreshController && (this._refreshController.abort(), this._refreshController = null);\n  }\n\n};\ne([l({\n  readOnly: !0\n})], c.prototype, \"_spatialReferenceTask\", null), e([l()], c.prototype, \"basemap\", null), e([l()], c.prototype, \"compatibilityFunction\", void 0), e([l({\n  readOnly: !0\n})], c.prototype, \"error\", void 0), e([l({\n  readOnly: !0\n})], c.prototype, \"spatialReference\", null), e([l({\n  readOnly: !0\n})], c.prototype, \"state\", void 0), e([l()], c.prototype, \"view\", void 0), c = e([n(\"esri.widgets.BasemapGallery.support.BasemapGalleryItem\")], c);\nconst h = c;\nexport { h as default };","map":{"version":3,"names":["_","e","t","HandleOwnerMixin","s","IdentifiableMixin","r","isAbortError","i","watch","o","whenOnce","a","property","l","subclass","n","findSpatialReference","p","c","constructor","compatibilityFunction","error","state","view","initialize","refresh","handles","add","basemap","loadStatus","basemapTerrain","tilingScheme","ready","spatialReference","destroy","_cancelRefresh","_spatialReferenceTask","_get","cancelLoad","load","catch","_set","loadError","AbortController","signal","then","updating","_refreshController","abort","readOnly","prototype","h","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/widgets/BasemapGallery/support/BasemapGalleryItem.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../../core/HandleOwner.js\";import{IdentifiableMixin as r}from\"../../../core/Identifiable.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as o,whenOnce as a}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{findSpatialReference as p}from\"../../../support/basemapUtils.js\";let c=class extends(r(s(t))){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state=\"loading\",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([o((()=>this.basemap?.loadStatus),e),o((()=>this.compatibilityFunction),e),o((()=>this.view&&\"basemapTerrain\"in this.view&&this.view.basemapTerrain?.tilingScheme),e),o((()=>this.view?.ready),e),o((()=>this.view?.spatialReference),e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return p(this.view,this.basemap)}set basemap(e){const t=this._get(\"basemap\");t&&t.cancelLoad(),e&&e.load().catch((()=>{})),this._set(\"basemap\",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set(\"state\",\"loading\");const e=this.basemap?.loadStatus;if(\"loaded\"!==e&&\"failed\"!==e)return;if(!this.compatibilityFunction)return void(\"loaded\"===e?(this._set(\"state\",\"ready\"),this._set(\"error\",null)):(this._set(\"state\",\"error\"),this._set(\"error\",this.basemap.loadError)));const t=new AbortController,{signal:s}=t;this.compatibilityFunction(this,{signal:s}).then((()=>a((()=>!this._spatialReferenceTask.updating),s))).then((()=>{this._set(\"state\",\"ready\"),this._set(\"error\",null)})).catch((e=>{i(e)||(this._set(\"state\",\"error\"),this._set(\"error\",e))})),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};e([l({readOnly:!0})],c.prototype,\"_spatialReferenceTask\",null),e([l()],c.prototype,\"basemap\",null),e([l()],c.prototype,\"compatibilityFunction\",void 0),e([l({readOnly:!0})],c.prototype,\"error\",void 0),e([l({readOnly:!0})],c.prototype,\"spatialReference\",null),e([l({readOnly:!0})],c.prototype,\"state\",void 0),e([l()],c.prototype,\"view\",void 0),c=e([n(\"esri.widgets.BasemapGallery.support.BasemapGalleryItem\")],c);const h=c;export{h as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}