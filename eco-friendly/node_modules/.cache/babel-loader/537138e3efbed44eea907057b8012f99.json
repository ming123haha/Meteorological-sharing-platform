{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../request.js\";\nimport r from \"../core/Error.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport { getDeepValue as o } from \"../core/object.js\";\nimport { removeTrailingSlash as s } from \"../core/urlUtils.js\";\nimport { asValidOptions as a, parseUrl as l } from \"./utils.js\";\nimport n from \"./support/NetworkServiceDescription.js\";\n\nfunction i(e, r, t, o) {\n  o[t] = [r.length, r.length + e.length], e.forEach(e => {\n    r.push(e.geometry);\n  });\n}\n\nfunction d(e, r) {\n  for (let t = 0; t < r.length; t++) {\n    const o = e[r[t]];\n    if (o && o.length) for (const e of o) e.z = void 0;\n  }\n\n  console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\");\n}\n\nfunction u(e, r) {\n  for (let o = 0; o < r.length; o++) {\n    const s = e[r[o]];\n    if (s && s.length) for (const e of s) if (t(e) && e.hasZ) return !0;\n  }\n\n  return !1;\n}\n\nasync function f(t, o, s) {\n  if (!t) throw new r(\"network-service:missing-url\", \"Url to Network service is missing\");\n  const l = a({\n    f: \"json\",\n    token: o\n  }, s),\n        {\n    data: i\n  } = await e(t, l);\n  i.supportedTravelModes || (i.supportedTravelModes = []);\n\n  for (let e = 0; e < i.supportedTravelModes.length; e++) i.supportedTravelModes[e].id || (i.supportedTravelModes[e].id = i.supportedTravelModes[e].itemId);\n\n  const d = i.currentVersion >= 10.4 ? c(t, o, s) : p(t, s),\n        {\n    defaultTravelMode: u,\n    supportedTravelModes: f\n  } = await d;\n  return i.defaultTravelMode = u, i.supportedTravelModes = f, n.fromJSON(i);\n}\n\nasync function p(r, t) {\n  const n = a({\n    f: \"json\"\n  }, t),\n        {\n    data: i\n  } = await e(r.replace(/\\/rest\\/.*$/i, \"/info\"), n);\n  if (!i || !i.owningSystemUrl) return {\n    supportedTravelModes: [],\n    defaultTravelMode: null\n  };\n  const {\n    owningSystemUrl: d\n  } = i,\n        u = s(d) + \"/sharing/rest/portals/self\",\n        {\n    data: f\n  } = await e(u, n),\n        p = o(\"helperServices.routingUtilities.url\", f);\n  if (!p) return {\n    supportedTravelModes: [],\n    defaultTravelMode: null\n  };\n  const c = l(d),\n        v = /\\/solve$/i.test(c.path) ? \"Route\" : /\\/solveclosestfacility$/i.test(c.path) ? \"ClosestFacility\" : \"ServiceAreas\",\n        m = a({\n    f: \"json\",\n    serviceName: v\n  }, t),\n        T = s(p) + \"/GetTravelModes/execute\",\n        M = await e(T, m),\n        h = [];\n  let w = null;\n\n  if (M?.data?.results?.length) {\n    const e = M.data.results;\n\n    for (const r of e) if (\"supportedTravelModes\" === r.paramName) {\n      if (r.value?.features) for (const {\n        attributes: e\n      } of r.value.features) if (e) {\n        const r = JSON.parse(e.TravelMode);\n        h.push(r);\n      }\n    } else \"defaultTravelMode\" === r.paramName && (w = r.value);\n  }\n\n  return {\n    supportedTravelModes: h,\n    defaultTravelMode: w\n  };\n}\n\nasync function c(t, o, l) {\n  try {\n    const r = a({\n      f: \"json\",\n      token: o\n    }, l),\n          n = s(t) + \"/retrieveTravelModes\",\n          {\n      data: {\n        supportedTravelModes: i,\n        defaultTravelMode: d\n      }\n    } = await e(n, r);\n    return {\n      supportedTravelModes: i,\n      defaultTravelMode: d\n    };\n  } catch (n) {\n    throw new r(\"network-service:retrieveTravelModes\", \"Could not get to the NAServer's retrieveTravelModes.\", {\n      error: n\n    });\n  }\n}\n\nexport { i as collectGeometries, d as dropZValuesOffInputGeometry, f as fetchServiceDescription, u as isInputGeometryZAware };","map":{"version":3,"names":["e","r","isSome","t","getDeepValue","o","removeTrailingSlash","s","asValidOptions","a","parseUrl","l","n","i","length","forEach","push","geometry","d","z","console","log","u","hasZ","f","token","data","supportedTravelModes","id","itemId","currentVersion","c","p","defaultTravelMode","fromJSON","replace","owningSystemUrl","v","test","path","m","serviceName","T","M","h","w","results","paramName","value","features","attributes","JSON","parse","TravelMode","error","collectGeometries","dropZValuesOffInputGeometry","fetchServiceDescription","isInputGeometryZAware"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/rest/networkService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import r from\"../core/Error.js\";import{isSome as t}from\"../core/maybe.js\";import{getDeepValue as o}from\"../core/object.js\";import{removeTrailingSlash as s}from\"../core/urlUtils.js\";import{asValidOptions as a,parseUrl as l}from\"./utils.js\";import n from\"./support/NetworkServiceDescription.js\";function i(e,r,t,o){o[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}function d(e,r){for(let t=0;t<r.length;t++){const o=e[r[t]];if(o&&o.length)for(const e of o)e.z=void 0}console.log(\"The remote Network Analysis service is powered by a network dataset which is not Z-aware.\\nZ-coordinates of the input geometry are ignored.\")}function u(e,r){for(let o=0;o<r.length;o++){const s=e[r[o]];if(s&&s.length)for(const e of s)if(t(e)&&e.hasZ)return!0}return!1}async function f(t,o,s){if(!t)throw new r(\"network-service:missing-url\",\"Url to Network service is missing\");const l=a({f:\"json\",token:o},s),{data:i}=await e(t,l);i.supportedTravelModes||(i.supportedTravelModes=[]);for(let e=0;e<i.supportedTravelModes.length;e++)i.supportedTravelModes[e].id||(i.supportedTravelModes[e].id=i.supportedTravelModes[e].itemId);const d=i.currentVersion>=10.4?c(t,o,s):p(t,s),{defaultTravelMode:u,supportedTravelModes:f}=await d;return i.defaultTravelMode=u,i.supportedTravelModes=f,n.fromJSON(i)}async function p(r,t){const n=a({f:\"json\"},t),{data:i}=await e(r.replace(/\\/rest\\/.*$/i,\"/info\"),n);if(!i||!i.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:d}=i,u=s(d)+\"/sharing/rest/portals/self\",{data:f}=await e(u,n),p=o(\"helperServices.routingUtilities.url\",f);if(!p)return{supportedTravelModes:[],defaultTravelMode:null};const c=l(d),v=/\\/solve$/i.test(c.path)?\"Route\":/\\/solveclosestfacility$/i.test(c.path)?\"ClosestFacility\":\"ServiceAreas\",m=a({f:\"json\",serviceName:v},t),T=s(p)+\"/GetTravelModes/execute\",M=await e(T,m),h=[];let w=null;if(M?.data?.results?.length){const e=M.data.results;for(const r of e)if(\"supportedTravelModes\"===r.paramName){if(r.value?.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);h.push(r)}}else\"defaultTravelMode\"===r.paramName&&(w=r.value)}return{supportedTravelModes:h,defaultTravelMode:w}}async function c(t,o,l){try{const r=a({f:\"json\",token:o},l),n=s(t)+\"/retrieveTravelModes\",{data:{supportedTravelModes:i,defaultTravelMode:d}}=await e(n,r);return{supportedTravelModes:i,defaultTravelMode:d}}catch(n){throw new r(\"network-service:retrieveTravelModes\",\"Could not get to the NAServer's retrieveTravelModes.\",{error:n})}}export{i as collectGeometries,d as dropZValuesOffInputGeometry,f as fetchServiceDescription,u as isInputGeometryZAware};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}