{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Handles.js\";\nimport { isNone as o } from \"../../../../core/maybe.js\";\nimport { isAbortError as s } from \"../../../../core/promiseUtils.js\";\nimport { watch as i, on as a } from \"../../../../core/reactiveUtils.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c } from \"../../../../chunks/vec3f64.js\";\nimport p from \"../../../../geometry/Point.js\";\nimport { center as u } from \"../../../../geometry/support/aaBoundingRect.js\";\nlet h = class extends t {\n  constructor(e) {\n    super(e), this.location = null, this._updateController = null, this._handles = new r();\n  }\n\n  get renderLocation() {\n    if (!this.location) return null;\n    const e = c();\n    return this.view.renderCoordsHelper.toRenderCoords(this.location, e), e;\n  }\n\n  initialize() {\n    this.view.state.isLocal && (this._handles.add([i(() => [this.surfaceView?.spatialReference, this.surfaceView?.extent], () => this._update()), a(() => this.surface?.layers, \"change\", () => this._update())]), this._update());\n  }\n\n  destroy() {\n    this._handles.destroy();\n  }\n\n  _update() {\n    if (this._updateController && (this._updateController.abort(), this._updateController = null), !this.surfaceView || o(this.surfaceView.extent) || !this.surfaceView.spatialReference) return void this._set(\"location\", null);\n    const e = u(this.surfaceView.extent),\n          t = new p({\n      x: e[0],\n      y: e[1],\n      z: 0,\n      spatialReference: this.surfaceView.spatialReference\n    });\n    this.surface && this.surface.layers.length > 0 ? (this._set(\"location\", null), this._updateController = new AbortController(), this.surface.queryElevation(t, {\n      noDataValue: 0,\n      signal: this._updateController.signal,\n      cache: this.cache\n    }).then(e => {\n      this._updateController = null, this._set(\"location\", e.geometry);\n    }).catch(e => {\n      s(e) || e && \"elevation-query:invalid-layer\" === e.name || console.error(\"StableSurfaceCenter failed to update: \", e);\n    })) : this._set(\"location\", t);\n  }\n\n};\ne([n({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), e([n({\n  constructOnly: !0\n})], h.prototype, \"cache\", void 0), e([n({\n  readOnly: !0,\n  aliasOf: \"view.map.ground\"\n})], h.prototype, \"surface\", void 0), e([n({\n  readOnly: !0,\n  aliasOf: \"view.basemapTerrain\"\n})], h.prototype, \"surfaceView\", void 0), e([n({\n  readOnly: !0\n})], h.prototype, \"location\", void 0), e([n({\n  readOnly: !0\n})], h.prototype, \"renderLocation\", null), h = e([l(\"esri.views.3d.terrain.StableSurfaceCenter\")], h);\nexport { h as StableSurfaceCenter };","map":{"version":3,"names":["_","e","t","r","isNone","o","isAbortError","s","watch","i","on","a","property","n","subclass","l","c","p","center","u","h","constructor","location","_updateController","_handles","renderLocation","view","renderCoordsHelper","toRenderCoords","initialize","state","isLocal","add","surfaceView","spatialReference","extent","_update","surface","layers","destroy","abort","_set","x","y","z","length","AbortController","queryElevation","noDataValue","signal","cache","then","geometry","catch","name","console","error","constructOnly","prototype","readOnly","aliasOf","StableSurfaceCenter"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/support/pointsOfInterest/StableSurfaceCenter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Handles.js\";import{isNone as o}from\"../../../../core/maybe.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{watch as i,on as a}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec3f64.js\";import p from\"../../../../geometry/Point.js\";import{center as u}from\"../../../../geometry/support/aaBoundingRect.js\";let h=class extends t{constructor(e){super(e),this.location=null,this._updateController=null,this._handles=new r}get renderLocation(){if(!this.location)return null;const e=c();return this.view.renderCoordsHelper.toRenderCoords(this.location,e),e}initialize(){this.view.state.isLocal&&(this._handles.add([i((()=>[this.surfaceView?.spatialReference,this.surfaceView?.extent]),(()=>this._update())),a((()=>this.surface?.layers),\"change\",(()=>this._update()))]),this._update())}destroy(){this._handles.destroy()}_update(){if(this._updateController&&(this._updateController.abort(),this._updateController=null),!this.surfaceView||o(this.surfaceView.extent)||!this.surfaceView.spatialReference)return void this._set(\"location\",null);const e=u(this.surfaceView.extent),t=new p({x:e[0],y:e[1],z:0,spatialReference:this.surfaceView.spatialReference});this.surface&&this.surface.layers.length>0?(this._set(\"location\",null),this._updateController=new AbortController,this.surface.queryElevation(t,{noDataValue:0,signal:this._updateController.signal,cache:this.cache}).then((e=>{this._updateController=null,this._set(\"location\",e.geometry)})).catch((e=>{s(e)||e&&\"elevation-query:invalid-layer\"===e.name||console.error(\"StableSurfaceCenter failed to update: \",e)}))):this._set(\"location\",t)}};e([n({constructOnly:!0})],h.prototype,\"view\",void 0),e([n({constructOnly:!0})],h.prototype,\"cache\",void 0),e([n({readOnly:!0,aliasOf:\"view.map.ground\"})],h.prototype,\"surface\",void 0),e([n({readOnly:!0,aliasOf:\"view.basemapTerrain\"})],h.prototype,\"surfaceView\",void 0),e([n({readOnly:!0})],h.prototype,\"location\",void 0),e([n({readOnly:!0})],h.prototype,\"renderLocation\",null),h=e([l(\"esri.views.3d.terrain.StableSurfaceCenter\")],h);export{h as StableSurfaceCenter};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}