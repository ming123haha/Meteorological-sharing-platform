{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../../../core/maybe.js\";\nimport { deltaDecodeGeometry as r, convertFromGeometry as i } from \"../../../../../../layers/graphics/featureConversionUtils.js\";\nimport { WGLGeometryType as s, WGLSymbologyType as o } from \"../../enums.js\";\nimport { i1616to32 as m } from \"../../number.js\";\nimport { getStrides as l } from \"../../Utils.js\";\nimport { FillMaterialKey as n, hasOutlineFillSymbology as a, hasSimpleSymbology as h } from \"../../materialKey/MaterialKey.js\";\nimport { triangulate as y, triangulateLibtess as p, clipMarshall as c } from \"./templateUtils.js\";\nimport x from \"./WGLLineTemplate.js\";\n\nconst f = 100,\n      u = 1,\n      _ = _ => class extends _ {\n  constructor(...e) {\n    super(...e), this.forceLibtess = !1, this._bitset = 0, this._lineTemplate = null, this.geometryType = s.FILL;\n  }\n\n  _maybeAddLineTemplate(e) {\n    this._lineTemplate = x.fromFillOutline(e);\n  }\n\n  _write(t, r, i, s) {\n    const o = \"esriGeometryPoint\" === r.geometryType,\n          m = n.load(this._materialKey);\n    t.recordStart(r.getDisplayId(), this._materialKey, this.geometryType, o), this._writeGeometry(t, r, m, s, o), a(m) && e(this._lineTemplate) && this._lineTemplate.writeGeometry(t, r, s, o), t.recordEnd();\n  }\n\n  _writeGeometry(e, r, i, s, o) {\n    const m = this._getGeometry(r, s, o);\n\n    if (t(m)) return;\n    const l = [];\n    if (!(m.maxLength > f) && !this.forceLibtess && y(l, m)) return void (l.length && this._writeVertices(e, r, m.coords, m.lengths, i, l));\n    const n = p(m);\n\n    this._writeVertices(e, r, n, [n.length / 2], i);\n  }\n\n  _writeVertex(e, t, r, i, s, l) {\n    const n = m(u * i, u * s);\n    if (e.vertexBounds(i, s, 0, 0), e.vertexWrite(n), e.vertexWrite(t), r.symbologyType === o.DOT_DENSITY) e.vertexWriteF32(1 / Math.abs(l.readGeometryArea()));else {\n      e.vertexWrite(this.fillColor);\n      const t = h(r);\n      t || (e.vertexWrite(this.tl), e.vertexWrite(this.br)), e.vertexWrite(this.aux21), e.vertexWrite(this.aux22), e.vertexWrite(this.aux3), t || e.vertexWrite(this._minMaxZoom);\n    }\n  }\n\n  _writeVertices(e, t, r, i, s, o) {\n    const m = t.getDisplayId(),\n          n = this._bitset << 24 | m,\n          a = i.reduce((e, t) => e + t),\n          h = l(s.geometryType, s.symbologyType).geometry / 4,\n          y = e.vertexCount();\n    e.vertexEnsureSize(h * a);\n    let p = 0;\n    if (o) for (const l of o) {\n      const i = r[2 * l],\n            o = r[2 * l + 1];\n      this._writeVertex(e, n, s, i, o, t), p++;\n    } else for (let l = 0; l < r.length; l += 2) {\n      const i = Math.round(r[l]),\n            o = Math.round(r[l + 1]);\n      this._writeVertex(e, n, s, i, o, t), p++;\n    }\n    e.indexEnsureSize(p);\n\n    for (let l = 0; l < p; l++) e.indexWrite(l + y);\n  }\n\n  _getGeometry(e, t, s) {\n    const o = t ? r(i(t), 2) : e.readGeometryForDisplay();\n    if (!o) return null;\n    return c(o, s ? 256 : 8);\n  }\n\n};\n\nexport { _ as default };","map":{"version":3,"names":["isSome","e","isNone","t","deltaDecodeGeometry","r","convertFromGeometry","i","WGLGeometryType","s","WGLSymbologyType","o","i1616to32","m","getStrides","l","FillMaterialKey","n","hasOutlineFillSymbology","a","hasSimpleSymbology","h","triangulate","y","triangulateLibtess","p","clipMarshall","c","x","f","u","_","constructor","forceLibtess","_bitset","_lineTemplate","geometryType","FILL","_maybeAddLineTemplate","fromFillOutline","_write","load","_materialKey","recordStart","getDisplayId","_writeGeometry","writeGeometry","recordEnd","_getGeometry","maxLength","length","_writeVertices","coords","lengths","_writeVertex","vertexBounds","vertexWrite","symbologyType","DOT_DENSITY","vertexWriteF32","Math","abs","readGeometryArea","fillColor","tl","br","aux21","aux22","aux3","_minMaxZoom","reduce","geometry","vertexCount","vertexEnsureSize","round","indexEnsureSize","indexWrite","readGeometryForDisplay","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../../core/maybe.js\";import{deltaDecodeGeometry as r,convertFromGeometry as i}from\"../../../../../../layers/graphics/featureConversionUtils.js\";import{WGLGeometryType as s,WGLSymbologyType as o}from\"../../enums.js\";import{i1616to32 as m}from\"../../number.js\";import{getStrides as l}from\"../../Utils.js\";import{FillMaterialKey as n,hasOutlineFillSymbology as a,hasSimpleSymbology as h}from\"../../materialKey/MaterialKey.js\";import{triangulate as y,triangulateLibtess as p,clipMarshall as c}from\"./templateUtils.js\";import x from\"./WGLLineTemplate.js\";const f=100,u=1,_=_=>class extends _{constructor(...e){super(...e),this.forceLibtess=!1,this._bitset=0,this._lineTemplate=null,this.geometryType=s.FILL}_maybeAddLineTemplate(e){this._lineTemplate=x.fromFillOutline(e)}_write(t,r,i,s){const o=\"esriGeometryPoint\"===r.geometryType,m=n.load(this._materialKey);t.recordStart(r.getDisplayId(),this._materialKey,this.geometryType,o),this._writeGeometry(t,r,m,s,o),a(m)&&e(this._lineTemplate)&&this._lineTemplate.writeGeometry(t,r,s,o),t.recordEnd()}_writeGeometry(e,r,i,s,o){const m=this._getGeometry(r,s,o);if(t(m))return;const l=[];if(!(m.maxLength>f)&&!this.forceLibtess&&y(l,m))return void(l.length&&this._writeVertices(e,r,m.coords,m.lengths,i,l));const n=p(m);this._writeVertices(e,r,n,[n.length/2],i)}_writeVertex(e,t,r,i,s,l){const n=m(u*i,u*s);if(e.vertexBounds(i,s,0,0),e.vertexWrite(n),e.vertexWrite(t),r.symbologyType===o.DOT_DENSITY)e.vertexWriteF32(1/Math.abs(l.readGeometryArea()));else{e.vertexWrite(this.fillColor);const t=h(r);t||(e.vertexWrite(this.tl),e.vertexWrite(this.br)),e.vertexWrite(this.aux21),e.vertexWrite(this.aux22),e.vertexWrite(this.aux3),t||e.vertexWrite(this._minMaxZoom)}}_writeVertices(e,t,r,i,s,o){const m=t.getDisplayId(),n=this._bitset<<24|m,a=i.reduce(((e,t)=>e+t)),h=l(s.geometryType,s.symbologyType).geometry/4,y=e.vertexCount();e.vertexEnsureSize(h*a);let p=0;if(o)for(const l of o){const i=r[2*l],o=r[2*l+1];this._writeVertex(e,n,s,i,o,t),p++}else for(let l=0;l<r.length;l+=2){const i=Math.round(r[l]),o=Math.round(r[l+1]);this._writeVertex(e,n,s,i,o,t),p++}e.indexEnsureSize(p);for(let l=0;l<p;l++)e.indexWrite(l+y)}_getGeometry(e,t,s){const o=t?r(i(t),2):e.readGeometryForDisplay();if(!o)return null;return c(o,s?256:8)}};export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}