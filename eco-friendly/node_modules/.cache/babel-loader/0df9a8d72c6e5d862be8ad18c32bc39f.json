{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as r, isSome as e } from \"../../../../../core/maybe.js\";\nimport { f as t } from \"../../../../../chunks/vec4f32.js\";\nimport { createProgramDescriptor as s } from \"../Utils.js\";\nimport o from \"./WGLBrush.js\";\nimport { background as i } from \"../shaders/BackgroundPrograms.js\";\nimport { StencilOperation as a, CompareFunction as m, PrimitiveType as n, DataType as p } from \"../../../../webgl/enums.js\";\nimport { createProgram as l } from \"../../../../webgl/ProgramTemplate.js\";\n\nconst c = () => s(\"clip\", {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: p.SHORT\n  }]\n});\n\nclass d extends o {\n  constructor() {\n    super(...arguments), this._color = t(0, 1, 0, 1);\n  }\n\n  dispose() {\n    this._program && this._program.dispose();\n  }\n\n  prepareState({\n    context: r\n  }) {\n    r.setStencilTestEnabled(!0), r.setBlendingEnabled(!1), r.setFaceCullingEnabled(!1), r.setColorMask(!1, !1, !1, !1), r.setStencilOp(a.KEEP, a.KEEP, a.REPLACE), r.setStencilWriteMask(255), r.setStencilFunction(m.ALWAYS, 0, 255);\n  }\n\n  draw(t, s) {\n    const {\n      context: o,\n      state: a,\n      requestRender: m,\n      allowDelayedRender: d\n    } = t,\n          f = c(),\n          g = s.getVAO(o, a, f.attributes, f.bufferLayouts);\n    r(g.indexBuffer) || (this._program || (this._program = l(o, i)), d && e(m) && !this._program.isCompiled ? m() : (o.useProgram(this._program), this._program.setUniform2fv(\"u_coord_range\", [1, 1]), this._program.setUniform4fv(\"u_color\", this._color), this._program.setUniformMatrix3fv(\"u_dvsMat3\", a.displayMat3), o.bindVAO(g), o.drawElements(n.TRIANGLES, g.indexBuffer.size, p.UNSIGNED_INT, 0), o.bindVAO()));\n  }\n\n}\n\nexport { d as default };","map":{"version":3,"names":["isNone","r","isSome","e","f","t","createProgramDescriptor","s","o","background","i","StencilOperation","a","CompareFunction","m","PrimitiveType","n","DataType","p","createProgram","l","c","geometry","location","name","count","type","SHORT","d","constructor","arguments","_color","dispose","_program","prepareState","context","setStencilTestEnabled","setBlendingEnabled","setFaceCullingEnabled","setColorMask","setStencilOp","KEEP","REPLACE","setStencilWriteMask","setStencilFunction","ALWAYS","draw","state","requestRender","allowDelayedRender","g","getVAO","attributes","bufferLayouts","indexBuffer","isCompiled","useProgram","setUniform2fv","setUniform4fv","setUniformMatrix3fv","displayMat3","bindVAO","drawElements","TRIANGLES","size","UNSIGNED_INT","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushClip.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as r,isSome as e}from\"../../../../../core/maybe.js\";import{f as t}from\"../../../../../chunks/vec4f32.js\";import{createProgramDescriptor as s}from\"../Utils.js\";import o from\"./WGLBrush.js\";import{background as i}from\"../shaders/BackgroundPrograms.js\";import{StencilOperation as a,CompareFunction as m,PrimitiveType as n,DataType as p}from\"../../../../webgl/enums.js\";import{createProgram as l}from\"../../../../webgl/ProgramTemplate.js\";const c=()=>s(\"clip\",{geometry:[{location:0,name:\"a_pos\",count:2,type:p.SHORT}]});class d extends o{constructor(){super(...arguments),this._color=t(0,1,0,1)}dispose(){this._program&&this._program.dispose()}prepareState({context:r}){r.setStencilTestEnabled(!0),r.setBlendingEnabled(!1),r.setFaceCullingEnabled(!1),r.setColorMask(!1,!1,!1,!1),r.setStencilOp(a.KEEP,a.KEEP,a.REPLACE),r.setStencilWriteMask(255),r.setStencilFunction(m.ALWAYS,0,255)}draw(t,s){const{context:o,state:a,requestRender:m,allowDelayedRender:d}=t,f=c(),g=s.getVAO(o,a,f.attributes,f.bufferLayouts);r(g.indexBuffer)||(this._program||(this._program=l(o,i)),d&&e(m)&&!this._program.isCompiled?m():(o.useProgram(this._program),this._program.setUniform2fv(\"u_coord_range\",[1,1]),this._program.setUniform4fv(\"u_color\",this._color),this._program.setUniformMatrix3fv(\"u_dvsMat3\",a.displayMat3),o.bindVAO(g),o.drawElements(n.TRIANGLES,g.indexBuffer.size,p.UNSIGNED_INT,0),o.bindVAO()))}}export{d as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}