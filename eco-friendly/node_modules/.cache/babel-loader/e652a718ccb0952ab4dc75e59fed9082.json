{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { HITTEST_RADIUS as e } from \"../definitions.js\";\nimport { Effect as s } from \"./Effect.js\";\nimport { PixelFormat as o, PixelType as r } from \"../../../../webgl/enums.js\";\n\nclass i extends s {\n  constructor() {\n    super(...arguments), this.name = this.constructor.name, this.defines = [\"id\"], this._lastSize = 0;\n  }\n\n  dispose() {\n    t(this._fbo) && this._fbo.dispose();\n  }\n\n  bind({\n    context: t,\n    painter: e\n  }) {\n    const {\n      width: s,\n      height: o\n    } = t.getViewport();\n    this._boundFBO = t.getBoundFramebufferObject();\n    const r = e.getFbos(s, o).effect0;\n    t.bindFramebuffer(r), t.setColorMask(!0, !0, !0, !0), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT);\n  }\n\n  unbind({\n    context: t\n  }) {\n    t.bindFramebuffer(this._boundFBO), this._boundFBO = null;\n  }\n\n  draw({\n    context: t,\n    state: s,\n    pixelRatio: i\n  }, n, f = 2 * e) {\n    const a = t.getBoundFramebufferObject(),\n          h = s.size[1] * i,\n          u = Math.round(f * i),\n          b = u / 2,\n          c = u / 2;\n    this._ensureBuffer(u), n.forEach((t, e) => {\n      const s = new Map(),\n            f = Math.floor(e.x * i - u / 2),\n            l = Math.floor(h - e.y * i - u / 2);\n      a.readPixels(f, l, u, u, o.RGBA, r.UNSIGNED_BYTE, this._buf);\n\n      for (let o = 0; o < this._buf32.length; o++) {\n        const t = this._buf32[o];\n\n        if (4294967295 !== t && 0 !== t) {\n          const e = o % u,\n                r = u - Math.floor(o / u),\n                i = (b - e) * (b - e) + (c - r) * (c - r),\n                n = s.has(t) ? s.get(t) : 4294967295;\n          s.set(t, Math.min(i, n));\n        }\n      }\n\n      const d = Array.from(s).sort((t, e) => t[1] - e[1]).map(t => t[0]);\n      t.resolve(d), n.delete(e);\n    });\n  }\n\n  _ensureBuffer(t) {\n    this._lastSize !== t && (this._lastSize = t, this._buf = new Uint8Array(4 * t * t), this._buf32 = new Uint32Array(this._buf.buffer));\n  }\n\n}\n\nexport { i as HittestEffectVTL };","map":{"version":3,"names":["isSome","t","HITTEST_RADIUS","e","Effect","s","PixelFormat","o","PixelType","r","i","constructor","arguments","name","defines","_lastSize","dispose","_fbo","bind","context","painter","width","height","getViewport","_boundFBO","getBoundFramebufferObject","getFbos","effect0","bindFramebuffer","setColorMask","setClearColor","clear","gl","COLOR_BUFFER_BIT","unbind","draw","state","pixelRatio","n","f","a","h","size","u","Math","round","b","c","_ensureBuffer","forEach","Map","floor","x","l","y","readPixels","RGBA","UNSIGNED_BYTE","_buf","_buf32","length","has","get","set","min","d","Array","from","sort","map","resolve","delete","Uint8Array","Uint32Array","buffer","HittestEffectVTL"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffectVTL.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{HITTEST_RADIUS as e}from\"../definitions.js\";import{Effect as s}from\"./Effect.js\";import{PixelFormat as o,PixelType as r}from\"../../../../webgl/enums.js\";class i extends s{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=[\"id\"],this._lastSize=0}dispose(){t(this._fbo)&&this._fbo.dispose()}bind({context:t,painter:e}){const{width:s,height:o}=t.getViewport();this._boundFBO=t.getBoundFramebufferObject();const r=e.getFbos(s,o).effect0;t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind({context:t}){t.bindFramebuffer(this._boundFBO),this._boundFBO=null}draw({context:t,state:s,pixelRatio:i},n,f=2*e){const a=t.getBoundFramebufferObject(),h=s.size[1]*i,u=Math.round(f*i),b=u/2,c=u/2;this._ensureBuffer(u),n.forEach(((t,e)=>{const s=new Map,f=Math.floor(e.x*i-u/2),l=Math.floor(h-e.y*i-u/2);a.readPixels(f,l,u,u,o.RGBA,r.UNSIGNED_BYTE,this._buf);for(let o=0;o<this._buf32.length;o++){const t=this._buf32[o];if(4294967295!==t&&0!==t){const e=o%u,r=u-Math.floor(o/u),i=(b-e)*(b-e)+(c-r)*(c-r),n=s.has(t)?s.get(t):4294967295;s.set(t,Math.min(i,n))}}const d=Array.from(s).sort(((t,e)=>t[1]-e[1])).map((t=>t[0]));t.resolve(d),n.delete(e)}))}_ensureBuffer(t){this._lastSize!==t&&(this._lastSize=t,this._buf=new Uint8Array(4*t*t),this._buf32=new Uint32Array(this._buf.buffer))}}export{i as HittestEffectVTL};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}