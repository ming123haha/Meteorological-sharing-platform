{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t, isNone as o } from \"../../../../../core/maybe.js\";\nimport { t as s } from \"../../../../../chunks/vec3.js\";\nimport { c as e } from \"../../../../../chunks/vec3f64.js\";\nimport { create as n } from \"../../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as i } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { componentMinimalSizeForIntersectionData as r, ComponentIntersectionData as p } from \"./ComponentIntersectionData.js\";\nimport { getVisibility as m } from \"../../lib/ComponentUtils.js\";\nimport { generateDefaultIndexArray as a } from \"../../lib/geometryDataUtils.js\";\nimport { computeInvDir as c, intersectAabbInvDir as h, intersectTriangles as f } from \"../../materials/internal/MaterialUtil.js\";\n\nclass _ {\n  constructor(o, s) {\n    this._indices = t(o.indices) ? o.indices : a(o.positions.length / 3), this._positions = new i(o.positions), this._components = s, this._componentIntersectionData = new Array(s.count);\n  }\n\n  getComponentAabb(o, s) {\n    if (t(this._perComponentAabbs)) {\n      for (let t = 0; t < 6; t++) s[t] = this._perComponentAabbs[6 * o + t];\n\n      return s;\n    }\n\n    return this._computePerComponentAabbs(), this.getComponentAabb(o, s);\n  }\n\n  getComponentPositions(t, o) {\n    o.indices = this._indices, o.data = this._positions.typedBuffer, o.stride = this._positions.typedBufferStride, o.startIndex = this._components.offsets[t], o.endIndex = this._components.offsets[t + 1];\n  }\n\n  intersect(e, n, i, a, _, u, l) {\n    const C = {\n      data: this._positions.typedBuffer,\n      stride: this._positions.typedBufferStride,\n      size: 3\n    },\n          A = this._indices,\n          y = this._components.offsets,\n          g = c(e, n, b),\n          j = e[2],\n          B = n[2];\n\n    this._components.visibility.forEachComponent(c => {\n      if (!m(this._components.pickability, c)) return !0;\n      const b = this.getComponentAabb(c, d);\n\n      if (t(u)) {\n        const o = u[c];\n        t(_) ? _.componentOffset = o : (e[2] = j - o, n[2] = B - o);\n      }\n\n      if (t(_) && _.applyToAabb(b), !h(b, e, g, i)) return !0;\n\n      const x = y[c] / 3,\n            I = y[c + 1] / 3,\n            M = (t, o, e) => {\n        l(c, t, s(o, o, a), e);\n      },\n            D = I - x;\n\n      return o(_) && D > r ? (null == this._componentIntersectionData[c] && (this._componentIntersectionData[c] = new p(this._indices, x, I, C)), this._componentIntersectionData[c].intersectRay({\n        r0: e,\n        r1: n\n      }, M)) : f(e, n, x, I, A, C, void 0, _, M), !0;\n    });\n  }\n\n  _computePerComponentAabbs() {\n    const t = this._components.count;\n    this._perComponentAabbs = new Float32Array(6 * t);\n    const o = this._indices,\n          s = this._positions.typedBuffer,\n          e = this._positions.typedBufferStride,\n          n = this._components.offsets;\n    let i = 0;\n\n    for (let r = 0; r < t; r++) {\n      const t = n[r],\n            p = n[r + 1];\n\n      let m = 1 / 0,\n          a = 1 / 0,\n          c = 1 / 0,\n          h = -1 / 0,\n          f = -1 / 0,\n          _ = -1 / 0;\n\n      for (let n = t; n < p; n++) {\n        const t = o[n] * e,\n              i = s[t],\n              r = s[t + 1],\n              p = s[t + 2];\n        m = Math.min(m, i), a = Math.min(a, r), c = Math.min(c, p), h = Math.max(h, i), f = Math.max(f, r), _ = Math.max(_, p);\n      }\n\n      this._perComponentAabbs[i++] = m, this._perComponentAabbs[i++] = a, this._perComponentAabbs[i++] = c, this._perComponentAabbs[i++] = h, this._perComponentAabbs[i++] = f, this._perComponentAabbs[i++] = _;\n    }\n  }\n\n  get positions() {\n    return this._positions;\n  }\n\n  get indices() {\n    return this._indices;\n  }\n\n}\n\nconst b = e(),\n      d = n();\nexport { _ as default };","map":{"version":3,"names":["isSome","t","isNone","o","s","c","e","create","n","BufferViewVec3f","i","componentMinimalSizeForIntersectionData","r","ComponentIntersectionData","p","getVisibility","m","generateDefaultIndexArray","a","computeInvDir","intersectAabbInvDir","h","intersectTriangles","f","_","constructor","_indices","indices","positions","length","_positions","_components","_componentIntersectionData","Array","count","getComponentAabb","_perComponentAabbs","_computePerComponentAabbs","getComponentPositions","data","typedBuffer","stride","typedBufferStride","startIndex","offsets","endIndex","intersect","u","l","C","size","A","y","g","b","j","B","visibility","forEachComponent","pickability","d","componentOffset","applyToAabb","x","I","M","D","intersectRay","r0","r1","Float32Array","Math","min","max","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/IntersectionGeometry.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as o}from\"../../../../../core/maybe.js\";import{t as s}from\"../../../../../chunks/vec3.js\";import{c as e}from\"../../../../../chunks/vec3f64.js\";import{create as n}from\"../../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as i}from\"../../../../../geometry/support/buffer/BufferView.js\";import{componentMinimalSizeForIntersectionData as r,ComponentIntersectionData as p}from\"./ComponentIntersectionData.js\";import{getVisibility as m}from\"../../lib/ComponentUtils.js\";import{generateDefaultIndexArray as a}from\"../../lib/geometryDataUtils.js\";import{computeInvDir as c,intersectAabbInvDir as h,intersectTriangles as f}from\"../../materials/internal/MaterialUtil.js\";class _{constructor(o,s){this._indices=t(o.indices)?o.indices:a(o.positions.length/3),this._positions=new i(o.positions),this._components=s,this._componentIntersectionData=new Array(s.count)}getComponentAabb(o,s){if(t(this._perComponentAabbs)){for(let t=0;t<6;t++)s[t]=this._perComponentAabbs[6*o+t];return s}return this._computePerComponentAabbs(),this.getComponentAabb(o,s)}getComponentPositions(t,o){o.indices=this._indices,o.data=this._positions.typedBuffer,o.stride=this._positions.typedBufferStride,o.startIndex=this._components.offsets[t],o.endIndex=this._components.offsets[t+1]}intersect(e,n,i,a,_,u,l){const C={data:this._positions.typedBuffer,stride:this._positions.typedBufferStride,size:3},A=this._indices,y=this._components.offsets,g=c(e,n,b),j=e[2],B=n[2];this._components.visibility.forEachComponent((c=>{if(!m(this._components.pickability,c))return!0;const b=this.getComponentAabb(c,d);if(t(u)){const o=u[c];t(_)?_.componentOffset=o:(e[2]=j-o,n[2]=B-o)}if(t(_)&&_.applyToAabb(b),!h(b,e,g,i))return!0;const x=y[c]/3,I=y[c+1]/3,M=(t,o,e)=>{l(c,t,s(o,o,a),e)},D=I-x;return o(_)&&D>r?(null==this._componentIntersectionData[c]&&(this._componentIntersectionData[c]=new p(this._indices,x,I,C)),this._componentIntersectionData[c].intersectRay({r0:e,r1:n},M)):f(e,n,x,I,A,C,void 0,_,M),!0}))}_computePerComponentAabbs(){const t=this._components.count;this._perComponentAabbs=new Float32Array(6*t);const o=this._indices,s=this._positions.typedBuffer,e=this._positions.typedBufferStride,n=this._components.offsets;let i=0;for(let r=0;r<t;r++){const t=n[r],p=n[r+1];let m=1/0,a=1/0,c=1/0,h=-1/0,f=-1/0,_=-1/0;for(let n=t;n<p;n++){const t=o[n]*e,i=s[t],r=s[t+1],p=s[t+2];m=Math.min(m,i),a=Math.min(a,r),c=Math.min(c,p),h=Math.max(h,i),f=Math.max(f,r),_=Math.max(_,p)}this._perComponentAabbs[i++]=m,this._perComponentAabbs[i++]=a,this._perComponentAabbs[i++]=c,this._perComponentAabbs[i++]=h,this._perComponentAabbs[i++]=f,this._perComponentAabbs[i++]=_}}get positions(){return this._positions}get indices(){return this._indices}}const b=e(),d=n();export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}