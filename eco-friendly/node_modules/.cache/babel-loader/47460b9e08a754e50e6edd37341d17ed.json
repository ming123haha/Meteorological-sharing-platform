{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../../request.js\";\nimport { result as t } from \"../../../../core/asyncUtils.js\";\nimport { estimateNestedObjectSize as r } from \"../../../../core/byteSizeEstimations.js\";\nimport n from \"../../../../core/Error.js\";\nimport s from \"../../../../core/Logger.js\";\nimport { isSome as a, unwrap as o } from \"../../../../core/maybe.js\";\nimport { throwIfAbortError as i } from \"../../../../core/promiseUtils.js\";\nimport { Version as u } from \"../../../../core/Version.js\";\nimport { d as l } from \"../../../../chunks/vec3f64.js\";\nimport { empty as c, expandWithVec3 as m } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { requestImage as p } from \"../../../../support/requestImageUtils.js\";\nimport { CullFaceOptions as f, AlphaDiscardMode as d } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Geometry as g } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Texture as y } from \"../../webgl-engine/lib/Texture.js\";\nimport { DefaultMaterial as x } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { TextureWrapMode as h } from \"../../../webgl/enums.js\";\nconst w = s.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");\n\nasync function b(e, t) {\n  const n = await v(e, t),\n        s = await E(n.textureDefinitions, t);\n  let a = 0;\n\n  for (const r in s) if (s.hasOwnProperty(r)) {\n    const e = s[r];\n    a += e?.image ? e.image.width * e.image.height * 4 : 0;\n  }\n\n  return {\n    resource: n,\n    textures: s,\n    size: a + r(n)\n  };\n}\n\nasync function v(r, n) {\n  const s = a(n) && n.streamDataRequester;\n  if (s) return j(r, s, n);\n  const u = await t(e(r, o(n)));\n  if (!0 === u.ok) return u.value.data;\n  i(u.error), A(u.error);\n}\n\nasync function j(e, r, n) {\n  const s = await t(r.request(e, \"json\", n));\n  if (!0 === s.ok) return s.value;\n  i(s.error), A(s.error.details.url);\n}\n\nfunction A(e) {\n  throw new n(\"\", `Request for object resource failed: ${e}`);\n}\n\nfunction M(e) {\n  const t = e.params,\n        r = t.topology;\n  let n = !0;\n\n  switch (t.vertexAttributes || (w.warn(\"Geometry must specify vertex attributes\"), n = !1), t.topology) {\n    case \"PerAttributeArray\":\n      break;\n\n    case \"Indexed\":\n    case null:\n    case void 0:\n      {\n        const e = t.faces;\n\n        if (e) {\n          if (t.vertexAttributes) for (const r in t.vertexAttributes) {\n            const t = e[r];\n            t && t.values ? (null != t.valueType && \"UInt32\" !== t.valueType && (w.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`), n = !1), null != t.valuesPerElement && 1 !== t.valuesPerElement && (w.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`), n = !1)) : (w.warn(`Indexed geometry does not specify face indices for '${r}' attribute`), n = !1);\n          }\n        } else w.warn(\"Indexed geometries must specify faces\"), n = !1;\n\n        break;\n      }\n\n    default:\n      w.warn(`Unsupported topology '${r}'`), n = !1;\n  }\n\n  e.params.material || (w.warn(\"Geometry requires material\"), n = !1);\n  const s = e.params.vertexAttributes;\n\n  for (const a in s) {\n    s[a].values || (w.warn(\"Geometries with externally defined attributes are not yet supported\"), n = !1);\n  }\n\n  return n;\n}\n\nfunction P(e, t) {\n  const r = [],\n        n = [],\n        s = [],\n        o = [],\n        i = e.resource,\n        c = u.parse(i.version || \"1.0\", \"wosr\");\n  k.validate(c);\n  const m = i.model.name,\n        p = i.model.geometries,\n        d = i.materialDefinitions,\n        h = e.textures;\n  let w = 0;\n  const b = new Map();\n\n  for (let u = 0; u < p.length; u++) {\n    const e = p[u];\n    if (!M(e)) continue;\n    const i = T(e),\n          c = e.params.vertexAttributes,\n          m = [];\n\n    for (const t in c) {\n      const e = c[t],\n            r = e.values;\n      m.push([t, {\n        data: r,\n        size: e.valuesPerElement,\n        exclusive: !0\n      }]);\n    }\n\n    const v = [];\n\n    if (\"PerAttributeArray\" !== e.params.topology) {\n      const t = e.params.faces;\n\n      for (const e in t) v.push([e, t[e].values]);\n    }\n\n    const j = h && h[i.texture];\n\n    if (j && !b.has(i.texture)) {\n      const {\n        image: e,\n        params: t\n      } = j,\n            r = new y(e, t);\n      o.push(r), b.set(i.texture, r);\n    }\n\n    const A = b.get(i.texture),\n          P = A ? A.id : void 0;\n    let U = s[i.material] ? s[i.material][i.texture] : null;\n\n    if (!U) {\n      const e = d[i.material.substring(i.material.lastIndexOf(\"/\") + 1)].params;\n      1 === e.transparency && (e.transparency = 0);\n      const r = j && j.alphaChannelUsage,\n            n = e.transparency > 0 || \"transparency\" === r || \"maskAndTransparency\" === r,\n            o = j ? I(j.alphaChannelUsage) : void 0,\n            u = {\n        ambient: l(e.diffuse),\n        diffuse: l(e.diffuse),\n        opacity: 1 - (e.transparency || 0),\n        transparent: n,\n        textureAlphaMode: o,\n        textureAlphaCutoff: .33,\n        textureId: P,\n        initTextureTransparent: !0,\n        doubleSided: !0,\n        cullFace: f.None,\n        colorMixMode: e.externalColorMixMode || \"tint\",\n        textureAlphaPremultiplied: !!j && !!j.params.preMultiplyAlpha\n      };\n      a(t) && t.materialParamsMixin && Object.assign(u, t.materialParamsMixin), U = new x(u), s[i.material] || (s[i.material] = {}), s[i.material][i.texture] = U;\n    }\n\n    n.push(U);\n    const E = new g(m, v);\n    w += v.position ? v.position.length : 0, r.push(E);\n  }\n\n  return {\n    engineResources: [{\n      name: m,\n      stageResources: {\n        textures: o,\n        materials: n,\n        geometries: r\n      },\n      pivotOffset: i.model.pivotOffset,\n      numberOfVertices: w,\n      lodThreshold: null\n    }],\n    referenceBoundingBox: U(r)\n  };\n}\n\nfunction U(e) {\n  const t = c();\n  return e.forEach(e => {\n    const r = e.boundingInfo;\n    a(r) && (m(t, r.getBBMin()), m(t, r.getBBMax()));\n  }), t;\n}\n\nasync function E(e, t) {\n  const r = [];\n\n  for (const o in e) {\n    const n = e[o],\n          s = n.images[0].data;\n\n    if (!s) {\n      w.warn(\"Externally referenced texture data is not yet supported\");\n      continue;\n    }\n\n    const i = n.encoding + \";base64,\" + s,\n          u = \"/textureDefinitions/\" + o,\n          l = \"rgba\" === n.channels ? n.alphaChannelUsage || \"transparency\" : \"none\",\n          c = {\n      noUnpackFlip: !0,\n      wrap: {\n        s: h.REPEAT,\n        t: h.REPEAT\n      },\n      preMultiplyAlpha: I(l) !== d.Opaque\n    },\n          m = a(t) && t.disableTextures ? Promise.resolve(null) : p(i, t);\n    r.push(m.then(e => ({\n      refId: u,\n      image: e,\n      params: c,\n      alphaChannelUsage: l\n    })));\n  }\n\n  const n = await Promise.all(r),\n        s = {};\n\n  for (const a of n) s[a.refId] = a;\n\n  return s;\n}\n\nfunction I(e) {\n  switch (e) {\n    case \"mask\":\n      return d.Mask;\n\n    case \"maskAndTransparency\":\n      return d.MaskBlend;\n\n    case \"none\":\n      return d.Opaque;\n\n    default:\n      return d.Blend;\n  }\n}\n\nfunction T(e) {\n  const t = e.params;\n  return {\n    id: 1,\n    material: t.material,\n    texture: t.texture,\n    region: t.texture\n  };\n}\n\nconst k = new u(1, 2, \"wosr\");\nexport { E as createTextureResources, b as load, P as processLoadResult };","map":{"version":3,"names":["e","result","t","estimateNestedObjectSize","r","n","s","isSome","a","unwrap","o","throwIfAbortError","i","Version","u","d","l","empty","c","expandWithVec3","m","requestImage","p","CullFaceOptions","f","AlphaDiscardMode","Geometry","g","Texture","y","DefaultMaterial","x","TextureWrapMode","h","w","getLogger","b","v","E","textureDefinitions","hasOwnProperty","image","width","height","resource","textures","size","streamDataRequester","j","ok","value","data","error","A","request","details","url","M","params","topology","vertexAttributes","warn","faces","values","valueType","valuesPerElement","material","P","parse","version","k","validate","model","name","geometries","materialDefinitions","Map","length","T","push","exclusive","texture","has","set","get","id","U","substring","lastIndexOf","transparency","alphaChannelUsage","I","ambient","diffuse","opacity","transparent","textureAlphaMode","textureAlphaCutoff","textureId","initTextureTransparent","doubleSided","cullFace","None","colorMixMode","externalColorMixMode","textureAlphaPremultiplied","preMultiplyAlpha","materialParamsMixin","Object","assign","position","engineResources","stageResources","materials","pivotOffset","numberOfVertices","lodThreshold","referenceBoundingBox","forEach","boundingInfo","getBBMin","getBBMax","images","encoding","channels","noUnpackFlip","wrap","REPEAT","Opaque","disableTextures","Promise","resolve","then","refId","all","Mask","MaskBlend","Blend","region","createTextureResources","load","processLoadResult"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import{estimateNestedObjectSize as r}from\"../../../../core/byteSizeEstimations.js\";import n from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{isSome as a,unwrap as o}from\"../../../../core/maybe.js\";import{throwIfAbortError as i}from\"../../../../core/promiseUtils.js\";import{Version as u}from\"../../../../core/Version.js\";import{d as l}from\"../../../../chunks/vec3f64.js\";import{empty as c,expandWithVec3 as m}from\"../../../../geometry/support/aaBoundingBox.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{CullFaceOptions as f,AlphaDiscardMode as d}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as g}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as y}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as x}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{TextureWrapMode as h}from\"../../../webgl/enums.js\";const w=s.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function b(e,t){const n=await v(e,t),s=await E(n.textureDefinitions,t);let a=0;for(const r in s)if(s.hasOwnProperty(r)){const e=s[r];a+=e?.image?e.image.width*e.image.height*4:0}return{resource:n,textures:s,size:a+r(n)}}async function v(r,n){const s=a(n)&&n.streamDataRequester;if(s)return j(r,s,n);const u=await t(e(r,o(n)));if(!0===u.ok)return u.value.data;i(u.error),A(u.error)}async function j(e,r,n){const s=await t(r.request(e,\"json\",n));if(!0===s.ok)return s.value;i(s.error),A(s.error.details.url)}function A(e){throw new n(\"\",`Request for object resource failed: ${e}`)}function M(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(w.warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t&&t.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(w.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(w.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(w.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else w.warn(\"Indexed geometries must specify faces\"),n=!1;break}default:w.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(w.warn(\"Geometry requires material\"),n=!1);const s=e.params.vertexAttributes;for(const a in s){s[a].values||(w.warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function P(e,t){const r=[],n=[],s=[],o=[],i=e.resource,c=u.parse(i.version||\"1.0\",\"wosr\");k.validate(c);const m=i.model.name,p=i.model.geometries,d=i.materialDefinitions,h=e.textures;let w=0;const b=new Map;for(let u=0;u<p.length;u++){const e=p[u];if(!M(e))continue;const i=T(e),c=e.params.vertexAttributes,m=[];for(const t in c){const e=c[t],r=e.values;m.push([t,{data:r,size:e.valuesPerElement,exclusive:!0}])}const v=[];if(\"PerAttributeArray\"!==e.params.topology){const t=e.params.faces;for(const e in t)v.push([e,t[e].values])}const j=h&&h[i.texture];if(j&&!b.has(i.texture)){const{image:e,params:t}=j,r=new y(e,t);o.push(r),b.set(i.texture,r)}const A=b.get(i.texture),P=A?A.id:void 0;let U=s[i.material]?s[i.material][i.texture]:null;if(!U){const e=d[i.material.substring(i.material.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=j&&j.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,o=j?I(j.alphaChannelUsage):void 0,u={ambient:l(e.diffuse),diffuse:l(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:P,initTextureTransparent:!0,doubleSided:!0,cullFace:f.None,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:!!j&&!!j.params.preMultiplyAlpha};a(t)&&t.materialParamsMixin&&Object.assign(u,t.materialParamsMixin),U=new x(u),s[i.material]||(s[i.material]={}),s[i.material][i.texture]=U}n.push(U);const E=new g(m,v);w+=v.position?v.position.length:0,r.push(E)}return{engineResources:[{name:m,stageResources:{textures:o,materials:n,geometries:r},pivotOffset:i.model.pivotOffset,numberOfVertices:w,lodThreshold:null}],referenceBoundingBox:U(r)}}function U(e){const t=c();return e.forEach((e=>{const r=e.boundingInfo;a(r)&&(m(t,r.getBBMin()),m(t,r.getBBMax()))})),t}async function E(e,t){const r=[];for(const o in e){const n=e[o],s=n.images[0].data;if(!s){w.warn(\"Externally referenced texture data is not yet supported\");continue}const i=n.encoding+\";base64,\"+s,u=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",c={noUnpackFlip:!0,wrap:{s:h.REPEAT,t:h.REPEAT},preMultiplyAlpha:I(l)!==d.Opaque},m=a(t)&&t.disableTextures?Promise.resolve(null):p(i,t);r.push(m.then((e=>({refId:u,image:e,params:c,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function I(e){switch(e){case\"mask\":return d.Mask;case\"maskAndTransparency\":return d.MaskBlend;case\"none\":return d.Opaque;default:return d.Blend}}function T(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const k=new u(1,2,\"wosr\");export{E as createTextureResources,b as load,P as processLoadResult};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,wBAAb;AAAsC,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,gCAAvB;AAAwD,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,yCAAzC;AAAmF,OAAOC,CAAP,MAAa,2BAAb;AAAyC,OAAOC,CAAP,MAAa,4BAAb;AAA0C,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,2BAAnC;AAA+D,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,kCAAlC;AAAqE,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,6BAAxB;AAAsD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,cAAc,IAAIC,CAApC,QAA0C,+CAA1C;AAA0F,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,0CAA7B;AAAwE,SAAOC,eAAe,IAAIC,CAA1B,EAA4BC,gBAAgB,IAAIV,CAAhD,QAAsD,2CAAtD;AAAkG,SAAOW,QAAQ,IAAIC,CAAnB,QAAyB,oCAAzB;AAA8D,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,mCAAxB;AAA4D,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,iDAAhC;AAAkF,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,yBAAhC;AAA0D,MAAMC,CAAC,GAAC5B,CAAC,CAAC6B,SAAF,CAAY,mDAAZ,CAAR;;AAAyE,eAAeC,CAAf,CAAiBpC,CAAjB,EAAmBE,CAAnB,EAAqB;EAAC,MAAMG,CAAC,GAAC,MAAMgC,CAAC,CAACrC,CAAD,EAAGE,CAAH,CAAf;EAAA,MAAqBI,CAAC,GAAC,MAAMgC,CAAC,CAACjC,CAAC,CAACkC,kBAAH,EAAsBrC,CAAtB,CAA9B;EAAuD,IAAIM,CAAC,GAAC,CAAN;;EAAQ,KAAI,MAAMJ,CAAV,IAAeE,CAAf,EAAiB,IAAGA,CAAC,CAACkC,cAAF,CAAiBpC,CAAjB,CAAH,EAAuB;IAAC,MAAMJ,CAAC,GAACM,CAAC,CAACF,CAAD,CAAT;IAAaI,CAAC,IAAER,CAAC,EAAEyC,KAAH,GAASzC,CAAC,CAACyC,KAAF,CAAQC,KAAR,GAAc1C,CAAC,CAACyC,KAAF,CAAQE,MAAtB,GAA6B,CAAtC,GAAwC,CAA3C;EAA6C;;EAAA,OAAM;IAACC,QAAQ,EAACvC,CAAV;IAAYwC,QAAQ,EAACvC,CAArB;IAAuBwC,IAAI,EAACtC,CAAC,GAACJ,CAAC,CAACC,CAAD;EAA/B,CAAN;AAA0C;;AAAA,eAAegC,CAAf,CAAiBjC,CAAjB,EAAmBC,CAAnB,EAAqB;EAAC,MAAMC,CAAC,GAACE,CAAC,CAACH,CAAD,CAAD,IAAMA,CAAC,CAAC0C,mBAAhB;EAAoC,IAAGzC,CAAH,EAAK,OAAO0C,CAAC,CAAC5C,CAAD,EAAGE,CAAH,EAAKD,CAAL,CAAR;EAAgB,MAAMS,CAAC,GAAC,MAAMZ,CAAC,CAACF,CAAC,CAACI,CAAD,EAAGM,CAAC,CAACL,CAAD,CAAJ,CAAF,CAAf;EAA2B,IAAG,CAAC,CAAD,KAAKS,CAAC,CAACmC,EAAV,EAAa,OAAOnC,CAAC,CAACoC,KAAF,CAAQC,IAAf;EAAoBvC,CAAC,CAACE,CAAC,CAACsC,KAAH,CAAD,EAAWC,CAAC,CAACvC,CAAC,CAACsC,KAAH,CAAZ;AAAsB;;AAAA,eAAeJ,CAAf,CAAiBhD,CAAjB,EAAmBI,CAAnB,EAAqBC,CAArB,EAAuB;EAAC,MAAMC,CAAC,GAAC,MAAMJ,CAAC,CAACE,CAAC,CAACkD,OAAF,CAAUtD,CAAV,EAAY,MAAZ,EAAmBK,CAAnB,CAAD,CAAf;EAAuC,IAAG,CAAC,CAAD,KAAKC,CAAC,CAAC2C,EAAV,EAAa,OAAO3C,CAAC,CAAC4C,KAAT;EAAetC,CAAC,CAACN,CAAC,CAAC8C,KAAH,CAAD,EAAWC,CAAC,CAAC/C,CAAC,CAAC8C,KAAF,CAAQG,OAAR,CAAgBC,GAAjB,CAAZ;AAAkC;;AAAA,SAASH,CAAT,CAAWrD,CAAX,EAAa;EAAC,MAAM,IAAIK,CAAJ,CAAM,EAAN,EAAU,uCAAsCL,CAAE,EAAlD,CAAN;AAA2D;;AAAA,SAASyD,CAAT,CAAWzD,CAAX,EAAa;EAAC,MAAME,CAAC,GAACF,CAAC,CAAC0D,MAAV;EAAA,MAAiBtD,CAAC,GAACF,CAAC,CAACyD,QAArB;EAA8B,IAAItD,CAAC,GAAC,CAAC,CAAP;;EAAS,QAAOH,CAAC,CAAC0D,gBAAF,KAAqB1B,CAAC,CAAC2B,IAAF,CAAO,yCAAP,GAAkDxD,CAAC,GAAC,CAAC,CAA1E,GAA6EH,CAAC,CAACyD,QAAtF;IAAgG,KAAI,mBAAJ;MAAwB;;IAAM,KAAI,SAAJ;IAAc,KAAK,IAAL;IAAU,KAAK,KAAK,CAAV;MAAY;QAAC,MAAM3D,CAAC,GAACE,CAAC,CAAC4D,KAAV;;QAAgB,IAAG9D,CAAH,EAAK;UAAC,IAAGE,CAAC,CAAC0D,gBAAL,EAAsB,KAAI,MAAMxD,CAAV,IAAeF,CAAC,CAAC0D,gBAAjB,EAAkC;YAAC,MAAM1D,CAAC,GAACF,CAAC,CAACI,CAAD,CAAT;YAAaF,CAAC,IAAEA,CAAC,CAAC6D,MAAL,IAAa,QAAM7D,CAAC,CAAC8D,SAAR,IAAmB,aAAW9D,CAAC,CAAC8D,SAAhC,KAA4C9B,CAAC,CAAC2B,IAAF,CAAQ,8CAA6C3D,CAAC,CAAC8D,SAAU,uCAAjE,GAAyG3D,CAAC,GAAC,CAAC,CAAxJ,GAA2J,QAAMH,CAAC,CAAC+D,gBAAR,IAA0B,MAAI/D,CAAC,CAAC+D,gBAAhC,KAAmD/B,CAAC,CAAC2B,IAAF,CAAQ,oDAAmD3D,CAAC,CAAC+D,gBAAiB,kCAA9E,GAAiH5D,CAAC,GAAC,CAAC,CAAvK,CAAxK,KAAoV6B,CAAC,CAAC2B,IAAF,CAAQ,uDAAsDzD,CAAE,aAAhE,GAA8EC,CAAC,GAAC,CAAC,CAAra;UAAwa;QAAC,CAArf,MAA0f6B,CAAC,CAAC2B,IAAF,CAAO,uCAAP,GAAgDxD,CAAC,GAAC,CAAC,CAAnD;;QAAqD;MAAM;;IAAA;MAAQ6B,CAAC,CAAC2B,IAAF,CAAQ,yBAAwBzD,CAAE,GAAlC,GAAsCC,CAAC,GAAC,CAAC,CAAzC;EAAhvB;;EAA2xBL,CAAC,CAAC0D,MAAF,CAASQ,QAAT,KAAoBhC,CAAC,CAAC2B,IAAF,CAAO,4BAAP,GAAqCxD,CAAC,GAAC,CAAC,CAA5D;EAA+D,MAAMC,CAAC,GAACN,CAAC,CAAC0D,MAAF,CAASE,gBAAjB;;EAAkC,KAAI,MAAMpD,CAAV,IAAeF,CAAf,EAAiB;IAACA,CAAC,CAACE,CAAD,CAAD,CAAKuD,MAAL,KAAc7B,CAAC,CAAC2B,IAAF,CAAO,qEAAP,GAA8ExD,CAAC,GAAC,CAAC,CAA/F;EAAkG;;EAAA,OAAOA,CAAP;AAAS;;AAAA,SAAS8D,CAAT,CAAWnE,CAAX,EAAaE,CAAb,EAAe;EAAC,MAAME,CAAC,GAAC,EAAR;EAAA,MAAWC,CAAC,GAAC,EAAb;EAAA,MAAgBC,CAAC,GAAC,EAAlB;EAAA,MAAqBI,CAAC,GAAC,EAAvB;EAAA,MAA0BE,CAAC,GAACZ,CAAC,CAAC4C,QAA9B;EAAA,MAAuC1B,CAAC,GAACJ,CAAC,CAACsD,KAAF,CAAQxD,CAAC,CAACyD,OAAF,IAAW,KAAnB,EAAyB,MAAzB,CAAzC;EAA0EC,CAAC,CAACC,QAAF,CAAWrD,CAAX;EAAc,MAAME,CAAC,GAACR,CAAC,CAAC4D,KAAF,CAAQC,IAAhB;EAAA,MAAqBnD,CAAC,GAACV,CAAC,CAAC4D,KAAF,CAAQE,UAA/B;EAAA,MAA0C3D,CAAC,GAACH,CAAC,CAAC+D,mBAA9C;EAAA,MAAkE1C,CAAC,GAACjC,CAAC,CAAC6C,QAAtE;EAA+E,IAAIX,CAAC,GAAC,CAAN;EAAQ,MAAME,CAAC,GAAC,IAAIwC,GAAJ,EAAR;;EAAgB,KAAI,IAAI9D,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACQ,CAAC,CAACuD,MAAhB,EAAuB/D,CAAC,EAAxB,EAA2B;IAAC,MAAMd,CAAC,GAACsB,CAAC,CAACR,CAAD,CAAT;IAAa,IAAG,CAAC2C,CAAC,CAACzD,CAAD,CAAL,EAAS;IAAS,MAAMY,CAAC,GAACkE,CAAC,CAAC9E,CAAD,CAAT;IAAA,MAAakB,CAAC,GAAClB,CAAC,CAAC0D,MAAF,CAASE,gBAAxB;IAAA,MAAyCxC,CAAC,GAAC,EAA3C;;IAA8C,KAAI,MAAMlB,CAAV,IAAegB,CAAf,EAAiB;MAAC,MAAMlB,CAAC,GAACkB,CAAC,CAAChB,CAAD,CAAT;MAAA,MAAaE,CAAC,GAACJ,CAAC,CAAC+D,MAAjB;MAAwB3C,CAAC,CAAC2D,IAAF,CAAO,CAAC7E,CAAD,EAAG;QAACiD,IAAI,EAAC/C,CAAN;QAAQ0C,IAAI,EAAC9C,CAAC,CAACiE,gBAAf;QAAgCe,SAAS,EAAC,CAAC;MAA3C,CAAH,CAAP;IAA0D;;IAAA,MAAM3C,CAAC,GAAC,EAAR;;IAAW,IAAG,wBAAsBrC,CAAC,CAAC0D,MAAF,CAASC,QAAlC,EAA2C;MAAC,MAAMzD,CAAC,GAACF,CAAC,CAAC0D,MAAF,CAASI,KAAjB;;MAAuB,KAAI,MAAM9D,CAAV,IAAeE,CAAf,EAAiBmC,CAAC,CAAC0C,IAAF,CAAO,CAAC/E,CAAD,EAAGE,CAAC,CAACF,CAAD,CAAD,CAAK+D,MAAR,CAAP;IAAwB;;IAAA,MAAMf,CAAC,GAACf,CAAC,IAAEA,CAAC,CAACrB,CAAC,CAACqE,OAAH,CAAZ;;IAAwB,IAAGjC,CAAC,IAAE,CAACZ,CAAC,CAAC8C,GAAF,CAAMtE,CAAC,CAACqE,OAAR,CAAP,EAAwB;MAAC,MAAK;QAACxC,KAAK,EAACzC,CAAP;QAAS0D,MAAM,EAACxD;MAAhB,IAAmB8C,CAAxB;MAAA,MAA0B5C,CAAC,GAAC,IAAIyB,CAAJ,CAAM7B,CAAN,EAAQE,CAAR,CAA5B;MAAuCQ,CAAC,CAACqE,IAAF,CAAO3E,CAAP,GAAUgC,CAAC,CAAC+C,GAAF,CAAMvE,CAAC,CAACqE,OAAR,EAAgB7E,CAAhB,CAAV;IAA6B;;IAAA,MAAMiD,CAAC,GAACjB,CAAC,CAACgD,GAAF,CAAMxE,CAAC,CAACqE,OAAR,CAAR;IAAA,MAAyBd,CAAC,GAACd,CAAC,GAACA,CAAC,CAACgC,EAAH,GAAM,KAAK,CAAvC;IAAyC,IAAIC,CAAC,GAAChF,CAAC,CAACM,CAAC,CAACsD,QAAH,CAAD,GAAc5D,CAAC,CAACM,CAAC,CAACsD,QAAH,CAAD,CAActD,CAAC,CAACqE,OAAhB,CAAd,GAAuC,IAA7C;;IAAkD,IAAG,CAACK,CAAJ,EAAM;MAAC,MAAMtF,CAAC,GAACe,CAAC,CAACH,CAAC,CAACsD,QAAF,CAAWqB,SAAX,CAAqB3E,CAAC,CAACsD,QAAF,CAAWsB,WAAX,CAAuB,GAAvB,IAA4B,CAAjD,CAAD,CAAD,CAAuD9B,MAA/D;MAAsE,MAAI1D,CAAC,CAACyF,YAAN,KAAqBzF,CAAC,CAACyF,YAAF,GAAe,CAApC;MAAuC,MAAMrF,CAAC,GAAC4C,CAAC,IAAEA,CAAC,CAAC0C,iBAAb;MAAA,MAA+BrF,CAAC,GAACL,CAAC,CAACyF,YAAF,GAAe,CAAf,IAAkB,mBAAiBrF,CAAnC,IAAsC,0BAAwBA,CAA/F;MAAA,MAAiGM,CAAC,GAACsC,CAAC,GAAC2C,CAAC,CAAC3C,CAAC,CAAC0C,iBAAH,CAAF,GAAwB,KAAK,CAAjI;MAAA,MAAmI5E,CAAC,GAAC;QAAC8E,OAAO,EAAC5E,CAAC,CAAChB,CAAC,CAAC6F,OAAH,CAAV;QAAsBA,OAAO,EAAC7E,CAAC,CAAChB,CAAC,CAAC6F,OAAH,CAA/B;QAA2CC,OAAO,EAAC,KAAG9F,CAAC,CAACyF,YAAF,IAAgB,CAAnB,CAAnD;QAAyEM,WAAW,EAAC1F,CAArF;QAAuF2F,gBAAgB,EAACtF,CAAxG;QAA0GuF,kBAAkB,EAAC,GAA7H;QAAiIC,SAAS,EAAC/B,CAA3I;QAA6IgC,sBAAsB,EAAC,CAAC,CAArK;QAAuKC,WAAW,EAAC,CAAC,CAApL;QAAsLC,QAAQ,EAAC7E,CAAC,CAAC8E,IAAjM;QAAsMC,YAAY,EAACvG,CAAC,CAACwG,oBAAF,IAAwB,MAA3O;QAAkPC,yBAAyB,EAAC,CAAC,CAACzD,CAAF,IAAK,CAAC,CAACA,CAAC,CAACU,MAAF,CAASgD;MAA5R,CAArI;MAAmblG,CAAC,CAACN,CAAD,CAAD,IAAMA,CAAC,CAACyG,mBAAR,IAA6BC,MAAM,CAACC,MAAP,CAAc/F,CAAd,EAAgBZ,CAAC,CAACyG,mBAAlB,CAA7B,EAAoErB,CAAC,GAAC,IAAIvD,CAAJ,CAAMjB,CAAN,CAAtE,EAA+ER,CAAC,CAACM,CAAC,CAACsD,QAAH,CAAD,KAAgB5D,CAAC,CAACM,CAAC,CAACsD,QAAH,CAAD,GAAc,EAA9B,CAA/E,EAAiH5D,CAAC,CAACM,CAAC,CAACsD,QAAH,CAAD,CAActD,CAAC,CAACqE,OAAhB,IAAyBK,CAA1I;IAA4I;;IAAAjF,CAAC,CAAC0E,IAAF,CAAOO,CAAP;IAAU,MAAMhD,CAAC,GAAC,IAAIX,CAAJ,CAAMP,CAAN,EAAQiB,CAAR,CAAR;IAAmBH,CAAC,IAAEG,CAAC,CAACyE,QAAF,GAAWzE,CAAC,CAACyE,QAAF,CAAWjC,MAAtB,GAA6B,CAAhC,EAAkCzE,CAAC,CAAC2E,IAAF,CAAOzC,CAAP,CAAlC;EAA4C;;EAAA,OAAM;IAACyE,eAAe,EAAC,CAAC;MAACtC,IAAI,EAACrD,CAAN;MAAQ4F,cAAc,EAAC;QAACnE,QAAQ,EAACnC,CAAV;QAAYuG,SAAS,EAAC5G,CAAtB;QAAwBqE,UAAU,EAACtE;MAAnC,CAAvB;MAA6D8G,WAAW,EAACtG,CAAC,CAAC4D,KAAF,CAAQ0C,WAAjF;MAA6FC,gBAAgB,EAACjF,CAA9G;MAAgHkF,YAAY,EAAC;IAA7H,CAAD,CAAjB;IAAsJC,oBAAoB,EAAC/B,CAAC,CAAClF,CAAD;EAA5K,CAAN;AAAuL;;AAAA,SAASkF,CAAT,CAAWtF,CAAX,EAAa;EAAC,MAAME,CAAC,GAACgB,CAAC,EAAT;EAAY,OAAOlB,CAAC,CAACsH,OAAF,CAAWtH,CAAC,IAAE;IAAC,MAAMI,CAAC,GAACJ,CAAC,CAACuH,YAAV;IAAuB/G,CAAC,CAACJ,CAAD,CAAD,KAAOgB,CAAC,CAAClB,CAAD,EAAGE,CAAC,CAACoH,QAAF,EAAH,CAAD,EAAkBpG,CAAC,CAAClB,CAAD,EAAGE,CAAC,CAACqH,QAAF,EAAH,CAA1B;EAA4C,CAAlF,GAAqFvH,CAA5F;AAA8F;;AAAA,eAAeoC,CAAf,CAAiBtC,CAAjB,EAAmBE,CAAnB,EAAqB;EAAC,MAAME,CAAC,GAAC,EAAR;;EAAW,KAAI,MAAMM,CAAV,IAAeV,CAAf,EAAiB;IAAC,MAAMK,CAAC,GAACL,CAAC,CAACU,CAAD,CAAT;IAAA,MAAaJ,CAAC,GAACD,CAAC,CAACqH,MAAF,CAAS,CAAT,EAAYvE,IAA3B;;IAAgC,IAAG,CAAC7C,CAAJ,EAAM;MAAC4B,CAAC,CAAC2B,IAAF,CAAO,yDAAP;MAAkE;IAAS;;IAAA,MAAMjD,CAAC,GAACP,CAAC,CAACsH,QAAF,GAAW,UAAX,GAAsBrH,CAA9B;IAAA,MAAgCQ,CAAC,GAAC,yBAAuBJ,CAAzD;IAAA,MAA2DM,CAAC,GAAC,WAASX,CAAC,CAACuH,QAAX,GAAoBvH,CAAC,CAACqF,iBAAF,IAAqB,cAAzC,GAAwD,MAArH;IAAA,MAA4HxE,CAAC,GAAC;MAAC2G,YAAY,EAAC,CAAC,CAAf;MAAiBC,IAAI,EAAC;QAACxH,CAAC,EAAC2B,CAAC,CAAC8F,MAAL;QAAY7H,CAAC,EAAC+B,CAAC,CAAC8F;MAAhB,CAAtB;MAA8CrB,gBAAgB,EAACf,CAAC,CAAC3E,CAAD,CAAD,KAAOD,CAAC,CAACiH;IAAxE,CAA9H;IAAA,MAA8M5G,CAAC,GAACZ,CAAC,CAACN,CAAD,CAAD,IAAMA,CAAC,CAAC+H,eAAR,GAAwBC,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAxB,GAA8C7G,CAAC,CAACV,CAAD,EAAGV,CAAH,CAA/P;IAAqQE,CAAC,CAAC2E,IAAF,CAAO3D,CAAC,CAACgH,IAAF,CAAQpI,CAAC,KAAG;MAACqI,KAAK,EAACvH,CAAP;MAAS2B,KAAK,EAACzC,CAAf;MAAiB0D,MAAM,EAACxC,CAAxB;MAA0BwE,iBAAiB,EAAC1E;IAA5C,CAAH,CAAT,CAAP;EAAsE;;EAAA,MAAMX,CAAC,GAAC,MAAM6H,OAAO,CAACI,GAAR,CAAYlI,CAAZ,CAAd;EAAA,MAA6BE,CAAC,GAAC,EAA/B;;EAAkC,KAAI,MAAME,CAAV,IAAeH,CAAf,EAAiBC,CAAC,CAACE,CAAC,CAAC6H,KAAH,CAAD,GAAW7H,CAAX;;EAAa,OAAOF,CAAP;AAAS;;AAAA,SAASqF,CAAT,CAAW3F,CAAX,EAAa;EAAC,QAAOA,CAAP;IAAU,KAAI,MAAJ;MAAW,OAAOe,CAAC,CAACwH,IAAT;;IAAc,KAAI,qBAAJ;MAA0B,OAAOxH,CAAC,CAACyH,SAAT;;IAAmB,KAAI,MAAJ;MAAW,OAAOzH,CAAC,CAACiH,MAAT;;IAAgB;MAAQ,OAAOjH,CAAC,CAAC0H,KAAT;EAAnH;AAAmI;;AAAA,SAAS3D,CAAT,CAAW9E,CAAX,EAAa;EAAC,MAAME,CAAC,GAACF,CAAC,CAAC0D,MAAV;EAAiB,OAAM;IAAC2B,EAAE,EAAC,CAAJ;IAAMnB,QAAQ,EAAChE,CAAC,CAACgE,QAAjB;IAA0Be,OAAO,EAAC/E,CAAC,CAAC+E,OAApC;IAA4CyD,MAAM,EAACxI,CAAC,CAAC+E;EAArD,CAAN;AAAoE;;AAAA,MAAMX,CAAC,GAAC,IAAIxD,CAAJ,CAAM,CAAN,EAAQ,CAAR,EAAU,MAAV,CAAR;AAA0B,SAAOwB,CAAC,IAAIqG,sBAAZ,EAAmCvG,CAAC,IAAIwG,IAAxC,EAA6CzE,CAAC,IAAI0E,iBAAlD"},"metadata":{},"sourceType":"module"}