{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../core/Accessor.js\";\nimport t from \"../../../core/Collection.js\";\nimport { isSome as o } from \"../../../core/maybe.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { sv3d as p } from \"../../../geometry/support/vectorStacks.js\";\nimport { SnappingTypes as n } from \"../../../layers/graphics/data/QueryEngineResult.js\";\nimport a from \"./FeatureSnappingLayerSource.js\";\nimport { sortCandidatesInPlace as c } from \"./snappingUtils.js\";\nimport { SceneLayerSnappingSource as u } from \"./featureSources/SceneLayerSnappingSource.js\";\nimport { anyMapPointToRender as l } from \"../support/viewUtils.js\";\nlet m = class extends r {\n  constructor(e) {\n    super(e), this.options = null, this._snappingSources = new t();\n  }\n\n  initialize() {\n    this.own([this.view.on(\"layerview-create\", ({\n      layerView: e\n    }) => this._createSource(e)), this.view.on(\"layerview-destroy\", ({\n      layerView: e\n    }) => this._removeSource(e))]);\n\n    for (const e of this.view.allLayerViews.items) this._createSource(e);\n  }\n\n  destroy() {\n    this.options = null, this._snappingSources.drain(e => e.destroy());\n  }\n\n  get updating() {\n    return this._snappingSources.some(e => e.updating);\n  }\n\n  get _types() {\n    return n.EDGE | n.VERTEX;\n  }\n\n  async fetchCandidates(e, r, t) {\n    const {\n      view: s,\n      options: i\n    } = this,\n          {\n      coordinateHelper: n,\n      elevationInfo: a\n    } = r,\n          u = o(i) ? i.distance : 1,\n          m = l(e, n, a, s, p.get()),\n          y = u * s.state.camera.computeScreenPixelSizeAt(m),\n          S = this._types,\n          d = this._snappingSources.items.map(r => r.fetchCandidates({\n      point: e,\n      coordinateHelper: n,\n      distance: y,\n      types: S\n    }, t)),\n          h = (await Promise.all(d)).flat();\n\n    return c(e, h), h;\n  }\n\n  _createSource(e) {\n    if (\"scene-layer-3d\" !== e.type) return;\n    const r = new u({\n      layerSource: new a({\n        layer: e.layer\n      }),\n      view: this.view\n    });\n\n    this._snappingSources.push(r);\n  }\n\n  _removeSource(e) {\n    const r = this._snappingSources.findIndex(r => r.layerSource.layer === e.layer);\n\n    -1 !== r && this._snappingSources.removeAt(r).destroy();\n  }\n\n};\ne([s({\n  constructOnly: !0\n})], m.prototype, \"view\", void 0), e([s()], m.prototype, \"updating\", null), e([s()], m.prototype, \"options\", void 0), e([s()], m.prototype, \"_snappingSources\", void 0), m = e([i(\"esri.views.interactive.snapping.SceneSnappingEngine\")], m);\nexport { m as SceneSnappingEngine };","map":{"version":3,"names":["_","e","r","t","isSome","o","property","s","subclass","i","sv3d","p","SnappingTypes","n","a","sortCandidatesInPlace","c","SceneLayerSnappingSource","u","anyMapPointToRender","l","m","constructor","options","_snappingSources","initialize","own","view","on","layerView","_createSource","_removeSource","allLayerViews","items","destroy","drain","updating","some","_types","EDGE","VERTEX","fetchCandidates","coordinateHelper","elevationInfo","distance","get","y","state","camera","computeScreenPixelSizeAt","S","d","map","point","types","h","Promise","all","flat","type","layerSource","layer","push","findIndex","removeAt","constructOnly","prototype","SceneSnappingEngine"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/interactive/snapping/SceneSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Accessor.js\";import t from\"../../../core/Collection.js\";import{isSome as o}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{sv3d as p}from\"../../../geometry/support/vectorStacks.js\";import{SnappingTypes as n}from\"../../../layers/graphics/data/QueryEngineResult.js\";import a from\"./FeatureSnappingLayerSource.js\";import{sortCandidatesInPlace as c}from\"./snappingUtils.js\";import{SceneLayerSnappingSource as u}from\"./featureSources/SceneLayerSnappingSource.js\";import{anyMapPointToRender as l}from\"../support/viewUtils.js\";let m=class extends r{constructor(e){super(e),this.options=null,this._snappingSources=new t}initialize(){this.own([this.view.on(\"layerview-create\",(({layerView:e})=>this._createSource(e))),this.view.on(\"layerview-destroy\",(({layerView:e})=>this._removeSource(e)))]);for(const e of this.view.allLayerViews.items)this._createSource(e)}destroy(){this.options=null,this._snappingSources.drain((e=>e.destroy()))}get updating(){return this._snappingSources.some((e=>e.updating))}get _types(){return n.EDGE|n.VERTEX}async fetchCandidates(e,r,t){const{view:s,options:i}=this,{coordinateHelper:n,elevationInfo:a}=r,u=o(i)?i.distance:1,m=l(e,n,a,s,p.get()),y=u*s.state.camera.computeScreenPixelSizeAt(m),S=this._types,d=this._snappingSources.items.map((r=>r.fetchCandidates({point:e,coordinateHelper:n,distance:y,types:S},t))),h=(await Promise.all(d)).flat();return c(e,h),h}_createSource(e){if(\"scene-layer-3d\"!==e.type)return;const r=new u({layerSource:new a({layer:e.layer}),view:this.view});this._snappingSources.push(r)}_removeSource(e){const r=this._snappingSources.findIndex((r=>r.layerSource.layer===e.layer));-1!==r&&this._snappingSources.removeAt(r).destroy()}};e([s({constructOnly:!0})],m.prototype,\"view\",void 0),e([s()],m.prototype,\"updating\",null),e([s()],m.prototype,\"options\",void 0),e([s()],m.prototype,\"_snappingSources\",void 0),m=e([i(\"esri.views.interactive.snapping.SceneSnappingEngine\")],m);export{m as SceneSnappingEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}