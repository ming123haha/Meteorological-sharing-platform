{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Logger.js\";\nimport { disposeMaybe as t, isSome as r, isNone as i } from \"../../../../../core/maybe.js\";\nimport { WGLSymbologyType as a } from \"../enums.js\";\nimport s from \"../VertexStream.js\";\nimport u from \"./WGLGeometryBrushMarker.js\";\nimport { Effect as n } from \"../effects/Effect.js\";\nimport { assertRendererSchema as o } from \"../techniques/utils.js\";\nimport { ContextType as h } from \"../../../../webgl/context-util.js\";\nimport { CompareFunction as c, DataType as l, BlendFactor as f, ClearBufferBit as m, TextureType as d, TextureWrapMode as p, RenderbufferFormat as _, PixelFormat as b, PixelType as g, TextureSamplingMode as F } from \"../../../../webgl/enums.js\";\nimport { FramebufferObject as w } from \"../../../../webgl/FramebufferObject.js\";\nimport { loadHeatmapTextureConfiguration as T } from \"../../../../webgl/heatmapTextureUtils.js\";\nimport { Renderbuffer as E } from \"../../../../webgl/Renderbuffer.js\";\nimport { Texture as O } from \"../../../../webgl/Texture.js\";\nconst S = e.getLogger(\"esri.views.2d.engine.webgl.brushes.WGLBrushHeatmap\");\n\nfunction x(e) {\n  return \"heatmap\" === e.type;\n}\n\nclass B extends u {\n  constructor() {\n    super(...arguments), this.brushEffect = new y();\n  }\n\n  supportsSymbology(e) {\n    return e === a.HEATMAP;\n  }\n\n  dispose() {\n    super.dispose(), this.brushEffect.dispose(), this.brushEffect = null;\n  }\n\n  prepareState() {}\n\n  drawGeometry(e, t, r, i) {\n    const {\n      defines: a\n    } = this.brushEffect.loadQualityProfile(e.context);\n    super.drawGeometry(e, t, r, i ? [...i, ...a] : a);\n  }\n\n  _drawMarkers(e, t, r, i, a, s, u) {\n    const {\n      context: n,\n      rendererInfo: h,\n      state: f\n    } = e,\n          {\n      rendererSchema: m\n    } = h;\n    o(m, \"heatmap\");\n    const {\n      referenceScale: d,\n      radius: p,\n      isFieldActive: _\n    } = m,\n          b = p * (0 !== d ? d / f.scale : 1);\n    r.setUniform1f(\"u_radius\", b), u || (r.setUniform1f(\"u_isFieldActive\", _), n.setStencilFunction(c.GEQUAL, t.stencilRef, 255)), n.drawElements(i, a, l.UNSIGNED_INT, s);\n  }\n\n}\n\nconst v = {\n  vsPath: \"heatmap/heatmapResolve\",\n  fsPath: \"heatmap/heatmapResolve\",\n  attributes: new Map([[\"a_position\", 0]])\n};\n\nclass y extends n {\n  constructor() {\n    super(...arguments), this.name = this.constructor.name;\n  }\n\n  createOptions({\n    passOptions: e\n  }) {\n    return e;\n  }\n\n  dispose() {\n    this._prevFBO = null, this._accumulateOutputTexture = t(this._accumulateOutputTexture), r(this._accumulateFramebuffer) && this._accumulateFramebuffer.detachDepthStencilBuffer(), this._accumulateOutputStencilBuffer = t(this._accumulateOutputStencilBuffer), this._accumulateFramebuffer = t(this._accumulateFramebuffer), this._resolveGradientTexture = t(this._resolveGradientTexture), this._tileQuad = t(this._tileQuad);\n  }\n\n  bind(e) {\n    const {\n      context: t,\n      rendererInfo: i,\n      passOptions: a\n    } = e,\n          {\n      rendererSchema: s\n    } = i;\n    !(r(a) && \"hittest\" === a.type) && x(s) && (this._prevFBO = t.getBoundFramebufferObject(), this._prevViewport = t.getViewport(), o(s, \"heatmap\"), this._loadResources(e), this._updateResources(t, s), t.bindFramebuffer(this._accumulateFramebuffer), t.setViewport(0, 0, this._accumulateFramebuffer.width, this._accumulateFramebuffer.height), t.setStencilTestEnabled(!0), t.setBlendingEnabled(!0), t.setBlendFunction(f.ONE, f.ONE), t.setClearColor(0, 0, 0, 0), t.clear(m.COLOR_BUFFER_BIT));\n  }\n\n  unbind() {\n    this._prevFBO = null, this._prevViewport = null;\n  }\n\n  draw(e) {\n    const {\n      context: t,\n      painter: i,\n      rendererInfo: a,\n      passOptions: s\n    } = e,\n          {\n      rendererSchema: u\n    } = a;\n    if (r(s) && \"hittest\" === s.type || !x(u)) return;\n    const {\n      defines: n\n    } = this.loadQualityProfile(t),\n          o = i.materialManager.getProgram(v, n);\n    t.useProgram(o), t.bindFramebuffer(this._prevFBO), t.setViewport(0, 0, this._prevViewport.width, this._prevViewport.height), t.setBlendFunction(f.ONE, f.ONE_MINUS_SRC_ALPHA), t.setStencilTestEnabled(!1);\n    const {\n      radius: h,\n      minDensity: c,\n      densityRange: l\n    } = u;\n    t.bindTexture(this._accumulateOutputTexture, 8), t.bindTexture(this._resolveGradientTexture, 9), o.setUniform1i(\"u_texture\", 8), o.setUniform1i(\"u_gradient\", 9), o.setUniform2f(\"u_densityMinAndInvRange\", c, 1 / l), o.setUniform1f(\"u_densityNormalization\", 3 / (h * h * Math.PI)), this._tileQuad.draw();\n  }\n\n  _loadResources({\n    context: e,\n    painter: t\n  }) {\n    const {\n      dataType: r,\n      samplingMode: i,\n      pixelFormat: a,\n      internalFormat: u,\n      shadingRate: n,\n      requiresSharedStencilBuffer: o\n    } = this.loadQualityProfile(e),\n          {\n      width: h,\n      height: c\n    } = this._prevViewport,\n          l = h * n,\n          f = c * n;\n    this._accumulateOutputTexture ?? (this._accumulateOutputTexture = new O(e, {\n      target: d.TEXTURE_2D,\n      pixelFormat: a,\n      internalFormat: u,\n      dataType: r,\n      samplingMode: i,\n      wrapMode: p.CLAMP_TO_EDGE,\n      width: l,\n      height: f\n    })), o || (this._accumulateOutputStencilBuffer ?? (this._accumulateOutputStencilBuffer = new E(e, {\n      width: l,\n      height: f,\n      internalFormat: _.DEPTH_STENCIL\n    }))), this._accumulateFramebuffer ?? (this._accumulateFramebuffer = new w(e, {}, this._accumulateOutputTexture, o ? t.getSharedStencilBuffer() : this._accumulateOutputStencilBuffer)), this._resolveGradientTexture ?? (this._resolveGradientTexture = new O(e, {\n      target: d.TEXTURE_2D,\n      pixelFormat: b.RGBA,\n      dataType: g.UNSIGNED_BYTE,\n      samplingMode: F.LINEAR,\n      wrapMode: p.CLAMP_TO_EDGE\n    })), this._tileQuad ?? (this._tileQuad = new s(e, [0, 0, 1, 0, 0, 1, 1, 1]));\n  }\n\n  _updateResources(e, t) {\n    const {\n      gradientHash: i,\n      gradient: a\n    } = t;\n    this._prevGradientHash !== i && (this._resolveGradientTexture.resize(a.length / 4, 1), this._resolveGradientTexture.setData(a), this._prevGradientHash = i);\n    const {\n      shadingRate: s,\n      requiresSharedStencilBuffer: u\n    } = this.loadQualityProfile(e),\n          {\n      width: n,\n      height: o\n    } = this._prevViewport,\n          h = n * s,\n          c = o * s,\n          {\n      width: l,\n      height: f\n    } = this._accumulateFramebuffer;\n\n    if (l !== h || f !== c) {\n      const e = this._accumulateFramebuffer.depthStencilAttachment;\n\n      if (u && r(e)) {\n        const {\n          width: t,\n          height: r\n        } = e.descriptor;\n        t === h && r === c || (S.errorOnce(\"Attempted to resize shared stencil buffer! Detaching instead.\"), this._accumulateFramebuffer.detachDepthStencilBuffer());\n      }\n\n      this._accumulateFramebuffer.resize(h, c);\n    }\n\n    u || e.blitFramebuffer(this._prevFBO, this._accumulateFramebuffer, 0, 0, this._prevFBO.width, this._prevFBO.height, 0, 0, this._accumulateFramebuffer.width, this._accumulateFramebuffer.height, m.STENCIL_BUFFER_BIT, F.NEAREST);\n  }\n\n  loadQualityProfile(e) {\n    if (i(this._qualityProfile)) {\n      const t = T(e, S),\n            r = e.type === h.WEBGL1;\n      this._qualityProfile = { ...t,\n        requiresSharedStencilBuffer: r,\n        shadingRate: r ? 1 : .25,\n        defines: t.dataType !== g.FLOAT ? [\"heatmapPrecisionHalfFloat\"] : []\n      };\n    }\n\n    return this._qualityProfile;\n  }\n\n}\n\nexport { B as default };","map":{"version":3,"names":["e","disposeMaybe","t","isSome","r","isNone","i","WGLSymbologyType","a","s","u","Effect","n","assertRendererSchema","o","ContextType","h","CompareFunction","c","DataType","l","BlendFactor","f","ClearBufferBit","m","TextureType","d","TextureWrapMode","p","RenderbufferFormat","_","PixelFormat","b","PixelType","g","TextureSamplingMode","F","FramebufferObject","w","loadHeatmapTextureConfiguration","T","Renderbuffer","E","Texture","O","S","getLogger","x","type","B","constructor","arguments","brushEffect","y","supportsSymbology","HEATMAP","dispose","prepareState","drawGeometry","defines","loadQualityProfile","context","_drawMarkers","rendererInfo","state","rendererSchema","referenceScale","radius","isFieldActive","scale","setUniform1f","setStencilFunction","GEQUAL","stencilRef","drawElements","UNSIGNED_INT","v","vsPath","fsPath","attributes","Map","name","createOptions","passOptions","_prevFBO","_accumulateOutputTexture","_accumulateFramebuffer","detachDepthStencilBuffer","_accumulateOutputStencilBuffer","_resolveGradientTexture","_tileQuad","bind","getBoundFramebufferObject","_prevViewport","getViewport","_loadResources","_updateResources","bindFramebuffer","setViewport","width","height","setStencilTestEnabled","setBlendingEnabled","setBlendFunction","ONE","setClearColor","clear","COLOR_BUFFER_BIT","unbind","draw","painter","materialManager","getProgram","useProgram","ONE_MINUS_SRC_ALPHA","minDensity","densityRange","bindTexture","setUniform1i","setUniform2f","Math","PI","dataType","samplingMode","pixelFormat","internalFormat","shadingRate","requiresSharedStencilBuffer","target","TEXTURE_2D","wrapMode","CLAMP_TO_EDGE","DEPTH_STENCIL","getSharedStencilBuffer","RGBA","UNSIGNED_BYTE","LINEAR","gradientHash","gradient","_prevGradientHash","resize","length","setData","depthStencilAttachment","descriptor","errorOnce","blitFramebuffer","STENCIL_BUFFER_BIT","NEAREST","_qualityProfile","WEBGL1","FLOAT","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushHeatmap.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import{disposeMaybe as t,isSome as r,isNone as i}from\"../../../../../core/maybe.js\";import{WGLSymbologyType as a}from\"../enums.js\";import s from\"../VertexStream.js\";import u from\"./WGLGeometryBrushMarker.js\";import{Effect as n}from\"../effects/Effect.js\";import{assertRendererSchema as o}from\"../techniques/utils.js\";import{ContextType as h}from\"../../../../webgl/context-util.js\";import{CompareFunction as c,DataType as l,BlendFactor as f,ClearBufferBit as m,TextureType as d,TextureWrapMode as p,RenderbufferFormat as _,PixelFormat as b,PixelType as g,TextureSamplingMode as F}from\"../../../../webgl/enums.js\";import{FramebufferObject as w}from\"../../../../webgl/FramebufferObject.js\";import{loadHeatmapTextureConfiguration as T}from\"../../../../webgl/heatmapTextureUtils.js\";import{Renderbuffer as E}from\"../../../../webgl/Renderbuffer.js\";import{Texture as O}from\"../../../../webgl/Texture.js\";const S=e.getLogger(\"esri.views.2d.engine.webgl.brushes.WGLBrushHeatmap\");function x(e){return\"heatmap\"===e.type}class B extends u{constructor(){super(...arguments),this.brushEffect=new y}supportsSymbology(e){return e===a.HEATMAP}dispose(){super.dispose(),this.brushEffect.dispose(),this.brushEffect=null}prepareState(){}drawGeometry(e,t,r,i){const{defines:a}=this.brushEffect.loadQualityProfile(e.context);super.drawGeometry(e,t,r,i?[...i,...a]:a)}_drawMarkers(e,t,r,i,a,s,u){const{context:n,rendererInfo:h,state:f}=e,{rendererSchema:m}=h;o(m,\"heatmap\");const{referenceScale:d,radius:p,isFieldActive:_}=m,b=p*(0!==d?d/f.scale:1);r.setUniform1f(\"u_radius\",b),u||(r.setUniform1f(\"u_isFieldActive\",_),n.setStencilFunction(c.GEQUAL,t.stencilRef,255)),n.drawElements(i,a,l.UNSIGNED_INT,s)}}const v={vsPath:\"heatmap/heatmapResolve\",fsPath:\"heatmap/heatmapResolve\",attributes:new Map([[\"a_position\",0]])};class y extends n{constructor(){super(...arguments),this.name=this.constructor.name}createOptions({passOptions:e}){return e}dispose(){this._prevFBO=null,this._accumulateOutputTexture=t(this._accumulateOutputTexture),r(this._accumulateFramebuffer)&&this._accumulateFramebuffer.detachDepthStencilBuffer(),this._accumulateOutputStencilBuffer=t(this._accumulateOutputStencilBuffer),this._accumulateFramebuffer=t(this._accumulateFramebuffer),this._resolveGradientTexture=t(this._resolveGradientTexture),this._tileQuad=t(this._tileQuad)}bind(e){const{context:t,rendererInfo:i,passOptions:a}=e,{rendererSchema:s}=i;!(r(a)&&\"hittest\"===a.type)&&x(s)&&(this._prevFBO=t.getBoundFramebufferObject(),this._prevViewport=t.getViewport(),o(s,\"heatmap\"),this._loadResources(e),this._updateResources(t,s),t.bindFramebuffer(this._accumulateFramebuffer),t.setViewport(0,0,this._accumulateFramebuffer.width,this._accumulateFramebuffer.height),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0),t.setBlendFunction(f.ONE,f.ONE),t.setClearColor(0,0,0,0),t.clear(m.COLOR_BUFFER_BIT))}unbind(){this._prevFBO=null,this._prevViewport=null}draw(e){const{context:t,painter:i,rendererInfo:a,passOptions:s}=e,{rendererSchema:u}=a;if(r(s)&&\"hittest\"===s.type||!x(u))return;const{defines:n}=this.loadQualityProfile(t),o=i.materialManager.getProgram(v,n);t.useProgram(o),t.bindFramebuffer(this._prevFBO),t.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),t.setBlendFunction(f.ONE,f.ONE_MINUS_SRC_ALPHA),t.setStencilTestEnabled(!1);const{radius:h,minDensity:c,densityRange:l}=u;t.bindTexture(this._accumulateOutputTexture,8),t.bindTexture(this._resolveGradientTexture,9),o.setUniform1i(\"u_texture\",8),o.setUniform1i(\"u_gradient\",9),o.setUniform2f(\"u_densityMinAndInvRange\",c,1/l),o.setUniform1f(\"u_densityNormalization\",3/(h*h*Math.PI)),this._tileQuad.draw()}_loadResources({context:e,painter:t}){const{dataType:r,samplingMode:i,pixelFormat:a,internalFormat:u,shadingRate:n,requiresSharedStencilBuffer:o}=this.loadQualityProfile(e),{width:h,height:c}=this._prevViewport,l=h*n,f=c*n;this._accumulateOutputTexture??(this._accumulateOutputTexture=new O(e,{target:d.TEXTURE_2D,pixelFormat:a,internalFormat:u,dataType:r,samplingMode:i,wrapMode:p.CLAMP_TO_EDGE,width:l,height:f})),o||(this._accumulateOutputStencilBuffer??(this._accumulateOutputStencilBuffer=new E(e,{width:l,height:f,internalFormat:_.DEPTH_STENCIL}))),this._accumulateFramebuffer??(this._accumulateFramebuffer=new w(e,{},this._accumulateOutputTexture,o?t.getSharedStencilBuffer():this._accumulateOutputStencilBuffer)),this._resolveGradientTexture??(this._resolveGradientTexture=new O(e,{target:d.TEXTURE_2D,pixelFormat:b.RGBA,dataType:g.UNSIGNED_BYTE,samplingMode:F.LINEAR,wrapMode:p.CLAMP_TO_EDGE})),this._tileQuad??(this._tileQuad=new s(e,[0,0,1,0,0,1,1,1]))}_updateResources(e,t){const{gradientHash:i,gradient:a}=t;this._prevGradientHash!==i&&(this._resolveGradientTexture.resize(a.length/4,1),this._resolveGradientTexture.setData(a),this._prevGradientHash=i);const{shadingRate:s,requiresSharedStencilBuffer:u}=this.loadQualityProfile(e),{width:n,height:o}=this._prevViewport,h=n*s,c=o*s,{width:l,height:f}=this._accumulateFramebuffer;if(l!==h||f!==c){const e=this._accumulateFramebuffer.depthStencilAttachment;if(u&&r(e)){const{width:t,height:r}=e.descriptor;t===h&&r===c||(S.errorOnce(\"Attempted to resize shared stencil buffer! Detaching instead.\"),this._accumulateFramebuffer.detachDepthStencilBuffer())}this._accumulateFramebuffer.resize(h,c)}u||e.blitFramebuffer(this._prevFBO,this._accumulateFramebuffer,0,0,this._prevFBO.width,this._prevFBO.height,0,0,this._accumulateFramebuffer.width,this._accumulateFramebuffer.height,m.STENCIL_BUFFER_BIT,F.NEAREST)}loadQualityProfile(e){if(i(this._qualityProfile)){const t=T(e,S),r=e.type===h.WEBGL1;this._qualityProfile={...t,requiresSharedStencilBuffer:r,shadingRate:r?1:.25,defines:t.dataType!==g.FLOAT?[\"heatmapPrecisionHalfFloat\"]:[]}}return this._qualityProfile}}export{B as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}