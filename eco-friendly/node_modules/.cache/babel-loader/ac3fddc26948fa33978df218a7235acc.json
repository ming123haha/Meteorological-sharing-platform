{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../../core/maybe.js\";\nimport e from \"../MemoryBuffer.js\";\nimport { EncodingType as n, AttributeStatus as o } from \"./enums.js\";\nimport { DataType as s } from \"../../../../webgl/enums.js\";\nimport { VertexElementDescriptor as r } from \"../../../../webgl/VertexElementDescriptor.js\";\n\nclass i {\n  constructor(t) {\n    this._locations = new Map(), this._key = t;\n  }\n\n  get key() {\n    return this._key;\n  }\n\n  get type() {\n    return 7 & this._key;\n  }\n\n  defines() {\n    return [];\n  }\n\n  getStride() {\n    return this._layoutInfo || this._buildAttributesInfo(), this._stride;\n  }\n\n  getAttributeLocations() {\n    return 0 === this._locations.size && this._buildAttributesInfo(), this._locations;\n  }\n\n  getLayoutInfo() {\n    return this._layoutInfo || this._buildAttributesInfo(), this._layoutInfo;\n  }\n\n  getEncodingInfos() {\n    return this._propertyEncodingInfo || this._buildAttributesInfo(), this._propertyEncodingInfo;\n  }\n\n  getUniforms() {\n    return this._uniforms || this._buildAttributesInfo(), this._uniforms;\n  }\n\n  getShaderHeader() {\n    return this._shaderHeader || this._buildAttributesInfo(), this._shaderHeader;\n  }\n\n  getShaderMain() {\n    return this._shaderMain || this._buildAttributesInfo(), this._shaderMain;\n  }\n\n  setDataUniforms(t, e, n, o, s) {\n    const r = this.getUniforms();\n\n    for (const i of r) {\n      const {\n        name: r,\n        type: a,\n        getValue: c\n      } = i,\n            u = c(n, e, o, s);\n      if (null !== u) switch (a) {\n        case \"float\":\n          t.setUniform1f(r, u);\n          break;\n\n        case \"vec2\":\n          t.setUniform2fv(r, u);\n          break;\n\n        case \"vec4\":\n          t.setUniform4fv(r, u);\n      }\n    }\n  }\n\n  encodeAttributes(t, e, o, s) {\n    const r = this.attributesInfo(),\n          i = this.getEncodingInfos(),\n          a = [];\n    let c = 0,\n        u = 0;\n\n    for (const f of Object.keys(i)) {\n      const _ = i[f],\n            {\n        type: h,\n        precisionFactor: d,\n        isLayout: l\n      } = r[f],\n            y = l ? o.getLayoutProperty(f) : o.getPaintProperty(f),\n            m = y.interpolator?.getInterpolationRange(e);\n      let I = 0;\n\n      for (const o of _) {\n        const {\n          offset: r,\n          bufferElementsToAdd: i\n        } = o;\n\n        if (i > 0) {\n          for (let t = 0; t < i; t++) a.push(0);\n\n          c += u, u = o.bufferElementsToAdd;\n        }\n\n        const f = s ?? y.getValue(m ? m[I] : e, t);\n\n        switch (h) {\n          case n.R8_SIGNED:\n          case n.R8_UNSIGNED:\n            a[c] |= this._encodeByte(f * (d || 1), 8 * r);\n            break;\n\n          case n.R16_SIGNED:\n          case n.R16_UNSIGNED:\n            a[c] |= this._encodeShort(f * (d || 1), 8 * r);\n            break;\n\n          case n.R8G8_SIGNED:\n          case n.R8G8_UNSIGNED:\n            a[c] |= this._encodeByte(f * (d || 1), 8 * r), a[c] |= this._encodeByte(f * (d || 1), 8 * r + 8);\n            break;\n\n          case n.R16G16_SIGNED:\n          case n.R16G16_UNSIGNED:\n            a[c] |= this._encodeShort(f * (d || 1), 8 * r), a[c] |= this._encodeShort(f * (d || 1), 8 * r + 16);\n            break;\n\n          case n.R8G8B8A8_SIGNED:\n          case n.R8G8B8A8_UNSIGNED:\n            a[c] |= this._encodeByte(f * (d || 1), 8 * r), a[c] |= this._encodeByte(f * (d || 1), 8 * r + 8), a[c] |= this._encodeByte(f * (d || 1), 8 * r + 16), a[c] |= this._encodeByte(f * (d || 1), 8 * r + 24);\n            break;\n\n          case n.R8G8B8A8_COLOR:\n            a[c] = this._encodeColor(f);\n            break;\n\n          case n.R16G16B16A16_DASHARRAY:\n          case n.R16G16B16A16_PATTERN:\n            this._encodePattern(c, a, f);\n\n            break;\n\n          default:\n            throw new Error(\"Unsupported encoding type\");\n        }\n\n        I++;\n      }\n    }\n\n    return a;\n  }\n\n  getAtributeState(t) {\n    let e = 0;\n    const n = 3 + 2 * t;\n    return e |= this._bit(n), e |= this._bit(n + 1) << 1, e;\n  }\n\n  _buildAttributesInfo() {\n    const t = [],\n          e = {},\n          n = {};\n    let r = -1;\n    const a = this.attributesInfo(),\n          c = this.attributes();\n    let u = -1;\n\n    for (const s of c) {\n      u++;\n      const c = this.getAtributeState(u);\n      if (c === o.UNIFORM || c === o.UNUSED) continue;\n      const f = a[s],\n            _ = [];\n      e[s] = _;\n      const h = f.type;\n\n      for (let e = 0; e < c; e++) {\n        const {\n          dataType: e,\n          bytesPerElement: o,\n          count: s,\n          normalized: a\n        } = i._encodingInfo[h],\n              c = o * s,\n              u = `${e}-${!0 === a}`;\n        let f = n[u],\n            d = 0;\n        if (!f || f.count + s > 4) r++, f = {\n          dataIndex: r,\n          count: 0,\n          offset: 0\n        }, 4 !== s && (n[u] = f), t.push({\n          location: -1,\n          name: \"a_data_\" + r,\n          count: s,\n          type: e,\n          normalized: a\n        }), d = Math.ceil(Math.max(c / 4, 1));else {\n          const e = t[f.dataIndex];\n          e.count += s;\n          d = Math.ceil(Math.max(e.count * o / 4, 1)) - Math.ceil(Math.max(f.offset / 4, 1));\n        }\n        _.push({\n          dataIndex: f.dataIndex,\n          offset: f.offset,\n          bufferElementsToAdd: d\n        }), f.offset += c, f.count += s;\n      }\n    }\n\n    for (const o of t) switch (o.type) {\n      case s.BYTE:\n      case s.UNSIGNED_BYTE:\n        o.count = 4;\n        break;\n\n      case s.SHORT:\n      case s.UNSIGNED_SHORT:\n        o.count += o.count % 2;\n    }\n\n    this._buildVertexBufferLayout(t);\n\n    let f = 0;\n    const _ = this._layoutInfo.geometry;\n\n    for (const o of _) this._locations.set(o.name, f++);\n\n    const h = this._layoutInfo.opacity;\n    if (h) for (const o of h) this._locations.set(o.name, f++);\n    this._buildShaderInfo(t, e), this._propertyEncodingInfo = e;\n  }\n\n  _buildVertexBufferLayout(t) {\n    const e = {},\n          n = this.geometryInfo();\n    let o = n[0].stride;\n    if (0 === t.length) e.geometry = n;else {\n      const s = [];\n      let i = o;\n\n      for (const e of t) o += a(e.type) * e.count;\n\n      for (const t of n) s.push(new r(t.name, t.count, t.type, t.offset, o, t.normalized));\n\n      for (const e of t) s.push(new r(e.name, e.count, e.type, i, o, e.normalized)), i += a(e.type) * e.count;\n\n      e.geometry = s;\n    }\n    this.opacityInfo() && (e.opacity = this.opacityInfo()), this._layoutInfo = e, this._stride = o;\n  }\n\n  _buildShaderInfo(e, s) {\n    let r = \"\\n\",\n        a = \"\\n\";\n    const u = [];\n\n    for (const t of e) r += `attribute ${this._getType(t.count)} ${t.name};\\n`;\n\n    const f = this.attributes(),\n          _ = this.attributesInfo();\n\n    let h = -1;\n\n    for (const d of f) {\n      h++;\n\n      const {\n        name: e,\n        type: f,\n        precisionFactor: l,\n        isLayout: y\n      } = _[d],\n            m = l && 1 !== l ? \" * \" + 1 / l : \"\",\n            {\n        bytesPerElement: I,\n        count: E\n      } = i._encodingInfo[f],\n            p = t => `a_data_${t.dataIndex}${c(E, t.offset, I)}`;\n\n      switch (this.getAtributeState(h)) {\n        case o.UNIFORM:\n          {\n            const o = this._getType(E),\n                  s = `u_${e}`;\n\n            u.push({\n              name: s,\n              type: o,\n              getValue: (e, o, s, r) => {\n                const i = y ? e.getLayoutValue(d, o) : e.getPaintValue(d, o);\n\n                if (f === n.R16G16B16A16_DASHARRAY) {\n                  const n = e.getDashKey(i, e.getLayoutValue(\"line-cap\", o)),\n                        s = r.getMosaicItemPosition(n, !1);\n                  if (t(s)) return null;\n                  const {\n                    tl: a,\n                    br: c\n                  } = s;\n                  return [a[0], c[1], c[0], a[1]];\n                }\n\n                if (f === n.R16G16B16A16_PATTERN) {\n                  const e = r.getMosaicItemPosition(i, !d.includes(\"line-\"));\n                  if (t(e)) return null;\n                  const {\n                    tl: n,\n                    br: o\n                  } = e;\n                  return [n[0], o[1], o[0], n[1]];\n                }\n\n                if (f === n.R8G8B8A8_COLOR) {\n                  const t = i[3];\n                  return [t * i[0], t * i[1], t * i[2], t];\n                }\n\n                return i;\n              }\n            }), r += `uniform ${o} ${s};\\n`, a += `${o} ${e} = ${s};\\n`;\n          }\n          break;\n\n        case o.DATA_DRIVEN:\n          {\n            const t = p(s[d][0]);\n            a += `${this._getType(E)} ${e} = ${t}${m};\\n`;\n          }\n          break;\n\n        case o.INTERPOLATED_DATA_DRIVEN:\n          {\n            const t = `u_t_${e}`;\n            u.push({\n              name: t,\n              type: \"float\",\n              getValue: (t, e, n, o) => (y ? t.getLayoutProperty(d) : t.getPaintProperty(d)).interpolator.interpolationUniformValue(n, e)\n            }), r += `uniform float ${t};\\n`;\n            const n = p(s[d][0]),\n                  o = p(s[d][1]);\n            a += `${this._getType(E)} ${e} = mix(${n}${m}, ${o}${m}, ${t});\\n`;\n          }\n      }\n    }\n\n    this._shaderHeader = r, this._shaderMain = a, this._uniforms = u;\n  }\n\n  _bit(t) {\n    return (this._key & 1 << t) >> t;\n  }\n\n  _getType(t) {\n    switch (t) {\n      case 1:\n        return \"float\";\n\n      case 2:\n        return \"vec2\";\n\n      case 3:\n        return \"vec3\";\n\n      case 4:\n        return \"vec4\";\n    }\n\n    throw new Error(\"Invalid count\");\n  }\n\n  _encodeColor(t) {\n    const n = 255 * t[3];\n    return e.i8888to32(t[0] * n, t[1] * n, t[2] * n, n);\n  }\n\n  _encodePattern(t, e, n) {\n    if (!n || !n.rect) return;\n    const o = 2,\n          s = n.rect,\n          r = n.width,\n          i = n.height;\n    e[t] = this._encodeShort(s.x + o, 0), e[t] |= this._encodeShort(s.y + o + i, 16), e[t + 1] = this._encodeShort(s.x + o + r, 0), e[t + 1] |= this._encodeShort(s.y + o, 16);\n  }\n\n  _encodeByte(t, e) {\n    return (255 & t) << e;\n  }\n\n  _encodeShort(t, e) {\n    return (65535 & t) << e;\n  }\n\n}\n\ni._encodingInfo = {\n  [n.R8_SIGNED]: {\n    dataType: s.BYTE,\n    bytesPerElement: 1,\n    count: 1,\n    normalized: !1\n  },\n  [n.R8_UNSIGNED]: {\n    dataType: s.UNSIGNED_BYTE,\n    bytesPerElement: 1,\n    count: 1,\n    normalized: !1\n  },\n  [n.R16_SIGNED]: {\n    dataType: s.SHORT,\n    bytesPerElement: 2,\n    count: 1,\n    normalized: !1\n  },\n  [n.R16_UNSIGNED]: {\n    dataType: s.UNSIGNED_SHORT,\n    bytesPerElement: 2,\n    count: 1,\n    normalized: !1\n  },\n  [n.R8G8_SIGNED]: {\n    dataType: s.BYTE,\n    bytesPerElement: 1,\n    count: 2,\n    normalized: !1\n  },\n  [n.R8G8_UNSIGNED]: {\n    dataType: s.UNSIGNED_BYTE,\n    bytesPerElement: 1,\n    count: 2,\n    normalized: !1\n  },\n  [n.R16G16_SIGNED]: {\n    dataType: s.SHORT,\n    bytesPerElement: 2,\n    count: 2,\n    normalized: !1\n  },\n  [n.R16G16_UNSIGNED]: {\n    dataType: s.UNSIGNED_SHORT,\n    bytesPerElement: 2,\n    count: 2,\n    normalized: !1\n  },\n  [n.R8G8B8A8_SIGNED]: {\n    dataType: s.BYTE,\n    bytesPerElement: 1,\n    count: 4,\n    normalized: !1\n  },\n  [n.R8G8B8A8_UNSIGNED]: {\n    dataType: s.UNSIGNED_BYTE,\n    bytesPerElement: 1,\n    count: 4,\n    normalized: !1\n  },\n  [n.R8G8B8A8_COLOR]: {\n    dataType: s.UNSIGNED_BYTE,\n    bytesPerElement: 1,\n    count: 4,\n    normalized: !0\n  },\n  [n.R16G16B16A16_DASHARRAY]: {\n    dataType: s.UNSIGNED_SHORT,\n    bytesPerElement: 2,\n    count: 4,\n    normalized: !1\n  },\n  [n.R16G16B16A16_PATTERN]: {\n    dataType: s.UNSIGNED_SHORT,\n    bytesPerElement: 2,\n    count: 4,\n    normalized: !1\n  }\n};\n\nconst a = t => {\n  switch (t) {\n    case s.FLOAT:\n    case s.INT:\n    case s.UNSIGNED_INT:\n      return 4;\n\n    case s.SHORT:\n    case s.UNSIGNED_SHORT:\n      return 2;\n\n    case s.BYTE:\n    case s.UNSIGNED_BYTE:\n      return 1;\n  }\n},\n      c = (t, e, n) => {\n  const o = e / n;\n  if (1 === t) switch (o) {\n    case 0:\n      return \".x\";\n\n    case 1:\n      return \".y\";\n\n    case 2:\n      return \".z\";\n\n    case 3:\n      return \".w\";\n  } else if (2 === t) switch (o) {\n    case 0:\n      return \".xy\";\n\n    case 1:\n      return \".yz\";\n\n    case 2:\n      return \".zw\";\n  } else if (3 === t) switch (o) {\n    case 0:\n      return \".xyz\";\n\n    case 1:\n      return \".yzw\";\n  }\n  return \"\";\n};\n\nexport { i as VTLMaterial };","map":{"version":3,"names":["isNone","t","e","EncodingType","n","AttributeStatus","o","DataType","s","VertexElementDescriptor","r","i","constructor","_locations","Map","_key","key","type","defines","getStride","_layoutInfo","_buildAttributesInfo","_stride","getAttributeLocations","size","getLayoutInfo","getEncodingInfos","_propertyEncodingInfo","getUniforms","_uniforms","getShaderHeader","_shaderHeader","getShaderMain","_shaderMain","setDataUniforms","name","a","getValue","c","u","setUniform1f","setUniform2fv","setUniform4fv","encodeAttributes","attributesInfo","f","Object","keys","_","h","precisionFactor","d","isLayout","l","y","getLayoutProperty","getPaintProperty","m","interpolator","getInterpolationRange","I","offset","bufferElementsToAdd","push","R8_SIGNED","R8_UNSIGNED","_encodeByte","R16_SIGNED","R16_UNSIGNED","_encodeShort","R8G8_SIGNED","R8G8_UNSIGNED","R16G16_SIGNED","R16G16_UNSIGNED","R8G8B8A8_SIGNED","R8G8B8A8_UNSIGNED","R8G8B8A8_COLOR","_encodeColor","R16G16B16A16_DASHARRAY","R16G16B16A16_PATTERN","_encodePattern","Error","getAtributeState","_bit","attributes","UNIFORM","UNUSED","dataType","bytesPerElement","count","normalized","_encodingInfo","dataIndex","location","Math","ceil","max","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","_buildVertexBufferLayout","geometry","set","opacity","_buildShaderInfo","geometryInfo","stride","length","opacityInfo","_getType","E","p","getLayoutValue","getPaintValue","getDashKey","getMosaicItemPosition","tl","br","includes","DATA_DRIVEN","INTERPOLATED_DATA_DRIVEN","interpolationUniformValue","i8888to32","rect","width","height","x","FLOAT","INT","UNSIGNED_INT","VTLMaterial"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../../core/maybe.js\";import e from\"../MemoryBuffer.js\";import{EncodingType as n,AttributeStatus as o}from\"./enums.js\";import{DataType as s}from\"../../../../webgl/enums.js\";import{VertexElementDescriptor as r}from\"../../../../webgl/VertexElementDescriptor.js\";class i{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,n,o,s){const r=this.getUniforms();for(const i of r){const{name:r,type:a,getValue:c}=i,u=c(n,e,o,s);if(null!==u)switch(a){case\"float\":t.setUniform1f(r,u);break;case\"vec2\":t.setUniform2fv(r,u);break;case\"vec4\":t.setUniform4fv(r,u)}}}encodeAttributes(t,e,o,s){const r=this.attributesInfo(),i=this.getEncodingInfos(),a=[];let c=0,u=0;for(const f of Object.keys(i)){const _=i[f],{type:h,precisionFactor:d,isLayout:l}=r[f],y=l?o.getLayoutProperty(f):o.getPaintProperty(f),m=y.interpolator?.getInterpolationRange(e);let I=0;for(const o of _){const{offset:r,bufferElementsToAdd:i}=o;if(i>0){for(let t=0;t<i;t++)a.push(0);c+=u,u=o.bufferElementsToAdd}const f=s??y.getValue(m?m[I]:e,t);switch(h){case n.R8_SIGNED:case n.R8_UNSIGNED:a[c]|=this._encodeByte(f*(d||1),8*r);break;case n.R16_SIGNED:case n.R16_UNSIGNED:a[c]|=this._encodeShort(f*(d||1),8*r);break;case n.R8G8_SIGNED:case n.R8G8_UNSIGNED:a[c]|=this._encodeByte(f*(d||1),8*r),a[c]|=this._encodeByte(f*(d||1),8*r+8);break;case n.R16G16_SIGNED:case n.R16G16_UNSIGNED:a[c]|=this._encodeShort(f*(d||1),8*r),a[c]|=this._encodeShort(f*(d||1),8*r+16);break;case n.R8G8B8A8_SIGNED:case n.R8G8B8A8_UNSIGNED:a[c]|=this._encodeByte(f*(d||1),8*r),a[c]|=this._encodeByte(f*(d||1),8*r+8),a[c]|=this._encodeByte(f*(d||1),8*r+16),a[c]|=this._encodeByte(f*(d||1),8*r+24);break;case n.R8G8B8A8_COLOR:a[c]=this._encodeColor(f);break;case n.R16G16B16A16_DASHARRAY:case n.R16G16B16A16_PATTERN:this._encodePattern(c,a,f);break;default:throw new Error(\"Unsupported encoding type\")}I++}}return a}getAtributeState(t){let e=0;const n=3+2*t;return e|=this._bit(n),e|=this._bit(n+1)<<1,e}_buildAttributesInfo(){const t=[],e={},n={};let r=-1;const a=this.attributesInfo(),c=this.attributes();let u=-1;for(const s of c){u++;const c=this.getAtributeState(u);if(c===o.UNIFORM||c===o.UNUSED)continue;const f=a[s],_=[];e[s]=_;const h=f.type;for(let e=0;e<c;e++){const{dataType:e,bytesPerElement:o,count:s,normalized:a}=i._encodingInfo[h],c=o*s,u=`${e}-${!0===a}`;let f=n[u],d=0;if(!f||f.count+s>4)r++,f={dataIndex:r,count:0,offset:0},4!==s&&(n[u]=f),t.push({location:-1,name:\"a_data_\"+r,count:s,type:e,normalized:a}),d=Math.ceil(Math.max(c/4,1));else{const e=t[f.dataIndex];e.count+=s;d=Math.ceil(Math.max(e.count*o/4,1))-Math.ceil(Math.max(f.offset/4,1))}_.push({dataIndex:f.dataIndex,offset:f.offset,bufferElementsToAdd:d}),f.offset+=c,f.count+=s}}for(const o of t)switch(o.type){case s.BYTE:case s.UNSIGNED_BYTE:o.count=4;break;case s.SHORT:case s.UNSIGNED_SHORT:o.count+=o.count%2}this._buildVertexBufferLayout(t);let f=0;const _=this._layoutInfo.geometry;for(const o of _)this._locations.set(o.name,f++);const h=this._layoutInfo.opacity;if(h)for(const o of h)this._locations.set(o.name,f++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e={},n=this.geometryInfo();let o=n[0].stride;if(0===t.length)e.geometry=n;else{const s=[];let i=o;for(const e of t)o+=a(e.type)*e.count;for(const t of n)s.push(new r(t.name,t.count,t.type,t.offset,o,t.normalized));for(const e of t)s.push(new r(e.name,e.count,e.type,i,o,e.normalized)),i+=a(e.type)*e.count;e.geometry=s}this.opacityInfo()&&(e.opacity=this.opacityInfo()),this._layoutInfo=e,this._stride=o}_buildShaderInfo(e,s){let r=\"\\n\",a=\"\\n\";const u=[];for(const t of e)r+=`attribute ${this._getType(t.count)} ${t.name};\\n`;const f=this.attributes(),_=this.attributesInfo();let h=-1;for(const d of f){h++;const{name:e,type:f,precisionFactor:l,isLayout:y}=_[d],m=l&&1!==l?\" * \"+1/l:\"\",{bytesPerElement:I,count:E}=i._encodingInfo[f],p=t=>`a_data_${t.dataIndex}${c(E,t.offset,I)}`;switch(this.getAtributeState(h)){case o.UNIFORM:{const o=this._getType(E),s=`u_${e}`;u.push({name:s,type:o,getValue:(e,o,s,r)=>{const i=y?e.getLayoutValue(d,o):e.getPaintValue(d,o);if(f===n.R16G16B16A16_DASHARRAY){const n=e.getDashKey(i,e.getLayoutValue(\"line-cap\",o)),s=r.getMosaicItemPosition(n,!1);if(t(s))return null;const{tl:a,br:c}=s;return[a[0],c[1],c[0],a[1]]}if(f===n.R16G16B16A16_PATTERN){const e=r.getMosaicItemPosition(i,!d.includes(\"line-\"));if(t(e))return null;const{tl:n,br:o}=e;return[n[0],o[1],o[0],n[1]]}if(f===n.R8G8B8A8_COLOR){const t=i[3];return[t*i[0],t*i[1],t*i[2],t]}return i}}),r+=`uniform ${o} ${s};\\n`,a+=`${o} ${e} = ${s};\\n`}break;case o.DATA_DRIVEN:{const t=p(s[d][0]);a+=`${this._getType(E)} ${e} = ${t}${m};\\n`}break;case o.INTERPOLATED_DATA_DRIVEN:{const t=`u_t_${e}`;u.push({name:t,type:\"float\",getValue:(t,e,n,o)=>(y?t.getLayoutProperty(d):t.getPaintProperty(d)).interpolator.interpolationUniformValue(n,e)}),r+=`uniform float ${t};\\n`;const n=p(s[d][0]),o=p(s[d][1]);a+=`${this._getType(E)} ${e} = mix(${n}${m}, ${o}${m}, ${t});\\n`}}}this._shaderHeader=r,this._shaderMain=a,this._uniforms=u}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return\"float\";case 2:return\"vec2\";case 3:return\"vec3\";case 4:return\"vec4\"}throw new Error(\"Invalid count\")}_encodeColor(t){const n=255*t[3];return e.i8888to32(t[0]*n,t[1]*n,t[2]*n,n)}_encodePattern(t,e,n){if(!n||!n.rect)return;const o=2,s=n.rect,r=n.width,i=n.height;e[t]=this._encodeShort(s.x+o,0),e[t]|=this._encodeShort(s.y+o+i,16),e[t+1]=this._encodeShort(s.x+o+r,0),e[t+1]|=this._encodeShort(s.y+o,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}i._encodingInfo={[n.R8_SIGNED]:{dataType:s.BYTE,bytesPerElement:1,count:1,normalized:!1},[n.R8_UNSIGNED]:{dataType:s.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[n.R16_SIGNED]:{dataType:s.SHORT,bytesPerElement:2,count:1,normalized:!1},[n.R16_UNSIGNED]:{dataType:s.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[n.R8G8_SIGNED]:{dataType:s.BYTE,bytesPerElement:1,count:2,normalized:!1},[n.R8G8_UNSIGNED]:{dataType:s.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[n.R16G16_SIGNED]:{dataType:s.SHORT,bytesPerElement:2,count:2,normalized:!1},[n.R16G16_UNSIGNED]:{dataType:s.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[n.R8G8B8A8_SIGNED]:{dataType:s.BYTE,bytesPerElement:1,count:4,normalized:!1},[n.R8G8B8A8_UNSIGNED]:{dataType:s.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[n.R8G8B8A8_COLOR]:{dataType:s.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[n.R16G16B16A16_DASHARRAY]:{dataType:s.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[n.R16G16B16A16_PATTERN]:{dataType:s.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const a=t=>{switch(t){case s.FLOAT:case s.INT:case s.UNSIGNED_INT:return 4;case s.SHORT:case s.UNSIGNED_SHORT:return 2;case s.BYTE:case s.UNSIGNED_BYTE:return 1}},c=(t,e,n)=>{const o=e/n;if(1===t)switch(o){case 0:return\".x\";case 1:return\".y\";case 2:return\".z\";case 3:return\".w\"}else if(2===t)switch(o){case 0:return\".xy\";case 1:return\".yz\";case 2:return\".zw\"}else if(3===t)switch(o){case 0:return\".xyz\";case 1:return\".yzw\"}return\"\"};export{i as VTLMaterial};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}