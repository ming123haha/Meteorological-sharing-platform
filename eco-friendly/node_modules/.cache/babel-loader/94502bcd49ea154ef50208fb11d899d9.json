{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport { getFeatureId as t } from \"../../../../analysis/featureReferenceUtils.js\";\nimport o from \"../../../../core/Accessor.js\";\nimport i from \"../../../../core/Evented.js\";\nimport n from \"../../../../core/Handles.js\";\nimport { handlesGroup as r, makeHandle as s } from \"../../../../core/handleUtils.js\";\nimport { equals as a } from \"../../../../core/lang.js\";\nimport c from \"../../../../core/Logger.js\";\nimport { isNone as l, isSome as u, abortMaybe as p, unwrapOr as d, none as h } from \"../../../../core/maybe.js\";\nimport { createTask as g, ignoreAbortErrors as v } from \"../../../../core/promiseUtils.js\";\nimport { watch as m, on as f, syncAndInitial as _, sync as b } from \"../../../../core/reactiveUtils.js\";\nimport { property as y } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as C } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as I, i as T, b as O, n as P, g as S, a as j, j as w, v as R } from \"../../../../chunks/vec3.js\";\nimport { c as A } from \"../../../../chunks/vec3f64.js\";\nimport { WatchUpdatingTracking as E } from \"../../../../core/support/WatchUpdatingTracking.js\";\nimport { projectOrLoad as L, projectBoundingRect as F } from \"../../../../geometry/projection.js\";\nimport { empty as V, containsPointObject as H, intersectsSegment as D } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { fromPoints as x, create as N } from \"../../../../geometry/support/ray.js\";\nimport { zValueInAbsoluteHeightMode as k } from \"../../../../support/elevationInfoUtils.js\";\nimport { LineOfSightAnalysisResult as z } from \"../LineOfSightAnalysisResult.js\";\nimport { LineOfSightComputation as G } from \"./LineOfSightComputation.js\";\nimport { LineOfSightRayIntersector as M } from \"./LineOfSightRayIntersector.js\";\nimport { logFailedGeometryProjectionError as U } from \"../support/projectionUtils.js\";\nimport { StoreResults as Z } from \"../../webgl-engine/lib/IntersectorInterfaces.js\";\nimport { toGraphic as q, hasLod as B, getIntersectedFeatureBSRadius as W } from \"../../webgl-engine/lib/intersectorUtilsConversions.js\";\nimport { ImmediateTask as J, TaskPriority as K } from \"../../../support/Scheduler.js\";\nimport Q from \"../../../../geometry/Point.js\";\nconst X = c.getLogger(\"esri.views.3d.analysis.LineOfSight.LineOfSightController\");\nlet Y = class extends i.EventedMixin(o) {\n  constructor(e) {\n    super(e), this.updateOnCameraChange = !0, this._effectiveObserverElevationMode = \"absolute-height\", this._observerFeatureId = null, this._updatingHandles = new E(), this._frameTask = J, this._handles = new n(), this._computationHandles = new n(), this._externalObserverUpdate = !0;\n  }\n\n  initialize() {\n    const e = this.view.resourceController?.scheduler;\n    this._frameTask = e ? e.registerTask(K.LINE_OF_SIGHT_TOOL) : J, this._intersector = new M({\n      view: this.view\n    }), this._handles.add([this._connectObserver(), this._connectComputations(), this._connectTargets()]);\n  }\n\n  destroy() {\n    this._handles.destroy(), this._computationHandles.destroy(), this._computations.removeAll(), this._updatingHandles.destroy();\n  }\n\n  get updating() {\n    return this._frameTask.updating || this._updatingHandles.updating;\n  }\n\n  get priority() {\n    return this._frameTask.priority;\n  }\n\n  set priority(e) {\n    this._frameTask.priority = e;\n  }\n\n  get _computations() {\n    return this.analysisViewData.computations;\n  }\n\n  get _elevationAlignedObserverPositionRenderSpace() {\n    return this.analysisViewData.observerEngineLocation;\n  }\n\n  set _elevationAlignedObserverPositionRenderSpace(e) {\n    this.analysisViewData.observerEngineLocation = e;\n  }\n\n  get _screenPixelSize() {\n    return this.view.state.camera.computeScreenPixelSizeAt(this._elevationAlignedObserverPositionRenderSpace);\n  }\n\n  getLineOfSightComputationDependencies(e) {\n    const {\n      inputPoints: t\n    } = e;\n    return {\n      inputPoints: t\n    };\n  }\n\n  _computeResult(e) {\n    const t = e.computation,\n          {\n      inputPoints: o,\n      computationResult: i\n    } = t,\n          {\n      observerAdjusted: n,\n      targetAdjusted: r\n    } = o,\n          {\n      start: s,\n      end: a\n    } = i;\n    I(s, n), I(a, r);\n    this._canCompute(t) ? this._computeIntersection(e) : this._interpolateIntersection(e), t.notifyResultChanged(), this.emit(\"result-changed\", {\n      target: e.computation.target,\n      result: t.result\n    });\n  }\n\n  _updateAdjustedPointsFromFeatures(e) {\n    const o = this.view,\n          {\n      sceneIntersectionHelper: i\n    } = o,\n          {\n      inputPoints: n\n    } = e,\n          {\n      observerAdjusted: r,\n      observerFeatureId: s,\n      targetFeatureId: a,\n      targetAdjusted: c\n    } = n;\n    if (l(s) && l(a)) return;\n    const p = T(r, c),\n          d = this._intersector.intersector,\n          h = x(n.observer, n.target, te);\n    d.options.store = Z.ALL, i.intersectToolIntersectorRay(h, d);\n    let g = null,\n        v = null,\n        m = null,\n        f = null;\n\n    for (const _ of d.results.all) {\n      const e = q(_, this.view);\n      if (l(e) || l(_.distanceInRenderSpace)) continue;\n      const i = t(e);\n      l(i) || (u(s) && i === s && (l(g) && (g = this._getFeatureDistanceThreshold(_, o, p)), _.distanceInRenderSpace < g && (m = _)), u(a) && i === a && (l(v) && (v = this._getFeatureDistanceThreshold(_, o, p)), l(f) && _.distanceInRenderSpace < p && p - _.distanceInRenderSpace < v && (f = _)));\n    }\n\n    u(m) && m.getIntersectionPoint(r) && (n.observerSurfaceNormal = m.getTransformedNormal(A())), u(f) && f.getIntersectionPoint(c) && (n.targetSurfaceNormal = f.getTransformedNormal(A()));\n  }\n\n  _getFeatureDistanceThreshold(e, t, o) {\n    if (B(e)) {\n      const i = W(e, t);\n      if (u(i)) return Math.min(i * ie, o);\n    }\n\n    return 1e-5 * o;\n  }\n\n  _adjustStartEndPositions(e) {\n    const t = this._screenPixelSize,\n          o = this.view,\n          {\n      inputPoints: i\n    } = e,\n          {\n      observer: n,\n      observerSurfaceNormal: r,\n      target: s,\n      targetSurfaceNormal: a,\n      observerAdjusted: c,\n      targetAdjusted: l\n    } = i,\n          p = ee;\n    I(c, n), I(l, s), this._updateAdjustedPointsFromFeatures(e), u(r) ? I(p, r) : O(p, l, c);\n    const d = t;\n    P(p, p), S(p, p, Math.min(d, 1)), j(c, c, p), u(a) ? I(p, a) : O(p, c, l);\n    const h = o.state.camera.computeScreenPixelSizeAt(l);\n    P(p, p), S(p, p, Math.min(h, 1)), j(l, l, p);\n  }\n\n  _computeIntersection({\n    computation: e,\n    interpolationInfo: t\n  }) {\n    const {\n      view: o\n    } = this,\n          {\n      sceneIntersectionHelper: i,\n      renderCoordsHelper: n\n    } = o;\n    if (l(i)) return;\n    const r = this._intersector.intersector,\n          {\n      computationResult: s,\n      inputPoints: a\n    } = e,\n          {\n      observer: c,\n      target: p\n    } = a,\n          {\n      start: d,\n      end: h\n    } = s,\n          g = x(d, h, te);\n    r.options.store = Z.MIN, i.intersectToolIntersectorRay(g, r);\n    const v = r.results.min,\n          m = s.intersection,\n          f = ee;\n\n    let _ = !0;\n\n    if (u(v) && v.getIntersectionPoint(m)) {\n      I(t.originalIntersection, m), I(t.originalObserver, d), I(t.originalTarget, h), n.fromRenderCoords(m, f, o.spatialReference);\n      const e = 1 - w(h, p) / w(d, p);\n      _ = w(c, m) >= e * w(c, p);\n    }\n\n    const b = new Q(f, o.spatialReference);\n    {\n      const {\n        result: t,\n        target: i\n      } = e;\n      u(t) ? (t.target = i, t.intersectedGraphic = _ ? null : q(v, o), t.intersectedLocation = _ ? null : b, t.visible = _) : e.result = new z({\n        target: i,\n        elevationAlignedTargetLocation: e.elevationAlignedTargetLocation,\n        intersectedGraphic: _ ? null : q(v, o),\n        intersectedLocation: _ ? null : b,\n        visible: _\n      });\n    }\n    s.isValid = a.isValid = !0, s.isTargetVisible = _;\n  }\n\n  _interpolateIntersection({\n    computation: e,\n    interpolationInfo: t\n  }) {\n    const {\n      computationResult: o,\n      inputPoints: i\n    } = e,\n          {\n      start: n,\n      end: r,\n      intersection: s\n    } = o,\n          {\n      originalIntersection: a,\n      originalObserver: c,\n      originalTarget: l\n    } = t;\n\n    if (I(s, a), i.isValid) {\n      const e = ee,\n            t = w(c, a) / w(c, l);\n      R(e, n, c), S(e, e, 1 - t), j(s, s, e), R(e, r, l), S(e, e, t), j(s, s, e), o.isValid = !0;\n    } else e.result = null, o.isValid = !1, o.isTargetVisible = !1;\n  }\n\n  _canCompute(e) {\n    const t = this.analysisViewData.elevationAlignedObserver,\n          o = this.view.frustum;\n    if (l(t) || l(e.elevationAlignedTargetLocation) || l(o)) return !1;\n    const {\n      observerAdjusted: i,\n      targetAdjusted: n\n    } = e.inputPoints,\n          r = o.intersectsPoint(i),\n          s = o.intersectsPoint(n);\n    return r && s;\n  }\n\n  _onObserverPositionChange(e, o, i, n, r) {\n    if (this._externalObserverUpdate = r, l(e)) return this.analysisViewData.elevationAlignedObserver = null, void (this._observerFeatureId = null);\n    if (l(o)) return U(this.analysis, e.spatialReference, X), void (this.analysisViewData.elevationAlignedObserver = null);\n\n    const s = this._getEffectiveElevationInfo(o, i),\n          {\n      absoluteZ: a,\n      elevation: c\n    } = k(o.x, o.y, o.z, this.view.spatialReference, this.view, s),\n          u = o.clone();\n\n    u.z = a, this._effectiveObserverElevationMode = s.mode, this.analysisViewData.elevationAlignedObserver = u;\n    const p = A();\n    this.view.renderCoordsHelper.toRenderCoords(u, p), this._elevationAlignedObserverPositionRenderSpace = p, this._observerGroundOffsetRenderSpace = a - c, this._observerFeatureId = t(n), this.priority = K.LINE_OF_SIGHT_TOOL_INTERACTIVE;\n  }\n\n  _onObserverRenderSpacePositionChangeForComputation(e, t, o, i, n) {\n    const {\n      inputPoints: r\n    } = e;\n\n    switch (I(r.observer, t), r.observerFeatureId = n, r.observerSurfaceNormal = null, i) {\n      case \"on-the-ground\":\n      case \"relative-to-ground\":\n        {\n          const e = this._intersector.updateFromGroundIntersection(r.observer, o, r.observer);\n\n          l(r.observerFeatureId) && (r.observerSurfaceNormal = e);\n        }\n    }\n\n    this._adjustStartEndPositions(e), e.notifyInputPointsChanged(), this.priority = K.LINE_OF_SIGHT_TOOL_INTERACTIVE;\n  }\n\n  _onTargetPositionChange(e, o, i, n, r, s = !0) {\n    const a = e.inputPoints;\n    if (s && (a.isValid = !1), l(i)) return u(o) && U(this.analysis, o.spatialReference, X), e.elevationAlignedTargetLocation = null, void e.notifyInputPointsChanged();\n\n    const c = this._getEffectiveElevationInfo(i, n),\n          {\n      absoluteZ: p,\n      elevation: d\n    } = k(i.x, i.y, i.z, this.view.spatialReference, this.view, c),\n          h = i.clone();\n\n    switch (h.z = p, e.elevationAlignedTargetLocation = h, this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation, a.target), a.targetFeatureId = t(r), a.targetSurfaceNormal = null, c.mode) {\n      case \"on-the-ground\":\n      case \"relative-to-ground\":\n        {\n          const e = this._intersector.updateFromGroundIntersection(a.target, p - d, a.target);\n\n          l(a.targetFeatureId) && (a.targetSurfaceNormal = e);\n        }\n    }\n\n    this._adjustStartEndPositions(e), e.notifyInputPointsChanged(), this.priority = K.LINE_OF_SIGHT_TOOL_INTERACTIVE;\n  }\n\n  _connectComputationToTarget(e) {\n    return r([m(() => ({\n      computation: e,\n      targetPosition: e.target.position,\n      targetElevationInfo: e.target.elevationInfo,\n      targetFeatureInfo: e.target.feature,\n      projectedTargetPosition: L(e.target.position, this.view.spatialReference)\n    }), ({\n      computation: e,\n      targetPosition: t,\n      targetElevationInfo: o,\n      targetFeatureInfo: i,\n      projectedTargetPosition: n\n    }) => {\n      u(n.pending) ? this._updatingHandles.addPromise(n.pending) : this._onTargetPositionChange(e, t, n.geometry, o, i);\n    }, _)]);\n  }\n\n  _connectComputationToObserver(e) {\n    return m(() => ({\n      computation: e,\n      observer: this.analysisViewData.elevationAlignedObserver\n    }), ({\n      computation: e\n    }) => {\n      this._externalObserverUpdate && (e.inputPoints.isValid = !1, e.notifyInputPointsChanged());\n    }, _);\n  }\n\n  _connectComputationToRenderSpaceObserver(e) {\n    return m(() => ({\n      computation: e,\n      observer: this._elevationAlignedObserverPositionRenderSpace,\n      observerGroundOffset: this._observerGroundOffsetRenderSpace,\n      observerElevationMode: this._effectiveObserverElevationMode,\n      observerFeatureId: this._observerFeatureId\n    }), ({\n      computation: e,\n      observer: t,\n      observerGroundOffset: o,\n      observerElevationMode: i,\n      observerFeatureId: n\n    }) => {\n      this._onObserverRenderSpacePositionChangeForComputation(e, t, o, i, n);\n    }, _);\n  }\n\n  _connectComputationToCamera(e) {\n    return m(() => ({\n      camera: this.view.state.camera,\n      isDirty: this._isCameraDirty\n    }), ({\n      isDirty: t\n    }) => {\n      !this.updateOnCameraChange || e.inputPoints.isValid && !t || e.notifyInputPointsChanged();\n    }, b);\n  }\n\n  _connectComputationToSlicePlane(e) {\n    return m(() => this.view.slicePlane, () => {\n      e.inputPoints.isValid = !1, e.notifyInputPointsChanged();\n    });\n  }\n\n  _connectComputationToElevation(e) {\n    const t = (o, i) => {\n      const n = this.analysis.observer,\n            r = e.target;\n      let s = null,\n          a = null,\n          c = null,\n          p = null,\n          d = null,\n          h = null;\n\n      if (u(n) && u(n.position)) {\n        const e = L(n.position, this.view.spatialReference);\n        if (u(e.pending)) return this._updatingHandles.addPromise(e.pending), void e.pending.finally(() => t(o, i));\n        s = e.geometry, a = n.elevationInfo, c = n.feature;\n      }\n\n      if (u(r.position)) {\n        const e = L(r.position, this.view.spatialReference);\n        if (u(e.pending)) return this._updatingHandles.addPromise(e.pending), void e.pending.finally(() => t(o, i));\n        p = e.geometry, d = r.elevationInfo, h = r.feature;\n      }\n\n      l(s) && l(p) || (F(o, i, oe, this.view.spatialReference), u(s) && H(oe, s) && this._onObserverPositionChange(u(n) ? n.position : null, s, a, c, !1), u(p) && H(oe, p) && this._onTargetPositionChange(e, r.position, p, d, h, !1), u(s) && u(p) && D(oe, s, p) && e.notifyInputPointsChanged());\n    };\n\n    return this.view.elevationProvider.on(\"elevation-change\", e => t(e.extent, e.spatialReference));\n  }\n\n  _connectComputationToTask(e) {\n    let t = h;\n    const o = {\n      computation: e,\n      interpolationInfo: {\n        originalIntersection: A(),\n        originalObserver: A(),\n        originalTarget: A()\n      }\n    };\n    return r([m(() => this.getLineOfSightComputationDependencies(e), () => {\n      t = p(t), t = g(async e => {\n        await v(this._frameTask.schedule(() => this._computeResult(o), e));\n      });\n    }, {\n      sync: !0,\n      initial: !0,\n      equals: a\n    }), s(() => t = p(t))]);\n  }\n\n  _connectComputation(e) {\n    const t = this._computationHandles;\n    t.has(e) || t.add([this._connectComputationToTarget(e), this._connectComputationToObserver(e), this._connectComputationToRenderSpaceObserver(e), this._connectComputationToCamera(e), this._connectComputationToSlicePlane(e), this._connectComputationToElevation(e), this._connectComputationToTask(e)], e);\n  }\n\n  _disconnectComputation(e) {\n    this._computationHandles.remove(e);\n  }\n\n  _onComputationCollectionChange({\n    added: e,\n    removed: t\n  }) {\n    for (const o of t) this._disconnectComputation(o);\n\n    for (const o of e) this._connectComputation(o);\n  }\n\n  _onTargetCollectionChange({\n    added: e,\n    removed: t\n  }) {\n    for (const o of t) this._removeTarget(o);\n\n    for (const o of e) this._addTarget(o);\n  }\n\n  _onCursorTargetChange(e, t) {\n    u(t) && this._removeTarget(t), u(e) && this._addTarget(e);\n  }\n\n  _addTarget(e) {\n    this._computations.some(t => t.target === e) || this._computations.add(new G({\n      target: e\n    }));\n  }\n\n  _removeTarget(e) {\n    const t = this._computations.findIndex(t => t.target === e);\n\n    this._computations.removeAt(t);\n  }\n\n  _connectObserver() {\n    return r([m(() => ({\n      observerPosition: u(this.analysis.observer) ? this.analysis.observer.position : null,\n      projectedObserverPosition: L(u(this.analysis.observer) ? this.analysis.observer.position : null, this.view.spatialReference),\n      observerElevationInfo: u(this.analysis.observer) ? this.analysis.observer.elevationInfo : null,\n      observerFeatureInfo: u(this.analysis.observer) ? this.analysis.observer.feature : null\n    }), ({\n      observerPosition: e,\n      projectedObserverPosition: t,\n      observerElevationInfo: o,\n      observerFeatureInfo: i\n    }) => {\n      u(t.pending) ? this._updatingHandles.addPromise(t.pending) : this._onObserverPositionChange(e, t.geometry, o, i, !0);\n    }, _)]);\n  }\n\n  _connectComputations() {\n    return f(() => this._computations, \"change\", e => this._onComputationCollectionChange(e), {\n      onListenerAdd: e => {\n        for (const t of e) this._connectComputation(t);\n      },\n      onListenerRemove: e => {\n        for (const t of e) this._disconnectComputation(t);\n      },\n      sync: !0\n    });\n  }\n\n  _connectTargets() {\n    return r([this._updatingHandles.addOnCollectionChange(() => this.analysis.targets, e => this._onTargetCollectionChange(e), {\n      initial: !0,\n      final: !0\n    }), m(() => this.analysisViewData.cursorTarget, (e, t) => {\n      this._onCursorTargetChange(e, t);\n    })]);\n  }\n\n  get _isCameraDirty() {\n    const e = this.analysisViewData.elevationAlignedObserver,\n          {\n      view: t\n    } = this,\n          {\n      renderCoordsHelper: o\n    } = t;\n    if (l(e) || l(o)) return !1;\n    const i = ee;\n    o.toRenderCoords(e, i);\n    const n = t.state.camera.computeScreenPixelSizeAt(i);\n    return Math.abs((n - this._screenPixelSize) / this._screenPixelSize) > $;\n  }\n\n  _getEffectiveElevationInfo(e, t) {\n    return e.hasZ ? d(t, {\n      mode: \"absolute-height\",\n      offset: 0\n    }) : {\n      mode: \"on-the-ground\",\n      offset: 0\n    };\n  }\n\n};\ne([y({\n  constructOnly: !0\n})], Y.prototype, \"analysis\", void 0), e([y({\n  constructOnly: !0\n})], Y.prototype, \"analysisViewData\", void 0), e([y({\n  constructOnly: !0\n})], Y.prototype, \"view\", void 0), e([y()], Y.prototype, \"updating\", null), e([y()], Y.prototype, \"priority\", null), e([y()], Y.prototype, \"updateOnCameraChange\", void 0), e([y()], Y.prototype, \"_computations\", null), e([y()], Y.prototype, \"_elevationAlignedObserverPositionRenderSpace\", null), e([y()], Y.prototype, \"_observerGroundOffsetRenderSpace\", void 0), e([y()], Y.prototype, \"_effectiveObserverElevationMode\", void 0), e([y()], Y.prototype, \"_observerFeatureId\", void 0), e([y()], Y.prototype, \"_screenPixelSize\", null), e([y({\n  readOnly: !0\n})], Y.prototype, \"_updatingHandles\", void 0), e([y()], Y.prototype, \"_frameTask\", void 0), e([y()], Y.prototype, \"_isCameraDirty\", null), Y = e([C(\"esri.views.3d.analysis.LineOfSight.LineOfSightController\")], Y);\nconst $ = .1,\n      ee = A(),\n      te = N(),\n      oe = V(),\n      ie = .05;\nexport { Y as LineOfSightController };","map":{"version":3,"names":["_","e","getFeatureId","t","o","i","n","handlesGroup","r","makeHandle","s","equals","a","c","isNone","l","isSome","u","abortMaybe","p","unwrapOr","d","none","h","createTask","g","ignoreAbortErrors","v","watch","m","on","f","syncAndInitial","sync","b","property","y","subclass","C","I","T","O","P","S","j","w","R","A","WatchUpdatingTracking","E","projectOrLoad","L","projectBoundingRect","F","empty","V","containsPointObject","H","intersectsSegment","D","fromPoints","x","create","N","zValueInAbsoluteHeightMode","k","LineOfSightAnalysisResult","z","LineOfSightComputation","G","LineOfSightRayIntersector","M","logFailedGeometryProjectionError","U","StoreResults","Z","toGraphic","q","hasLod","B","getIntersectedFeatureBSRadius","W","ImmediateTask","J","TaskPriority","K","Q","X","getLogger","Y","EventedMixin","constructor","updateOnCameraChange","_effectiveObserverElevationMode","_observerFeatureId","_updatingHandles","_frameTask","_handles","_computationHandles","_externalObserverUpdate","initialize","view","resourceController","scheduler","registerTask","LINE_OF_SIGHT_TOOL","_intersector","add","_connectObserver","_connectComputations","_connectTargets","destroy","_computations","removeAll","updating","priority","analysisViewData","computations","_elevationAlignedObserverPositionRenderSpace","observerEngineLocation","_screenPixelSize","state","camera","computeScreenPixelSizeAt","getLineOfSightComputationDependencies","inputPoints","_computeResult","computation","computationResult","observerAdjusted","targetAdjusted","start","end","_canCompute","_computeIntersection","_interpolateIntersection","notifyResultChanged","emit","target","result","_updateAdjustedPointsFromFeatures","sceneIntersectionHelper","observerFeatureId","targetFeatureId","intersector","observer","te","options","store","ALL","intersectToolIntersectorRay","results","all","distanceInRenderSpace","_getFeatureDistanceThreshold","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","targetSurfaceNormal","Math","min","ie","_adjustStartEndPositions","ee","interpolationInfo","renderCoordsHelper","MIN","intersection","originalIntersection","originalObserver","originalTarget","fromRenderCoords","spatialReference","intersectedGraphic","intersectedLocation","visible","elevationAlignedTargetLocation","isValid","isTargetVisible","elevationAlignedObserver","frustum","intersectsPoint","_onObserverPositionChange","analysis","_getEffectiveElevationInfo","absoluteZ","elevation","clone","mode","toRenderCoords","_observerGroundOffsetRenderSpace","LINE_OF_SIGHT_TOOL_INTERACTIVE","_onObserverRenderSpacePositionChangeForComputation","updateFromGroundIntersection","notifyInputPointsChanged","_onTargetPositionChange","_connectComputationToTarget","targetPosition","position","targetElevationInfo","elevationInfo","targetFeatureInfo","feature","projectedTargetPosition","pending","addPromise","geometry","_connectComputationToObserver","_connectComputationToRenderSpaceObserver","observerGroundOffset","observerElevationMode","_connectComputationToCamera","isDirty","_isCameraDirty","_connectComputationToSlicePlane","slicePlane","_connectComputationToElevation","finally","oe","elevationProvider","extent","_connectComputationToTask","schedule","initial","_connectComputation","has","_disconnectComputation","remove","_onComputationCollectionChange","added","removed","_onTargetCollectionChange","_removeTarget","_addTarget","_onCursorTargetChange","some","findIndex","removeAt","observerPosition","projectedObserverPosition","observerElevationInfo","observerFeatureInfo","onListenerAdd","onListenerRemove","addOnCollectionChange","targets","final","cursorTarget","abs","$","hasZ","offset","constructOnly","prototype","readOnly","LineOfSightController"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightController.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import{getFeatureId as t}from\"../../../../analysis/featureReferenceUtils.js\";import o from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import n from\"../../../../core/Handles.js\";import{handlesGroup as r,makeHandle as s}from\"../../../../core/handleUtils.js\";import{equals as a}from\"../../../../core/lang.js\";import c from\"../../../../core/Logger.js\";import{isNone as l,isSome as u,abortMaybe as p,unwrapOr as d,none as h}from\"../../../../core/maybe.js\";import{createTask as g,ignoreAbortErrors as v}from\"../../../../core/promiseUtils.js\";import{watch as m,on as f,syncAndInitial as _,sync as b}from\"../../../../core/reactiveUtils.js\";import{property as y}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as C}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as I,i as T,b as O,n as P,g as S,a as j,j as w,v as R}from\"../../../../chunks/vec3.js\";import{c as A}from\"../../../../chunks/vec3f64.js\";import{WatchUpdatingTracking as E}from\"../../../../core/support/WatchUpdatingTracking.js\";import{projectOrLoad as L,projectBoundingRect as F}from\"../../../../geometry/projection.js\";import{empty as V,containsPointObject as H,intersectsSegment as D}from\"../../../../geometry/support/aaBoundingRect.js\";import{fromPoints as x,create as N}from\"../../../../geometry/support/ray.js\";import{zValueInAbsoluteHeightMode as k}from\"../../../../support/elevationInfoUtils.js\";import{LineOfSightAnalysisResult as z}from\"../LineOfSightAnalysisResult.js\";import{LineOfSightComputation as G}from\"./LineOfSightComputation.js\";import{LineOfSightRayIntersector as M}from\"./LineOfSightRayIntersector.js\";import{logFailedGeometryProjectionError as U}from\"../support/projectionUtils.js\";import{StoreResults as Z}from\"../../webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as q,hasLod as B,getIntersectedFeatureBSRadius as W}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{ImmediateTask as J,TaskPriority as K}from\"../../../support/Scheduler.js\";import Q from\"../../../../geometry/Point.js\";const X=c.getLogger(\"esri.views.3d.analysis.LineOfSight.LineOfSightController\");let Y=class extends(i.EventedMixin(o)){constructor(e){super(e),this.updateOnCameraChange=!0,this._effectiveObserverElevationMode=\"absolute-height\",this._observerFeatureId=null,this._updatingHandles=new E,this._frameTask=J,this._handles=new n,this._computationHandles=new n,this._externalObserverUpdate=!0}initialize(){const e=this.view.resourceController?.scheduler;this._frameTask=e?e.registerTask(K.LINE_OF_SIGHT_TOOL):J,this._intersector=new M({view:this.view}),this._handles.add([this._connectObserver(),this._connectComputations(),this._connectTargets()])}destroy(){this._handles.destroy(),this._computationHandles.destroy(),this._computations.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(e){this._frameTask.priority=e}get _computations(){return this.analysisViewData.computations}get _elevationAlignedObserverPositionRenderSpace(){return this.analysisViewData.observerEngineLocation}set _elevationAlignedObserverPositionRenderSpace(e){this.analysisViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._elevationAlignedObserverPositionRenderSpace)}getLineOfSightComputationDependencies(e){const{inputPoints:t}=e;return{inputPoints:t}}_computeResult(e){const t=e.computation,{inputPoints:o,computationResult:i}=t,{observerAdjusted:n,targetAdjusted:r}=o,{start:s,end:a}=i;I(s,n),I(a,r);this._canCompute(t)?this._computeIntersection(e):this._interpolateIntersection(e),t.notifyResultChanged(),this.emit(\"result-changed\",{target:e.computation.target,result:t.result})}_updateAdjustedPointsFromFeatures(e){const o=this.view,{sceneIntersectionHelper:i}=o,{inputPoints:n}=e,{observerAdjusted:r,observerFeatureId:s,targetFeatureId:a,targetAdjusted:c}=n;if(l(s)&&l(a))return;const p=T(r,c),d=this._intersector.intersector,h=x(n.observer,n.target,te);d.options.store=Z.ALL,i.intersectToolIntersectorRay(h,d);let g=null,v=null,m=null,f=null;for(const _ of d.results.all){const e=q(_,this.view);if(l(e)||l(_.distanceInRenderSpace))continue;const i=t(e);l(i)||(u(s)&&i===s&&(l(g)&&(g=this._getFeatureDistanceThreshold(_,o,p)),_.distanceInRenderSpace<g&&(m=_)),u(a)&&i===a&&(l(v)&&(v=this._getFeatureDistanceThreshold(_,o,p)),l(f)&&_.distanceInRenderSpace<p&&p-_.distanceInRenderSpace<v&&(f=_)))}u(m)&&m.getIntersectionPoint(r)&&(n.observerSurfaceNormal=m.getTransformedNormal(A())),u(f)&&f.getIntersectionPoint(c)&&(n.targetSurfaceNormal=f.getTransformedNormal(A()))}_getFeatureDistanceThreshold(e,t,o){if(B(e)){const i=W(e,t);if(u(i))return Math.min(i*ie,o)}return 1e-5*o}_adjustStartEndPositions(e){const t=this._screenPixelSize,o=this.view,{inputPoints:i}=e,{observer:n,observerSurfaceNormal:r,target:s,targetSurfaceNormal:a,observerAdjusted:c,targetAdjusted:l}=i,p=ee;I(c,n),I(l,s),this._updateAdjustedPointsFromFeatures(e),u(r)?I(p,r):O(p,l,c);const d=t;P(p,p),S(p,p,Math.min(d,1)),j(c,c,p),u(a)?I(p,a):O(p,c,l);const h=o.state.camera.computeScreenPixelSizeAt(l);P(p,p),S(p,p,Math.min(h,1)),j(l,l,p)}_computeIntersection({computation:e,interpolationInfo:t}){const{view:o}=this,{sceneIntersectionHelper:i,renderCoordsHelper:n}=o;if(l(i))return;const r=this._intersector.intersector,{computationResult:s,inputPoints:a}=e,{observer:c,target:p}=a,{start:d,end:h}=s,g=x(d,h,te);r.options.store=Z.MIN,i.intersectToolIntersectorRay(g,r);const v=r.results.min,m=s.intersection,f=ee;let _=!0;if(u(v)&&v.getIntersectionPoint(m)){I(t.originalIntersection,m),I(t.originalObserver,d),I(t.originalTarget,h),n.fromRenderCoords(m,f,o.spatialReference);const e=1-w(h,p)/w(d,p);_=w(c,m)>=e*w(c,p)}const b=new Q(f,o.spatialReference);{const{result:t,target:i}=e;u(t)?(t.target=i,t.intersectedGraphic=_?null:q(v,o),t.intersectedLocation=_?null:b,t.visible=_):e.result=new z({target:i,elevationAlignedTargetLocation:e.elevationAlignedTargetLocation,intersectedGraphic:_?null:q(v,o),intersectedLocation:_?null:b,visible:_})}s.isValid=a.isValid=!0,s.isTargetVisible=_}_interpolateIntersection({computation:e,interpolationInfo:t}){const{computationResult:o,inputPoints:i}=e,{start:n,end:r,intersection:s}=o,{originalIntersection:a,originalObserver:c,originalTarget:l}=t;if(I(s,a),i.isValid){const e=ee,t=w(c,a)/w(c,l);R(e,n,c),S(e,e,1-t),j(s,s,e),R(e,r,l),S(e,e,t),j(s,s,e),o.isValid=!0}else e.result=null,o.isValid=!1,o.isTargetVisible=!1}_canCompute(e){const t=this.analysisViewData.elevationAlignedObserver,o=this.view.frustum;if(l(t)||l(e.elevationAlignedTargetLocation)||l(o))return!1;const{observerAdjusted:i,targetAdjusted:n}=e.inputPoints,r=o.intersectsPoint(i),s=o.intersectsPoint(n);return r&&s}_onObserverPositionChange(e,o,i,n,r){if(this._externalObserverUpdate=r,l(e))return this.analysisViewData.elevationAlignedObserver=null,void(this._observerFeatureId=null);if(l(o))return U(this.analysis,e.spatialReference,X),void(this.analysisViewData.elevationAlignedObserver=null);const s=this._getEffectiveElevationInfo(o,i),{absoluteZ:a,elevation:c}=k(o.x,o.y,o.z,this.view.spatialReference,this.view,s),u=o.clone();u.z=a,this._effectiveObserverElevationMode=s.mode,this.analysisViewData.elevationAlignedObserver=u;const p=A();this.view.renderCoordsHelper.toRenderCoords(u,p),this._elevationAlignedObserverPositionRenderSpace=p,this._observerGroundOffsetRenderSpace=a-c,this._observerFeatureId=t(n),this.priority=K.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onObserverRenderSpacePositionChangeForComputation(e,t,o,i,n){const{inputPoints:r}=e;switch(I(r.observer,t),r.observerFeatureId=n,r.observerSurfaceNormal=null,i){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(r.observer,o,r.observer);l(r.observerFeatureId)&&(r.observerSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=K.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetPositionChange(e,o,i,n,r,s=!0){const a=e.inputPoints;if(s&&(a.isValid=!1),l(i))return u(o)&&U(this.analysis,o.spatialReference,X),e.elevationAlignedTargetLocation=null,void e.notifyInputPointsChanged();const c=this._getEffectiveElevationInfo(i,n),{absoluteZ:p,elevation:d}=k(i.x,i.y,i.z,this.view.spatialReference,this.view,c),h=i.clone();switch(h.z=p,e.elevationAlignedTargetLocation=h,this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,a.target),a.targetFeatureId=t(r),a.targetSurfaceNormal=null,c.mode){case\"on-the-ground\":case\"relative-to-ground\":{const e=this._intersector.updateFromGroundIntersection(a.target,p-d,a.target);l(a.targetFeatureId)&&(a.targetSurfaceNormal=e)}}this._adjustStartEndPositions(e),e.notifyInputPointsChanged(),this.priority=K.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectComputationToTarget(e){return r([m((()=>({computation:e,targetPosition:e.target.position,targetElevationInfo:e.target.elevationInfo,targetFeatureInfo:e.target.feature,projectedTargetPosition:L(e.target.position,this.view.spatialReference)})),(({computation:e,targetPosition:t,targetElevationInfo:o,targetFeatureInfo:i,projectedTargetPosition:n})=>{u(n.pending)?this._updatingHandles.addPromise(n.pending):this._onTargetPositionChange(e,t,n.geometry,o,i)}),_)])}_connectComputationToObserver(e){return m((()=>({computation:e,observer:this.analysisViewData.elevationAlignedObserver})),(({computation:e})=>{this._externalObserverUpdate&&(e.inputPoints.isValid=!1,e.notifyInputPointsChanged())}),_)}_connectComputationToRenderSpaceObserver(e){return m((()=>({computation:e,observer:this._elevationAlignedObserverPositionRenderSpace,observerGroundOffset:this._observerGroundOffsetRenderSpace,observerElevationMode:this._effectiveObserverElevationMode,observerFeatureId:this._observerFeatureId})),(({computation:e,observer:t,observerGroundOffset:o,observerElevationMode:i,observerFeatureId:n})=>{this._onObserverRenderSpacePositionChangeForComputation(e,t,o,i,n)}),_)}_connectComputationToCamera(e){return m((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:t})=>{!this.updateOnCameraChange||e.inputPoints.isValid&&!t||e.notifyInputPointsChanged()}),b)}_connectComputationToSlicePlane(e){return m((()=>this.view.slicePlane),(()=>{e.inputPoints.isValid=!1,e.notifyInputPointsChanged()}))}_connectComputationToElevation(e){const t=(o,i)=>{const n=this.analysis.observer,r=e.target;let s=null,a=null,c=null,p=null,d=null,h=null;if(u(n)&&u(n.position)){const e=L(n.position,this.view.spatialReference);if(u(e.pending))return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(o,i)));s=e.geometry,a=n.elevationInfo,c=n.feature}if(u(r.position)){const e=L(r.position,this.view.spatialReference);if(u(e.pending))return this._updatingHandles.addPromise(e.pending),void e.pending.finally((()=>t(o,i)));p=e.geometry,d=r.elevationInfo,h=r.feature}l(s)&&l(p)||(F(o,i,oe,this.view.spatialReference),u(s)&&H(oe,s)&&this._onObserverPositionChange(u(n)?n.position:null,s,a,c,!1),u(p)&&H(oe,p)&&this._onTargetPositionChange(e,r.position,p,d,h,!1),u(s)&&u(p)&&D(oe,s,p)&&e.notifyInputPointsChanged())};return this.view.elevationProvider.on(\"elevation-change\",(e=>t(e.extent,e.spatialReference)))}_connectComputationToTask(e){let t=h;const o={computation:e,interpolationInfo:{originalIntersection:A(),originalObserver:A(),originalTarget:A()}};return r([m((()=>this.getLineOfSightComputationDependencies(e)),(()=>{t=p(t),t=g((async e=>{await v(this._frameTask.schedule((()=>this._computeResult(o)),e))}))}),{sync:!0,initial:!0,equals:a}),s((()=>t=p(t)))])}_connectComputation(e){const t=this._computationHandles;t.has(e)||t.add([this._connectComputationToTarget(e),this._connectComputationToObserver(e),this._connectComputationToRenderSpaceObserver(e),this._connectComputationToCamera(e),this._connectComputationToSlicePlane(e),this._connectComputationToElevation(e),this._connectComputationToTask(e)],e)}_disconnectComputation(e){this._computationHandles.remove(e)}_onComputationCollectionChange({added:e,removed:t}){for(const o of t)this._disconnectComputation(o);for(const o of e)this._connectComputation(o)}_onTargetCollectionChange({added:e,removed:t}){for(const o of t)this._removeTarget(o);for(const o of e)this._addTarget(o)}_onCursorTargetChange(e,t){u(t)&&this._removeTarget(t),u(e)&&this._addTarget(e)}_addTarget(e){this._computations.some((t=>t.target===e))||this._computations.add(new G({target:e}))}_removeTarget(e){const t=this._computations.findIndex((t=>t.target===e));this._computations.removeAt(t)}_connectObserver(){return r([m((()=>({observerPosition:u(this.analysis.observer)?this.analysis.observer.position:null,projectedObserverPosition:L(u(this.analysis.observer)?this.analysis.observer.position:null,this.view.spatialReference),observerElevationInfo:u(this.analysis.observer)?this.analysis.observer.elevationInfo:null,observerFeatureInfo:u(this.analysis.observer)?this.analysis.observer.feature:null})),(({observerPosition:e,projectedObserverPosition:t,observerElevationInfo:o,observerFeatureInfo:i})=>{u(t.pending)?this._updatingHandles.addPromise(t.pending):this._onObserverPositionChange(e,t.geometry,o,i,!0)}),_)])}_connectComputations(){return f((()=>this._computations),\"change\",(e=>this._onComputationCollectionChange(e)),{onListenerAdd:e=>{for(const t of e)this._connectComputation(t)},onListenerRemove:e=>{for(const t of e)this._disconnectComputation(t)},sync:!0})}_connectTargets(){return r([this._updatingHandles.addOnCollectionChange((()=>this.analysis.targets),(e=>this._onTargetCollectionChange(e)),{initial:!0,final:!0}),m((()=>this.analysisViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)}))])}get _isCameraDirty(){const e=this.analysisViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:o}=t;if(l(e)||l(o))return!1;const i=ee;o.toRenderCoords(e,i);const n=t.state.camera.computeScreenPixelSizeAt(i);return Math.abs((n-this._screenPixelSize)/this._screenPixelSize)>$}_getEffectiveElevationInfo(e,t){return e.hasZ?d(t,{mode:\"absolute-height\",offset:0}):{mode:\"on-the-ground\",offset:0}}};e([y({constructOnly:!0})],Y.prototype,\"analysis\",void 0),e([y({constructOnly:!0})],Y.prototype,\"analysisViewData\",void 0),e([y({constructOnly:!0})],Y.prototype,\"view\",void 0),e([y()],Y.prototype,\"updating\",null),e([y()],Y.prototype,\"priority\",null),e([y()],Y.prototype,\"updateOnCameraChange\",void 0),e([y()],Y.prototype,\"_computations\",null),e([y()],Y.prototype,\"_elevationAlignedObserverPositionRenderSpace\",null),e([y()],Y.prototype,\"_observerGroundOffsetRenderSpace\",void 0),e([y()],Y.prototype,\"_effectiveObserverElevationMode\",void 0),e([y()],Y.prototype,\"_observerFeatureId\",void 0),e([y()],Y.prototype,\"_screenPixelSize\",null),e([y({readOnly:!0})],Y.prototype,\"_updatingHandles\",void 0),e([y()],Y.prototype,\"_frameTask\",void 0),e([y()],Y.prototype,\"_isCameraDirty\",null),Y=e([C(\"esri.views.3d.analysis.LineOfSight.LineOfSightController\")],Y);const $=.1,ee=A(),te=N(),oe=V(),ie=.05;export{Y as LineOfSightController};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}