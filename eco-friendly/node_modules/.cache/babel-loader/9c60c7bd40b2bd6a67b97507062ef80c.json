{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport t from \"../../../request.js\";\nimport i from \"../../Attachment.js\";\nimport r from \"../support/FeatureSet.js\";\nimport s from \"../support/IdSet.js\";\nimport { defaultMaxRecords as a, stableStringify as n, FeatureServiceDatabaseType as l, IdState as o, extractServiceUrl as u } from \"../support/shared.js\";\nimport { toWhereClause as d, isSingleField as h } from \"../support/sqlUtils.js\";\nimport { decodeStatType as c } from \"../support/stats.js\";\nimport { createMD5Hash as p, outputTypes as y } from \"../../../core/MD5.js\";\nimport { id as f } from \"../../../kernel.js\";\nimport { fromJSON as _ } from \"../../../geometry/support/jsonUtils.js\";\nimport m from \"../../../layers/FeatureLayer.js\";\nimport { convertToFeatureSet as g } from \"../../../layers/graphics/featureConversionUtils.js\";\nimport \"../../../core/Error.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../layers/support/source/DataLayerSource.js\";\nimport { executeQueryJSON as F } from \"../../../rest/query/executeQueryJSON.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/urlUtils.js\";\nimport \"../../../core/unitUtils.js\";\nimport \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { executeQueryPBF as S } from \"../../../rest/query/operations/query.js\";\nimport b from \"../../../rest/support/FeatureSet.js\";\nimport R from \"../../../rest/support/Query.js\";\nimport \"../../../rest/query/support/AttachmentInfo.js\";\nimport \"../../../rest/support/AttachmentQuery.js\";\nimport { executeForCount as w } from \"../../../rest/query/executeForCount.js\";\nimport \"../../../geometry.js\";\nimport { executeForIds as D } from \"../../../rest/query/executeForIds.js\";\nimport \"../../../rest/support/RelationshipQuery.js\";\nimport \"../../../geometry/support/normalizeUtils.js\";\nimport \"../../../rest/support/TopFeaturesQuery.js\";\nimport { OptimizedFeatureSetParserContext as x } from \"../../../rest/query/operations/pbfOptimizedFeatureSet.js\";\nimport I from \"../../../rest/support/StatisticDefinition.js\";\nimport q from \"../../Dictionary.js\";\n\nclass P extends r {\n  constructor(e) {\n    super(e), this.declaredClass = \"esri.arcade.featureset.sources.FeatureLayerDynamic\", this._removeGeometry = !1, this._overrideFields = null, this.formulaCredential = null, this._pageJustIds = !1, this._requestStandardised = !1, this._useDefinitionExpression = !0, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);\n  }\n\n  _maxQueryRate() {\n    return a;\n  }\n\n  end() {\n    return this._layer;\n  }\n\n  optimisePagingFeatureQueries(e) {\n    this._pageJustIds = e;\n  }\n\n  convertQueryToLruCacheKey(e) {\n    const t = n(e.toJSON());\n    return p(t, y.String);\n  }\n\n  async loadImpl() {\n    return !0 === this._layer.loaded ? (this._initialiseFeatureSet(), this) : (await this._layer.load(), this._initialiseFeatureSet(), this);\n  }\n\n  _initialiseFeatureSet() {\n    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._layer.geometryType, this.fields = this._layer.fields.slice(0), this._layer.outFields) {\n      if (1 === this._layer.outFields.length && \"*\" === this._layer.outFields[0]) ;else {\n        const e = [];\n\n        for (const t of this.fields) if (\"oid\" === t.type) e.push(t);else for (const i of this._layer.outFields) if (i.toLowerCase() === t.name.toLowerCase()) {\n          e.push(t);\n          break;\n        }\n\n        this.fields = e;\n      }\n    } else ;\n    if (null !== this._overrideFields) if (1 === this._overrideFields.length && \"*\" === this._overrideFields[0]) this._overrideFields = null;else {\n      const e = [],\n            t = [];\n\n      for (const i of this.fields) if (\"oid\" === i.type) e.push(i), t.push(i.name);else for (const r of this._overrideFields) if (r.toLowerCase() === i.name.toLowerCase()) {\n        e.push(i), t.push(i.name);\n        break;\n      }\n\n      this.fields = e, this._overrideFields = t;\n    }\n\n    if (this._layer.source && this._layer.source.sourceJSON) {\n      const e = this._layer.source.sourceJSON.currentVersion;\n      !0 === this._layer.source.sourceJSON.useStandardizedQueries ? (this._databaseType = l.StandardisedNoInterval, null != e && e >= 10.61 && (this._databaseType = l.Standardised)) : null != e && (e >= 10.5 && (this._databaseType = l.StandardisedNoInterval, this._requestStandardised = !0), e >= 10.61 && (this._databaseType = l.Standardised));\n    }\n\n    this.objectIdField = this._layer.objectIdField;\n\n    for (const e of this.fields) \"global-id\" === e.type && (this.globalIdField = e.name);\n\n    this.hasM = this._layer.supportsM, this.hasZ = this._layer.supportsZ, this.typeIdField = this._layer.typeIdField, this.types = this._layer.types;\n  }\n\n  _isInFeatureSet() {\n    return o.InFeatureSet;\n  }\n\n  async _refineSetBlock(e) {\n    return e;\n  }\n\n  _candidateIdTransform(e) {\n    return e;\n  }\n\n  async _getSet(e) {\n    if (null === this._wset) {\n      await this._ensureLoaded();\n      const t = await this._getFilteredSet(\"\", null, null, null, e);\n      return this._wset = t, t;\n    }\n\n    return this._wset;\n  }\n\n  async _runDatabaseProbe(e) {\n    await this._ensureLoaded();\n    const t = new R();\n    t.where = e.replace(\"OBJECTID\", this._layer.objectIdField);\n\n    try {\n      return await this._layer.queryObjectIds(t), !0;\n    } catch (i) {\n      return !1;\n    }\n  }\n\n  _canUsePagination() {\n    return !(!this._layer.capabilities || !this._layer.capabilities.query || !0 !== this._layer.capabilities.query.supportsPagination);\n  }\n\n  _cacheableFeatureSetSourceKey() {\n    return this._layer.url;\n  }\n\n  pbfSupportedForQuery(e) {\n    return !e.outStatistics && this._layer && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsFormatPBF && !0 === this._layer.capabilities.query.supportsQuantizationEditMode;\n  }\n\n  async queryPBF(e) {\n    e.quantizationParameters = {\n      mode: \"edit\"\n    };\n    const t = await S(this._layer.parsedUrl, e, new x({}));\n    return b.fromJSON(g(t.data)).unquantize();\n  }\n\n  get gdbVersion() {\n    return this._layer && this._layer.capabilities && this._layer.capabilities.data && this._layer.capabilities.data.isVersioned ? this._layer.gdbVersion ? this._layer.gdbVersion : \"SDE.DEFAULT\" : \"\";\n  }\n\n  nativeCapabilities() {\n    return {\n      title: this._layer.title,\n      source: this,\n      canQueryRelated: !0,\n      capabilities: this._layer.capabilities,\n      databaseType: this._databaseType,\n      requestStandardised: this._requestStandardised\n    };\n  }\n\n  executeQuery(e, t) {\n    const i = \"execute\" === t ? F : \"executeForCount\" === t ? w : D,\n          r = \"execute\" === t && this.pbfSupportedForQuery(e);\n    let s = null;\n\n    if (this.recentlyUsedQueries) {\n      const t = this.convertQueryToLruCacheKey(e);\n      s = this.recentlyUsedQueries.getFromCache(t), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e), this.recentlyUsedQueries.addToCache(t, s), s = s.catch(e => {\n        throw this.recentlyUsedQueries.removeFromCache(t), e;\n      }));\n    }\n\n    return this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n      layer: this._layer,\n      query: e,\n      method: t\n    }), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e)), s;\n  }\n\n  async _getFilteredSet(e, t, i, r, a) {\n    const n = await this.databaseType();\n\n    if (this.isTable() && t && null !== e && \"\" !== e) {\n      return new s([], [], !0, null);\n    }\n\n    if (this._canUsePagination()) return this._getFilteredSetUsingPaging(e, t, i, r, a);\n    let l = \"\",\n        o = !1;\n    null !== r && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (l = r.constructClause(), o = !0);\n    const u = new R();\n    u.where = null === i ? null === t ? \"1=1\" : \"\" : d(i, n), this._requestStandardised && (u.sqlFormat = \"standard\"), u.spatialRelationship = this._makeRelationshipEnum(e), u.outSpatialReference = this.spatialReference, u.orderByFields = \"\" !== l ? l.split(\",\") : null, u.geometry = null === t ? null : t, u.relationParameter = this._makeRelationshipParam(e);\n    let h = await this.executeQuery(u, \"executeForIds\");\n    null === h && (h = []), this._checkCancelled(a);\n    return new s([], h, o, null);\n  }\n\n  _expandPagedSet(e, t, i, r, s) {\n    return this._expandPagedSetFeatureSet(e, t, i, r, s);\n  }\n\n  async _getFilteredSetUsingPaging(e, t, i, r, a) {\n    let n = \"\",\n        l = !1;\n    null !== r && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (n = r.constructClause(), l = !0);\n    const o = await this.databaseType();\n    let u = null === i ? null === t ? \"1=1\" : \"\" : d(i, o);\n    this._layer.definitionExpression && this._useDefinitionExpression && (u = \"\" !== u ? \"((\" + this._layer.definitionExpression + \") AND (\" + u + \"))\" : this._layer.definitionExpression);\n\n    let h = this._maxQueryRate();\n\n    const c = this._layer.capabilities.query.maxRecordCount;\n    void 0 !== c && c < h && (h = c);\n    let p = null;\n    if (!0 === this._pageJustIds) p = new s([], [\"GETPAGES\"], l, {\n      spatialRel: this._makeRelationshipEnum(e),\n      relationParam: this._makeRelationshipParam(e),\n      outFields: this._layer.objectIdField,\n      resultRecordCount: h,\n      resultOffset: 0,\n      geometry: null === t ? null : t,\n      where: u,\n      orderByFields: n,\n      returnGeometry: !1,\n      returnIdsOnly: \"false\",\n      internal: {\n        set: [],\n        lastRetrieved: 0,\n        lastPage: 0,\n        fullyResolved: !1\n      }\n    });else {\n      let i = !0;\n      !0 === this._removeGeometry && (i = !1);\n      const r = null !== this._overrideFields ? this._overrideFields : this._fieldsIncludingObjectId(this._layer.outFields ? this._layer.outFields : [\"*\"]);\n      p = new s([], [\"GETPAGES\"], l, {\n        spatialRel: this._makeRelationshipEnum(e),\n        relationParam: this._makeRelationshipParam(e),\n        outFields: r.join(\",\"),\n        resultRecordCount: h,\n        resultOffset: 0,\n        geometry: null === t ? null : t,\n        where: u,\n        orderByFields: n,\n        returnGeometry: i,\n        returnIdsOnly: \"false\",\n        internal: {\n          set: [],\n          lastRetrieved: 0,\n          lastPage: 0,\n          fullyResolved: !1\n        }\n      });\n    }\n    return await this._expandPagedSet(p, h, 0, 1, a), p;\n  }\n\n  _clonePageDefinition(e) {\n    return null === e ? null : !0 !== e.groupbypage ? {\n      groupbypage: !1,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      resultOffset: e.resultOffset,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    } : {\n      groupbypage: !0,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      useOIDpagination: e.useOIDpagination,\n      generatedOid: e.generatedOid,\n      groupByFieldsForStatistics: e.groupByFieldsForStatistics,\n      resultOffset: e.resultOffset,\n      outStatistics: e.outStatistics,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    };\n  }\n\n  async _getPhysicalPage(e, t, i) {\n    const r = e.pagesDefinition.internal.lastRetrieved,\n          s = r,\n          a = e.pagesDefinition.internal.lastPage,\n          n = new R();\n    this._requestStandardised && (n.sqlFormat = \"standard\"), n.spatialRelationship = e.pagesDefinition.spatialRel, n.relationParameter = e.pagesDefinition.relationParam, n.outFields = e.pagesDefinition.outFields.split(\",\"), n.num = e.pagesDefinition.resultRecordCount, n.start = e.pagesDefinition.internal.lastPage, n.geometry = e.pagesDefinition.geometry, n.where = e.pagesDefinition.where, n.orderByFields = \"\" !== e.pagesDefinition.orderByFields ? e.pagesDefinition.orderByFields.split(\",\") : null, n.returnGeometry = e.pagesDefinition.returnGeometry, n.outSpatialReference = this.spatialReference;\n    const l = await this.executeQuery(n, \"execute\");\n    if (this._checkCancelled(i), e.pagesDefinition.internal.lastPage !== a) return \"done\";\n\n    for (let o = 0; o < l.features.length; o++) e.pagesDefinition.internal.set[s + o] = l.features[o].attributes[this._layer.objectIdField];\n\n    if (!1 === this._pageJustIds) for (let o = 0; o < l.features.length; o++) this._featureCache[l.features[o].attributes[this._layer.objectIdField]] = l.features[o];\n    return (void 0 === l.exceededTransferLimit && l.features.length !== e.pagesDefinition.resultRecordCount || !1 === l.exceededTransferLimit) && (e.pagesDefinition.internal.fullyResolved = !0), e.pagesDefinition.internal.lastRetrieved = r + l.features.length, e.pagesDefinition.internal.lastPage += e.pagesDefinition.resultRecordCount, \"done\";\n  }\n\n  _fieldsIncludingObjectId(e) {\n    if (null === e) return [this.objectIdField];\n    const t = e.slice(0);\n    if (t.includes(\"*\")) return t;\n    let i = !1;\n\n    for (const r of t) if (r.toUpperCase() === this.objectIdField.toUpperCase()) {\n      i = !0;\n      break;\n    }\n\n    return !1 === i && t.push(this.objectIdField), t;\n  }\n\n  async _getFeatures(e, t, i, r) {\n    const s = [];\n    if (-1 !== t && void 0 === this._featureCache[t] && s.push(t), !0 === this._checkIfNeedToExpandKnownPage(e, this._maxProcessingRate())) return await this._expandPagedSet(e, this._maxProcessingRate(), 0, 0, r), this._getFeatures(e, t, i, r);\n    let a = 0;\n\n    for (let o = e._lastFetchedIndex; o < e._known.length; o++) {\n      if (e._lastFetchedIndex += 1, a++, void 0 === this._featureCache[e._known[o]]) {\n        let i = !1;\n\n        if (null !== this._layer._mode && void 0 !== this._layer._mode) {\n          const t = this._layer._mode;\n\n          if (void 0 !== t._featureMap[e._known[o]]) {\n            const r = t._featureMap[e._known[o]];\n            null !== r && (i = !0, this._featureCache[e._known[o]] = r);\n          }\n        }\n\n        if (!1 === i && (e._known[o] !== t && s.push(e._known[o]), s.length >= this._maxProcessingRate() - 1)) break;\n      }\n\n      if (a >= i && 0 === s.length) break;\n    }\n\n    if (0 === s.length) return \"success\";\n    const n = new R();\n    this._requestStandardised && (n.sqlFormat = \"standard\"), n.objectIds = s, n.outFields = null !== this._overrideFields ? this._overrideFields : this._fieldsIncludingObjectId(this._layer.outFields ? this._layer.outFields : [\"*\"]), n.returnGeometry = !0, !0 === this._removeGeometry && (n.returnGeometry = !1), n.outSpatialReference = this.spatialReference;\n    const l = await this.executeQuery(n, \"execute\");\n    if (this._checkCancelled(r), void 0 !== l.error) throw new Error(l.error);\n\n    for (let o = 0; o < l.features.length; o++) this._featureCache[l.features[o].attributes[this._layer.objectIdField]] = l.features[o];\n\n    return \"success\";\n  }\n\n  async _getDistinctPages(e, t, i, r, s, a, n, l, o) {\n    await this._ensureLoaded();\n    const u = await this.databaseType();\n    let h = i.parseTree.column;\n\n    for (let d = 0; d < this._layer.fields.length; d++) if (this._layer.fields[d].name.toLowerCase() === h.toLowerCase()) {\n      h = this._layer.fields[d].name;\n      break;\n    }\n\n    const c = new R();\n    this._requestStandardised && (c.sqlFormat = \"standard\");\n    let p = null === a ? null === s ? \"1=1\" : \"\" : d(a, u);\n    this._layer.definitionExpression && this._useDefinitionExpression && (p = \"\" !== p ? \"((\" + this._layer.definitionExpression + \") AND (\" + p + \"))\" : this._layer.definitionExpression), c.where = p, c.spatialRelationship = this._makeRelationshipEnum(r), c.relationParameter = this._makeRelationshipParam(r), c.geometry = null === s ? null : s, c.returnDistinctValues = !0, c.returnGeometry = !1, c.outFields = [h];\n    const y = await this.executeQuery(c, \"execute\");\n    if (this._checkCancelled(o), !y.hasOwnProperty(\"features\")) throw new Error(\"Unnexected Result querying statistics from layer\");\n    let f = !1;\n\n    for (let d = 0; d < this._layer.fields.length; d++) if (this._layer.fields[d].name === h) {\n      \"date\" === this._layer.fields[d].type && (f = !0);\n      break;\n    }\n\n    for (let d = 0; d < y.features.length; d++) {\n      if (f) {\n        const e = y.features[d].attributes[h];\n        null !== e ? l.push(new Date(e)) : l.push(e);\n      } else l.push(y.features[d].attributes[h]);\n\n      if (l.length >= n) break;\n    }\n\n    if (0 === y.features.length) return l;\n\n    if (y.features.length === this._layer.capabilities.query.maxRecordCount && l.length < n) {\n      return {\n        calculated: !0,\n        result: await this._getDistinctPages(e + y.features.length, t, i, r, s, a, n, l, o)\n      };\n    }\n\n    return l;\n  }\n\n  async _distinctStat(e, t, i, r, s, a, n) {\n    return {\n      calculated: !0,\n      result: await this._getDistinctPages(0, e, t, i, r, s, a, [], n)\n    };\n  }\n\n  isTable() {\n    return this._layer.isTable || null === this._layer.geometryType || \"table\" === this._layer.type || \"\" === this._layer.geometryType;\n  }\n\n  async _countstat(e, t, i, r) {\n    const s = await this.databaseType(),\n          a = new R();\n    if (this._requestStandardised && (a.sqlFormat = \"standard\"), this.isTable() && i && null !== t && \"\" !== t) return {\n      calculated: !0,\n      result: 0\n    };\n    let n = null === r ? null === i ? \"1=1\" : \"\" : d(r, s);\n    this._layer.definitionExpression && this._useDefinitionExpression && (n = \"\" !== n ? \"((\" + this._layer.definitionExpression + \") AND (\" + n + \"))\" : this._layer.definitionExpression), a.where = n, a.where = n, a.spatialRelationship = this._makeRelationshipEnum(t), a.relationParameter = this._makeRelationshipParam(t), a.geometry = null === i ? null : i, a.returnGeometry = !1;\n    return {\n      calculated: !0,\n      result: await this.executeQuery(a, \"executeForCount\")\n    };\n  }\n\n  async _stats(e, t, i, r, s, a, n) {\n    await this._ensureLoaded();\n    const l = this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsSqlExpression,\n          o = this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsStatistics,\n          u = this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsDistinct;\n    if (\"count\" === e) return u ? this._countstat(e, i, r, s) : {\n      calculated: !1\n    };\n    if (!1 === o || !1 === h(t) && !1 === l || !1 === t.isStandardized) return \"\" !== i || null !== s ? {\n      calculated: !1\n    } : this._manualStat(e, t, a, n);\n    if (\"distinct\" === e) return !1 === u ? \"\" !== i || null !== s ? {\n      calculated: !1\n    } : this._manualStat(e, t, a, n) : this._distinctStat(e, t, i, r, s, a, n);\n    const p = await this.databaseType();\n    if (this.isTable() && r && null !== i && \"\" !== i) return {\n      calculated: !0,\n      result: null\n    };\n    const y = new R();\n    this._requestStandardised && (y.sqlFormat = \"standard\");\n    let f = null === s ? null === r ? \"1=1\" : \"\" : d(s, p);\n    this._layer.definitionExpression && this._useDefinitionExpression && (f = \"\" !== f ? \"((\" + this._layer.definitionExpression + \") AND (\" + f + \"))\" : this._layer.definitionExpression), y.where = f, y.spatialRelationship = this._makeRelationshipEnum(i), y.relationParameter = this._makeRelationshipParam(i), y.geometry = null === r ? null : r;\n\n    const _ = new I();\n\n    _.statisticType = c(e), _.onStatisticField = d(t, p), _.outStatisticFieldName = \"ARCADE_STAT_RESULT\", y.returnGeometry = !1;\n    let m = \"ARCADE_STAT_RESULT\";\n    y.outStatistics = [_];\n    const g = await this.executeQuery(y, \"execute\");\n    if (!g.hasOwnProperty(\"features\") || 0 === g.features.length) throw new Error(\"Unnexected Result querying statistics from layer\");\n    let F = !1;\n\n    for (let d = 0; d < g.fields.length; d++) if (\"ARCADE_STAT_RESULT\" === g.fields[d].name.toUpperCase()) {\n      m = g.fields[d].name, \"date\" === g.fields[d].type && (F = !0);\n      break;\n    }\n\n    if (F) {\n      let e = g.features[0].attributes[m];\n      return null !== e && (e = new Date(g.features[0].attributes[m])), {\n        calculated: !0,\n        result: e\n      };\n    }\n\n    return {\n      calculated: !0,\n      result: g.features[0].attributes[m]\n    };\n  }\n\n  _stat(e, t, i, r, s, a, n) {\n    return this._stats(e, t, i, r, s, a, n);\n  }\n\n  async _canDoAggregates(e, t) {\n    await this._ensureLoaded();\n    let i = !1;\n    const r = this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsSqlExpression;\n    if (void 0 !== this._layer.capabilities && null !== this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsStatistics && !0 === this._layer.capabilities.query.supportsOrderBy && (i = !0), i) for (let s = 0; s < t.length - 1; s++) null !== t[s].workingexpr && (!1 === t[s].workingexpr.isStandardized || !1 === h(t[s].workingexpr) && !1 === r) && (i = !1);\n    return !1 !== i;\n  }\n\n  _makeRelationshipEnum(e) {\n    if (e.includes(\"esriSpatialRelRelation\")) return \"relation\";\n\n    switch (e) {\n      case \"esriSpatialRelRelation\":\n        return \"relation\";\n\n      case \"esriSpatialRelIntersects\":\n        return \"intersects\";\n\n      case \"esriSpatialRelContains\":\n        return \"contains\";\n\n      case \"esriSpatialRelOverlaps\":\n        return \"overlaps\";\n\n      case \"esriSpatialRelWithin\":\n        return \"within\";\n\n      case \"esriSpatialRelTouches\":\n        return \"touches\";\n\n      case \"esriSpatialRelCrosses\":\n        return \"crosses\";\n\n      case \"esriSpatialRelEnvelopeIntersects\":\n        return \"envelope-intersects\";\n    }\n\n    return e;\n  }\n\n  _makeRelationshipParam(e) {\n    return e.includes(\"esriSpatialRelRelation\") ? e.split(\":\")[1] : \"\";\n  }\n\n  async _getAggregatePagesDataSourceDefinition(e, t, i, r, a, n, l) {\n    await this._ensureLoaded();\n    const o = await this.databaseType();\n    let u = \"\",\n        h = !1,\n        c = !1;\n    null !== n && this._layer.capabilities && this._layer.capabilities.query && !0 === this._layer.capabilities.query.supportsOrderBy && (u = n.constructClause(), c = !0), this._layer.capabilities && this._layer.capabilities.query && !1 === this._layer.capabilities.query.supportsPagination && (c = !1, h = !0, u = this._layer.objectIdField);\n    const p = [];\n\n    for (let s = 0; s < t.length; s++) {\n      const e = new I();\n      e.onStatisticField = null !== t[s].workingexpr ? d(t[s].workingexpr, o) : \"\", e.outStatisticFieldName = t[s].field, e.statisticType = t[s].toStatisticsName(), p.push(e);\n    }\n\n    \"\" === u && (u = e.join(\",\"));\n\n    let y = this._maxQueryRate();\n\n    const f = this._layer.capabilities.query.maxRecordCount;\n    void 0 !== f && f < y && (y = f);\n\n    let _ = null === a ? null === r ? \"1=1\" : \"\" : d(a, o);\n\n    this._layer.definitionExpression && this._useDefinitionExpression && (_ = \"\" !== _ ? \"((\" + this._layer.definitionExpression + \") AND (\" + _ + \"))\" : this._layer.definitionExpression);\n    return new s([], [\"GETPAGES\"], c, {\n      groupbypage: !0,\n      spatialRel: this._makeRelationshipEnum(i),\n      relationParam: this._makeRelationshipParam(i),\n      outFields: [\"*\"],\n      useOIDpagination: h,\n      generatedOid: l,\n      resultRecordCount: y,\n      resultOffset: 0,\n      groupByFieldsForStatistics: e,\n      outStatistics: p,\n      geometry: null === r ? null : r,\n      where: _,\n      orderByFields: u,\n      returnGeometry: !1,\n      returnIdsOnly: !1,\n      internal: {\n        lastMaxId: -1,\n        set: [],\n        lastRetrieved: 0,\n        lastPage: 0,\n        fullyResolved: !1\n      }\n    });\n  }\n\n  async _getAgregagtePhysicalPage(t, i, r) {\n    let s = t.pagesDefinition.where;\n    !0 === t.pagesDefinition.useOIDpagination && (s = \"\" !== s ? \"(\" + s + \") AND (\" + t.pagesDefinition.generatedOid + \">\" + t.pagesDefinition.internal.lastMaxId.toString() + \")\" : t.pagesDefinition.generatedOid + \">\" + t.pagesDefinition.internal.lastMaxId.toString());\n    const a = t.pagesDefinition.internal.lastRetrieved,\n          n = a,\n          l = t.pagesDefinition.internal.lastPage,\n          o = new R();\n    if (this._requestStandardised && (o.sqlFormat = \"standard\"), o.where = s, o.spatialRelationship = t.pagesDefinition.spatialRel, o.relationParameter = t.pagesDefinition.relationParam, o.outFields = t.pagesDefinition.outFields, o.outStatistics = t.pagesDefinition.outStatistics, o.geometry = t.pagesDefinition.geometry, o.groupByFieldsForStatistics = t.pagesDefinition.groupByFieldsForStatistics, o.num = t.pagesDefinition.resultRecordCount, o.start = t.pagesDefinition.internal.lastPage, o.returnGeometry = t.pagesDefinition.returnGeometry, o.orderByFields = \"\" !== t.pagesDefinition.orderByFields ? t.pagesDefinition.orderByFields.split(\",\") : null, this.isTable() && o.geometry && o.spatialRelationship) return [];\n    const u = await this.executeQuery(o, \"execute\");\n    if (this._checkCancelled(r), !u.hasOwnProperty(\"features\")) throw new Error(\"Unnexected Result querying aggregates from layer\");\n    const d = [];\n    if (t.pagesDefinition.internal.lastPage !== l) return [];\n\n    for (let e = 0; e < u.features.length; e++) t.pagesDefinition.internal.set[n + e] = u.features[e].attributes[t.pagesDefinition.generatedOid];\n\n    for (let h = 0; h < u.features.length; h++) d.push(new e({\n      attributes: u.features[h].attributes,\n      geometry: null\n    }));\n\n    return !0 === t.pagesDefinition.useOIDpagination ? 0 === u.features.length ? t.pagesDefinition.internal.fullyResolved = !0 : t.pagesDefinition.internal.lastMaxId = u.features[u.features.length - 1].attributes[t.pagesDefinition.generatedOid] : (void 0 === u.exceededTransferLimit && u.features.length !== t.pagesDefinition.resultRecordCount || !1 === u.exceededTransferLimit) && (t.pagesDefinition.internal.fullyResolved = !0), t.pagesDefinition.internal.lastRetrieved = a + u.features.length, t.pagesDefinition.internal.lastPage += t.pagesDefinition.resultRecordCount, d;\n  }\n\n  static create(e, t, i, r, s) {\n    const a = new m({\n      url: e,\n      outFields: null === t ? [\"*\"] : t\n    });\n    return new P({\n      layer: a,\n      spatialReference: i,\n      lrucache: r,\n      interceptor: s\n    });\n  }\n\n  relationshipMetaData() {\n    return this._layer && this._layer.source && this._layer.source.sourceJSON && this._layer.source.sourceJSON.relationships ? this._layer.source.sourceJSON.relationships : [];\n  }\n\n  serviceUrl() {\n    return u(this._layer.parsedUrl.path);\n  }\n\n  async queryAttachments(e, t, r, s, a) {\n    if (this._layer.capabilities.data.supportsAttachment && this._layer.capabilities.operations.supportsQueryAttachments) {\n      const n = {\n        objectIds: [e],\n        returnMetadata: a\n      };\n      (t && t > 0 || r && r > 0) && (n.size = [t && t > 0 ? t : 0, r && r > 0 ? r : t + 1]), s && s.length > 0 && (n.attachmentTypes = s), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n        layer: this._layer,\n        query: n,\n        method: \"attachments\"\n      });\n      const l = await this._layer.queryAttachments(n),\n            o = [];\n      return l && l[e] && l[e].forEach(t => {\n        const r = this._layer.parsedUrl.path + \"/\" + e.toString() + \"/attachments/\" + t.id.toString();\n        let s = null;\n        a && t.exifInfo && (s = q.convertJsonToArcade(t.exifInfo, !0)), o.push(new i(t.id, t.name, t.contentType, t.size, r, s));\n      }), o;\n    }\n\n    return [];\n  }\n\n  async queryRelatedFeatures(i) {\n    const r = {\n      f: \"json\",\n      relationshipId: i.relationshipId.toString(),\n      definitionExpression: i.where,\n      outFields: i.outFields.join(\",\"),\n      returnGeometry: i.returnGeometry.toString()\n    };\n    void 0 !== i.resultOffset && null !== i.resultOffset && (r.resultOffset = i.resultOffset.toString()), void 0 !== i.resultRecordCount && null !== i.resultRecordCount && (r.resultRecordCount = i.resultRecordCount.toString()), i.orderByFields && (r.orderByFields = i.orderByFields.join(\",\")), i.objectIds.length > 0 && (r.objectIds = i.objectIds.join(\",\")), i.outSpatialReference && (r.outSR = JSON.stringify(i.outSpatialReference.toJSON())), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preRequestCallback({\n      layer: this._layer,\n      queryPayload: r,\n      method: \"relatedrecords\",\n      url: this._layer.parsedUrl.path + \"/queryRelatedRecords\"\n    });\n    const s = await t(this._layer.parsedUrl.path + \"/queryRelatedRecords\", {\n      responseType: \"json\",\n      query: r\n    });\n\n    if (s.data) {\n      const t = {},\n            i = s.data;\n\n      if (i && i.relatedRecordGroups) {\n        const r = i.spatialReference;\n\n        for (const s of i.relatedRecordGroups) {\n          const a = s.objectId,\n                n = [];\n\n          for (const t of s.relatedRecords) {\n            t.geometry && (t.geometry.spatialReference = r);\n            const i = new e({\n              geometry: t.geometry ? _(t.geometry) : null,\n              attributes: t.attributes\n            });\n            n.push(i);\n          }\n\n          t[a] = {\n            features: n,\n            exceededTransferLimit: !0 === i.exceededTransferLimit\n          };\n        }\n      }\n\n      return t;\n    }\n\n    throw new Error(\"Invalid Request\");\n  }\n\n  async getFeatureByObjectId(e, t) {\n    const i = new R();\n    i.outFields = t, i.returnGeometry = !1, i.outSpatialReference = this.spatialReference, i.where = this.objectIdField + \"=\" + e.toString(), this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n      layer: this._layer,\n      query: i,\n      method: \"execute\"\n    });\n    const r = await F(this._layer.parsedUrl.path, i);\n    return 1 === r.features.length ? r.features[0] : null;\n  }\n\n  async getIdentityUser() {\n    await this.load();\n    const e = f?.findCredential(this._layer.url);\n    return e ? e.userId : null;\n  }\n\n  async getOwningSystemUrl() {\n    await this.load();\n    const e = f?.findServerInfo(this._layer.url);\n    if (e) return e.owningSystemUrl;\n    let i = this._layer.url;\n    const r = i.toLowerCase().indexOf(\"/rest/services\");\n\n    if (i = r > -1 ? i.substring(0, r) : i, i) {\n      i += \"/rest/info\";\n\n      try {\n        const e = await t(i, {\n          query: {\n            f: \"json\"\n          }\n        });\n        let r = \"\";\n        return e.data && e.data.owningSystemUrl && (r = e.data.owningSystemUrl), r;\n      } catch (s) {\n        return \"\";\n      }\n    }\n\n    return \"\";\n  }\n\n  getDataSourceFeatureSet() {\n    const e = new P({\n      layer: this._layer,\n      spatialReference: this.spatialReference,\n      outFields: this._overrideFields,\n      includeGeometry: !this._removeGeometry,\n      lrucache: this.recentlyUsedQueries,\n      interceptor: this.featureSetQueryInterceptor\n    });\n    return e._useDefinitionExpression = !1, e;\n  }\n\n}\n\nexport { P as default };","map":{"version":3,"names":["e","t","i","r","s","defaultMaxRecords","a","stableStringify","n","FeatureServiceDatabaseType","l","IdState","o","extractServiceUrl","u","toWhereClause","d","isSingleField","h","decodeStatType","c","createMD5Hash","p","outputTypes","y","id","f","fromJSON","_","m","convertToFeatureSet","g","executeQueryJSON","F","executeQueryPBF","S","b","R","executeForCount","w","executeForIds","D","OptimizedFeatureSetParserContext","x","I","q","P","constructor","declaredClass","_removeGeometry","_overrideFields","formulaCredential","_pageJustIds","_requestStandardised","_useDefinitionExpression","spatialReference","_transparent","_maxProcessing","_layer","layer","_wset","outFields","includeGeometry","_maxQueryRate","end","optimisePagingFeatureQueries","convertQueryToLruCacheKey","toJSON","String","loadImpl","loaded","_initialiseFeatureSet","load","geometryType","fields","slice","length","type","push","toLowerCase","name","source","sourceJSON","currentVersion","useStandardizedQueries","_databaseType","StandardisedNoInterval","Standardised","objectIdField","globalIdField","hasM","supportsM","hasZ","supportsZ","typeIdField","types","_isInFeatureSet","InFeatureSet","_refineSetBlock","_candidateIdTransform","_getSet","_ensureLoaded","_getFilteredSet","_runDatabaseProbe","where","replace","queryObjectIds","_canUsePagination","capabilities","query","supportsPagination","_cacheableFeatureSetSourceKey","url","pbfSupportedForQuery","outStatistics","supportsFormatPBF","supportsQuantizationEditMode","queryPBF","quantizationParameters","mode","parsedUrl","data","unquantize","gdbVersion","isVersioned","nativeCapabilities","title","canQueryRelated","databaseType","requestStandardised","executeQuery","recentlyUsedQueries","getFromCache","path","addToCache","catch","removeFromCache","featureSetQueryInterceptor","preLayerQueryCallback","method","isTable","_getFilteredSetUsingPaging","supportsOrderBy","constructClause","sqlFormat","spatialRelationship","_makeRelationshipEnum","outSpatialReference","orderByFields","split","geometry","relationParameter","_makeRelationshipParam","_checkCancelled","_expandPagedSet","_expandPagedSetFeatureSet","definitionExpression","maxRecordCount","spatialRel","relationParam","resultRecordCount","resultOffset","returnGeometry","returnIdsOnly","internal","set","lastRetrieved","lastPage","fullyResolved","_fieldsIncludingObjectId","join","_clonePageDefinition","groupbypage","useOIDpagination","generatedOid","groupByFieldsForStatistics","_getPhysicalPage","pagesDefinition","num","start","features","attributes","_featureCache","exceededTransferLimit","includes","toUpperCase","_getFeatures","_checkIfNeedToExpandKnownPage","_maxProcessingRate","_lastFetchedIndex","_known","_mode","_featureMap","objectIds","error","Error","_getDistinctPages","parseTree","column","returnDistinctValues","hasOwnProperty","Date","calculated","result","_distinctStat","_countstat","_stats","supportsSqlExpression","supportsStatistics","supportsDistinct","isStandardized","_manualStat","statisticType","onStatisticField","outStatisticFieldName","_stat","_canDoAggregates","workingexpr","_getAggregatePagesDataSourceDefinition","field","toStatisticsName","lastMaxId","_getAgregagtePhysicalPage","toString","create","lrucache","interceptor","relationshipMetaData","relationships","serviceUrl","queryAttachments","supportsAttachment","operations","supportsQueryAttachments","returnMetadata","size","attachmentTypes","forEach","exifInfo","convertJsonToArcade","contentType","queryRelatedFeatures","relationshipId","outSR","JSON","stringify","preRequestCallback","queryPayload","responseType","relatedRecordGroups","objectId","relatedRecords","getFeatureByObjectId","getIdentityUser","findCredential","userId","getOwningSystemUrl","findServerInfo","owningSystemUrl","indexOf","substring","getDataSourceFeatureSet","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import t from\"../../../request.js\";import i from\"../../Attachment.js\";import r from\"../support/FeatureSet.js\";import s from\"../support/IdSet.js\";import{defaultMaxRecords as a,stableStringify as n,FeatureServiceDatabaseType as l,IdState as o,extractServiceUrl as u}from\"../support/shared.js\";import{toWhereClause as d,isSingleField as h}from\"../support/sqlUtils.js\";import{decodeStatType as c}from\"../support/stats.js\";import{createMD5Hash as p,outputTypes as y}from\"../../../core/MD5.js\";import{id as f}from\"../../../kernel.js\";import{fromJSON as _}from\"../../../geometry/support/jsonUtils.js\";import m from\"../../../layers/FeatureLayer.js\";import{convertToFeatureSet as g}from\"../../../layers/graphics/featureConversionUtils.js\";import\"../../../core/Error.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../layers/support/source/DataLayerSource.js\";import{executeQueryJSON as F}from\"../../../rest/query/executeQueryJSON.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/urlUtils.js\";import\"../../../core/unitUtils.js\";import\"../../../geometry/support/spatialReferenceUtils.js\";import{executeQueryPBF as S}from\"../../../rest/query/operations/query.js\";import b from\"../../../rest/support/FeatureSet.js\";import R from\"../../../rest/support/Query.js\";import\"../../../rest/query/support/AttachmentInfo.js\";import\"../../../rest/support/AttachmentQuery.js\";import{executeForCount as w}from\"../../../rest/query/executeForCount.js\";import\"../../../geometry.js\";import{executeForIds as D}from\"../../../rest/query/executeForIds.js\";import\"../../../rest/support/RelationshipQuery.js\";import\"../../../geometry/support/normalizeUtils.js\";import\"../../../rest/support/TopFeaturesQuery.js\";import{OptimizedFeatureSetParserContext as x}from\"../../../rest/query/operations/pbfOptimizedFeatureSet.js\";import I from\"../../../rest/support/StatisticDefinition.js\";import q from\"../../Dictionary.js\";class P extends r{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerDynamic\",this._removeGeometry=!1,this._overrideFields=null,this.formulaCredential=null,this._pageJustIds=!1,this._requestStandardised=!1,this._useDefinitionExpression=!0,e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return a}end(){return this._layer}optimisePagingFeatureQueries(e){this._pageJustIds=e}convertQueryToLruCacheKey(e){const t=n(e.toJSON());return p(t,y.String)}async loadImpl(){return!0===this._layer.loaded?(this._initialiseFeatureSet(),this):(await this._layer.load(),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const i of this._layer.outFields)if(i.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const i of this.fields)if(\"oid\"===i.type)e.push(i),t.push(i.name);else for(const r of this._overrideFields)if(r.toLowerCase()===i.name.toLowerCase()){e.push(i),t.push(i.name);break}this.fields=e,this._overrideFields=t}if(this._layer.source&&this._layer.source.sourceJSON){const e=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=l.StandardisedNoInterval,null!=e&&e>=10.61&&(this._databaseType=l.Standardised)):null!=e&&(e>=10.5&&(this._databaseType=l.StandardisedNoInterval,this._requestStandardised=!0),e>=10.61&&(this._databaseType=l.Standardised))}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this.typeIdField=this._layer.typeIdField,this.types=this._layer.types}_isInFeatureSet(){return o.InFeatureSet}async _refineSetBlock(e){return e}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}async _runDatabaseProbe(e){await this._ensureLoaded();const t=new R;t.where=e.replace(\"OBJECTID\",this._layer.objectIdField);try{return await this._layer.queryObjectIds(t),!0}catch(i){return!1}}_canUsePagination(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}_cacheableFeatureSetSourceKey(){return this._layer.url}pbfSupportedForQuery(e){return!e.outStatistics&&this._layer&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsFormatPBF&&!0===this._layer.capabilities.query.supportsQuantizationEditMode}async queryPBF(e){e.quantizationParameters={mode:\"edit\"};const t=await S(this._layer.parsedUrl,e,new x({}));return b.fromJSON(g(t.data)).unquantize()}get gdbVersion(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion?this._layer.gdbVersion:\"SDE.DEFAULT\":\"\"}nativeCapabilities(){return{title:this._layer.title,source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}executeQuery(e,t){const i=\"execute\"===t?F:\"executeForCount\"===t?w:D,r=\"execute\"===t&&this.pbfSupportedForQuery(e);let s=null;if(this.recentlyUsedQueries){const t=this.convertQueryToLruCacheKey(e);s=this.recentlyUsedQueries.getFromCache(t),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e),this.recentlyUsedQueries.addToCache(t,s),s=s.catch((e=>{throw this.recentlyUsedQueries.removeFromCache(t),e})))}return this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:e,method:t}),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e)),s}async _getFilteredSet(e,t,i,r,a){const n=await this.databaseType();if(this.isTable()&&t&&null!==e&&\"\"!==e){return new s([],[],!0,null)}if(this._canUsePagination())return this._getFilteredSetUsingPaging(e,t,i,r,a);let l=\"\",o=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(l=r.constructClause(),o=!0);const u=new R;u.where=null===i?null===t?\"1=1\":\"\":d(i,n),this._requestStandardised&&(u.sqlFormat=\"standard\"),u.spatialRelationship=this._makeRelationshipEnum(e),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==l?l.split(\",\"):null,u.geometry=null===t?null:t,u.relationParameter=this._makeRelationshipParam(e);let h=await this.executeQuery(u,\"executeForIds\");null===h&&(h=[]),this._checkCancelled(a);return new s([],h,o,null)}_expandPagedSet(e,t,i,r,s){return this._expandPagedSetFeatureSet(e,t,i,r,s)}async _getFilteredSetUsingPaging(e,t,i,r,a){let n=\"\",l=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(n=r.constructClause(),l=!0);const o=await this.databaseType();let u=null===i?null===t?\"1=1\":\"\":d(i,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(u=\"\"!==u?\"((\"+this._layer.definitionExpression+\") AND (\"+u+\"))\":this._layer.definitionExpression);let h=this._maxQueryRate();const c=this._layer.capabilities.query.maxRecordCount;void 0!==c&&c<h&&(h=c);let p=null;if(!0===this._pageJustIds)p=new s([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:this._layer.objectIdField,resultRecordCount:h,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:!1,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{let i=!0;!0===this._removeGeometry&&(i=!1);const r=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]);p=new s([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:r.join(\",\"),resultRecordCount:h,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:i,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return await this._expandPagedSet(p,h,0,1,a),p}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}async _getPhysicalPage(e,t,i){const r=e.pagesDefinition.internal.lastRetrieved,s=r,a=e.pagesDefinition.internal.lastPage,n=new R;this._requestStandardised&&(n.sqlFormat=\"standard\"),n.spatialRelationship=e.pagesDefinition.spatialRel,n.relationParameter=e.pagesDefinition.relationParam,n.outFields=e.pagesDefinition.outFields.split(\",\"),n.num=e.pagesDefinition.resultRecordCount,n.start=e.pagesDefinition.internal.lastPage,n.geometry=e.pagesDefinition.geometry,n.where=e.pagesDefinition.where,n.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,n.returnGeometry=e.pagesDefinition.returnGeometry,n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(i),e.pagesDefinition.internal.lastPage!==a)return\"done\";for(let o=0;o<l.features.length;o++)e.pagesDefinition.internal.set[s+o]=l.features[o].attributes[this._layer.objectIdField];if(!1===this._pageJustIds)for(let o=0;o<l.features.length;o++)this._featureCache[l.features[o].attributes[this._layer.objectIdField]]=l.features[o];return(void 0===l.exceededTransferLimit&&l.features.length!==e.pagesDefinition.resultRecordCount||!1===l.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=r+l.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,\"done\"}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.includes(\"*\"))return t;let i=!1;for(const r of t)if(r.toUpperCase()===this.objectIdField.toUpperCase()){i=!0;break}return!1===i&&t.push(this.objectIdField),t}async _getFeatures(e,t,i,r){const s=[];if(-1!==t&&void 0===this._featureCache[t]&&s.push(t),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return await this._expandPagedSet(e,this._maxProcessingRate(),0,0,r),this._getFeatures(e,t,i,r);let a=0;for(let o=e._lastFetchedIndex;o<e._known.length;o++){if(e._lastFetchedIndex+=1,a++,void 0===this._featureCache[e._known[o]]){let i=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){const t=this._layer._mode;if(void 0!==t._featureMap[e._known[o]]){const r=t._featureMap[e._known[o]];null!==r&&(i=!0,this._featureCache[e._known[o]]=r)}}if(!1===i&&(e._known[o]!==t&&s.push(e._known[o]),s.length>=this._maxProcessingRate()-1))break}if(a>=i&&0===s.length)break}if(0===s.length)return\"success\";const n=new R;this._requestStandardised&&(n.sqlFormat=\"standard\"),n.objectIds=s,n.outFields=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]),n.returnGeometry=!0,!0===this._removeGeometry&&(n.returnGeometry=!1),n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(r),void 0!==l.error)throw new Error(l.error);for(let o=0;o<l.features.length;o++)this._featureCache[l.features[o].attributes[this._layer.objectIdField]]=l.features[o];return\"success\"}async _getDistinctPages(e,t,i,r,s,a,n,l,o){await this._ensureLoaded();const u=await this.databaseType();let h=i.parseTree.column;for(let d=0;d<this._layer.fields.length;d++)if(this._layer.fields[d].name.toLowerCase()===h.toLowerCase()){h=this._layer.fields[d].name;break}const c=new R;this._requestStandardised&&(c.sqlFormat=\"standard\");let p=null===a?null===s?\"1=1\":\"\":d(a,u);this._layer.definitionExpression&&this._useDefinitionExpression&&(p=\"\"!==p?\"((\"+this._layer.definitionExpression+\") AND (\"+p+\"))\":this._layer.definitionExpression),c.where=p,c.spatialRelationship=this._makeRelationshipEnum(r),c.relationParameter=this._makeRelationshipParam(r),c.geometry=null===s?null:s,c.returnDistinctValues=!0,c.returnGeometry=!1,c.outFields=[h];const y=await this.executeQuery(c,\"execute\");if(this._checkCancelled(o),!y.hasOwnProperty(\"features\"))throw new Error(\"Unnexected Result querying statistics from layer\");let f=!1;for(let d=0;d<this._layer.fields.length;d++)if(this._layer.fields[d].name===h){\"date\"===this._layer.fields[d].type&&(f=!0);break}for(let d=0;d<y.features.length;d++){if(f){const e=y.features[d].attributes[h];null!==e?l.push(new Date(e)):l.push(e)}else l.push(y.features[d].attributes[h]);if(l.length>=n)break}if(0===y.features.length)return l;if(y.features.length===this._layer.capabilities.query.maxRecordCount&&l.length<n){return{calculated:!0,result:await this._getDistinctPages(e+y.features.length,t,i,r,s,a,n,l,o)}}return l}async _distinctStat(e,t,i,r,s,a,n){return{calculated:!0,result:await this._getDistinctPages(0,e,t,i,r,s,a,[],n)}}isTable(){return this._layer.isTable||null===this._layer.geometryType||\"table\"===this._layer.type||\"\"===this._layer.geometryType}async _countstat(e,t,i,r){const s=await this.databaseType(),a=new R;if(this._requestStandardised&&(a.sqlFormat=\"standard\"),this.isTable()&&i&&null!==t&&\"\"!==t)return{calculated:!0,result:0};let n=null===r?null===i?\"1=1\":\"\":d(r,s);this._layer.definitionExpression&&this._useDefinitionExpression&&(n=\"\"!==n?\"((\"+this._layer.definitionExpression+\") AND (\"+n+\"))\":this._layer.definitionExpression),a.where=n,a.where=n,a.spatialRelationship=this._makeRelationshipEnum(t),a.relationParameter=this._makeRelationshipParam(t),a.geometry=null===i?null:i,a.returnGeometry=!1;return{calculated:!0,result:await this.executeQuery(a,\"executeForCount\")}}async _stats(e,t,i,r,s,a,n){await this._ensureLoaded();const l=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression,o=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics,u=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsDistinct;if(\"count\"===e)return u?this._countstat(e,i,r,s):{calculated:!1};if(!1===o||!1===h(t)&&!1===l||!1===t.isStandardized)return\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n);if(\"distinct\"===e)return!1===u?\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n):this._distinctStat(e,t,i,r,s,a,n);const p=await this.databaseType();if(this.isTable()&&r&&null!==i&&\"\"!==i)return{calculated:!0,result:null};const y=new R;this._requestStandardised&&(y.sqlFormat=\"standard\");let f=null===s?null===r?\"1=1\":\"\":d(s,p);this._layer.definitionExpression&&this._useDefinitionExpression&&(f=\"\"!==f?\"((\"+this._layer.definitionExpression+\") AND (\"+f+\"))\":this._layer.definitionExpression),y.where=f,y.spatialRelationship=this._makeRelationshipEnum(i),y.relationParameter=this._makeRelationshipParam(i),y.geometry=null===r?null:r;const _=new I;_.statisticType=c(e),_.onStatisticField=d(t,p),_.outStatisticFieldName=\"ARCADE_STAT_RESULT\",y.returnGeometry=!1;let m=\"ARCADE_STAT_RESULT\";y.outStatistics=[_];const g=await this.executeQuery(y,\"execute\");if(!g.hasOwnProperty(\"features\")||0===g.features.length)throw new Error(\"Unnexected Result querying statistics from layer\");let F=!1;for(let d=0;d<g.fields.length;d++)if(\"ARCADE_STAT_RESULT\"===g.fields[d].name.toUpperCase()){m=g.fields[d].name,\"date\"===g.fields[d].type&&(F=!0);break}if(F){let e=g.features[0].attributes[m];return null!==e&&(e=new Date(g.features[0].attributes[m])),{calculated:!0,result:e}}return{calculated:!0,result:g.features[0].attributes[m]}}_stat(e,t,i,r,s,a,n){return this._stats(e,t,i,r,s,a,n)}async _canDoAggregates(e,t){await this._ensureLoaded();let i=!1;const r=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression;if(void 0!==this._layer.capabilities&&null!==this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics&&!0===this._layer.capabilities.query.supportsOrderBy&&(i=!0),i)for(let s=0;s<t.length-1;s++)null!==t[s].workingexpr&&(!1===t[s].workingexpr.isStandardized||!1===h(t[s].workingexpr)&&!1===r)&&(i=!1);return!1!==i}_makeRelationshipEnum(e){if(e.includes(\"esriSpatialRelRelation\"))return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.includes(\"esriSpatialRelRelation\")?e.split(\":\")[1]:\"\"}async _getAggregatePagesDataSourceDefinition(e,t,i,r,a,n,l){await this._ensureLoaded();const o=await this.databaseType();let u=\"\",h=!1,c=!1;null!==n&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(u=n.constructClause(),c=!0),this._layer.capabilities&&this._layer.capabilities.query&&!1===this._layer.capabilities.query.supportsPagination&&(c=!1,h=!0,u=this._layer.objectIdField);const p=[];for(let s=0;s<t.length;s++){const e=new I;e.onStatisticField=null!==t[s].workingexpr?d(t[s].workingexpr,o):\"\",e.outStatisticFieldName=t[s].field,e.statisticType=t[s].toStatisticsName(),p.push(e)}\"\"===u&&(u=e.join(\",\"));let y=this._maxQueryRate();const f=this._layer.capabilities.query.maxRecordCount;void 0!==f&&f<y&&(y=f);let _=null===a?null===r?\"1=1\":\"\":d(a,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(_=\"\"!==_?\"((\"+this._layer.definitionExpression+\") AND (\"+_+\"))\":this._layer.definitionExpression);return new s([],[\"GETPAGES\"],c,{groupbypage:!0,spatialRel:this._makeRelationshipEnum(i),relationParam:this._makeRelationshipParam(i),outFields:[\"*\"],useOIDpagination:h,generatedOid:l,resultRecordCount:y,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:p,geometry:null===r?null:r,where:_,orderByFields:u,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}async _getAgregagtePhysicalPage(t,i,r){let s=t.pagesDefinition.where;!0===t.pagesDefinition.useOIDpagination&&(s=\"\"!==s?\"(\"+s+\") AND (\"+t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString()+\")\":t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString());const a=t.pagesDefinition.internal.lastRetrieved,n=a,l=t.pagesDefinition.internal.lastPage,o=new R;if(this._requestStandardised&&(o.sqlFormat=\"standard\"),o.where=s,o.spatialRelationship=t.pagesDefinition.spatialRel,o.relationParameter=t.pagesDefinition.relationParam,o.outFields=t.pagesDefinition.outFields,o.outStatistics=t.pagesDefinition.outStatistics,o.geometry=t.pagesDefinition.geometry,o.groupByFieldsForStatistics=t.pagesDefinition.groupByFieldsForStatistics,o.num=t.pagesDefinition.resultRecordCount,o.start=t.pagesDefinition.internal.lastPage,o.returnGeometry=t.pagesDefinition.returnGeometry,o.orderByFields=\"\"!==t.pagesDefinition.orderByFields?t.pagesDefinition.orderByFields.split(\",\"):null,this.isTable()&&o.geometry&&o.spatialRelationship)return[];const u=await this.executeQuery(o,\"execute\");if(this._checkCancelled(r),!u.hasOwnProperty(\"features\"))throw new Error(\"Unnexected Result querying aggregates from layer\");const d=[];if(t.pagesDefinition.internal.lastPage!==l)return[];for(let e=0;e<u.features.length;e++)t.pagesDefinition.internal.set[n+e]=u.features[e].attributes[t.pagesDefinition.generatedOid];for(let h=0;h<u.features.length;h++)d.push(new e({attributes:u.features[h].attributes,geometry:null}));return!0===t.pagesDefinition.useOIDpagination?0===u.features.length?t.pagesDefinition.internal.fullyResolved=!0:t.pagesDefinition.internal.lastMaxId=u.features[u.features.length-1].attributes[t.pagesDefinition.generatedOid]:(void 0===u.exceededTransferLimit&&u.features.length!==t.pagesDefinition.resultRecordCount||!1===u.exceededTransferLimit)&&(t.pagesDefinition.internal.fullyResolved=!0),t.pagesDefinition.internal.lastRetrieved=a+u.features.length,t.pagesDefinition.internal.lastPage+=t.pagesDefinition.resultRecordCount,d}static create(e,t,i,r,s){const a=new m({url:e,outFields:null===t?[\"*\"]:t});return new P({layer:a,spatialReference:i,lrucache:r,interceptor:s})}relationshipMetaData(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON&&this._layer.source.sourceJSON.relationships?this._layer.source.sourceJSON.relationships:[]}serviceUrl(){return u(this._layer.parsedUrl.path)}async queryAttachments(e,t,r,s,a){if(this._layer.capabilities.data.supportsAttachment&&this._layer.capabilities.operations.supportsQueryAttachments){const n={objectIds:[e],returnMetadata:a};(t&&t>0||r&&r>0)&&(n.size=[t&&t>0?t:0,r&&r>0?r:t+1]),s&&s.length>0&&(n.attachmentTypes=s),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:n,method:\"attachments\"});const l=await this._layer.queryAttachments(n),o=[];return l&&l[e]&&l[e].forEach((t=>{const r=this._layer.parsedUrl.path+\"/\"+e.toString()+\"/attachments/\"+t.id.toString();let s=null;a&&t.exifInfo&&(s=q.convertJsonToArcade(t.exifInfo,!0)),o.push(new i(t.id,t.name,t.contentType,t.size,r,s))})),o}return[]}async queryRelatedFeatures(i){const r={f:\"json\",relationshipId:i.relationshipId.toString(),definitionExpression:i.where,outFields:i.outFields.join(\",\"),returnGeometry:i.returnGeometry.toString()};void 0!==i.resultOffset&&null!==i.resultOffset&&(r.resultOffset=i.resultOffset.toString()),void 0!==i.resultRecordCount&&null!==i.resultRecordCount&&(r.resultRecordCount=i.resultRecordCount.toString()),i.orderByFields&&(r.orderByFields=i.orderByFields.join(\",\")),i.objectIds.length>0&&(r.objectIds=i.objectIds.join(\",\")),i.outSpatialReference&&(r.outSR=JSON.stringify(i.outSpatialReference.toJSON())),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preRequestCallback({layer:this._layer,queryPayload:r,method:\"relatedrecords\",url:this._layer.parsedUrl.path+\"/queryRelatedRecords\"});const s=await t(this._layer.parsedUrl.path+\"/queryRelatedRecords\",{responseType:\"json\",query:r});if(s.data){const t={},i=s.data;if(i&&i.relatedRecordGroups){const r=i.spatialReference;for(const s of i.relatedRecordGroups){const a=s.objectId,n=[];for(const t of s.relatedRecords){t.geometry&&(t.geometry.spatialReference=r);const i=new e({geometry:t.geometry?_(t.geometry):null,attributes:t.attributes});n.push(i)}t[a]={features:n,exceededTransferLimit:!0===i.exceededTransferLimit}}}return t}throw new Error(\"Invalid Request\")}async getFeatureByObjectId(e,t){const i=new R;i.outFields=t,i.returnGeometry=!1,i.outSpatialReference=this.spatialReference,i.where=this.objectIdField+\"=\"+e.toString(),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:i,method:\"execute\"});const r=await F(this._layer.parsedUrl.path,i);return 1===r.features.length?r.features[0]:null}async getIdentityUser(){await this.load();const e=f?.findCredential(this._layer.url);return e?e.userId:null}async getOwningSystemUrl(){await this.load();const e=f?.findServerInfo(this._layer.url);if(e)return e.owningSystemUrl;let i=this._layer.url;const r=i.toLowerCase().indexOf(\"/rest/services\");if(i=r>-1?i.substring(0,r):i,i){i+=\"/rest/info\";try{const e=await t(i,{query:{f:\"json\"}});let r=\"\";return e.data&&e.data.owningSystemUrl&&(r=e.data.owningSystemUrl),r}catch(s){return\"\"}}return\"\"}getDataSourceFeatureSet(){const e=new P({layer:this._layer,spatialReference:this.spatialReference,outFields:this._overrideFields,includeGeometry:!this._removeGeometry,lrucache:this.recentlyUsedQueries,interceptor:this.featureSetQueryInterceptor});return e._useDefinitionExpression=!1,e}}export{P as default};\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,qBAAb;AAAmC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,OAAOC,CAAP,MAAa,0BAAb;AAAwC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,eAAe,IAAIC,CAAjD,EAAmDC,0BAA0B,IAAIC,CAAjF,EAAmFC,OAAO,IAAIC,CAA9F,EAAgGC,iBAAiB,IAAIC,CAArH,QAA2H,sBAA3H;AAAkJ,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,aAAa,IAAIC,CAA3C,QAAiD,wBAAjD;AAA0E,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qBAA/B;AAAqD,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,WAAW,IAAIC,CAAzC,QAA+C,sBAA/C;AAAsE,SAAOC,EAAE,IAAIC,CAAb,QAAmB,oBAAnB;AAAwC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,wCAAzB;AAAkE,OAAOC,CAAP,MAAa,iCAAb;AAA+C,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,oDAApC;AAAyF,OAAM,wBAAN;AAA+B,OAAM,sBAAN;AAA6B,OAAM,yBAAN;AAAgC,OAAM,mDAAN;AAA0D,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,yCAAjC;AAA2E,OAAM,6BAAN;AAAoC,OAAM,2BAAN;AAAkC,OAAM,4BAAN;AAAmC,OAAM,oDAAN;AAA2D,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,yCAAhC;AAA0E,OAAOC,CAAP,MAAa,qCAAb;AAAmD,OAAOC,CAAP,MAAa,gCAAb;AAA8C,OAAM,+CAAN;AAAsD,OAAM,0CAAN;AAAiD,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,wCAAhC;AAAyE,OAAM,sBAAN;AAA6B,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,sCAA9B;AAAqE,OAAM,4CAAN;AAAmD,OAAM,6CAAN;AAAoD,OAAM,2CAAN;AAAkD,SAAOC,gCAAgC,IAAIC,CAA3C,QAAiD,0DAAjD;AAA4G,OAAOC,CAAP,MAAa,8CAAb;AAA4D,OAAOC,CAAP,MAAa,qBAAb;;AAAmC,MAAMC,CAAN,SAAgB3C,CAAhB,CAAiB;EAAC4C,WAAW,CAAC/C,CAAD,EAAG;IAAC,MAAMA,CAAN,GAAS,KAAKgD,aAAL,GAAmB,oDAA5B,EAAiF,KAAKC,eAAL,GAAqB,CAAC,CAAvG,EAAyG,KAAKC,eAAL,GAAqB,IAA9H,EAAmI,KAAKC,iBAAL,GAAuB,IAA1J,EAA+J,KAAKC,YAAL,GAAkB,CAAC,CAAlL,EAAoL,KAAKC,oBAAL,GAA0B,CAAC,CAA/M,EAAiN,KAAKC,wBAAL,GAA8B,CAAC,CAAhP,EAAkPtD,CAAC,CAACuD,gBAAF,KAAqB,KAAKA,gBAAL,GAAsBvD,CAAC,CAACuD,gBAA7C,CAAlP,EAAiT,KAAKC,YAAL,GAAkB,CAAC,CAApU,EAAsU,KAAKC,cAAL,GAAoB,GAA1V,EAA8V,KAAKC,MAAL,GAAY1D,CAAC,CAAC2D,KAA5W,EAAkX,KAAKC,KAAL,GAAW,IAA7X,EAAkY,KAAK,CAAL,KAAS5D,CAAC,CAAC6D,SAAX,KAAuB,KAAKX,eAAL,GAAqBlD,CAAC,CAAC6D,SAA9C,CAAlY,EAA2b,KAAK,CAAL,KAAS7D,CAAC,CAAC8D,eAAX,KAA6B,KAAKb,eAAL,GAAqB,CAAC,CAAD,KAAKjD,CAAC,CAAC8D,eAAzD,CAA3b;EAAqgB;;EAAAC,aAAa,GAAE;IAAC,OAAOzD,CAAP;EAAS;;EAAA0D,GAAG,GAAE;IAAC,OAAO,KAAKN,MAAZ;EAAmB;;EAAAO,4BAA4B,CAACjE,CAAD,EAAG;IAAC,KAAKoD,YAAL,GAAkBpD,CAAlB;EAAoB;;EAAAkE,yBAAyB,CAAClE,CAAD,EAAG;IAAC,MAAMC,CAAC,GAACO,CAAC,CAACR,CAAC,CAACmE,MAAF,EAAD,CAAT;IAAsB,OAAO7C,CAAC,CAACrB,CAAD,EAAGuB,CAAC,CAAC4C,MAAL,CAAR;EAAqB;;EAAc,MAARC,QAAQ,GAAE;IAAC,OAAM,CAAC,CAAD,KAAK,KAAKX,MAAL,CAAYY,MAAjB,IAAyB,KAAKC,qBAAL,IAA6B,IAAtD,KAA6D,MAAM,KAAKb,MAAL,CAAYc,IAAZ,EAAN,EAAyB,KAAKD,qBAAL,EAAzB,EAAsD,IAAnH,CAAN;EAA+H;;EAAAA,qBAAqB,GAAE;IAAC,IAAG,QAAM,KAAKhB,gBAAX,KAA8B,KAAKA,gBAAL,GAAsB,KAAKG,MAAL,CAAYH,gBAAhE,GAAkF,KAAKkB,YAAL,GAAkB,KAAKf,MAAL,CAAYe,YAAhH,EAA6H,KAAKC,MAAL,GAAY,KAAKhB,MAAL,CAAYgB,MAAZ,CAAmBC,KAAnB,CAAyB,CAAzB,CAAzI,EAAqK,KAAKjB,MAAL,CAAYG,SAApL;MAA8L,IAAG,MAAI,KAAKH,MAAL,CAAYG,SAAZ,CAAsBe,MAA1B,IAAkC,QAAM,KAAKlB,MAAL,CAAYG,SAAZ,CAAsB,CAAtB,CAA3C,EAAoE,CAApE,KAAyE;QAAC,MAAM7D,CAAC,GAAC,EAAR;;QAAW,KAAI,MAAMC,CAAV,IAAe,KAAKyE,MAApB,EAA2B,IAAG,UAAQzE,CAAC,CAAC4E,IAAb,EAAkB7E,CAAC,CAAC8E,IAAF,CAAO7E,CAAP,EAAlB,KAAiC,KAAI,MAAMC,CAAV,IAAe,KAAKwD,MAAL,CAAYG,SAA3B,EAAqC,IAAG3D,CAAC,CAAC6E,WAAF,OAAkB9E,CAAC,CAAC+E,IAAF,CAAOD,WAAP,EAArB,EAA0C;UAAC/E,CAAC,CAAC8E,IAAF,CAAO7E,CAAP;UAAU;QAAM;;QAAA,KAAKyE,MAAL,GAAY1E,CAAZ;MAAc;IAA7b,OAAic;IAAC,IAAG,SAAO,KAAKkD,eAAf,EAA+B,IAAG,MAAI,KAAKA,eAAL,CAAqB0B,MAAzB,IAAiC,QAAM,KAAK1B,eAAL,CAAqB,CAArB,CAA1C,EAAkE,KAAKA,eAAL,GAAqB,IAArB,CAAlE,KAAgG;MAAC,MAAMlD,CAAC,GAAC,EAAR;MAAA,MAAWC,CAAC,GAAC,EAAb;;MAAgB,KAAI,MAAMC,CAAV,IAAe,KAAKwE,MAApB,EAA2B,IAAG,UAAQxE,CAAC,CAAC2E,IAAb,EAAkB7E,CAAC,CAAC8E,IAAF,CAAO5E,CAAP,GAAUD,CAAC,CAAC6E,IAAF,CAAO5E,CAAC,CAAC8E,IAAT,CAAV,CAAlB,KAAgD,KAAI,MAAM7E,CAAV,IAAe,KAAK+C,eAApB,EAAoC,IAAG/C,CAAC,CAAC4E,WAAF,OAAkB7E,CAAC,CAAC8E,IAAF,CAAOD,WAAP,EAArB,EAA0C;QAAC/E,CAAC,CAAC8E,IAAF,CAAO5E,CAAP,GAAUD,CAAC,CAAC6E,IAAF,CAAO5E,CAAC,CAAC8E,IAAT,CAAV;QAAyB;MAAM;;MAAA,KAAKN,MAAL,GAAY1E,CAAZ,EAAc,KAAKkD,eAAL,GAAqBjD,CAAnC;IAAqC;;IAAA,IAAG,KAAKyD,MAAL,CAAYuB,MAAZ,IAAoB,KAAKvB,MAAL,CAAYuB,MAAZ,CAAmBC,UAA1C,EAAqD;MAAC,MAAMlF,CAAC,GAAC,KAAK0D,MAAL,CAAYuB,MAAZ,CAAmBC,UAAnB,CAA8BC,cAAtC;MAAqD,CAAC,CAAD,KAAK,KAAKzB,MAAL,CAAYuB,MAAZ,CAAmBC,UAAnB,CAA8BE,sBAAnC,IAA2D,KAAKC,aAAL,GAAmB3E,CAAC,CAAC4E,sBAArB,EAA4C,QAAMtF,CAAN,IAASA,CAAC,IAAE,KAAZ,KAAoB,KAAKqF,aAAL,GAAmB3E,CAAC,CAAC6E,YAAzC,CAAvG,IAA+J,QAAMvF,CAAN,KAAUA,CAAC,IAAE,IAAH,KAAU,KAAKqF,aAAL,GAAmB3E,CAAC,CAAC4E,sBAArB,EAA4C,KAAKjC,oBAAL,GAA0B,CAAC,CAAjF,GAAoFrD,CAAC,IAAE,KAAH,KAAW,KAAKqF,aAAL,GAAmB3E,CAAC,CAAC6E,YAAhC,CAA9F,CAA/J;IAA4S;;IAAA,KAAKC,aAAL,GAAmB,KAAK9B,MAAL,CAAY8B,aAA/B;;IAA6C,KAAI,MAAMxF,CAAV,IAAe,KAAK0E,MAApB,EAA2B,gBAAc1E,CAAC,CAAC6E,IAAhB,KAAuB,KAAKY,aAAL,GAAmBzF,CAAC,CAACgF,IAA5C;;IAAkD,KAAKU,IAAL,GAAU,KAAKhC,MAAL,CAAYiC,SAAtB,EAAgC,KAAKC,IAAL,GAAU,KAAKlC,MAAL,CAAYmC,SAAtD,EAAgE,KAAKC,WAAL,GAAiB,KAAKpC,MAAL,CAAYoC,WAA7F,EAAyG,KAAKC,KAAL,GAAW,KAAKrC,MAAL,CAAYqC,KAAhI;EAAsI;;EAAAC,eAAe,GAAE;IAAC,OAAOpF,CAAC,CAACqF,YAAT;EAAsB;;EAAqB,MAAfC,eAAe,CAAClG,CAAD,EAAG;IAAC,OAAOA,CAAP;EAAS;;EAAAmG,qBAAqB,CAACnG,CAAD,EAAG;IAAC,OAAOA,CAAP;EAAS;;EAAa,MAAPoG,OAAO,CAACpG,CAAD,EAAG;IAAC,IAAG,SAAO,KAAK4D,KAAf,EAAqB;MAAC,MAAM,KAAKyC,aAAL,EAAN;MAA2B,MAAMpG,CAAC,GAAC,MAAM,KAAKqG,eAAL,CAAqB,EAArB,EAAwB,IAAxB,EAA6B,IAA7B,EAAkC,IAAlC,EAAuCtG,CAAvC,CAAd;MAAwD,OAAO,KAAK4D,KAAL,GAAW3D,CAAX,EAAaA,CAApB;IAAsB;;IAAA,OAAO,KAAK2D,KAAZ;EAAkB;;EAAuB,MAAjB2C,iBAAiB,CAACvG,CAAD,EAAG;IAAC,MAAM,KAAKqG,aAAL,EAAN;IAA2B,MAAMpG,CAAC,GAAC,IAAIoC,CAAJ,EAAR;IAAcpC,CAAC,CAACuG,KAAF,GAAQxG,CAAC,CAACyG,OAAF,CAAU,UAAV,EAAqB,KAAK/C,MAAL,CAAY8B,aAAjC,CAAR;;IAAwD,IAAG;MAAC,OAAO,MAAM,KAAK9B,MAAL,CAAYgD,cAAZ,CAA2BzG,CAA3B,CAAN,EAAoC,CAAC,CAA5C;IAA8C,CAAlD,CAAkD,OAAMC,CAAN,EAAQ;MAAC,OAAM,CAAC,CAAP;IAAS;EAAC;;EAAAyG,iBAAiB,GAAE;IAAC,OAAM,EAAE,CAAC,KAAKjD,MAAL,CAAYkD,YAAb,IAA2B,CAAC,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAArD,IAA4D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BC,kBAAlG,CAAN;EAA4H;;EAAAC,6BAA6B,GAAE;IAAC,OAAO,KAAKrD,MAAL,CAAYsD,GAAnB;EAAuB;;EAAAC,oBAAoB,CAACjH,CAAD,EAAG;IAAC,OAAM,CAACA,CAAC,CAACkH,aAAH,IAAkB,KAAKxD,MAAvB,IAA+B,KAAKA,MAAL,CAAYkD,YAA3C,IAAyD,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAlF,IAAyF,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BM,iBAA7H,IAAgJ,CAAC,CAAD,KAAK,KAAKzD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BO,4BAA1L;EAAuN;;EAAc,MAARC,QAAQ,CAACrH,CAAD,EAAG;IAACA,CAAC,CAACsH,sBAAF,GAAyB;MAACC,IAAI,EAAC;IAAN,CAAzB;IAAuC,MAAMtH,CAAC,GAAC,MAAMkC,CAAC,CAAC,KAAKuB,MAAL,CAAY8D,SAAb,EAAuBxH,CAAvB,EAAyB,IAAI2C,CAAJ,CAAM,EAAN,CAAzB,CAAf;IAAmD,OAAOP,CAAC,CAACT,QAAF,CAAWI,CAAC,CAAC9B,CAAC,CAACwH,IAAH,CAAZ,EAAsBC,UAAtB,EAAP;EAA0C;;EAAc,IAAVC,UAAU,GAAE;IAAC,OAAO,KAAKjE,MAAL,IAAa,KAAKA,MAAL,CAAYkD,YAAzB,IAAuC,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBa,IAAhE,IAAsE,KAAK/D,MAAL,CAAYkD,YAAZ,CAAyBa,IAAzB,CAA8BG,WAApG,GAAgH,KAAKlE,MAAL,CAAYiE,UAAZ,GAAuB,KAAKjE,MAAL,CAAYiE,UAAnC,GAA8C,aAA9J,GAA4K,EAAnL;EAAsL;;EAAAE,kBAAkB,GAAE;IAAC,OAAM;MAACC,KAAK,EAAC,KAAKpE,MAAL,CAAYoE,KAAnB;MAAyB7C,MAAM,EAAC,IAAhC;MAAqC8C,eAAe,EAAC,CAAC,CAAtD;MAAwDnB,YAAY,EAAC,KAAKlD,MAAL,CAAYkD,YAAjF;MAA8FoB,YAAY,EAAC,KAAK3C,aAAhH;MAA8H4C,mBAAmB,EAAC,KAAK5E;IAAvJ,CAAN;EAAmL;;EAAA6E,YAAY,CAAClI,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAMC,CAAC,GAAC,cAAYD,CAAZ,GAAcgC,CAAd,GAAgB,sBAAoBhC,CAApB,GAAsBsC,CAAtB,GAAwBE,CAAhD;IAAA,MAAkDtC,CAAC,GAAC,cAAYF,CAAZ,IAAe,KAAKgH,oBAAL,CAA0BjH,CAA1B,CAAnE;IAAgG,IAAII,CAAC,GAAC,IAAN;;IAAW,IAAG,KAAK+H,mBAAR,EAA4B;MAAC,MAAMlI,CAAC,GAAC,KAAKiE,yBAAL,CAA+BlE,CAA/B,CAAR;MAA0CI,CAAC,GAAC,KAAK+H,mBAAL,CAAyBC,YAAzB,CAAsCnI,CAAtC,CAAF,EAA2C,SAAOG,CAAP,KAAWA,CAAC,GAAC,CAAC,CAAD,KAAKD,CAAL,GAAOD,CAAC,CAAC,KAAKwD,MAAL,CAAY8D,SAAZ,CAAsBa,IAAvB,EAA4BrI,CAA5B,CAAR,GAAuC,KAAKqH,QAAL,CAAcrH,CAAd,CAAzC,EAA0D,KAAKmI,mBAAL,CAAyBG,UAAzB,CAAoCrI,CAApC,EAAsCG,CAAtC,CAA1D,EAAmGA,CAAC,GAACA,CAAC,CAACmI,KAAF,CAASvI,CAAC,IAAE;QAAC,MAAM,KAAKmI,mBAAL,CAAyBK,eAAzB,CAAyCvI,CAAzC,GAA4CD,CAAlD;MAAoD,CAAjE,CAAhH,CAA3C;IAAgO;;IAAA,OAAO,KAAKyI,0BAAL,IAAiC,KAAKA,0BAAL,CAAgCC,qBAAhC,CAAsD;MAAC/E,KAAK,EAAC,KAAKD,MAAZ;MAAmBmD,KAAK,EAAC7G,CAAzB;MAA2B2I,MAAM,EAAC1I;IAAlC,CAAtD,CAAjC,EAA6H,SAAOG,CAAP,KAAWA,CAAC,GAAC,CAAC,CAAD,KAAKD,CAAL,GAAOD,CAAC,CAAC,KAAKwD,MAAL,CAAY8D,SAAZ,CAAsBa,IAAvB,EAA4BrI,CAA5B,CAAR,GAAuC,KAAKqH,QAAL,CAAcrH,CAAd,CAApD,CAA7H,EAAmMI,CAA1M;EAA4M;;EAAqB,MAAfkG,eAAe,CAACtG,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASG,CAAT,EAAW;IAAC,MAAME,CAAC,GAAC,MAAM,KAAKwH,YAAL,EAAd;;IAAkC,IAAG,KAAKY,OAAL,MAAgB3I,CAAhB,IAAmB,SAAOD,CAA1B,IAA6B,OAAKA,CAArC,EAAuC;MAAC,OAAO,IAAII,CAAJ,CAAM,EAAN,EAAS,EAAT,EAAY,CAAC,CAAb,EAAe,IAAf,CAAP;IAA4B;;IAAA,IAAG,KAAKuG,iBAAL,EAAH,EAA4B,OAAO,KAAKkC,0BAAL,CAAgC7I,CAAhC,EAAkCC,CAAlC,EAAoCC,CAApC,EAAsCC,CAAtC,EAAwCG,CAAxC,CAAP;IAAkD,IAAII,CAAC,GAAC,EAAN;IAAA,IAASE,CAAC,GAAC,CAAC,CAAZ;IAAc,SAAOT,CAAP,IAAU,KAAKuD,MAAL,CAAYkD,YAAtB,IAAoC,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAA7D,IAAoE,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BiC,eAAxG,KAA0HpI,CAAC,GAACP,CAAC,CAAC4I,eAAF,EAAF,EAAsBnI,CAAC,GAAC,CAAC,CAAnJ;IAAsJ,MAAME,CAAC,GAAC,IAAIuB,CAAJ,EAAR;IAAcvB,CAAC,CAAC0F,KAAF,GAAQ,SAAOtG,CAAP,GAAS,SAAOD,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2Be,CAAC,CAACd,CAAD,EAAGM,CAAH,CAApC,EAA0C,KAAK6C,oBAAL,KAA4BvC,CAAC,CAACkI,SAAF,GAAY,UAAxC,CAA1C,EAA8FlI,CAAC,CAACmI,mBAAF,GAAsB,KAAKC,qBAAL,CAA2BlJ,CAA3B,CAApH,EAAkJc,CAAC,CAACqI,mBAAF,GAAsB,KAAK5F,gBAA7K,EAA8LzC,CAAC,CAACsI,aAAF,GAAgB,OAAK1I,CAAL,GAAOA,CAAC,CAAC2I,KAAF,CAAQ,GAAR,CAAP,GAAoB,IAAlO,EAAuOvI,CAAC,CAACwI,QAAF,GAAW,SAAOrJ,CAAP,GAAS,IAAT,GAAcA,CAAhQ,EAAkQa,CAAC,CAACyI,iBAAF,GAAoB,KAAKC,sBAAL,CAA4BxJ,CAA5B,CAAtR;IAAqT,IAAIkB,CAAC,GAAC,MAAM,KAAKgH,YAAL,CAAkBpH,CAAlB,EAAoB,eAApB,CAAZ;IAAiD,SAAOI,CAAP,KAAWA,CAAC,GAAC,EAAb,GAAiB,KAAKuI,eAAL,CAAqBnJ,CAArB,CAAjB;IAAyC,OAAO,IAAIF,CAAJ,CAAM,EAAN,EAASc,CAAT,EAAWN,CAAX,EAAa,IAAb,CAAP;EAA0B;;EAAA8I,eAAe,CAAC1J,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAW;IAAC,OAAO,KAAKuJ,yBAAL,CAA+B3J,CAA/B,EAAiCC,CAAjC,EAAmCC,CAAnC,EAAqCC,CAArC,EAAuCC,CAAvC,CAAP;EAAiD;;EAAgC,MAA1ByI,0BAA0B,CAAC7I,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASG,CAAT,EAAW;IAAC,IAAIE,CAAC,GAAC,EAAN;IAAA,IAASE,CAAC,GAAC,CAAC,CAAZ;IAAc,SAAOP,CAAP,IAAU,KAAKuD,MAAL,CAAYkD,YAAtB,IAAoC,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAA7D,IAAoE,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BiC,eAAxG,KAA0HtI,CAAC,GAACL,CAAC,CAAC4I,eAAF,EAAF,EAAsBrI,CAAC,GAAC,CAAC,CAAnJ;IAAsJ,MAAME,CAAC,GAAC,MAAM,KAAKoH,YAAL,EAAd;IAAkC,IAAIlH,CAAC,GAAC,SAAOZ,CAAP,GAAS,SAAOD,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2Be,CAAC,CAACd,CAAD,EAAGU,CAAH,CAAlC;IAAwC,KAAK8C,MAAL,CAAYkG,oBAAZ,IAAkC,KAAKtG,wBAAvC,KAAkExC,CAAC,GAAC,OAAKA,CAAL,GAAO,OAAK,KAAK4C,MAAL,CAAYkG,oBAAjB,GAAsC,SAAtC,GAAgD9I,CAAhD,GAAkD,IAAzD,GAA8D,KAAK4C,MAAL,CAAYkG,oBAA9I;;IAAoK,IAAI1I,CAAC,GAAC,KAAK6C,aAAL,EAAN;;IAA2B,MAAM3C,CAAC,GAAC,KAAKsC,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BgD,cAAvC;IAAsD,KAAK,CAAL,KAASzI,CAAT,IAAYA,CAAC,GAACF,CAAd,KAAkBA,CAAC,GAACE,CAApB;IAAuB,IAAIE,CAAC,GAAC,IAAN;IAAW,IAAG,CAAC,CAAD,KAAK,KAAK8B,YAAb,EAA0B9B,CAAC,GAAC,IAAIlB,CAAJ,CAAM,EAAN,EAAS,CAAC,UAAD,CAAT,EAAsBM,CAAtB,EAAwB;MAACoJ,UAAU,EAAC,KAAKZ,qBAAL,CAA2BlJ,CAA3B,CAAZ;MAA0C+J,aAAa,EAAC,KAAKP,sBAAL,CAA4BxJ,CAA5B,CAAxD;MAAuF6D,SAAS,EAAC,KAAKH,MAAL,CAAY8B,aAA7G;MAA2HwE,iBAAiB,EAAC9I,CAA7I;MAA+I+I,YAAY,EAAC,CAA5J;MAA8JX,QAAQ,EAAC,SAAOrJ,CAAP,GAAS,IAAT,GAAcA,CAArL;MAAuLuG,KAAK,EAAC1F,CAA7L;MAA+LsI,aAAa,EAAC5I,CAA7M;MAA+M0J,cAAc,EAAC,CAAC,CAA/N;MAAiOC,aAAa,EAAC,OAA/O;MAAuPC,QAAQ,EAAC;QAACC,GAAG,EAAC,EAAL;QAAQC,aAAa,EAAC,CAAtB;QAAwBC,QAAQ,EAAC,CAAjC;QAAmCC,aAAa,EAAC,CAAC;MAAlD;IAAhQ,CAAxB,CAAF,CAA1B,KAA+W;MAAC,IAAItK,CAAC,GAAC,CAAC,CAAP;MAAS,CAAC,CAAD,KAAK,KAAK+C,eAAV,KAA4B/C,CAAC,GAAC,CAAC,CAA/B;MAAkC,MAAMC,CAAC,GAAC,SAAO,KAAK+C,eAAZ,GAA4B,KAAKA,eAAjC,GAAiD,KAAKuH,wBAAL,CAA8B,KAAK/G,MAAL,CAAYG,SAAZ,GAAsB,KAAKH,MAAL,CAAYG,SAAlC,GAA4C,CAAC,GAAD,CAA1E,CAAzD;MAA0IvC,CAAC,GAAC,IAAIlB,CAAJ,CAAM,EAAN,EAAS,CAAC,UAAD,CAAT,EAAsBM,CAAtB,EAAwB;QAACoJ,UAAU,EAAC,KAAKZ,qBAAL,CAA2BlJ,CAA3B,CAAZ;QAA0C+J,aAAa,EAAC,KAAKP,sBAAL,CAA4BxJ,CAA5B,CAAxD;QAAuF6D,SAAS,EAAC1D,CAAC,CAACuK,IAAF,CAAO,GAAP,CAAjG;QAA6GV,iBAAiB,EAAC9I,CAA/H;QAAiI+I,YAAY,EAAC,CAA9I;QAAgJX,QAAQ,EAAC,SAAOrJ,CAAP,GAAS,IAAT,GAAcA,CAAvK;QAAyKuG,KAAK,EAAC1F,CAA/K;QAAiLsI,aAAa,EAAC5I,CAA/L;QAAiM0J,cAAc,EAAChK,CAAhN;QAAkNiK,aAAa,EAAC,OAAhO;QAAwOC,QAAQ,EAAC;UAACC,GAAG,EAAC,EAAL;UAAQC,aAAa,EAAC,CAAtB;UAAwBC,QAAQ,EAAC,CAAjC;UAAmCC,aAAa,EAAC,CAAC;QAAlD;MAAjP,CAAxB,CAAF;IAAkU;IAAA,OAAO,MAAM,KAAKd,eAAL,CAAqBpI,CAArB,EAAuBJ,CAAvB,EAAyB,CAAzB,EAA2B,CAA3B,EAA6BZ,CAA7B,CAAN,EAAsCgB,CAA7C;EAA+C;;EAAAqJ,oBAAoB,CAAC3K,CAAD,EAAG;IAAC,OAAO,SAAOA,CAAP,GAAS,IAAT,GAAc,CAAC,CAAD,KAAKA,CAAC,CAAC4K,WAAP,GAAmB;MAACA,WAAW,EAAC,CAAC,CAAd;MAAgBd,UAAU,EAAC9J,CAAC,CAAC8J,UAA7B;MAAwCC,aAAa,EAAC/J,CAAC,CAAC+J,aAAxD;MAAsElG,SAAS,EAAC7D,CAAC,CAAC6D,SAAlF;MAA4FmG,iBAAiB,EAAChK,CAAC,CAACgK,iBAAhH;MAAkIC,YAAY,EAACjK,CAAC,CAACiK,YAAjJ;MAA8JX,QAAQ,EAACtJ,CAAC,CAACsJ,QAAzK;MAAkL9C,KAAK,EAACxG,CAAC,CAACwG,KAA1L;MAAgM4C,aAAa,EAACpJ,CAAC,CAACoJ,aAAhN;MAA8Nc,cAAc,EAAClK,CAAC,CAACkK,cAA/O;MAA8PC,aAAa,EAACnK,CAAC,CAACmK,aAA9Q;MAA4RC,QAAQ,EAACpK,CAAC,CAACoK;IAAvS,CAAnB,GAAoU;MAACQ,WAAW,EAAC,CAAC,CAAd;MAAgBd,UAAU,EAAC9J,CAAC,CAAC8J,UAA7B;MAAwCC,aAAa,EAAC/J,CAAC,CAAC+J,aAAxD;MAAsElG,SAAS,EAAC7D,CAAC,CAAC6D,SAAlF;MAA4FmG,iBAAiB,EAAChK,CAAC,CAACgK,iBAAhH;MAAkIa,gBAAgB,EAAC7K,CAAC,CAAC6K,gBAArJ;MAAsKC,YAAY,EAAC9K,CAAC,CAAC8K,YAArL;MAAkMC,0BAA0B,EAAC/K,CAAC,CAAC+K,0BAA/N;MAA0Pd,YAAY,EAACjK,CAAC,CAACiK,YAAzQ;MAAsR/C,aAAa,EAAClH,CAAC,CAACkH,aAAtS;MAAoToC,QAAQ,EAACtJ,CAAC,CAACsJ,QAA/T;MAAwU9C,KAAK,EAACxG,CAAC,CAACwG,KAAhV;MAAsV4C,aAAa,EAACpJ,CAAC,CAACoJ,aAAtW;MAAoXc,cAAc,EAAClK,CAAC,CAACkK,cAArY;MAAoZC,aAAa,EAACnK,CAAC,CAACmK,aAApa;MAAkbC,QAAQ,EAACpK,CAAC,CAACoK;IAA7b,CAAzV;EAAgyB;;EAAsB,MAAhBY,gBAAgB,CAAChL,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAO;IAAC,MAAMC,CAAC,GAACH,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BE,aAAnC;IAAA,MAAiDlK,CAAC,GAACD,CAAnD;IAAA,MAAqDG,CAAC,GAACN,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BG,QAAlF;IAAA,MAA2F/J,CAAC,GAAC,IAAI6B,CAAJ,EAA7F;IAAmG,KAAKgB,oBAAL,KAA4B7C,CAAC,CAACwI,SAAF,GAAY,UAAxC,GAAoDxI,CAAC,CAACyI,mBAAF,GAAsBjJ,CAAC,CAACiL,eAAF,CAAkBnB,UAA5F,EAAuGtJ,CAAC,CAAC+I,iBAAF,GAAoBvJ,CAAC,CAACiL,eAAF,CAAkBlB,aAA7I,EAA2JvJ,CAAC,CAACqD,SAAF,GAAY7D,CAAC,CAACiL,eAAF,CAAkBpH,SAAlB,CAA4BwF,KAA5B,CAAkC,GAAlC,CAAvK,EAA8M7I,CAAC,CAAC0K,GAAF,GAAMlL,CAAC,CAACiL,eAAF,CAAkBjB,iBAAtO,EAAwPxJ,CAAC,CAAC2K,KAAF,GAAQnL,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA3R,EAAoS/J,CAAC,CAAC8I,QAAF,GAAWtJ,CAAC,CAACiL,eAAF,CAAkB3B,QAAjU,EAA0U9I,CAAC,CAACgG,KAAF,GAAQxG,CAAC,CAACiL,eAAF,CAAkBzE,KAApW,EAA0WhG,CAAC,CAAC4I,aAAF,GAAgB,OAAKpJ,CAAC,CAACiL,eAAF,CAAkB7B,aAAvB,GAAqCpJ,CAAC,CAACiL,eAAF,CAAkB7B,aAAlB,CAAgCC,KAAhC,CAAsC,GAAtC,CAArC,GAAgF,IAA1c,EAA+c7I,CAAC,CAAC0J,cAAF,GAAiBlK,CAAC,CAACiL,eAAF,CAAkBf,cAAlf,EAAigB1J,CAAC,CAAC2I,mBAAF,GAAsB,KAAK5F,gBAA5hB;IAA6iB,MAAM7C,CAAC,GAAC,MAAM,KAAKwH,YAAL,CAAkB1H,CAAlB,EAAoB,SAApB,CAAd;IAA6C,IAAG,KAAKiJ,eAAL,CAAqBvJ,CAArB,GAAwBF,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA3B,KAAsCjK,CAAjE,EAAmE,OAAM,MAAN;;IAAa,KAAI,IAAIM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAAC0K,QAAF,CAAWxG,MAAzB,EAAgChE,CAAC,EAAjC,EAAoCZ,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BC,GAA3B,CAA+BjK,CAAC,GAACQ,CAAjC,IAAoCF,CAAC,CAAC0K,QAAF,CAAWxK,CAAX,EAAcyK,UAAd,CAAyB,KAAK3H,MAAL,CAAY8B,aAArC,CAApC;;IAAwF,IAAG,CAAC,CAAD,KAAK,KAAKpC,YAAb,EAA0B,KAAI,IAAIxC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAAC0K,QAAF,CAAWxG,MAAzB,EAAgChE,CAAC,EAAjC,EAAoC,KAAK0K,aAAL,CAAmB5K,CAAC,CAAC0K,QAAF,CAAWxK,CAAX,EAAcyK,UAAd,CAAyB,KAAK3H,MAAL,CAAY8B,aAArC,CAAnB,IAAwE9E,CAAC,CAAC0K,QAAF,CAAWxK,CAAX,CAAxE;IAAsF,OAAM,CAAC,KAAK,CAAL,KAASF,CAAC,CAAC6K,qBAAX,IAAkC7K,CAAC,CAAC0K,QAAF,CAAWxG,MAAX,KAAoB5E,CAAC,CAACiL,eAAF,CAAkBjB,iBAAxE,IAA2F,CAAC,CAAD,KAAKtJ,CAAC,CAAC6K,qBAAnG,MAA4HvL,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BI,aAA3B,GAAyC,CAAC,CAAtK,GAAyKxK,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BE,aAA3B,GAAyCnK,CAAC,GAACO,CAAC,CAAC0K,QAAF,CAAWxG,MAA/N,EAAsO5E,CAAC,CAACiL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA3B,IAAqCvK,CAAC,CAACiL,eAAF,CAAkBjB,iBAA7R,EAA+S,MAArT;EAA4T;;EAAAS,wBAAwB,CAACzK,CAAD,EAAG;IAAC,IAAG,SAAOA,CAAV,EAAY,OAAM,CAAC,KAAKwF,aAAN,CAAN;IAA2B,MAAMvF,CAAC,GAACD,CAAC,CAAC2E,KAAF,CAAQ,CAAR,CAAR;IAAmB,IAAG1E,CAAC,CAACuL,QAAF,CAAW,GAAX,CAAH,EAAmB,OAAOvL,CAAP;IAAS,IAAIC,CAAC,GAAC,CAAC,CAAP;;IAAS,KAAI,MAAMC,CAAV,IAAeF,CAAf,EAAiB,IAAGE,CAAC,CAACsL,WAAF,OAAkB,KAAKjG,aAAL,CAAmBiG,WAAnB,EAArB,EAAsD;MAACvL,CAAC,GAAC,CAAC,CAAH;MAAK;IAAM;;IAAA,OAAM,CAAC,CAAD,KAAKA,CAAL,IAAQD,CAAC,CAAC6E,IAAF,CAAO,KAAKU,aAAZ,CAAR,EAAmCvF,CAAzC;EAA2C;;EAAkB,MAAZyL,YAAY,CAAC1L,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAS;IAAC,MAAMC,CAAC,GAAC,EAAR;IAAW,IAAG,CAAC,CAAD,KAAKH,CAAL,IAAQ,KAAK,CAAL,KAAS,KAAKqL,aAAL,CAAmBrL,CAAnB,CAAjB,IAAwCG,CAAC,CAAC0E,IAAF,CAAO7E,CAAP,CAAxC,EAAkD,CAAC,CAAD,KAAK,KAAK0L,6BAAL,CAAmC3L,CAAnC,EAAqC,KAAK4L,kBAAL,EAArC,CAA1D,EAA0H,OAAO,MAAM,KAAKlC,eAAL,CAAqB1J,CAArB,EAAuB,KAAK4L,kBAAL,EAAvB,EAAiD,CAAjD,EAAmD,CAAnD,EAAqDzL,CAArD,CAAN,EAA8D,KAAKuL,YAAL,CAAkB1L,CAAlB,EAAoBC,CAApB,EAAsBC,CAAtB,EAAwBC,CAAxB,CAArE;IAAgG,IAAIG,CAAC,GAAC,CAAN;;IAAQ,KAAI,IAAIM,CAAC,GAACZ,CAAC,CAAC6L,iBAAZ,EAA8BjL,CAAC,GAACZ,CAAC,CAAC8L,MAAF,CAASlH,MAAzC,EAAgDhE,CAAC,EAAjD,EAAoD;MAAC,IAAGZ,CAAC,CAAC6L,iBAAF,IAAqB,CAArB,EAAuBvL,CAAC,EAAxB,EAA2B,KAAK,CAAL,KAAS,KAAKgL,aAAL,CAAmBtL,CAAC,CAAC8L,MAAF,CAASlL,CAAT,CAAnB,CAAvC,EAAuE;QAAC,IAAIV,CAAC,GAAC,CAAC,CAAP;;QAAS,IAAG,SAAO,KAAKwD,MAAL,CAAYqI,KAAnB,IAA0B,KAAK,CAAL,KAAS,KAAKrI,MAAL,CAAYqI,KAAlD,EAAwD;UAAC,MAAM9L,CAAC,GAAC,KAAKyD,MAAL,CAAYqI,KAApB;;UAA0B,IAAG,KAAK,CAAL,KAAS9L,CAAC,CAAC+L,WAAF,CAAchM,CAAC,CAAC8L,MAAF,CAASlL,CAAT,CAAd,CAAZ,EAAuC;YAAC,MAAMT,CAAC,GAACF,CAAC,CAAC+L,WAAF,CAAchM,CAAC,CAAC8L,MAAF,CAASlL,CAAT,CAAd,CAAR;YAAmC,SAAOT,CAAP,KAAWD,CAAC,GAAC,CAAC,CAAH,EAAK,KAAKoL,aAAL,CAAmBtL,CAAC,CAAC8L,MAAF,CAASlL,CAAT,CAAnB,IAAgCT,CAAhD;UAAmD;QAAC;;QAAA,IAAG,CAAC,CAAD,KAAKD,CAAL,KAASF,CAAC,CAAC8L,MAAF,CAASlL,CAAT,MAAcX,CAAd,IAAiBG,CAAC,CAAC0E,IAAF,CAAO9E,CAAC,CAAC8L,MAAF,CAASlL,CAAT,CAAP,CAAjB,EAAqCR,CAAC,CAACwE,MAAF,IAAU,KAAKgH,kBAAL,KAA0B,CAAlF,CAAH,EAAwF;MAAM;;MAAA,IAAGtL,CAAC,IAAEJ,CAAH,IAAM,MAAIE,CAAC,CAACwE,MAAf,EAAsB;IAAM;;IAAA,IAAG,MAAIxE,CAAC,CAACwE,MAAT,EAAgB,OAAM,SAAN;IAAgB,MAAMpE,CAAC,GAAC,IAAI6B,CAAJ,EAAR;IAAc,KAAKgB,oBAAL,KAA4B7C,CAAC,CAACwI,SAAF,GAAY,UAAxC,GAAoDxI,CAAC,CAACyL,SAAF,GAAY7L,CAAhE,EAAkEI,CAAC,CAACqD,SAAF,GAAY,SAAO,KAAKX,eAAZ,GAA4B,KAAKA,eAAjC,GAAiD,KAAKuH,wBAAL,CAA8B,KAAK/G,MAAL,CAAYG,SAAZ,GAAsB,KAAKH,MAAL,CAAYG,SAAlC,GAA4C,CAAC,GAAD,CAA1E,CAA/H,EAAgNrD,CAAC,CAAC0J,cAAF,GAAiB,CAAC,CAAlO,EAAoO,CAAC,CAAD,KAAK,KAAKjH,eAAV,KAA4BzC,CAAC,CAAC0J,cAAF,GAAiB,CAAC,CAA9C,CAApO,EAAqR1J,CAAC,CAAC2I,mBAAF,GAAsB,KAAK5F,gBAAhT;IAAiU,MAAM7C,CAAC,GAAC,MAAM,KAAKwH,YAAL,CAAkB1H,CAAlB,EAAoB,SAApB,CAAd;IAA6C,IAAG,KAAKiJ,eAAL,CAAqBtJ,CAArB,GAAwB,KAAK,CAAL,KAASO,CAAC,CAACwL,KAAtC,EAA4C,MAAM,IAAIC,KAAJ,CAAUzL,CAAC,CAACwL,KAAZ,CAAN;;IAAyB,KAAI,IAAItL,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAAC0K,QAAF,CAAWxG,MAAzB,EAAgChE,CAAC,EAAjC,EAAoC,KAAK0K,aAAL,CAAmB5K,CAAC,CAAC0K,QAAF,CAAWxK,CAAX,EAAcyK,UAAd,CAAyB,KAAK3H,MAAL,CAAY8B,aAArC,CAAnB,IAAwE9E,CAAC,CAAC0K,QAAF,CAAWxK,CAAX,CAAxE;;IAAsF,OAAM,SAAN;EAAgB;;EAAuB,MAAjBwL,iBAAiB,CAACpM,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;IAAC,MAAM,KAAKyF,aAAL,EAAN;IAA2B,MAAMvF,CAAC,GAAC,MAAM,KAAKkH,YAAL,EAAd;IAAkC,IAAI9G,CAAC,GAAChB,CAAC,CAACmM,SAAF,CAAYC,MAAlB;;IAAyB,KAAI,IAAItL,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0C,MAAL,CAAYgB,MAAZ,CAAmBE,MAAjC,EAAwC5D,CAAC,EAAzC,EAA4C,IAAG,KAAK0C,MAAL,CAAYgB,MAAZ,CAAmB1D,CAAnB,EAAsBgE,IAAtB,CAA2BD,WAA3B,OAA2C7D,CAAC,CAAC6D,WAAF,EAA9C,EAA8D;MAAC7D,CAAC,GAAC,KAAKwC,MAAL,CAAYgB,MAAZ,CAAmB1D,CAAnB,EAAsBgE,IAAxB;MAA6B;IAAM;;IAAA,MAAM5D,CAAC,GAAC,IAAIiB,CAAJ,EAAR;IAAc,KAAKgB,oBAAL,KAA4BjC,CAAC,CAAC4H,SAAF,GAAY,UAAxC;IAAoD,IAAI1H,CAAC,GAAC,SAAOhB,CAAP,GAAS,SAAOF,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2BY,CAAC,CAACV,CAAD,EAAGQ,CAAH,CAAlC;IAAwC,KAAK4C,MAAL,CAAYkG,oBAAZ,IAAkC,KAAKtG,wBAAvC,KAAkEhC,CAAC,GAAC,OAAKA,CAAL,GAAO,OAAK,KAAKoC,MAAL,CAAYkG,oBAAjB,GAAsC,SAAtC,GAAgDtI,CAAhD,GAAkD,IAAzD,GAA8D,KAAKoC,MAAL,CAAYkG,oBAA9I,GAAoKxI,CAAC,CAACoF,KAAF,GAAQlF,CAA5K,EAA8KF,CAAC,CAAC6H,mBAAF,GAAsB,KAAKC,qBAAL,CAA2B/I,CAA3B,CAApM,EAAkOiB,CAAC,CAACmI,iBAAF,GAAoB,KAAKC,sBAAL,CAA4BrJ,CAA5B,CAAtP,EAAqRiB,CAAC,CAACkI,QAAF,GAAW,SAAOlJ,CAAP,GAAS,IAAT,GAAcA,CAA9S,EAAgTgB,CAAC,CAACmL,oBAAF,GAAuB,CAAC,CAAxU,EAA0UnL,CAAC,CAAC8I,cAAF,GAAiB,CAAC,CAA5V,EAA8V9I,CAAC,CAACyC,SAAF,GAAY,CAAC3C,CAAD,CAA1W;IAA8W,MAAMM,CAAC,GAAC,MAAM,KAAK0G,YAAL,CAAkB9G,CAAlB,EAAoB,SAApB,CAAd;IAA6C,IAAG,KAAKqI,eAAL,CAAqB7I,CAArB,GAAwB,CAACY,CAAC,CAACgL,cAAF,CAAiB,UAAjB,CAA5B,EAAyD,MAAM,IAAIL,KAAJ,CAAU,kDAAV,CAAN;IAAoE,IAAIzK,CAAC,GAAC,CAAC,CAAP;;IAAS,KAAI,IAAIV,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0C,MAAL,CAAYgB,MAAZ,CAAmBE,MAAjC,EAAwC5D,CAAC,EAAzC,EAA4C,IAAG,KAAK0C,MAAL,CAAYgB,MAAZ,CAAmB1D,CAAnB,EAAsBgE,IAAtB,KAA6B9D,CAAhC,EAAkC;MAAC,WAAS,KAAKwC,MAAL,CAAYgB,MAAZ,CAAmB1D,CAAnB,EAAsB6D,IAA/B,KAAsCnD,CAAC,GAAC,CAAC,CAAzC;MAA4C;IAAM;;IAAA,KAAI,IAAIV,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACQ,CAAC,CAAC4J,QAAF,CAAWxG,MAAzB,EAAgC5D,CAAC,EAAjC,EAAoC;MAAC,IAAGU,CAAH,EAAK;QAAC,MAAM1B,CAAC,GAACwB,CAAC,CAAC4J,QAAF,CAAWpK,CAAX,EAAcqK,UAAd,CAAyBnK,CAAzB,CAAR;QAAoC,SAAOlB,CAAP,GAASU,CAAC,CAACoE,IAAF,CAAO,IAAI2H,IAAJ,CAASzM,CAAT,CAAP,CAAT,GAA6BU,CAAC,CAACoE,IAAF,CAAO9E,CAAP,CAA7B;MAAuC,CAAjF,MAAsFU,CAAC,CAACoE,IAAF,CAAOtD,CAAC,CAAC4J,QAAF,CAAWpK,CAAX,EAAcqK,UAAd,CAAyBnK,CAAzB,CAAP;;MAAoC,IAAGR,CAAC,CAACkE,MAAF,IAAUpE,CAAb,EAAe;IAAM;;IAAA,IAAG,MAAIgB,CAAC,CAAC4J,QAAF,CAAWxG,MAAlB,EAAyB,OAAOlE,CAAP;;IAAS,IAAGc,CAAC,CAAC4J,QAAF,CAAWxG,MAAX,KAAoB,KAAKlB,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BgD,cAAnD,IAAmEnJ,CAAC,CAACkE,MAAF,GAASpE,CAA/E,EAAiF;MAAC,OAAM;QAACkM,UAAU,EAAC,CAAC,CAAb;QAAeC,MAAM,EAAC,MAAM,KAAKP,iBAAL,CAAuBpM,CAAC,GAACwB,CAAC,CAAC4J,QAAF,CAAWxG,MAApC,EAA2C3E,CAA3C,EAA6CC,CAA7C,EAA+CC,CAA/C,EAAiDC,CAAjD,EAAmDE,CAAnD,EAAqDE,CAArD,EAAuDE,CAAvD,EAAyDE,CAAzD;MAA5B,CAAN;IAA+F;;IAAA,OAAOF,CAAP;EAAS;;EAAmB,MAAbkM,aAAa,CAAC5M,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAe;IAAC,OAAM;MAACkM,UAAU,EAAC,CAAC,CAAb;MAAeC,MAAM,EAAC,MAAM,KAAKP,iBAAL,CAAuB,CAAvB,EAAyBpM,CAAzB,EAA2BC,CAA3B,EAA6BC,CAA7B,EAA+BC,CAA/B,EAAiCC,CAAjC,EAAmCE,CAAnC,EAAqC,EAArC,EAAwCE,CAAxC;IAA5B,CAAN;EAA8E;;EAAAoI,OAAO,GAAE;IAAC,OAAO,KAAKlF,MAAL,CAAYkF,OAAZ,IAAqB,SAAO,KAAKlF,MAAL,CAAYe,YAAxC,IAAsD,YAAU,KAAKf,MAAL,CAAYmB,IAA5E,IAAkF,OAAK,KAAKnB,MAAL,CAAYe,YAA1G;EAAuH;;EAAgB,MAAVoI,UAAU,CAAC7M,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAS;IAAC,MAAMC,CAAC,GAAC,MAAM,KAAK4H,YAAL,EAAd;IAAA,MAAkC1H,CAAC,GAAC,IAAI+B,CAAJ,EAApC;IAA0C,IAAG,KAAKgB,oBAAL,KAA4B/C,CAAC,CAAC0I,SAAF,GAAY,UAAxC,GAAoD,KAAKJ,OAAL,MAAgB1I,CAAhB,IAAmB,SAAOD,CAA1B,IAA6B,OAAKA,CAAzF,EAA2F,OAAM;MAACyM,UAAU,EAAC,CAAC,CAAb;MAAeC,MAAM,EAAC;IAAtB,CAAN;IAA+B,IAAInM,CAAC,GAAC,SAAOL,CAAP,GAAS,SAAOD,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2Bc,CAAC,CAACb,CAAD,EAAGC,CAAH,CAAlC;IAAwC,KAAKsD,MAAL,CAAYkG,oBAAZ,IAAkC,KAAKtG,wBAAvC,KAAkE9C,CAAC,GAAC,OAAKA,CAAL,GAAO,OAAK,KAAKkD,MAAL,CAAYkG,oBAAjB,GAAsC,SAAtC,GAAgDpJ,CAAhD,GAAkD,IAAzD,GAA8D,KAAKkD,MAAL,CAAYkG,oBAA9I,GAAoKtJ,CAAC,CAACkG,KAAF,GAAQhG,CAA5K,EAA8KF,CAAC,CAACkG,KAAF,GAAQhG,CAAtL,EAAwLF,CAAC,CAAC2I,mBAAF,GAAsB,KAAKC,qBAAL,CAA2BjJ,CAA3B,CAA9M,EAA4OK,CAAC,CAACiJ,iBAAF,GAAoB,KAAKC,sBAAL,CAA4BvJ,CAA5B,CAAhQ,EAA+RK,CAAC,CAACgJ,QAAF,GAAW,SAAOpJ,CAAP,GAAS,IAAT,GAAcA,CAAxT,EAA0TI,CAAC,CAAC4J,cAAF,GAAiB,CAAC,CAA5U;IAA8U,OAAM;MAACwC,UAAU,EAAC,CAAC,CAAb;MAAeC,MAAM,EAAC,MAAM,KAAKzE,YAAL,CAAkB5H,CAAlB,EAAoB,iBAApB;IAA5B,CAAN;EAA0E;;EAAY,MAANwM,MAAM,CAAC9M,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAe;IAAC,MAAM,KAAK6F,aAAL,EAAN;IAA2B,MAAM3F,CAAC,GAAC,KAAKgD,MAAL,CAAYkD,YAAZ,IAA0B,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnD,IAA0D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BkG,qBAAtG;IAAA,MAA4HnM,CAAC,GAAC,KAAK8C,MAAL,CAAYkD,YAAZ,IAA0B,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnD,IAA0D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BmG,kBAA5N;IAAA,MAA+OlM,CAAC,GAAC,KAAK4C,MAAL,CAAYkD,YAAZ,IAA0B,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnD,IAA0D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BoG,gBAA/U;IAAgW,IAAG,YAAUjN,CAAb,EAAe,OAAOc,CAAC,GAAC,KAAK+L,UAAL,CAAgB7M,CAAhB,EAAkBE,CAAlB,EAAoBC,CAApB,EAAsBC,CAAtB,CAAD,GAA0B;MAACsM,UAAU,EAAC,CAAC;IAAb,CAAlC;IAAkD,IAAG,CAAC,CAAD,KAAK9L,CAAL,IAAQ,CAAC,CAAD,KAAKM,CAAC,CAACjB,CAAD,CAAN,IAAW,CAAC,CAAD,KAAKS,CAAxB,IAA2B,CAAC,CAAD,KAAKT,CAAC,CAACiN,cAArC,EAAoD,OAAM,OAAKhN,CAAL,IAAQ,SAAOE,CAAf,GAAiB;MAACsM,UAAU,EAAC,CAAC;IAAb,CAAjB,GAAiC,KAAKS,WAAL,CAAiBnN,CAAjB,EAAmBC,CAAnB,EAAqBK,CAArB,EAAuBE,CAAvB,CAAvC;IAAiE,IAAG,eAAaR,CAAhB,EAAkB,OAAM,CAAC,CAAD,KAAKc,CAAL,GAAO,OAAKZ,CAAL,IAAQ,SAAOE,CAAf,GAAiB;MAACsM,UAAU,EAAC,CAAC;IAAb,CAAjB,GAAiC,KAAKS,WAAL,CAAiBnN,CAAjB,EAAmBC,CAAnB,EAAqBK,CAArB,EAAuBE,CAAvB,CAAxC,GAAkE,KAAKoM,aAAL,CAAmB5M,CAAnB,EAAqBC,CAArB,EAAuBC,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6BE,CAA7B,EAA+BE,CAA/B,CAAxE;IAA0G,MAAMc,CAAC,GAAC,MAAM,KAAK0G,YAAL,EAAd;IAAkC,IAAG,KAAKY,OAAL,MAAgBzI,CAAhB,IAAmB,SAAOD,CAA1B,IAA6B,OAAKA,CAArC,EAAuC,OAAM;MAACwM,UAAU,EAAC,CAAC,CAAb;MAAeC,MAAM,EAAC;IAAtB,CAAN;IAAkC,MAAMnL,CAAC,GAAC,IAAIa,CAAJ,EAAR;IAAc,KAAKgB,oBAAL,KAA4B7B,CAAC,CAACwH,SAAF,GAAY,UAAxC;IAAoD,IAAItH,CAAC,GAAC,SAAOtB,CAAP,GAAS,SAAOD,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2Ba,CAAC,CAACZ,CAAD,EAAGkB,CAAH,CAAlC;IAAwC,KAAKoC,MAAL,CAAYkG,oBAAZ,IAAkC,KAAKtG,wBAAvC,KAAkE5B,CAAC,GAAC,OAAKA,CAAL,GAAO,OAAK,KAAKgC,MAAL,CAAYkG,oBAAjB,GAAsC,SAAtC,GAAgDlI,CAAhD,GAAkD,IAAzD,GAA8D,KAAKgC,MAAL,CAAYkG,oBAA9I,GAAoKpI,CAAC,CAACgF,KAAF,GAAQ9E,CAA5K,EAA8KF,CAAC,CAACyH,mBAAF,GAAsB,KAAKC,qBAAL,CAA2BhJ,CAA3B,CAApM,EAAkOsB,CAAC,CAAC+H,iBAAF,GAAoB,KAAKC,sBAAL,CAA4BtJ,CAA5B,CAAtP,EAAqRsB,CAAC,CAAC8H,QAAF,GAAW,SAAOnJ,CAAP,GAAS,IAAT,GAAcA,CAA9S;;IAAgT,MAAMyB,CAAC,GAAC,IAAIgB,CAAJ,EAAR;;IAAchB,CAAC,CAACwL,aAAF,GAAgBhM,CAAC,CAACpB,CAAD,CAAjB,EAAqB4B,CAAC,CAACyL,gBAAF,GAAmBrM,CAAC,CAACf,CAAD,EAAGqB,CAAH,CAAzC,EAA+CM,CAAC,CAAC0L,qBAAF,GAAwB,oBAAvE,EAA4F9L,CAAC,CAAC0I,cAAF,GAAiB,CAAC,CAA9G;IAAgH,IAAIrI,CAAC,GAAC,oBAAN;IAA2BL,CAAC,CAAC0F,aAAF,GAAgB,CAACtF,CAAD,CAAhB;IAAoB,MAAMG,CAAC,GAAC,MAAM,KAAKmG,YAAL,CAAkB1G,CAAlB,EAAoB,SAApB,CAAd;IAA6C,IAAG,CAACO,CAAC,CAACyK,cAAF,CAAiB,UAAjB,CAAD,IAA+B,MAAIzK,CAAC,CAACqJ,QAAF,CAAWxG,MAAjD,EAAwD,MAAM,IAAIuH,KAAJ,CAAU,kDAAV,CAAN;IAAoE,IAAIlK,CAAC,GAAC,CAAC,CAAP;;IAAS,KAAI,IAAIjB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACe,CAAC,CAAC2C,MAAF,CAASE,MAAvB,EAA8B5D,CAAC,EAA/B,EAAkC,IAAG,yBAAuBe,CAAC,CAAC2C,MAAF,CAAS1D,CAAT,EAAYgE,IAAZ,CAAiByG,WAAjB,EAA1B,EAAyD;MAAC5J,CAAC,GAACE,CAAC,CAAC2C,MAAF,CAAS1D,CAAT,EAAYgE,IAAd,EAAmB,WAASjD,CAAC,CAAC2C,MAAF,CAAS1D,CAAT,EAAY6D,IAArB,KAA4B5C,CAAC,GAAC,CAAC,CAA/B,CAAnB;MAAqD;IAAM;;IAAA,IAAGA,CAAH,EAAK;MAAC,IAAIjC,CAAC,GAAC+B,CAAC,CAACqJ,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBxJ,CAAzB,CAAN;MAAkC,OAAO,SAAO7B,CAAP,KAAWA,CAAC,GAAC,IAAIyM,IAAJ,CAAS1K,CAAC,CAACqJ,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBxJ,CAAzB,CAAT,CAAb,GAAoD;QAAC6K,UAAU,EAAC,CAAC,CAAb;QAAeC,MAAM,EAAC3M;MAAtB,CAA3D;IAAoF;;IAAA,OAAM;MAAC0M,UAAU,EAAC,CAAC,CAAb;MAAeC,MAAM,EAAC5K,CAAC,CAACqJ,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBxJ,CAAzB;IAAtB,CAAN;EAAyD;;EAAA0L,KAAK,CAACvN,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAe;IAAC,OAAO,KAAKsM,MAAL,CAAY9M,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB,EAAkBC,CAAlB,EAAoBC,CAApB,EAAsBE,CAAtB,EAAwBE,CAAxB,CAAP;EAAkC;;EAAsB,MAAhBgN,gBAAgB,CAACxN,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAM,KAAKoG,aAAL,EAAN;IAA2B,IAAInG,CAAC,GAAC,CAAC,CAAP;IAAS,MAAMC,CAAC,GAAC,KAAKuD,MAAL,CAAYkD,YAAZ,IAA0B,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnD,IAA0D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BkG,qBAAtG;IAA4H,IAAG,KAAK,CAAL,KAAS,KAAKrJ,MAAL,CAAYkD,YAArB,IAAmC,SAAO,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnE,IAA0E,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BmG,kBAA9G,IAAkI,CAAC,CAAD,KAAK,KAAKtJ,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BiC,eAAtK,KAAwL5I,CAAC,GAAC,CAAC,CAA3L,GAA8LA,CAAjM,EAAmM,KAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAAC2E,MAAF,GAAS,CAAvB,EAAyBxE,CAAC,EAA1B,EAA6B,SAAOH,CAAC,CAACG,CAAD,CAAD,CAAKqN,WAAZ,KAA0B,CAAC,CAAD,KAAKxN,CAAC,CAACG,CAAD,CAAD,CAAKqN,WAAL,CAAiBP,cAAtB,IAAsC,CAAC,CAAD,KAAKhM,CAAC,CAACjB,CAAC,CAACG,CAAD,CAAD,CAAKqN,WAAN,CAAN,IAA0B,CAAC,CAAD,KAAKtN,CAA/F,MAAoGD,CAAC,GAAC,CAAC,CAAvG;IAA0G,OAAM,CAAC,CAAD,KAAKA,CAAX;EAAa;;EAAAgJ,qBAAqB,CAAClJ,CAAD,EAAG;IAAC,IAAGA,CAAC,CAACwL,QAAF,CAAW,wBAAX,CAAH,EAAwC,OAAM,UAAN;;IAAiB,QAAOxL,CAAP;MAAU,KAAI,wBAAJ;QAA6B,OAAM,UAAN;;MAAiB,KAAI,0BAAJ;QAA+B,OAAM,YAAN;;MAAmB,KAAI,wBAAJ;QAA6B,OAAM,UAAN;;MAAiB,KAAI,wBAAJ;QAA6B,OAAM,UAAN;;MAAiB,KAAI,sBAAJ;QAA2B,OAAM,QAAN;;MAAe,KAAI,uBAAJ;QAA4B,OAAM,SAAN;;MAAgB,KAAI,uBAAJ;QAA4B,OAAM,SAAN;;MAAgB,KAAI,kCAAJ;QAAuC,OAAM,qBAAN;IAA/W;;IAA2Y,OAAOA,CAAP;EAAS;;EAAAwJ,sBAAsB,CAACxJ,CAAD,EAAG;IAAC,OAAOA,CAAC,CAACwL,QAAF,CAAW,wBAAX,IAAqCxL,CAAC,CAACqJ,KAAF,CAAQ,GAAR,EAAa,CAAb,CAArC,GAAqD,EAA5D;EAA+D;;EAA4C,MAAtCqE,sCAAsC,CAAC1N,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASG,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAe;IAAC,MAAM,KAAK2F,aAAL,EAAN;IAA2B,MAAMzF,CAAC,GAAC,MAAM,KAAKoH,YAAL,EAAd;IAAkC,IAAIlH,CAAC,GAAC,EAAN;IAAA,IAASI,CAAC,GAAC,CAAC,CAAZ;IAAA,IAAcE,CAAC,GAAC,CAAC,CAAjB;IAAmB,SAAOZ,CAAP,IAAU,KAAKkD,MAAL,CAAYkD,YAAtB,IAAoC,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAA7D,IAAoE,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BiC,eAAxG,KAA0HhI,CAAC,GAACN,CAAC,CAACuI,eAAF,EAAF,EAAsB3H,CAAC,GAAC,CAAC,CAAnJ,GAAsJ,KAAKsC,MAAL,CAAYkD,YAAZ,IAA0B,KAAKlD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAnD,IAA0D,CAAC,CAAD,KAAK,KAAKnD,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BC,kBAA9F,KAAmH1F,CAAC,GAAC,CAAC,CAAH,EAAKF,CAAC,GAAC,CAAC,CAAR,EAAUJ,CAAC,GAAC,KAAK4C,MAAL,CAAY8B,aAA3I,CAAtJ;IAAgT,MAAMlE,CAAC,GAAC,EAAR;;IAAW,KAAI,IAAIlB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAAC2E,MAAhB,EAAuBxE,CAAC,EAAxB,EAA2B;MAAC,MAAMJ,CAAC,GAAC,IAAI4C,CAAJ,EAAR;MAAc5C,CAAC,CAACqN,gBAAF,GAAmB,SAAOpN,CAAC,CAACG,CAAD,CAAD,CAAKqN,WAAZ,GAAwBzM,CAAC,CAACf,CAAC,CAACG,CAAD,CAAD,CAAKqN,WAAN,EAAkB7M,CAAlB,CAAzB,GAA8C,EAAjE,EAAoEZ,CAAC,CAACsN,qBAAF,GAAwBrN,CAAC,CAACG,CAAD,CAAD,CAAKuN,KAAjG,EAAuG3N,CAAC,CAACoN,aAAF,GAAgBnN,CAAC,CAACG,CAAD,CAAD,CAAKwN,gBAAL,EAAvH,EAA+ItM,CAAC,CAACwD,IAAF,CAAO9E,CAAP,CAA/I;IAAyJ;;IAAA,OAAKc,CAAL,KAASA,CAAC,GAACd,CAAC,CAAC0K,IAAF,CAAO,GAAP,CAAX;;IAAwB,IAAIlJ,CAAC,GAAC,KAAKuC,aAAL,EAAN;;IAA2B,MAAMrC,CAAC,GAAC,KAAKgC,MAAL,CAAYkD,YAAZ,CAAyBC,KAAzB,CAA+BgD,cAAvC;IAAsD,KAAK,CAAL,KAASnI,CAAT,IAAYA,CAAC,GAACF,CAAd,KAAkBA,CAAC,GAACE,CAApB;;IAAuB,IAAIE,CAAC,GAAC,SAAOtB,CAAP,GAAS,SAAOH,CAAP,GAAS,KAAT,GAAe,EAAxB,GAA2Ba,CAAC,CAACV,CAAD,EAAGM,CAAH,CAAlC;;IAAwC,KAAK8C,MAAL,CAAYkG,oBAAZ,IAAkC,KAAKtG,wBAAvC,KAAkE1B,CAAC,GAAC,OAAKA,CAAL,GAAO,OAAK,KAAK8B,MAAL,CAAYkG,oBAAjB,GAAsC,SAAtC,GAAgDhI,CAAhD,GAAkD,IAAzD,GAA8D,KAAK8B,MAAL,CAAYkG,oBAA9I;IAAoK,OAAO,IAAIxJ,CAAJ,CAAM,EAAN,EAAS,CAAC,UAAD,CAAT,EAAsBgB,CAAtB,EAAwB;MAACwJ,WAAW,EAAC,CAAC,CAAd;MAAgBd,UAAU,EAAC,KAAKZ,qBAAL,CAA2BhJ,CAA3B,CAA3B;MAAyD6J,aAAa,EAAC,KAAKP,sBAAL,CAA4BtJ,CAA5B,CAAvE;MAAsG2D,SAAS,EAAC,CAAC,GAAD,CAAhH;MAAsHgH,gBAAgB,EAAC3J,CAAvI;MAAyI4J,YAAY,EAACpK,CAAtJ;MAAwJsJ,iBAAiB,EAACxI,CAA1K;MAA4KyI,YAAY,EAAC,CAAzL;MAA2Lc,0BAA0B,EAAC/K,CAAtN;MAAwNkH,aAAa,EAAC5F,CAAtO;MAAwOgI,QAAQ,EAAC,SAAOnJ,CAAP,GAAS,IAAT,GAAcA,CAA/P;MAAiQqG,KAAK,EAAC5E,CAAvQ;MAAyQwH,aAAa,EAACtI,CAAvR;MAAyRoJ,cAAc,EAAC,CAAC,CAAzS;MAA2SC,aAAa,EAAC,CAAC,CAA1T;MAA4TC,QAAQ,EAAC;QAACyD,SAAS,EAAC,CAAC,CAAZ;QAAcxD,GAAG,EAAC,EAAlB;QAAqBC,aAAa,EAAC,CAAnC;QAAqCC,QAAQ,EAAC,CAA9C;QAAgDC,aAAa,EAAC,CAAC;MAA/D;IAArU,CAAxB,CAAP;EAAwa;;EAA+B,MAAzBsD,yBAAyB,CAAC7N,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAO;IAAC,IAAIC,CAAC,GAACH,CAAC,CAACgL,eAAF,CAAkBzE,KAAxB;IAA8B,CAAC,CAAD,KAAKvG,CAAC,CAACgL,eAAF,CAAkBJ,gBAAvB,KAA0CzK,CAAC,GAAC,OAAKA,CAAL,GAAO,MAAIA,CAAJ,GAAM,SAAN,GAAgBH,CAAC,CAACgL,eAAF,CAAkBH,YAAlC,GAA+C,GAA/C,GAAmD7K,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2ByD,SAA3B,CAAqCE,QAArC,EAAnD,GAAmG,GAA1G,GAA8G9N,CAAC,CAACgL,eAAF,CAAkBH,YAAlB,GAA+B,GAA/B,GAAmC7K,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2ByD,SAA3B,CAAqCE,QAArC,EAA7L;IAA8O,MAAMzN,CAAC,GAACL,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BE,aAAnC;IAAA,MAAiD9J,CAAC,GAACF,CAAnD;IAAA,MAAqDI,CAAC,GAACT,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BG,QAAlF;IAAA,MAA2F3J,CAAC,GAAC,IAAIyB,CAAJ,EAA7F;IAAmG,IAAG,KAAKgB,oBAAL,KAA4BzC,CAAC,CAACoI,SAAF,GAAY,UAAxC,GAAoDpI,CAAC,CAAC4F,KAAF,GAAQpG,CAA5D,EAA8DQ,CAAC,CAACqI,mBAAF,GAAsBhJ,CAAC,CAACgL,eAAF,CAAkBnB,UAAtG,EAAiHlJ,CAAC,CAAC2I,iBAAF,GAAoBtJ,CAAC,CAACgL,eAAF,CAAkBlB,aAAvJ,EAAqKnJ,CAAC,CAACiD,SAAF,GAAY5D,CAAC,CAACgL,eAAF,CAAkBpH,SAAnM,EAA6MjD,CAAC,CAACsG,aAAF,GAAgBjH,CAAC,CAACgL,eAAF,CAAkB/D,aAA/O,EAA6PtG,CAAC,CAAC0I,QAAF,GAAWrJ,CAAC,CAACgL,eAAF,CAAkB3B,QAA1R,EAAmS1I,CAAC,CAACmK,0BAAF,GAA6B9K,CAAC,CAACgL,eAAF,CAAkBF,0BAAlV,EAA6WnK,CAAC,CAACsK,GAAF,GAAMjL,CAAC,CAACgL,eAAF,CAAkBjB,iBAArY,EAAuZpJ,CAAC,CAACuK,KAAF,GAAQlL,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA1b,EAAmc3J,CAAC,CAACsJ,cAAF,GAAiBjK,CAAC,CAACgL,eAAF,CAAkBf,cAAte,EAAqftJ,CAAC,CAACwI,aAAF,GAAgB,OAAKnJ,CAAC,CAACgL,eAAF,CAAkB7B,aAAvB,GAAqCnJ,CAAC,CAACgL,eAAF,CAAkB7B,aAAlB,CAAgCC,KAAhC,CAAsC,GAAtC,CAArC,GAAgF,IAArlB,EAA0lB,KAAKT,OAAL,MAAgBhI,CAAC,CAAC0I,QAAlB,IAA4B1I,CAAC,CAACqI,mBAA3nB,EAA+oB,OAAM,EAAN;IAAS,MAAMnI,CAAC,GAAC,MAAM,KAAKoH,YAAL,CAAkBtH,CAAlB,EAAoB,SAApB,CAAd;IAA6C,IAAG,KAAK6I,eAAL,CAAqBtJ,CAArB,GAAwB,CAACW,CAAC,CAAC0L,cAAF,CAAiB,UAAjB,CAA5B,EAAyD,MAAM,IAAIL,KAAJ,CAAU,kDAAV,CAAN;IAAoE,MAAMnL,CAAC,GAAC,EAAR;IAAW,IAAGf,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA3B,KAAsC7J,CAAzC,EAA2C,OAAM,EAAN;;IAAS,KAAI,IAAIV,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACc,CAAC,CAACsK,QAAF,CAAWxG,MAAzB,EAAgC5E,CAAC,EAAjC,EAAoCC,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BC,GAA3B,CAA+B7J,CAAC,GAACR,CAAjC,IAAoCc,CAAC,CAACsK,QAAF,CAAWpL,CAAX,EAAcqL,UAAd,CAAyBpL,CAAC,CAACgL,eAAF,CAAkBH,YAA3C,CAApC;;IAA6F,KAAI,IAAI5J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAC,CAACsK,QAAF,CAAWxG,MAAzB,EAAgC1D,CAAC,EAAjC,EAAoCF,CAAC,CAAC8D,IAAF,CAAO,IAAI9E,CAAJ,CAAM;MAACqL,UAAU,EAACvK,CAAC,CAACsK,QAAF,CAAWlK,CAAX,EAAcmK,UAA1B;MAAqC/B,QAAQ,EAAC;IAA9C,CAAN,CAAP;;IAAmE,OAAM,CAAC,CAAD,KAAKrJ,CAAC,CAACgL,eAAF,CAAkBJ,gBAAvB,GAAwC,MAAI/J,CAAC,CAACsK,QAAF,CAAWxG,MAAf,GAAsB3E,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BI,aAA3B,GAAyC,CAAC,CAAhE,GAAkEvK,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2ByD,SAA3B,GAAqC/M,CAAC,CAACsK,QAAF,CAAWtK,CAAC,CAACsK,QAAF,CAAWxG,MAAX,GAAkB,CAA7B,EAAgCyG,UAAhC,CAA2CpL,CAAC,CAACgL,eAAF,CAAkBH,YAA7D,CAA/I,GAA0N,CAAC,KAAK,CAAL,KAAShK,CAAC,CAACyK,qBAAX,IAAkCzK,CAAC,CAACsK,QAAF,CAAWxG,MAAX,KAAoB3E,CAAC,CAACgL,eAAF,CAAkBjB,iBAAxE,IAA2F,CAAC,CAAD,KAAKlJ,CAAC,CAACyK,qBAAnG,MAA4HtL,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BI,aAA3B,GAAyC,CAAC,CAAtK,CAA1N,EAAmYvK,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BE,aAA3B,GAAyChK,CAAC,GAACQ,CAAC,CAACsK,QAAF,CAAWxG,MAAzb,EAAgc3E,CAAC,CAACgL,eAAF,CAAkBb,QAAlB,CAA2BG,QAA3B,IAAqCtK,CAAC,CAACgL,eAAF,CAAkBjB,iBAAvf,EAAygBhJ,CAA/gB;EAAihB;;EAAa,OAANgN,MAAM,CAAChO,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAASC,CAAT,EAAW;IAAC,MAAME,CAAC,GAAC,IAAIuB,CAAJ,CAAM;MAACmF,GAAG,EAAChH,CAAL;MAAO6D,SAAS,EAAC,SAAO5D,CAAP,GAAS,CAAC,GAAD,CAAT,GAAeA;IAAhC,CAAN,CAAR;IAAkD,OAAO,IAAI6C,CAAJ,CAAM;MAACa,KAAK,EAACrD,CAAP;MAASiD,gBAAgB,EAACrD,CAA1B;MAA4B+N,QAAQ,EAAC9N,CAArC;MAAuC+N,WAAW,EAAC9N;IAAnD,CAAN,CAAP;EAAoE;;EAAA+N,oBAAoB,GAAE;IAAC,OAAO,KAAKzK,MAAL,IAAa,KAAKA,MAAL,CAAYuB,MAAzB,IAAiC,KAAKvB,MAAL,CAAYuB,MAAZ,CAAmBC,UAApD,IAAgE,KAAKxB,MAAL,CAAYuB,MAAZ,CAAmBC,UAAnB,CAA8BkJ,aAA9F,GAA4G,KAAK1K,MAAL,CAAYuB,MAAZ,CAAmBC,UAAnB,CAA8BkJ,aAA1I,GAAwJ,EAA/J;EAAkK;;EAAAC,UAAU,GAAE;IAAC,OAAOvN,CAAC,CAAC,KAAK4C,MAAL,CAAY8D,SAAZ,CAAsBa,IAAvB,CAAR;EAAqC;;EAAsB,MAAhBiG,gBAAgB,CAACtO,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOC,CAAP,EAASE,CAAT,EAAW;IAAC,IAAG,KAAKoD,MAAL,CAAYkD,YAAZ,CAAyBa,IAAzB,CAA8B8G,kBAA9B,IAAkD,KAAK7K,MAAL,CAAYkD,YAAZ,CAAyB4H,UAAzB,CAAoCC,wBAAzF,EAAkH;MAAC,MAAMjO,CAAC,GAAC;QAACyL,SAAS,EAAC,CAACjM,CAAD,CAAX;QAAe0O,cAAc,EAACpO;MAA9B,CAAR;MAAyC,CAACL,CAAC,IAAEA,CAAC,GAAC,CAAL,IAAQE,CAAC,IAAEA,CAAC,GAAC,CAAd,MAAmBK,CAAC,CAACmO,IAAF,GAAO,CAAC1O,CAAC,IAAEA,CAAC,GAAC,CAAL,GAAOA,CAAP,GAAS,CAAV,EAAYE,CAAC,IAAEA,CAAC,GAAC,CAAL,GAAOA,CAAP,GAASF,CAAC,GAAC,CAAvB,CAA1B,GAAqDG,CAAC,IAAEA,CAAC,CAACwE,MAAF,GAAS,CAAZ,KAAgBpE,CAAC,CAACoO,eAAF,GAAkBxO,CAAlC,CAArD,EAA0F,KAAKqI,0BAAL,IAAiC,KAAKA,0BAAL,CAAgCC,qBAAhC,CAAsD;QAAC/E,KAAK,EAAC,KAAKD,MAAZ;QAAmBmD,KAAK,EAACrG,CAAzB;QAA2BmI,MAAM,EAAC;MAAlC,CAAtD,CAA3H;MAAmO,MAAMjI,CAAC,GAAC,MAAM,KAAKgD,MAAL,CAAY4K,gBAAZ,CAA6B9N,CAA7B,CAAd;MAAA,MAA8CI,CAAC,GAAC,EAAhD;MAAmD,OAAOF,CAAC,IAAEA,CAAC,CAACV,CAAD,CAAJ,IAASU,CAAC,CAACV,CAAD,CAAD,CAAK6O,OAAL,CAAc5O,CAAC,IAAE;QAAC,MAAME,CAAC,GAAC,KAAKuD,MAAL,CAAY8D,SAAZ,CAAsBa,IAAtB,GAA2B,GAA3B,GAA+BrI,CAAC,CAAC+N,QAAF,EAA/B,GAA4C,eAA5C,GAA4D9N,CAAC,CAACwB,EAAF,CAAKsM,QAAL,EAApE;QAAoF,IAAI3N,CAAC,GAAC,IAAN;QAAWE,CAAC,IAAEL,CAAC,CAAC6O,QAAL,KAAgB1O,CAAC,GAACyC,CAAC,CAACkM,mBAAF,CAAsB9O,CAAC,CAAC6O,QAAxB,EAAiC,CAAC,CAAlC,CAAlB,GAAwDlO,CAAC,CAACkE,IAAF,CAAO,IAAI5E,CAAJ,CAAMD,CAAC,CAACwB,EAAR,EAAWxB,CAAC,CAAC+E,IAAb,EAAkB/E,CAAC,CAAC+O,WAApB,EAAgC/O,CAAC,CAAC0O,IAAlC,EAAuCxO,CAAvC,EAAyCC,CAAzC,CAAP,CAAxD;MAA4G,CAA7N,CAAT,EAAyOQ,CAAhP;IAAkP;;IAAA,OAAM,EAAN;EAAS;;EAA0B,MAApBqO,oBAAoB,CAAC/O,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC;MAACuB,CAAC,EAAC,MAAH;MAAUwN,cAAc,EAAChP,CAAC,CAACgP,cAAF,CAAiBnB,QAAjB,EAAzB;MAAqDnE,oBAAoB,EAAC1J,CAAC,CAACsG,KAA5E;MAAkF3C,SAAS,EAAC3D,CAAC,CAAC2D,SAAF,CAAY6G,IAAZ,CAAiB,GAAjB,CAA5F;MAAkHR,cAAc,EAAChK,CAAC,CAACgK,cAAF,CAAiB6D,QAAjB;IAAjI,CAAR;IAAsK,KAAK,CAAL,KAAS7N,CAAC,CAAC+J,YAAX,IAAyB,SAAO/J,CAAC,CAAC+J,YAAlC,KAAiD9J,CAAC,CAAC8J,YAAF,GAAe/J,CAAC,CAAC+J,YAAF,CAAe8D,QAAf,EAAhE,GAA2F,KAAK,CAAL,KAAS7N,CAAC,CAAC8J,iBAAX,IAA8B,SAAO9J,CAAC,CAAC8J,iBAAvC,KAA2D7J,CAAC,CAAC6J,iBAAF,GAAoB9J,CAAC,CAAC8J,iBAAF,CAAoB+D,QAApB,EAA/E,CAA3F,EAA0M7N,CAAC,CAACkJ,aAAF,KAAkBjJ,CAAC,CAACiJ,aAAF,GAAgBlJ,CAAC,CAACkJ,aAAF,CAAgBsB,IAAhB,CAAqB,GAArB,CAAlC,CAA1M,EAAuQxK,CAAC,CAAC+L,SAAF,CAAYrH,MAAZ,GAAmB,CAAnB,KAAuBzE,CAAC,CAAC8L,SAAF,GAAY/L,CAAC,CAAC+L,SAAF,CAAYvB,IAAZ,CAAiB,GAAjB,CAAnC,CAAvQ,EAAiUxK,CAAC,CAACiJ,mBAAF,KAAwBhJ,CAAC,CAACgP,KAAF,GAAQC,IAAI,CAACC,SAAL,CAAenP,CAAC,CAACiJ,mBAAF,CAAsBhF,MAAtB,EAAf,CAAhC,CAAjU,EAAiZ,KAAKsE,0BAAL,IAAiC,KAAKA,0BAAL,CAAgC6G,kBAAhC,CAAmD;MAAC3L,KAAK,EAAC,KAAKD,MAAZ;MAAmB6L,YAAY,EAACpP,CAAhC;MAAkCwI,MAAM,EAAC,gBAAzC;MAA0D3B,GAAG,EAAC,KAAKtD,MAAL,CAAY8D,SAAZ,CAAsBa,IAAtB,GAA2B;IAAzF,CAAnD,CAAlb;IAAulB,MAAMjI,CAAC,GAAC,MAAMH,CAAC,CAAC,KAAKyD,MAAL,CAAY8D,SAAZ,CAAsBa,IAAtB,GAA2B,sBAA5B,EAAmD;MAACmH,YAAY,EAAC,MAAd;MAAqB3I,KAAK,EAAC1G;IAA3B,CAAnD,CAAf;;IAAiG,IAAGC,CAAC,CAACqH,IAAL,EAAU;MAAC,MAAMxH,CAAC,GAAC,EAAR;MAAA,MAAWC,CAAC,GAACE,CAAC,CAACqH,IAAf;;MAAoB,IAAGvH,CAAC,IAAEA,CAAC,CAACuP,mBAAR,EAA4B;QAAC,MAAMtP,CAAC,GAACD,CAAC,CAACqD,gBAAV;;QAA2B,KAAI,MAAMnD,CAAV,IAAeF,CAAC,CAACuP,mBAAjB,EAAqC;UAAC,MAAMnP,CAAC,GAACF,CAAC,CAACsP,QAAV;UAAA,MAAmBlP,CAAC,GAAC,EAArB;;UAAwB,KAAI,MAAMP,CAAV,IAAeG,CAAC,CAACuP,cAAjB,EAAgC;YAAC1P,CAAC,CAACqJ,QAAF,KAAarJ,CAAC,CAACqJ,QAAF,CAAW/F,gBAAX,GAA4BpD,CAAzC;YAA4C,MAAMD,CAAC,GAAC,IAAIF,CAAJ,CAAM;cAACsJ,QAAQ,EAACrJ,CAAC,CAACqJ,QAAF,GAAW1H,CAAC,CAAC3B,CAAC,CAACqJ,QAAH,CAAZ,GAAyB,IAAnC;cAAwC+B,UAAU,EAACpL,CAAC,CAACoL;YAArD,CAAN,CAAR;YAAgF7K,CAAC,CAACsE,IAAF,CAAO5E,CAAP;UAAU;;UAAAD,CAAC,CAACK,CAAD,CAAD,GAAK;YAAC8K,QAAQ,EAAC5K,CAAV;YAAY+K,qBAAqB,EAAC,CAAC,CAAD,KAAKrL,CAAC,CAACqL;UAAzC,CAAL;QAAqE;MAAC;;MAAA,OAAOtL,CAAP;IAAS;;IAAA,MAAM,IAAIkM,KAAJ,CAAU,iBAAV,CAAN;EAAmC;;EAA0B,MAApByD,oBAAoB,CAAC5P,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAMC,CAAC,GAAC,IAAImC,CAAJ,EAAR;IAAcnC,CAAC,CAAC2D,SAAF,GAAY5D,CAAZ,EAAcC,CAAC,CAACgK,cAAF,GAAiB,CAAC,CAAhC,EAAkChK,CAAC,CAACiJ,mBAAF,GAAsB,KAAK5F,gBAA7D,EAA8ErD,CAAC,CAACsG,KAAF,GAAQ,KAAKhB,aAAL,GAAmB,GAAnB,GAAuBxF,CAAC,CAAC+N,QAAF,EAA7G,EAA0H,KAAKtF,0BAAL,IAAiC,KAAKA,0BAAL,CAAgCC,qBAAhC,CAAsD;MAAC/E,KAAK,EAAC,KAAKD,MAAZ;MAAmBmD,KAAK,EAAC3G,CAAzB;MAA2ByI,MAAM,EAAC;IAAlC,CAAtD,CAA3J;IAA+P,MAAMxI,CAAC,GAAC,MAAM8B,CAAC,CAAC,KAAKyB,MAAL,CAAY8D,SAAZ,CAAsBa,IAAvB,EAA4BnI,CAA5B,CAAf;IAA8C,OAAO,MAAIC,CAAC,CAACiL,QAAF,CAAWxG,MAAf,GAAsBzE,CAAC,CAACiL,QAAF,CAAW,CAAX,CAAtB,GAAoC,IAA3C;EAAgD;;EAAqB,MAAfyE,eAAe,GAAE;IAAC,MAAM,KAAKrL,IAAL,EAAN;IAAkB,MAAMxE,CAAC,GAAC0B,CAAC,EAAEoO,cAAH,CAAkB,KAAKpM,MAAL,CAAYsD,GAA9B,CAAR;IAA2C,OAAOhH,CAAC,GAACA,CAAC,CAAC+P,MAAH,GAAU,IAAlB;EAAuB;;EAAwB,MAAlBC,kBAAkB,GAAE;IAAC,MAAM,KAAKxL,IAAL,EAAN;IAAkB,MAAMxE,CAAC,GAAC0B,CAAC,EAAEuO,cAAH,CAAkB,KAAKvM,MAAL,CAAYsD,GAA9B,CAAR;IAA2C,IAAGhH,CAAH,EAAK,OAAOA,CAAC,CAACkQ,eAAT;IAAyB,IAAIhQ,CAAC,GAAC,KAAKwD,MAAL,CAAYsD,GAAlB;IAAsB,MAAM7G,CAAC,GAACD,CAAC,CAAC6E,WAAF,GAAgBoL,OAAhB,CAAwB,gBAAxB,CAAR;;IAAkD,IAAGjQ,CAAC,GAACC,CAAC,GAAC,CAAC,CAAH,GAAKD,CAAC,CAACkQ,SAAF,CAAY,CAAZ,EAAcjQ,CAAd,CAAL,GAAsBD,CAAxB,EAA0BA,CAA7B,EAA+B;MAACA,CAAC,IAAE,YAAH;;MAAgB,IAAG;QAAC,MAAMF,CAAC,GAAC,MAAMC,CAAC,CAACC,CAAD,EAAG;UAAC2G,KAAK,EAAC;YAACnF,CAAC,EAAC;UAAH;QAAP,CAAH,CAAf;QAAsC,IAAIvB,CAAC,GAAC,EAAN;QAAS,OAAOH,CAAC,CAACyH,IAAF,IAAQzH,CAAC,CAACyH,IAAF,CAAOyI,eAAf,KAAiC/P,CAAC,GAACH,CAAC,CAACyH,IAAF,CAAOyI,eAA1C,GAA2D/P,CAAlE;MAAoE,CAAvH,CAAuH,OAAMC,CAAN,EAAQ;QAAC,OAAM,EAAN;MAAS;IAAC;;IAAA,OAAM,EAAN;EAAS;;EAAAiQ,uBAAuB,GAAE;IAAC,MAAMrQ,CAAC,GAAC,IAAI8C,CAAJ,CAAM;MAACa,KAAK,EAAC,KAAKD,MAAZ;MAAmBH,gBAAgB,EAAC,KAAKA,gBAAzC;MAA0DM,SAAS,EAAC,KAAKX,eAAzE;MAAyFY,eAAe,EAAC,CAAC,KAAKb,eAA/G;MAA+HgL,QAAQ,EAAC,KAAK9F,mBAA7I;MAAiK+F,WAAW,EAAC,KAAKzF;IAAlL,CAAN,CAAR;IAA6N,OAAOzI,CAAC,CAACsD,wBAAF,GAA2B,CAAC,CAA5B,EAA8BtD,CAArC;EAAuC;;AAAjjtB;;AAAkjtB,SAAO8C,CAAC,IAAIwN,OAAZ"},"metadata":{},"sourceType":"module"}