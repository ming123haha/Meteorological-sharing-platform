{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../../core/mathUtils.js\";\nimport { isSome as e } from \"../../../../core/maybe.js\";\nimport { c as r, g as n } from \"../../../../chunks/vec3.js\";\nimport { c as o } from \"../../../../chunks/vec3f64.js\";\nimport { wrap as i } from \"../../../../geometry/support/ray.js\";\nimport { interactionDirectionTowardsConstraintMinimization as s, defaultApplyOptions as c, InteractionType as a, hasConstraintType as m, ConstraintTypes as u, adjustRangeForInteraction as f } from \"./common.js\";\nimport { closestPointOnRay as p } from \"../../support/intersectionUtils.js\";\n\nfunction d(t, n, o = c) {\n  const a = l(t, n, o);\n  if (0 === a) return !1;\n  const m = t.renderCoordsHelper,\n        u = m.getAltitude(n.eye) + a,\n        f = s(n, o.interactionDirection, x(t, n, Math.sign(a), h), T),\n        d = r(A, n.viewForward),\n        y = m.intersectInfiniteManifold(i(n.eye, f), u, C);\n  return n.eye = e(y) ? y : m.setAltitude(C, u, n.eye), n.center = p(C, n.eye, d, n.center), !0;\n}\n\nfunction l(e, r, n = c) {\n  if (!y(e, n)) return 0;\n  const o = g(e.state.constraints.altitude, M);\n  j(e, n, o);\n  const i = e.renderCoordsHelper.getAltitude(r.eye),\n        s = t(i, o.min, o.max) - i;\n  return Math.abs(s) <= 1e-6 ? 0 : s;\n}\n\nfunction y(t, e) {\n  const r = t.state.constraints.altitude;\n  return !(!t.state.isGlobal || !r) && (e.interactionType !== a.TUMBLE || !m(e.selection, u.TILT));\n}\n\nfunction j(t, e, r) {\n  const n = e.interactionType;\n  if (n === a.NONE) return;\n  const {\n    min: o,\n    max: i\n  } = r,\n        {\n    interactionStartCamera: s,\n    interactionFactor: c\n  } = e,\n        m = n === a.TUMBLE || n === a.ZOOM,\n        u = l(t, s),\n        p = 0 === u ? 0 : t.renderCoordsHelper.getAltitude(s.eye);\n  r.min = o, r.max = i;\n  f(u, p, m, c, .05 * p, r);\n}\n\nfunction x(t, e, r, o) {\n  return t.renderCoordsHelper.worldUpAtPosition(e.eye, o), n(o, o, r), o;\n}\n\nfunction g(t, e) {\n  return e.min = t.min, e.max = t.max, e;\n}\n\nconst M = {\n  min: 0,\n  max: 0\n},\n      T = o(),\n      h = o(),\n      A = o(),\n      C = o();\nexport { d as applyAltitudeConstraint, l as getAltitudeConstraintError };","map":{"version":3,"names":["clamp","t","isSome","e","c","r","g","n","o","wrap","i","interactionDirectionTowardsConstraintMinimization","s","defaultApplyOptions","InteractionType","a","hasConstraintType","m","ConstraintTypes","u","adjustRangeForInteraction","f","closestPointOnRay","p","d","l","renderCoordsHelper","getAltitude","eye","interactionDirection","x","Math","sign","h","T","A","viewForward","y","intersectInfiniteManifold","C","setAltitude","center","state","constraints","altitude","M","j","min","max","abs","isGlobal","interactionType","TUMBLE","selection","TILT","NONE","interactionStartCamera","interactionFactor","ZOOM","worldUpAtPosition","applyAltitudeConstraint","getAltitudeConstraintError"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/camera/constraintUtils/altitude.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{isSome as e}from\"../../../../core/maybe.js\";import{c as r,g as n}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{wrap as i}from\"../../../../geometry/support/ray.js\";import{interactionDirectionTowardsConstraintMinimization as s,defaultApplyOptions as c,InteractionType as a,hasConstraintType as m,ConstraintTypes as u,adjustRangeForInteraction as f}from\"./common.js\";import{closestPointOnRay as p}from\"../../support/intersectionUtils.js\";function d(t,n,o=c){const a=l(t,n,o);if(0===a)return!1;const m=t.renderCoordsHelper,u=m.getAltitude(n.eye)+a,f=s(n,o.interactionDirection,x(t,n,Math.sign(a),h),T),d=r(A,n.viewForward),y=m.intersectInfiniteManifold(i(n.eye,f),u,C);return n.eye=e(y)?y:m.setAltitude(C,u,n.eye),n.center=p(C,n.eye,d,n.center),!0}function l(e,r,n=c){if(!y(e,n))return 0;const o=g(e.state.constraints.altitude,M);j(e,n,o);const i=e.renderCoordsHelper.getAltitude(r.eye),s=t(i,o.min,o.max)-i;return Math.abs(s)<=1e-6?0:s}function y(t,e){const r=t.state.constraints.altitude;return!(!t.state.isGlobal||!r)&&(e.interactionType!==a.TUMBLE||!m(e.selection,u.TILT))}function j(t,e,r){const n=e.interactionType;if(n===a.NONE)return;const{min:o,max:i}=r,{interactionStartCamera:s,interactionFactor:c}=e,m=n===a.TUMBLE||n===a.ZOOM,u=l(t,s),p=0===u?0:t.renderCoordsHelper.getAltitude(s.eye);r.min=o,r.max=i;f(u,p,m,c,.05*p,r)}function x(t,e,r,o){return t.renderCoordsHelper.worldUpAtPosition(e.eye,o),n(o,o,r),o}function g(t,e){return e.min=t.min,e.max=t.max,e}const M={min:0,max:0},T=o(),h=o(),A=o(),C=o();export{d as applyAltitudeConstraint,l as getAltitudeConstraintError};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}