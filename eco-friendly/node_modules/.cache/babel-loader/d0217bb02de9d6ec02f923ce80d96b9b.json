{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Collection.js\";\nimport { referenceSetter as s, castForReferenceSetter as r } from \"../../core/collectionUtils.js\";\nimport { isNone as t } from \"../../core/maybe.js\";\nimport { watch as l, sync as a } from \"../../core/reactiveUtils.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport h from \"./LayerView.js\";\nlet p = class extends h {\n  constructor(i) {\n    super(i), this.type = \"group\", this.layerViews = new e();\n  }\n\n  _allLayerViewVisibility(i) {\n    this.layerViews.forEach(e => {\n      e.visible = i;\n    });\n  }\n\n  initialize() {\n    this.handles.add([this.layerViews.on(\"change\", i => this._layerViewsChangeHandler(i)), l(() => this.layer.visibilityMode, () => this._applyVisibility(() => this._allLayerViewVisibility(this.visible), () => this._applyExclusiveVisibility(null)), a), l(() => this.visible, i => {\n      this._applyVisibility(() => this._allLayerViewVisibility(i), () => {});\n    }, a)], \"grouplayerview\"), this._layerViewsChangeHandler({\n      target: null,\n      added: this.layerViews.toArray(),\n      removed: [],\n      moved: []\n    });\n  }\n\n  set layerViews(i) {\n    this._set(\"layerViews\", s(i, this._get(\"layerViews\")));\n  }\n\n  get updatingProgress() {\n    return 0 === this.layerViews.length ? 1 : this.layerViews.reduce((i, e) => i + e.updatingProgress, 0) / this.layerViews.length;\n  }\n\n  isUpdating() {\n    return this.layerViews.some(i => i.updating);\n  }\n\n  _hasLayerViewVisibleOverrides() {\n    return this.layerViews.some(i => i._isOverridden(\"visible\"));\n  }\n\n  _findLayerViewForLayer(i) {\n    return i && this.layerViews.find(e => e.layer === i);\n  }\n\n  _firstVisibleOnLayerOrder() {\n    const i = this.layer.layers.find(i => this._findLayerViewForLayer(i)?.visible);\n    return i && this._findLayerViewForLayer(i);\n  }\n\n  _applyExclusiveVisibility(i) {\n    t(i) && (i = this._firstVisibleOnLayerOrder(), t(i) && this.layerViews.length > 0 && (i = this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))), this.layerViews.forEach(e => {\n      e.visible = e === i;\n    });\n  }\n\n  _layerViewsChangeHandler(i) {\n    this.handles.remove(\"grouplayerview:visible\"), this.handles.add(this.layerViews.map(i => l(() => i.visible, e => this._applyVisibility(() => {\n      e !== this.visible && (i.visible = this.visible);\n    }, () => this._applyExclusiveVisibility(e ? i : null)), a)).toArray(), \"grouplayerview:visible\");\n    const e = i.added[i.added.length - 1];\n\n    this._applyVisibility(() => this._allLayerViewVisibility(this.visible), () => this._applyExclusiveVisibility(e?.visible ? e : null));\n  }\n\n  _applyVisibility(i, e) {\n    this._hasLayerViewVisibleOverrides() && (\"inherited\" === this.layer?.visibilityMode ? i() : \"exclusive\" === this.layer?.visibilityMode && e());\n  }\n\n};\ni([y({\n  cast: r\n})], p.prototype, \"layerViews\", null), i([y({\n  readOnly: !0\n})], p.prototype, \"updatingProgress\", null), i([y()], p.prototype, \"view\", void 0), p = i([o(\"esri.views.layers.GroupLayerView\")], p);\nconst n = p;\nexport { n as default };","map":{"version":3,"names":["_","i","e","referenceSetter","s","castForReferenceSetter","r","isNone","t","watch","l","sync","a","property","y","subclass","o","h","p","constructor","type","layerViews","_allLayerViewVisibility","forEach","visible","initialize","handles","add","on","_layerViewsChangeHandler","layer","visibilityMode","_applyVisibility","_applyExclusiveVisibility","target","added","toArray","removed","moved","_set","_get","updatingProgress","length","reduce","isUpdating","some","updating","_hasLayerViewVisibleOverrides","_isOverridden","_findLayerViewForLayer","find","_firstVisibleOnLayerOrder","layers","getItemAt","remove","map","cast","prototype","readOnly","n","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as r}from\"../../core/collectionUtils.js\";import{isNone as t}from\"../../core/maybe.js\";import{watch as l,sync as a}from\"../../core/reactiveUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"./LayerView.js\";let p=class extends h{constructor(i){super(i),this.type=\"group\",this.layerViews=new e}_allLayerViewVisibility(i){this.layerViews.forEach((e=>{e.visible=i}))}initialize(){this.handles.add([this.layerViews.on(\"change\",(i=>this._layerViewsChangeHandler(i))),l((()=>this.layer.visibilityMode),(()=>this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))),a),l((()=>this.visible),(i=>{this._applyVisibility((()=>this._allLayerViewVisibility(i)),(()=>{}))}),a)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(i){this._set(\"layerViews\",s(i,this._get(\"layerViews\")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((i,e)=>i+e.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.layerViews.some((i=>i.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((i=>i._isOverridden(\"visible\")))}_findLayerViewForLayer(i){return i&&this.layerViews.find((e=>e.layer===i))}_firstVisibleOnLayerOrder(){const i=this.layer.layers.find((i=>this._findLayerViewForLayer(i)?.visible));return i&&this._findLayerViewForLayer(i)}_applyExclusiveVisibility(i){t(i)&&(i=this._firstVisibleOnLayerOrder(),t(i)&&this.layerViews.length>0&&(i=this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))),this.layerViews.forEach((e=>{e.visible=e===i}))}_layerViewsChangeHandler(i){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((i=>l((()=>i.visible),(e=>this._applyVisibility((()=>{e!==this.visible&&(i.visible=this.visible)}),(()=>this._applyExclusiveVisibility(e?i:null)))),a))).toArray(),\"grouplayerview:visible\");const e=i.added[i.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(e?.visible?e:null)))}_applyVisibility(i,e){this._hasLayerViewVisibleOverrides()&&(\"inherited\"===this.layer?.visibilityMode?i():\"exclusive\"===this.layer?.visibilityMode&&e())}};i([y({cast:r})],p.prototype,\"layerViews\",null),i([y({readOnly:!0})],p.prototype,\"updatingProgress\",null),i([y()],p.prototype,\"view\",void 0),p=i([o(\"esri.views.layers.GroupLayerView\")],p);const n=p;export{n as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}