{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { property as s } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../../../../geometry/Extent.js\";\nimport { QueryEngine as o } from \"../../../../layers/graphics/data/QueryEngine.js\";\nimport i from \"../../../../rest/support/FeatureSet.js\";\nimport u from \"../../../../rest/support/Query.js\";\nimport { featureGeometryTypeKebabDictionary as y } from \"../../../../geometry/support/typeUtils.js\";\nconst c = o;\nlet l = class extends r {\n  constructor(e) {\n    super(e), this._dataQueryEngineInstance = null;\n  }\n\n  get queryGeometryType() {\n    switch (this.layer.geometryType) {\n      case \"multipoint\":\n      case \"point\":\n      case \"polygon\":\n      case \"polyline\":\n        return this.layer.geometryType;\n\n      case \"mesh\":\n        return \"polygon\";\n\n      default:\n        return;\n    }\n  }\n\n  get defaultQueryJSON() {\n    return new u({\n      outSpatialReference: this.spatialReference\n    }).toJSON();\n  }\n\n  get dataQueryEngine() {\n    return this._ensureDataQueryEngine();\n  }\n\n  destroy() {\n    this.clear();\n  }\n\n  clear() {\n    return !!this._dataQueryEngineInstance && (this._dataQueryEngineInstance.destroy(), this._dataQueryEngineInstance = null, !0);\n  }\n\n  async executeQueryForIdSet(e, r) {\n    return this.dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e, r));\n  }\n\n  async executeQueryForCount(e, r) {\n    return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e), r);\n  }\n\n  async executeQueryForExtent(e, r) {\n    const {\n      count: t,\n      extent: s\n    } = await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e), r);\n    return {\n      count: t,\n      extent: n.fromJSON(s)\n    };\n  }\n\n  async executeQueryForIds(e, r) {\n    return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e), r);\n  }\n\n  async executeQueryForLatestObservations(e, r) {\n    const t = await this.dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e), r),\n          s = i.fromJSON(t);\n    return s.features.forEach(e => {\n      e.layer = this.layer, e.sourceLayer = this.layer;\n    }), s;\n  }\n\n  async executeQuery(e, r) {\n    const t = await this.dataQueryEngine.executeQuery(this._ensureQueryJSON(e), r),\n          s = i.fromJSON(t);\n    return s.features.forEach(e => {\n      e.layer = this.layer, e.sourceLayer = this.layer;\n    }), s;\n  }\n\n  _ensureQueryJSON(e, r) {\n    let s = this.defaultQueryJSON;\n    return t(e) && (\"outSpatialReference\" in e && !e.outSpatialReference && (e.outSpatialReference = this.spatialReference), s = e.toJSON()), t(r) && (s = { ...s,\n      sceneFilter: { ...r,\n        geometry: r.geometry.toJSON()\n      }\n    }), s;\n  }\n\n  _ensureDataQueryEngine() {\n    if (this._dataQueryEngineInstance) return this._dataQueryEngineInstance;\n    const e = \"timeInfo\" in this.layer && this.layer.timeInfo && this.layer.timeInfo.toJSON() || null,\n          r = this.layer.objectIdField,\n          t = y.toJSON(this.queryGeometryType),\n          s = this.layer.fields.map(e => e.toJSON()),\n          a = this.layerView.view.resourceController.scheduler,\n          n = this.priority,\n          o = this.spatialReference.toJSON(),\n          i = this.layerView.processor.featureStore,\n          {\n      hasZ: u,\n      hasM: l\n    } = this.layerView;\n    return this._dataQueryEngineInstance = new c({\n      hasZ: u,\n      hasM: l,\n      geometryType: t,\n      fields: s,\n      timeInfo: e,\n      spatialReference: o,\n      objectIdField: r,\n      featureStore: i,\n      scheduler: a,\n      priority: n\n    }), this._dataQueryEngineInstance;\n  }\n\n};\ne([s({\n  constructOnly: !0\n})], l.prototype, \"layerView\", void 0), e([s({\n  constructOnly: !0\n})], l.prototype, \"priority\", void 0), e([s({\n  readOnly: !0,\n  aliasOf: \"layerView.view.spatialReference\"\n})], l.prototype, \"spatialReference\", void 0), e([s({\n  readOnly: !0,\n  aliasOf: \"layerView.layer\"\n})], l.prototype, \"layer\", void 0), e([s({\n  readOnly: !0\n})], l.prototype, \"queryGeometryType\", null), e([s({\n  readOnly: !0\n})], l.prototype, \"defaultQueryJSON\", null), l = e([a(\"esri.views.3d.layers.graphics.QueryEngine\")], l);\nexport { l as QueryEngine };","map":{"version":3,"names":["_","e","r","isSome","t","property","s","subclass","a","n","QueryEngine","o","i","u","featureGeometryTypeKebabDictionary","y","c","l","constructor","_dataQueryEngineInstance","queryGeometryType","layer","geometryType","defaultQueryJSON","outSpatialReference","spatialReference","toJSON","dataQueryEngine","_ensureDataQueryEngine","destroy","clear","executeQueryForIdSet","_ensureQueryJSON","executeQueryForCount","executeQueryForExtent","count","extent","fromJSON","executeQueryForIds","executeQueryForLatestObservations","features","forEach","sourceLayer","executeQuery","sceneFilter","geometry","timeInfo","objectIdField","fields","map","layerView","view","resourceController","scheduler","priority","processor","featureStore","hasZ","hasM","constructOnly","prototype","readOnly","aliasOf"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import r from\"../../../../core/Accessor.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import{QueryEngine as o}from\"../../../../layers/graphics/data/QueryEngine.js\";import i from\"../../../../rest/support/FeatureSet.js\";import u from\"../../../../rest/support/Query.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";const c=o;let l=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null}get queryGeometryType(){switch(this.layer.geometryType){case\"multipoint\":case\"point\":case\"polygon\":case\"polyline\":return this.layer.geometryType;case\"mesh\":return\"polygon\";default:return}}get defaultQueryJSON(){return new u({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this._ensureDataQueryEngine()}destroy(){this.clear()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,r){return this.dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e,r))}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:n.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQueryForLatestObservations(e,r){const t=await this.dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,r){const t=await this.dataQueryEngine.executeQuery(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e,r){let s=this.defaultQueryJSON;return t(e)&&(\"outSpatialReference\"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),s=e.toJSON()),t(r)&&(s={...s,sceneFilter:{...r,geometry:r.geometry.toJSON()}}),s}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=\"timeInfo\"in this.layer&&this.layer.timeInfo&&this.layer.timeInfo.toJSON()||null,r=this.layer.objectIdField,t=y.toJSON(this.queryGeometryType),s=this.layer.fields.map((e=>e.toJSON())),a=this.layerView.view.resourceController.scheduler,n=this.priority,o=this.spatialReference.toJSON(),i=this.layerView.processor.featureStore,{hasZ:u,hasM:l}=this.layerView;return this._dataQueryEngineInstance=new c({hasZ:u,hasM:l,geometryType:t,fields:s,timeInfo:e,spatialReference:o,objectIdField:r,featureStore:i,scheduler:a,priority:n}),this._dataQueryEngineInstance}};e([s({constructOnly:!0})],l.prototype,\"layerView\",void 0),e([s({constructOnly:!0})],l.prototype,\"priority\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],l.prototype,\"spatialReference\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.layer\"})],l.prototype,\"layer\",void 0),e([s({readOnly:!0})],l.prototype,\"queryGeometryType\",null),e([s({readOnly:!0})],l.prototype,\"defaultQueryJSON\",null),l=e([a(\"esri.views.3d.layers.graphics.QueryEngine\")],l);export{l as QueryEngine};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}