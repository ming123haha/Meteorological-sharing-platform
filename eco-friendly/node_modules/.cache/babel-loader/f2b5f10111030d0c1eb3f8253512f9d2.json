{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport t from \"../../request.js\";\nimport { throwIfAborted as r } from \"../../core/promiseUtils.js\";\nimport { pt2px as a } from \"../../core/screenUtils.js\";\nimport { numericHash as i } from \"../../core/string.js\";\nimport { getJsonType as s, isPolygon as o, isPolyline as n } from \"../../geometry/support/jsonUtils.js\";\nimport { analyzeCIMSymbol as c, analyzeCIMResource as l } from \"./cimAnalyzer.js\";\nimport m from \"./CIMResourceManager.js\";\nimport h from \"./Rasterizer.js\";\nimport f from \"./TextRasterizer.js\";\nimport { createLabelOverrideFunction as g, evaluateValueOrFunction as u, colorToArray as y } from \"./utils.js\";\nimport { scaleCIMMarker as p } from \"../support/cimSymbolUtils.js\";\nimport { Symbol3DAnchorPosition2D as d } from \"../support/Symbol3DAnchorPosition2D.js\";\nvar M;\n!function (e) {\n  e.Legend = \"legend\", e.Preview = \"preview\";\n}(M || (M = {}));\n\nconst C = (e, t, r) => {\n  if (e && e.targetSize) {\n    let i;\n\n    if (r) {\n      const t = Math.max(r.frame.xmax - r.frame.xmin, r.frame.ymax - r.frame.ymin);\n      i = e.targetSize / a(t);\n    } else i = e.targetSize / t.referenceSize;\n\n    return i;\n  }\n\n  return e && e.scaleFactor ? e.scaleFactor : 1;\n},\n      I = {\n  fill: {\n    legend: {\n      frame: {\n        xmax: 15,\n        xmin: 0,\n        ymax: 15,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 15], [15, 7.5], [15, 0], [0, 0], [0, 15]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 15], [0, 0], [15, 7.5], [15, 15], [0, 15]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: 100,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 100], [100, 100], [100, 0], [0, 0], [0, 100]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 100], [0, 0], [100, 0], [100, 100], [0, 100]]]\n      }\n    }\n  },\n  stroke: {\n    legend: {\n      frame: {\n        xmax: 24,\n        xmin: 0,\n        ymax: 2,\n        ymin: -2\n      },\n      geometry: {\n        paths: [[[0, 0], [12, 0], [24, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [12, 2], [24, 2]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: 2,\n        ymin: -2\n      },\n      geometry: {\n        paths: [[[0, 0], [50, 0], [100, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [50, 2], [100, 2]]]\n      }\n    }\n  }\n};\n\nclass z {\n  constructor(e, t) {\n    this._spatialReference = e, this._avoidSDF = t, this._resourceCache = new Map(), this._pictureMarkerCache = new Map(), this._textRasterizer = new f(), this._cimResourceManager = new m(), this._rasterizer = new h(this._cimResourceManager);\n  }\n\n  async rasterizeCIMSymbolAsync(e, t, r, a, i, o, n, c) {\n    a = a || (t ? null != t.centroid ? \"esriGeometryPolygon\" : s(t.geometry) : null) || x(e);\n    const l = await this.analyzeCIMSymbol(e, t ? P(t.attributes) : null, r, a, c);\n    return this.rasterizeCIMSymbol(l, t, a, i, o, n);\n  }\n\n  async analyzeCIMSymbol(e, t, a, i, s) {\n    const o = [],\n          n = t ? {\n      geometryType: i,\n      spatialReference: this._spatialReference,\n      fields: t\n    } : null;\n    let l;\n    await c(e.data, n, this._cimResourceManager, o, this._avoidSDF), r(s);\n\n    for (const r of o) \"CIMPictureMarker\" !== r.cim.type && \"CIMPictureFill\" !== r.cim.type && \"CIMPictureStroke\" !== r.cim.type || (l || (l = []), l.push(this._fetchPictureMarkerResource(r, s))), a && \"text\" === r.type && \"string\" == typeof r.text && r.text.includes(\"[\") && (r.text = g(a, r.text, r.cim.textCase));\n\n    return l && (await Promise.all(l)), o;\n  }\n\n  async _fetchPictureMarkerResource(e, r) {\n    const a = e.materialHash;\n\n    if (!this._pictureMarkerCache.get(a)) {\n      const i = (await t(e.cim.url, {\n        responseType: \"image\",\n        signal: r && r.signal\n      })).data;\n\n      this._pictureMarkerCache.set(a, i);\n    }\n  }\n\n  rasterizeCIMSymbol(e, t, r, a, i, s) {\n    const o = [];\n\n    for (const n of e) {\n      a && \"function\" == typeof a.scaleFactor && (a.scaleFactor = a.scaleFactor(t, i, s));\n\n      const e = this._getRasterizedResource(n, t, r, a, i, s);\n\n      if (!e) continue;\n      let c = 0,\n          l = e.anchorX || 0,\n          m = e.anchorY || 0,\n          h = !1,\n          f = 0,\n          g = 0;\n\n      if (\"esriGeometryPoint\" === r) {\n        const e = C(a, n, null);\n        if (f = u(n.offsetX, t, i, s) * e || 0, g = u(n.offsetY, t, i, s) * e || 0, \"marker\" === n.type) c = u(n.rotation, t, i, s) || 0, h = !!n.rotateClockwise && n.rotateClockwise;else if (\"text\" === n.type) {\n          if (c = u(n.angle, t, i, s) || 0, void 0 !== n.horizontalAlignment) switch (n.horizontalAlignment) {\n            case \"left\":\n              l = -.5;\n              break;\n\n            case \"right\":\n              l = .5;\n              break;\n\n            default:\n              l = 0;\n          }\n          if (void 0 !== n.verticalAlignment) switch (n.verticalAlignment) {\n            case \"top\":\n              m = .5;\n              break;\n\n            case \"bottom\":\n              m = -.5;\n              break;\n\n            case \"baseline\":\n              m = -.25;\n              break;\n\n            default:\n              m = 0;\n          }\n        }\n      }\n\n      null != e && o.push({\n        angle: c,\n        rotateClockWise: h,\n        anchorX: l,\n        anchorY: m,\n        offsetX: f,\n        offsetY: g,\n        rasterizedResource: e\n      });\n    }\n\n    return this.getSymbolImage(o);\n  }\n\n  getSymbolImage(e) {\n    const t = document.createElement(\"canvas\"),\n          r = t.getContext(\"2d\");\n    let i = 0,\n        s = 0,\n        o = 0,\n        n = 0;\n    const c = [];\n\n    for (let f = 0; f < e.length; f++) {\n      const t = e[f],\n            l = t.rasterizedResource;\n      if (!l) continue;\n      const m = l.size,\n            h = t.offsetX,\n            g = t.offsetY,\n            u = t.anchorX,\n            y = t.anchorY,\n            p = t.rotateClockWise || !1;\n      let d = t.angle,\n          M = a(h) - m[0] * (.5 + u),\n          C = a(g) - m[1] * (.5 + y),\n          I = M + m[0],\n          z = C + m[1];\n\n      if (d) {\n        p && (d = -d);\n        const e = Math.sin(d * Math.PI / 180),\n              t = Math.cos(d * Math.PI / 180),\n              r = M * t - C * e,\n              a = M * e + C * t,\n              i = M * t - z * e,\n              s = M * e + z * t,\n              o = I * t - z * e,\n              n = I * e + z * t,\n              c = I * t - C * e,\n              l = I * e + C * t;\n        M = Math.min(r, i, o, c), C = Math.min(a, s, n, l), I = Math.max(r, i, o, c), z = Math.max(a, s, n, l);\n      }\n\n      i = M < i ? M : i, s = C < s ? C : s, o = I > o ? I : o, n = z > n ? z : n;\n      const P = r.createImageData(l.size[0], l.size[1]);\n      P.data.set(new Uint8ClampedArray(l.image.buffer));\n      const x = {\n        offsetX: h,\n        offsetY: g,\n        rotateClockwise: p,\n        angle: d,\n        rasterizedImage: P,\n        anchorX: u,\n        anchorY: y\n      };\n      c.push(x);\n    }\n\n    t.width = o - i, t.height = n - s;\n    const l = -i,\n          m = n;\n\n    for (let f = 0; f < c.length; f++) {\n      const e = c[f],\n            t = this._imageDataToCanvas(e.rasterizedImage),\n            i = e.rasterizedImage.width,\n            s = e.rasterizedImage.height,\n            o = l - i * (.5 + e.anchorX),\n            n = m - s * (.5 - e.anchorY);\n\n      if (e.angle) {\n        const i = (360 - e.angle) * Math.PI / 180;\n        r.save(), r.translate(a(e.offsetX), -a(e.offsetY)), r.translate(l, m), r.rotate(i), r.translate(-l, -m), r.drawImage(t, o, n), r.restore();\n      } else r.drawImage(t, o + a(e.offsetX), n - a(e.offsetY));\n    }\n\n    const h = new d({\n      x: l / t.width - .5,\n      y: m / t.height - .5\n    });\n    return {\n      imageData: 0 !== t.width && 0 !== t.height ? r.getImageData(0, 0, t.width, t.height) : r.createImageData(1, 1),\n      anchorPosition: h\n    };\n  }\n\n  _imageDataToCanvas(e) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const t = this._imageDataCanvas,\n          r = t.getContext(\"2d\");\n    return t.width = e.width, t.height = e.height, r.putImageData(e, 0, 0), t;\n  }\n\n  _imageTo32Array(t, r, a, i) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const s = this._imageDataCanvas,\n          o = s.getContext(\"2d\");\n\n    if (s.width = r, s.height = a, o.drawImage(t, 0, 0, r, a), i) {\n      o.save();\n      const s = new e(i);\n      o.fillStyle = s.toHex(), o.globalCompositeOperation = \"multiply\", o.fillRect(0, 0, r, a), o.globalCompositeOperation = \"destination-atop\", o.drawImage(t, 0, 0, r, a), o.restore();\n    }\n\n    return new Uint32Array(o.getImageData(0, 0, r, a).data.buffer);\n  }\n\n  _getRasterizedResource(e, t, r, a, s, o) {\n    let n,\n        c,\n        l,\n        m,\n        h = null,\n        f = null;\n\n    if (\"esriGeometryPolyline\" === r || \"esriGeometryPolygon\" === r) {\n      const m = a && a.style ? a.style : M.Legend,\n            g = \"esriGeometryPolyline\" === r ? I.stroke[m] : I.fill[m];\n\n      if (\"line\" === e.type) {\n        if (\"CIMSolidStroke\" !== e.cim.type) {\n          if (\"CIMPictureStroke\" === e.cim.type) {\n            const r = u(e.width, t, s, o),\n                  a = u(e.color, t, s, o),\n                  {\n              image: i,\n              width: n,\n              height: c\n            } = this._getPictureResource(e, r, a);\n\n            return this._rasterizePictureResource(e, i, n, c, g, r);\n          }\n\n          return null;\n        }\n\n        ({\n          analyzedCIM: n,\n          hash: l\n        } = w(e, t, s, o)), c = this._embedCIMLayerInVectorMarker(n, g);\n      } else if (\"marker\" === e.type) {\n        if (\"CIMPictureMarker\" === e.cim.type) {\n          const r = u(e.size, t, s, o),\n                a = u(e.color, t, s, o),\n                {\n            image: i,\n            width: n,\n            height: c\n          } = this._getPictureResource(e, r, a);\n\n          return this._rasterizePictureResource(e, i, n, c, g, r);\n        }\n\n        if (\"CIMVectorMarker\" !== e.cim.type) return null;\n        e.cim.offsetX = u(e.offsetX, t, s, o), e.cim.offsetY = u(e.offsetY, t, s, o), e.cim.rotation = u(e.rotation, t, s, o), e.cim.markerPlacement = e.markerPlacement, ({\n          analyzedCIM: n\n        } = w(e, t, s, o)), l = i(JSON.stringify(n)).toString(), c = this._embedCIMLayerInVectorMarker(n, g), h = u(e.size, t, s, o), f = e.path;\n      } else {\n        if (\"text\" === e.type) return null;\n\n        if (\"fill\" === e.type) {\n          if (\"CIMHatchFill\" === e.cim.type || \"CIMVectorMarker\" === e.cim.type || \"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) {\n            const r = e.cim.size || e.cim.height;\n            let a, i, c;\n            if (\"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) ({\n              image: a,\n              width: i,\n              height: c\n            } = this._getPictureResource(e, r, u(e.color, t, s, o)));else {\n              ({\n                analyzedCIM: n,\n                hash: l\n              } = w(e, t, s, o));\n\n              const m = this._rasterizer.rasterizeJSONResource({\n                cim: n,\n                type: e.type,\n                url: e.url,\n                mosaicHash: l,\n                size: r,\n                path: f\n              }, 1, this._avoidSDF);\n\n              a = m.image, i = m.size[0], c = m.size[1];\n            }\n            return this._rasterizePictureResource(e, a, i, c, g, null);\n          }\n\n          if (\"CIMSolidFill\" !== e.cim.type) return null;\n          ({\n            analyzedCIM: n,\n            hash: l\n          } = w(e, t, s, o)), c = this._embedCIMLayerInVectorMarker(n, g);\n        }\n      }\n    } else {\n      if (\"text\" === e.type) return m = this._rasterizeTextResource(e, t, a, s, o), m;\n      ({\n        analyzedCIM: n,\n        hash: l\n      } = w(e, t, s, o));\n      const r = C(a, e, null);\n\n      if (\"CIMPictureMarker\" === e.cim.type) {\n        const a = u(e.size, t, s, o) * r,\n              {\n          image: i,\n          width: n,\n          height: c\n        } = this._getPictureResource(e, a, u(e.color, t, s, o));\n\n        return m = {\n          image: i,\n          size: [n, c],\n          sdf: !1,\n          simplePattern: !1,\n          anchorX: e.anchorPoint ? e.anchorPoint.x : 0,\n          anchorY: e.anchorPoint ? e.anchorPoint.y : 0\n        }, m;\n      }\n\n      p(n, r, {\n        preserveOutlineWidth: !1\n      }), c = n;\n    }\n\n    l += r, a && (l += JSON.stringify(a));\n    const g = this._resourceCache;\n    return g.has(l) ? g.get(l) : (m = this._rasterizer.rasterizeJSONResource({\n      cim: c,\n      type: e.type,\n      url: e.url,\n      mosaicHash: l,\n      size: h,\n      path: f\n    }, window.devicePixelRatio || 1, this._avoidSDF), g.set(l, m), m);\n  }\n\n  _rasterizeTextResource(e, t, r, a, i) {\n    const s = C(r, e, null),\n          o = u(e.text, t, a, i);\n    if (!o || 0 === o.length) return null;\n    const n = u(e.fontName, t, a, i),\n          c = u(e.style, t, a, i),\n          l = u(e.weight, t, a, i),\n          m = u(e.decoration, t, a, i),\n          h = u(e.size, t, a, i) * s,\n          f = u(e.horizontalAlignment, t, a, i),\n          g = u(e.verticalAlignment, t, a, i),\n          p = y(u(e.color, t, a, i)),\n          d = y(u(e.outlineColor, t, a, i)),\n          M = {\n      color: p,\n      size: h,\n      horizontalAlignment: f,\n      verticalAlignment: g,\n      font: {\n        family: n,\n        style: c,\n        weight: l,\n        decoration: m\n      },\n      halo: {\n        size: u(e.outlineSize, t, a, i) || 0,\n        color: d,\n        style: c\n      },\n      pixelRatio: 1,\n      premultiplyColors: !this._avoidSDF\n    };\n    return this._textRasterizer.rasterizeText(o, M);\n  }\n\n  _rasterizePictureResource(e, t, r, i, s, c) {\n    const l = document.createElement(\"canvas\"),\n          m = l.getContext(\"2d\");\n    l.height = a(Math.max(s.frame.ymax - s.frame.ymin, c)), l.width = a(s.frame.xmax - s.frame.xmin);\n    const h = m.createImageData(r, i);\n    h.data.set(new Uint8ClampedArray(t.buffer));\n\n    const f = this._imageDataToCanvas(h),\n          g = m.createPattern(f, \"repeat\"),\n          u = Math.cos((-e.cim.rotation || 0) * Math.PI / 180),\n          y = Math.sin((-e.cim.rotation || 0) * Math.PI / 180);\n\n    g.setTransform({\n      m11: u,\n      m12: y,\n      m21: -y,\n      m22: u,\n      m41: a(e.cim.offsetX) || 0,\n      m42: a(e.cim.offsetY) || 0\n    });\n    const p = s.canvasPaths;\n    let d, M, C;\n    o(p) ? (d = p.rings, m.fillStyle = g, M = m.fill, C = [\"evenodd\"]) : n(p) && (d = p.paths, m.strokeStyle = g, m.lineWidth = c, M = m.stroke, d[0][0][1] = l.height / 2, d[0][1][1] = l.height / 2), m.beginPath();\n\n    for (const o of d) {\n      const e = o ? o.length : 0;\n\n      if (e > 1) {\n        let t = o[0];\n        m.moveTo(a(t[0]), a(t[1]));\n\n        for (let r = 1; r < e; ++r) t = o[r], m.lineTo(a(t[0]), a(t[1]));\n\n        m.closePath();\n      }\n    }\n\n    M.apply(m, C);\n    const I = m.getImageData(0, 0, l.width, l.height),\n          z = new Uint8Array(I.data);\n    return {\n      size: [l.width, l.height],\n      image: new Uint32Array(z.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: 0,\n      anchorY: 0\n    };\n  }\n\n  _getPictureResource(e, t, r) {\n    const i = this._pictureMarkerCache.get(e.materialHash);\n\n    if (!i) return null;\n    const s = i.height / i.width,\n          o = t ? s > 1 ? a(t) : a(t) / s : i.width,\n          n = t ? s > 1 ? a(t) * s : a(t) : i.height;\n    return {\n      image: this._imageTo32Array(i, o, n, r),\n      width: o,\n      height: n\n    };\n  }\n\n  _embedCIMLayerInVectorMarker(e, t) {\n    const r = o(t.geometry) ? \"CIMPolygonSymbol\" : \"CIMLineSymbol\",\n          a = t.frame;\n    return {\n      type: \"CIMVectorMarker\",\n      frame: a,\n      size: a.ymax - a.ymin,\n      markerGraphics: [{\n        type: \"CIMMarkerGraphic\",\n        geometry: t.geometry,\n        symbol: {\n          type: r,\n          symbolLayers: [e]\n        }\n      }]\n    };\n  }\n\n}\n\nfunction P(e) {\n  return (e ? Object.keys(e) : []).map(t => ({\n    name: t,\n    alias: t,\n    type: \"string\" == typeof e[t] ? \"esriFieldTypeString\" : \"esriFieldTypeDouble\"\n  }));\n}\n\nfunction x(e) {\n  if (!(e && e.data && e.data.symbol)) return null;\n\n  switch (e.data.symbol.type) {\n    case \"CIMPointSymbol\":\n    case \"CIMTextSymbol\":\n      return \"esriGeometryPoint\";\n\n    case \"CIMLineSymbol\":\n      return \"esriGeometryPolyline\";\n\n    case \"CIMPolygonSymbol\":\n      return \"esriGeometryPolygon\";\n\n    default:\n      return null;\n  }\n}\n\nfunction w(e, t, r, a) {\n  let i, s;\n\n  if (\"function\" == typeof e.materialHash) {\n    i = (0, e.materialHash)(t, r, a), s = l(e.cim, e.materialOverrides);\n  } else i = e.materialHash, s = e.cim;\n\n  return {\n    analyzedCIM: s,\n    hash: i\n  };\n}\n\nexport { z as CIMSymbolRasterizer, M as GeometryStyle };","map":{"version":3,"names":["e","t","throwIfAborted","r","pt2px","a","numericHash","i","getJsonType","s","isPolygon","o","isPolyline","n","analyzeCIMSymbol","c","analyzeCIMResource","l","m","h","f","createLabelOverrideFunction","g","evaluateValueOrFunction","u","colorToArray","y","scaleCIMMarker","p","Symbol3DAnchorPosition2D","d","M","Legend","Preview","C","targetSize","Math","max","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","I","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","z","constructor","_spatialReference","_avoidSDF","_resourceCache","Map","_pictureMarkerCache","_textRasterizer","_cimResourceManager","_rasterizer","rasterizeCIMSymbolAsync","centroid","x","P","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","data","cim","type","push","_fetchPictureMarkerResource","text","includes","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","anchorX","anchorY","offsetX","offsetY","rotation","rotateClockwise","angle","horizontalAlignment","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","document","createElement","getContext","length","size","sin","PI","cos","min","createImageData","Uint8ClampedArray","image","buffer","rasterizedImage","width","height","_imageDataToCanvas","save","translate","rotate","drawImage","restore","imageData","getImageData","anchorPosition","_imageDataCanvas","putImageData","_imageTo32Array","fillStyle","toHex","globalCompositeOperation","fillRect","Uint32Array","style","color","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","w","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","toString","path","rasterizeJSONResource","mosaicHash","_rasterizeTextResource","sdf","simplePattern","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","weight","decoration","outlineColor","font","family","halo","outlineSize","pixelRatio","premultiplyColors","rasterizeText","createPattern","setTransform","m11","m12","m21","m22","m41","m42","strokeStyle","lineWidth","beginPath","moveTo","lineTo","closePath","apply","Uint8Array","markerGraphics","symbol","symbolLayers","Object","keys","map","name","alias","materialOverrides","CIMSymbolRasterizer","GeometryStyle"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import{throwIfAborted as r}from\"../../core/promiseUtils.js\";import{pt2px as a}from\"../../core/screenUtils.js\";import{numericHash as i}from\"../../core/string.js\";import{getJsonType as s,isPolygon as o,isPolyline as n}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as c,analyzeCIMResource as l}from\"./cimAnalyzer.js\";import m from\"./CIMResourceManager.js\";import h from\"./Rasterizer.js\";import f from\"./TextRasterizer.js\";import{createLabelOverrideFunction as g,evaluateValueOrFunction as u,colorToArray as y}from\"./utils.js\";import{scaleCIMMarker as p}from\"../support/cimSymbolUtils.js\";import{Symbol3DAnchorPosition2D as d}from\"../support/Symbol3DAnchorPosition2D.js\";var M;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(M||(M={}));const C=(e,t,r)=>{if(e&&e.targetSize){let i;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);i=e.targetSize/a(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},I={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class z{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new f,this._cimResourceManager=new m,this._rasterizer=new h(this._cimResourceManager)}async rasterizeCIMSymbolAsync(e,t,r,a,i,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":s(t.geometry):null)||x(e);const l=await this.analyzeCIMSymbol(e,t?P(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,i,o,n)}async analyzeCIMSymbol(e,t,a,i,s){const o=[],n=t?{geometryType:i,spatialReference:this._spatialReference,fields:t}:null;let l;await c(e.data,n,this._cimResourceManager,o,this._avoidSDF),r(s);for(const r of o)\"CIMPictureMarker\"!==r.cim.type&&\"CIMPictureFill\"!==r.cim.type&&\"CIMPictureStroke\"!==r.cim.type||(l||(l=[]),l.push(this._fetchPictureMarkerResource(r,s))),a&&\"text\"===r.type&&\"string\"==typeof r.text&&r.text.includes(\"[\")&&(r.text=g(a,r.text,r.cim.textCase));return l&&await Promise.all(l),o}async _fetchPictureMarkerResource(e,r){const a=e.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await t(e.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,f=0,g=0;if(\"esriGeometryPoint\"===r){const e=C(a,n,null);if(f=u(n.offsetX,t,i,s)*e||0,g=u(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=u(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=u(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:f,offsetY:g,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,u=t.anchorX,y=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=a(h)-m[0]*(.5+u),C=a(g)-m[1]*(.5+y),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=r.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:u,anchorY:y};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;r.save(),r.translate(a(e.offsetX),-a(e.offsetY)),r.translate(l,m),r.rotate(i),r.translate(-l,-m),r.drawImage(t,o,n),r.restore()}else r.drawImage(t,o+a(e.offsetX),n-a(e.offsetY))}const h=new d({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(t,r,a,i){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const s=this._imageDataCanvas,o=s.getContext(\"2d\");if(s.width=r,s.height=a,o.drawImage(t,0,0,r,a),i){o.save();const s=new e(i);o.fillStyle=s.toHex(),o.globalCompositeOperation=\"multiply\",o.fillRect(0,0,r,a),o.globalCompositeOperation=\"destination-atop\",o.drawImage(t,0,0,r,a),o.restore()}return new Uint32Array(o.getImageData(0,0,r,a).data.buffer)}_getRasterizedResource(e,t,r,a,s,o){let n,c,l,m,h=null,f=null;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=a&&a.style?a.style:M.Legend,g=\"esriGeometryPolyline\"===r?I.stroke[m]:I.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=u(e.width,t,s,o),a=u(e.color,t,s,o),{image:i,width:n,height:c}=this._getPictureResource(e,r,a);return this._rasterizePictureResource(e,i,n,c,g,r)}return null}({analyzedCIM:n,hash:l}=w(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,g)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type){const r=u(e.size,t,s,o),a=u(e.color,t,s,o),{image:i,width:n,height:c}=this._getPictureResource(e,r,a);return this._rasterizePictureResource(e,i,n,c,g,r)}if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=u(e.offsetX,t,s,o),e.cim.offsetY=u(e.offsetY,t,s,o),e.cim.rotation=u(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=w(e,t,s,o)),l=i(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,g),h=u(e.size,t,s,o),f=e.path}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r,u(e.color,t,s,o)));else{({analyzedCIM:n,hash:l}=w(e,t,s,o));const m=this._rasterizer.rasterizeJSONResource({cim:n,type:e.type,url:e.url,mosaicHash:l,size:r,path:f},1,this._avoidSDF);a=m.image,i=m.size[0],c=m.size[1]}return this._rasterizePictureResource(e,a,i,c,g,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=w(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,g)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,a,s,o),m;({analyzedCIM:n,hash:l}=w(e,t,s,o));const r=C(a,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=u(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a,u(e.color,t,s,o));return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}p(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,a&&(l+=JSON.stringify(a));const g=this._resourceCache;return g.has(l)?g.get(l):(m=this._rasterizer.rasterizeJSONResource({cim:c,type:e.type,url:e.url,mosaicHash:l,size:h,path:f},window.devicePixelRatio||1,this._avoidSDF),g.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=C(r,e,null),o=u(e.text,t,a,i);if(!o||0===o.length)return null;const n=u(e.fontName,t,a,i),c=u(e.style,t,a,i),l=u(e.weight,t,a,i),m=u(e.decoration,t,a,i),h=u(e.size,t,a,i)*s,f=u(e.horizontalAlignment,t,a,i),g=u(e.verticalAlignment,t,a,i),p=y(u(e.color,t,a,i)),d=y(u(e.outlineColor,t,a,i)),M={color:p,size:h,horizontalAlignment:f,verticalAlignment:g,font:{family:n,style:c,weight:l,decoration:m},halo:{size:u(e.outlineSize,t,a,i)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,M)}_rasterizePictureResource(e,t,r,i,s,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=a(Math.max(s.frame.ymax-s.frame.ymin,c)),l.width=a(s.frame.xmax-s.frame.xmin);const h=m.createImageData(r,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),u=Math.cos((-e.cim.rotation||0)*Math.PI/180),y=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:u,m12:y,m21:-y,m22:u,m41:a(e.cim.offsetX)||0,m42:a(e.cim.offsetY)||0});const p=s.canvasPaths;let d,M,C;o(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):n(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const o of d){const e=o?o.length:0;if(e>1){let t=o[0];m.moveTo(a(t[0]),a(t[1]));for(let r=1;r<e;++r)t=o[r],m.lineTo(a(t[0]),a(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t,r){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const s=i.height/i.width,o=t?s>1?a(t):a(t)/s:i.width,n=t?s>1?a(t)*s:a(t):i.height;return{image:this._imageTo32Array(i,o,n,r),width:o,height:n}}_embedCIMLayerInVectorMarker(e,t){const r=o(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\",a=t.frame;return{type:\"CIMVectorMarker\",frame:a,size:a.ymax-a.ymin,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function P(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function x(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function w(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=l(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{z as CIMSymbolRasterizer,M as GeometryStyle};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}