{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport e from \"./Analysis.js\";\nimport r from \"./LineOfSightAnalysisObserver.js\";\nimport o from \"./LineOfSightAnalysisTarget.js\";\nimport s from \"../core/Collection.js\";\nimport { referenceSetter as i, castForReferenceSetter as n } from \"../core/collectionUtils.js\";\nimport { isNone as p, isSome as l, applySome as a, unwrap as c } from \"../core/maybe.js\";\nimport { watch as u, syncAndInitial as m } from \"../core/reactiveUtils.js\";\nimport { property as g } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as y } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { projectOrLoad as f } from \"../geometry/projection.js\";\nimport { fromValues as h, expandWithVec3 as d, toExtent as v } from \"../geometry/support/aaBoundingBox.js\";\nimport { getGeometryEffectiveElevationMode as j } from \"../support/elevationInfoUtils.js\";\nconst b = s.ofType(o);\nlet x = class extends e {\n  constructor(t) {\n    super(t), this.type = \"line-of-sight\", this.observer = null, this.extent = null;\n  }\n\n  initialize() {\n    this.addHandles(u(() => this._computeExtent(), t => {\n      (p(t) || p(t.pending)) && this._set(\"extent\", l(t) ? t.extent : null);\n    }, m));\n  }\n\n  get targets() {\n    return this._get(\"targets\") || new b();\n  }\n\n  set targets(t) {\n    this._set(\"targets\", i(t, this.targets, b));\n  }\n\n  get spatialReference() {\n    return l(this.observer) && l(this.observer.position) ? this.observer.position.spatialReference : null;\n  }\n\n  get requiredPropertiesForEditing() {\n    return [a(this.observer, t => t.position)];\n  }\n\n  async waitComputeExtent() {\n    const t = this._computeExtent();\n\n    return l(t) ? c(t.pending) : null;\n  }\n\n  _computeExtent() {\n    const t = this.spatialReference;\n    if (p(this.observer) || p(this.observer.position) || p(t)) return null;\n\n    const e = t => \"absolute-height\" === j(t.position, t.elevationInfo),\n          r = this.observer.position,\n          o = h(r.x, r.y, r.z, r.x, r.y, r.z);\n\n    for (const i of this.targets) if (l(i.position)) {\n      const e = f(i.position, t);\n      if (l(e.pending)) return {\n        pending: e.pending,\n        extent: null\n      };\n\n      if (l(e.geometry)) {\n        const {\n          x: t,\n          y: r,\n          z: s\n        } = e.geometry;\n        d(o, [t, r, s]);\n      }\n    }\n\n    const s = v(o, t);\n    return e(this.observer) && this.targets.every(e) || (s.zmin = null, s.zmax = null), {\n      pending: null,\n      extent: s\n    };\n  }\n\n  clear() {\n    this.observer = null, this.targets.removeAll();\n  }\n\n};\nt([g({\n  type: [\"line-of-sight\"]\n})], x.prototype, \"type\", void 0), t([g({\n  type: r,\n  json: {\n    read: !0,\n    write: !0\n  }\n})], x.prototype, \"observer\", void 0), t([g({\n  cast: n,\n  type: b,\n  nonNullable: !0,\n  json: {\n    read: !0,\n    write: !0\n  }\n})], x.prototype, \"targets\", null), t([g({\n  value: null,\n  readOnly: !0\n})], x.prototype, \"extent\", void 0), t([g({\n  readOnly: !0\n})], x.prototype, \"spatialReference\", null), t([g({\n  readOnly: !0\n})], x.prototype, \"requiredPropertiesForEditing\", null), x = t([y(\"esri.analysis.LineOfSightAnalysis\")], x);\nconst O = x;\nexport { O as default };","map":{"version":3,"names":["_","t","e","r","o","s","referenceSetter","i","castForReferenceSetter","n","isNone","p","isSome","l","applySome","a","unwrap","c","watch","u","syncAndInitial","m","property","g","subclass","y","projectOrLoad","f","fromValues","h","expandWithVec3","d","toExtent","v","getGeometryEffectiveElevationMode","j","b","ofType","x","constructor","type","observer","extent","initialize","addHandles","_computeExtent","pending","_set","targets","_get","spatialReference","position","requiredPropertiesForEditing","waitComputeExtent","elevationInfo","z","geometry","every","zmin","zmax","clear","removeAll","prototype","json","read","write","cast","nonNullable","value","readOnly","O","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"./Analysis.js\";import r from\"./LineOfSightAnalysisObserver.js\";import o from\"./LineOfSightAnalysisTarget.js\";import s from\"../core/Collection.js\";import{referenceSetter as i,castForReferenceSetter as n}from\"../core/collectionUtils.js\";import{isNone as p,isSome as l,applySome as a,unwrap as c}from\"../core/maybe.js\";import{watch as u,syncAndInitial as m}from\"../core/reactiveUtils.js\";import{property as g}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{projectOrLoad as f}from\"../geometry/projection.js\";import{fromValues as h,expandWithVec3 as d,toExtent as v}from\"../geometry/support/aaBoundingBox.js\";import{getGeometryEffectiveElevationMode as j}from\"../support/elevationInfoUtils.js\";const b=s.ofType(o);let x=class extends e{constructor(t){super(t),this.type=\"line-of-sight\",this.observer=null,this.extent=null}initialize(){this.addHandles(u((()=>this._computeExtent()),(t=>{(p(t)||p(t.pending))&&this._set(\"extent\",l(t)?t.extent:null)}),m))}get targets(){return this._get(\"targets\")||new b}set targets(t){this._set(\"targets\",i(t,this.targets,b))}get spatialReference(){return l(this.observer)&&l(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[a(this.observer,(t=>t.position))]}async waitComputeExtent(){const t=this._computeExtent();return l(t)?c(t.pending):null}_computeExtent(){const t=this.spatialReference;if(p(this.observer)||p(this.observer.position)||p(t))return null;const e=t=>\"absolute-height\"===j(t.position,t.elevationInfo),r=this.observer.position,o=h(r.x,r.y,r.z,r.x,r.y,r.z);for(const i of this.targets)if(l(i.position)){const e=f(i.position,t);if(l(e.pending))return{pending:e.pending,extent:null};if(l(e.geometry)){const{x:t,y:r,z:s}=e.geometry;d(o,[t,r,s])}}const s=v(o,t);return e(this.observer)&&this.targets.every(e)||(s.zmin=null,s.zmax=null),{pending:null,extent:s}}clear(){this.observer=null,this.targets.removeAll()}};t([g({type:[\"line-of-sight\"]})],x.prototype,\"type\",void 0),t([g({type:r,json:{read:!0,write:!0}})],x.prototype,\"observer\",void 0),t([g({cast:n,type:b,nonNullable:!0,json:{read:!0,write:!0}})],x.prototype,\"targets\",null),t([g({value:null,readOnly:!0})],x.prototype,\"extent\",void 0),t([g({readOnly:!0})],x.prototype,\"spatialReference\",null),t([g({readOnly:!0})],x.prototype,\"requiredPropertiesForEditing\",null),x=t([y(\"esri.analysis.LineOfSightAnalysis\")],x);const O=x;export{O as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}