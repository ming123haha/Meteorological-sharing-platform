{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport t from \"../../../../../core/Logger.js\";\nimport { isSome as e, unwrapOrThrow as s, isNone as r } from \"../../../../../core/maybe.js\";\nimport { throwIfAborted as o, after as a } from \"../../../../../core/promiseUtils.js\";\nimport n from \"../../../../../core/RandomLCG.js\";\nimport { BaseFeatureSource as i } from \"./BaseFeatureSource.js\";\nimport { FeatureSetReaderIndirect as d } from \"../support/FeatureSetReaderPBFIndirect.js\";\nimport { UpdateToken as u } from \"../support/UpdateToken.js\";\n\nfunction h(t, e, s) {\n  const r = t.getXHydrated(),\n        o = t.getYHydrated(),\n        a = e.getColumnForX(r),\n        n = Math.floor(e.normalizeCol(a));\n  return `${s}/${Math.floor(e.getRowForY(o))}/${n}`;\n}\n\nfunction l(t, e) {\n  if (r(t)) return null;\n  const s = e.transform,\n        o = t.getQuantizationTransform();\n\n  if (r(o)) {\n    const [e, r] = s.scale,\n          [o, a] = s.translate,\n          n = -o / e,\n          i = 1 / e,\n          d = a / r,\n          u = 1 / -r;\n    return t.transform(n, d, i, u);\n  }\n\n  const [a, n] = o.scale,\n        [i, d] = o.translate,\n        [u, h] = s.scale,\n        [l, c] = s.translate,\n        g = a / u,\n        _ = (i - l) / u,\n        p = n / h,\n        f = (-d + c) / h;\n\n  return t.transform(_, f, g, p);\n}\n\nclass c extends i {\n  constructor(t) {\n    super(t), this.mode = \"snapshot\", this._loading = !0, this._controller = new AbortController(), this._downloadPromise = null, this._didSendEnd = !1, this._queries = new Array(), this._invalidated = !1, this._hasAggregates = !1, this._random = new n(1e3), this._store = t.store, this._markedIdsBufId = this._store.storage.createBitset();\n  }\n\n  destroy() {\n    super.destroy(), this._controller.abort();\n  }\n\n  get loading() {\n    return this._loading;\n  }\n\n  get _signal() {\n    return this._controller.signal;\n  }\n\n  update(t, s) {\n    super.update(t, s), null == this._featureCount && (this._featureCount = s.initialFeatureCount), e(s.changedFeatureCount) && (this._featureCount = s.changedFeatureCount), this._hasAggregates = t.targets.aggregate;\n  }\n\n  async resend(t = !1) {\n    if (await this._downloadPromise, this._invalidated || t) {\n      const t = s(this._featureCount, \"Expected featureCount to be defined\");\n      return this._invalidated = !1, this._subscriptions.forEach(t => t.clear()), this._downloadPromise = this._download(t), void (await this._downloadPromise);\n    }\n\n    const e = this._queries.map(({\n      query: t,\n      reader: e\n    }) => this._sendPatchQuery(t, e));\n\n    await Promise.all(e), this._subscriptions.forEach(t => {\n      t.requests.done.forEach(t => this._onMessage(t.message));\n    });\n  }\n\n  async refresh(t, e) {\n    e && (this._featureCount = e.featureCount), await this.resend(!0);\n  }\n\n  async _sendPatchQuery(t, s) {\n    const r = e(t.outFields) ? t.outFields : [],\n          a = this._queryInfo.outFields,\n          n = a.filter(t => !r.includes(t));\n    if (!n.length) return;\n    const i = t.clone(),\n          d = this._signal;\n    i.returnGeometry = !1, i.returnCentroid = !1, i.outFields = n, t.outFields = a;\n    const u = await this._queue.push({\n      query: i,\n      depth: 0,\n      signal: d\n    });\n    o({\n      signal: d\n    }), s.joinAttributes(u);\n  }\n\n  async _fetchDataTile(t) {\n    if (!this._downloadPromise) {\n      const t = s(this._featureCount, \"Expected featureCount to be defined\");\n      this._downloadPromise = this._download(t);\n    }\n\n    const e = this._store.search(t),\n          r = this._subscriptions.get(t.key.id),\n          o = e.length - 1;\n\n    for (let s = 0; s < o; s++) {\n      const o = l(e[s], t),\n            n = {\n        type: \"append\",\n        id: t.id,\n        addOrUpdate: o,\n        end: !1,\n        status: u.empty()\n      };\n      r.add({\n        query: null,\n        message: n\n      }), this._hasAggregates || (await a(1)), this._onMessage(n);\n    }\n\n    const n = l(o >= 0 ? e[o] : null, t),\n          i = this._didSendEnd,\n          d = {\n      type: \"append\",\n      id: t.id,\n      addOrUpdate: n,\n      end: i,\n      status: u.empty()\n    };\n    r.add({\n      query: null,\n      message: d\n    }), this._onMessage(d);\n  }\n\n  async _download(e) {\n    try {\n      await this.whenInitialized();\n\n      const t = this._store.storage.getBitset(this._markedIdsBufId),\n            s = new Set();\n\n      t.clear();\n      const r = Math.ceil(e / this.pageSize),\n            o = Array.from({\n        length: r\n      }, (t, e) => e).sort((t, e) => this._random.getInt() - this._random.getInt()).map(e => this._downloadPage(e, t, s));\n      await Promise.all(o), this._store.sweepFeatures(t, this._store.storage), this._store.sweepFeatureSets(s);\n    } catch (s) {\n      t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\", \"Encountered and error when downloading feature snapshot\", s);\n    }\n\n    this._sendEnd(), this._loading = !1;\n  }\n\n  async _downloadPage(t, s, r) {\n    const a = this.pageSize,\n          n = {\n      start: t * a,\n      num: a,\n      cacheHint: !0\n    };\n    e(this.maxRecordCountFactor) && (n.maxRecordCountFactor = this.maxRecordCountFactor);\n    const i = this.createQuery(n),\n          d = this._signal,\n          u = await this._queue.push({\n      query: i,\n      depth: t,\n      signal: d\n    });\n    o({\n      signal: d\n    }), this._queries.push({\n      query: i,\n      reader: u\n    }), this._store.insert(u), r.add(u.instance);\n    const h = u.getCursor();\n\n    for (; h.next();) s.set(h.getDisplayId());\n\n    this._send(u);\n  }\n\n  _send(t) {\n    if (!this._subscriptions.size) return;\n    let s = null;\n    const o = new Map(),\n          a = new Set(),\n          n = new Map();\n\n    this._subscriptions.forEach(t => {\n      const e = t.tile;\n      o.set(e.key.id, null), s = e.tileInfoView, a.add(e.level);\n      const {\n        row: r,\n        col: i\n      } = e.key,\n            d = `${e.level}/${r}/${i}`,\n            u = n.get(d) ?? [];\n      u.push(t), n.set(d, u);\n    });\n\n    for (const e of a) {\n      const a = s.getLODInfoAt(e),\n            i = t.getCursor();\n\n      for (; i.next();) {\n        const t = h(i, a, e),\n              s = i.getIndex();\n        if (n.has(t)) for (const e of n.get(t)) {\n          const t = e.tile.id;\n          let a = o.get(t);\n          r(a) && (a = [], o.set(t, a)), a.push(s);\n        }\n      }\n    }\n\n    o.forEach((s, r) => {\n      if (e(s)) {\n        const e = this._subscriptions.get(r),\n              o = {\n          type: \"append\",\n          id: r,\n          addOrUpdate: l(d.from(t, s), e.tile),\n          end: !1,\n          status: u.empty()\n        };\n\n        e.add({\n          query: null,\n          message: o\n        }), this._onMessage(o);\n      }\n    });\n  }\n\n  _sendEnd() {\n    this._subscriptions.forEach(t => {\n      const e = {\n        type: \"append\",\n        id: t.tile.id,\n        addOrUpdate: null,\n        end: !0,\n        status: u.empty()\n      };\n      t.add({\n        query: null,\n        message: e\n      }), this._onMessage(e);\n    }), this._didSendEnd = !0;\n  }\n\n}\n\nexport { c as SnapshotFeatureSource };","map":{"version":3,"names":["t","isSome","e","unwrapOrThrow","s","isNone","r","throwIfAborted","o","after","a","n","BaseFeatureSource","i","FeatureSetReaderIndirect","d","UpdateToken","u","h","getXHydrated","getYHydrated","getColumnForX","Math","floor","normalizeCol","getRowForY","l","transform","getQuantizationTransform","scale","translate","c","g","_","p","f","constructor","mode","_loading","_controller","AbortController","_downloadPromise","_didSendEnd","_queries","Array","_invalidated","_hasAggregates","_random","_store","store","_markedIdsBufId","storage","createBitset","destroy","abort","loading","_signal","signal","update","_featureCount","initialFeatureCount","changedFeatureCount","targets","aggregate","resend","_subscriptions","forEach","clear","_download","map","query","reader","_sendPatchQuery","Promise","all","requests","done","_onMessage","message","refresh","featureCount","outFields","_queryInfo","filter","includes","length","clone","returnGeometry","returnCentroid","_queue","push","depth","joinAttributes","_fetchDataTile","search","get","key","id","type","addOrUpdate","end","status","empty","add","whenInitialized","getBitset","Set","ceil","pageSize","from","sort","getInt","_downloadPage","sweepFeatures","sweepFeatureSets","getLogger","error","_sendEnd","start","num","cacheHint","maxRecordCountFactor","createQuery","insert","instance","getCursor","next","set","getDisplayId","_send","size","Map","tile","tileInfoView","level","row","col","getLODInfoAt","getIndex","has","SnapshotFeatureSource"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/features/sources/SnapshotFeatureSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{isSome as e,unwrapOrThrow as s,isNone as r}from\"../../../../../core/maybe.js\";import{throwIfAborted as o,after as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../core/RandomLCG.js\";import{BaseFeatureSource as i}from\"./BaseFeatureSource.js\";import{FeatureSetReaderIndirect as d}from\"../support/FeatureSetReaderPBFIndirect.js\";import{UpdateToken as u}from\"../support/UpdateToken.js\";function h(t,e,s){const r=t.getXHydrated(),o=t.getYHydrated(),a=e.getColumnForX(r),n=Math.floor(e.normalizeCol(a));return`${s}/${Math.floor(e.getRowForY(o))}/${n}`}function l(t,e){if(r(t))return null;const s=e.transform,o=t.getQuantizationTransform();if(r(o)){const[e,r]=s.scale,[o,a]=s.translate,n=-o/e,i=1/e,d=a/r,u=1/-r;return t.transform(n,d,i,u)}const[a,n]=o.scale,[i,d]=o.translate,[u,h]=s.scale,[l,c]=s.translate,g=a/u,_=(i-l)/u,p=n/h,f=(-d+c)/h;return t.transform(_,f,g,p)}class c extends i{constructor(t){super(t),this.mode=\"snapshot\",this._loading=!0,this._controller=new AbortController,this._downloadPromise=null,this._didSendEnd=!1,this._queries=new Array,this._invalidated=!1,this._hasAggregates=!1,this._random=new n(1e3),this._store=t.store,this._markedIdsBufId=this._store.storage.createBitset()}destroy(){super.destroy(),this._controller.abort()}get loading(){return this._loading}get _signal(){return this._controller.signal}update(t,s){super.update(t,s),null==this._featureCount&&(this._featureCount=s.initialFeatureCount),e(s.changedFeatureCount)&&(this._featureCount=s.changedFeatureCount),this._hasAggregates=t.targets.aggregate}async resend(t=!1){if(await this._downloadPromise,this._invalidated||t){const t=s(this._featureCount,\"Expected featureCount to be defined\");return this._invalidated=!1,this._subscriptions.forEach((t=>t.clear())),this._downloadPromise=this._download(t),void await this._downloadPromise}const e=this._queries.map((({query:t,reader:e})=>this._sendPatchQuery(t,e)));await Promise.all(e),this._subscriptions.forEach((t=>{t.requests.done.forEach((t=>this._onMessage(t.message)))}))}async refresh(t,e){e&&(this._featureCount=e.featureCount),await this.resend(!0)}async _sendPatchQuery(t,s){const r=e(t.outFields)?t.outFields:[],a=this._queryInfo.outFields,n=a.filter((t=>!r.includes(t)));if(!n.length)return;const i=t.clone(),d=this._signal;i.returnGeometry=!1,i.returnCentroid=!1,i.outFields=n,t.outFields=a;const u=await this._queue.push({query:i,depth:0,signal:d});o({signal:d}),s.joinAttributes(u)}async _fetchDataTile(t){if(!this._downloadPromise){const t=s(this._featureCount,\"Expected featureCount to be defined\");this._downloadPromise=this._download(t)}const e=this._store.search(t),r=this._subscriptions.get(t.key.id),o=e.length-1;for(let s=0;s<o;s++){const o=l(e[s],t),n={type:\"append\",id:t.id,addOrUpdate:o,end:!1,status:u.empty()};r.add({query:null,message:n}),this._hasAggregates||await a(1),this._onMessage(n)}const n=l(o>=0?e[o]:null,t),i=this._didSendEnd,d={type:\"append\",id:t.id,addOrUpdate:n,end:i,status:u.empty()};r.add({query:null,message:d}),this._onMessage(d)}async _download(e){try{await this.whenInitialized();const t=this._store.storage.getBitset(this._markedIdsBufId),s=new Set;t.clear();const r=Math.ceil(e/this.pageSize),o=Array.from({length:r},((t,e)=>e)).sort(((t,e)=>this._random.getInt()-this._random.getInt())).map((e=>this._downloadPage(e,t,s)));await Promise.all(o),this._store.sweepFeatures(t,this._store.storage),this._store.sweepFeatureSets(s)}catch(s){t.getLogger(\"esri.views.2d.layers.features.sources.SnapshotFeatureSource\").error(\"mapview-snapshot-source\",\"Encountered and error when downloading feature snapshot\",s)}this._sendEnd(),this._loading=!1}async _downloadPage(t,s,r){const a=this.pageSize,n={start:t*a,num:a,cacheHint:!0};e(this.maxRecordCountFactor)&&(n.maxRecordCountFactor=this.maxRecordCountFactor);const i=this.createQuery(n),d=this._signal,u=await this._queue.push({query:i,depth:t,signal:d});o({signal:d}),this._queries.push({query:i,reader:u}),this._store.insert(u),r.add(u.instance);const h=u.getCursor();for(;h.next();)s.set(h.getDisplayId());this._send(u)}_send(t){if(!this._subscriptions.size)return;let s=null;const o=new Map,a=new Set,n=new Map;this._subscriptions.forEach((t=>{const e=t.tile;o.set(e.key.id,null),s=e.tileInfoView,a.add(e.level);const{row:r,col:i}=e.key,d=`${e.level}/${r}/${i}`,u=n.get(d)??[];u.push(t),n.set(d,u)}));for(const e of a){const a=s.getLODInfoAt(e),i=t.getCursor();for(;i.next();){const t=h(i,a,e),s=i.getIndex();if(n.has(t))for(const e of n.get(t)){const t=e.tile.id;let a=o.get(t);r(a)&&(a=[],o.set(t,a)),a.push(s)}}}o.forEach(((s,r)=>{if(e(s)){const e=this._subscriptions.get(r),o={type:\"append\",id:r,addOrUpdate:l(d.from(t,s),e.tile),end:!1,status:u.empty()};e.add({query:null,message:o}),this._onMessage(o)}}))}_sendEnd(){this._subscriptions.forEach((t=>{const e={type:\"append\",id:t.tile.id,addOrUpdate:null,end:!0,status:u.empty()};t.add({query:null,message:e}),this._onMessage(e)})),this._didSendEnd=!0}}export{c as SnapshotFeatureSource};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}