{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../../chunks/tslib.es6.js\";\nimport { s as r } from \"../../../../../../chunks/vec3.js\";\nimport { c as i } from \"../../../../../../chunks/vec3f64.js\";\nimport { ShaderOutput as o } from \"../ShaderOutput.js\";\nimport { DoublePrecision as n } from \"../util/DoublePrecision.glsl.js\";\nimport { addViewNormal as a } from \"../util/View.glsl.js\";\nimport { Float3DrawUniform as t } from \"../../shaderModules/Float3DrawUniform.js\";\nimport { glsl as s } from \"../../shaderModules/interfaces.js\";\nimport { ShaderTechniqueConfiguration as c, parameter as d } from \"../../shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { VertexAttribute as l } from \"../../../lib/VertexAttribute.js\";\nimport { encodeDoubleHi as m, encodeDoubleLo as u } from \"../../../../../webgl/doublePrecisionUtils.js\";\n\nclass v extends c {\n  constructor() {\n    super(...arguments), this.instancedDoublePrecision = !1;\n  }\n\n}\n\nfunction p(e, i) {\n  i.instanced && i.instancedDoublePrecision && (e.attributes.add(l.MODELORIGINHI, \"vec3\"), e.attributes.add(l.MODELORIGINLO, \"vec3\"), e.attributes.add(l.MODEL, \"mat3\"), e.attributes.add(l.MODELNORMAL, \"mat3\"));\n  const c = e.vertex;\n  i.instancedDoublePrecision && (c.include(n, i), c.uniforms.add(new t(\"viewOriginHi\", (e, i) => m(r(b, i.camera.viewInverseTransposeMatrix[3], i.camera.viewInverseTransposeMatrix[7], i.camera.viewInverseTransposeMatrix[11]), b))), c.uniforms.add(new t(\"viewOriginLo\", (e, i) => u(r(b, i.camera.viewInverseTransposeMatrix[3], i.camera.viewInverseTransposeMatrix[7], i.camera.viewInverseTransposeMatrix[11]), b)))), c.code.add(s`\n    vec3 calculateVPos() {\n      ${i.instancedDoublePrecision ? \"return model * localPosition().xyz;\" : \"return localPosition().xyz;\"}\n    }\n    `), c.code.add(s`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${i.instancedDoublePrecision ? s`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;` : \"return vpos;\"}\n    }\n    `), c.code.add(s`\n    vec3 dpNormal(vec4 _normal) {\n      ${i.instancedDoublePrecision ? \"return normalize(modelNormal * _normal.xyz);\" : \"return normalize(_normal.xyz);\"}\n    }\n    `), i.output === o.Normal && (a(c), c.code.add(s`\n    vec3 dpNormalView(vec4 _normal) {\n      ${i.instancedDoublePrecision ? \"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\" : \"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `)), i.hasVertexTangents && c.code.add(s`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${i.instancedDoublePrecision ? \"return vec4(modelNormal * _tangent.xyz, _tangent.w);\" : \"return _tangent;\"}\n\n    }\n    `);\n}\n\ne([d()], v.prototype, \"instancedDoublePrecision\", void 0);\nconst b = i();\nexport { v as InstancedDoubleConfiguration, p as InstancedDoublePrecision };","map":{"version":3,"names":["_","e","s","r","c","i","ShaderOutput","o","DoublePrecision","n","addViewNormal","a","Float3DrawUniform","t","glsl","ShaderTechniqueConfiguration","parameter","d","VertexAttribute","l","encodeDoubleHi","m","encodeDoubleLo","u","v","constructor","arguments","instancedDoublePrecision","p","instanced","attributes","add","MODELORIGINHI","MODELORIGINLO","MODEL","MODELNORMAL","vertex","include","uniforms","b","camera","viewInverseTransposeMatrix","code","output","Normal","hasVertexTangents","prototype","InstancedDoubleConfiguration","InstancedDoublePrecision"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{s as r}from\"../../../../../../chunks/vec3.js\";import{c as i}from\"../../../../../../chunks/vec3f64.js\";import{ShaderOutput as o}from\"../ShaderOutput.js\";import{DoublePrecision as n}from\"../util/DoublePrecision.glsl.js\";import{addViewNormal as a}from\"../util/View.glsl.js\";import{Float3DrawUniform as t}from\"../../shaderModules/Float3DrawUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";import{ShaderTechniqueConfiguration as c,parameter as d}from\"../../shaderTechnique/ShaderTechniqueConfiguration.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{encodeDoubleHi as m,encodeDoubleLo as u}from\"../../../../../webgl/doublePrecisionUtils.js\";class v extends c{constructor(){super(...arguments),this.instancedDoublePrecision=!1}}function p(e,i){i.instanced&&i.instancedDoublePrecision&&(e.attributes.add(l.MODELORIGINHI,\"vec3\"),e.attributes.add(l.MODELORIGINLO,\"vec3\"),e.attributes.add(l.MODEL,\"mat3\"),e.attributes.add(l.MODELNORMAL,\"mat3\"));const c=e.vertex;i.instancedDoublePrecision&&(c.include(n,i),c.uniforms.add(new t(\"viewOriginHi\",((e,i)=>m(r(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),b)))),c.uniforms.add(new t(\"viewOriginLo\",((e,i)=>u(r(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),b))))),c.code.add(s`\n    vec3 calculateVPos() {\n      ${i.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `),c.code.add(s`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${i.instancedDoublePrecision?s`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `),c.code.add(s`\n    vec3 dpNormal(vec4 _normal) {\n      ${i.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `),i.output===o.Normal&&(a(c),c.code.add(s`\n    vec3 dpNormalView(vec4 _normal) {\n      ${i.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `)),i.hasVertexTangents&&c.code.add(s`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${i.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `)}e([d()],v.prototype,\"instancedDoublePrecision\",void 0);const b=i();export{v as InstancedDoubleConfiguration,p as InstancedDoublePrecision};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}