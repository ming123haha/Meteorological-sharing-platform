{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { isAbortError as e } from \"../../../../core/promiseUtils.js\";\nimport { PlacementEngine as s } from \"./Placement.js\";\nimport r from \"./TileParser.js\";\nimport { TileStatus as i } from \"../../tiling/enums.js\";\n\nclass a {\n  constructor(t, e, r, a) {\n    this.status = i.INITIALIZED, this.placementEngine = new s(), this.tileKey = t, this.refKeys = e, this._workerTileHandler = r, this._styleRepository = a;\n  }\n\n  release() {\n    this.tileKey = \"\", this.refKeys = null, this.status = i.INITIALIZED, this._workerTileHandler = null;\n  }\n\n  async parse(s, r) {\n    const a = r && r.signal;\n\n    if (t(a)) {\n      const t = () => {\n        a.removeEventListener(\"abort\", t), this.status = i.INVALID;\n      };\n\n      a.addEventListener(\"abort\", t);\n    }\n\n    let n;\n    const l = {\n      bucketsWithData: [],\n      emptyBuckets: null\n    };\n\n    try {\n      n = await this._parse(s, r);\n    } catch (y) {\n      if (e(y)) throw y;\n      return {\n        result: l,\n        transferList: []\n      };\n    }\n\n    this.status = i.READY;\n    const o = l.bucketsWithData,\n          u = [];\n\n    for (const t of n) if (t.hasFeatures()) {\n      const e = t.serialize();\n      o.push(e);\n    } else u.push(t.layer.uid);\n\n    const h = [...o];\n    let c = null;\n    return u.length > 0 && (c = Uint32Array.from(u), h.push(c.buffer)), l.emptyBuckets = c, {\n      result: l,\n      transferList: h\n    };\n  }\n\n  setObsolete() {\n    this.status = i.INVALID;\n  }\n\n  getLayers() {\n    return this._workerTileHandler.getLayers();\n  }\n\n  getWorkerTileHandler() {\n    return this._workerTileHandler;\n  }\n\n  async _parse(t, e) {\n    const s = t.sourceName2DataAndRefKey;\n    if (0 === Object.keys(s).length) return [];\n    this.status = i.MODIFIED;\n    return new r(s, this, e.client, this._styleRepository, t.styleLayerUIDs).parse(e);\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"names":["isSome","t","isAbortError","e","PlacementEngine","s","r","TileStatus","i","a","constructor","status","INITIALIZED","placementEngine","tileKey","refKeys","_workerTileHandler","_styleRepository","release","parse","signal","removeEventListener","INVALID","addEventListener","n","l","bucketsWithData","emptyBuckets","_parse","y","result","transferList","READY","o","u","hasFeatures","serialize","push","layer","uid","h","c","length","Uint32Array","from","buffer","setObsolete","getLayers","getWorkerTileHandler","sourceName2DataAndRefKey","Object","keys","MODIFIED","client","styleLayerUIDs","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/vectorTiles/WorkerTile.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{isAbortError as e}from\"../../../../core/promiseUtils.js\";import{PlacementEngine as s}from\"./Placement.js\";import r from\"./TileParser.js\";import{TileStatus as i}from\"../../tiling/enums.js\";class a{constructor(t,e,r,a){this.status=i.INITIALIZED,this.placementEngine=new s,this.tileKey=t,this.refKeys=e,this._workerTileHandler=r,this._styleRepository=a}release(){this.tileKey=\"\",this.refKeys=null,this.status=i.INITIALIZED,this._workerTileHandler=null}async parse(s,r){const a=r&&r.signal;if(t(a)){const t=()=>{a.removeEventListener(\"abort\",t),this.status=i.INVALID};a.addEventListener(\"abort\",t)}let n;const l={bucketsWithData:[],emptyBuckets:null};try{n=await this._parse(s,r)}catch(y){if(e(y))throw y;return{result:l,transferList:[]}}this.status=i.READY;const o=l.bucketsWithData,u=[];for(const t of n)if(t.hasFeatures()){const e=t.serialize();o.push(e)}else u.push(t.layer.uid);const h=[...o];let c=null;return u.length>0&&(c=Uint32Array.from(u),h.push(c.buffer)),l.emptyBuckets=c,{result:l,transferList:h}}setObsolete(){this.status=i.INVALID}getLayers(){return this._workerTileHandler.getLayers()}getWorkerTileHandler(){return this._workerTileHandler}async _parse(t,e){const s=t.sourceName2DataAndRefKey;if(0===Object.keys(s).length)return[];this.status=i.MODIFIED;return new r(s,this,e.client,this._styleRepository,t.styleLayerUIDs).parse(e)}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}