{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { X as e } from \"../../../chunks/languageUtils.js\";\nimport t from \"../support/FeatureSet.js\";\nimport n from \"../support/IdSet.js\";\nimport r from \"../support/OrderbyClause.js\";\n\nclass s extends t {\n  constructor(e) {\n    super(e), this._orderbyclause = null, this.declaredClass = \"esri.arcade.featureset.actions.OrderBy\", this._maxProcessing = 100, this._orderbyclause = e.orderbyclause, this._parent = e.parentfeatureset;\n  }\n\n  async _getSet(e) {\n    if (null === this._wset) {\n      await this._ensureLoaded();\n      const t = await this._getFilteredSet(\"\", null, null, this._orderbyclause, e);\n      return this._checkCancelled(e), this._wset = t, this._wset;\n    }\n\n    return this._wset;\n  }\n\n  async manualOrderSet(e, t) {\n    const r = await this.getIdColumnDictionary(e, [], -1, t);\n\n    this._orderbyclause.order(r);\n\n    const s = new n([], [], !0, null);\n\n    for (let n = 0; n < r.length; n++) s._known.push(r[n].id);\n\n    return s;\n  }\n\n  async getIdColumnDictionary(t, n, r, s) {\n    if (r < t._known.length - 1) {\n      const i = this._maxQueryRate();\n\n      if (\"GETPAGES\" === t._known[r + 1]) return await e(this._parent._expandPagedSet(t, i, 0, 0, s)), this.getIdColumnDictionary(t, n, r, s);\n      let a = r + 1;\n      const o = [];\n\n      for (; a < t._known.length && \"GETPAGES\" !== t._known[a];) o.push(t._known[a]), a++;\n\n      r += o.length;\n      const c = await e(this._parent._getFeatureBatch(o, s));\n\n      this._checkCancelled(s);\n\n      for (const e of c) n.push({\n        id: e.attributes[this.objectIdField],\n        feature: e\n      });\n\n      return this.getIdColumnDictionary(t, n, r, s);\n    }\n\n    return t._candidates.length > 0 ? (await e(this._refineSetBlock(t, this._maxProcessingRate(), s)), this._checkCancelled(s), this.getIdColumnDictionary(t, n, r, s)) : n;\n  }\n\n  _isInFeatureSet(e) {\n    return this._parent._isInFeatureSet(e);\n  }\n\n  _getFeatures(e, t, n, r) {\n    return this._parent._getFeatures(e, t, n, r);\n  }\n\n  _featureFromCache(e) {\n    if (void 0 === this._featureCache[e]) {\n      const t = this._parent._featureFromCache(e);\n\n      if (void 0 === t) return;\n      return null === t ? null : (this._featureCache[e] = t, t);\n    }\n\n    return this._featureCache[e];\n  }\n\n  async _fetchAndRefineFeatures() {\n    throw new Error(\"Fetch and Refine should not be called in this featureset\");\n  }\n\n  async _getFilteredSet(e, t, r, s, i) {\n    await this._ensureLoaded();\n    const a = await this._parent._getFilteredSet(e, t, r, null === s ? this._orderbyclause : s, i);\n\n    this._checkCancelled(i);\n\n    const o = new n(a._candidates.slice(0), a._known.slice(0), a._ordered, this._clonePageDefinition(a.pagesDefinition));\n    let c = !0;\n\n    if (a._candidates.length > 0 && (c = !1), !1 === o._ordered) {\n      let e = await this.manualOrderSet(o, i);\n      return !1 === c && (null === t && null === r || (e = new n(e._candidates.slice(0).concat(e._known.slice(0)), [], e._ordered, this._clonePageDefinition(e.pagesDefinition)))), e;\n    }\n\n    return o;\n  }\n\n  static registerAction() {\n    t._featuresetFunctions.orderBy = function (e) {\n      return \"\" === e ? this : new s({\n        parentfeatureset: this,\n        orderbyclause: new r(e)\n      });\n    };\n  }\n\n}\n\nexport { s as default };","map":{"version":3,"names":["X","e","t","n","r","s","constructor","_orderbyclause","declaredClass","_maxProcessing","orderbyclause","_parent","parentfeatureset","_getSet","_wset","_ensureLoaded","_getFilteredSet","_checkCancelled","manualOrderSet","getIdColumnDictionary","order","length","_known","push","id","i","_maxQueryRate","_expandPagedSet","a","o","c","_getFeatureBatch","attributes","objectIdField","feature","_candidates","_refineSetBlock","_maxProcessingRate","_isInFeatureSet","_getFeatures","_featureFromCache","_featureCache","_fetchAndRefineFeatures","Error","slice","_ordered","_clonePageDefinition","pagesDefinition","concat","registerAction","_featuresetFunctions","orderBy","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{X as e}from\"../../../chunks/languageUtils.js\";import t from\"../support/FeatureSet.js\";import n from\"../support/IdSet.js\";import r from\"../support/OrderbyClause.js\";class s extends t{constructor(e){super(e),this._orderbyclause=null,this.declaredClass=\"esri.arcade.featureset.actions.OrderBy\",this._maxProcessing=100,this._orderbyclause=e.orderbyclause,this._parent=e.parentfeatureset}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,this._orderbyclause,e);return this._checkCancelled(e),this._wset=t,this._wset}return this._wset}async manualOrderSet(e,t){const r=await this.getIdColumnDictionary(e,[],-1,t);this._orderbyclause.order(r);const s=new n([],[],!0,null);for(let n=0;n<r.length;n++)s._known.push(r[n].id);return s}async getIdColumnDictionary(t,n,r,s){if(r<t._known.length-1){const i=this._maxQueryRate();if(\"GETPAGES\"===t._known[r+1])return await e(this._parent._expandPagedSet(t,i,0,0,s)),this.getIdColumnDictionary(t,n,r,s);let a=r+1;const o=[];for(;a<t._known.length&&\"GETPAGES\"!==t._known[a];)o.push(t._known[a]),a++;r+=o.length;const c=await e(this._parent._getFeatureBatch(o,s));this._checkCancelled(s);for(const e of c)n.push({id:e.attributes[this.objectIdField],feature:e});return this.getIdColumnDictionary(t,n,r,s)}return t._candidates.length>0?(await e(this._refineSetBlock(t,this._maxProcessingRate(),s)),this._checkCancelled(s),this.getIdColumnDictionary(t,n,r,s)):n}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(e,t,n,r){return this._parent._getFeatures(e,t,n,r)}_featureFromCache(e){if(void 0===this._featureCache[e]){const t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}async _fetchAndRefineFeatures(){throw new Error(\"Fetch and Refine should not be called in this featureset\")}async _getFilteredSet(e,t,r,s,i){await this._ensureLoaded();const a=await this._parent._getFilteredSet(e,t,r,null===s?this._orderbyclause:s,i);this._checkCancelled(i);const o=new n(a._candidates.slice(0),a._known.slice(0),a._ordered,this._clonePageDefinition(a.pagesDefinition));let c=!0;if(a._candidates.length>0&&(c=!1),!1===o._ordered){let e=await this.manualOrderSet(o,i);return!1===c&&(null===t&&null===r||(e=new n(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)))),e}return o}static registerAction(){t._featuresetFunctions.orderBy=function(e){return\"\"===e?this:new s({parentfeatureset:this,orderbyclause:new r(e)})}}}export{s as default};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,kCAAlB;AAAqD,OAAOC,CAAP,MAAa,0BAAb;AAAwC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,OAAOC,CAAP,MAAa,6BAAb;;AAA2C,MAAMC,CAAN,SAAgBH,CAAhB,CAAiB;EAACI,WAAW,CAACL,CAAD,EAAG;IAAC,MAAMA,CAAN,GAAS,KAAKM,cAAL,GAAoB,IAA7B,EAAkC,KAAKC,aAAL,GAAmB,wCAArD,EAA8F,KAAKC,cAAL,GAAoB,GAAlH,EAAsH,KAAKF,cAAL,GAAoBN,CAAC,CAACS,aAA5I,EAA0J,KAAKC,OAAL,GAAaV,CAAC,CAACW,gBAAzK;EAA0L;;EAAa,MAAPC,OAAO,CAACZ,CAAD,EAAG;IAAC,IAAG,SAAO,KAAKa,KAAf,EAAqB;MAAC,MAAM,KAAKC,aAAL,EAAN;MAA2B,MAAMb,CAAC,GAAC,MAAM,KAAKc,eAAL,CAAqB,EAArB,EAAwB,IAAxB,EAA6B,IAA7B,EAAkC,KAAKT,cAAvC,EAAsDN,CAAtD,CAAd;MAAuE,OAAO,KAAKgB,eAAL,CAAqBhB,CAArB,GAAwB,KAAKa,KAAL,GAAWZ,CAAnC,EAAqC,KAAKY,KAAjD;IAAuD;;IAAA,OAAO,KAAKA,KAAZ;EAAkB;;EAAoB,MAAdI,cAAc,CAACjB,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAAC,MAAM,KAAKe,qBAAL,CAA2BlB,CAA3B,EAA6B,EAA7B,EAAgC,CAAC,CAAjC,EAAmCC,CAAnC,CAAd;;IAAoD,KAAKK,cAAL,CAAoBa,KAApB,CAA0BhB,CAA1B;;IAA6B,MAAMC,CAAC,GAAC,IAAIF,CAAJ,CAAM,EAAN,EAAS,EAAT,EAAY,CAAC,CAAb,EAAe,IAAf,CAAR;;IAA6B,KAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,CAAC,CAACiB,MAAhB,EAAuBlB,CAAC,EAAxB,EAA2BE,CAAC,CAACiB,MAAF,CAASC,IAAT,CAAcnB,CAAC,CAACD,CAAD,CAAD,CAAKqB,EAAnB;;IAAuB,OAAOnB,CAAP;EAAS;;EAA2B,MAArBc,qBAAqB,CAACjB,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAS;IAAC,IAAGD,CAAC,GAACF,CAAC,CAACoB,MAAF,CAASD,MAAT,GAAgB,CAArB,EAAuB;MAAC,MAAMI,CAAC,GAAC,KAAKC,aAAL,EAAR;;MAA6B,IAAG,eAAaxB,CAAC,CAACoB,MAAF,CAASlB,CAAC,GAAC,CAAX,CAAhB,EAA8B,OAAO,MAAMH,CAAC,CAAC,KAAKU,OAAL,CAAagB,eAAb,CAA6BzB,CAA7B,EAA+BuB,CAA/B,EAAiC,CAAjC,EAAmC,CAAnC,EAAqCpB,CAArC,CAAD,CAAP,EAAiD,KAAKc,qBAAL,CAA2BjB,CAA3B,EAA6BC,CAA7B,EAA+BC,CAA/B,EAAiCC,CAAjC,CAAxD;MAA4F,IAAIuB,CAAC,GAACxB,CAAC,GAAC,CAAR;MAAU,MAAMyB,CAAC,GAAC,EAAR;;MAAW,OAAKD,CAAC,GAAC1B,CAAC,CAACoB,MAAF,CAASD,MAAX,IAAmB,eAAanB,CAAC,CAACoB,MAAF,CAASM,CAAT,CAArC,GAAkDC,CAAC,CAACN,IAAF,CAAOrB,CAAC,CAACoB,MAAF,CAASM,CAAT,CAAP,GAAoBA,CAAC,EAArB;;MAAwBxB,CAAC,IAAEyB,CAAC,CAACR,MAAL;MAAY,MAAMS,CAAC,GAAC,MAAM7B,CAAC,CAAC,KAAKU,OAAL,CAAaoB,gBAAb,CAA8BF,CAA9B,EAAgCxB,CAAhC,CAAD,CAAf;;MAAoD,KAAKY,eAAL,CAAqBZ,CAArB;;MAAwB,KAAI,MAAMJ,CAAV,IAAe6B,CAAf,EAAiB3B,CAAC,CAACoB,IAAF,CAAO;QAACC,EAAE,EAACvB,CAAC,CAAC+B,UAAF,CAAa,KAAKC,aAAlB,CAAJ;QAAqCC,OAAO,EAACjC;MAA7C,CAAP;;MAAwD,OAAO,KAAKkB,qBAAL,CAA2BjB,CAA3B,EAA6BC,CAA7B,EAA+BC,CAA/B,EAAiCC,CAAjC,CAAP;IAA2C;;IAAA,OAAOH,CAAC,CAACiC,WAAF,CAAcd,MAAd,GAAqB,CAArB,IAAwB,MAAMpB,CAAC,CAAC,KAAKmC,eAAL,CAAqBlC,CAArB,EAAuB,KAAKmC,kBAAL,EAAvB,EAAiDhC,CAAjD,CAAD,CAAP,EAA6D,KAAKY,eAAL,CAAqBZ,CAArB,CAA7D,EAAqF,KAAKc,qBAAL,CAA2BjB,CAA3B,EAA6BC,CAA7B,EAA+BC,CAA/B,EAAiCC,CAAjC,CAA7G,IAAkJF,CAAzJ;EAA2J;;EAAAmC,eAAe,CAACrC,CAAD,EAAG;IAAC,OAAO,KAAKU,OAAL,CAAa2B,eAAb,CAA6BrC,CAA7B,CAAP;EAAuC;;EAAAsC,YAAY,CAACtC,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAS;IAAC,OAAO,KAAKO,OAAL,CAAa4B,YAAb,CAA0BtC,CAA1B,EAA4BC,CAA5B,EAA8BC,CAA9B,EAAgCC,CAAhC,CAAP;EAA0C;;EAAAoC,iBAAiB,CAACvC,CAAD,EAAG;IAAC,IAAG,KAAK,CAAL,KAAS,KAAKwC,aAAL,CAAmBxC,CAAnB,CAAZ,EAAkC;MAAC,MAAMC,CAAC,GAAC,KAAKS,OAAL,CAAa6B,iBAAb,CAA+BvC,CAA/B,CAAR;;MAA0C,IAAG,KAAK,CAAL,KAASC,CAAZ,EAAc;MAAO,OAAO,SAAOA,CAAP,GAAS,IAAT,IAAe,KAAKuC,aAAL,CAAmBxC,CAAnB,IAAsBC,CAAtB,EAAwBA,CAAvC,CAAP;IAAiD;;IAAA,OAAO,KAAKuC,aAAL,CAAmBxC,CAAnB,CAAP;EAA6B;;EAA6B,MAAvByC,uBAAuB,GAAE;IAAC,MAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;EAA4E;;EAAqB,MAAf3B,eAAe,CAACf,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOC,CAAP,EAASoB,CAAT,EAAW;IAAC,MAAM,KAAKV,aAAL,EAAN;IAA2B,MAAMa,CAAC,GAAC,MAAM,KAAKjB,OAAL,CAAaK,eAAb,CAA6Bf,CAA7B,EAA+BC,CAA/B,EAAiCE,CAAjC,EAAmC,SAAOC,CAAP,GAAS,KAAKE,cAAd,GAA6BF,CAAhE,EAAkEoB,CAAlE,CAAd;;IAAmF,KAAKR,eAAL,CAAqBQ,CAArB;;IAAwB,MAAMI,CAAC,GAAC,IAAI1B,CAAJ,CAAMyB,CAAC,CAACO,WAAF,CAAcS,KAAd,CAAoB,CAApB,CAAN,EAA6BhB,CAAC,CAACN,MAAF,CAASsB,KAAT,CAAe,CAAf,CAA7B,EAA+ChB,CAAC,CAACiB,QAAjD,EAA0D,KAAKC,oBAAL,CAA0BlB,CAAC,CAACmB,eAA5B,CAA1D,CAAR;IAAgH,IAAIjB,CAAC,GAAC,CAAC,CAAP;;IAAS,IAAGF,CAAC,CAACO,WAAF,CAAcd,MAAd,GAAqB,CAArB,KAAyBS,CAAC,GAAC,CAAC,CAA5B,GAA+B,CAAC,CAAD,KAAKD,CAAC,CAACgB,QAAzC,EAAkD;MAAC,IAAI5C,CAAC,GAAC,MAAM,KAAKiB,cAAL,CAAoBW,CAApB,EAAsBJ,CAAtB,CAAZ;MAAqC,OAAM,CAAC,CAAD,KAAKK,CAAL,KAAS,SAAO5B,CAAP,IAAU,SAAOE,CAAjB,KAAqBH,CAAC,GAAC,IAAIE,CAAJ,CAAMF,CAAC,CAACkC,WAAF,CAAcS,KAAd,CAAoB,CAApB,EAAuBI,MAAvB,CAA8B/C,CAAC,CAACqB,MAAF,CAASsB,KAAT,CAAe,CAAf,CAA9B,CAAN,EAAuD,EAAvD,EAA0D3C,CAAC,CAAC4C,QAA5D,EAAqE,KAAKC,oBAAL,CAA0B7C,CAAC,CAAC8C,eAA5B,CAArE,CAAvB,CAAT,GAAqJ9C,CAA3J;IAA6J;;IAAA,OAAO4B,CAAP;EAAS;;EAAqB,OAAdoB,cAAc,GAAE;IAAC/C,CAAC,CAACgD,oBAAF,CAAuBC,OAAvB,GAA+B,UAASlD,CAAT,EAAW;MAAC,OAAM,OAAKA,CAAL,GAAO,IAAP,GAAY,IAAII,CAAJ,CAAM;QAACO,gBAAgB,EAAC,IAAlB;QAAuBF,aAAa,EAAC,IAAIN,CAAJ,CAAMH,CAAN;MAArC,CAAN,CAAlB;IAAwE,CAAnH;EAAoH;;AAA90E;;AAA+0E,SAAOI,CAAC,IAAI+C,OAAZ"},"metadata":{},"sourceType":"module"}