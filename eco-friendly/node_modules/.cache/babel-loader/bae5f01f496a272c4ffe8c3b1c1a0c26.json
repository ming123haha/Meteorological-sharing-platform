{"ast":null,"code":"import { loadModules } from \"esri-loader\";\nexport default {\n  name: \"web-map\",\n\n  mounted() {\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/widgets/Expand', //展开\n    'esri/layers/FeatureLayer', 'esri/widgets/BasemapGallery', //底图切换\n    'esri/widgets/Legend', //图例功能\n    'esri/widgets/Search', //查询\n    'esri/widgets/LayerList', //图层列表\n    'esri/widgets/Compass', //指南针\n    'esri/widgets/CoordinateConversion', //地理坐标xy\n    'esri/widgets/Measurement'], {\n      css: true\n    }).then(([Map, MapView, Expand, FeatureLayer, BasemapGallery, Legend, Search, LayerList, Compass, CoordinateConversion, Measurement]) => {\n      //村级区域\n      const myServer = \"http://localhost:6080/arcgis/rest/services/725test/MyMapService\";\n      const feat = new FeatureLayer({\n        url: myServer,\n        // 弹出框的样式\n        popupTemplate: {\n          title: \"这里是头部\",\n          // 这里设置弹出框的内容，包括字段信息，text，图表等\n          content: [{\n            type: \"fields\",\n            // FieldsContentElement\n            fieldInfos: [{\n              fieldName: \"CJQYDM\",\n              visible: true,\n              label: \"村级区域代码\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }, {\n              fieldName: \"CJQYMC\",\n              visible: true,\n              label: \"村级区域名称\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }]\n          }, {\n            type: \"text\",\n            // TextContentElement\n            text: \"这里可以显示描述性信息\"\n          }, {\n            type: \"media\",\n            mediaInfos: [{\n              title: \"<b>图片</b>\",\n              type: \"image\",\n              caption: \"tree species\",\n              value: {\n                sourceURL: \"https://www.sunset.com/wp-content/uploads/96006df453533f4c982212b8cc7882f5-800x0-c-default.jpg\"\n              }\n            }]\n          }]\n        }\n      }); //宅基地\n\n      const myServerZJD = \"http://localhost:6080/arcgis/rest/services/725test/FeatureServer/5\";\n      const featZJD = new FeatureLayer({\n        url: myServerZJD,\n        popupTemplate: {\n          title: \"宅基地信息\",\n          content: [{\n            type: \"fields\",\n            // FieldsContentElement\n            fieldInfos: [{\n              fieldName: \"SUYQRDM\",\n              visible: true,\n              label: \"所有权人代码\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }, {\n              fieldName: \"ZJDDM\",\n              visible: true,\n              label: \"宅基地代码\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }, {\n              fieldName: \"SHYQRXM\",\n              visible: true,\n              label: \"使用权人信息\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }]\n          }]\n        }\n      }); //自然幢\n\n      const myServerZRZ = \"http://localhost:6080/arcgis/rest/services/725test/FeatureServer/6\";\n      const featZRZ = new FeatureLayer({\n        url: myServerZRZ,\n        popupTemplate: {\n          title: \"自然幢\",\n          content: [{\n            type: \"fields\",\n            // FieldsContentElement\n            fieldInfos: [{\n              fieldName: \"YSDM\",\n              visible: true,\n              label: \"要素代码\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }, {\n              fieldName: \"ZJDDM\",\n              visible: true,\n              label: \"宅基地代码\",\n              format: {\n                places: 0,\n                digitSeparator: true\n              }\n            }]\n          }]\n        }\n      });\n      const map = new Map({\n        basemap: \"satellite\",\n        layers: [feat, featZJD, featZRZ]\n      });\n      const view = new MapView({\n        container: \"viewDiv\",\n        map: map,\n        center: [125.65, 46.72],\n        zoom: 14\n      }); ////////////////////////定义查询工具，设置每个图层的查询字段/////////////////////////\n\n      const searchWidget = new Search({\n        view: view,\n        allPlaceholder: \"输入框\",\n        sources: [{\n          layer: feat,\n          // 村级区域代码\n          searchFields: [\"CJQYDM\"],\n          displayField: \"CJQYDM\",\n          exactMatch: false,\n          outFields: [\"CJQYDM\", \"CJQYMC\"],\n          name: \"村级区域\" // placeholder: \"example: 3708\"\n\n        }, {\n          layer: featZJD,\n          // 宅基地代码（可以不止一个查询字段，后面可加）\n          searchFields: [\"ZJDDM\"],\n          // suggestionTemplate: \"{Name}, Party: {Party}\",\n          exactMatch: false,\n          outFields: [\"*\"],\n          // placeholder: \"example: Casey\",\n          name: \"宅基地宗地\",\n          zoomScale: 4000\n        }, {\n          layer: featZRZ,\n          // 宅基地代码（可以不止一个查询字段，后面可加）\n          searchFields: [\"ZJDDM\"],\n          // suggestionTemplate: \"{Name}, Party: {Party}\",\n          exactMatch: false,\n          outFields: [\"*\"],\n          // placeholder: \"example: Casey\",\n          name: \"自然幢\",\n          zoomScale: 4000\n        }]\n      }); ///////////////////////////添加查询控件至视图////////////////////////////\n\n      view.ui.add(searchWidget, \"top-right\");\n      const legend = new Expand({\n        content: new Legend({\n          view: view,\n          style: \"card\" // other styles include 'classic'\n\n        }),\n        view: view,\n        expanded: true\n      });\n      view.ui.add(legend, \"bottom-left\"); //左下角放置图例\n\n      const measurement = new Measurement({\n        view: view,\n        activeTool: \"distance\"\n      });\n      view.ui.add(measurement, \"top-right\"); // Switch between area and distance measurement\n\n      function switchTool() {\n        const tool = measurement.activeTool === \"distance\" ? \"area\" : \"distance\";\n        measurement.activeTool = tool;\n      }\n\n      const basemapGallery = new BasemapGallery({\n        view: view,\n        container: document.createElement(\"div\")\n      });\n      const bgexpand = new Expand({\n        expandIconClass: \"esri-icon-layer-list\",\n        view: view,\n        content: basemapGallery,\n        group: \"top-right\"\n      });\n      basemapGallery.watch(\"activeBasemap\", () => {\n        const mobileSize = view.heightBreakpoint === \"xsmall\" || view.widthBreakpoint === \"xsmall\";\n\n        if (mobileSize) {\n          bgexpand.collapse();\n        }\n      });\n      const layerList = new LayerList({\n        container: document.createElement(\"div\"),\n        view: view\n      });\n      const layerListExpand = new Expand({\n        expandIconClass: \"esri-icon-layer-list\",\n        view: view,\n        content: layerList,\n        group: \"top-right\"\n      });\n      view.ui.add([layerListExpand, bgexpand], \"top-right\"); //右上角第二个图层管理\n      // view.ui.add([expand1, expand2], \"bottom-right\");\n\n      var compass = new Compass({\n        view: view\n      });\n      view.ui.add(compass, \"top-left\"); //左上角放置指南针\n\n      const ccWidget = new CoordinateConversion({\n        view: view\n      });\n      view.ui.add(ccWidget, \"bottom-right\"); //左下角鼠标位置的地理坐标\n    });\n  },\n\n  beforeUnmount() {\n    if (this.view) {\n      // destroy the map view\n      this.view.container = null;\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["name","mounted","loadModules","css","then","url","popupTemplate","title","content","type","fieldInfos","fieldName","visible","label","format","places","digitSeparator","text","mediaInfos","caption","value","sourceURL","basemap","layers","container","map","center","zoom","view","allPlaceholder","sources","layer","searchFields","displayField","exactMatch","outFields","zoomScale","style","expanded","activeTool","measurement","expandIconClass","group","basemapGallery","bgexpand","beforeUnmount"],"sourceRoot":"src/views","sources":["SpatialAnalysis.vue"],"sourcesContent":["<template>\r\n\r\n  <body>\r\n  <div id=\"viewDiv\"></div>\r\n  </body>\r\n</template>\r\n<script>\r\nimport { loadModules } from \"esri-loader\";\r\n\r\nexport default {\r\n  name: \"web-map\",\r\n  mounted() {\r\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\r\n    loadModules(\r\n        [\r\n          'esri/Map',\r\n          'esri/views/MapView',\r\n          'esri/widgets/Expand',//展开\r\n          'esri/layers/FeatureLayer',\r\n          'esri/widgets/BasemapGallery',//底图切换\r\n          'esri/widgets/Legend',//图例功能\r\n          'esri/widgets/Search',//查询\r\n          'esri/widgets/LayerList',//图层列表\r\n          'esri/widgets/Compass',//指南针\r\n          'esri/widgets/CoordinateConversion',//地理坐标xy\r\n          'esri/widgets/Measurement'\r\n        ],\r\n        { css: true }\r\n    ).then(([Map, MapView, Expand, FeatureLayer, BasemapGallery, Legend, Search, LayerList, Compass, CoordinateConversion,Measurement]) => {\r\n      //村级区域\r\n      const myServer =\r\n          \"http://localhost:6080/arcgis/rest/services/725test/MyMapService\";\r\n      const feat = new FeatureLayer({\r\n        url: myServer,\r\n        // 弹出框的样式\r\n        popupTemplate: {\r\n          title: \"这里是头部\",\r\n          // 这里设置弹出框的内容，包括字段信息，text，图表等\r\n          content: [\r\n            {\r\n              type: \"fields\", // FieldsContentElement\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"CJQYDM\",\r\n                  visible: true,\r\n                  label: \"村级区域代码\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n                {\r\n                  fieldName: \"CJQYMC\",\r\n                  visible: true,\r\n                  label: \"村级区域名称\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n              ],\r\n            },\r\n            {\r\n              type: \"text\", // TextContentElement\r\n              text: \"这里可以显示描述性信息\",\r\n            },\r\n            {\r\n              type: \"media\",\r\n              mediaInfos: [\r\n                {\r\n                  title: \"<b>图片</b>\",\r\n                  type: \"image\",\r\n                  caption: \"tree species\",\r\n                  value: {\r\n                    sourceURL:\r\n                        \"https://www.sunset.com/wp-content/uploads/96006df453533f4c982212b8cc7882f5-800x0-c-default.jpg\",\r\n                  },\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n      });\r\n\r\n      //宅基地\r\n      const myServerZJD =\r\n          \"http://localhost:6080/arcgis/rest/services/725test/FeatureServer/5\";\r\n      const featZJD = new FeatureLayer({\r\n        url: myServerZJD,\r\n        popupTemplate: {\r\n          title: \"宅基地信息\",\r\n          content: [\r\n            {\r\n              type: \"fields\", // FieldsContentElement\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"SUYQRDM\",\r\n                  visible: true,\r\n                  label: \"所有权人代码\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n                {\r\n                  fieldName: \"ZJDDM\",\r\n                  visible: true,\r\n                  label: \"宅基地代码\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n                {\r\n                  fieldName: \"SHYQRXM\",\r\n                  visible: true,\r\n                  label: \"使用权人信息\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n              ],\r\n            }],\r\n        },\r\n      });\r\n      //自然幢\r\n      const myServerZRZ =\r\n          \"http://localhost:6080/arcgis/rest/services/725test/FeatureServer/6\";\r\n      const featZRZ = new FeatureLayer({\r\n        url: myServerZRZ,\r\n        popupTemplate: {\r\n          title: \"自然幢\",\r\n          content: [\r\n            {\r\n              type: \"fields\", // FieldsContentElement\r\n              fieldInfos: [\r\n                {\r\n                  fieldName: \"YSDM\",\r\n                  visible: true,\r\n                  label: \"要素代码\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n                {\r\n                  fieldName: \"ZJDDM\",\r\n                  visible: true,\r\n                  label: \"宅基地代码\",\r\n                  format: {\r\n                    places: 0,\r\n                    digitSeparator: true,\r\n                  },\r\n                },\r\n              ],\r\n            }\r\n          ]\r\n        }\r\n      });\r\n\r\n\r\n      const map = new Map({\r\n        basemap: \"satellite\",\r\n        layers: [feat, featZJD, featZRZ],\r\n      });\r\n\r\n      const view = new MapView({\r\n        container: \"viewDiv\",\r\n        map: map,\r\n        center: [125.65, 46.72],\r\n        zoom: 14,\r\n      });\r\n\r\n\r\n      ////////////////////////定义查询工具，设置每个图层的查询字段/////////////////////////\r\n      const searchWidget = new Search({\r\n        view: view,\r\n        allPlaceholder: \"输入框\",\r\n        sources: [\r\n          {\r\n            layer: feat,\r\n            // 村级区域代码\r\n            searchFields: [\"CJQYDM\"],\r\n            displayField: \"CJQYDM\",\r\n            exactMatch: false,\r\n            outFields: [\"CJQYDM\", \"CJQYMC\"],\r\n            name: \"村级区域\",\r\n            // placeholder: \"example: 3708\"\r\n          },\r\n          {\r\n            layer: featZJD,\r\n            // 宅基地代码（可以不止一个查询字段，后面可加）\r\n            searchFields: [\"ZJDDM\"],\r\n            // suggestionTemplate: \"{Name}, Party: {Party}\",\r\n            exactMatch: false,\r\n            outFields: [\"*\"],\r\n            // placeholder: \"example: Casey\",\r\n            name: \"宅基地宗地\",\r\n            zoomScale: 4000,\r\n          },\r\n          {\r\n            layer: featZRZ,\r\n            // 宅基地代码（可以不止一个查询字段，后面可加）\r\n            searchFields: [\"ZJDDM\"],\r\n            // suggestionTemplate: \"{Name}, Party: {Party}\",\r\n            exactMatch: false,\r\n            outFields: [\"*\"],\r\n            // placeholder: \"example: Casey\",\r\n            name: \"自然幢\",\r\n            zoomScale: 4000,\r\n          },\r\n        ],\r\n      });\r\n\r\n      ///////////////////////////添加查询控件至视图////////////////////////////\r\n\r\n      view.ui.add(searchWidget, \"top-right\");\r\n\r\n\r\n      const legend = new Expand({\r\n        content: new Legend({\r\n          view: view,\r\n          style: \"card\" // other styles include 'classic'\r\n        }),\r\n        view: view,\r\n        expanded: true\r\n      });\r\n      view.ui.add(legend, \"bottom-left\");//左下角放置图例\r\n\r\n\r\n      const measurement = new Measurement({\r\n        view: view,\r\n        activeTool: \"distance\"\r\n      });\r\n      view.ui.add(measurement, \"top-right\");\r\n\r\n// Switch between area and distance measurement\r\n      function switchTool() {\r\n        const tool = measurement.activeTool === \"distance\" ? \"area\" : \"distance\";\r\n        measurement.activeTool = tool;\r\n      }\r\n\r\n\r\n      const basemapGallery = new BasemapGallery({\r\n        view: view,\r\n        container: document.createElement(\"div\")\r\n      });\r\n      const bgexpand = new Expand({\r\n        expandIconClass: \"esri-icon-layer-list\",\r\n        view: view,\r\n        content: basemapGallery,\r\n        group: \"top-right\"\r\n      });\r\n      basemapGallery.watch(\"activeBasemap\", () => {\r\n        const mobileSize =\r\n            view.heightBreakpoint === \"xsmall\" ||\r\n            view.widthBreakpoint === \"xsmall\";\r\n        if (mobileSize) {\r\n          bgexpand.collapse();\r\n        }\r\n      });\r\n\r\n\r\n      const layerList = new LayerList({\r\n        container: document.createElement(\"div\"),\r\n        view: view\r\n      });\r\n      const layerListExpand = new Expand({\r\n        expandIconClass: \"esri-icon-layer-list\",\r\n        view: view,\r\n        content: layerList,\r\n        group: \"top-right\"\r\n      });\r\n      view.ui.add([layerListExpand, bgexpand], \"top-right\");//右上角第二个图层管理\r\n\r\n      // view.ui.add([expand1, expand2], \"bottom-right\");\r\n\r\n\r\n      var compass = new Compass({\r\n        view: view\r\n      });\r\n      view.ui.add(compass, \"top-left\");//左上角放置指南针\r\n\r\n      const ccWidget = new CoordinateConversion({\r\n        view: view\r\n      });\r\n      view.ui.add(ccWidget, \"bottom-right\");//左下角鼠标位置的地理坐标\r\n\r\n\r\n\r\n\r\n    });\r\n  },\r\n  beforeUnmount() {\r\n    if (this.view) {\r\n      // destroy the map view\r\n      this.view.container = null;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import \"https://js.arcgis.com/4.24/esri/themes/dark/main.css\";\r\n\r\nbody {\r\n  height: 100%;\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n\r\n\r\n#viewDiv {\r\n  height: 100%;\r\n  max-width: 100%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}