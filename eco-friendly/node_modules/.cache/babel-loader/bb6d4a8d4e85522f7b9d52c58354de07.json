{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport e from \"../../../core/Error.js\";\nimport { isSome as s } from \"../../../core/maybe.js\";\nimport { eachAlways as r } from \"../../../core/promiseUtils.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../RasterInfo.js\";\nimport m from \"./BaseRaster.js\";\nimport { split as n } from \"../rasterFunctions/pixelUtils.js\";\nimport { estimateStatisticsHistograms as l } from \"../rasterFunctions/stretchUtils.js\";\nimport p from \"../../../geometry/Extent.js\";\nimport c from \"../../../geometry/SpatialReference.js\";\nlet h = class extends m {\n  constructor() {\n    super(...arguments), this.datasetFormat = \"MEMORY\";\n  }\n\n  async open(t) {\n    await this.init();\n    const {\n      pixelBlock: e,\n      statistics: s,\n      histograms: r,\n      name: i,\n      keyProperties: o,\n      nativeExtent: m,\n      transform: n\n    } = this.data,\n          {\n      width: l,\n      height: h,\n      pixelType: f\n    } = e,\n          d = this.data.extent || new p({\n      xmin: -.5,\n      ymin: .5,\n      xmax: l - .5,\n      ymax: h - .5,\n      spatialReference: new c({\n        wkid: 3857\n      })\n    }),\n          u = this.data.isPseudoSpatialReference ?? !this.data.extent,\n          y = {\n      x: d.width / l,\n      y: d.height / h\n    },\n          x = new a({\n      width: l,\n      height: h,\n      pixelType: f,\n      extent: d,\n      nativeExtent: m,\n      transform: n,\n      pixelSize: y,\n      spatialReference: d.spatialReference,\n      bandCount: 3,\n      keyProperties: o || {},\n      statistics: s,\n      isPseudoSpatialReference: u,\n      histograms: r\n    });\n    this.createRemoteDatasetStorageInfo(x, 512, 512), this._set(\"rasterInfo\", x), this.updateTileInfo(), await this._buildInMemoryRaster(e, {\n      width: 512,\n      height: 512\n    }, t), this.datasetName = i, this.url = \"/InMemory/\" + i;\n  }\n\n  fetchRawTile(t, e, s, r = {}) {\n    const i = this._pixelBlockTiles.get(`${t}/${e}/${s}`);\n\n    return Promise.resolve(i);\n  }\n\n  async _buildInMemoryRaster(t, i, o) {\n    const a = this.rasterInfo.storageInfo.maximumPyramidLevel,\n          m = this.rasterJobHandler ? this.rasterJobHandler.split({\n      pixelBlock: t,\n      tileSize: i,\n      maximumPyramidLevel: a\n    }, o) : Promise.resolve(n(t, i, a)),\n          p = s(this.rasterInfo.statistics),\n          c = s(this.rasterInfo.histograms),\n          h = p ? Promise.resolve({\n      statistics: null,\n      histograms: null\n    }) : this.rasterJobHandler ? this.rasterJobHandler.estimateStatisticsHistograms({\n      pixelBlock: t\n    }, o) : Promise.resolve(l(t)),\n          f = await r([m, h]);\n    if (!f[0].value && f[1].value) throw new e(\"inmemory-raster:open\", \"failed to build in memory raster\");\n    this._pixelBlockTiles = f[0].value, p || (this.rasterInfo.statistics = f[1].value?.statistics), c || (this.rasterInfo.histograms = f[1].value?.histograms);\n  }\n\n};\nt([i({\n  type: String,\n  json: {\n    write: !0\n  }\n})], h.prototype, \"datasetFormat\", void 0), t([i()], h.prototype, \"data\", void 0), h = t([o(\"esri.layers.support.rasterDatasets.InMemoryRaster\")], h);\nconst f = h;\nexport { f as default };","map":{"version":3,"names":["_","t","e","isSome","s","eachAlways","r","property","i","subclass","o","a","m","split","n","estimateStatisticsHistograms","l","p","c","h","constructor","arguments","datasetFormat","open","init","pixelBlock","statistics","histograms","name","keyProperties","nativeExtent","transform","data","width","height","pixelType","f","d","extent","xmin","ymin","xmax","ymax","spatialReference","wkid","u","isPseudoSpatialReference","y","x","pixelSize","bandCount","createRemoteDatasetStorageInfo","_set","updateTileInfo","_buildInMemoryRaster","datasetName","url","fetchRawTile","_pixelBlockTiles","get","Promise","resolve","rasterInfo","storageInfo","maximumPyramidLevel","rasterJobHandler","tileSize","value","type","String","json","write","prototype","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterDatasets/InMemoryRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isSome as s}from\"../../../core/maybe.js\";import{eachAlways as r}from\"../../../core/promiseUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../RasterInfo.js\";import m from\"./BaseRaster.js\";import{split as n}from\"../rasterFunctions/pixelUtils.js\";import{estimateStatisticsHistograms as l}from\"../rasterFunctions/stretchUtils.js\";import p from\"../../../geometry/Extent.js\";import c from\"../../../geometry/SpatialReference.js\";let h=class extends m{constructor(){super(...arguments),this.datasetFormat=\"MEMORY\"}async open(t){await this.init();const{pixelBlock:e,statistics:s,histograms:r,name:i,keyProperties:o,nativeExtent:m,transform:n}=this.data,{width:l,height:h,pixelType:f}=e,d=this.data.extent||new p({xmin:-.5,ymin:.5,xmax:l-.5,ymax:h-.5,spatialReference:new c({wkid:3857})}),u=this.data.isPseudoSpatialReference??!this.data.extent,y={x:d.width/l,y:d.height/h},x=new a({width:l,height:h,pixelType:f,extent:d,nativeExtent:m,transform:n,pixelSize:y,spatialReference:d.spatialReference,bandCount:3,keyProperties:o||{},statistics:s,isPseudoSpatialReference:u,histograms:r});this.createRemoteDatasetStorageInfo(x,512,512),this._set(\"rasterInfo\",x),this.updateTileInfo(),await this._buildInMemoryRaster(e,{width:512,height:512},t),this.datasetName=i,this.url=\"/InMemory/\"+i}fetchRawTile(t,e,s,r={}){const i=this._pixelBlockTiles.get(`${t}/${e}/${s}`);return Promise.resolve(i)}async _buildInMemoryRaster(t,i,o){const a=this.rasterInfo.storageInfo.maximumPyramidLevel,m=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:t,tileSize:i,maximumPyramidLevel:a},o):Promise.resolve(n(t,i,a)),p=s(this.rasterInfo.statistics),c=s(this.rasterInfo.histograms),h=p?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:t},o):Promise.resolve(l(t)),f=await r([m,h]);if(!f[0].value&&f[1].value)throw new e(\"inmemory-raster:open\",\"failed to build in memory raster\");this._pixelBlockTiles=f[0].value,p||(this.rasterInfo.statistics=f[1].value?.statistics),c||(this.rasterInfo.histograms=f[1].value?.histograms)}};t([i({type:String,json:{write:!0}})],h.prototype,\"datasetFormat\",void 0),t([i()],h.prototype,\"data\",void 0),h=t([o(\"esri.layers.support.rasterDatasets.InMemoryRaster\")],h);const f=h;export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}