{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../../core/mathUtils.js\";\nimport { isNone as a, isSome as o } from \"../../../core/maybe.js\";\nimport { bilerp as s } from \"../support/mathUtils.js\";\nimport { ELEVATION_NODATA_VALUE as i } from \"./TerrainConst.js\";\n\nclass e {\n  constructor(t, a, o) {\n    this.type = \"elevation\", this.samplerData = null, this.level = t[0], this.i = t[1], this.j = t[2], this.extent = a;\n    const s = o.noDataValue,\n          i = o.values;\n    let e = 1 / 0,\n        l = -1 / 0,\n        h = !0,\n        r = !1;\n\n    for (let n = 0; n < i.length; n++) {\n      const t = i[n];\n      t !== s ? (e = t < e ? t : e, l = t > l ? t : l, h = !1) : r = !0;\n    }\n\n    h && (e = 0, l = 0), l = l > -3e38 ? l : 0, this.samplerData = {\n      pixelData: o.values,\n      width: o.width,\n      height: o.height,\n      noDataValue: s,\n      safeWidth: .99999999 * (o.width - 1),\n      dx: (o.width - 1) / (a[2] - a[0]),\n      dy: (o.width - 1) / (a[3] - a[1]),\n      x0: a[0],\n      y1: a[3]\n    }, this.bounds = [e, l], this.hasNoDataValues = r;\n  }\n\n  release() {\n    this.samplerData = null, this.bounds = null;\n  }\n\n  computeMinMaxValue(t, a, o, e) {\n    e.min = 1 / 0, e.max = -1 / 0, e.hasNoDataValues = !1;\n    const l = t - this.level;\n    if (l <= 0) return e;\n    const h = 2 ** l;\n    if (!(Math.floor(a / h) === this.i && Math.floor(o / h) === this.j)) return e;\n    let r = 1 / 0,\n        n = -1 / 0;\n    const u = this.samplerData.width,\n          f = this.samplerData.pixelData,\n          m = .5 * i;\n    let c = (u - 1) / h,\n        p = (o - this.j * h) * c,\n        d = (a - this.i * h) * c;\n\n    if (c < 1) {\n      const t = Math.floor(p),\n            a = Math.floor(d),\n            o = t + a * u,\n            i = f[o],\n            l = f[o + 1],\n            h = f[o + u],\n            r = f[o + u + 1];\n\n      if (i + l + h + r < m) {\n        const o = p - t,\n              n = d - a,\n              u = s(i, l, h, r, o, n),\n              f = s(i, l, h, r, o + c, n),\n              m = s(i, l, h, r, o, n + c),\n              x = s(i, l, h, r, o + c, n + c);\n        return e.min = Math.min(u, f, m, x), e.max = Math.max(u, f, m, x), e;\n      }\n\n      p = t, d = a, c = 1;\n    } else p = Math.floor(p), d = Math.floor(d), c = Math.ceil(c);\n\n    for (let s = p; s <= p + c; s++) for (let t = d; t <= d + c; t++) {\n      const a = f[s + t * u];\n      a < m ? (r = Math.min(r, a), n = Math.max(n, a)) : e.hasNoDataValues = !0;\n    }\n\n    return e.min = r, e.max = n, e;\n  }\n\n}\n\nfunction l(o, s, e) {\n  if (a(e)) return null;\n\n  for (const a of e) {\n    if (!a) continue;\n    const e = a.safeWidth;\n    let l = t(a.dy * (a.y1 - s), 0, e),\n        h = t(a.dx * (o - a.x0), 0, e);\n    const r = Math.floor(l),\n          n = Math.floor(h),\n          u = a.width,\n          f = r * u + n,\n          m = a.pixelData,\n          c = m[f],\n          p = m[f + 1],\n          d = f + u,\n          x = m[d],\n          M = m[d + 1];\n\n    if (c + x + p + M < .5 * i) {\n      l -= r, h -= n;\n      const t = c + (p - c) * h;\n      return t + (x + (M - x) * h - t) * l;\n    }\n  }\n\n  return null;\n}\n\nfunction h(t, a, s) {\n  const i = l(t, a, s);\n  return o(i) ? i : 0;\n}\n\nexport { e as ElevationData, l as sampleElevation, h as sampleElevationOrZero };","map":{"version":3,"names":["clamp","t","isNone","a","isSome","o","bilerp","s","ELEVATION_NODATA_VALUE","i","e","constructor","type","samplerData","level","j","extent","noDataValue","values","l","h","r","n","length","pixelData","width","height","safeWidth","dx","dy","x0","y1","bounds","hasNoDataValues","release","computeMinMaxValue","min","max","Math","floor","u","f","m","c","p","d","x","ceil","M","ElevationData","sampleElevation","sampleElevationOrZero"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/terrain/ElevationData.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../core/mathUtils.js\";import{isNone as a,isSome as o}from\"../../../core/maybe.js\";import{bilerp as s}from\"../support/mathUtils.js\";import{ELEVATION_NODATA_VALUE as i}from\"./TerrainConst.js\";class e{constructor(t,a,o){this.type=\"elevation\",this.samplerData=null,this.level=t[0],this.i=t[1],this.j=t[2],this.extent=a;const s=o.noDataValue,i=o.values;let e=1/0,l=-1/0,h=!0,r=!1;for(let n=0;n<i.length;n++){const t=i[n];t!==s?(e=t<e?t:e,l=t>l?t:l,h=!1):r=!0}h&&(e=0,l=0),l=l>-3e38?l:0,this.samplerData={pixelData:o.values,width:o.width,height:o.height,noDataValue:s,safeWidth:.99999999*(o.width-1),dx:(o.width-1)/(a[2]-a[0]),dy:(o.width-1)/(a[3]-a[1]),x0:a[0],y1:a[3]},this.bounds=[e,l],this.hasNoDataValues=r}release(){this.samplerData=null,this.bounds=null}computeMinMaxValue(t,a,o,e){e.min=1/0,e.max=-1/0,e.hasNoDataValues=!1;const l=t-this.level;if(l<=0)return e;const h=2**l;if(!(Math.floor(a/h)===this.i&&Math.floor(o/h)===this.j))return e;let r=1/0,n=-1/0;const u=this.samplerData.width,f=this.samplerData.pixelData,m=.5*i;let c=(u-1)/h,p=(o-this.j*h)*c,d=(a-this.i*h)*c;if(c<1){const t=Math.floor(p),a=Math.floor(d),o=t+a*u,i=f[o],l=f[o+1],h=f[o+u],r=f[o+u+1];if(i+l+h+r<m){const o=p-t,n=d-a,u=s(i,l,h,r,o,n),f=s(i,l,h,r,o+c,n),m=s(i,l,h,r,o,n+c),x=s(i,l,h,r,o+c,n+c);return e.min=Math.min(u,f,m,x),e.max=Math.max(u,f,m,x),e}p=t,d=a,c=1}else p=Math.floor(p),d=Math.floor(d),c=Math.ceil(c);for(let s=p;s<=p+c;s++)for(let t=d;t<=d+c;t++){const a=f[s+t*u];a<m?(r=Math.min(r,a),n=Math.max(n,a)):e.hasNoDataValues=!0}return e.min=r,e.max=n,e}}function l(o,s,e){if(a(e))return null;for(const a of e){if(!a)continue;const e=a.safeWidth;let l=t(a.dy*(a.y1-s),0,e),h=t(a.dx*(o-a.x0),0,e);const r=Math.floor(l),n=Math.floor(h),u=a.width,f=r*u+n,m=a.pixelData,c=m[f],p=m[f+1],d=f+u,x=m[d],M=m[d+1];if(c+x+p+M<.5*i){l-=r,h-=n;const t=c+(p-c)*h;return t+(x+(M-x)*h-t)*l}}return null}function h(t,a,s){const i=l(t,a,s);return o(i)?i:0}export{e as ElevationData,l as sampleElevation,h as sampleElevationOrZero};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,KAAK,IAAIC,CAAhB,QAAsB,4BAAtB;AAAmD,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,wBAAnC;AAA4D,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,yBAAvB;AAAiD,SAAOC,sBAAsB,IAAIC,CAAjC,QAAuC,mBAAvC;;AAA2D,MAAMC,CAAN,CAAO;EAACC,WAAW,CAACV,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;IAAC,KAAKO,IAAL,GAAU,WAAV,EAAsB,KAAKC,WAAL,GAAiB,IAAvC,EAA4C,KAAKC,KAAL,GAAWb,CAAC,CAAC,CAAD,CAAxD,EAA4D,KAAKQ,CAAL,GAAOR,CAAC,CAAC,CAAD,CAApE,EAAwE,KAAKc,CAAL,GAAOd,CAAC,CAAC,CAAD,CAAhF,EAAoF,KAAKe,MAAL,GAAYb,CAAhG;IAAkG,MAAMI,CAAC,GAACF,CAAC,CAACY,WAAV;IAAA,MAAsBR,CAAC,GAACJ,CAAC,CAACa,MAA1B;IAAiC,IAAIR,CAAC,GAAC,IAAE,CAAR;IAAA,IAAUS,CAAC,GAAC,CAAC,CAAD,GAAG,CAAf;IAAA,IAAiBC,CAAC,GAAC,CAAC,CAApB;IAAA,IAAsBC,CAAC,GAAC,CAAC,CAAzB;;IAA2B,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACb,CAAC,CAACc,MAAhB,EAAuBD,CAAC,EAAxB,EAA2B;MAAC,MAAMrB,CAAC,GAACQ,CAAC,CAACa,CAAD,CAAT;MAAarB,CAAC,KAAGM,CAAJ,IAAOG,CAAC,GAACT,CAAC,GAACS,CAAF,GAAIT,CAAJ,GAAMS,CAAR,EAAUS,CAAC,GAAClB,CAAC,GAACkB,CAAF,GAAIlB,CAAJ,GAAMkB,CAAlB,EAAoBC,CAAC,GAAC,CAAC,CAA9B,IAAiCC,CAAC,GAAC,CAAC,CAApC;IAAsC;;IAAAD,CAAC,KAAGV,CAAC,GAAC,CAAF,EAAIS,CAAC,GAAC,CAAT,CAAD,EAAaA,CAAC,GAACA,CAAC,GAAC,CAAC,IAAH,GAAQA,CAAR,GAAU,CAAzB,EAA2B,KAAKN,WAAL,GAAiB;MAACW,SAAS,EAACnB,CAAC,CAACa,MAAb;MAAoBO,KAAK,EAACpB,CAAC,CAACoB,KAA5B;MAAkCC,MAAM,EAACrB,CAAC,CAACqB,MAA3C;MAAkDT,WAAW,EAACV,CAA9D;MAAgEoB,SAAS,EAAC,aAAWtB,CAAC,CAACoB,KAAF,GAAQ,CAAnB,CAA1E;MAAgGG,EAAE,EAAC,CAACvB,CAAC,CAACoB,KAAF,GAAQ,CAAT,KAAatB,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAnB,CAAnG;MAA2H0B,EAAE,EAAC,CAACxB,CAAC,CAACoB,KAAF,GAAQ,CAAT,KAAatB,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAnB,CAA9H;MAAsJ2B,EAAE,EAAC3B,CAAC,CAAC,CAAD,CAA1J;MAA8J4B,EAAE,EAAC5B,CAAC,CAAC,CAAD;IAAlK,CAA5C,EAAmN,KAAK6B,MAAL,GAAY,CAACtB,CAAD,EAAGS,CAAH,CAA/N,EAAqO,KAAKc,eAAL,GAAqBZ,CAA1P;EAA4P;;EAAAa,OAAO,GAAE;IAAC,KAAKrB,WAAL,GAAiB,IAAjB,EAAsB,KAAKmB,MAAL,GAAY,IAAlC;EAAuC;;EAAAG,kBAAkB,CAAClC,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOK,CAAP,EAAS;IAACA,CAAC,CAAC0B,GAAF,GAAM,IAAE,CAAR,EAAU1B,CAAC,CAAC2B,GAAF,GAAM,CAAC,CAAD,GAAG,CAAnB,EAAqB3B,CAAC,CAACuB,eAAF,GAAkB,CAAC,CAAxC;IAA0C,MAAMd,CAAC,GAAClB,CAAC,GAAC,KAAKa,KAAf;IAAqB,IAAGK,CAAC,IAAE,CAAN,EAAQ,OAAOT,CAAP;IAAS,MAAMU,CAAC,GAAC,KAAGD,CAAX;IAAa,IAAG,EAAEmB,IAAI,CAACC,KAAL,CAAWpC,CAAC,GAACiB,CAAb,MAAkB,KAAKX,CAAvB,IAA0B6B,IAAI,CAACC,KAAL,CAAWlC,CAAC,GAACe,CAAb,MAAkB,KAAKL,CAAnD,CAAH,EAAyD,OAAOL,CAAP;IAAS,IAAIW,CAAC,GAAC,IAAE,CAAR;IAAA,IAAUC,CAAC,GAAC,CAAC,CAAD,GAAG,CAAf;IAAiB,MAAMkB,CAAC,GAAC,KAAK3B,WAAL,CAAiBY,KAAzB;IAAA,MAA+BgB,CAAC,GAAC,KAAK5B,WAAL,CAAiBW,SAAlD;IAAA,MAA4DkB,CAAC,GAAC,KAAGjC,CAAjE;IAAmE,IAAIkC,CAAC,GAAC,CAACH,CAAC,GAAC,CAAH,IAAMpB,CAAZ;IAAA,IAAcwB,CAAC,GAAC,CAACvC,CAAC,GAAC,KAAKU,CAAL,GAAOK,CAAV,IAAauB,CAA7B;IAAA,IAA+BE,CAAC,GAAC,CAAC1C,CAAC,GAAC,KAAKM,CAAL,GAAOW,CAAV,IAAauB,CAA9C;;IAAgD,IAAGA,CAAC,GAAC,CAAL,EAAO;MAAC,MAAM1C,CAAC,GAACqC,IAAI,CAACC,KAAL,CAAWK,CAAX,CAAR;MAAA,MAAsBzC,CAAC,GAACmC,IAAI,CAACC,KAAL,CAAWM,CAAX,CAAxB;MAAA,MAAsCxC,CAAC,GAACJ,CAAC,GAACE,CAAC,GAACqC,CAA5C;MAAA,MAA8C/B,CAAC,GAACgC,CAAC,CAACpC,CAAD,CAAjD;MAAA,MAAqDc,CAAC,GAACsB,CAAC,CAACpC,CAAC,GAAC,CAAH,CAAxD;MAAA,MAA8De,CAAC,GAACqB,CAAC,CAACpC,CAAC,GAACmC,CAAH,CAAjE;MAAA,MAAuEnB,CAAC,GAACoB,CAAC,CAACpC,CAAC,GAACmC,CAAF,GAAI,CAAL,CAA1E;;MAAkF,IAAG/B,CAAC,GAACU,CAAF,GAAIC,CAAJ,GAAMC,CAAN,GAAQqB,CAAX,EAAa;QAAC,MAAMrC,CAAC,GAACuC,CAAC,GAAC3C,CAAV;QAAA,MAAYqB,CAAC,GAACuB,CAAC,GAAC1C,CAAhB;QAAA,MAAkBqC,CAAC,GAACjC,CAAC,CAACE,CAAD,EAAGU,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAShB,CAAT,EAAWiB,CAAX,CAArB;QAAA,MAAmCmB,CAAC,GAAClC,CAAC,CAACE,CAAD,EAAGU,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAShB,CAAC,GAACsC,CAAX,EAAarB,CAAb,CAAtC;QAAA,MAAsDoB,CAAC,GAACnC,CAAC,CAACE,CAAD,EAAGU,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAShB,CAAT,EAAWiB,CAAC,GAACqB,CAAb,CAAzD;QAAA,MAAyEG,CAAC,GAACvC,CAAC,CAACE,CAAD,EAAGU,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAShB,CAAC,GAACsC,CAAX,EAAarB,CAAC,GAACqB,CAAf,CAA5E;QAA8F,OAAOjC,CAAC,CAAC0B,GAAF,GAAME,IAAI,CAACF,GAAL,CAASI,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeI,CAAf,CAAN,EAAwBpC,CAAC,CAAC2B,GAAF,GAAMC,IAAI,CAACD,GAAL,CAASG,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeI,CAAf,CAA9B,EAAgDpC,CAAvD;MAAyD;;MAAAkC,CAAC,GAAC3C,CAAF,EAAI4C,CAAC,GAAC1C,CAAN,EAAQwC,CAAC,GAAC,CAAV;IAAY,CAA3Q,MAAgRC,CAAC,GAACN,IAAI,CAACC,KAAL,CAAWK,CAAX,CAAF,EAAgBC,CAAC,GAACP,IAAI,CAACC,KAAL,CAAWM,CAAX,CAAlB,EAAgCF,CAAC,GAACL,IAAI,CAACS,IAAL,CAAUJ,CAAV,CAAlC;;IAA+C,KAAI,IAAIpC,CAAC,GAACqC,CAAV,EAAYrC,CAAC,IAAEqC,CAAC,GAACD,CAAjB,EAAmBpC,CAAC,EAApB,EAAuB,KAAI,IAAIN,CAAC,GAAC4C,CAAV,EAAY5C,CAAC,IAAE4C,CAAC,GAACF,CAAjB,EAAmB1C,CAAC,EAApB,EAAuB;MAAC,MAAME,CAAC,GAACsC,CAAC,CAAClC,CAAC,GAACN,CAAC,GAACuC,CAAL,CAAT;MAAiBrC,CAAC,GAACuC,CAAF,IAAKrB,CAAC,GAACiB,IAAI,CAACF,GAAL,CAASf,CAAT,EAAWlB,CAAX,CAAF,EAAgBmB,CAAC,GAACgB,IAAI,CAACD,GAAL,CAASf,CAAT,EAAWnB,CAAX,CAAvB,IAAsCO,CAAC,CAACuB,eAAF,GAAkB,CAAC,CAAzD;IAA2D;;IAAA,OAAOvB,CAAC,CAAC0B,GAAF,GAAMf,CAAN,EAAQX,CAAC,CAAC2B,GAAF,GAAMf,CAAd,EAAgBZ,CAAvB;EAAyB;;AAAh0C;;AAAi0C,SAASS,CAAT,CAAWd,CAAX,EAAaE,CAAb,EAAeG,CAAf,EAAiB;EAAC,IAAGP,CAAC,CAACO,CAAD,CAAJ,EAAQ,OAAO,IAAP;;EAAY,KAAI,MAAMP,CAAV,IAAeO,CAAf,EAAiB;IAAC,IAAG,CAACP,CAAJ,EAAM;IAAS,MAAMO,CAAC,GAACP,CAAC,CAACwB,SAAV;IAAoB,IAAIR,CAAC,GAAClB,CAAC,CAACE,CAAC,CAAC0B,EAAF,IAAM1B,CAAC,CAAC4B,EAAF,GAAKxB,CAAX,CAAD,EAAe,CAAf,EAAiBG,CAAjB,CAAP;IAAA,IAA2BU,CAAC,GAACnB,CAAC,CAACE,CAAC,CAACyB,EAAF,IAAMvB,CAAC,GAACF,CAAC,CAAC2B,EAAV,CAAD,EAAe,CAAf,EAAiBpB,CAAjB,CAA9B;IAAkD,MAAMW,CAAC,GAACiB,IAAI,CAACC,KAAL,CAAWpB,CAAX,CAAR;IAAA,MAAsBG,CAAC,GAACgB,IAAI,CAACC,KAAL,CAAWnB,CAAX,CAAxB;IAAA,MAAsCoB,CAAC,GAACrC,CAAC,CAACsB,KAA1C;IAAA,MAAgDgB,CAAC,GAACpB,CAAC,GAACmB,CAAF,GAAIlB,CAAtD;IAAA,MAAwDoB,CAAC,GAACvC,CAAC,CAACqB,SAA5D;IAAA,MAAsEmB,CAAC,GAACD,CAAC,CAACD,CAAD,CAAzE;IAAA,MAA6EG,CAAC,GAACF,CAAC,CAACD,CAAC,GAAC,CAAH,CAAhF;IAAA,MAAsFI,CAAC,GAACJ,CAAC,GAACD,CAA1F;IAAA,MAA4FM,CAAC,GAACJ,CAAC,CAACG,CAAD,CAA/F;IAAA,MAAmGG,CAAC,GAACN,CAAC,CAACG,CAAC,GAAC,CAAH,CAAtG;;IAA4G,IAAGF,CAAC,GAACG,CAAF,GAAIF,CAAJ,GAAMI,CAAN,GAAQ,KAAGvC,CAAd,EAAgB;MAACU,CAAC,IAAEE,CAAH,EAAKD,CAAC,IAAEE,CAAR;MAAU,MAAMrB,CAAC,GAAC0C,CAAC,GAAC,CAACC,CAAC,GAACD,CAAH,IAAMvB,CAAhB;MAAkB,OAAOnB,CAAC,GAAC,CAAC6C,CAAC,GAAC,CAACE,CAAC,GAACF,CAAH,IAAM1B,CAAR,GAAUnB,CAAX,IAAckB,CAAvB;IAAyB;EAAC;;EAAA,OAAO,IAAP;AAAY;;AAAA,SAASC,CAAT,CAAWnB,CAAX,EAAaE,CAAb,EAAeI,CAAf,EAAiB;EAAC,MAAME,CAAC,GAACU,CAAC,CAAClB,CAAD,EAAGE,CAAH,EAAKI,CAAL,CAAT;EAAiB,OAAOF,CAAC,CAACI,CAAD,CAAD,GAAKA,CAAL,GAAO,CAAd;AAAgB;;AAAA,SAAOC,CAAC,IAAIuC,aAAZ,EAA0B9B,CAAC,IAAI+B,eAA/B,EAA+C9B,CAAC,IAAI+B,qBAApD"},"metadata":{},"sourceType":"module"}