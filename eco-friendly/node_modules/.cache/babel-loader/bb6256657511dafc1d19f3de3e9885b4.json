{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { id as e } from \"../kernel.js\";\nimport t from \"../request.js\";\nimport a from \"./featureSetCollection.js\";\nimport r from \"./featureset/actions/AttributeFilter.js\";\nimport n from \"./featureset/actions/GroupBy.js\";\nimport s from \"./featureset/actions/OrderBy.js\";\nimport i from \"./featureset/actions/SpatialFilter.js\";\nimport l from \"./featureset/actions/Top.js\";\nimport o from \"./featureset/sources/FeatureLayerDynamic.js\";\nimport u from \"./featureset/sources/FeatureLayerMemory.js\";\nimport c from \"./featureset/sources/FeatureLayerRelated.js\";\nimport d from \"./featureset/support/cache.js\";\nimport { FeatureSetError as f, FeatureSetErrorCodes as m } from \"./featureset/support/errorsupport.js\";\nimport p from \"./featureset/support/FeatureSet.js\";\nimport { extractServiceUrl as y } from \"./featureset/support/shared.js\";\nimport { WhereClause as h } from \"../core/sql/WhereClause.js\";\nimport _ from \"../layers/FeatureLayer.js\";\nimport L from \"../portal/Portal.js\";\nimport w from \"../portal/PortalItem.js\";\n\nfunction I() {\n  null === d.applicationCache && (d.applicationCache = new d());\n}\n\nasync function S(e, t) {\n  if (d.applicationCache) {\n    const r = d.applicationCache.getLayerInfo(e);\n\n    if (r) {\n      const a = await r;\n      return new _({\n        url: e,\n        outFields: t,\n        sourceJSON: a\n      });\n    }\n\n    const n = new _({\n      url: e,\n      outFields: t\n    }),\n          s = (async () => (await n.load(), n.sourceJSON))();\n\n    if (d.applicationCache) {\n      d.applicationCache.setLayerInfo(e, s);\n\n      try {\n        return await s, n;\n      } catch (a) {\n        throw d.applicationCache.clearLayerInfo(e), a;\n      }\n    }\n\n    return await s, n;\n  }\n\n  return new _({\n    url: e,\n    outFields: t\n  });\n}\n\nasync function N(e, t, a, r, n, s = null) {\n  return F(await S(e, [\"*\"]), t, a, r, n, s);\n}\n\nfunction F(e, t = null, a = null, r = !0, n = null, s = null) {\n  const i = {\n    layer: e,\n    spatialReference: t,\n    outFields: a,\n    includeGeometry: r,\n    lrucache: n,\n    interceptor: s\n  };\n  return !0 === e._hasMemorySource() ? new u(i) : new o(i);\n}\n\nasync function T(e) {\n  if (null !== d.applicationCache) {\n    const t = d.applicationCache.getLayerInfo(e);\n    if (null !== t) return t;\n  }\n\n  const a = (async () => {\n    const a = await t(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    });\n    return a.data ? a.data : null;\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(e, a);\n\n    try {\n      return await a;\n    } catch (r) {\n      throw d.applicationCache.clearLayerInfo(e), r;\n    }\n  }\n\n  return a;\n}\n\nasync function g(e, a) {\n  const r = \"QUERYDATAELEMTS:\" + a.toString() + \":\" + e;\n\n  if (null !== d.applicationCache) {\n    const e = d.applicationCache.getLayerInfo(r);\n    if (null !== e) return e;\n  }\n\n  const n = (async () => {\n    const r = await t(e + \"/queryDataElements\", {\n      method: \"post\",\n      responseType: \"json\",\n      query: {\n        layers: JSON.stringify([a.toString()]),\n        f: \"json\"\n      }\n    });\n\n    if (r.data) {\n      const e = r.data;\n      if (e.layerDataElements && e.layerDataElements[0]) return e.layerDataElements[0];\n    }\n\n    throw new f(m.DataElementsNotFound);\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(r, n);\n\n    try {\n      return await n;\n    } catch (s) {\n      throw d.applicationCache.clearLayerInfo(r), s;\n    }\n  }\n\n  return n;\n}\n\nasync function A(e) {\n  if (null !== d.applicationCache) {\n    const t = d.applicationCache.getLayerInfo(e);\n    if (null !== t) return t;\n  }\n\n  const a = (async () => {\n    const a = await t(e, {\n      responseType: \"json\",\n      query: {\n        f: \"json\"\n      }\n    });\n\n    if (a.data) {\n      const e = a.data;\n      return e.layers || (e.layers = []), e.tables || (e.tables = []), e;\n    }\n\n    return {\n      layers: [],\n      tables: []\n    };\n  })();\n\n  if (null !== d.applicationCache) {\n    d.applicationCache.setLayerInfo(e, a);\n\n    try {\n      return await a;\n    } catch (r) {\n      throw d.applicationCache.clearLayerInfo(e), r;\n    }\n  }\n\n  return a;\n}\n\nasync function C(e, t) {\n  const a = {\n    metadata: null,\n    networkId: -1,\n    unVersion: 3,\n    terminals: [],\n    queryelem: null,\n    layerNameLkp: {},\n    lkp: null\n  },\n        r = await A(e);\n\n  if (a.metadata = r, r.controllerDatasetLayers && void 0 !== r.controllerDatasetLayers.utilityNetworkLayerId && null !== r.controllerDatasetLayers.utilityNetworkLayerId) {\n    if (r.layers) for (const e of r.layers) a.layerNameLkp[e.id] = e.name;\n    if (r.tables) for (const e of r.tables) a.layerNameLkp[e.id] = e.name;\n    const n = r.controllerDatasetLayers.utilityNetworkLayerId;\n    a.networkId = n;\n    const s = await g(e, n);\n\n    if (s) {\n      a.queryelem = s, a.queryelem && a.queryelem.dataElement && void 0 !== a.queryelem.dataElement.schemaGeneration && (a.unVersion = a.queryelem.dataElement.schemaGeneration), a.lkp = {}, a.queryelem.dataElement.domainNetworks || (a.queryelem.dataElement.domainNetworks = []);\n\n      for (const e of a.queryelem.dataElement.domainNetworks) {\n        for (const t of e.edgeSources ? e.edgeSources : []) {\n          const e = {\n            layerId: t.layerId,\n            sourceId: t.sourceId,\n            className: a.layerNameLkp[t.layerId] ? a.layerNameLkp[t.layerId] : null\n          };\n          e.className && (a.lkp[e.className] = e);\n        }\n\n        for (const t of e.junctionSources ? e.junctionSources : []) {\n          const e = {\n            layerId: t.layerId,\n            sourceId: t.sourceId,\n            className: a.layerNameLkp[t.layerId] ? a.layerNameLkp[t.layerId] : null\n          };\n          e.className && (a.lkp[e.className] = e);\n        }\n      }\n\n      if (a.queryelem.dataElement.terminalConfigurations) for (const e of a.queryelem.dataElement.terminalConfigurations) for (const t of e.terminals) a.terminals.push({\n        terminalId: t.terminalId,\n        terminalName: t.terminalName\n      });\n      const r = await T(e + \"/\" + n);\n\n      if (r.systemLayers && void 0 !== r.systemLayers.associationsTableId && null !== r.systemLayers.associationsTableId) {\n        const n = [];\n        a.unVersion >= 4 && (n.push(\"STATUS\"), n.push(\"PERCENTALONG\"));\n        let s = await N(e + \"/\" + r.systemLayers.associationsTableId.toString(), t, [\"OBJECTID\", \"FROMNETWORKSOURCEID\", \"TONETWORKSOURCEID\", \"FROMGLOBALID\", \"TOGLOBALID\", \"TOTERMINALID\", \"FROMTERMINALID\", \"ASSOCIATIONTYPE\", \"ISCONTENTVISIBLE\", \"GLOBALID\", ...n], !1, null, null);\n        return await s.load(), a.unVersion >= 4 && (s = s.filter(h.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\", s.getFieldsIndex())), await s.load()), {\n          lkp: a.lkp,\n          associations: s,\n          unVersion: a.unVersion,\n          terminals: a.terminals\n        };\n      }\n\n      return {\n        associations: null,\n        unVersion: a.unVersion,\n        lkp: null,\n        terminals: []\n      };\n    }\n\n    return {\n      associations: null,\n      unVersion: a.unVersion,\n      lkp: null,\n      terminals: []\n    };\n  }\n\n  return {\n    associations: null,\n    unVersion: a.unVersion,\n    lkp: null,\n    terminals: []\n  };\n}\n\nasync function k(e, t, a, r = null, n = null, s = !0, i = null, l = null) {\n  let o = e.serviceUrl();\n  if (!o) return null;\n  o = \"/\" === o.charAt(o.length - 1) ? o + t.relatedTableId.toString() : o + \"/\" + t.relatedTableId.toString();\n  const u = await N(o, r, n, s, i, l);\n  return new c({\n    layer: e,\n    relatedLayer: u,\n    relationship: t,\n    objectId: a,\n    spatialReference: r,\n    outFields: n,\n    includeGeometry: s,\n    lrucache: i,\n    interceptor: l\n  });\n}\n\nr.registerAction(), n.registerAction(), s.registerAction(), i.registerAction(), l.registerAction();\n\nclass j extends a {\n  constructor(e, t = null, a = null, r = null) {\n    super(), this._map = e, this._overridespref = t, this._lrucache = a, this._interceptor = r, this._instantLayers = [];\n  }\n\n  _makeAndAddFeatureSet(e, t = !0, a = null) {\n    const r = F(e, this._overridespref, null === a ? [\"*\"] : a, t, this._lrucache, this._interceptor);\n    return this._instantLayers.push({\n      featureset: r,\n      opitem: e,\n      includeGeometry: t,\n      outFields: JSON.stringify(a)\n    }), r;\n  }\n\n  async featureSetByName(e, t = !0, a = null) {\n    if (void 0 !== this._map.loaded && void 0 !== this._map.load && !1 === this._map.loaded) return await this._map.load(), this.featureSetByName(e, t, a);\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let s = 0; s < this._instantLayers.length; s++) {\n      const a = this._instantLayers[s];\n      if (a.opitem.title === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[s].featureset;\n    }\n\n    const n = this._map.allLayers.find(t => t instanceof _ && t.title === e);\n\n    if (n) return this._makeAndAddFeatureSet(n, t, a);\n\n    if (this._map.tables) {\n      const r = this._map.tables.find(t => !!(t.title && t.title === e || t.title && t.title === e));\n\n      if (r) {\n        if (r instanceof _) return this._makeAndAddFeatureSet(r, t, a);\n        if (r._materializedTable) ;else {\n          const e = r.outFields ? r : { ...r,\n            outFields: [\"*\"]\n          };\n          r._materializedTable = new _(e);\n        }\n        return await r._materializedTable.load(), this._makeAndAddFeatureSet(r._materializedTable, t, a);\n      }\n    }\n\n    return null;\n  }\n\n  async featureSetById(e, t = !0, a = [\"*\"]) {\n    if (void 0 !== this._map.loaded && void 0 !== this._map.load && !1 === this._map.loaded) return await this._map.load(), this.featureSetById(e, t, a);\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let s = 0; s < this._instantLayers.length; s++) {\n      const a = this._instantLayers[s];\n      if (a.opitem.id === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[s].featureset;\n    }\n\n    const n = this._map.allLayers.find(t => t instanceof _ && t.id === e);\n\n    if (n) return this._makeAndAddFeatureSet(n, t, a);\n\n    if (this._map.tables) {\n      const r = this._map.tables.find(t => t.id === e);\n\n      if (r) {\n        if (r instanceof _) return this._makeAndAddFeatureSet(r, t, a);\n        if (r._materializedTable) ;else {\n          const e = { ...r,\n            outFields: [\"*\"]\n          };\n          r._materializedTable = new _(e);\n        }\n        return await r._materializedTable.load(), this._makeAndAddFeatureSet(r._materializedTable, t, a);\n      }\n    }\n\n    return null;\n  }\n\n}\n\nclass O extends a {\n  constructor(e, t = null, a = null, r = null) {\n    super(), this._url = e, this._overridespref = t, this._lrucache = a, this._interceptor = r, this.metadata = null, this._instantLayers = [];\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  _makeAndAddFeatureSet(e, t = !0, a = null) {\n    const r = F(e, this._overridespref, null === a ? [\"*\"] : a, t, this._lrucache);\n    return this._instantLayers.push({\n      featureset: r,\n      opitem: e,\n      includeGeometry: t,\n      outFields: JSON.stringify(a)\n    }), r;\n  }\n\n  async _loadMetaData() {\n    const e = await A(this._url);\n    return this.metadata = e, e;\n  }\n\n  load() {\n    return this._loadMetaData();\n  }\n\n  clone() {\n    return new O(this._url, this._overridespref, this._lrucache, this._interceptor);\n  }\n\n  async featureSetByName(e, t = !0, a = null) {\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n\n    for (let i = 0; i < this._instantLayers.length; i++) {\n      const a = this._instantLayers[i];\n      if (a.opitem.title === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[i].featureset;\n    }\n\n    const n = await this._loadMetaData();\n    let s = null;\n\n    for (const i of n.layers ? n.layers : []) i.name === e && (s = i);\n\n    if (!s) for (const i of n.tables ? n.tables : []) i.name === e && (s = i);\n\n    if (s) {\n      const e = await S(this._url + \"/\" + s.id, [\"*\"]);\n      return this._makeAndAddFeatureSet(e, t, a);\n    }\n\n    return null;\n  }\n\n  async featureSetById(e, t = !0, a = [\"*\"]) {\n    null === a && (a = [\"*\"]), a = (a = a.slice(0)).sort();\n    const r = JSON.stringify(a);\n    e = null != e ? e.toString() : \"\";\n\n    for (let i = 0; i < this._instantLayers.length; i++) {\n      const a = this._instantLayers[i];\n      if (a.opitem.id === e && a.includeGeometry === t && a.outFields === r) return this._instantLayers[i].featureset;\n    }\n\n    const n = await this._loadMetaData();\n    let s = null;\n\n    for (const i of n.layers ? n.layers : []) null !== i.id && void 0 !== i.id && i.id.toString() === e && (s = i);\n\n    if (!s) for (const i of n.tables ? n.tables : []) null !== i.id && void 0 !== i.id && i.id.toString() === e && (s = i);\n\n    if (s) {\n      const e = await S(this._url + \"/\" + s.id, [\"*\"]);\n      return this._makeAndAddFeatureSet(e, t, a);\n    }\n\n    return null;\n  }\n\n}\n\nfunction E(e, t, a = null, r = null) {\n  return new j(e, t, a, r);\n}\n\nfunction b(e, t, a = null, r = null) {\n  return new O(e, t, a, r);\n}\n\nfunction D(e, t) {\n  if (null === e) return t;\n  return new L({\n    url: e.field(\"url\")\n  });\n}\n\nasync function q(a, r, n) {\n  if (!e.findCredential(a.restUrl)) return null;\n  if (\"loaded\" === a.loadStatus && \"\" === r && a.user && a.user.sourceJSON && !1 === n) return a.user.sourceJSON;\n\n  if (\"\" === r) {\n    const e = await t(a.restUrl + \"/community/self\", {\n      responseType: \"json\",\n      query: {\n        f: \"json\",\n        ...(!1 === n ? {} : {\n          returnUserLicenseTypeExtensions: !0\n        })\n      }\n    });\n\n    if (e.data) {\n      const t = e.data;\n      if (t && t.username) return t;\n    }\n\n    return null;\n  }\n\n  const s = await t(a.restUrl + \"/community/users/\" + r, {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    }\n  });\n\n  if (s.data) {\n    const e = s.data;\n    return e.error ? null : e;\n  }\n\n  return null;\n}\n\nfunction v(e, t, a, r, n) {\n  if (null === e) return null;\n\n  if (e instanceof _) {\n    switch (t) {\n      case \"datasource\":\n        return F(e, n, e.outFields, !0, a, r).getDataSourceFeatureSet();\n\n      case \"parent\":\n      case \"root\":\n        return F(e, n, e.outFields, !0, a, r);\n    }\n\n    return null;\n  }\n\n  if (e instanceof p) switch (t) {\n    case \"datasource\":\n      return e.getDataSourceFeatureSet();\n\n    case \"parent\":\n      return e;\n\n    case \"root\":\n      return e.getRootFeatureSet();\n  }\n  return null;\n}\n\nasync function G(e, t, a, r, n, s, i, l = null) {\n  if (d.applicationCache) {\n    const o = d.applicationCache.getLayerInfo(e + \":\" + s.url);\n\n    if (o) {\n      const e = await o;\n      return F(new _({\n        url: y(e.url) + \"/\" + t,\n        outFields: [\"*\"]\n      }), a, r, n, i, l);\n    }\n  }\n\n  const o = new w({\n    id: e,\n    portal: s\n  }).load();\n  d.applicationCache && d.applicationCache.setLayerInfo(e + \":\" + s.url, o);\n\n  try {\n    const e = await o;\n    return F(new _({\n      url: y(e.url ?? \"\") + \"/\" + t,\n      outFields: [\"*\"]\n    }), a, r, n, i, l);\n  } catch (u) {\n    throw d.applicationCache && d.applicationCache.clearLayerInfo(e + \":\" + s.url), u;\n  }\n}\n\nexport { C as constructAssociationMetaDataFeatureSetFromUrl, F as constructFeatureSet, G as constructFeatureSetFromPortalItem, k as constructFeatureSetFromRelationship, N as constructFeatureSetFromUrl, v as convertToFeatureSet, E as createFeatureSetCollectionFromMap, b as createFeatureSetCollectionFromService, D as getPortal, I as initialiseMetaDataCache, q as lookupUser };","map":{"version":3,"names":["id","e","t","a","r","n","s","i","l","o","u","c","d","FeatureSetError","f","FeatureSetErrorCodes","m","p","extractServiceUrl","y","WhereClause","h","_","L","w","I","applicationCache","S","getLayerInfo","url","outFields","sourceJSON","load","setLayerInfo","clearLayerInfo","N","F","layer","spatialReference","includeGeometry","lrucache","interceptor","_hasMemorySource","T","responseType","query","data","g","toString","method","layers","JSON","stringify","layerDataElements","DataElementsNotFound","A","tables","C","metadata","networkId","unVersion","terminals","queryelem","layerNameLkp","lkp","controllerDatasetLayers","utilityNetworkLayerId","name","dataElement","schemaGeneration","domainNetworks","edgeSources","layerId","sourceId","className","junctionSources","terminalConfigurations","push","terminalId","terminalName","systemLayers","associationsTableId","filter","create","getFieldsIndex","associations","k","serviceUrl","charAt","length","relatedTableId","relatedLayer","relationship","objectId","registerAction","j","constructor","_map","_overridespref","_lrucache","_interceptor","_instantLayers","_makeAndAddFeatureSet","featureset","opitem","featureSetByName","loaded","slice","sort","title","allLayers","find","_materializedTable","featureSetById","O","_url","_loadMetaData","clone","E","b","D","field","q","findCredential","restUrl","loadStatus","user","returnUserLicenseTypeExtensions","username","error","v","getDataSourceFeatureSet","getRootFeatureSet","G","portal","constructAssociationMetaDataFeatureSetFromUrl","constructFeatureSet","constructFeatureSetFromPortalItem","constructFeatureSetFromRelationship","constructFeatureSetFromUrl","convertToFeatureSet","createFeatureSetCollectionFromMap","createFeatureSetCollectionFromService","getPortal","initialiseMetaDataCache","lookupUser"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/featureSetUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{id as e}from\"../kernel.js\";import t from\"../request.js\";import a from\"./featureSetCollection.js\";import r from\"./featureset/actions/AttributeFilter.js\";import n from\"./featureset/actions/GroupBy.js\";import s from\"./featureset/actions/OrderBy.js\";import i from\"./featureset/actions/SpatialFilter.js\";import l from\"./featureset/actions/Top.js\";import o from\"./featureset/sources/FeatureLayerDynamic.js\";import u from\"./featureset/sources/FeatureLayerMemory.js\";import c from\"./featureset/sources/FeatureLayerRelated.js\";import d from\"./featureset/support/cache.js\";import{FeatureSetError as f,FeatureSetErrorCodes as m}from\"./featureset/support/errorsupport.js\";import p from\"./featureset/support/FeatureSet.js\";import{extractServiceUrl as y}from\"./featureset/support/shared.js\";import{WhereClause as h}from\"../core/sql/WhereClause.js\";import _ from\"../layers/FeatureLayer.js\";import L from\"../portal/Portal.js\";import w from\"../portal/PortalItem.js\";function I(){null===d.applicationCache&&(d.applicationCache=new d)}async function S(e,t){if(d.applicationCache){const r=d.applicationCache.getLayerInfo(e);if(r){const a=await r;return new _({url:e,outFields:t,sourceJSON:a})}const n=new _({url:e,outFields:t}),s=(async()=>(await n.load(),n.sourceJSON))();if(d.applicationCache){d.applicationCache.setLayerInfo(e,s);try{return await s,n}catch(a){throw d.applicationCache.clearLayerInfo(e),a}}return await s,n}return new _({url:e,outFields:t})}async function N(e,t,a,r,n,s=null){return F(await S(e,[\"*\"]),t,a,r,n,s)}function F(e,t=null,a=null,r=!0,n=null,s=null){const i={layer:e,spatialReference:t,outFields:a,includeGeometry:r,lrucache:n,interceptor:s};return!0===e._hasMemorySource()?new u(i):new o(i)}async function T(e){if(null!==d.applicationCache){const t=d.applicationCache.getLayerInfo(e);if(null!==t)return t}const a=(async()=>{const a=await t(e,{responseType:\"json\",query:{f:\"json\"}});return a.data?a.data:null})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(e,a);try{return await a}catch(r){throw d.applicationCache.clearLayerInfo(e),r}}return a}async function g(e,a){const r=\"QUERYDATAELEMTS:\"+a.toString()+\":\"+e;if(null!==d.applicationCache){const e=d.applicationCache.getLayerInfo(r);if(null!==e)return e}const n=(async()=>{const r=await t(e+\"/queryDataElements\",{method:\"post\",responseType:\"json\",query:{layers:JSON.stringify([a.toString()]),f:\"json\"}});if(r.data){const e=r.data;if(e.layerDataElements&&e.layerDataElements[0])return e.layerDataElements[0]}throw new f(m.DataElementsNotFound)})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(r,n);try{return await n}catch(s){throw d.applicationCache.clearLayerInfo(r),s}}return n}async function A(e){if(null!==d.applicationCache){const t=d.applicationCache.getLayerInfo(e);if(null!==t)return t}const a=(async()=>{const a=await t(e,{responseType:\"json\",query:{f:\"json\"}});if(a.data){const e=a.data;return e.layers||(e.layers=[]),e.tables||(e.tables=[]),e}return{layers:[],tables:[]}})();if(null!==d.applicationCache){d.applicationCache.setLayerInfo(e,a);try{return await a}catch(r){throw d.applicationCache.clearLayerInfo(e),r}}return a}async function C(e,t){const a={metadata:null,networkId:-1,unVersion:3,terminals:[],queryelem:null,layerNameLkp:{},lkp:null},r=await A(e);if(a.metadata=r,r.controllerDatasetLayers&&void 0!==r.controllerDatasetLayers.utilityNetworkLayerId&&null!==r.controllerDatasetLayers.utilityNetworkLayerId){if(r.layers)for(const e of r.layers)a.layerNameLkp[e.id]=e.name;if(r.tables)for(const e of r.tables)a.layerNameLkp[e.id]=e.name;const n=r.controllerDatasetLayers.utilityNetworkLayerId;a.networkId=n;const s=await g(e,n);if(s){a.queryelem=s,a.queryelem&&a.queryelem.dataElement&&void 0!==a.queryelem.dataElement.schemaGeneration&&(a.unVersion=a.queryelem.dataElement.schemaGeneration),a.lkp={},a.queryelem.dataElement.domainNetworks||(a.queryelem.dataElement.domainNetworks=[]);for(const e of a.queryelem.dataElement.domainNetworks){for(const t of e.edgeSources?e.edgeSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}for(const t of e.junctionSources?e.junctionSources:[]){const e={layerId:t.layerId,sourceId:t.sourceId,className:a.layerNameLkp[t.layerId]?a.layerNameLkp[t.layerId]:null};e.className&&(a.lkp[e.className]=e)}}if(a.queryelem.dataElement.terminalConfigurations)for(const e of a.queryelem.dataElement.terminalConfigurations)for(const t of e.terminals)a.terminals.push({terminalId:t.terminalId,terminalName:t.terminalName});const r=await T(e+\"/\"+n);if(r.systemLayers&&void 0!==r.systemLayers.associationsTableId&&null!==r.systemLayers.associationsTableId){const n=[];a.unVersion>=4&&(n.push(\"STATUS\"),n.push(\"PERCENTALONG\"));let s=await N(e+\"/\"+r.systemLayers.associationsTableId.toString(),t,[\"OBJECTID\",\"FROMNETWORKSOURCEID\",\"TONETWORKSOURCEID\",\"FROMGLOBALID\",\"TOGLOBALID\",\"TOTERMINALID\",\"FROMTERMINALID\",\"ASSOCIATIONTYPE\",\"ISCONTENTVISIBLE\",\"GLOBALID\",...n],!1,null,null);return await s.load(),a.unVersion>=4&&(s=s.filter(h.create(\"STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62,63)\",s.getFieldsIndex())),await s.load()),{lkp:a.lkp,associations:s,unVersion:a.unVersion,terminals:a.terminals}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}return{associations:null,unVersion:a.unVersion,lkp:null,terminals:[]}}async function k(e,t,a,r=null,n=null,s=!0,i=null,l=null){let o=e.serviceUrl();if(!o)return null;o=\"/\"===o.charAt(o.length-1)?o+t.relatedTableId.toString():o+\"/\"+t.relatedTableId.toString();const u=await N(o,r,n,s,i,l);return new c({layer:e,relatedLayer:u,relationship:t,objectId:a,spatialReference:r,outFields:n,includeGeometry:s,lrucache:i,interceptor:l})}r.registerAction(),n.registerAction(),s.registerAction(),i.registerAction(),l.registerAction();class j extends a{constructor(e,t=null,a=null,r=null){super(),this._map=e,this._overridespref=t,this._lrucache=a,this._interceptor=r,this._instantLayers=[]}_makeAndAddFeatureSet(e,t=!0,a=null){const r=F(e,this._overridespref,null===a?[\"*\"]:a,t,this._lrucache,this._interceptor);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async featureSetByName(e,t=!0,a=null){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetByName(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=this._map.allLayers.find((t=>t instanceof _&&t.title===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>!!(t.title&&t.title===e||t.title&&t.title===e)));if(r){if(r instanceof _)return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e=r.outFields?r:{...r,outFields:[\"*\"]};r._materializedTable=new _(e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}async featureSetById(e,t=!0,a=[\"*\"]){if(void 0!==this._map.loaded&&void 0!==this._map.load&&!1===this._map.loaded)return await this._map.load(),this.featureSetById(e,t,a);null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let s=0;s<this._instantLayers.length;s++){const a=this._instantLayers[s];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[s].featureset}const n=this._map.allLayers.find((t=>t instanceof _&&t.id===e));if(n)return this._makeAndAddFeatureSet(n,t,a);if(this._map.tables){const r=this._map.tables.find((t=>t.id===e));if(r){if(r instanceof _)return this._makeAndAddFeatureSet(r,t,a);if(r._materializedTable);else{const e={...r,outFields:[\"*\"]};r._materializedTable=new _(e)}return await r._materializedTable.load(),this._makeAndAddFeatureSet(r._materializedTable,t,a)}}return null}}class O extends a{constructor(e,t=null,a=null,r=null){super(),this._url=e,this._overridespref=t,this._lrucache=a,this._interceptor=r,this.metadata=null,this._instantLayers=[]}get url(){return this._url}_makeAndAddFeatureSet(e,t=!0,a=null){const r=F(e,this._overridespref,null===a?[\"*\"]:a,t,this._lrucache);return this._instantLayers.push({featureset:r,opitem:e,includeGeometry:t,outFields:JSON.stringify(a)}),r}async _loadMetaData(){const e=await A(this._url);return this.metadata=e,e}load(){return this._loadMetaData()}clone(){return new O(this._url,this._overridespref,this._lrucache,this._interceptor)}async featureSetByName(e,t=!0,a=null){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.title===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=await this._loadMetaData();let s=null;for(const i of n.layers?n.layers:[])i.name===e&&(s=i);if(!s)for(const i of n.tables?n.tables:[])i.name===e&&(s=i);if(s){const e=await S(this._url+\"/\"+s.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}async featureSetById(e,t=!0,a=[\"*\"]){null===a&&(a=[\"*\"]),a=(a=a.slice(0)).sort();const r=JSON.stringify(a);e=null!=e?e.toString():\"\";for(let i=0;i<this._instantLayers.length;i++){const a=this._instantLayers[i];if(a.opitem.id===e&&a.includeGeometry===t&&a.outFields===r)return this._instantLayers[i].featureset}const n=await this._loadMetaData();let s=null;for(const i of n.layers?n.layers:[])null!==i.id&&void 0!==i.id&&i.id.toString()===e&&(s=i);if(!s)for(const i of n.tables?n.tables:[])null!==i.id&&void 0!==i.id&&i.id.toString()===e&&(s=i);if(s){const e=await S(this._url+\"/\"+s.id,[\"*\"]);return this._makeAndAddFeatureSet(e,t,a)}return null}}function E(e,t,a=null,r=null){return new j(e,t,a,r)}function b(e,t,a=null,r=null){return new O(e,t,a,r)}function D(e,t){if(null===e)return t;return new L({url:e.field(\"url\")})}async function q(a,r,n){if(!e.findCredential(a.restUrl))return null;if(\"loaded\"===a.loadStatus&&\"\"===r&&a.user&&a.user.sourceJSON&&!1===n)return a.user.sourceJSON;if(\"\"===r){const e=await t(a.restUrl+\"/community/self\",{responseType:\"json\",query:{f:\"json\",...!1===n?{}:{returnUserLicenseTypeExtensions:!0}}});if(e.data){const t=e.data;if(t&&t.username)return t}return null}const s=await t(a.restUrl+\"/community/users/\"+r,{responseType:\"json\",query:{f:\"json\"}});if(s.data){const e=s.data;return e.error?null:e}return null}function v(e,t,a,r,n){if(null===e)return null;if(e instanceof _){switch(t){case\"datasource\":return F(e,n,e.outFields,!0,a,r).getDataSourceFeatureSet();case\"parent\":case\"root\":return F(e,n,e.outFields,!0,a,r)}return null}if(e instanceof p)switch(t){case\"datasource\":return e.getDataSourceFeatureSet();case\"parent\":return e;case\"root\":return e.getRootFeatureSet()}return null}async function G(e,t,a,r,n,s,i,l=null){if(d.applicationCache){const o=d.applicationCache.getLayerInfo(e+\":\"+s.url);if(o){const e=await o;return F(new _({url:y(e.url)+\"/\"+t,outFields:[\"*\"]}),a,r,n,i,l)}}const o=new w({id:e,portal:s}).load();d.applicationCache&&d.applicationCache.setLayerInfo(e+\":\"+s.url,o);try{const e=await o;return F(new _({url:y(e.url??\"\")+\"/\"+t,outFields:[\"*\"]}),a,r,n,i,l)}catch(u){throw d.applicationCache&&d.applicationCache.clearLayerInfo(e+\":\"+s.url),u}}export{C as constructAssociationMetaDataFeatureSetFromUrl,F as constructFeatureSet,G as constructFeatureSetFromPortalItem,k as constructFeatureSetFromRelationship,N as constructFeatureSetFromUrl,v as convertToFeatureSet,E as createFeatureSetCollectionFromMap,b as createFeatureSetCollectionFromService,D as getPortal,I as initialiseMetaDataCache,q as lookupUser};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}