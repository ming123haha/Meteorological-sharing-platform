{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from \"../ArcadePortal.js\";\nimport t from \"../Dictionary.js\";\nimport { ArcadeExecutionError as n, ExecutionErrorCodes as i } from \"../executionError.js\";\nimport a from \"../Feature.js\";\nimport r from \"../featureSetCollection.js\";\nimport { getPortal as s, lookupUser as o, convertToFeatureSet as l, constructFeatureSetFromPortalItem as f, constructFeatureSet as c, constructFeatureSetFromRelationship as u, constructFeatureSetFromUrl as d, constructAssociationMetaDataFeatureSetFromUrl as m } from \"../featureSetUtils.js\";\nimport p from \"../ImmutableArray.js\";\nimport { y, A as g, j as w, T as h, h as I, m as F, w as E, c as D, x as b, i as A, g as N, X as x, L as S } from \"../../chunks/languageUtils.js\";\nimport { SqlExpressionAdapted as v, StringToCodeAdapted as $, FieldRename as L, AdaptedFeatureSet as T, OriginalField as j } from \"../featureset/actions/Adapted.js\";\nimport P from \"../featureset/actions/AttributeFilter.js\";\nimport R from \"../featureset/actions/OrderBy.js\";\nimport O from \"../featureset/actions/Top.js\";\nimport C from \"../featureset/sources/Empty.js\";\nimport M from \"../featureset/sources/FeatureLayerMemory.js\";\nimport k from \"../featureset/support/OrderbyClause.js\";\nimport { cloneField as H } from \"../featureset/support/shared.js\";\nimport { isSingleField as z } from \"../featureset/support/sqlUtils.js\";\nimport { calculateStat as G } from \"./fieldStats.js\";\nimport { isPromiseLike as U } from \"../../core/promiseUtils.js\";\nimport { WhereClause as W } from \"../../core/sql/WhereClause.js\";\nimport _ from \"../../layers/FeatureLayer.js\";\nimport B from \"../../layers/support/Field.js\";\n\nfunction J(e, t, n, i) {\n  if (1 === i.length) {\n    if (F(i[0])) return G(e, i[0], -1);\n    if (b(i[0])) return G(e, i[0].toArray(), -1);\n  }\n\n  return G(e, i, -1);\n}\n\nasync function V(e, t, n) {\n  const i = e.getVariables();\n\n  if (i.length > 0) {\n    const a = [];\n\n    for (let e = 0; e < i.length; e++) {\n      const r = {\n        name: i[e]\n      };\n      a.push(await t.evaluateIdentifier(n, r));\n    }\n\n    const r = {};\n\n    for (let e = 0; e < i.length; e++) r[i[e]] = a[e];\n\n    return e.parameters = r, e;\n  }\n\n  return e;\n}\n\nfunction q(e, t, n = null) {\n  for (const i in e) if (i.toLowerCase() === t.toLowerCase()) return e[i];\n\n  return n;\n}\n\nfunction K(e) {\n  if (null === e) return null;\n  const t = {\n    type: q(e, \"type\", \"\"),\n    name: q(e, \"name\", \"\")\n  };\n  if (\"range\" === t.type) t.range = q(e, \"range\", []);else {\n    t.codedValues = [];\n\n    for (const n of q(e, \"codedValues\", [])) t.codedValues.push({\n      name: q(n, \"name\", \"\"),\n      code: q(n, \"code\", null)\n    });\n  }\n  return t;\n}\n\nfunction X(e) {\n  if (null === e) return null;\n  const t = {},\n        n = q(e, \"wkt\", null);\n  null !== n && (t.wkt = n);\n  const i = q(e, \"wkid\", null);\n  return null !== i && (t.wkid = i), t;\n}\n\nfunction Y(e) {\n  if (null === e) return null;\n  const t = {\n    hasZ: q(e, \"hasz\", !1),\n    hasM: q(e, \"hasm\", !1)\n  },\n        n = q(e, \"spatialreference\", null);\n  n && (t.spatialReference = X(n));\n  const i = q(e, \"x\", null);\n  if (null !== i) return t.x = i, t.y = q(e, \"y\", null), t;\n  const a = q(e, \"rings\", null);\n  if (null !== a) return t.rings = a, t;\n  const r = q(e, \"paths\", null);\n  if (null !== r) return t.paths = r, t;\n  const s = q(e, \"points\", null);\n  if (null !== s) return t.points = s, t;\n\n  for (const o of [\"xmin\", \"xmax\", \"ymin\", \"ymax\", \"zmin\", \"zmax\", \"mmin\", \"mmax\"]) {\n    const n = q(e, o, null);\n    null !== n && (t[o] = n);\n  }\n\n  return t;\n}\n\nfunction Z(e, t) {\n  for (const n of t) if (n === e) return !0;\n\n  return !1;\n}\n\nfunction Q(e) {\n  return !!e.layerDefinition && !!e.featureSet && !1 !== Z(e.layerDefinition.geometryType, [\"\", \"esriGeometryPoint\", \"esriGeometryPolyline\", \"esriGeometryPolygon\", \"esriGeometryMultipoint\", \"esriGeometryEnvelope\"]) && null !== e.layerDefinition.objectIdField && \"\" !== e.layerDefinition.objectIdField && !1 !== F(e.layerDefinition.fields) && !1 !== F(e.featureSet.features);\n}\n\nfunction ee(G) {\n  \"async\" === G.mode && (G.functions.getuser = function (a, r) {\n    return G.standardFunctionAsync(a, r, async (l, f, c) => {\n      y(c, 0, 2, a, r);\n      let u = g(c[1], \"\"),\n          d = !0 === u;\n\n      if (u = !0 === u || !1 === u ? \"\" : w(u), 0 === c.length || c[0] instanceof e) {\n        let e = null;\n        a.services && a.services.portal && (e = a.services.portal), c.length > 0 && (e = s(c[0], e));\n        const n = await o(e, u, d);\n\n        if (n) {\n          const e = JSON.parse(JSON.stringify(n));\n\n          for (const t of [\"lastLogin\", \"created\", \"modified\"]) void 0 !== e[t] && null !== e[t] && (e[t] = new Date(e[t]));\n\n          return t.convertObjectToArcadeDictionary(e);\n        }\n\n        return null;\n      }\n\n      let m = null;\n\n      if (h(c[0]) && (m = c[0]), m) {\n        if (d = !1, u) return null;\n        await m.load();\n        const n = await m.getOwningSystemUrl();\n\n        if (!n) {\n          if (!u) {\n            const e = await m.getIdentityUser();\n            return e ? t.convertObjectToArcadeDictionary({\n              username: e\n            }) : null;\n          }\n\n          return null;\n        }\n\n        let i = null;\n        a.services && a.services.portal && (i = a.services.portal), i = s(new e(n), i);\n        const r = await o(i, u, d);\n\n        if (r) {\n          const e = JSON.parse(JSON.stringify(r));\n\n          for (const t of [\"lastLogin\", \"created\", \"modified\"]) void 0 !== e[t] && null !== e[t] && (e[t] = new Date(e[t]));\n\n          return t.convertObjectToArcadeDictionary(e);\n        }\n\n        return null;\n      }\n\n      throw new n(a, i.InvalidParameter, r);\n    });\n  }, G.signatures.push({\n    name: \"getuser\",\n    min: 1,\n    max: 2\n  }), G.functions.featuresetbyid = function (e, t) {\n    return G.standardFunctionAsync(e, t, (a, s, o) => {\n      if (y(o, 2, 4, e, t), o[0] instanceof r) {\n        const a = w(o[1]);\n        let r = g(o[2], null);\n        const s = I(g(o[3], !0));\n        if (null === r && (r = [\"*\"]), !1 === F(r)) throw new n(e, i.InvalidParameter, t);\n        return o[0].featureSetById(a, s, r);\n      }\n\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"featuresetbyid\",\n    min: 2,\n    max: 4\n  }), G.functions.getfeatureset = function (e, t) {\n    return G.standardFunctionAsync(e, t, (a, r, s) => {\n      if (y(s, 1, 2, e, t), E(s[0])) {\n        let t = g(s[1], \"datasource\");\n        return null === t && (t = \"datasource\"), t = w(t).toLowerCase(), l(s[0].fullSchema(), t, e.lrucache, e.interceptor, e.spatialReference);\n      }\n\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"getfeatureset\",\n    min: 1,\n    max: 2\n  }), G.functions.featuresetbyportalitem = function (t, a) {\n    return G.standardFunctionAsync(t, a, (r, o, l) => {\n      if (y(l, 2, 5, t, a), null === l[0]) throw new n(t, i.PortalRequired, a);\n\n      if (l[0] instanceof e) {\n        const e = w(l[1]),\n              r = w(l[2]);\n        let o = g(l[3], null);\n        const c = I(g(l[4], !0));\n        if (null === o && (o = [\"*\"]), !1 === F(o)) throw new n(t, i.InvalidParameter, a);\n        let u = null;\n        return t.services && t.services.portal && (u = t.services.portal), u = s(l[0], u), f(e, r, t.spatialReference, o, c, u, t.lrucache, t.interceptor);\n      }\n\n      if (!1 === D(l[0])) throw new n(t, i.PortalRequired, a);\n      const c = w(l[0]),\n            u = w(l[1]);\n      let d = g(l[2], null);\n      const m = I(g(l[3], !0));\n      if (null === d && (d = [\"*\"]), !1 === F(d)) throw new n(t, i.InvalidParameter, a);\n      if (t.services && t.services.portal) return f(c, u, t.spatialReference, d, m, t.services.portal, t.lrucache, t.interceptor);\n      throw new n(t, i.PortalRequired, a);\n    });\n  }, G.signatures.push({\n    name: \"featuresetbyportalitem\",\n    min: 2,\n    max: 5\n  }), G.functions.featuresetbyname = function (e, t) {\n    return G.standardFunctionAsync(e, t, (a, s, o) => {\n      if (y(o, 2, 4, e, t), o[0] instanceof r) {\n        const a = w(o[1]);\n        let r = g(o[2], null);\n        const s = I(g(o[3], !0));\n        if (null === r && (r = [\"*\"]), !1 === F(r)) throw new n(e, i.InvalidParameter, t);\n        return o[0].featureSetByName(a, s, r);\n      }\n\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"featuresetbyname\",\n    min: 2,\n    max: 4\n  }), G.functions.featureset = function (e, a) {\n    return G.standardFunction(e, a, (r, s, o) => {\n      y(o, 1, 1, e, a);\n      let l = o[0];\n      const f = {\n        layerDefinition: {\n          geometryType: \"\",\n          objectIdField: \"\",\n          globalIdField: \"\",\n          typeIdField: \"\",\n          fields: []\n        },\n        featureSet: {\n          geometryType: \"\",\n          features: []\n        }\n      };\n      if (D(l)) l = JSON.parse(l), void 0 !== l.layerDefinition ? (f.layerDefinition = l.layerDefinition, f.featureSet = l.featureSet, l.layerDefinition.spatialReference && (f.layerDefinition.spatialReference = l.layerDefinition.spatialReference)) : (f.featureSet.features = l.features, f.featureSet.geometryType = l.geometryType, f.layerDefinition.geometryType = f.featureSet.geometryType, f.layerDefinition.objectIdField = l.objectIdFieldName, f.layerDefinition.typeIdField = l.typeIdFieldName, f.layerDefinition.globalIdField = l.globalIdFieldName, f.layerDefinition.fields = l.fields, l.spatialReference && (f.layerDefinition.spatialReference = l.spatialReference));else {\n        if (!(o[0] instanceof t)) throw new n(e, i.InvalidParameter, a);\n        {\n          l = JSON.parse(o[0].castToText(!0));\n          const e = q(l, \"layerdefinition\");\n\n          if (null !== e) {\n            f.layerDefinition.geometryType = q(e, \"geometrytype\", \"\"), f.featureSet.geometryType = f.layerDefinition.geometryType, f.layerDefinition.globalIdField = q(e, \"globalidfield\", \"\"), f.layerDefinition.objectIdField = q(e, \"objectidfield\", \"\"), f.layerDefinition.typeIdField = q(e, \"typeidfield\", \"\");\n            const t = q(e, \"spatialreference\", null);\n            t && (f.layerDefinition.spatialReference = X(t));\n\n            for (const i of q(e, \"fields\", [])) {\n              const e = {\n                name: q(i, \"name\", \"\"),\n                alias: q(i, \"alias\", \"\"),\n                type: q(i, \"type\", \"\"),\n                nullable: q(i, \"nullable\", !0),\n                editable: q(i, \"editable\", !0),\n                length: q(i, \"length\", null),\n                domain: K(q(i, \"domain\"))\n              };\n              f.layerDefinition.fields.push(e);\n            }\n\n            const n = q(l, \"featureset\", null);\n\n            if (n) {\n              const e = {};\n\n              for (const t of f.layerDefinition.fields) e[t.name.toLowerCase()] = t.name;\n\n              for (const t of q(n, \"features\", [])) {\n                const n = {},\n                      i = q(t, \"attributes\", {});\n\n                for (const t in i) n[e[t.toLowerCase()]] = i[t];\n\n                f.featureSet.features.push({\n                  attributes: n,\n                  geometry: Y(q(t, \"geometry\", null))\n                });\n              }\n            }\n          } else {\n            f.layerDefinition.geometryType = q(l, \"geometrytype\", \"\"), f.featureSet.geometryType = f.layerDefinition.geometryType, f.layerDefinition.objectIdField = q(l, \"objectidfieldname\", \"\"), f.layerDefinition.typeIdField = q(l, \"typeidfieldname\", \"\");\n            const e = q(l, \"spatialreference\", null);\n            e && (f.layerDefinition.spatialReference = X(e));\n\n            for (const n of q(l, \"fields\", [])) {\n              const e = {\n                name: q(n, \"name\", \"\"),\n                alias: q(n, \"alias\", \"\"),\n                type: q(n, \"type\", \"\"),\n                nullable: q(n, \"nullable\", !0),\n                editable: q(n, \"editable\", !0),\n                length: q(n, \"length\", null),\n                domain: K(q(n, \"domain\"))\n              };\n              f.layerDefinition.fields.push(e);\n            }\n\n            const t = {};\n\n            for (const n of f.layerDefinition.fields) t[n.name.toLowerCase()] = n.name;\n\n            for (const n of q(l, \"features\", [])) {\n              const e = {},\n                    i = q(n, \"attributes\", {});\n\n              for (const n in i) e[t[n.toLowerCase()]] = i[n];\n\n              f.featureSet.features.push({\n                attributes: e,\n                geometry: Y(q(n, \"geometry\", null))\n              });\n            }\n          }\n        }\n      }\n      if (!1 === Q(f)) throw new n(e, i.InvalidParameter, a);\n      return M.create(f, e.spatialReference);\n    });\n  }, G.signatures.push({\n    name: \"featureset\",\n    min: 1,\n    max: 1\n  }), G.functions.filter = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (a, r, s) => {\n      if (y(s, 2, 2, e, t), F(s[0]) || b(s[0])) {\n        const a = [];\n        let r = s[0];\n        r instanceof p && (r = r.toArray());\n        let o = null;\n        if (!A(s[1])) throw new n(e, i.InvalidParameter, t);\n        o = s[1].createFunction(e);\n\n        for (const e of r) {\n          const t = o(e);\n          U(t) ? !0 === (await t) && a.push(e) : !0 === t && a.push(e);\n        }\n\n        return a;\n      }\n\n      if (h(s[0])) {\n        const t = await s[0].load(),\n              n = W.create(s[1], t.getFieldsIndex()),\n              i = n.getVariables();\n\n        if (i.length > 0) {\n          const t = [];\n\n          for (let n = 0; n < i.length; n++) {\n            const a = {\n              name: i[n]\n            };\n            t.push(await G.evaluateIdentifier(e, a));\n          }\n\n          const a = {};\n\n          for (let e = 0; e < i.length; e++) a[i[e]] = t[e];\n\n          return n.parameters = a, new P({\n            parentfeatureset: s[0],\n            whereclause: n\n          });\n        }\n\n        return new P({\n          parentfeatureset: s[0],\n          whereclause: n\n        });\n      }\n\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"filter\",\n    min: 2,\n    max: 2\n  }), G.functions.orderby = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (a, r, s) => {\n      if (y(s, 2, 2, e, t), h(s[0])) {\n        const e = new k(s[1]);\n        return new R({\n          parentfeatureset: s[0],\n          orderbyclause: e\n        });\n      }\n\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"orderby\",\n    min: 2,\n    max: 2\n  }), G.functions.top = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (a, r, s) => {\n      if (y(s, 2, 2, e, t), h(s[0])) return new O({\n        parentfeatureset: s[0],\n        topnum: s[1]\n      });\n      if (F(s[0])) return N(s[1]) >= s[0].length ? s[0].slice(0) : s[0].slice(0, N(s[1]));\n      if (b(s[0])) return N(s[1]) >= s[0].length() ? s[0].slice(0) : s[0].slice(0, N(s[1]));\n      throw new n(e, i.InvalidParameter, t);\n    });\n  }, G.signatures.push({\n    name: \"top\",\n    min: 2,\n    max: 2\n  }), G.functions.first = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (n, i, r) => {\n      if (y(r, 1, 1, e, t), h(r[0])) {\n        const e = await r[0].first(n.abortSignal);\n\n        if (null !== e) {\n          const t = a.createFromGraphicLikeObject(e.geometry, e.attributes, r[0]);\n          return t._underlyingGraphic = e, t;\n        }\n\n        return e;\n      }\n\n      return F(r[0]) ? 0 === r[0].length ? null : r[0][0] : b(r[0]) ? 0 === r[0].length() ? null : r[0].get(0) : null;\n    });\n  }, G.signatures.push({\n    name: \"first\",\n    min: 1,\n    max: 1\n  }), G.functions.attachments = function (e, a) {\n    return G.standardFunctionAsync(e, a, async (r, s, o) => {\n      y(o, 1, 2, e, a);\n      const l = {\n        minsize: -1,\n        maxsize: -1,\n        types: null,\n        returnMetadata: !1\n      };\n      if (o.length > 1) if (o[1] instanceof t) {\n        if (o[1].hasField(\"minsize\") && (l.minsize = N(o[1].field(\"minsize\"))), o[1].hasField(\"metadata\") && (l.returnMetadata = I(o[1].field(\"metadata\"))), o[1].hasField(\"maxsize\") && (l.maxsize = N(o[1].field(\"maxsize\"))), o[1].hasField(\"types\")) {\n          const e = x(o[1].field(\"types\"), !1);\n          e.length > 0 && (l.types = e);\n        }\n      } else if (null !== o[1]) throw new n(e, i.InvalidParameter, a);\n\n      if (E(o[0])) {\n        let t = o[0]._layer;\n        return t instanceof _ && (t = c(t, e.spatialReference, [\"*\"], !0, e.lrucache, e.interceptor)), null === t ? [] : !1 === h(t) ? [] : (await t.load(), t.queryAttachments(o[0].field(t.objectIdField), l.minsize, l.maxsize, l.types, l.returnMetadata));\n      }\n\n      if (null === o[0]) return [];\n      throw new n(e, i.InvalidParameter, a);\n    });\n  }, G.signatures.push({\n    name: \"attachments\",\n    min: 1,\n    max: 2\n  }), G.functions.featuresetbyrelationshipname = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (a, r, s) => {\n      y(s, 2, 4, e, t);\n      const o = s[0],\n            l = w(s[1]);\n      let f = g(s[2], null);\n      const m = I(g(s[3], !0));\n      if (null === f && (f = [\"*\"]), !1 === F(f)) throw new n(e, i.InvalidParameter, t);\n      if (null === s[0]) return null;\n      if (!E(s[0])) throw new n(e, i.InvalidParameter, t);\n      let p = o._layer;\n      if (p instanceof _ && (p = c(p, e.spatialReference, [\"*\"], !0, e.lrucache, e.interceptor)), null === p) return null;\n      if (!1 === h(p)) return null;\n      p = await p.load();\n      const D = p.relationshipMetaData().filter(e => e.name === l);\n      if (0 === D.length) return null;\n      if (void 0 !== D[0].relationshipTableId && null !== D[0].relationshipTableId && D[0].relationshipTableId > -1) return u(p, D[0], o.field(p.objectIdField), p.spatialReference, f, m, e.lrucache, e.interceptor);\n      let b = p.serviceUrl();\n      if (!b) return null;\n      b = \"/\" === b.charAt(b.length - 1) ? b + D[0].relatedTableId.toString() : b + \"/\" + D[0].relatedTableId.toString();\n      const A = await d(b, p.spatialReference, f, m, e.lrucache, e.interceptor);\n      await A.load();\n      let N = A.relationshipMetaData();\n\n      if (N = N.filter(e => e.id === D[0].id), !1 === o.hasField(D[0].keyField) || null === o.field(D[0].keyField)) {\n        const e = await p.getFeatureByObjectId(o.field(p.objectIdField), [D[0].keyField]);\n\n        if (e) {\n          const t = W.create(N[0].keyField + \"= @id\", A.getFieldsIndex());\n          return t.parameters = {\n            id: e.attributes[D[0].keyField]\n          }, A.filter(t);\n        }\n\n        return new C({\n          parentfeatureset: A\n        });\n      }\n\n      const x = W.create(N[0].keyField + \"= @id\", A.getFieldsIndex());\n      return x.parameters = {\n        id: o.field(D[0].keyField)\n      }, A.filter(x);\n    });\n  }, G.signatures.push({\n    name: \"featuresetbyrelationshipname\",\n    min: 2,\n    max: 4\n  }), G.functions.featuresetbyassociation = function (e, t) {\n    return G.standardFunctionAsync(e, t, async (a, r, s) => {\n      y(s, 2, 3, e, t);\n      const o = s[0],\n            l = w(g(s[1], \"\")).toLowerCase(),\n            f = D(s[2]) ? w(s[2]) : null;\n      if (null === s[0]) return null;\n      if (!E(s[0])) throw new n(e, i.InvalidParameter, t);\n      let u = o._layer;\n      if (u instanceof _ && (u = c(u, e.spatialReference, [\"*\"], !0, e.lrucache, e.interceptor)), null === u) return null;\n      if (!1 === h(u)) return null;\n      await u.load();\n      const d = u.serviceUrl(),\n            p = await m(d, e.spatialReference);\n      let I = null,\n          F = null,\n          b = !1;\n\n      if (null !== f && \"\" !== f && void 0 !== f) {\n        for (const e of p.terminals) e.terminalName === f && (F = e.terminalId);\n\n        null === F && (b = !0);\n      }\n\n      const A = p.associations.getFieldsIndex(),\n            N = A.get(\"TOGLOBALID\").name,\n            x = A.get(\"FROMGLOBALID\").name,\n            P = A.get(\"TOTERMINALID\").name,\n            R = A.get(\"FROMTERMINALID\").name,\n            O = A.get(\"FROMNETWORKSOURCEID\").name,\n            C = A.get(\"TONETWORKSOURCEID\").name,\n            M = A.get(\"ASSOCIATIONTYPE\").name,\n            k = A.get(\"ISCONTENTVISIBLE\").name,\n            z = A.get(\"OBJECTID\").name;\n\n      for (const e of u.fields) if (\"global-id\" === e.type) {\n        I = o.field(e.name);\n        break;\n      }\n\n      let G = null,\n          U = new v(new B({\n        name: \"percentalong\",\n        alias: \"percentalong\",\n        type: \"double\"\n      }), W.create(\"0\", p.associations.getFieldsIndex())),\n          J = new v(new B({\n        name: \"side\",\n        alias: \"side\",\n        type: \"string\"\n      }), W.create(\"''\", p.associations.getFieldsIndex()));\n      const V = \"globalid\",\n            q = \"globalId\",\n            K = {};\n\n      for (const e in p.lkp) K[e] = p.lkp[e].sourceId;\n\n      const X = new $(new B({\n        name: \"classname\",\n        alias: \"classname\",\n        type: \"string\"\n      }), null, K);\n      let Y = \"\";\n\n      switch (l) {\n        case \"midspan\":\n          {\n            Y = `((${N}='${I}') OR ( ${x}='${I}')) AND (${M} IN (5))`, X.codefield = W.create(`CASE WHEN (${N}='${I}') THEN ${O} ELSE ${C} END`, p.associations.getFieldsIndex());\n            const e = H(T.findField(p.associations.fields, x));\n            e.name = V, e.alias = V, G = new v(e, W.create(`CASE WHEN (${x}='${I}') THEN ${N} ELSE ${x} END`, p.associations.getFieldsIndex())), U = p.unVersion >= 4 ? new j(T.findField(p.associations.fields, A.get(\"PERCENTALONG\").name)) : new v(new B({\n              name: \"percentalong\",\n              alias: \"percentalong\",\n              type: \"double\"\n            }), W.create(\"0\", p.associations.getFieldsIndex()));\n            break;\n          }\n\n        case \"junctionedge\":\n          {\n            Y = `((${N}='${I}') OR ( ${x}='${I}')) AND (${M} IN (4,6))`, X.codefield = W.create(`CASE WHEN (${N}='${I}') THEN ${O} ELSE ${C} END`, p.associations.getFieldsIndex());\n            const e = H(T.findField(p.associations.fields, x));\n            e.name = V, e.alias = V, G = new v(e, W.create(`CASE WHEN (${x}='${I}') THEN ${N} ELSE ${x} END`, p.associations.getFieldsIndex())), J = new v(new B({\n              name: \"side\",\n              alias: \"side\",\n              type: \"string\"\n            }), W.create(`CASE WHEN (${M}=4) THEN 'from' ELSE 'to' END`, p.associations.getFieldsIndex()));\n            break;\n          }\n\n        case \"connected\":\n          {\n            let e = `${N}='@T'`,\n                t = `${x}='@T'`;\n            null !== F && (e += ` AND ${P}=@A`, t += ` AND ${R}=@A`), Y = \"((\" + e + \") OR (\" + t + \"))\", Y = S(Y, \"@T\", I ?? \"\"), e = S(e, \"@T\", I ?? \"\"), null !== F && (e = S(e, \"@A\", F.toString()), Y = S(Y, \"@A\", F.toString())), X.codefield = W.create(\"CASE WHEN \" + e + ` THEN ${O} ELSE ${C} END`, p.associations.getFieldsIndex());\n            const n = H(T.findField(p.associations.fields, x));\n            n.name = V, n.alias = V, G = new v(n, W.create(\"CASE WHEN \" + e + ` THEN ${x} ELSE ${N} END`, p.associations.getFieldsIndex()));\n            break;\n          }\n\n        case \"container\":\n          Y = `${N}='${I}' AND ${M} = 2`, null !== F && (Y += ` AND ${P} = ` + F.toString()), X.codefield = O, Y = \"( \" + Y + \" )\", G = new L(T.findField(p.associations.fields, x), V, V);\n\n        case \"content\":\n          Y = `(${x}='${I}' AND ${M} = 2)`, null !== F && (Y += ` AND ${R} = ` + F.toString()), X.codefield = C, Y = \"( \" + Y + \" )\", G = new L(T.findField(p.associations.fields, N), V, V);\n          break;\n\n        case \"structure\":\n          Y = `(${N}='${I}' AND ${M} = 3)`, null !== F && (Y += ` AND ${P} = ` + F.toString()), X.codefield = O, Y = \"( \" + Y + \" )\", G = new L(T.findField(p.associations.fields, x), V, q);\n          break;\n\n        case \"attached\":\n          Y = `(${x}='${I}' AND ${M} = 3)`, null !== F && (Y += ` AND ${R} = ` + F.toString()), X.codefield = C, Y = \"( \" + Y + \" )\", G = new L(T.findField(p.associations.fields, N), V, q);\n          break;\n\n        default:\n          throw new n(e, i.InvalidParameter, t);\n      }\n\n      b && (Y = \"1 <> 1\");\n      return new T({\n        parentfeatureset: p.associations,\n        adaptedFields: [new j(T.findField(p.associations.fields, z)), new j(T.findField(p.associations.fields, k)), G, J, X, U],\n        extraFilter: Y ? W.create(Y, p.associations.getFieldsIndex()) : null\n      });\n    });\n  }, G.signatures.push({\n    name: \"featuresetbyassociation\",\n    min: 2,\n    max: 6\n  }), G.functions.groupby = function (e, a) {\n    return G.standardFunctionAsync(e, a, async (r, s, o) => {\n      if (y(o, 3, 3, e, a), !h(o[0])) throw new n(e, i.InvalidParameter, a);\n      const l = await o[0].load(),\n            f = [],\n            c = [];\n      let u = !1,\n          d = [];\n      if (D(o[1])) d.push(o[1]);else if (o[1] instanceof t) d.push(o[1]);else if (F(o[1])) d = o[1];else {\n        if (!b(o[1])) throw new n(e, i.InvalidParameter, a);\n        d = o[1].toArray();\n      }\n\n      for (const m of d) if (D(m)) {\n        const e = W.create(w(m), l.getFieldsIndex()),\n              t = !0 === z(e) ? w(m) : \"%%%%FIELDNAME\";\n        f.push({\n          name: t,\n          expression: e\n        }), \"%%%%FIELDNAME\" === t && (u = !0);\n      } else {\n        if (!(m instanceof t)) throw new n(e, i.InvalidParameter, a);\n        {\n          const t = m.hasField(\"name\") ? m.field(\"name\") : \"%%%%FIELDNAME\",\n                r = m.hasField(\"expression\") ? m.field(\"expression\") : \"\";\n          if (\"%%%%FIELDNAME\" === t && (u = !0), !t) throw new n(e, i.InvalidParameter, a);\n          f.push({\n            name: t,\n            expression: W.create(r || t, l.getFieldsIndex())\n          });\n        }\n      }\n\n      if (d = [], D(o[2])) d.push(o[2]);else if (F(o[2])) d = o[2];else if (b(o[2])) d = o[2].toArray();else {\n        if (!(o[2] instanceof t)) throw new n(e, i.InvalidParameter, a);\n        d.push(o[2]);\n      }\n\n      for (const m of d) {\n        if (!(m instanceof t)) throw new n(e, i.InvalidParameter, a);\n        {\n          const t = m.hasField(\"name\") ? m.field(\"name\") : \"\",\n                r = m.hasField(\"statistic\") ? m.field(\"statistic\") : \"\",\n                s = m.hasField(\"expression\") ? m.field(\"expression\") : \"\";\n          if (!t || !r || !s) throw new n(e, i.InvalidParameter, a);\n          c.push({\n            name: t,\n            statistic: r.toLowerCase(),\n            expression: W.create(s, l.getFieldsIndex())\n          });\n        }\n      }\n\n      if (u) {\n        const e = {};\n\n        for (const n of l.fields) e[n.name.toLowerCase()] = 1;\n\n        for (const n of f) \"%%%%FIELDNAME\" !== n.name && (e[n.name.toLowerCase()] = 1);\n\n        for (const n of c) \"%%%%FIELDNAME\" !== n.name && (e[n.name.toLowerCase()] = 1);\n\n        let t = 0;\n\n        for (const n of f) if (\"%%%%FIELDNAME\" === n.name) {\n          for (; 1 === e[\"field_\" + t.toString()];) t++;\n\n          e[\"field_\" + t.toString()] = 1, n.name = \"FIELD_\" + t.toString();\n        }\n      }\n\n      for (const t of f) await V(t.expression, G, e);\n\n      for (const t of c) await V(t.expression, G, e);\n\n      return o[0].groupby(f, c);\n    });\n  }, G.signatures.push({\n    name: \"groupby\",\n    min: 3,\n    max: 3\n  }), G.functions.distinct = function (e, a) {\n    return G.standardFunctionAsync(e, a, async (r, s, o) => {\n      if (h(o[0])) {\n        y(o, 2, 2, e, a);\n        const r = await o[0].load(),\n              s = [];\n        let l = [];\n        if (D(o[1])) l.push(o[1]);else if (o[1] instanceof t) l.push(o[1]);else if (F(o[1])) l = o[1];else {\n          if (!b(o[1])) throw new n(e, i.InvalidParameter, a);\n          l = o[1].toArray();\n        }\n        let f = !1;\n\n        for (const o of l) if (D(o)) {\n          const e = W.create(w(o), r.getFieldsIndex()),\n                t = !0 === z(e) ? w(o) : \"%%%%FIELDNAME\";\n          s.push({\n            name: t,\n            expression: e\n          }), \"%%%%FIELDNAME\" === t && (f = !0);\n        } else {\n          if (!(o instanceof t)) throw new n(e, i.InvalidParameter, a);\n          {\n            const t = o.hasField(\"name\") ? o.field(\"name\") : \"%%%%FIELDNAME\",\n                  l = o.hasField(\"expression\") ? o.field(\"expression\") : \"\";\n            if (\"%%%%FIELDNAME\" === t && (f = !0), !t) throw new n(e, i.InvalidParameter, a);\n            s.push({\n              name: t,\n              expression: W.create(l || t, r.getFieldsIndex())\n            });\n          }\n        }\n\n        if (f) {\n          const e = {};\n\n          for (const n of r.fields) e[n.name.toLowerCase()] = 1;\n\n          for (const n of s) \"%%%%FIELDNAME\" !== n.name && (e[n.name.toLowerCase()] = 1);\n\n          let t = 0;\n\n          for (const n of s) if (\"%%%%FIELDNAME\" === n.name) {\n            for (; 1 === e[\"field_\" + t.toString()];) t++;\n\n            e[\"field_\" + t.toString()] = 1, n.name = \"FIELD_\" + t.toString();\n          }\n        }\n\n        for (const t of s) await V(t.expression, G, e);\n\n        return o[0].groupby(s, []);\n      }\n\n      return J(\"distinct\", r, s, o);\n    });\n  });\n}\n\nexport { ee as registerFunctions };","map":{"version":3,"names":["e","t","ArcadeExecutionError","n","ExecutionErrorCodes","i","a","r","getPortal","s","lookupUser","o","convertToFeatureSet","l","constructFeatureSetFromPortalItem","f","constructFeatureSet","c","constructFeatureSetFromRelationship","u","constructFeatureSetFromUrl","d","constructAssociationMetaDataFeatureSetFromUrl","m","p","y","A","g","j","w","T","h","I","F","E","D","x","b","N","X","L","S","SqlExpressionAdapted","v","StringToCodeAdapted","$","FieldRename","AdaptedFeatureSet","OriginalField","P","R","O","C","M","k","cloneField","H","isSingleField","z","calculateStat","G","isPromiseLike","U","WhereClause","W","_","B","J","length","toArray","V","getVariables","name","push","evaluateIdentifier","parameters","q","toLowerCase","K","type","range","codedValues","code","wkt","wkid","Y","hasZ","hasM","spatialReference","rings","paths","points","Z","Q","layerDefinition","featureSet","geometryType","objectIdField","fields","features","ee","mode","functions","getuser","standardFunctionAsync","services","portal","JSON","parse","stringify","Date","convertObjectToArcadeDictionary","load","getOwningSystemUrl","getIdentityUser","username","InvalidParameter","signatures","min","max","featuresetbyid","featureSetById","getfeatureset","fullSchema","lrucache","interceptor","featuresetbyportalitem","PortalRequired","featuresetbyname","featureSetByName","featureset","standardFunction","globalIdField","typeIdField","objectIdFieldName","typeIdFieldName","globalIdFieldName","castToText","alias","nullable","editable","domain","attributes","geometry","create","filter","createFunction","getFieldsIndex","parentfeatureset","whereclause","orderby","orderbyclause","top","topnum","slice","first","abortSignal","createFromGraphicLikeObject","_underlyingGraphic","get","attachments","minsize","maxsize","types","returnMetadata","hasField","field","_layer","queryAttachments","featuresetbyrelationshipname","relationshipMetaData","relationshipTableId","serviceUrl","charAt","relatedTableId","toString","id","keyField","getFeatureByObjectId","featuresetbyassociation","terminals","terminalName","terminalId","associations","lkp","sourceId","codefield","findField","unVersion","adaptedFields","extraFilter","groupby","expression","statistic","distinct","registerFunctions"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/arcade/functions/featuresetbase.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../ArcadePortal.js\";import t from\"../Dictionary.js\";import{ArcadeExecutionError as n,ExecutionErrorCodes as i}from\"../executionError.js\";import a from\"../Feature.js\";import r from\"../featureSetCollection.js\";import{getPortal as s,lookupUser as o,convertToFeatureSet as l,constructFeatureSetFromPortalItem as f,constructFeatureSet as c,constructFeatureSetFromRelationship as u,constructFeatureSetFromUrl as d,constructAssociationMetaDataFeatureSetFromUrl as m}from\"../featureSetUtils.js\";import p from\"../ImmutableArray.js\";import{y,A as g,j as w,T as h,h as I,m as F,w as E,c as D,x as b,i as A,g as N,X as x,L as S}from\"../../chunks/languageUtils.js\";import{SqlExpressionAdapted as v,StringToCodeAdapted as $,FieldRename as L,AdaptedFeatureSet as T,OriginalField as j}from\"../featureset/actions/Adapted.js\";import P from\"../featureset/actions/AttributeFilter.js\";import R from\"../featureset/actions/OrderBy.js\";import O from\"../featureset/actions/Top.js\";import C from\"../featureset/sources/Empty.js\";import M from\"../featureset/sources/FeatureLayerMemory.js\";import k from\"../featureset/support/OrderbyClause.js\";import{cloneField as H}from\"../featureset/support/shared.js\";import{isSingleField as z}from\"../featureset/support/sqlUtils.js\";import{calculateStat as G}from\"./fieldStats.js\";import{isPromiseLike as U}from\"../../core/promiseUtils.js\";import{WhereClause as W}from\"../../core/sql/WhereClause.js\";import _ from\"../../layers/FeatureLayer.js\";import B from\"../../layers/support/Field.js\";function J(e,t,n,i){if(1===i.length){if(F(i[0]))return G(e,i[0],-1);if(b(i[0]))return G(e,i[0].toArray(),-1)}return G(e,i,-1)}async function V(e,t,n){const i=e.getVariables();if(i.length>0){const a=[];for(let e=0;e<i.length;e++){const r={name:i[e]};a.push(await t.evaluateIdentifier(n,r))}const r={};for(let e=0;e<i.length;e++)r[i[e]]=a[e];return e.parameters=r,e}return e}function q(e,t,n=null){for(const i in e)if(i.toLowerCase()===t.toLowerCase())return e[i];return n}function K(e){if(null===e)return null;const t={type:q(e,\"type\",\"\"),name:q(e,\"name\",\"\")};if(\"range\"===t.type)t.range=q(e,\"range\",[]);else{t.codedValues=[];for(const n of q(e,\"codedValues\",[]))t.codedValues.push({name:q(n,\"name\",\"\"),code:q(n,\"code\",null)})}return t}function X(e){if(null===e)return null;const t={},n=q(e,\"wkt\",null);null!==n&&(t.wkt=n);const i=q(e,\"wkid\",null);return null!==i&&(t.wkid=i),t}function Y(e){if(null===e)return null;const t={hasZ:q(e,\"hasz\",!1),hasM:q(e,\"hasm\",!1)},n=q(e,\"spatialreference\",null);n&&(t.spatialReference=X(n));const i=q(e,\"x\",null);if(null!==i)return t.x=i,t.y=q(e,\"y\",null),t;const a=q(e,\"rings\",null);if(null!==a)return t.rings=a,t;const r=q(e,\"paths\",null);if(null!==r)return t.paths=r,t;const s=q(e,\"points\",null);if(null!==s)return t.points=s,t;for(const o of[\"xmin\",\"xmax\",\"ymin\",\"ymax\",\"zmin\",\"zmax\",\"mmin\",\"mmax\"]){const n=q(e,o,null);null!==n&&(t[o]=n)}return t}function Z(e,t){for(const n of t)if(n===e)return!0;return!1}function Q(e){return!!e.layerDefinition&&(!!e.featureSet&&(!1!==Z(e.layerDefinition.geometryType,[\"\",\"esriGeometryPoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\",\"esriGeometryMultipoint\",\"esriGeometryEnvelope\"])&&(null!==e.layerDefinition.objectIdField&&\"\"!==e.layerDefinition.objectIdField&&(!1!==F(e.layerDefinition.fields)&&!1!==F(e.featureSet.features)))))}function ee(G){\"async\"===G.mode&&(G.functions.getuser=function(a,r){return G.standardFunctionAsync(a,r,(async(l,f,c)=>{y(c,0,2,a,r);let u=g(c[1],\"\"),d=!0===u;if(u=!0===u||!1===u?\"\":w(u),0===c.length||c[0]instanceof e){let e=null;a.services&&a.services.portal&&(e=a.services.portal),c.length>0&&(e=s(c[0],e));const n=await o(e,u,d);if(n){const e=JSON.parse(JSON.stringify(n));for(const t of[\"lastLogin\",\"created\",\"modified\"])void 0!==e[t]&&null!==e[t]&&(e[t]=new Date(e[t]));return t.convertObjectToArcadeDictionary(e)}return null}let m=null;if(h(c[0])&&(m=c[0]),m){if(d=!1,u)return null;await m.load();const n=await m.getOwningSystemUrl();if(!n){if(!u){const e=await m.getIdentityUser();return e?t.convertObjectToArcadeDictionary({username:e}):null}return null}let i=null;a.services&&a.services.portal&&(i=a.services.portal),i=s(new e(n),i);const r=await o(i,u,d);if(r){const e=JSON.parse(JSON.stringify(r));for(const t of[\"lastLogin\",\"created\",\"modified\"])void 0!==e[t]&&null!==e[t]&&(e[t]=new Date(e[t]));return t.convertObjectToArcadeDictionary(e)}return null}throw new n(a,i.InvalidParameter,r)}))},G.signatures.push({name:\"getuser\",min:1,max:2}),G.functions.featuresetbyid=function(e,t){return G.standardFunctionAsync(e,t,((a,s,o)=>{if(y(o,2,4,e,t),o[0]instanceof r){const a=w(o[1]);let r=g(o[2],null);const s=I(g(o[3],!0));if(null===r&&(r=[\"*\"]),!1===F(r))throw new n(e,i.InvalidParameter,t);return o[0].featureSetById(a,s,r)}throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"featuresetbyid\",min:2,max:4}),G.functions.getfeatureset=function(e,t){return G.standardFunctionAsync(e,t,((a,r,s)=>{if(y(s,1,2,e,t),E(s[0])){let t=g(s[1],\"datasource\");return null===t&&(t=\"datasource\"),t=w(t).toLowerCase(),l(s[0].fullSchema(),t,e.lrucache,e.interceptor,e.spatialReference)}throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"getfeatureset\",min:1,max:2}),G.functions.featuresetbyportalitem=function(t,a){return G.standardFunctionAsync(t,a,((r,o,l)=>{if(y(l,2,5,t,a),null===l[0])throw new n(t,i.PortalRequired,a);if(l[0]instanceof e){const e=w(l[1]),r=w(l[2]);let o=g(l[3],null);const c=I(g(l[4],!0));if(null===o&&(o=[\"*\"]),!1===F(o))throw new n(t,i.InvalidParameter,a);let u=null;return t.services&&t.services.portal&&(u=t.services.portal),u=s(l[0],u),f(e,r,t.spatialReference,o,c,u,t.lrucache,t.interceptor)}if(!1===D(l[0]))throw new n(t,i.PortalRequired,a);const c=w(l[0]),u=w(l[1]);let d=g(l[2],null);const m=I(g(l[3],!0));if(null===d&&(d=[\"*\"]),!1===F(d))throw new n(t,i.InvalidParameter,a);if(t.services&&t.services.portal)return f(c,u,t.spatialReference,d,m,t.services.portal,t.lrucache,t.interceptor);throw new n(t,i.PortalRequired,a)}))},G.signatures.push({name:\"featuresetbyportalitem\",min:2,max:5}),G.functions.featuresetbyname=function(e,t){return G.standardFunctionAsync(e,t,((a,s,o)=>{if(y(o,2,4,e,t),o[0]instanceof r){const a=w(o[1]);let r=g(o[2],null);const s=I(g(o[3],!0));if(null===r&&(r=[\"*\"]),!1===F(r))throw new n(e,i.InvalidParameter,t);return o[0].featureSetByName(a,s,r)}throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"featuresetbyname\",min:2,max:4}),G.functions.featureset=function(e,a){return G.standardFunction(e,a,((r,s,o)=>{y(o,1,1,e,a);let l=o[0];const f={layerDefinition:{geometryType:\"\",objectIdField:\"\",globalIdField:\"\",typeIdField:\"\",fields:[]},featureSet:{geometryType:\"\",features:[]}};if(D(l))l=JSON.parse(l),void 0!==l.layerDefinition?(f.layerDefinition=l.layerDefinition,f.featureSet=l.featureSet,l.layerDefinition.spatialReference&&(f.layerDefinition.spatialReference=l.layerDefinition.spatialReference)):(f.featureSet.features=l.features,f.featureSet.geometryType=l.geometryType,f.layerDefinition.geometryType=f.featureSet.geometryType,f.layerDefinition.objectIdField=l.objectIdFieldName,f.layerDefinition.typeIdField=l.typeIdFieldName,f.layerDefinition.globalIdField=l.globalIdFieldName,f.layerDefinition.fields=l.fields,l.spatialReference&&(f.layerDefinition.spatialReference=l.spatialReference));else{if(!(o[0]instanceof t))throw new n(e,i.InvalidParameter,a);{l=JSON.parse(o[0].castToText(!0));const e=q(l,\"layerdefinition\");if(null!==e){f.layerDefinition.geometryType=q(e,\"geometrytype\",\"\"),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.globalIdField=q(e,\"globalidfield\",\"\"),f.layerDefinition.objectIdField=q(e,\"objectidfield\",\"\"),f.layerDefinition.typeIdField=q(e,\"typeidfield\",\"\");const t=q(e,\"spatialreference\",null);t&&(f.layerDefinition.spatialReference=X(t));for(const i of q(e,\"fields\",[])){const e={name:q(i,\"name\",\"\"),alias:q(i,\"alias\",\"\"),type:q(i,\"type\",\"\"),nullable:q(i,\"nullable\",!0),editable:q(i,\"editable\",!0),length:q(i,\"length\",null),domain:K(q(i,\"domain\"))};f.layerDefinition.fields.push(e)}const n=q(l,\"featureset\",null);if(n){const e={};for(const t of f.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of q(n,\"features\",[])){const n={},i=q(t,\"attributes\",{});for(const t in i)n[e[t.toLowerCase()]]=i[t];f.featureSet.features.push({attributes:n,geometry:Y(q(t,\"geometry\",null))})}}}else{f.layerDefinition.geometryType=q(l,\"geometrytype\",\"\"),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.objectIdField=q(l,\"objectidfieldname\",\"\"),f.layerDefinition.typeIdField=q(l,\"typeidfieldname\",\"\");const e=q(l,\"spatialreference\",null);e&&(f.layerDefinition.spatialReference=X(e));for(const n of q(l,\"fields\",[])){const e={name:q(n,\"name\",\"\"),alias:q(n,\"alias\",\"\"),type:q(n,\"type\",\"\"),nullable:q(n,\"nullable\",!0),editable:q(n,\"editable\",!0),length:q(n,\"length\",null),domain:K(q(n,\"domain\"))};f.layerDefinition.fields.push(e)}const t={};for(const n of f.layerDefinition.fields)t[n.name.toLowerCase()]=n.name;for(const n of q(l,\"features\",[])){const e={},i=q(n,\"attributes\",{});for(const n in i)e[t[n.toLowerCase()]]=i[n];f.featureSet.features.push({attributes:e,geometry:Y(q(n,\"geometry\",null))})}}}}if(!1===Q(f))throw new n(e,i.InvalidParameter,a);return M.create(f,e.spatialReference)}))},G.signatures.push({name:\"featureset\",min:1,max:1}),G.functions.filter=function(e,t){return G.standardFunctionAsync(e,t,(async(a,r,s)=>{if(y(s,2,2,e,t),F(s[0])||b(s[0])){const a=[];let r=s[0];r instanceof p&&(r=r.toArray());let o=null;if(!A(s[1]))throw new n(e,i.InvalidParameter,t);o=s[1].createFunction(e);for(const e of r){const t=o(e);U(t)?!0===await t&&a.push(e):!0===t&&a.push(e)}return a}if(h(s[0])){const t=await s[0].load(),n=W.create(s[1],t.getFieldsIndex()),i=n.getVariables();if(i.length>0){const t=[];for(let n=0;n<i.length;n++){const a={name:i[n]};t.push(await G.evaluateIdentifier(e,a))}const a={};for(let e=0;e<i.length;e++)a[i[e]]=t[e];return n.parameters=a,new P({parentfeatureset:s[0],whereclause:n})}return new P({parentfeatureset:s[0],whereclause:n})}throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"filter\",min:2,max:2}),G.functions.orderby=function(e,t){return G.standardFunctionAsync(e,t,(async(a,r,s)=>{if(y(s,2,2,e,t),h(s[0])){const e=new k(s[1]);return new R({parentfeatureset:s[0],orderbyclause:e})}throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"orderby\",min:2,max:2}),G.functions.top=function(e,t){return G.standardFunctionAsync(e,t,(async(a,r,s)=>{if(y(s,2,2,e,t),h(s[0]))return new O({parentfeatureset:s[0],topnum:s[1]});if(F(s[0]))return N(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,N(s[1]));if(b(s[0]))return N(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,N(s[1]));throw new n(e,i.InvalidParameter,t)}))},G.signatures.push({name:\"top\",min:2,max:2}),G.functions.first=function(e,t){return G.standardFunctionAsync(e,t,(async(n,i,r)=>{if(y(r,1,1,e,t),h(r[0])){const e=await r[0].first(n.abortSignal);if(null!==e){const t=a.createFromGraphicLikeObject(e.geometry,e.attributes,r[0]);return t._underlyingGraphic=e,t}return e}return F(r[0])?0===r[0].length?null:r[0][0]:b(r[0])?0===r[0].length()?null:r[0].get(0):null}))},G.signatures.push({name:\"first\",min:1,max:1}),G.functions.attachments=function(e,a){return G.standardFunctionAsync(e,a,(async(r,s,o)=>{y(o,1,2,e,a);const l={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(o.length>1)if(o[1]instanceof t){if(o[1].hasField(\"minsize\")&&(l.minsize=N(o[1].field(\"minsize\"))),o[1].hasField(\"metadata\")&&(l.returnMetadata=I(o[1].field(\"metadata\"))),o[1].hasField(\"maxsize\")&&(l.maxsize=N(o[1].field(\"maxsize\"))),o[1].hasField(\"types\")){const e=x(o[1].field(\"types\"),!1);e.length>0&&(l.types=e)}}else if(null!==o[1])throw new n(e,i.InvalidParameter,a);if(E(o[0])){let t=o[0]._layer;return t instanceof _&&(t=c(t,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===t?[]:!1===h(t)?[]:(await t.load(),t.queryAttachments(o[0].field(t.objectIdField),l.minsize,l.maxsize,l.types,l.returnMetadata))}if(null===o[0])return[];throw new n(e,i.InvalidParameter,a)}))},G.signatures.push({name:\"attachments\",min:1,max:2}),G.functions.featuresetbyrelationshipname=function(e,t){return G.standardFunctionAsync(e,t,(async(a,r,s)=>{y(s,2,4,e,t);const o=s[0],l=w(s[1]);let f=g(s[2],null);const m=I(g(s[3],!0));if(null===f&&(f=[\"*\"]),!1===F(f))throw new n(e,i.InvalidParameter,t);if(null===s[0])return null;if(!E(s[0]))throw new n(e,i.InvalidParameter,t);let p=o._layer;if(p instanceof _&&(p=c(p,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===p)return null;if(!1===h(p))return null;p=await p.load();const D=p.relationshipMetaData().filter((e=>e.name===l));if(0===D.length)return null;if(void 0!==D[0].relationshipTableId&&null!==D[0].relationshipTableId&&D[0].relationshipTableId>-1)return u(p,D[0],o.field(p.objectIdField),p.spatialReference,f,m,e.lrucache,e.interceptor);let b=p.serviceUrl();if(!b)return null;b=\"/\"===b.charAt(b.length-1)?b+D[0].relatedTableId.toString():b+\"/\"+D[0].relatedTableId.toString();const A=await d(b,p.spatialReference,f,m,e.lrucache,e.interceptor);await A.load();let N=A.relationshipMetaData();if(N=N.filter((e=>e.id===D[0].id)),!1===o.hasField(D[0].keyField)||null===o.field(D[0].keyField)){const e=await p.getFeatureByObjectId(o.field(p.objectIdField),[D[0].keyField]);if(e){const t=W.create(N[0].keyField+\"= @id\",A.getFieldsIndex());return t.parameters={id:e.attributes[D[0].keyField]},A.filter(t)}return new C({parentfeatureset:A})}const x=W.create(N[0].keyField+\"= @id\",A.getFieldsIndex());return x.parameters={id:o.field(D[0].keyField)},A.filter(x)}))},G.signatures.push({name:\"featuresetbyrelationshipname\",min:2,max:4}),G.functions.featuresetbyassociation=function(e,t){return G.standardFunctionAsync(e,t,(async(a,r,s)=>{y(s,2,3,e,t);const o=s[0],l=w(g(s[1],\"\")).toLowerCase(),f=D(s[2])?w(s[2]):null;if(null===s[0])return null;if(!E(s[0]))throw new n(e,i.InvalidParameter,t);let u=o._layer;if(u instanceof _&&(u=c(u,e.spatialReference,[\"*\"],!0,e.lrucache,e.interceptor)),null===u)return null;if(!1===h(u))return null;await u.load();const d=u.serviceUrl(),p=await m(d,e.spatialReference);let I=null,F=null,b=!1;if(null!==f&&\"\"!==f&&void 0!==f){for(const e of p.terminals)e.terminalName===f&&(F=e.terminalId);null===F&&(b=!0)}const A=p.associations.getFieldsIndex(),N=A.get(\"TOGLOBALID\").name,x=A.get(\"FROMGLOBALID\").name,P=A.get(\"TOTERMINALID\").name,R=A.get(\"FROMTERMINALID\").name,O=A.get(\"FROMNETWORKSOURCEID\").name,C=A.get(\"TONETWORKSOURCEID\").name,M=A.get(\"ASSOCIATIONTYPE\").name,k=A.get(\"ISCONTENTVISIBLE\").name,z=A.get(\"OBJECTID\").name;for(const e of u.fields)if(\"global-id\"===e.type){I=o.field(e.name);break}let G=null,U=new v(new B({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),W.create(\"0\",p.associations.getFieldsIndex())),J=new v(new B({name:\"side\",alias:\"side\",type:\"string\"}),W.create(\"''\",p.associations.getFieldsIndex()));const V=\"globalid\",q=\"globalId\",K={};for(const e in p.lkp)K[e]=p.lkp[e].sourceId;const X=new $(new B({name:\"classname\",alias:\"classname\",type:\"string\"}),null,K);let Y=\"\";switch(l){case\"midspan\":{Y=`((${N}='${I}') OR ( ${x}='${I}')) AND (${M} IN (5))`,X.codefield=W.create(`CASE WHEN (${N}='${I}') THEN ${O} ELSE ${C} END`,p.associations.getFieldsIndex());const e=H(T.findField(p.associations.fields,x));e.name=V,e.alias=V,G=new v(e,W.create(`CASE WHEN (${x}='${I}') THEN ${N} ELSE ${x} END`,p.associations.getFieldsIndex())),U=p.unVersion>=4?new j(T.findField(p.associations.fields,A.get(\"PERCENTALONG\").name)):new v(new B({name:\"percentalong\",alias:\"percentalong\",type:\"double\"}),W.create(\"0\",p.associations.getFieldsIndex()));break}case\"junctionedge\":{Y=`((${N}='${I}') OR ( ${x}='${I}')) AND (${M} IN (4,6))`,X.codefield=W.create(`CASE WHEN (${N}='${I}') THEN ${O} ELSE ${C} END`,p.associations.getFieldsIndex());const e=H(T.findField(p.associations.fields,x));e.name=V,e.alias=V,G=new v(e,W.create(`CASE WHEN (${x}='${I}') THEN ${N} ELSE ${x} END`,p.associations.getFieldsIndex())),J=new v(new B({name:\"side\",alias:\"side\",type:\"string\"}),W.create(`CASE WHEN (${M}=4) THEN 'from' ELSE 'to' END`,p.associations.getFieldsIndex()));break}case\"connected\":{let e=`${N}='@T'`,t=`${x}='@T'`;null!==F&&(e+=` AND ${P}=@A`,t+=` AND ${R}=@A`),Y=\"((\"+e+\") OR (\"+t+\"))\",Y=S(Y,\"@T\",I??\"\"),e=S(e,\"@T\",I??\"\"),null!==F&&(e=S(e,\"@A\",F.toString()),Y=S(Y,\"@A\",F.toString())),X.codefield=W.create(\"CASE WHEN \"+e+` THEN ${O} ELSE ${C} END`,p.associations.getFieldsIndex());const n=H(T.findField(p.associations.fields,x));n.name=V,n.alias=V,G=new v(n,W.create(\"CASE WHEN \"+e+` THEN ${x} ELSE ${N} END`,p.associations.getFieldsIndex()));break}case\"container\":Y=`${N}='${I}' AND ${M} = 2`,null!==F&&(Y+=` AND ${P} = `+F.toString()),X.codefield=O,Y=\"( \"+Y+\" )\",G=new L(T.findField(p.associations.fields,x),V,V);case\"content\":Y=`(${x}='${I}' AND ${M} = 2)`,null!==F&&(Y+=` AND ${R} = `+F.toString()),X.codefield=C,Y=\"( \"+Y+\" )\",G=new L(T.findField(p.associations.fields,N),V,V);break;case\"structure\":Y=`(${N}='${I}' AND ${M} = 3)`,null!==F&&(Y+=` AND ${P} = `+F.toString()),X.codefield=O,Y=\"( \"+Y+\" )\",G=new L(T.findField(p.associations.fields,x),V,q);break;case\"attached\":Y=`(${x}='${I}' AND ${M} = 3)`,null!==F&&(Y+=` AND ${R} = `+F.toString()),X.codefield=C,Y=\"( \"+Y+\" )\",G=new L(T.findField(p.associations.fields,N),V,q);break;default:throw new n(e,i.InvalidParameter,t)}b&&(Y=\"1 <> 1\");return new T({parentfeatureset:p.associations,adaptedFields:[new j(T.findField(p.associations.fields,z)),new j(T.findField(p.associations.fields,k)),G,J,X,U],extraFilter:Y?W.create(Y,p.associations.getFieldsIndex()):null})}))},G.signatures.push({name:\"featuresetbyassociation\",min:2,max:6}),G.functions.groupby=function(e,a){return G.standardFunctionAsync(e,a,(async(r,s,o)=>{if(y(o,3,3,e,a),!h(o[0]))throw new n(e,i.InvalidParameter,a);const l=await o[0].load(),f=[],c=[];let u=!1,d=[];if(D(o[1]))d.push(o[1]);else if(o[1]instanceof t)d.push(o[1]);else if(F(o[1]))d=o[1];else{if(!b(o[1]))throw new n(e,i.InvalidParameter,a);d=o[1].toArray()}for(const m of d)if(D(m)){const e=W.create(w(m),l.getFieldsIndex()),t=!0===z(e)?w(m):\"%%%%FIELDNAME\";f.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(u=!0)}else{if(!(m instanceof t))throw new n(e,i.InvalidParameter,a);{const t=m.hasField(\"name\")?m.field(\"name\"):\"%%%%FIELDNAME\",r=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===t&&(u=!0),!t)throw new n(e,i.InvalidParameter,a);f.push({name:t,expression:W.create(r||t,l.getFieldsIndex())})}}if(d=[],D(o[2]))d.push(o[2]);else if(F(o[2]))d=o[2];else if(b(o[2]))d=o[2].toArray();else{if(!(o[2]instanceof t))throw new n(e,i.InvalidParameter,a);d.push(o[2])}for(const m of d){if(!(m instanceof t))throw new n(e,i.InvalidParameter,a);{const t=m.hasField(\"name\")?m.field(\"name\"):\"\",r=m.hasField(\"statistic\")?m.field(\"statistic\"):\"\",s=m.hasField(\"expression\")?m.field(\"expression\"):\"\";if(!t||!r||!s)throw new n(e,i.InvalidParameter,a);c.push({name:t,statistic:r.toLowerCase(),expression:W.create(s,l.getFieldsIndex())})}}if(u){const e={};for(const n of l.fields)e[n.name.toLowerCase()]=1;for(const n of f)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of c)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of f)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of f)await V(t.expression,G,e);for(const t of c)await V(t.expression,G,e);return o[0].groupby(f,c)}))},G.signatures.push({name:\"groupby\",min:3,max:3}),G.functions.distinct=function(e,a){return G.standardFunctionAsync(e,a,(async(r,s,o)=>{if(h(o[0])){y(o,2,2,e,a);const r=await o[0].load(),s=[];let l=[];if(D(o[1]))l.push(o[1]);else if(o[1]instanceof t)l.push(o[1]);else if(F(o[1]))l=o[1];else{if(!b(o[1]))throw new n(e,i.InvalidParameter,a);l=o[1].toArray()}let f=!1;for(const o of l)if(D(o)){const e=W.create(w(o),r.getFieldsIndex()),t=!0===z(e)?w(o):\"%%%%FIELDNAME\";s.push({name:t,expression:e}),\"%%%%FIELDNAME\"===t&&(f=!0)}else{if(!(o instanceof t))throw new n(e,i.InvalidParameter,a);{const t=o.hasField(\"name\")?o.field(\"name\"):\"%%%%FIELDNAME\",l=o.hasField(\"expression\")?o.field(\"expression\"):\"\";if(\"%%%%FIELDNAME\"===t&&(f=!0),!t)throw new n(e,i.InvalidParameter,a);s.push({name:t,expression:W.create(l||t,r.getFieldsIndex())})}}if(f){const e={};for(const n of r.fields)e[n.name.toLowerCase()]=1;for(const n of s)\"%%%%FIELDNAME\"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of s)if(\"%%%%FIELDNAME\"===n.name){for(;1===e[\"field_\"+t.toString()];)t++;e[\"field_\"+t.toString()]=1,n.name=\"FIELD_\"+t.toString()}}for(const t of s)await V(t.expression,G,e);return o[0].groupby(s,[])}return J(\"distinct\",r,s,o)}))})}export{ee as registerFunctions};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}