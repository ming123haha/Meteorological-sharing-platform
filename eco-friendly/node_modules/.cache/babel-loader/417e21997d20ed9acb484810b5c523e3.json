{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Logger.js\";\nimport { isNone as t, isSome as o, unwrap as n, applySome as r } from \"../../../../../core/maybe.js\";\nimport i from \"../../../../../core/PooledArray.js\";\nimport { e as s, t as a } from \"../../../../../chunks/mat3.js\";\nimport { c } from \"../../../../../chunks/mat3f32.js\";\nimport { d as m, v as l, t as f } from \"../../../../../chunks/vec3.js\";\nimport { a as p, c as h } from \"../../../../../chunks/vec3f64.js\";\nimport { c as u } from \"../../../../../chunks/vec4f32.js\";\nimport { a as b } from \"../../../../../chunks/vec32.js\";\nimport { c as g } from \"../../../../../chunks/vec33.js\";\nimport { ViewingMode as d } from \"../../../../ViewingMode.js\";\nimport { computeOffsetObb as y } from \"../../../layers/i3s/I3SUtil.js\";\nimport { ColorMixModeEnum as C, encodeSymbolColor as j } from \"../../../layers/support/symbolColorUtils.js\";\nimport { clone as v, radius as _ } from \"../../../support/orientedBoundingBox.js\";\nimport { glLayout as w } from \"../../../support/buffer/glUtil.js\";\nimport { newLayout as M } from \"../../../support/buffer/InterleavedLayout.js\";\nimport x from \"./ComponentData.js\";\nimport { State as O, ComponentObject as D } from \"./ComponentObject.js\";\nimport S from \"./IntersectionGeometry.js\";\nimport { Renderable as A } from \"./Renderable.js\";\nimport { RenderGeometry as I } from \"./RenderGeometry.js\";\nimport { RenderSubmitSystem as E } from \"./RenderSubmitSystem.js\";\nimport { createVertexBufferLayout as P } from \"./SourceGeometry.js\";\nimport { ComponentParametersVarying as R, ComponentParametersUniform as k, ComponentParameterSummary as U, ComponentMaterial as B } from \"./Material/ComponentMaterial.js\";\nimport { encodeElevationOffset as T } from \"./Material/shader/ComponentData.glsl.js\";\nimport { getVisibility as V, updateVisibilityWithCount as G } from \"../../lib/ComponentUtils.js\";\nimport { assert as L } from \"../../lib/Util.js\";\nimport { VertexAttribute as N } from \"../../lib/VertexAttribute.js\";\nimport { getVerticalOffsetI3S as H } from \"../../lib/verticalOffsetUtils.js\";\nimport { EdgeInputBufferLayout as W } from \"../../lib/edgeRendering/bufferLayouts.js\";\nimport { extractComponentsEdgeLocationsLayout as q } from \"../../lib/edgeRendering/EdgeProcessingWorker.js\";\nimport { BufferManager as z } from \"../../lib/TextureBackedBuffer/BufferManager.js\";\nimport { BufferObject as X } from \"../../../../webgl/BufferObject.js\";\nimport { Usage as Y, PrimitiveType as F } from \"../../../../webgl/enums.js\";\nimport { VertexArrayObject as J } from \"../../../../webgl/VertexArrayObject.js\";\nconst K = e.getLogger(\"esri.views.3d.webgl-engine.collections.Component.ComponentObjectCollection\");\n\nclass Q {\n  constructor(e, t) {\n    this._renderManager = e, this._viewingMode = t, this._objects = [new i(), new i()], this._renderSubmit = new E(this), this._renderManager.register(this._renderSubmit), this._componentBufferManager = new z(e.rctx, 2);\n  }\n\n  dispose() {\n    L(0 === this._objects[O.Hidden].length && 0 === this._objects[O.Visible].length, \"ObjectCollection should be empty upon disposal\"), this._componentBufferManager.destroy();\n  }\n\n  createObject(e) {\n    const t = new D();\n    return t.toMapSpace = e.toMapSpace, t.transform = e.transform, t.obb = v(e.obb), t.components = new x(this._componentBufferManager, e.geometry.componentOffsets), t.renderable = this._createRenderable(e, t.components), t.intersectionGeometry = new S(e.geometry.positionData, t.components), this._objects[t.visible].push(t), t;\n  }\n\n  destroyObject(e) {\n    const t = e;\n    this._objects[t.visible].removeUnordered(t), t.dispose(), this._notifyDirty();\n  }\n\n  setObjectVisibility(e, t) {\n    const o = e;\n    t !== o.visible && (this._objects[o.visible].removeUnordered(o), this._objects[t].push(o), o.visible = t, this._notifyDirty());\n  }\n\n  preSubmit(e) {\n    const t = e.camera.eye;\n    this.visibleObjects.forAll(e => e.renderable.meta.cameraDepthSquared = m(t, e.obb.center));\n  }\n\n  getMaterial(e) {\n    return e.renderable.material;\n  }\n\n  updateMaterial(e, t) {\n    const o = e.renderable.material;\n    t(o), o.dirty && this._notifyDirty();\n  }\n\n  setAllComponentVisibilities(e, t) {\n    const o = e;\n    o.components.visibility.reset(t), o.components.visibilityDirty(), this._notifyDirty();\n  }\n\n  forEachVisibleComponent(e, t) {\n    return e.components.visibility.forEachComponent(t);\n  }\n\n  getComponentCount(e) {\n    const t = e,\n          o = t.components.visibility.componentCount();\n    return {\n      visible: o,\n      invisible: t.components.count - o\n    };\n  }\n\n  setComponentData(e, n) {\n    const r = e,\n          i = r.renderable.material,\n          s = r.components,\n          a = s.materialDataBuffer,\n          c = s.materialDataIndices,\n          m = {\n      castShadows: !0,\n      pickable: !0,\n      externalColor: u(),\n      externalColorMixMode: C.Multiply,\n      elevationOffset: 0\n    },\n          l = a.textureBuffer,\n          f = new Uint8Array(4),\n          p = new Uint32Array(f.buffer);\n\n    let h = 0,\n        b = 0,\n        g = 0,\n        d = s.verticalOffsets,\n        _ = 1 / 0,\n        w = -1 / 0,\n        M = !1,\n        x = !1,\n        O = 0;\n\n    for (let u = 0; u < s.count; u++) n(u, m), h += +(m.externalColor[3] < 1), b += +(m.externalColorMixMode === C.Replace && 1 === m.externalColor[3]), g += +m.castShadows, j(m.externalColor, m.externalColorMixMode, f), f[2] = 254 & f[2] | +m.castShadows, l.setData(c[u], 0, f[0], f[1], f[2], f[3]), M || (M = u > 0 && O !== p[0]), O = p[0], x || (x = 0 !== m.elevationOffset), x && t(d) && (d = new Array(u).fill(0)), o(d) && (d[u] = m.elevationOffset), _ = Math.min(_, m.elevationOffset), w = Math.max(w, m.elevationOffset), T(m.elevationOffset, f), l.setData(c[u], 1, f[0], f[1], f[2], f[3]), m.pickable !== V(s.pickability, u) && (s.pickability = G(s.pickability, s.count, u, m.pickable));\n\n    s.verticalOffsets = x ? d : null, r.offsetObb = x ? y(r.obb, _, w, this._viewingMode, o(r.offsetObb) ? r.offsetObb : v(r.obb)) : null, M || x ? (i.componentParameters = new R(), i.componentParameters.castShadows = $(g, s.count), i.componentParameters.transparent = $(h, s.count), i.componentParameters.opaqueOverride = $(b, s.count), i.componentParameters.texture = l, l.updateTexture()) : (i.componentParameters = new k(), i.componentParameters.castShadows = m.castShadows ? U.All : U.None, i.componentParameters.externalColor = m.externalColor, i.componentParameters.externalColorMixMode = m.externalColorMixMode), this._notifyDirty();\n  }\n\n  getComponentAabb(e, o, r, i = !1) {\n    e.intersectionGeometry.getComponentAabb(o, r);\n    const s = e,\n          a = s.components.verticalOffsets;\n    if (i || t(a)) return r;\n    const c = a[o];\n    if (this._viewingMode === d.Local || 0 === c) return r[2] += c, r[5] += c, r;\n    const m = n(H(c));\n    return m.localOrigin = s.transform.position, m.applyToAabb(r);\n  }\n\n  getComponentObb(e) {\n    return e.obb;\n  }\n\n  getObjectTransform(e) {\n    return e.transform;\n  }\n\n  getComponentPositions(e, t, o) {\n    return e.intersectionGeometry.getComponentPositions(t, o);\n  }\n\n  intersect(e, t, n, r, i, c) {\n    const m = e;\n    o(i) && (i.localOrigin = m.transform.position);\n    const p = s(ee, m.transform.rotationScale);\n    l(te, t, m.transform.position), l(oe, n, m.transform.position), f(te, te, p), f(oe, oe, p);\n    const h = a(ee, p);\n    return m.intersectionGeometry.intersect(te, oe, r, h, i, m.components.verticalOffsets, c);\n  }\n\n  addEdges(e, t, o, n) {\n    const r = e,\n          {\n      indices: i,\n      positions: s\n    } = r.intersectionGeometry,\n          a = r.components.offsets;\n    return t.addComponentObject(e, r.transform, {\n      center: r.obb.center,\n      radius: _(r.obb)\n    }, s, i, a, o, n);\n  }\n\n  async extractEdgeInformation(e, t, o) {\n    const n = e,\n          r = n.components.visibility;\n    if (r.allInvisible()) return {\n      buffer: q.createBuffer(0),\n      origin: [0, 0, 0]\n    };\n    const {\n      indices: i,\n      positions: s\n    } = n.intersectionGeometry,\n          a = n.components.offsets,\n          c = W.createBuffer(s.count);\n    g(c.position, s), b(c.position, c.position, n.transform.rotationScale), this._setComponentIndices(c.componentIndex, i, a);\n\n    const m = c.count,\n          l = this._computeVisibilityIndices(i, r, a, m);\n\n    return {\n      origin: p(n.transform.position),\n      buffer: await t.extractComponentsEdgeLocations({\n        indices: l,\n        indicesLength: l.length,\n        skipDeduplicate: !0,\n        data: c,\n        writerSettings: {\n          reducedPrecision: !1,\n          variants: 0\n        }\n      }, o)\n    };\n  }\n\n  _setComponentIndices(e, t, o) {\n    let n = 0;\n\n    for (let r = 0; r < o.length - 1; r++) {\n      const i = o[r],\n            s = o[r + 1];\n\n      for (let o = i; o < s; o++) {\n        const r = t ? t[o] : o;\n        e.set(r, n);\n      }\n\n      n++;\n    }\n  }\n\n  _computeVisibilityIndices(e, t, o, n) {\n    if (e && t.allVisible()) return e;\n    let r = 0;\n    t.forEachComponentRange((e, t) => (r += o[t] - o[e], !0));\n    const i = 2 === e?.BYTES_PER_ELEMENT || n <= 65536 ? new Uint16Array(r) : new Uint32Array(r);\n    let s = 0;\n    return t.forEachComponentRange((t, n) => {\n      const r = o[t],\n            a = o[n];\n\n      for (let o = r; o < a; o++) i[s++] = e ? e[o] : o;\n\n      return !0;\n    }), i;\n  }\n\n  addComponentHighlight(e, o) {\n    const n = e.components;\n    t(n.highlightCounts) && (n.highlightCounts = new Uint32Array(n.count + 1));\n    0 === n.highlightCounts[o]++ && (n.highlightsDirty(), this._notifyDirty()), n.highlightCounts[n.count]++;\n  }\n\n  removeComponentHighlight(e, o) {\n    const n = e.components;\n    if (t(n.highlightCounts)) return void K.warn(\"Removing non-existing highlight.\");\n    const r = n.highlightCounts[o],\n          i = n.highlightCounts[n.count];\n\n    if (0 !== r) {\n      if (r > 1) return n.highlightCounts[o] = r - 1, void (n.highlightCounts[n.count] = i - 1);\n      n.highlightCounts[o] = 0, n.highlightsDirty(), this._notifyDirty(), 1 === i ? n.highlightCounts = null : n.highlightCounts[n.count] = i - 1;\n    } else K.warn(\"Removing non-existing highlight.\");\n  }\n\n  clearHighlights(e) {\n    const t = e.components;\n    o(t.highlightCounts) && (t.highlightCounts = null, t.highlightsDirty(), this._notifyDirty());\n  }\n\n  getObjectGPUMemoryUsage(e) {\n    return e.renderable.meta.gpuMemoryEstimate;\n  }\n\n  get visibleObjects() {\n    return this._objects[O.Visible];\n  }\n\n  _createRenderable(e, t) {\n    const i = this._renderManager.rctx,\n          s = e.geometry,\n          a = s.vertices.layoutParameters,\n          c = X.createVertex(i, Y.STATIC_DRAW, s.vertices.data),\n          m = r(s.indices, e => X.createIndex(i, Y.STATIC_DRAW, e)),\n          l = w(P(a)),\n          f = new Uint16Array(s.vertices.count);\n\n    for (let n = 0; n < t.count; n++) {\n      const e = t.offsets[n],\n            r = t.offsets[n + 1],\n            i = t.materialDataIndices[n];\n      if (o(s.indices)) for (let t = e; t < r; t++) {\n        f[s.indices[t]] = i;\n      } else for (let t = e; t < r; t++) f[t] = i;\n    }\n\n    const p = X.createVertex(i, Y.STATIC_DRAW, f.buffer),\n          h = new B(e.transform, e.toMapSpace),\n          u = new J(i, h.attributeLocations, {\n      data: l,\n      componentIndices: Z\n    }, {\n      data: c,\n      componentIndices: p\n    }, n(m)),\n          b = new I(u, F.TRIANGLES, a, o(m)),\n          g = {\n      cameraDepthSquared: .5,\n      gpuMemoryEstimate: c.byteSize + p.byteSize + (o(m) ? m.byteSize : 0)\n    };\n    return new A(h, b, g);\n  }\n\n  _notifyDirty() {\n    this._renderManager.notifyDirty();\n  }\n\n}\n\nconst Z = w(M().u16(N.COMPONENTINDEX));\n\nfunction $(e, t) {\n  return e === t ? U.All : 0 === e ? U.None : U.Some;\n}\n\nconst ee = c(),\n      te = h(),\n      oe = h();\nexport { Q as ComponentObjectCollection };","map":{"version":3,"names":["e","isNone","t","isSome","o","unwrap","n","applySome","r","i","s","a","c","d","m","v","l","f","p","h","u","b","g","ViewingMode","computeOffsetObb","y","ColorMixModeEnum","C","encodeSymbolColor","j","clone","radius","_","glLayout","w","newLayout","M","x","State","O","ComponentObject","D","S","Renderable","A","RenderGeometry","I","RenderSubmitSystem","E","createVertexBufferLayout","P","ComponentParametersVarying","R","ComponentParametersUniform","k","ComponentParameterSummary","U","ComponentMaterial","B","encodeElevationOffset","T","getVisibility","V","updateVisibilityWithCount","G","assert","L","VertexAttribute","N","getVerticalOffsetI3S","H","EdgeInputBufferLayout","W","extractComponentsEdgeLocationsLayout","q","BufferManager","z","BufferObject","X","Usage","Y","PrimitiveType","F","VertexArrayObject","J","K","getLogger","Q","constructor","_renderManager","_viewingMode","_objects","_renderSubmit","register","_componentBufferManager","rctx","dispose","Hidden","length","Visible","destroy","createObject","toMapSpace","transform","obb","components","geometry","componentOffsets","renderable","_createRenderable","intersectionGeometry","positionData","visible","push","destroyObject","removeUnordered","_notifyDirty","setObjectVisibility","preSubmit","camera","eye","visibleObjects","forAll","meta","cameraDepthSquared","center","getMaterial","material","updateMaterial","dirty","setAllComponentVisibilities","visibility","reset","visibilityDirty","forEachVisibleComponent","forEachComponent","getComponentCount","componentCount","invisible","count","setComponentData","materialDataBuffer","materialDataIndices","castShadows","pickable","externalColor","externalColorMixMode","Multiply","elevationOffset","textureBuffer","Uint8Array","Uint32Array","buffer","verticalOffsets","Replace","setData","Array","fill","Math","min","max","pickability","offsetObb","componentParameters","$","transparent","opaqueOverride","texture","updateTexture","All","None","getComponentAabb","Local","localOrigin","position","applyToAabb","getComponentObb","getObjectTransform","getComponentPositions","intersect","ee","rotationScale","te","oe","addEdges","indices","positions","offsets","addComponentObject","extractEdgeInformation","allInvisible","createBuffer","origin","_setComponentIndices","componentIndex","_computeVisibilityIndices","extractComponentsEdgeLocations","indicesLength","skipDeduplicate","data","writerSettings","reducedPrecision","variants","set","allVisible","forEachComponentRange","BYTES_PER_ELEMENT","Uint16Array","addComponentHighlight","highlightCounts","highlightsDirty","removeComponentHighlight","warn","clearHighlights","getObjectGPUMemoryUsage","gpuMemoryEstimate","vertices","layoutParameters","createVertex","STATIC_DRAW","createIndex","attributeLocations","componentIndices","Z","TRIANGLES","byteSize","notifyDirty","u16","COMPONENTINDEX","Some","ComponentObjectCollection"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/ComponentObjectCollection.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import{isNone as t,isSome as o,unwrap as n,applySome as r}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/PooledArray.js\";import{e as s,t as a}from\"../../../../../chunks/mat3.js\";import{c}from\"../../../../../chunks/mat3f32.js\";import{d as m,v as l,t as f}from\"../../../../../chunks/vec3.js\";import{a as p,c as h}from\"../../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../../chunks/vec4f32.js\";import{a as b}from\"../../../../../chunks/vec32.js\";import{c as g}from\"../../../../../chunks/vec33.js\";import{ViewingMode as d}from\"../../../../ViewingMode.js\";import{computeOffsetObb as y}from\"../../../layers/i3s/I3SUtil.js\";import{ColorMixModeEnum as C,encodeSymbolColor as j}from\"../../../layers/support/symbolColorUtils.js\";import{clone as v,radius as _}from\"../../../support/orientedBoundingBox.js\";import{glLayout as w}from\"../../../support/buffer/glUtil.js\";import{newLayout as M}from\"../../../support/buffer/InterleavedLayout.js\";import x from\"./ComponentData.js\";import{State as O,ComponentObject as D}from\"./ComponentObject.js\";import S from\"./IntersectionGeometry.js\";import{Renderable as A}from\"./Renderable.js\";import{RenderGeometry as I}from\"./RenderGeometry.js\";import{RenderSubmitSystem as E}from\"./RenderSubmitSystem.js\";import{createVertexBufferLayout as P}from\"./SourceGeometry.js\";import{ComponentParametersVarying as R,ComponentParametersUniform as k,ComponentParameterSummary as U,ComponentMaterial as B}from\"./Material/ComponentMaterial.js\";import{encodeElevationOffset as T}from\"./Material/shader/ComponentData.glsl.js\";import{getVisibility as V,updateVisibilityWithCount as G}from\"../../lib/ComponentUtils.js\";import{assert as L}from\"../../lib/Util.js\";import{VertexAttribute as N}from\"../../lib/VertexAttribute.js\";import{getVerticalOffsetI3S as H}from\"../../lib/verticalOffsetUtils.js\";import{EdgeInputBufferLayout as W}from\"../../lib/edgeRendering/bufferLayouts.js\";import{extractComponentsEdgeLocationsLayout as q}from\"../../lib/edgeRendering/EdgeProcessingWorker.js\";import{BufferManager as z}from\"../../lib/TextureBackedBuffer/BufferManager.js\";import{BufferObject as X}from\"../../../../webgl/BufferObject.js\";import{Usage as Y,PrimitiveType as F}from\"../../../../webgl/enums.js\";import{VertexArrayObject as J}from\"../../../../webgl/VertexArrayObject.js\";const K=e.getLogger(\"esri.views.3d.webgl-engine.collections.Component.ComponentObjectCollection\");class Q{constructor(e,t){this._renderManager=e,this._viewingMode=t,this._objects=[new i,new i],this._renderSubmit=new E(this),this._renderManager.register(this._renderSubmit),this._componentBufferManager=new z(e.rctx,2)}dispose(){L(0===this._objects[O.Hidden].length&&0===this._objects[O.Visible].length,\"ObjectCollection should be empty upon disposal\"),this._componentBufferManager.destroy()}createObject(e){const t=new D;return t.toMapSpace=e.toMapSpace,t.transform=e.transform,t.obb=v(e.obb),t.components=new x(this._componentBufferManager,e.geometry.componentOffsets),t.renderable=this._createRenderable(e,t.components),t.intersectionGeometry=new S(e.geometry.positionData,t.components),this._objects[t.visible].push(t),t}destroyObject(e){const t=e;this._objects[t.visible].removeUnordered(t),t.dispose(),this._notifyDirty()}setObjectVisibility(e,t){const o=e;t!==o.visible&&(this._objects[o.visible].removeUnordered(o),this._objects[t].push(o),o.visible=t,this._notifyDirty())}preSubmit(e){const t=e.camera.eye;this.visibleObjects.forAll((e=>e.renderable.meta.cameraDepthSquared=m(t,e.obb.center)))}getMaterial(e){return e.renderable.material}updateMaterial(e,t){const o=e.renderable.material;t(o),o.dirty&&this._notifyDirty()}setAllComponentVisibilities(e,t){const o=e;o.components.visibility.reset(t),o.components.visibilityDirty(),this._notifyDirty()}forEachVisibleComponent(e,t){return e.components.visibility.forEachComponent(t)}getComponentCount(e){const t=e,o=t.components.visibility.componentCount();return{visible:o,invisible:t.components.count-o}}setComponentData(e,n){const r=e,i=r.renderable.material,s=r.components,a=s.materialDataBuffer,c=s.materialDataIndices,m={castShadows:!0,pickable:!0,externalColor:u(),externalColorMixMode:C.Multiply,elevationOffset:0},l=a.textureBuffer,f=new Uint8Array(4),p=new Uint32Array(f.buffer);let h=0,b=0,g=0,d=s.verticalOffsets,_=1/0,w=-1/0,M=!1,x=!1,O=0;for(let u=0;u<s.count;u++)n(u,m),h+=+(m.externalColor[3]<1),b+=+(m.externalColorMixMode===C.Replace&&1===m.externalColor[3]),g+=+m.castShadows,j(m.externalColor,m.externalColorMixMode,f),f[2]=254&f[2]|+m.castShadows,l.setData(c[u],0,f[0],f[1],f[2],f[3]),M||(M=u>0&&O!==p[0]),O=p[0],x||(x=0!==m.elevationOffset),x&&t(d)&&(d=new Array(u).fill(0)),o(d)&&(d[u]=m.elevationOffset),_=Math.min(_,m.elevationOffset),w=Math.max(w,m.elevationOffset),T(m.elevationOffset,f),l.setData(c[u],1,f[0],f[1],f[2],f[3]),m.pickable!==V(s.pickability,u)&&(s.pickability=G(s.pickability,s.count,u,m.pickable));s.verticalOffsets=x?d:null,r.offsetObb=x?y(r.obb,_,w,this._viewingMode,o(r.offsetObb)?r.offsetObb:v(r.obb)):null,M||x?(i.componentParameters=new R,i.componentParameters.castShadows=$(g,s.count),i.componentParameters.transparent=$(h,s.count),i.componentParameters.opaqueOverride=$(b,s.count),i.componentParameters.texture=l,l.updateTexture()):(i.componentParameters=new k,i.componentParameters.castShadows=m.castShadows?U.All:U.None,i.componentParameters.externalColor=m.externalColor,i.componentParameters.externalColorMixMode=m.externalColorMixMode),this._notifyDirty()}getComponentAabb(e,o,r,i=!1){e.intersectionGeometry.getComponentAabb(o,r);const s=e,a=s.components.verticalOffsets;if(i||t(a))return r;const c=a[o];if(this._viewingMode===d.Local||0===c)return r[2]+=c,r[5]+=c,r;const m=n(H(c));return m.localOrigin=s.transform.position,m.applyToAabb(r)}getComponentObb(e){return e.obb}getObjectTransform(e){return e.transform}getComponentPositions(e,t,o){return e.intersectionGeometry.getComponentPositions(t,o)}intersect(e,t,n,r,i,c){const m=e;o(i)&&(i.localOrigin=m.transform.position);const p=s(ee,m.transform.rotationScale);l(te,t,m.transform.position),l(oe,n,m.transform.position),f(te,te,p),f(oe,oe,p);const h=a(ee,p);return m.intersectionGeometry.intersect(te,oe,r,h,i,m.components.verticalOffsets,c)}addEdges(e,t,o,n){const r=e,{indices:i,positions:s}=r.intersectionGeometry,a=r.components.offsets;return t.addComponentObject(e,r.transform,{center:r.obb.center,radius:_(r.obb)},s,i,a,o,n)}async extractEdgeInformation(e,t,o){const n=e,r=n.components.visibility;if(r.allInvisible())return{buffer:q.createBuffer(0),origin:[0,0,0]};const{indices:i,positions:s}=n.intersectionGeometry,a=n.components.offsets,c=W.createBuffer(s.count);g(c.position,s),b(c.position,c.position,n.transform.rotationScale),this._setComponentIndices(c.componentIndex,i,a);const m=c.count,l=this._computeVisibilityIndices(i,r,a,m);return{origin:p(n.transform.position),buffer:await t.extractComponentsEdgeLocations({indices:l,indicesLength:l.length,skipDeduplicate:!0,data:c,writerSettings:{reducedPrecision:!1,variants:0}},o)}}_setComponentIndices(e,t,o){let n=0;for(let r=0;r<o.length-1;r++){const i=o[r],s=o[r+1];for(let o=i;o<s;o++){const r=t?t[o]:o;e.set(r,n)}n++}}_computeVisibilityIndices(e,t,o,n){if(e&&t.allVisible())return e;let r=0;t.forEachComponentRange(((e,t)=>(r+=o[t]-o[e],!0)));const i=2===e?.BYTES_PER_ELEMENT||n<=65536?new Uint16Array(r):new Uint32Array(r);let s=0;return t.forEachComponentRange(((t,n)=>{const r=o[t],a=o[n];for(let o=r;o<a;o++)i[s++]=e?e[o]:o;return!0})),i}addComponentHighlight(e,o){const n=e.components;t(n.highlightCounts)&&(n.highlightCounts=new Uint32Array(n.count+1));0===n.highlightCounts[o]++&&(n.highlightsDirty(),this._notifyDirty()),n.highlightCounts[n.count]++}removeComponentHighlight(e,o){const n=e.components;if(t(n.highlightCounts))return void K.warn(\"Removing non-existing highlight.\");const r=n.highlightCounts[o],i=n.highlightCounts[n.count];if(0!==r){if(r>1)return n.highlightCounts[o]=r-1,void(n.highlightCounts[n.count]=i-1);n.highlightCounts[o]=0,n.highlightsDirty(),this._notifyDirty(),1===i?n.highlightCounts=null:n.highlightCounts[n.count]=i-1}else K.warn(\"Removing non-existing highlight.\")}clearHighlights(e){const t=e.components;o(t.highlightCounts)&&(t.highlightCounts=null,t.highlightsDirty(),this._notifyDirty())}getObjectGPUMemoryUsage(e){return e.renderable.meta.gpuMemoryEstimate}get visibleObjects(){return this._objects[O.Visible]}_createRenderable(e,t){const i=this._renderManager.rctx,s=e.geometry,a=s.vertices.layoutParameters,c=X.createVertex(i,Y.STATIC_DRAW,s.vertices.data),m=r(s.indices,(e=>X.createIndex(i,Y.STATIC_DRAW,e))),l=w(P(a)),f=new Uint16Array(s.vertices.count);for(let n=0;n<t.count;n++){const e=t.offsets[n],r=t.offsets[n+1],i=t.materialDataIndices[n];if(o(s.indices))for(let t=e;t<r;t++){f[s.indices[t]]=i}else for(let t=e;t<r;t++)f[t]=i}const p=X.createVertex(i,Y.STATIC_DRAW,f.buffer),h=new B(e.transform,e.toMapSpace),u=new J(i,h.attributeLocations,{data:l,componentIndices:Z},{data:c,componentIndices:p},n(m)),b=new I(u,F.TRIANGLES,a,o(m)),g={cameraDepthSquared:.5,gpuMemoryEstimate:c.byteSize+p.byteSize+(o(m)?m.byteSize:0)};return new A(h,b,g)}_notifyDirty(){this._renderManager.notifyDirty()}}const Z=w(M().u16(N.COMPONENTINDEX));function $(e,t){return e===t?U.All:0===e?U.None:U.Some}const ee=c(),te=h(),oe=h();export{Q as ComponentObjectCollection};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}