{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as s } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as r } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport e from \"./BaseRasterFunction.js\";\nimport n from \"./LocalFunctionArguments.js\";\nimport { local as i } from \"./localUtils.js\";\nlet u = class extends e {\n  constructor() {\n    super(...arguments), this.functionName = \"Local\", this.functionArguments = null, this.rasterArgumentNames = [\"rasters\"];\n  }\n\n  _bindSourceRasters() {\n    const {\n      sourceRasterInfos: t\n    } = this,\n          s = t[0],\n          {\n      bandCount: o\n    } = s,\n          {\n      processAsMultiband: r\n    } = this.functionArguments;\n    if (r && t.some(t => t.bandCount !== o)) return {\n      success: !1,\n      error: \"local-function: input rasters do not have same band count\"\n    };\n    this.outputPixelType = this._getOutputPixelType(\"f32\");\n    const e = s.clone();\n    return e.pixelType = this.outputPixelType, e.statistics = null, e.histograms = null, r || (e.bandCount = 1), this.rasterInfo = e, {\n      success: !0\n    };\n  }\n\n  _processPixels(t) {\n    const {\n      pixelBlocks: o\n    } = t;\n    return s(o) || o.some(t => s(t)) ? null : i(o, this.functionArguments.operation, {\n      processAsMultiband: this.functionArguments.processAsMultiband,\n      outputPixelType: this.outputPixelType ?? void 0\n    });\n  }\n\n};\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], u.prototype, \"functionName\", void 0), t([o({\n  type: n,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], u.prototype, \"functionArguments\", void 0), t([o()], u.prototype, \"rasterArgumentNames\", void 0), u = t([r(\"esri.layers.support.rasterFunctions.LocalFunction\")], u);\nconst c = u;\nexport { c as default };","map":{"version":3,"names":["_","t","isNone","s","property","o","subclass","r","e","n","local","i","u","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","bandCount","processAsMultiband","some","success","error","outputPixelType","_getOutputPixelType","clone","pixelType","statistics","histograms","rasterInfo","_processPixels","pixelBlocks","operation","json","write","name","prototype","type","c","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/support/rasterFunctions/LocalFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isNone as s}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./BaseRasterFunction.js\";import n from\"./LocalFunctionArguments.js\";import{local as i}from\"./localUtils.js\";let u=class extends e{constructor(){super(...arguments),this.functionName=\"Local\",this.functionArguments=null,this.rasterArgumentNames=[\"rasters\"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,s=t[0],{bandCount:o}=s,{processAsMultiband:r}=this.functionArguments;if(r&&t.some((t=>t.bandCount!==o)))return{success:!1,error:\"local-function: input rasters do not have same band count\"};this.outputPixelType=this._getOutputPixelType(\"f32\");const e=s.clone();return e.pixelType=this.outputPixelType,e.statistics=null,e.histograms=null,r||(e.bandCount=1),this.rasterInfo=e,{success:!0}}_processPixels(t){const{pixelBlocks:o}=t;return s(o)||o.some((t=>s(t)))?null:i(o,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})}};t([o({json:{write:!0,name:\"rasterFunction\"}})],u.prototype,\"functionName\",void 0),t([o({type:n,json:{write:!0,name:\"rasterFunctionArguments\"}})],u.prototype,\"functionArguments\",void 0),t([o()],u.prototype,\"rasterArgumentNames\",void 0),u=t([r(\"esri.layers.support.rasterFunctions.LocalFunction\")],u);const c=u;export{c as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}