{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../geometry/Extent.js\";\nimport a from \"../../geometry/Point.js\";\nimport l from \"../../geometry/SpatialReference.js\";\nimport i from \"../../layers/support/RasterInfo.js\";\nimport { parseUrl as s, encode as n, asValidOptions as r } from \"../utils.js\";\nimport o from \"../support/FeatureSet.js\";\n\nasync function u(u, m, f) {\n  const p = s(u),\n        {\n    renderingRule: c,\n    sourceJSON: d\n  } = m || {},\n        h = c ? JSON.stringify(c.rasterFunctionDefinition || c) : null,\n        g = n({ ...p.query,\n    renderingRule: h,\n    f: \"json\"\n  }),\n        v = r(g, f);\n  u = p.path;\n  const y = d || (await e(u, v).then(e => e.data)),\n        S = y.hasRasterAttributeTable ? e(`${u}/rasterAttributeTable`, v) : null,\n        V = y.hasColormap ? e(`${u}/colormap`, v) : null,\n        x = y.hasHistograms ? e(`${u}/histograms`, v) : null,\n        b = y.currentVersion >= 10.3 ? e(`${u}/keyProperties`, v) : null,\n        D = y.hasMultidimensions ? e(`${u}/multidimensionalInfo`, v) : null,\n        R = await Promise.allSettled([S, V, x, b, D]);\n  let T = null;\n\n  if (y.minValues && y.minValues.length === y.bandCount) {\n    T = [];\n\n    for (let e = 0; e < y.minValues.length; e++) T.push({\n      min: y.minValues[e],\n      max: y.maxValues[e],\n      avg: y.meanValues[e],\n      stddev: y.stdvValues[e]\n    });\n  }\n\n  const j = t.fromJSON(y.extent),\n        w = Math.ceil(j.width / y.pixelSizeX - .1),\n        J = Math.ceil(j.height / y.pixelSizeY - .1),\n        N = l.fromJSON(y.spatialReference || y.extent.spatialReference),\n        O = \"fulfilled\" === R[0].status && R[0].value ? o.fromJSON(R[0].value.data) : null,\n        I = \"fulfilled\" === R[1].status ? R[1].value?.data.colormap : null,\n        z = \"fulfilled\" === R[2].status ? R[2].value?.data.histograms : null,\n        C = \"fulfilled\" === R[3].status ? R[3].value?.data ?? {} : {},\n        $ = \"fulfilled\" === R[4].status ? R[4].value?.data.multidimensionalInfo : null;\n  $?.variables?.length && $.variables.forEach(e => {\n    e.statistics?.length && e.statistics.forEach(e => {\n      e.avg = e.mean, e.stddev = e.standardDeviation;\n    });\n  });\n  const {\n    defaultVariable: P,\n    serviceDataType: E\n  } = y;\n  P && P !== C.DefaultVariable && (C.DefaultVariable = P), E && E.includes(\"esriImageServiceDataTypeVector\") && !E.includes(C.DataType) && (C.DataType = E.replace(\"esriImageServiceDataType\", \"\"));\n  let M = y.noDataValue;\n  return y.noDataValues?.length && y.noDataValues.some(e => e !== M) && (M = y.noDataValues), new i({\n    width: w,\n    height: J,\n    bandCount: y.bandCount,\n    extent: t.fromJSON(y.extent),\n    spatialReference: N,\n    pixelSize: new a({\n      x: y.pixelSizeX,\n      y: y.pixelSizeY,\n      spatialReference: N\n    }),\n    pixelType: y.pixelType.toLowerCase(),\n    statistics: T,\n    attributeTable: O,\n    colormap: I,\n    histograms: z,\n    keyProperties: C,\n    noDataValue: M,\n    multidimensionalInfo: $\n  });\n}\n\nfunction m(e, t, a) {\n  return u(e, {\n    sourceJSON: t\n  }, a);\n}\n\nfunction f(e, t, a) {\n  return u(e, {\n    renderingRule: t\n  }, a);\n}\n\nexport { m as fetchServiceRasterInfo, f as generateRasterInfo };","map":{"version":3,"names":["e","t","a","l","i","parseUrl","s","encode","n","asValidOptions","r","o","u","m","f","p","renderingRule","c","sourceJSON","d","h","JSON","stringify","rasterFunctionDefinition","g","query","v","path","y","then","data","S","hasRasterAttributeTable","V","hasColormap","x","hasHistograms","b","currentVersion","D","hasMultidimensions","R","Promise","allSettled","T","minValues","length","bandCount","push","min","max","maxValues","avg","meanValues","stddev","stdvValues","j","fromJSON","extent","w","Math","ceil","width","pixelSizeX","J","height","pixelSizeY","N","spatialReference","O","status","value","I","colormap","z","histograms","C","$","multidimensionalInfo","variables","forEach","statistics","mean","standardDeviation","defaultVariable","P","serviceDataType","E","DefaultVariable","includes","DataType","replace","M","noDataValue","noDataValues","some","pixelSize","pixelType","toLowerCase","attributeTable","keyProperties","fetchServiceRasterInfo","generateRasterInfo"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/rest/imageService/fetchRasterInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../geometry/Extent.js\";import a from\"../../geometry/Point.js\";import l from\"../../geometry/SpatialReference.js\";import i from\"../../layers/support/RasterInfo.js\";import{parseUrl as s,encode as n,asValidOptions as r}from\"../utils.js\";import o from\"../support/FeatureSet.js\";async function u(u,m,f){const p=s(u),{renderingRule:c,sourceJSON:d}=m||{},h=c?JSON.stringify(c.rasterFunctionDefinition||c):null,g=n({...p.query,renderingRule:h,f:\"json\"}),v=r(g,f);u=p.path;const y=d||await e(u,v).then((e=>e.data)),S=y.hasRasterAttributeTable?e(`${u}/rasterAttributeTable`,v):null,V=y.hasColormap?e(`${u}/colormap`,v):null,x=y.hasHistograms?e(`${u}/histograms`,v):null,b=y.currentVersion>=10.3?e(`${u}/keyProperties`,v):null,D=y.hasMultidimensions?e(`${u}/multidimensionalInfo`,v):null,R=await Promise.allSettled([S,V,x,b,D]);let T=null;if(y.minValues&&y.minValues.length===y.bandCount){T=[];for(let e=0;e<y.minValues.length;e++)T.push({min:y.minValues[e],max:y.maxValues[e],avg:y.meanValues[e],stddev:y.stdvValues[e]})}const j=t.fromJSON(y.extent),w=Math.ceil(j.width/y.pixelSizeX-.1),J=Math.ceil(j.height/y.pixelSizeY-.1),N=l.fromJSON(y.spatialReference||y.extent.spatialReference),O=\"fulfilled\"===R[0].status&&R[0].value?o.fromJSON(R[0].value.data):null,I=\"fulfilled\"===R[1].status?R[1].value?.data.colormap:null,z=\"fulfilled\"===R[2].status?R[2].value?.data.histograms:null,C=\"fulfilled\"===R[3].status?R[3].value?.data??{}:{},$=\"fulfilled\"===R[4].status?R[4].value?.data.multidimensionalInfo:null;$?.variables?.length&&$.variables.forEach((e=>{e.statistics?.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation}))}));const{defaultVariable:P,serviceDataType:E}=y;P&&P!==C.DefaultVariable&&(C.DefaultVariable=P),E&&E.includes(\"esriImageServiceDataTypeVector\")&&!E.includes(C.DataType)&&(C.DataType=E.replace(\"esriImageServiceDataType\",\"\"));let M=y.noDataValue;return y.noDataValues?.length&&y.noDataValues.some((e=>e!==M))&&(M=y.noDataValues),new i({width:w,height:J,bandCount:y.bandCount,extent:t.fromJSON(y.extent),spatialReference:N,pixelSize:new a({x:y.pixelSizeX,y:y.pixelSizeY,spatialReference:N}),pixelType:y.pixelType.toLowerCase(),statistics:T,attributeTable:O,colormap:I,histograms:z,keyProperties:C,noDataValue:M,multidimensionalInfo:$})}function m(e,t,a){return u(e,{sourceJSON:t},a)}function f(e,t,a){return u(e,{renderingRule:t},a)}export{m as fetchServiceRasterInfo,f as generateRasterInfo};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}