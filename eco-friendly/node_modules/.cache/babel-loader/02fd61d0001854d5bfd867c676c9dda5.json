{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport r from \"../../../../core/Accessor.js\";\nimport { update as t } from \"../../../../core/arrayUtils.js\";\nimport s from \"../../../../core/Handles.js\";\nimport { someMap as i } from \"../../../../core/MapUtils.js\";\nimport { destroyMaybe as n, disposeMaybe as a, isSome as h, isNone as d, applySome as o, unwrap as _ } from \"../../../../core/maybe.js\";\nimport { watch as l, syncAndInitial as c, initial as p, sync as m } from \"../../../../core/reactiveUtils.js\";\nimport { Milliseconds as g } from \"../../../../core/time.js\";\nimport { property as u } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as f } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { v as T, a as R, m as A } from \"../../../../chunks/mat4.js\";\nimport { I as E, c as P } from \"../../../../chunks/mat4f64.js\";\nimport { c as b } from \"../../../../chunks/boundedPlane.js\";\nimport { MAXIMUM_ANIMATION_LOAD as S, MINIMUM_IDLE_ANIMATION_MS as w } from \"../../support/animationUtils.js\";\nimport H from \"../../support/debugFlags.js\";\nimport { RenderPassManager as M } from \"../core/renderPasses/RenderPassManager.js\";\nimport { HUDTransparentRenderStyle as x } from \"../core/shaderLibrary/hud/HUDUniforms.js\";\nimport { AntiAliasingMode as C, TransparencyPassType as I, Decorations as O, RenderRequestType as D, StencilBits as L } from \"./basicInterfaces.js\";\nimport { BoundingInfo as y } from \"./BoundingInfo.js\";\nimport { ZERO as v, union as N } from \"./depthRange.js\";\nimport { depthRangeFromScene as U } from \"./depthRangeUtils.js\";\nimport { createEmptyDepthTexture as j } from \"./glUtil3D.js\";\nimport { Highlight as q } from \"./Highlight.js\";\nimport { RenderOccludedFlag as V } from \"./Material.js\";\nimport { OffscreenRendering as F } from \"./OffscreenRendering.js\";\nimport { RenderContext as G } from \"./RenderContext.js\";\nimport { splitRenderGeometryChangeSetByMaterial as B } from \"./rendererUtils.js\";\nimport { RenderPass as W } from \"./RenderPass.js\";\nimport { RenderPluginManager as k } from \"./RenderPluginManager.js\";\nimport { RenderSlot as Q } from \"./RenderSlot.js\";\nimport { ShadowAccumulator as z } from \"./ShadowAccumulator.js\";\nimport { ShadowHighlight as X } from \"./ShadowHighlight.js\";\nimport { ShadowMap as Y, SnapshotSlot as K } from \"./ShadowMap.js\";\nimport J from \"./SliceHelper.js\";\nimport { SmaaRenderPass as Z } from \"./SmaaRenderPass.js\";\nimport { SSAOHelper as $ } from \"./SSAOHelper.js\";\nimport { EdgeView as ee } from \"./edgeRendering/EdgeView.js\";\nimport { Transparency as re } from \"./edgeRendering/interfaces.js\";\nimport { MergedRenderer as te } from \"../materials/renderers/MergedRenderer.js\";\nimport { AlphaMode as se } from \"../shaders/CompositingTechniqueConfiguration.js\";\nimport { RendererPerformanceInfo as ie, Statistics as ne } from \"../statistics/RendererPerformanceInfo.js\";\nimport { ClearBufferBit as ae, PixelFormat as he, PixelType as de } from \"../../../webgl/enums.js\";\nconst oe = .9;\n\nlet _e = class extends r {\n  constructor(e, r, t, i, n, a, h, d, o) {\n    super({}), this._materialRepository = e, this._shaderTechniqueRepository = t, this._rctx = i, this._compositingHelper = n, this._magnifierHelper = a, this._requestRender = h, this._stage = o, this._materialRenderers = new Map(), this._needsTransparentPass = !1, this._hasHUDElements = !1, this._hasHighlights = !1, this._hasWater = !1, this._hasOverlayWater = !1, this._content = new Map(), this._isRendering = !1, this._fallbackDepthStencilTexture = null, this.performanceInfo = new ie(), this._antialiasing = C.SMAA, this._oitEnabled = !1, this._multipassTerrain = !0, this._transparentTerrain = !1, this._hasAnimations = !1, this._animationTimestep = g(0), this._handles = new s(), this._renderHiddenTransparentEdges = () => {}, this._oitUsed = !1, this._smaaPass = new Z(this._rctx, t), this._oitEnabled = this._hasOITSupport, this._requestRender(), this._offscreenRendering = new F(this._rctx, this._compositingHelper), this._sliceHelper = new J(), this._shadowMap = new Y(this._rctx, o.viewingMode, 2), this._ssaoHelper = new $(t, this._rctx, () => this._requestRender()), this._highlight = new q(t, this._rctx), this._shadowHighlight = new X(this._rctx, o.viewingMode), this._shadowAccumulator = new z(this._rctx, t, o, e => {\n      const r = this.shadowsEnabled;\n      this._shadowMap.enabled = !0, this._ensureCameraBindParameters(e.camera, e.contentCamera), this._renderPlugins.prepareRender(), this._shadowMap.enabled = r;\n    }, (e, r, t) => {\n      e.shadowMap.start(e.camera, r, t), this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_ALL, e.shadowMap), e.camera.setGLViewport(this._rctx), this._ensureCameraBindParameters(e.camera, e.contentCamera);\n    }, () => this._requestRender()), this._renderContext = new G(this._rctx, this._offscreenRendering, this._shadowMap, this._ssaoHelper, this._sliceHelper), this._renderPlugins = new k({\n      renderContext: this._renderContext,\n      shaderTechniqueRepository: t,\n      textureRep: r,\n      materialRep: this._materialRepository,\n      requestRender: this._requestRender,\n      schedule: d\n    }), this.renderPassManager = new M(this._rctx, this._shaderTechniqueRepository), this._renderPlugins.add(this.renderPassManager.slots(), this.renderPassManager), this._handles.add([l(() => this._stage.state.camera, () => this._requestRender(), c), l(() => H.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES, e => {\n      this._renderHiddenTransparentEdges = e ? () => this._renderEdges(re.TRANSPARENT) : () => {}, this._requestRender();\n    }, p)]);\n  }\n\n  get _bindParameters() {\n    return this._renderContext.bindParameters;\n  }\n\n  get hasWater() {\n    return this._hasWater || this._hasOverlayWater;\n  }\n\n  get hasWaterReflection() {\n    return this.hasWater && this._waterReflectionEnabled;\n  }\n\n  normalizeCtorArgs() {\n    return {};\n  }\n\n  dispose() {\n    this._handles.destroy(), this._smaaPass.dispose(), this._materialRenderers.forEach(e => e.dispose()), this._materialRenderers.clear(), this._edgeView = n(this._edgeView), this._offscreenRendering.dispose(), this._fallbackDepthStencilTexture = a(this._fallbackDepthStencilTexture), this._shadowMap.enabled = !1, this._shadowMap.dispose(), this._ssaoHelper.enabled = !1, this._ssaoHelper.dispose(), this._highlight.dispose(), this._shadowHighlight.dispose(), this._shadowAccumulator.dispose(), y.prune(), this._content.clear();\n  }\n\n  disposeOffscreenBuffers() {\n    this._offscreenRendering.dispose(), this._shadowMap.dispose(), this._smaaPass.disable(), this._ssaoHelper.disposeOffscreenBuffers();\n  }\n\n  get updating() {\n    return this._antialiasing === C.SMAA && this._smaaPass.updating || h(this._edgeView) && this._edgeView.updating || this._shadowAccumulator.running || !this.isCameraFinal;\n  }\n\n  ensureEdgeView() {\n    return d(this._edgeView) && (this._edgeView = new ee({\n      rctx: this._rctx,\n      renderSR: this._stage.renderSR,\n      viewingMode: this._stage.viewingMode,\n      techniqueRepository: this._shaderTechniqueRepository,\n      setNeedsRender: () => this._requestRender(),\n      schedule: e => this._stage.resourceController.schedule(e)\n    }), this._handles.add(l(() => o(this._edgeView, e => e.updating), () => this._requestRender(), m)), this._requestRender()), this._edgeView;\n  }\n\n  get edgeView() {\n    return this._edgeView;\n  }\n\n  get isCameraFinal() {\n    return T(this._bindParameters.ssr.reprojectionMatrix, E);\n  }\n\n  set _reprojectionMatrix(e) {\n    t(this._bindParameters.ssr.reprojectionMatrix, e) && this.notifyChange(\"isCameraFinal\");\n  }\n\n  get shadowsEnabled() {\n    return !!this._shadowMap?.enabled;\n  }\n\n  setRenderParameters(e) {\n    const {\n      _shadowMap: r,\n      _ssaoHelper: t,\n      _bindParameters: s\n    } = this;\n\n    if (void 0 !== e.screenSpaceReflectionsEnabled && s.ssr.enabled !== e.screenSpaceReflectionsEnabled && (s.ssr.enabled = e.screenSpaceReflectionsEnabled, this._requestRender()), void 0 !== e.shadowMap && r.enabled !== e.shadowMap && (r.enabled = e.shadowMap, this._requestRender()), void 0 !== e.shadowMapMaxCascades && r.maxCascades !== e.shadowMapMaxCascades && (r.maxCascades = e.shadowMapMaxCascades, this._requestRender()), h(e.environment)) {\n      h(e.environment.weather) && (this._bindParameters.weather = e.environment.weather, this._bindParameters.weatherVisible = e.weatherVisible, this._renderContext.bindParameters.weather = e.environment.weather, this._renderContext.bindParameters.weatherVisible = e.weatherVisible), void 0 !== e.environment.lighting.ambientOcclusionEnabled && t.enabled !== e.environment.lighting.ambientOcclusionEnabled && (t.enabled = e.environment.lighting.ambientOcclusionEnabled, this._requestRender()), void 0 !== e.environment.lighting.waterReflectionEnabled && this._waterReflectionEnabled !== e.environment.lighting.waterReflectionEnabled && (this._waterReflectionEnabled = e.environment.lighting.waterReflectionEnabled, this._requestRender());\n      const r = \"sun\" === e.environment.lighting.type;\n      s.enableFillLights !== r && (s.enableFillLights = r, this._requestRender());\n    }\n\n    e.background && this._offscreenRendering.background !== e.background && (this._offscreenRendering.background = e.background, this._requestRender());\n    const i = e.antialiasingEnabled ? C.SMAA : C.NONE;\n    void 0 !== e.antialiasingEnabled && this._antialiasing !== i && (this._antialiasing = i, this._requestRender()), void 0 !== e.highQualityTransparency && this._multipassTerrain !== e.highQualityTransparency && (this._multipassTerrain = e.highQualityTransparency, this._oitEnabled = e.highQualityTransparency && this._hasOITSupport, this._requestRender()), void 0 !== e.defaultHighlightOptions && (this._highlight.setDefaultOptions(e.defaultHighlightOptions), this._shadowHighlight.setDefaultOptions(e.defaultHighlightOptions), this._requestRender()), void 0 !== e.overlays && this._bindParameters.overlays !== e.overlays && (this._bindParameters.overlays = e.overlays, this._requestRender()), void 0 !== e.slicePlane && this._sliceHelper.plane !== e.slicePlane && (this._sliceHelper.plane = _(e.slicePlane), this._requestRender()), void 0 !== e.transparentTerrain && this._transparentTerrain !== e.transparentTerrain && (this._transparentTerrain = e.transparentTerrain, this._requestRender()), void 0 !== e.hasOverlayWater && this._hasOverlayWater !== e.hasOverlayWater && (this._hasOverlayWater = e.hasOverlayWater, this._requestRender()), void 0 !== e.shadowCastOptions && this._shadowAccumulator.setOptions(e.shadowCastOptions);\n  }\n\n  get hasSlicePlane() {\n    return !!this._sliceHelper.plane;\n  }\n\n  get renderPlugins() {\n    return this._renderPlugins;\n  }\n\n  get _hasOITSupport() {\n    return this._rctx.driverTest.floatBufferBlendWorking;\n  }\n\n  modify(e) {\n    this._isRendering && console.warn(\"Renderer.modify called while rendering\");\n    const {\n      adds: r,\n      removes: t,\n      updates: s\n    } = e;\n    if (0 === r.length && 0 === t.length && 0 === s.length) return;\n    t.forAll(({\n      id: e\n    }) => this._content.delete(e)), r.forAll(e => this._content.set(e.id, e));\n    const n = B(e);\n    let a = !1;\n    n.forEach((e, r) => {\n      let t = this._materialRenderers.get(r);\n\n      if (!t) {\n        if (!(e.adds.length > 0)) return;\n        t = new te(this._rctx, this._materialRepository, r), this._materialRenderers.set(r, t);\n      }\n\n      t.modify(e), t.isEmpty && (a = !0);\n    }), a && this._materialRenderers.forEach((e, r) => {\n      e.isEmpty && (this._materialRenderers.delete(r), e.dispose());\n    }), this._hasHighlights = i(this._materialRenderers, e => e.hasHighlights), this._bindParameters.hasOccludees = i(this._materialRenderers, e => e.hasOccludees), this._hasWater = i(this._materialRenderers, e => e.hasWater), this._needsTransparentPass = i(this._materialRenderers, e => e.requiresSlot(Q.TRANSPARENT_MATERIAL, W.MATERIAL)), this._hasHUDElements = i(this._materialRenderers, e => e.requiresSlot(Q.LINE_CALLOUTS_HUD_DEPTH, W.MATERIAL) || e.requiresSlot(Q.HUD_MATERIAL, W.MATERIAL) || e.requiresSlot(Q.LABEL_MATERIAL, W.MATERIAL)), this._requestRender();\n  }\n\n  updateAnimation(e) {\n    return this._hasAnimations = !1, this._materialRenderers.forEach(r => this._hasAnimations = r.updateAnimation(e) || this._hasAnimations), this._hasAnimations = this._renderPlugins.updateAnimation(e) || this._hasAnimations, this._hasAnimations;\n  }\n\n  get animationTimestep() {\n    return this._animationTimestep;\n  }\n\n  updateLightSources(e, r, t) {\n    this._bindParameters.lighting.groundLightingFactor = r, this._bindParameters.lighting.globalFactor = t, this._bindParameters.lighting.set(e);\n  }\n\n  render(e, r, t, s) {\n    this._isRendering = !0, this.performanceInfo.prerender(this._rctx), this._bindParameters.transparencyPassType = I.NONE;\n    const i = this._offscreenRendering;\n    i.needLastFrameColorTexture = this.hasWaterReflection, i.advanceCurrentRenderTarget();\n    const n = b(this._sliceHelper.plane);\n    s === O.OFF && (this._sliceHelper.plane = null), this._rctx.bindFramebuffer(e), r.setGLViewport(this._rctx), this._ensureCameraBindParameters(r, t), this._renderPlugins.prepareRender(), this.performanceInfo.advance(ne.Prepare);\n\n    const a = this._computeDepthRange(r);\n\n    this._renderShadowMap(e, r, this._bindParameters.lighting.lightingMainDirection, a), this.performanceInfo.advance(ne.Shadowmap), i.initializeFrame(r), this._ensureBindParameters(r, t), this._renderLinearDepth(), this.performanceInfo.advance(ne.Lineardepth), this._accumulateShadows(a, r, t), this._renderNormal(), this.performanceInfo.advance(ne.Normals), this._ensureBindParametersSSR(), this._ssaoHelper.computeSSAO(this._bindParameters, i.linearDepthTexture, i.normalTexture), this.performanceInfo.advance(ne.SSAO), this._renderContext.pass = W.MATERIAL, i.bindFramebuffer(), this._renderOpaqueGeometry(), this.performanceInfo.advance(ne.Opaque);\n    const o = this._multipassTerrain && this._transparentTerrain;\n    this._renderTerrainLinearDepth(o), this._setMultipassEnabled(o), this._setTerrainCulling(o), this._renderEdges(re.OPAQUE), this.performanceInfo.advance(ne.OpaqueEdges), this._offscreenRendering.bindTarget(this._offscreenRendering.currentColorTarget, this._offscreenRendering.mainDepth), this._renderSlot(Q.VOXEL), this._renderHiddenTransparentEdges();\n\n    const _ = this._needsTransparentPass || this._renderPlugins.needsTransparentPass;\n\n    _ && (this._oitEnabled ? this._renderOrderIndependentTransparency(() => this._renderTransparentGeometry(), !1) : this._renderTransparentGeometry()), this.performanceInfo.advance(ne.Transparent), this._renderGeometryLinearDepth(o);\n\n    const l = this._renderHUDVisibility();\n\n    o || this._renderInternalSlot(Q.LINE_CALLOUTS), this.performanceInfo.advance(ne.Hudvisibility), this._renderEdges(re.TRANSPARENT, o), this.performanceInfo.advance(ne.TransparentEdges), this._renderTransparentTerrain(), this._transparentTerrain && l && (o ? this._renderLineCallouts(x.Occluded) : i.compositeTransparentTerrainOntoHUDVisibility(this._bindParameters), this._renderHUD(x.Occluded, i.framebuffer), this.performanceInfo.advance(ne.HudOccluded)), this.performanceInfo.advance(ne.TransparentTerrain), this._setTerrainCulling(!1), this._transparentTerrain && (i.compositeTransparentTerrainOntoMain(this._bindParameters), o && (this._renderEdges(re.OPAQUE), this.performanceInfo.advance(ne.OpaqueEdges), _ && (this._oitEnabled ? this._renderOrderIndependentTransparency(() => this._renderTransparentGeometry(), !1) : this._renderTransparentGeometry()), this.performanceInfo.advance(ne.Transparent), this._renderEdges(re.TRANSPARENT), this.performanceInfo.advance(ne.TransparentEdges))), o && this._renderLineCallouts(x.NotOccluded), this._setMultipassEnabled(!1), this._shadowAccumulator.render(this._bindParameters), i.renderToTargets(() => {\n      this._renderInternalSlot(Q.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL), this._renderSlot(Q.POSTPROCESSING_ENVIRONMENT_TRANSPARENT), this._renderSlot(Q.LASERLINES);\n    }, i.currentColorTarget, i.mainDepth), this.performanceInfo.advance(ne.Atmosphere), this._renderPlugins.needsLaserlineWithContrastControl && i.renderTmpAndCompositeToMain(() => this._renderSlot(Q.LASERLINES_CONTRAST_CONTROL), this._bindParameters, se.PremultipliedAlpha), this.performanceInfo.advance(ne.Laserline), this._renderOccluded(), this.performanceInfo.advance(ne.Occluded);\n    const c = s === O.ON && this._magnifierHelper.enabled,\n          p = c && d(e) ? this._offscreenRendering.getFramebuffer(this._offscreenRendering.tmpColor, this._offscreenRendering.tmpDepth) : e;\n\n    this._rctx.bindFramebuffer(p);\n\n    const m = this._offscreenRendering.colorTexture;\n    !this._renderAntiAliasing(this._antialiasing, m) && h(m) && this._compositingHelper.composite(this._bindParameters, m, se.None), this.performanceInfo.advance(ne.Antialiasing), this._renderHUD(x.NotOccluded, p), this.performanceInfo.advance(ne.HudNotoccluded), this._renderHighlights(p, this._bindParameters), this.performanceInfo.advance(ne.Highlights), c && this._magnifierHelper.render(this._rctx, this._bindParameters), p !== e && (this._rctx.bindFramebuffer(e), this._compositingHelper.composite(this._bindParameters, this._offscreenRendering.tmpColorTexture, se.None)), this._disposeOITBuffers(), this._renderContext.lastFrameCamera.copyFrom(this._bindParameters.camera), this._sliceHelper.plane = n, this._isRendering = !1, this.onPostRender && this.onPostRender(), this.performanceInfo.postrender();\n  }\n\n  finish(e) {\n    if (this._hasAnimations || (this._animationTimestep = g(0)), e === D.BACKGROUND) {\n      this._rctx.gl.getError();\n\n      const e = this.performanceInfo.elapsedTime / S;\n      this._animationTimestep = g(Math.max(this._animationTimestep * oe + e * (1 - oe), w));\n    }\n  }\n\n  readDepthPixels(e, r, t) {\n    const s = this._offscreenRendering.bindTarget(this._offscreenRendering.linearDepth, this._offscreenRendering.tmpDepth);\n\n    if (!this._needsLinearDepth) {\n      this._ensureBindParameters(e, e), this._bindParameters.camera.setGLViewport(this._rctx), this._rctx.setClearColor(0, 0, 0, 0);\n      const r = ae.COLOR_BUFFER_BIT | ae.DEPTH_BUFFER_BIT | ae.STENCIL_BUFFER_BIT;\n      this._rctx.clearSafe(r), this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH);\n    }\n\n    s.readPixels(r[0], r[1], r[2], r[3], he.RGBA, de.UNSIGNED_BYTE, t);\n  }\n\n  readHUDVisibility(e, r, t, s, i) {\n    this._offscreenRendering.bindTarget(this._offscreenRendering.hudVisibility).readPixels(e, r, t, s, he.RGBA, de.UNSIGNED_BYTE, i);\n  }\n\n  readAccumulatedShadow(e, r) {\n    return this._shadowAccumulator.readAccumulatedShadow(e, r);\n  }\n\n  _setMultipassEnabled(e) {\n    this._bindParameters.multipassTerrain.enabled = this._bindParameters.multipassGeometry.enabled = e;\n  }\n\n  _setTerrainCulling(e) {\n    this._bindParameters.multipassTerrain.cullAboveGround = e;\n  }\n\n  _renderSlot(e) {\n    this._bindParameters.slot = e, this._renderPlugins.render();\n  }\n\n  _renderEdges(e, r = !1) {\n    const t = this._edgeView;\n    h(t) && t.shouldRender() && this._offscreenRendering.renderTmpAndCompositeToMain(() => t.render(this._bindParameters, e), this._bindParameters, se.Alpha, r);\n  }\n\n  _renderShadowMap(e, r, t, s) {\n    const i = this._shadowMap;\n    i.enabled && (i.start(r, t, s), this._shadowHighlight.updateParameters(r, t), this.needsShadowHighlight ? (this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT, this._shadowMap, e => i.takeCascadeSnapshotTo(e, K.Highlight)), i.clear(), this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_DEFAULT, this._shadowMap, e => {\n      i.takeCascadeSnapshotTo(e, K.Default), this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT);\n    })) : this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_ALL), i.finish(e), r.setGLViewport(this._rctx));\n  }\n\n  _renderShadowCascades(e, r = this._shadowMap, t = e => {}) {\n    for (const s of r.getCascades()) s.camera.setGLViewport(this._rctx), this._ensureCameraBindParameters(s.camera, s.camera), this._renderGeometryAndTransparentTerrainPass(e), t(s);\n  }\n\n  get _needsLinearDepth() {\n    return this._ssaoHelper.enabled || this._renderPlugins.needsLinearDepth || this._hasWater && this._waterReflectionEnabled || this.needsShadowHighlight || this.needsShadowCast;\n  }\n\n  _renderLinearDepth() {\n    this._needsLinearDepth ? this._offscreenRendering.renderToTargets(() => this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH), this._offscreenRendering.linearDepth, this._offscreenRendering.tmpDepth, [0, 0, 0, 0], !0, !0) : this._offscreenRendering.disposeTarget(this._offscreenRendering.linearDepth), this._bindParameters.linearDepthTexture = this._offscreenRendering.linearDepthTexture;\n  }\n\n  _renderTerrainLinearDepth(e) {\n    if (e) {\n      const e = this._renderContext.pass;\n      this._renderContext.pass = W.MATERIAL_DEPTH, this._offscreenRendering.renderToTargets(() => this._renderTransparentTerrain(), this._offscreenRendering.terrainLinearDepth, this._offscreenRendering.tmpDepth, [-1e10, -1e10, -1e10, 1], !0, !0), this._renderContext.pass = e;\n    } else this._offscreenRendering.disposeTarget(this._offscreenRendering.terrainLinearDepth);\n\n    this._bindParameters.multipassTerrain.linearDepthTexture = this._offscreenRendering.terrainLinearDepthTexture;\n  }\n\n  _renderGeometryLinearDepth(e) {\n    if (e) {\n      const e = this._renderContext.pass;\n      this._offscreenRendering.renderToTargets(() => this._renderGeometryPass(W.MATERIAL_DEPTH), this._offscreenRendering.geometryLinearDepth, this._offscreenRendering.tmpDepth, [1, 1, 1, 1], !0, !0), this._renderContext.pass = e;\n    } else this._offscreenRendering.disposeTarget(this._offscreenRendering.geometryLinearDepth);\n\n    this._bindParameters.multipassGeometry.linearDepthTexture = this._offscreenRendering.geometryLinearDepthTexture;\n  }\n\n  get needsNormal() {\n    return this._ssaoHelper.enabled;\n  }\n\n  _renderNormal() {\n    this.needsNormal ? this._offscreenRendering.renderToTargets(() => {\n      this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_NORMAL);\n    }, this._offscreenRendering.normal, this._offscreenRendering.tmpDepth, [0, 0, 0, 0], !0, !0) : this._offscreenRendering.disposeTarget(this._offscreenRendering.normal);\n  }\n\n  get needsDepthRange() {\n    return this._shadowMap.enabled || this.needsShadowCast;\n  }\n\n  _computeDepthRange(e) {\n    if (!this.needsDepthRange) return v;\n    const r = U(e, this._content, this._stage.layers);\n    return N(r, this.renderPlugins.queryDepthRange(e)), r.near = Math.max(e.near, r.near), r.far = Math.min(e.far, r.far), r;\n  }\n\n  _renderGeometryAndTransparentTerrainPass(e) {\n    this._renderContext.pass = e, this._renderGeometryPass(e), this._renderTransparentTerrain();\n  }\n\n  _renderGeometryPass(e) {\n    this._renderContext.pass = e, this._renderOpaqueGeometry(), this._renderTransparentGeometry();\n  }\n\n  _renderOpaqueGeometry() {\n    this._renderSlot(Q.INTEGRATED_MESH), this._renderSlot(Q.OPAQUE_TERRAIN), this._renderInternalSlot(Q.OPAQUE_MATERIAL), this._renderSlot(Q.OPAQUE_MATERIAL), this._renderSlot(Q.POSTPROCESSING_ENVIRONMENT_OPAQUE);\n  }\n\n  _renderTransparentGeometry() {\n    this._renderInternalSlot(Q.TRANSPARENT_MATERIAL), this._renderSlot(Q.TRANSPARENT_MATERIAL);\n  }\n\n  _renderTransparentTerrain() {\n    this._renderSlot(Q.TRANSPARENT_TERRAIN);\n  }\n\n  _renderHUDVisibility() {\n    let e = !1;\n    return this._renderContext.offscreenRenderingHelper && this._renderContext.offscreenRenderingHelper.renderHUDVisibility(() => {\n      this._bindParameters.hudVisibilityTexture = this._renderContext.offscreenRenderingHelper.hudVisibilityTexture, e = this._renderInternalSlot(Q.OCCLUSION_PIXELS);\n    }, this._multipassTerrain && this._transparentTerrain), e;\n  }\n\n  _renderLineCallouts(e) {\n    this._bindParameters.renderTransparentlyOccludedHUD = e, e === x.Occluded ? this._offscreenRendering.renderToTargets(() => this._renderInternalSlot(Q.LINE_CALLOUTS), this._offscreenRendering.currentColorTarget, this._offscreenRendering.tmpDepth, void 0, !0, !0) : this._renderInternalSlot(Q.LINE_CALLOUTS);\n  }\n\n  _renderHUD(e, r) {\n    this._hasHUDElements && (this._oitEnabled ? (this._renderOrderIndependentTransparency(() => this._renderHUDElements(e), !0), this._rctx.bindFramebuffer(r), this._compositingHelper.composite(this._bindParameters, this._offscreenRendering.hudColorTexture, se.PremultipliedAlpha)) : e === x.Occluded ? this._offscreenRendering.renderToTargets(() => this._renderHUDElements(x.Occluded), this._offscreenRendering.currentColorTarget, this._offscreenRendering.tmpDepth, void 0, !0, !0) : this._renderHUDElements(e));\n  }\n\n  _renderHUDElements(e) {\n    this._bindParameters.renderTransparentlyOccludedHUD = e, this._renderInternalSlot(Q.LINE_CALLOUTS_HUD_DEPTH), this._renderInternalSlot(Q.HUD_MATERIAL), this._renderInternalSlot(Q.LABEL_MATERIAL);\n  }\n\n  get needsHighlight() {\n    return this._hasHighlights || this._renderPlugins.needsHighlight;\n  }\n\n  get needsShadowHighlight() {\n    return this._shadowMap.enabled && this._shadowHighlight.isVisible && this.needsHighlight;\n  }\n\n  _renderHighlights(e, r) {\n    if (!this.needsHighlight) return void this._offscreenRendering.disposeTarget(this._offscreenRendering.highlight);\n\n    const t = this._highlight,\n          s = this._offscreenRendering.renderToTargets(() => {\n      this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_HIGHLIGHT), this._rctx.clearSafe(ae.DEPTH_BUFFER_BIT), this._renderHUDElements(x.Both);\n    }, this._offscreenRendering.highlight, this._offscreenRendering.tmpDepth, [0, 0, 0, 0], !0, !0);\n\n    this._bindParameters.highlightColorTexture = s.colorTexture, this.needsShadowHighlight && this._shadowHighlight.render(r, e), t.render(this._bindParameters, s, e);\n  }\n\n  get needsShadowCast() {\n    return this._shadowAccumulator.isAccumulating;\n  }\n\n  _accumulateShadows(e, r, t) {\n    this.needsShadowCast && this._shadowAccumulator.renderAccumulation(this._offscreenRendering.linearDepthTexture, e, r, t);\n  }\n\n  _renderOrderIndependentTransparency(e, r) {\n    const t = t => {\n      this._bindParameters.transparencyPassType = t, this._offscreenRendering.renderOITPass(() => e(), t, r);\n    },\n          s = this._renderContext.pass;\n\n    this._renderContext.pass = W.MATERIAL_ALPHA, t(I.Alpha), this._renderContext.pass = W.MATERIAL, t(I.Color), t(I.FrontFace), this._offscreenRendering.compositeTransparentOntoOpaque(this._bindParameters, r), this._bindParameters.transparencyPassType = I.NONE, this._renderContext.pass = s, this._oitUsed = !0;\n  }\n\n  _disposeOITBuffers() {\n    this._oitUsed || (this._offscreenRendering.disposeTarget(this._offscreenRendering.alphaFloatTarget), this._offscreenRendering.disposeTarget(this._offscreenRendering.colorFloatTarget), this._offscreenRendering.disposeTarget(this._offscreenRendering.frontFaceTarget)), this._oitUsed = !1;\n  }\n\n  _renderOccluded() {\n    let e = 0;\n\n    this._materialRenderers.forEach((r, t) => {\n      t && t.isVisible() && t.renderOccluded === V.OccludeAndTransparentStencil && (e |= t.renderOccluded, pe.push(t));\n    });\n\n    const r = this._offscreenRendering,\n          t = (t, s, i, n, a) => {\n      0 != (e & s) && (r.renderToTargets(i, r.tmpColor, r.mainDepth, [0, 0, 0, 0], n, a), r.compositeOccludedOntoMain(this._bindParameters, t));\n    };\n\n    0 !== pe.length && (this._renderInternalSlot(Q.OCCLUDER_MATERIAL, pe), t(.5, V.OccludeAndTransparentStencil, () => this._renderInternalSlot(Q.TRANSPARENT_OCCLUDER_MATERIAL, pe), !1, !1), pe.length = 0), this._materialRenderers.forEach((r, t) => {\n      t && t.isVisible() && (t.renderOccluded === V.OccludeAndTransparent || t.renderOccluded === V.Transparent || t.renderOccluded === V.Opaque) && (e |= t.renderOccluded, ce.push(t));\n    });\n    const s = this._renderPlugins.renderOccludedFlags;\n    if (e |= s, !e) return;\n\n    const i = e => {\n      this._renderContext.renderOccludedMask = e, s > V.Occlude && this._renderSlot(Q.OCCLUDED_TERRAIN), this._renderInternalSlot(Q.OPAQUE_MATERIAL, ce), this._renderInternalSlot(Q.TRANSPARENT_MATERIAL, ce), this._renderInternalSlot(Q.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL, ce), this._renderContext.resetRenderOccludedMask();\n    };\n\n    this._renderContext.pass = W.MATERIAL, t(.5, V.OccludeAndTransparent, () => i(V.OccludeAndTransparent), !0, L.OutlineVisualElementMask), t(.5, V.Transparent, () => i(V.Transparent), !0, L.OutlineVisualElementMask), t(1, V.Opaque, () => i(V.Opaque), !0, L.OutlineVisualElementMask), ce.length = 0;\n  }\n\n  _renderAntiAliasing(e, r) {\n    if (e === C.SMAA) {\n      if (this._smaaPass.enable(() => this._requestRender()) && h(r)) return this._smaaPass.render(r), !0;\n    } else this._smaaPass.disable();\n\n    return !1;\n  }\n\n  _ensureCameraBindParameters(e, r) {\n    this._bindParameters.camera = e, this._bindParameters.contentCamera = r;\n  }\n\n  _ensureBindParameters(e, r) {\n    this._ensureCameraBindParameters(e, r);\n\n    const t = this._renderContext.offscreenRenderingHelper;\n    this._bindParameters.hudVisibilityTexture = t.hudVisibilityTexture, this._bindParameters.highlightDepthTexture = t.depthTexture ?? this._getFallbackDepthTexture();\n  }\n\n  _ensureBindParametersSSR() {\n    this.hasWaterReflection ? (this._renderContext.lastFrameCamera.equals(this._bindParameters.camera) ? this._reprojectionMatrix = E : (R(ge, this._bindParameters.camera.viewMatrix), R(me, this._bindParameters.camera.projectionMatrix), A(ue, ge, me), A(ue, this._renderContext.lastFrameCamera.viewMatrix, ue), A(ue, this._renderContext.lastFrameCamera.projectionMatrix, ue), this._reprojectionMatrix = ue), this._bindParameters.ssr.lastFrameColorTexture = this._offscreenRendering.lastFrameColorTexture) : this._bindParameters.ssr.lastFrameColorTexture = null, this._bindParameters.ssr.enabled = this.hasWaterReflection;\n  }\n\n  _renderInternalSlot(e, r) {\n    let t = !1;\n    return this._bindParameters.slot = e, h(r) ? r.forEach(e => {\n      if (!e.shouldRender(this._renderContext)) return;\n\n      const r = this._materialRenderers.get(e);\n\n      h(r) && (t = r.render(this._renderContext.pass, this._bindParameters) || t);\n    }) : this._materialRenderers.forEach((e, r) => {\n      r.shouldRender(this._renderContext) && e.render(this._renderContext.pass, this._bindParameters) && (t = !0);\n    }), t;\n  }\n\n  _getFallbackDepthTexture() {\n    return this._fallbackDepthStencilTexture || (this._fallbackDepthStencilTexture = j(this._rctx)), this._fallbackDepthStencilTexture;\n  }\n\n  get gpuMemoryUsage() {\n    return {\n      offscreen: this._offscreenRendering?.gpuMemoryUsage ?? 0,\n      highlights: (this._highlight?.gpuMemoryUsage ?? 0) + (this._shadowHighlight?.gpuMemoryUsage ?? 0),\n      shadows: this._shadowMap?.gpuMemoryUsage ?? 0,\n      ssao: this._ssaoHelper?.gpuMemoryUsage ?? 0\n    };\n  }\n\n  get test() {\n    const e = this;\n    return {\n      offscreen: this._offscreenRendering,\n      shadowMap: this._shadowMap,\n      ssao: this._ssaoHelper,\n      highlight: this._highlight,\n      lighting: this._bindParameters.lighting,\n      materialRenderers: this._materialRenderers,\n      shadowAccumulator: this._shadowAccumulator,\n      getFramebufferTexture: r => {\n        switch (r) {\n          case le.Color:\n            return e._offscreenRendering.colorTexture;\n\n          case le.LinearDepth:\n            return e._offscreenRendering.linearDepthTexture;\n\n          case le.Normals:\n            return e._offscreenRendering.normalTexture;\n\n          case le.ShadowMap:\n            return e._shadowMap.depthTexture;\n\n          case le.HudVisibility:\n            return e._offscreenRendering.hudVisibilityTexture;\n\n          case le.Highlight:\n            return e._offscreenRendering.highlightTexture;\n        }\n      }\n    };\n  }\n\n};\n\nvar le;\ne([u()], _e.prototype, \"_shadowAccumulator\", void 0), e([u()], _e.prototype, \"_smaaPass\", void 0), e([u()], _e.prototype, \"_antialiasing\", void 0), e([u()], _e.prototype, \"_edgeView\", void 0), e([u()], _e.prototype, \"updating\", null), e([u()], _e.prototype, \"isCameraFinal\", null), _e = e([f(\"esri.views.3d.webgl-engine.lib.Renderer\")], _e), function (e) {\n  e[e.Color = 0] = \"Color\", e[e.LinearDepth = 1] = \"LinearDepth\", e[e.Normals = 2] = \"Normals\", e[e.ShadowMap = 3] = \"ShadowMap\", e[e.HudVisibility = 4] = \"HudVisibility\", e[e.Highlight = 5] = \"Highlight\";\n}(le || (le = {}));\nconst ce = [],\n      pe = [],\n      me = P(),\n      ge = P(),\n      ue = P();\nexport { le as FramebufferId, _e as Renderer };","map":{"version":3,"names":["_","e","r","update","t","s","someMap","i","destroyMaybe","n","disposeMaybe","a","isSome","h","isNone","d","applySome","o","unwrap","watch","l","syncAndInitial","c","initial","p","sync","m","Milliseconds","g","property","u","subclass","f","v","T","R","A","I","E","P","b","MAXIMUM_ANIMATION_LOAD","S","MINIMUM_IDLE_ANIMATION_MS","w","H","RenderPassManager","M","HUDTransparentRenderStyle","x","AntiAliasingMode","C","TransparencyPassType","Decorations","O","RenderRequestType","D","StencilBits","L","BoundingInfo","y","ZERO","union","N","depthRangeFromScene","U","createEmptyDepthTexture","j","Highlight","q","RenderOccludedFlag","V","OffscreenRendering","F","RenderContext","G","splitRenderGeometryChangeSetByMaterial","B","RenderPass","W","RenderPluginManager","k","RenderSlot","Q","ShadowAccumulator","z","ShadowHighlight","X","ShadowMap","Y","SnapshotSlot","K","J","SmaaRenderPass","Z","SSAOHelper","$","EdgeView","ee","Transparency","re","MergedRenderer","te","AlphaMode","se","RendererPerformanceInfo","ie","Statistics","ne","ClearBufferBit","ae","PixelFormat","he","PixelType","de","oe","_e","constructor","_materialRepository","_shaderTechniqueRepository","_rctx","_compositingHelper","_magnifierHelper","_requestRender","_stage","_materialRenderers","Map","_needsTransparentPass","_hasHUDElements","_hasHighlights","_hasWater","_hasOverlayWater","_content","_isRendering","_fallbackDepthStencilTexture","performanceInfo","_antialiasing","SMAA","_oitEnabled","_multipassTerrain","_transparentTerrain","_hasAnimations","_animationTimestep","_handles","_renderHiddenTransparentEdges","_oitUsed","_smaaPass","_hasOITSupport","_offscreenRendering","_sliceHelper","_shadowMap","viewingMode","_ssaoHelper","_highlight","_shadowHighlight","_shadowAccumulator","shadowsEnabled","enabled","_ensureCameraBindParameters","camera","contentCamera","_renderPlugins","prepareRender","shadowMap","start","_renderShadowCascades","MATERIAL_DEPTH_SHADOWMAP_ALL","setGLViewport","_renderContext","renderContext","shaderTechniqueRepository","textureRep","materialRep","requestRender","schedule","renderPassManager","add","slots","state","EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES","_renderEdges","TRANSPARENT","_bindParameters","bindParameters","hasWater","hasWaterReflection","_waterReflectionEnabled","normalizeCtorArgs","dispose","destroy","forEach","clear","_edgeView","prune","disposeOffscreenBuffers","disable","updating","running","isCameraFinal","ensureEdgeView","rctx","renderSR","techniqueRepository","setNeedsRender","resourceController","edgeView","ssr","reprojectionMatrix","_reprojectionMatrix","notifyChange","setRenderParameters","screenSpaceReflectionsEnabled","shadowMapMaxCascades","maxCascades","environment","weather","weatherVisible","lighting","ambientOcclusionEnabled","waterReflectionEnabled","type","enableFillLights","background","antialiasingEnabled","NONE","highQualityTransparency","defaultHighlightOptions","setDefaultOptions","overlays","slicePlane","plane","transparentTerrain","hasOverlayWater","shadowCastOptions","setOptions","hasSlicePlane","renderPlugins","driverTest","floatBufferBlendWorking","modify","console","warn","adds","removes","updates","length","forAll","id","delete","set","get","isEmpty","hasHighlights","hasOccludees","requiresSlot","TRANSPARENT_MATERIAL","MATERIAL","LINE_CALLOUTS_HUD_DEPTH","HUD_MATERIAL","LABEL_MATERIAL","updateAnimation","animationTimestep","updateLightSources","groundLightingFactor","globalFactor","render","prerender","transparencyPassType","needLastFrameColorTexture","advanceCurrentRenderTarget","OFF","bindFramebuffer","advance","Prepare","_computeDepthRange","_renderShadowMap","lightingMainDirection","Shadowmap","initializeFrame","_ensureBindParameters","_renderLinearDepth","Lineardepth","_accumulateShadows","_renderNormal","Normals","_ensureBindParametersSSR","computeSSAO","linearDepthTexture","normalTexture","SSAO","pass","_renderOpaqueGeometry","Opaque","_renderTerrainLinearDepth","_setMultipassEnabled","_setTerrainCulling","OPAQUE","OpaqueEdges","bindTarget","currentColorTarget","mainDepth","_renderSlot","VOXEL","needsTransparentPass","_renderOrderIndependentTransparency","_renderTransparentGeometry","Transparent","_renderGeometryLinearDepth","_renderHUDVisibility","_renderInternalSlot","LINE_CALLOUTS","Hudvisibility","TransparentEdges","_renderTransparentTerrain","_renderLineCallouts","Occluded","compositeTransparentTerrainOntoHUDVisibility","_renderHUD","framebuffer","HudOccluded","TransparentTerrain","compositeTransparentTerrainOntoMain","NotOccluded","renderToTargets","TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL","POSTPROCESSING_ENVIRONMENT_TRANSPARENT","LASERLINES","Atmosphere","needsLaserlineWithContrastControl","renderTmpAndCompositeToMain","LASERLINES_CONTRAST_CONTROL","PremultipliedAlpha","Laserline","_renderOccluded","ON","getFramebuffer","tmpColor","tmpDepth","colorTexture","_renderAntiAliasing","composite","None","Antialiasing","HudNotoccluded","_renderHighlights","Highlights","tmpColorTexture","_disposeOITBuffers","lastFrameCamera","copyFrom","onPostRender","postrender","finish","BACKGROUND","gl","getError","elapsedTime","Math","max","readDepthPixels","linearDepth","_needsLinearDepth","setClearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearSafe","_renderGeometryAndTransparentTerrainPass","MATERIAL_DEPTH","readPixels","RGBA","UNSIGNED_BYTE","readHUDVisibility","hudVisibility","readAccumulatedShadow","multipassTerrain","multipassGeometry","cullAboveGround","slot","shouldRender","Alpha","updateParameters","needsShadowHighlight","MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT","takeCascadeSnapshotTo","MATERIAL_DEPTH_SHADOWMAP_DEFAULT","Default","getCascades","needsLinearDepth","needsShadowCast","disposeTarget","terrainLinearDepth","terrainLinearDepthTexture","_renderGeometryPass","geometryLinearDepth","geometryLinearDepthTexture","needsNormal","MATERIAL_NORMAL","normal","needsDepthRange","layers","queryDepthRange","near","far","min","INTEGRATED_MESH","OPAQUE_TERRAIN","OPAQUE_MATERIAL","POSTPROCESSING_ENVIRONMENT_OPAQUE","TRANSPARENT_TERRAIN","offscreenRenderingHelper","renderHUDVisibility","hudVisibilityTexture","OCCLUSION_PIXELS","renderTransparentlyOccludedHUD","_renderHUDElements","hudColorTexture","needsHighlight","isVisible","highlight","MATERIAL_HIGHLIGHT","Both","highlightColorTexture","isAccumulating","renderAccumulation","renderOITPass","MATERIAL_ALPHA","Color","FrontFace","compositeTransparentOntoOpaque","alphaFloatTarget","colorFloatTarget","frontFaceTarget","renderOccluded","OccludeAndTransparentStencil","pe","push","compositeOccludedOntoMain","OCCLUDER_MATERIAL","TRANSPARENT_OCCLUDER_MATERIAL","OccludeAndTransparent","ce","renderOccludedFlags","renderOccludedMask","Occlude","OCCLUDED_TERRAIN","resetRenderOccludedMask","OutlineVisualElementMask","enable","highlightDepthTexture","depthTexture","_getFallbackDepthTexture","equals","ge","viewMatrix","me","projectionMatrix","ue","lastFrameColorTexture","gpuMemoryUsage","offscreen","highlights","shadows","ssao","test","materialRenderers","shadowAccumulator","getFramebufferTexture","le","LinearDepth","HudVisibility","highlightTexture","prototype","FramebufferId","Renderer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Renderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{update as t}from\"../../../../core/arrayUtils.js\";import s from\"../../../../core/Handles.js\";import{someMap as i}from\"../../../../core/MapUtils.js\";import{destroyMaybe as n,disposeMaybe as a,isSome as h,isNone as d,applySome as o,unwrap as _}from\"../../../../core/maybe.js\";import{watch as l,syncAndInitial as c,initial as p,sync as m}from\"../../../../core/reactiveUtils.js\";import{Milliseconds as g}from\"../../../../core/time.js\";import{property as u}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{v as T,a as R,m as A}from\"../../../../chunks/mat4.js\";import{I as E,c as P}from\"../../../../chunks/mat4f64.js\";import{c as b}from\"../../../../chunks/boundedPlane.js\";import{MAXIMUM_ANIMATION_LOAD as S,MINIMUM_IDLE_ANIMATION_MS as w}from\"../../support/animationUtils.js\";import H from\"../../support/debugFlags.js\";import{RenderPassManager as M}from\"../core/renderPasses/RenderPassManager.js\";import{HUDTransparentRenderStyle as x}from\"../core/shaderLibrary/hud/HUDUniforms.js\";import{AntiAliasingMode as C,TransparencyPassType as I,Decorations as O,RenderRequestType as D,StencilBits as L}from\"./basicInterfaces.js\";import{BoundingInfo as y}from\"./BoundingInfo.js\";import{ZERO as v,union as N}from\"./depthRange.js\";import{depthRangeFromScene as U}from\"./depthRangeUtils.js\";import{createEmptyDepthTexture as j}from\"./glUtil3D.js\";import{Highlight as q}from\"./Highlight.js\";import{RenderOccludedFlag as V}from\"./Material.js\";import{OffscreenRendering as F}from\"./OffscreenRendering.js\";import{RenderContext as G}from\"./RenderContext.js\";import{splitRenderGeometryChangeSetByMaterial as B}from\"./rendererUtils.js\";import{RenderPass as W}from\"./RenderPass.js\";import{RenderPluginManager as k}from\"./RenderPluginManager.js\";import{RenderSlot as Q}from\"./RenderSlot.js\";import{ShadowAccumulator as z}from\"./ShadowAccumulator.js\";import{ShadowHighlight as X}from\"./ShadowHighlight.js\";import{ShadowMap as Y,SnapshotSlot as K}from\"./ShadowMap.js\";import J from\"./SliceHelper.js\";import{SmaaRenderPass as Z}from\"./SmaaRenderPass.js\";import{SSAOHelper as $}from\"./SSAOHelper.js\";import{EdgeView as ee}from\"./edgeRendering/EdgeView.js\";import{Transparency as re}from\"./edgeRendering/interfaces.js\";import{MergedRenderer as te}from\"../materials/renderers/MergedRenderer.js\";import{AlphaMode as se}from\"../shaders/CompositingTechniqueConfiguration.js\";import{RendererPerformanceInfo as ie,Statistics as ne}from\"../statistics/RendererPerformanceInfo.js\";import{ClearBufferBit as ae,PixelFormat as he,PixelType as de}from\"../../../webgl/enums.js\";const oe=.9;let _e=class extends r{constructor(e,r,t,i,n,a,h,d,o){super({}),this._materialRepository=e,this._shaderTechniqueRepository=t,this._rctx=i,this._compositingHelper=n,this._magnifierHelper=a,this._requestRender=h,this._stage=o,this._materialRenderers=new Map,this._needsTransparentPass=!1,this._hasHUDElements=!1,this._hasHighlights=!1,this._hasWater=!1,this._hasOverlayWater=!1,this._content=new Map,this._isRendering=!1,this._fallbackDepthStencilTexture=null,this.performanceInfo=new ie,this._antialiasing=C.SMAA,this._oitEnabled=!1,this._multipassTerrain=!0,this._transparentTerrain=!1,this._hasAnimations=!1,this._animationTimestep=g(0),this._handles=new s,this._renderHiddenTransparentEdges=()=>{},this._oitUsed=!1,this._smaaPass=new Z(this._rctx,t),this._oitEnabled=this._hasOITSupport,this._requestRender(),this._offscreenRendering=new F(this._rctx,this._compositingHelper),this._sliceHelper=new J,this._shadowMap=new Y(this._rctx,o.viewingMode,2),this._ssaoHelper=new $(t,this._rctx,(()=>this._requestRender())),this._highlight=new q(t,this._rctx),this._shadowHighlight=new X(this._rctx,o.viewingMode),this._shadowAccumulator=new z(this._rctx,t,o,(e=>{const r=this.shadowsEnabled;this._shadowMap.enabled=!0,this._ensureCameraBindParameters(e.camera,e.contentCamera),this._renderPlugins.prepareRender(),this._shadowMap.enabled=r}),((e,r,t)=>{e.shadowMap.start(e.camera,r,t),this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_ALL,e.shadowMap),e.camera.setGLViewport(this._rctx),this._ensureCameraBindParameters(e.camera,e.contentCamera)}),(()=>this._requestRender())),this._renderContext=new G(this._rctx,this._offscreenRendering,this._shadowMap,this._ssaoHelper,this._sliceHelper),this._renderPlugins=new k({renderContext:this._renderContext,shaderTechniqueRepository:t,textureRep:r,materialRep:this._materialRepository,requestRender:this._requestRender,schedule:d}),this.renderPassManager=new M(this._rctx,this._shaderTechniqueRepository),this._renderPlugins.add(this.renderPassManager.slots(),this.renderPassManager),this._handles.add([l((()=>this._stage.state.camera),(()=>this._requestRender()),c),l((()=>H.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES),(e=>{this._renderHiddenTransparentEdges=e?()=>this._renderEdges(re.TRANSPARENT):()=>{},this._requestRender()}),p)])}get _bindParameters(){return this._renderContext.bindParameters}get hasWater(){return this._hasWater||this._hasOverlayWater}get hasWaterReflection(){return this.hasWater&&this._waterReflectionEnabled}normalizeCtorArgs(){return{}}dispose(){this._handles.destroy(),this._smaaPass.dispose(),this._materialRenderers.forEach((e=>e.dispose())),this._materialRenderers.clear(),this._edgeView=n(this._edgeView),this._offscreenRendering.dispose(),this._fallbackDepthStencilTexture=a(this._fallbackDepthStencilTexture),this._shadowMap.enabled=!1,this._shadowMap.dispose(),this._ssaoHelper.enabled=!1,this._ssaoHelper.dispose(),this._highlight.dispose(),this._shadowHighlight.dispose(),this._shadowAccumulator.dispose(),y.prune(),this._content.clear()}disposeOffscreenBuffers(){this._offscreenRendering.dispose(),this._shadowMap.dispose(),this._smaaPass.disable(),this._ssaoHelper.disposeOffscreenBuffers()}get updating(){return this._antialiasing===C.SMAA&&this._smaaPass.updating||h(this._edgeView)&&this._edgeView.updating||this._shadowAccumulator.running||!this.isCameraFinal}ensureEdgeView(){return d(this._edgeView)&&(this._edgeView=new ee({rctx:this._rctx,renderSR:this._stage.renderSR,viewingMode:this._stage.viewingMode,techniqueRepository:this._shaderTechniqueRepository,setNeedsRender:()=>this._requestRender(),schedule:e=>this._stage.resourceController.schedule(e)}),this._handles.add(l((()=>o(this._edgeView,(e=>e.updating))),(()=>this._requestRender()),m)),this._requestRender()),this._edgeView}get edgeView(){return this._edgeView}get isCameraFinal(){return T(this._bindParameters.ssr.reprojectionMatrix,E)}set _reprojectionMatrix(e){t(this._bindParameters.ssr.reprojectionMatrix,e)&&this.notifyChange(\"isCameraFinal\")}get shadowsEnabled(){return!!this._shadowMap?.enabled}setRenderParameters(e){const{_shadowMap:r,_ssaoHelper:t,_bindParameters:s}=this;if(void 0!==e.screenSpaceReflectionsEnabled&&s.ssr.enabled!==e.screenSpaceReflectionsEnabled&&(s.ssr.enabled=e.screenSpaceReflectionsEnabled,this._requestRender()),void 0!==e.shadowMap&&r.enabled!==e.shadowMap&&(r.enabled=e.shadowMap,this._requestRender()),void 0!==e.shadowMapMaxCascades&&r.maxCascades!==e.shadowMapMaxCascades&&(r.maxCascades=e.shadowMapMaxCascades,this._requestRender()),h(e.environment)){h(e.environment.weather)&&(this._bindParameters.weather=e.environment.weather,this._bindParameters.weatherVisible=e.weatherVisible,this._renderContext.bindParameters.weather=e.environment.weather,this._renderContext.bindParameters.weatherVisible=e.weatherVisible),void 0!==e.environment.lighting.ambientOcclusionEnabled&&t.enabled!==e.environment.lighting.ambientOcclusionEnabled&&(t.enabled=e.environment.lighting.ambientOcclusionEnabled,this._requestRender()),void 0!==e.environment.lighting.waterReflectionEnabled&&this._waterReflectionEnabled!==e.environment.lighting.waterReflectionEnabled&&(this._waterReflectionEnabled=e.environment.lighting.waterReflectionEnabled,this._requestRender());const r=\"sun\"===e.environment.lighting.type;s.enableFillLights!==r&&(s.enableFillLights=r,this._requestRender())}e.background&&this._offscreenRendering.background!==e.background&&(this._offscreenRendering.background=e.background,this._requestRender());const i=e.antialiasingEnabled?C.SMAA:C.NONE;void 0!==e.antialiasingEnabled&&this._antialiasing!==i&&(this._antialiasing=i,this._requestRender()),void 0!==e.highQualityTransparency&&this._multipassTerrain!==e.highQualityTransparency&&(this._multipassTerrain=e.highQualityTransparency,this._oitEnabled=e.highQualityTransparency&&this._hasOITSupport,this._requestRender()),void 0!==e.defaultHighlightOptions&&(this._highlight.setDefaultOptions(e.defaultHighlightOptions),this._shadowHighlight.setDefaultOptions(e.defaultHighlightOptions),this._requestRender()),void 0!==e.overlays&&this._bindParameters.overlays!==e.overlays&&(this._bindParameters.overlays=e.overlays,this._requestRender()),void 0!==e.slicePlane&&this._sliceHelper.plane!==e.slicePlane&&(this._sliceHelper.plane=_(e.slicePlane),this._requestRender()),void 0!==e.transparentTerrain&&this._transparentTerrain!==e.transparentTerrain&&(this._transparentTerrain=e.transparentTerrain,this._requestRender()),void 0!==e.hasOverlayWater&&this._hasOverlayWater!==e.hasOverlayWater&&(this._hasOverlayWater=e.hasOverlayWater,this._requestRender()),void 0!==e.shadowCastOptions&&this._shadowAccumulator.setOptions(e.shadowCastOptions)}get hasSlicePlane(){return!!this._sliceHelper.plane}get renderPlugins(){return this._renderPlugins}get _hasOITSupport(){return this._rctx.driverTest.floatBufferBlendWorking}modify(e){this._isRendering&&console.warn(\"Renderer.modify called while rendering\");const{adds:r,removes:t,updates:s}=e;if(0===r.length&&0===t.length&&0===s.length)return;t.forAll((({id:e})=>this._content.delete(e))),r.forAll((e=>this._content.set(e.id,e)));const n=B(e);let a=!1;n.forEach(((e,r)=>{let t=this._materialRenderers.get(r);if(!t){if(!(e.adds.length>0))return;t=new te(this._rctx,this._materialRepository,r),this._materialRenderers.set(r,t)}t.modify(e),t.isEmpty&&(a=!0)})),a&&this._materialRenderers.forEach(((e,r)=>{e.isEmpty&&(this._materialRenderers.delete(r),e.dispose())})),this._hasHighlights=i(this._materialRenderers,(e=>e.hasHighlights)),this._bindParameters.hasOccludees=i(this._materialRenderers,(e=>e.hasOccludees)),this._hasWater=i(this._materialRenderers,(e=>e.hasWater)),this._needsTransparentPass=i(this._materialRenderers,(e=>e.requiresSlot(Q.TRANSPARENT_MATERIAL,W.MATERIAL))),this._hasHUDElements=i(this._materialRenderers,(e=>e.requiresSlot(Q.LINE_CALLOUTS_HUD_DEPTH,W.MATERIAL)||e.requiresSlot(Q.HUD_MATERIAL,W.MATERIAL)||e.requiresSlot(Q.LABEL_MATERIAL,W.MATERIAL))),this._requestRender()}updateAnimation(e){return this._hasAnimations=!1,this._materialRenderers.forEach((r=>this._hasAnimations=r.updateAnimation(e)||this._hasAnimations)),this._hasAnimations=this._renderPlugins.updateAnimation(e)||this._hasAnimations,this._hasAnimations}get animationTimestep(){return this._animationTimestep}updateLightSources(e,r,t){this._bindParameters.lighting.groundLightingFactor=r,this._bindParameters.lighting.globalFactor=t,this._bindParameters.lighting.set(e)}render(e,r,t,s){this._isRendering=!0,this.performanceInfo.prerender(this._rctx),this._bindParameters.transparencyPassType=I.NONE;const i=this._offscreenRendering;i.needLastFrameColorTexture=this.hasWaterReflection,i.advanceCurrentRenderTarget();const n=b(this._sliceHelper.plane);s===O.OFF&&(this._sliceHelper.plane=null),this._rctx.bindFramebuffer(e),r.setGLViewport(this._rctx),this._ensureCameraBindParameters(r,t),this._renderPlugins.prepareRender(),this.performanceInfo.advance(ne.Prepare);const a=this._computeDepthRange(r);this._renderShadowMap(e,r,this._bindParameters.lighting.lightingMainDirection,a),this.performanceInfo.advance(ne.Shadowmap),i.initializeFrame(r),this._ensureBindParameters(r,t),this._renderLinearDepth(),this.performanceInfo.advance(ne.Lineardepth),this._accumulateShadows(a,r,t),this._renderNormal(),this.performanceInfo.advance(ne.Normals),this._ensureBindParametersSSR(),this._ssaoHelper.computeSSAO(this._bindParameters,i.linearDepthTexture,i.normalTexture),this.performanceInfo.advance(ne.SSAO),this._renderContext.pass=W.MATERIAL,i.bindFramebuffer(),this._renderOpaqueGeometry(),this.performanceInfo.advance(ne.Opaque);const o=this._multipassTerrain&&this._transparentTerrain;this._renderTerrainLinearDepth(o),this._setMultipassEnabled(o),this._setTerrainCulling(o),this._renderEdges(re.OPAQUE),this.performanceInfo.advance(ne.OpaqueEdges),this._offscreenRendering.bindTarget(this._offscreenRendering.currentColorTarget,this._offscreenRendering.mainDepth),this._renderSlot(Q.VOXEL),this._renderHiddenTransparentEdges();const _=this._needsTransparentPass||this._renderPlugins.needsTransparentPass;_&&(this._oitEnabled?this._renderOrderIndependentTransparency((()=>this._renderTransparentGeometry()),!1):this._renderTransparentGeometry()),this.performanceInfo.advance(ne.Transparent),this._renderGeometryLinearDepth(o);const l=this._renderHUDVisibility();o||this._renderInternalSlot(Q.LINE_CALLOUTS),this.performanceInfo.advance(ne.Hudvisibility),this._renderEdges(re.TRANSPARENT,o),this.performanceInfo.advance(ne.TransparentEdges),this._renderTransparentTerrain(),this._transparentTerrain&&l&&(o?this._renderLineCallouts(x.Occluded):i.compositeTransparentTerrainOntoHUDVisibility(this._bindParameters),this._renderHUD(x.Occluded,i.framebuffer),this.performanceInfo.advance(ne.HudOccluded)),this.performanceInfo.advance(ne.TransparentTerrain),this._setTerrainCulling(!1),this._transparentTerrain&&(i.compositeTransparentTerrainOntoMain(this._bindParameters),o&&(this._renderEdges(re.OPAQUE),this.performanceInfo.advance(ne.OpaqueEdges),_&&(this._oitEnabled?this._renderOrderIndependentTransparency((()=>this._renderTransparentGeometry()),!1):this._renderTransparentGeometry()),this.performanceInfo.advance(ne.Transparent),this._renderEdges(re.TRANSPARENT),this.performanceInfo.advance(ne.TransparentEdges))),o&&this._renderLineCallouts(x.NotOccluded),this._setMultipassEnabled(!1),this._shadowAccumulator.render(this._bindParameters),i.renderToTargets((()=>{this._renderInternalSlot(Q.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),this._renderSlot(Q.POSTPROCESSING_ENVIRONMENT_TRANSPARENT),this._renderSlot(Q.LASERLINES)}),i.currentColorTarget,i.mainDepth),this.performanceInfo.advance(ne.Atmosphere),this._renderPlugins.needsLaserlineWithContrastControl&&i.renderTmpAndCompositeToMain((()=>this._renderSlot(Q.LASERLINES_CONTRAST_CONTROL)),this._bindParameters,se.PremultipliedAlpha),this.performanceInfo.advance(ne.Laserline),this._renderOccluded(),this.performanceInfo.advance(ne.Occluded);const c=s===O.ON&&this._magnifierHelper.enabled,p=c&&d(e)?this._offscreenRendering.getFramebuffer(this._offscreenRendering.tmpColor,this._offscreenRendering.tmpDepth):e;this._rctx.bindFramebuffer(p);const m=this._offscreenRendering.colorTexture;!this._renderAntiAliasing(this._antialiasing,m)&&h(m)&&this._compositingHelper.composite(this._bindParameters,m,se.None),this.performanceInfo.advance(ne.Antialiasing),this._renderHUD(x.NotOccluded,p),this.performanceInfo.advance(ne.HudNotoccluded),this._renderHighlights(p,this._bindParameters),this.performanceInfo.advance(ne.Highlights),c&&this._magnifierHelper.render(this._rctx,this._bindParameters),p!==e&&(this._rctx.bindFramebuffer(e),this._compositingHelper.composite(this._bindParameters,this._offscreenRendering.tmpColorTexture,se.None)),this._disposeOITBuffers(),this._renderContext.lastFrameCamera.copyFrom(this._bindParameters.camera),this._sliceHelper.plane=n,this._isRendering=!1,this.onPostRender&&this.onPostRender(),this.performanceInfo.postrender()}finish(e){if(this._hasAnimations||(this._animationTimestep=g(0)),e===D.BACKGROUND){this._rctx.gl.getError();const e=this.performanceInfo.elapsedTime/S;this._animationTimestep=g(Math.max(this._animationTimestep*oe+e*(1-oe),w))}}readDepthPixels(e,r,t){const s=this._offscreenRendering.bindTarget(this._offscreenRendering.linearDepth,this._offscreenRendering.tmpDepth);if(!this._needsLinearDepth){this._ensureBindParameters(e,e),this._bindParameters.camera.setGLViewport(this._rctx),this._rctx.setClearColor(0,0,0,0);const r=ae.COLOR_BUFFER_BIT|ae.DEPTH_BUFFER_BIT|ae.STENCIL_BUFFER_BIT;this._rctx.clearSafe(r),this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH)}s.readPixels(r[0],r[1],r[2],r[3],he.RGBA,de.UNSIGNED_BYTE,t)}readHUDVisibility(e,r,t,s,i){this._offscreenRendering.bindTarget(this._offscreenRendering.hudVisibility).readPixels(e,r,t,s,he.RGBA,de.UNSIGNED_BYTE,i)}readAccumulatedShadow(e,r){return this._shadowAccumulator.readAccumulatedShadow(e,r)}_setMultipassEnabled(e){this._bindParameters.multipassTerrain.enabled=this._bindParameters.multipassGeometry.enabled=e}_setTerrainCulling(e){this._bindParameters.multipassTerrain.cullAboveGround=e}_renderSlot(e){this._bindParameters.slot=e,this._renderPlugins.render()}_renderEdges(e,r=!1){const t=this._edgeView;h(t)&&t.shouldRender()&&this._offscreenRendering.renderTmpAndCompositeToMain((()=>t.render(this._bindParameters,e)),this._bindParameters,se.Alpha,r)}_renderShadowMap(e,r,t,s){const i=this._shadowMap;i.enabled&&(i.start(r,t,s),this._shadowHighlight.updateParameters(r,t),this.needsShadowHighlight?(this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT,this._shadowMap,(e=>i.takeCascadeSnapshotTo(e,K.Highlight))),i.clear(),this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_DEFAULT,this._shadowMap,(e=>{i.takeCascadeSnapshotTo(e,K.Default),this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT)}))):this._renderShadowCascades(W.MATERIAL_DEPTH_SHADOWMAP_ALL),i.finish(e),r.setGLViewport(this._rctx))}_renderShadowCascades(e,r=this._shadowMap,t=(e=>{})){for(const s of r.getCascades())s.camera.setGLViewport(this._rctx),this._ensureCameraBindParameters(s.camera,s.camera),this._renderGeometryAndTransparentTerrainPass(e),t(s)}get _needsLinearDepth(){return this._ssaoHelper.enabled||this._renderPlugins.needsLinearDepth||this._hasWater&&this._waterReflectionEnabled||this.needsShadowHighlight||this.needsShadowCast}_renderLinearDepth(){this._needsLinearDepth?this._offscreenRendering.renderToTargets((()=>this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_DEPTH)),this._offscreenRendering.linearDepth,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.linearDepth),this._bindParameters.linearDepthTexture=this._offscreenRendering.linearDepthTexture}_renderTerrainLinearDepth(e){if(e){const e=this._renderContext.pass;this._renderContext.pass=W.MATERIAL_DEPTH,this._offscreenRendering.renderToTargets((()=>this._renderTransparentTerrain()),this._offscreenRendering.terrainLinearDepth,this._offscreenRendering.tmpDepth,[-1e10,-1e10,-1e10,1],!0,!0),this._renderContext.pass=e}else this._offscreenRendering.disposeTarget(this._offscreenRendering.terrainLinearDepth);this._bindParameters.multipassTerrain.linearDepthTexture=this._offscreenRendering.terrainLinearDepthTexture}_renderGeometryLinearDepth(e){if(e){const e=this._renderContext.pass;this._offscreenRendering.renderToTargets((()=>this._renderGeometryPass(W.MATERIAL_DEPTH)),this._offscreenRendering.geometryLinearDepth,this._offscreenRendering.tmpDepth,[1,1,1,1],!0,!0),this._renderContext.pass=e}else this._offscreenRendering.disposeTarget(this._offscreenRendering.geometryLinearDepth);this._bindParameters.multipassGeometry.linearDepthTexture=this._offscreenRendering.geometryLinearDepthTexture}get needsNormal(){return this._ssaoHelper.enabled}_renderNormal(){this.needsNormal?this._offscreenRendering.renderToTargets((()=>{this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_NORMAL)}),this._offscreenRendering.normal,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0):this._offscreenRendering.disposeTarget(this._offscreenRendering.normal)}get needsDepthRange(){return this._shadowMap.enabled||this.needsShadowCast}_computeDepthRange(e){if(!this.needsDepthRange)return v;const r=U(e,this._content,this._stage.layers);return N(r,this.renderPlugins.queryDepthRange(e)),r.near=Math.max(e.near,r.near),r.far=Math.min(e.far,r.far),r}_renderGeometryAndTransparentTerrainPass(e){this._renderContext.pass=e,this._renderGeometryPass(e),this._renderTransparentTerrain()}_renderGeometryPass(e){this._renderContext.pass=e,this._renderOpaqueGeometry(),this._renderTransparentGeometry()}_renderOpaqueGeometry(){this._renderSlot(Q.INTEGRATED_MESH),this._renderSlot(Q.OPAQUE_TERRAIN),this._renderInternalSlot(Q.OPAQUE_MATERIAL),this._renderSlot(Q.OPAQUE_MATERIAL),this._renderSlot(Q.POSTPROCESSING_ENVIRONMENT_OPAQUE)}_renderTransparentGeometry(){this._renderInternalSlot(Q.TRANSPARENT_MATERIAL),this._renderSlot(Q.TRANSPARENT_MATERIAL)}_renderTransparentTerrain(){this._renderSlot(Q.TRANSPARENT_TERRAIN)}_renderHUDVisibility(){let e=!1;return this._renderContext.offscreenRenderingHelper&&this._renderContext.offscreenRenderingHelper.renderHUDVisibility((()=>{this._bindParameters.hudVisibilityTexture=this._renderContext.offscreenRenderingHelper.hudVisibilityTexture,e=this._renderInternalSlot(Q.OCCLUSION_PIXELS)}),this._multipassTerrain&&this._transparentTerrain),e}_renderLineCallouts(e){this._bindParameters.renderTransparentlyOccludedHUD=e,e===x.Occluded?this._offscreenRendering.renderToTargets((()=>this._renderInternalSlot(Q.LINE_CALLOUTS)),this._offscreenRendering.currentColorTarget,this._offscreenRendering.tmpDepth,void 0,!0,!0):this._renderInternalSlot(Q.LINE_CALLOUTS)}_renderHUD(e,r){this._hasHUDElements&&(this._oitEnabled?(this._renderOrderIndependentTransparency((()=>this._renderHUDElements(e)),!0),this._rctx.bindFramebuffer(r),this._compositingHelper.composite(this._bindParameters,this._offscreenRendering.hudColorTexture,se.PremultipliedAlpha)):e===x.Occluded?this._offscreenRendering.renderToTargets((()=>this._renderHUDElements(x.Occluded)),this._offscreenRendering.currentColorTarget,this._offscreenRendering.tmpDepth,void 0,!0,!0):this._renderHUDElements(e))}_renderHUDElements(e){this._bindParameters.renderTransparentlyOccludedHUD=e,this._renderInternalSlot(Q.LINE_CALLOUTS_HUD_DEPTH),this._renderInternalSlot(Q.HUD_MATERIAL),this._renderInternalSlot(Q.LABEL_MATERIAL)}get needsHighlight(){return this._hasHighlights||this._renderPlugins.needsHighlight}get needsShadowHighlight(){return this._shadowMap.enabled&&this._shadowHighlight.isVisible&&this.needsHighlight}_renderHighlights(e,r){if(!this.needsHighlight)return void this._offscreenRendering.disposeTarget(this._offscreenRendering.highlight);const t=this._highlight,s=this._offscreenRendering.renderToTargets((()=>{this._renderGeometryAndTransparentTerrainPass(W.MATERIAL_HIGHLIGHT),this._rctx.clearSafe(ae.DEPTH_BUFFER_BIT),this._renderHUDElements(x.Both)}),this._offscreenRendering.highlight,this._offscreenRendering.tmpDepth,[0,0,0,0],!0,!0);this._bindParameters.highlightColorTexture=s.colorTexture,this.needsShadowHighlight&&this._shadowHighlight.render(r,e),t.render(this._bindParameters,s,e)}get needsShadowCast(){return this._shadowAccumulator.isAccumulating}_accumulateShadows(e,r,t){this.needsShadowCast&&this._shadowAccumulator.renderAccumulation(this._offscreenRendering.linearDepthTexture,e,r,t)}_renderOrderIndependentTransparency(e,r){const t=t=>{this._bindParameters.transparencyPassType=t,this._offscreenRendering.renderOITPass((()=>e()),t,r)},s=this._renderContext.pass;this._renderContext.pass=W.MATERIAL_ALPHA,t(I.Alpha),this._renderContext.pass=W.MATERIAL,t(I.Color),t(I.FrontFace),this._offscreenRendering.compositeTransparentOntoOpaque(this._bindParameters,r),this._bindParameters.transparencyPassType=I.NONE,this._renderContext.pass=s,this._oitUsed=!0}_disposeOITBuffers(){this._oitUsed||(this._offscreenRendering.disposeTarget(this._offscreenRendering.alphaFloatTarget),this._offscreenRendering.disposeTarget(this._offscreenRendering.colorFloatTarget),this._offscreenRendering.disposeTarget(this._offscreenRendering.frontFaceTarget)),this._oitUsed=!1}_renderOccluded(){let e=0;this._materialRenderers.forEach(((r,t)=>{t&&t.isVisible()&&t.renderOccluded===V.OccludeAndTransparentStencil&&(e|=t.renderOccluded,pe.push(t))}));const r=this._offscreenRendering,t=(t,s,i,n,a)=>{0!=(e&s)&&(r.renderToTargets(i,r.tmpColor,r.mainDepth,[0,0,0,0],n,a),r.compositeOccludedOntoMain(this._bindParameters,t))};0!==pe.length&&(this._renderInternalSlot(Q.OCCLUDER_MATERIAL,pe),t(.5,V.OccludeAndTransparentStencil,(()=>this._renderInternalSlot(Q.TRANSPARENT_OCCLUDER_MATERIAL,pe)),!1,!1),pe.length=0),this._materialRenderers.forEach(((r,t)=>{t&&t.isVisible()&&(t.renderOccluded===V.OccludeAndTransparent||t.renderOccluded===V.Transparent||t.renderOccluded===V.Opaque)&&(e|=t.renderOccluded,ce.push(t))}));const s=this._renderPlugins.renderOccludedFlags;if(e|=s,!e)return;const i=e=>{this._renderContext.renderOccludedMask=e,s>V.Occlude&&this._renderSlot(Q.OCCLUDED_TERRAIN),this._renderInternalSlot(Q.OPAQUE_MATERIAL,ce),this._renderInternalSlot(Q.TRANSPARENT_MATERIAL,ce),this._renderInternalSlot(Q.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,ce),this._renderContext.resetRenderOccludedMask()};this._renderContext.pass=W.MATERIAL,t(.5,V.OccludeAndTransparent,(()=>i(V.OccludeAndTransparent)),!0,L.OutlineVisualElementMask),t(.5,V.Transparent,(()=>i(V.Transparent)),!0,L.OutlineVisualElementMask),t(1,V.Opaque,(()=>i(V.Opaque)),!0,L.OutlineVisualElementMask),ce.length=0}_renderAntiAliasing(e,r){if(e===C.SMAA){if(this._smaaPass.enable((()=>this._requestRender()))&&h(r))return this._smaaPass.render(r),!0}else this._smaaPass.disable();return!1}_ensureCameraBindParameters(e,r){this._bindParameters.camera=e,this._bindParameters.contentCamera=r}_ensureBindParameters(e,r){this._ensureCameraBindParameters(e,r);const t=this._renderContext.offscreenRenderingHelper;this._bindParameters.hudVisibilityTexture=t.hudVisibilityTexture,this._bindParameters.highlightDepthTexture=t.depthTexture??this._getFallbackDepthTexture()}_ensureBindParametersSSR(){this.hasWaterReflection?(this._renderContext.lastFrameCamera.equals(this._bindParameters.camera)?this._reprojectionMatrix=E:(R(ge,this._bindParameters.camera.viewMatrix),R(me,this._bindParameters.camera.projectionMatrix),A(ue,ge,me),A(ue,this._renderContext.lastFrameCamera.viewMatrix,ue),A(ue,this._renderContext.lastFrameCamera.projectionMatrix,ue),this._reprojectionMatrix=ue),this._bindParameters.ssr.lastFrameColorTexture=this._offscreenRendering.lastFrameColorTexture):this._bindParameters.ssr.lastFrameColorTexture=null,this._bindParameters.ssr.enabled=this.hasWaterReflection}_renderInternalSlot(e,r){let t=!1;return this._bindParameters.slot=e,h(r)?r.forEach((e=>{if(!e.shouldRender(this._renderContext))return;const r=this._materialRenderers.get(e);h(r)&&(t=r.render(this._renderContext.pass,this._bindParameters)||t)})):this._materialRenderers.forEach(((e,r)=>{r.shouldRender(this._renderContext)&&e.render(this._renderContext.pass,this._bindParameters)&&(t=!0)})),t}_getFallbackDepthTexture(){return this._fallbackDepthStencilTexture||(this._fallbackDepthStencilTexture=j(this._rctx)),this._fallbackDepthStencilTexture}get gpuMemoryUsage(){return{offscreen:this._offscreenRendering?.gpuMemoryUsage??0,highlights:(this._highlight?.gpuMemoryUsage??0)+(this._shadowHighlight?.gpuMemoryUsage??0),shadows:this._shadowMap?.gpuMemoryUsage??0,ssao:this._ssaoHelper?.gpuMemoryUsage??0}}get test(){const e=this;return{offscreen:this._offscreenRendering,shadowMap:this._shadowMap,ssao:this._ssaoHelper,highlight:this._highlight,lighting:this._bindParameters.lighting,materialRenderers:this._materialRenderers,shadowAccumulator:this._shadowAccumulator,getFramebufferTexture:r=>{switch(r){case le.Color:return e._offscreenRendering.colorTexture;case le.LinearDepth:return e._offscreenRendering.linearDepthTexture;case le.Normals:return e._offscreenRendering.normalTexture;case le.ShadowMap:return e._shadowMap.depthTexture;case le.HudVisibility:return e._offscreenRendering.hudVisibilityTexture;case le.Highlight:return e._offscreenRendering.highlightTexture}}}}};var le;e([u()],_e.prototype,\"_shadowAccumulator\",void 0),e([u()],_e.prototype,\"_smaaPass\",void 0),e([u()],_e.prototype,\"_antialiasing\",void 0),e([u()],_e.prototype,\"_edgeView\",void 0),e([u()],_e.prototype,\"updating\",null),e([u()],_e.prototype,\"isCameraFinal\",null),_e=e([f(\"esri.views.3d.webgl-engine.lib.Renderer\")],_e),function(e){e[e.Color=0]=\"Color\",e[e.LinearDepth=1]=\"LinearDepth\",e[e.Normals=2]=\"Normals\",e[e.ShadowMap=3]=\"ShadowMap\",e[e.HudVisibility=4]=\"HudVisibility\",e[e.Highlight=5]=\"Highlight\"}(le||(le={}));const ce=[],pe=[],me=P(),ge=P(),ue=P();export{le as FramebufferId,_e as Renderer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}