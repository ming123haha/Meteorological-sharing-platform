{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/esnext.typed-array.find-last.js\";\nimport \"core-js/modules/esnext.typed-array.find-last-index.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Evented.js\";\nimport i from \"../../../../core/has.js\";\nimport s from \"../../../../core/Logger.js\";\nimport { removeMaybe as o, disposeMaybe as n, isSome as a, isNone as p } from \"../../../../core/maybe.js\";\nimport { watch as d, initial as h } from \"../../../../core/reactiveUtils.js\";\nimport { addFrameTask as c } from \"../../../../core/scheduling.js\";\nimport { Milliseconds as l } from \"../../../../core/time.js\";\nimport { property as m } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as u } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { ComponentObjectCollection as _ } from \"../collections/Component/ComponentObjectCollection.js\";\nimport { ShaderTechniqueRepository as f } from \"../core/shaderTechnique/ShaderTechniqueRepository.js\";\nimport { autoDispose as g, AutoDisposableMixin as y } from \"../lib/AutoDisposable.js\";\nimport { RenderRequestType as R, Decorations as x } from \"../lib/basicInterfaces.js\";\nimport b from \"../lib/CompositingHelper.js\";\nimport { textureToDepth as v } from \"../lib/depthRangeUtils.js\";\nimport { GLMaterialRepository as w } from \"../lib/GLMaterialRepository.js\";\nimport { MagnifierHelper as U } from \"../lib/MagnifierHelper.js\";\nimport { Renderer as T } from \"../lib/Renderer.js\";\nimport { RenderingContext as j } from \"../lib/RenderingContext.js\";\nimport { TextureRepository as C } from \"../lib/TextureRepository.js\";\nimport { StippleTextureRepository as A } from \"../materials/StippleTextureRepository.js\";\nimport { WaterTextureRepository as M } from \"../materials/internal/WaterTextureRepository.js\";\nimport { getContextCache as q } from \"./contextCache.js\";\nimport { removeLoadedShaderModules as D } from \"./requireUtils.js\";\nimport { ScreenshotManager as S } from \"./ScreenshotManager.js\";\nimport { contextCache as O } from \"./testUtils.js\";\nimport { createContextOrErrorHTML as H } from \"../../../webgl/context-util.js\";\nconst B = s.getLogger(\"esri.views.3d.webgl-engine.parts.View\");\nlet E = class extends y(t) {\n  constructor(e) {\n    super({}), this.events = new r(), this.waterTextureRepository = new M(), this._magnifierHelper = new U(), this._needsUpdate = !0, this._needsRender = !0, this._idleSuspend = !0, this._needsWaterReflectionUpdate = !1, this._lastAnimationUpdate = 0, this._container = e.container, this._viewingMode = e.viewingMode, this._initializeContext(e), d(() => this.waterTextureRepository?.updating, () => this.requestRender(), h), this._magnifierHelper.events.on(\"request-render\", () => this.requestRender()), this._stippleTextureRepository = new A(this._rctx), this._shaderTechniqueRepository = new f({\n      rctx: this._rctx,\n      viewingMode: e.viewingMode,\n      stippleTextureRepository: this._stippleTextureRepository,\n      waterTextureRepository: this.waterTextureRepository\n    }), this._textureRepository = new C(e, this._shaderTechniqueRepository, this._rctx), this._textureRepository.events.on(\"changed\", e => this.requestRender(e)), this._materialRepository = new w(this._textureRepository, this._shaderTechniqueRepository, () => this.requestRender(), () => this.requestRender()), this._compositingHelper = new b(this._rctx, this._shaderTechniqueRepository), this._renderer = new T(this._materialRepository, this._textureRepository, this._shaderTechniqueRepository, this._rctx, this._compositingHelper, this._magnifierHelper, e => this.requestRender(e), (t, r) => e.schedule(t, r), e), this._screenshotManager = new S(this._rctx, (e, t, r) => this._renderer.render(e, t, t, r), e => this.requestRender(e), e.options.screenshot.renderOverlay, e => this.events.emit(\"force-camera-for-screenshot\", e), () => this._renderer.disposeOffscreenBuffers()), this._registerFrameTask(e);\n  }\n\n  normalizeCtorArgs() {\n    return {};\n  }\n\n  dispose() {\n    this._container.contains(this._canvas) && this._container.removeChild(this._canvas), this._frameTask = o(this._frameTask), this._shaderTechniqueRepository = n(this._shaderTechniqueRepository), super.dispose(), this._tmpDepthBuffer = null, this._rctx = null;\n  }\n\n  get performanceInfo() {\n    const e = this._rctx.gl;\n    return {\n      renderer: this._renderer.performanceInfo,\n      textureMemory: void 0 !== e.getUsedTextureMemory ? e.getUsedTextureMemory() : void 0,\n      renderbufferMemory: void 0 !== e.getUsedRenderbufferMemory ? e.getUsedRenderbufferMemory() : void 0,\n      VBOMemory: void 0 !== e.getUsedVBOMemory ? e.getUsedVBOMemory() : void 0\n    };\n  }\n\n  requestRender(e = R.UPDATE) {\n    e === R.UPDATE ? this._needsUpdate = !0 : this._needsRender = !0;\n  }\n\n  get updating() {\n    return this._needsUpdate || this._needsWaterReflectionUpdate || this._renderer.updating || this._textureRepository.updating || this.waterTextureRepository.updating || this._magnifierHelper.updating;\n  }\n\n  ensureEdgeView() {\n    return this._renderer.ensureEdgeView();\n  }\n\n  get edgeView() {\n    return this._renderer.edgeView;\n  }\n\n  get textureRepository() {\n    return this._textureRepository;\n  }\n\n  get compositingHelper() {\n    return this._compositingHelper;\n  }\n\n  set magnifier(e) {\n    this._magnifierHelper.magnifier = e;\n  }\n\n  updateLightSources(e, t, r) {\n    this._renderer.updateLightSources(e, t, r), this.requestRender();\n  }\n\n  setRenderParameters(e) {\n    void 0 !== e.idleSuspend && this._idleSuspend !== !!e.idleSuspend && (this._idleSuspend = !!e.idleSuspend, this.requestRender()), this._renderer.setRenderParameters(e);\n  }\n\n  get renderingContext() {\n    return this._rctx;\n  }\n\n  get capabilities() {\n    return this._rctx.capabilities;\n  }\n\n  modify(e) {\n    this._renderer.modify(e), e.clear();\n  }\n\n  get canvas() {\n    return this._canvas;\n  }\n\n  takeScreenshot(e) {\n    return this._screenshotManager.takeScreenshot(e);\n  }\n\n  getAlpha() {\n    return this._rctx.contextAttributes.alpha;\n  }\n\n  get shadowsEnabled() {\n    return this._renderer.shadowsEnabled;\n  }\n\n  readAccumulatedShadow(e) {\n    return this._renderer.readAccumulatedShadow(e[0], e[1]);\n  }\n\n  readHUDVisibility(e, t, r, i, s) {\n    this._renderer.readHUDVisibility(e, t, r, i, s);\n  }\n\n  getMinimalDepthForArea(e, t, r, i, s, o = s) {\n    const n = i.constrainWindowSize(t, r, s * i.pixelRatio, o * i.pixelRatio),\n          p = this._ensureDepthBuffer(n);\n\n    this._renderer.readDepthPixels(i, n, p);\n\n    let d = Number.MAX_VALUE;\n\n    for (let a = 0; a < n[2] * n[3]; a++) {\n      const e = v(4 * a, p, i.nearFar);\n      d > e && e !== i.nearFar[0] && e !== i.nearFar[1] && (d = e);\n    }\n\n    if (a(e)) {\n      const s = e.pickDepth(t * i.pixelRatio, r * i.pixelRatio, i);\n      a(s) && d > s && s !== i.nearFar[0] && s !== i.nearFar[1] && (d = s);\n    }\n\n    return d === Number.MAX_VALUE ? void 0 : d;\n  }\n\n  _ensureDepthBuffer(e) {\n    const t = 4 * e[2] * e[3];\n    return (p(this._tmpDepthBuffer) || this._tmpDepthBuffer.byteLength < t) && (this._tmpDepthBuffer = new Uint8Array(t)), this._tmpDepthBuffer;\n  }\n\n  get renderPlugins() {\n    return this._renderer.renderPlugins;\n  }\n\n  get test() {\n    return {\n      renderer: this._renderer\n    };\n  }\n\n  get gpuMemoryUsage() {\n    return this._renderer.gpuMemoryUsage;\n  }\n\n  async reloadShaders() {\n    D(), await this._shaderTechniqueRepository.reloadAll(), this.requestRender();\n  }\n\n  get animationTimestep() {\n    return this._renderer.animationTimestep;\n  }\n\n  _registerFrameTask(e) {\n    const t = e.state,\n          r = {\n      viewCamera: t.camera,\n      frameHasDecorations: !1\n    };\n    let i = !1,\n        s = R.BACKGROUND,\n        o = !1;\n    const n = {\n      preRender: r => {\n        i = this.updating, s = this._needsUpdate ? R.UPDATE : R.BACKGROUND, e.processSyncLayers();\n        const o = l(r.time - this._lastAnimationUpdate);\n        (o > this.animationTimestep || a(this.forcedAnimationTime) || i || this._needsRender) && (this._renderer.updateAnimation({\n          camera: t.camera,\n          dt: o,\n          forcedTime: this.forcedAnimationTime\n        }) && this.requestRender(R.BACKGROUND), this._lastAnimationUpdate = r.time);\n      },\n      render: () => {\n        if ((this._needsUpdate || this._needsRender || !this._idleSuspend || !this._renderer.isCameraFinal || this._needsWaterReflectionUpdate) && t.camera.fullWidth > 0 && t.camera.fullHeight > 0) {\n          const e = this._needsUpdate && this._idleSuspend && this._renderer.isCameraFinal;\n          this._needsRender = !1, this._needsUpdate = !1, this._needsWaterReflectionUpdate = !1, this._renderer.render(null, t.camera, t.contentCamera, x.ON), o = !0, e && this._renderer.hasWaterReflection && (this.requestRender(R.BACKGROUND), this._needsWaterReflectionUpdate = !0);\n        }\n      },\n      update: () => {\n        r.viewCamera = t.camera, r.frameHasDecorations = this._renderer.hasSlicePlane || this._magnifierHelper.enabled, this._textureRepository.update(), this._screenshotManager.update(r);\n      },\n      finish: () => {\n        o && (this._renderer.finish(s), o = !1);\n      }\n    };\n    this._frameTask = c(n);\n  }\n\n  _initializeContext(e) {\n    const t = e.options;\n    this._canvas = t.canvas, this._canvas || (this._canvas = document.createElement(\"canvas\")), this._canvas.setAttribute(\"style\", \"width: 100%; height:100%; display:block;\");\n    const r = {\n      alpha: t.alpha || !1,\n      premultipliedAlpha: !0,\n      antialias: !1,\n      depth: !0,\n      stencil: null == t.stencil || t.stencil,\n      powerPreference: \"high-performance\",\n      preserveDrawingBuffer: t.preserveDrawingBuffer ?? !1\n    },\n          s = H(\"3d\", this._canvas, r);\n\n    if (p(s)) {\n      const e = i(\"esri-force-webgl\");\n      B.error(e);\n    } else this._rctx = this._newRenderingContext(s, e), this._loadShaderOnlyExtensions(), !t.alpha && this._rctx.contextAttributes.alpha && B.error(\"WebGL context has alpha channel even though no alpha channel was requested\"), !this._rctx.contextAttributes.alpha && i(\"safari\") >= 11 && (this._container.style.backgroundColor = \"black\"), this._container.appendChild(this._canvas);\n  }\n\n  _newRenderingContext(e, t) {\n    const r = {\n      disabledExtensions: t.options.deactivatedWebGLExtensions || {},\n      debugWebGLExtensions: t.options.debugWebGLExtensions || {},\n      maxAnisotropy: 8\n    },\n          i = (e, r) => t.resourceController.memoryController.newCache(e, r);\n\n    if (O.enabled) {\n      let t = L.get(e);\n      return t ? (t.configure(r), t.newCache = i, t.ref(), t) : (t = new j(e, r, i), L.set(e, t), t.ref(), t);\n    }\n\n    return new j(e, r, i);\n  }\n\n  _loadShaderOnlyExtensions() {\n    this._rctx.capabilities.enable(\"standardDerivatives\"), this._rctx.capabilities.enable(\"shaderTextureLOD\"), this._rctx.capabilities.enable(\"textureFloat\");\n  }\n\n  get componentObjectCollection() {\n    return p(this._componentObjectCollection) && (this._componentObjectCollection = new _(this._renderer.renderPassManager, this._viewingMode)), this._componentObjectCollection;\n  }\n\n  set componentObjectCollection(e) {\n    this._componentObjectCollection = e;\n  }\n\n};\ne([m({\n  type: Boolean,\n  readOnly: !0\n})], E.prototype, \"updating\", null), e([g()], E.prototype, \"_rctx\", void 0), e([g()], E.prototype, \"_container\", void 0), e([g()], E.prototype, \"_canvas\", void 0), e([g()], E.prototype, \"_stippleTextureRepository\", void 0), e([g(), m()], E.prototype, \"waterTextureRepository\", void 0), e([g(), m()], E.prototype, \"_magnifierHelper\", void 0), e([g(), m()], E.prototype, \"_textureRepository\", void 0), e([g()], E.prototype, \"_compositingHelper\", void 0), e([g()], E.prototype, \"_renderer\", void 0), e([g()], E.prototype, \"_screenshotManager\", void 0), e([g()], E.prototype, \"componentObjectCollection\", null), e([g()], E.prototype, \"_componentObjectCollection\", void 0), e([m()], E.prototype, \"_needsUpdate\", void 0), e([m()], E.prototype, \"_needsWaterReflectionUpdate\", void 0), E = e([u(\"esri.views.3d.webgl-engine.parts.RenderView\")], E);\nconst L = q();\nexport { E as RenderView };","map":{"version":3,"names":["_","e","t","r","i","s","removeMaybe","o","disposeMaybe","n","isSome","a","isNone","p","watch","d","initial","h","addFrameTask","c","Milliseconds","l","property","m","subclass","u","ComponentObjectCollection","ShaderTechniqueRepository","f","autoDispose","g","AutoDisposableMixin","y","RenderRequestType","R","Decorations","x","b","textureToDepth","v","GLMaterialRepository","w","MagnifierHelper","U","Renderer","T","RenderingContext","j","TextureRepository","C","StippleTextureRepository","A","WaterTextureRepository","M","getContextCache","q","removeLoadedShaderModules","D","ScreenshotManager","S","contextCache","O","createContextOrErrorHTML","H","B","getLogger","E","constructor","events","waterTextureRepository","_magnifierHelper","_needsUpdate","_needsRender","_idleSuspend","_needsWaterReflectionUpdate","_lastAnimationUpdate","_container","container","_viewingMode","viewingMode","_initializeContext","updating","requestRender","on","_stippleTextureRepository","_rctx","_shaderTechniqueRepository","rctx","stippleTextureRepository","_textureRepository","_materialRepository","_compositingHelper","_renderer","schedule","_screenshotManager","render","options","screenshot","renderOverlay","emit","disposeOffscreenBuffers","_registerFrameTask","normalizeCtorArgs","dispose","contains","_canvas","removeChild","_frameTask","_tmpDepthBuffer","performanceInfo","gl","renderer","textureMemory","getUsedTextureMemory","renderbufferMemory","getUsedRenderbufferMemory","VBOMemory","getUsedVBOMemory","UPDATE","ensureEdgeView","edgeView","textureRepository","compositingHelper","magnifier","updateLightSources","setRenderParameters","idleSuspend","renderingContext","capabilities","modify","clear","canvas","takeScreenshot","getAlpha","contextAttributes","alpha","shadowsEnabled","readAccumulatedShadow","readHUDVisibility","getMinimalDepthForArea","constrainWindowSize","pixelRatio","_ensureDepthBuffer","readDepthPixels","Number","MAX_VALUE","nearFar","pickDepth","byteLength","Uint8Array","renderPlugins","test","gpuMemoryUsage","reloadShaders","reloadAll","animationTimestep","state","viewCamera","camera","frameHasDecorations","BACKGROUND","preRender","processSyncLayers","time","forcedAnimationTime","updateAnimation","dt","forcedTime","isCameraFinal","fullWidth","fullHeight","contentCamera","ON","hasWaterReflection","update","hasSlicePlane","enabled","finish","document","createElement","setAttribute","premultipliedAlpha","antialias","depth","stencil","powerPreference","preserveDrawingBuffer","error","_newRenderingContext","_loadShaderOnlyExtensions","style","backgroundColor","appendChild","disabledExtensions","deactivatedWebGLExtensions","debugWebGLExtensions","maxAnisotropy","resourceController","memoryController","newCache","L","get","configure","ref","set","enable","componentObjectCollection","_componentObjectCollection","renderPassManager","type","Boolean","readOnly","prototype","RenderView"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/webgl-engine/parts/RenderView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import i from\"../../../../core/has.js\";import s from\"../../../../core/Logger.js\";import{removeMaybe as o,disposeMaybe as n,isSome as a,isNone as p}from\"../../../../core/maybe.js\";import{watch as d,initial as h}from\"../../../../core/reactiveUtils.js\";import{addFrameTask as c}from\"../../../../core/scheduling.js\";import{Milliseconds as l}from\"../../../../core/time.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ComponentObjectCollection as _}from\"../collections/Component/ComponentObjectCollection.js\";import{ShaderTechniqueRepository as f}from\"../core/shaderTechnique/ShaderTechniqueRepository.js\";import{autoDispose as g,AutoDisposableMixin as y}from\"../lib/AutoDisposable.js\";import{RenderRequestType as R,Decorations as x}from\"../lib/basicInterfaces.js\";import b from\"../lib/CompositingHelper.js\";import{textureToDepth as v}from\"../lib/depthRangeUtils.js\";import{GLMaterialRepository as w}from\"../lib/GLMaterialRepository.js\";import{MagnifierHelper as U}from\"../lib/MagnifierHelper.js\";import{Renderer as T}from\"../lib/Renderer.js\";import{RenderingContext as j}from\"../lib/RenderingContext.js\";import{TextureRepository as C}from\"../lib/TextureRepository.js\";import{StippleTextureRepository as A}from\"../materials/StippleTextureRepository.js\";import{WaterTextureRepository as M}from\"../materials/internal/WaterTextureRepository.js\";import{getContextCache as q}from\"./contextCache.js\";import{removeLoadedShaderModules as D}from\"./requireUtils.js\";import{ScreenshotManager as S}from\"./ScreenshotManager.js\";import{contextCache as O}from\"./testUtils.js\";import{createContextOrErrorHTML as H}from\"../../../webgl/context-util.js\";const B=s.getLogger(\"esri.views.3d.webgl-engine.parts.View\");let E=class extends(y(t)){constructor(e){super({}),this.events=new r,this.waterTextureRepository=new M,this._magnifierHelper=new U,this._needsUpdate=!0,this._needsRender=!0,this._idleSuspend=!0,this._needsWaterReflectionUpdate=!1,this._lastAnimationUpdate=0,this._container=e.container,this._viewingMode=e.viewingMode,this._initializeContext(e),d((()=>this.waterTextureRepository?.updating),(()=>this.requestRender()),h),this._magnifierHelper.events.on(\"request-render\",(()=>this.requestRender())),this._stippleTextureRepository=new A(this._rctx),this._shaderTechniqueRepository=new f({rctx:this._rctx,viewingMode:e.viewingMode,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),this._textureRepository=new C(e,this._shaderTechniqueRepository,this._rctx),this._textureRepository.events.on(\"changed\",(e=>this.requestRender(e))),this._materialRepository=new w(this._textureRepository,this._shaderTechniqueRepository,(()=>this.requestRender()),(()=>this.requestRender())),this._compositingHelper=new b(this._rctx,this._shaderTechniqueRepository),this._renderer=new T(this._materialRepository,this._textureRepository,this._shaderTechniqueRepository,this._rctx,this._compositingHelper,this._magnifierHelper,(e=>this.requestRender(e)),((t,r)=>e.schedule(t,r)),e),this._screenshotManager=new S(this._rctx,((e,t,r)=>this._renderer.render(e,t,t,r)),(e=>this.requestRender(e)),e.options.screenshot.renderOverlay,(e=>this.events.emit(\"force-camera-for-screenshot\",e)),(()=>this._renderer.disposeOffscreenBuffers())),this._registerFrameTask(e)}normalizeCtorArgs(){return{}}dispose(){this._container.contains(this._canvas)&&this._container.removeChild(this._canvas),this._frameTask=o(this._frameTask),this._shaderTechniqueRepository=n(this._shaderTechniqueRepository),super.dispose(),this._tmpDepthBuffer=null,this._rctx=null}get performanceInfo(){const e=this._rctx.gl;return{renderer:this._renderer.performanceInfo,textureMemory:void 0!==e.getUsedTextureMemory?e.getUsedTextureMemory():void 0,renderbufferMemory:void 0!==e.getUsedRenderbufferMemory?e.getUsedRenderbufferMemory():void 0,VBOMemory:void 0!==e.getUsedVBOMemory?e.getUsedVBOMemory():void 0}}requestRender(e=R.UPDATE){e===R.UPDATE?this._needsUpdate=!0:this._needsRender=!0}get updating(){return this._needsUpdate||this._needsWaterReflectionUpdate||this._renderer.updating||this._textureRepository.updating||this.waterTextureRepository.updating||this._magnifierHelper.updating}ensureEdgeView(){return this._renderer.ensureEdgeView()}get edgeView(){return this._renderer.edgeView}get textureRepository(){return this._textureRepository}get compositingHelper(){return this._compositingHelper}set magnifier(e){this._magnifierHelper.magnifier=e}updateLightSources(e,t,r){this._renderer.updateLightSources(e,t,r),this.requestRender()}setRenderParameters(e){void 0!==e.idleSuspend&&this._idleSuspend!==!!e.idleSuspend&&(this._idleSuspend=!!e.idleSuspend,this.requestRender()),this._renderer.setRenderParameters(e)}get renderingContext(){return this._rctx}get capabilities(){return this._rctx.capabilities}modify(e){this._renderer.modify(e),e.clear()}get canvas(){return this._canvas}takeScreenshot(e){return this._screenshotManager.takeScreenshot(e)}getAlpha(){return this._rctx.contextAttributes.alpha}get shadowsEnabled(){return this._renderer.shadowsEnabled}readAccumulatedShadow(e){return this._renderer.readAccumulatedShadow(e[0],e[1])}readHUDVisibility(e,t,r,i,s){this._renderer.readHUDVisibility(e,t,r,i,s)}getMinimalDepthForArea(e,t,r,i,s,o=s){const n=i.constrainWindowSize(t,r,s*i.pixelRatio,o*i.pixelRatio),p=this._ensureDepthBuffer(n);this._renderer.readDepthPixels(i,n,p);let d=Number.MAX_VALUE;for(let a=0;a<n[2]*n[3];a++){const e=v(4*a,p,i.nearFar);d>e&&e!==i.nearFar[0]&&e!==i.nearFar[1]&&(d=e)}if(a(e)){const s=e.pickDepth(t*i.pixelRatio,r*i.pixelRatio,i);a(s)&&d>s&&s!==i.nearFar[0]&&s!==i.nearFar[1]&&(d=s)}return d===Number.MAX_VALUE?void 0:d}_ensureDepthBuffer(e){const t=4*e[2]*e[3];return(p(this._tmpDepthBuffer)||this._tmpDepthBuffer.byteLength<t)&&(this._tmpDepthBuffer=new Uint8Array(t)),this._tmpDepthBuffer}get renderPlugins(){return this._renderer.renderPlugins}get test(){return{renderer:this._renderer}}get gpuMemoryUsage(){return this._renderer.gpuMemoryUsage}async reloadShaders(){D(),await this._shaderTechniqueRepository.reloadAll(),this.requestRender()}get animationTimestep(){return this._renderer.animationTimestep}_registerFrameTask(e){const t=e.state,r={viewCamera:t.camera,frameHasDecorations:!1};let i=!1,s=R.BACKGROUND,o=!1;const n={preRender:r=>{i=this.updating,s=this._needsUpdate?R.UPDATE:R.BACKGROUND,e.processSyncLayers();const o=l(r.time-this._lastAnimationUpdate);(o>this.animationTimestep||a(this.forcedAnimationTime)||i||this._needsRender)&&(this._renderer.updateAnimation({camera:t.camera,dt:o,forcedTime:this.forcedAnimationTime})&&this.requestRender(R.BACKGROUND),this._lastAnimationUpdate=r.time)},render:()=>{if((this._needsUpdate||this._needsRender||!this._idleSuspend||!this._renderer.isCameraFinal||this._needsWaterReflectionUpdate)&&t.camera.fullWidth>0&&t.camera.fullHeight>0){const e=this._needsUpdate&&this._idleSuspend&&this._renderer.isCameraFinal;this._needsRender=!1,this._needsUpdate=!1,this._needsWaterReflectionUpdate=!1,this._renderer.render(null,t.camera,t.contentCamera,x.ON),o=!0,e&&this._renderer.hasWaterReflection&&(this.requestRender(R.BACKGROUND),this._needsWaterReflectionUpdate=!0)}},update:()=>{r.viewCamera=t.camera,r.frameHasDecorations=this._renderer.hasSlicePlane||this._magnifierHelper.enabled,this._textureRepository.update(),this._screenshotManager.update(r)},finish:()=>{o&&(this._renderer.finish(s),o=!1)}};this._frameTask=c(n)}_initializeContext(e){const t=e.options;this._canvas=t.canvas,this._canvas||(this._canvas=document.createElement(\"canvas\")),this._canvas.setAttribute(\"style\",\"width: 100%; height:100%; display:block;\");const r={alpha:t.alpha||!1,premultipliedAlpha:!0,antialias:!1,depth:!0,stencil:null==t.stencil||t.stencil,powerPreference:\"high-performance\",preserveDrawingBuffer:t.preserveDrawingBuffer??!1},s=H(\"3d\",this._canvas,r);if(p(s)){const e=i(\"esri-force-webgl\");B.error(e)}else this._rctx=this._newRenderingContext(s,e),this._loadShaderOnlyExtensions(),!t.alpha&&this._rctx.contextAttributes.alpha&&B.error(\"WebGL context has alpha channel even though no alpha channel was requested\"),!this._rctx.contextAttributes.alpha&&i(\"safari\")>=11&&(this._container.style.backgroundColor=\"black\"),this._container.appendChild(this._canvas)}_newRenderingContext(e,t){const r={disabledExtensions:t.options.deactivatedWebGLExtensions||{},debugWebGLExtensions:t.options.debugWebGLExtensions||{},maxAnisotropy:8},i=(e,r)=>t.resourceController.memoryController.newCache(e,r);if(O.enabled){let t=L.get(e);return t?(t.configure(r),t.newCache=i,t.ref(),t):(t=new j(e,r,i),L.set(e,t),t.ref(),t)}return new j(e,r,i)}_loadShaderOnlyExtensions(){this._rctx.capabilities.enable(\"standardDerivatives\"),this._rctx.capabilities.enable(\"shaderTextureLOD\"),this._rctx.capabilities.enable(\"textureFloat\")}get componentObjectCollection(){return p(this._componentObjectCollection)&&(this._componentObjectCollection=new _(this._renderer.renderPassManager,this._viewingMode)),this._componentObjectCollection}set componentObjectCollection(e){this._componentObjectCollection=e}};e([m({type:Boolean,readOnly:!0})],E.prototype,\"updating\",null),e([g()],E.prototype,\"_rctx\",void 0),e([g()],E.prototype,\"_container\",void 0),e([g()],E.prototype,\"_canvas\",void 0),e([g()],E.prototype,\"_stippleTextureRepository\",void 0),e([g(),m()],E.prototype,\"waterTextureRepository\",void 0),e([g(),m()],E.prototype,\"_magnifierHelper\",void 0),e([g(),m()],E.prototype,\"_textureRepository\",void 0),e([g()],E.prototype,\"_compositingHelper\",void 0),e([g()],E.prototype,\"_renderer\",void 0),e([g()],E.prototype,\"_screenshotManager\",void 0),e([g()],E.prototype,\"componentObjectCollection\",null),e([g()],E.prototype,\"_componentObjectCollection\",void 0),e([m()],E.prototype,\"_needsUpdate\",void 0),e([m()],E.prototype,\"_needsWaterReflectionUpdate\",void 0),E=e([u(\"esri.views.3d.webgl-engine.parts.RenderView\")],E);const L=q();export{E as RenderView};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}