{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { createGeometryData as e, C_VBO_INFO as t } from \"./Utils.js\";\nimport { BufferObject as r } from \"../../../webgl/BufferObject.js\";\nimport { Usage as s } from \"../../../webgl/enums.js\";\nimport { VertexArrayObject as a } from \"../../../webgl/VertexArrayObject.js\";\n\nclass f {\n  constructor(a) {\n    this.geometryMap = e(() => ({\n      indexBuffer: r.createIndex(a, s.STATIC_DRAW),\n      vao: null\n    }), (e, s) => ({\n      vertexBuffer: r.createVertex(a, t[s])\n    }));\n  }\n\n  dispose() {\n    for (let e = 0; e < 5; e++) {\n      const t = this.geometryMap[e];\n\n      if (t) {\n        t.data.vao && t.data.vao.dispose(!1), t.data.indexBuffer && t.data.indexBuffer.dispose();\n\n        for (const e in t.buffers) t.buffers[e] && t.buffers[e].data.vertexBuffer.dispose();\n      }\n    }\n  }\n\n  get(e) {\n    const t = this.geometryMap[e];\n    return {\n      getVAO(e, r, s) {\n        if (!t.data.vao) {\n          const f = {};\n\n          for (const e in t.buffers) f[e] = t.buffers[e].data.vertexBuffer;\n\n          t.data.vao = new a(e, s, r, f, t.data.indexBuffer);\n        }\n\n        return t.data.vao;\n      }\n\n    };\n  }\n\n  has(e) {\n    return null != this.geometryMap[e];\n  }\n\n  upload(e, t) {\n    t.forEach((t, r) => {\n      this._upload(t, r, e);\n    });\n  }\n\n  _upload(e, t, r) {\n    if (e.indices && (e.indices.allDirty ? this._uploadIndices(r, t) : null != e.indices.from && null != e.indices.count && this._uploadIndices(r, t, e.indices.from, e.indices.count)), e.vertices) {\n      const s = e.vertices;\n\n      for (const e in s) {\n        const a = s[e];\n        a.allDirty ? this._uploadVertices(r, t, e) : null != a.from && null != a.count && this._uploadVertices(r, t, e, a.from, a.count);\n      }\n    }\n  }\n\n  _uploadVertices(e, t, r, s, a) {\n    const f = this.geometryMap[t];\n    if (!f) return;\n    const o = e.geometries[t].vertexBuffer[r];\n    if (!o) return;\n    const i = o.stride,\n          n = o.data.buffer;\n    f.buffers[r] && n.byteLength > 0 && (null != s && null != a ? f.buffers[r].data.vertexBuffer.setSubData(n, s * i, s * i, (s + a) * i) : f.buffers[r].data.vertexBuffer.setData(n));\n  }\n\n  _uploadIndices(e, t, r, s) {\n    const a = this.geometryMap[t];\n    if (!a) return;\n    const f = 4,\n          o = e.geometries[t].indexBuffer.buffer;\n    a.data.indexBuffer && o.byteLength > 0 && (null != r && null != s ? a.data.indexBuffer.setSubData(o, r * f, r * f, (r + s) * f) : a.data.indexBuffer.setData(o));\n  }\n\n}\n\nexport { f as default };","map":{"version":3,"names":["createGeometryData","e","C_VBO_INFO","t","BufferObject","r","Usage","s","VertexArrayObject","a","f","constructor","geometryMap","indexBuffer","createIndex","STATIC_DRAW","vao","vertexBuffer","createVertex","dispose","data","buffers","get","getVAO","has","upload","forEach","_upload","indices","allDirty","_uploadIndices","from","count","vertices","_uploadVertices","o","geometries","i","stride","n","buffer","byteLength","setSubData","setData","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/WGLBuffers.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{createGeometryData as e,C_VBO_INFO as t}from\"./Utils.js\";import{BufferObject as r}from\"../../../webgl/BufferObject.js\";import{Usage as s}from\"../../../webgl/enums.js\";import{VertexArrayObject as a}from\"../../../webgl/VertexArrayObject.js\";class f{constructor(a){this.geometryMap=e((()=>({indexBuffer:r.createIndex(a,s.STATIC_DRAW),vao:null})),((e,s)=>({vertexBuffer:r.createVertex(a,t[s])})))}dispose(){for(let e=0;e<5;e++){const t=this.geometryMap[e];if(t){t.data.vao&&t.data.vao.dispose(!1),t.data.indexBuffer&&t.data.indexBuffer.dispose();for(const e in t.buffers)t.buffers[e]&&t.buffers[e].data.vertexBuffer.dispose()}}}get(e){const t=this.geometryMap[e];return{getVAO(e,r,s){if(!t.data.vao){const f={};for(const e in t.buffers)f[e]=t.buffers[e].data.vertexBuffer;t.data.vao=new a(e,s,r,f,t.data.indexBuffer)}return t.data.vao}}}has(e){return null!=this.geometryMap[e]}upload(e,t){t.forEach(((t,r)=>{this._upload(t,r,e)}))}_upload(e,t,r){if(e.indices&&(e.indices.allDirty?this._uploadIndices(r,t):null!=e.indices.from&&null!=e.indices.count&&this._uploadIndices(r,t,e.indices.from,e.indices.count)),e.vertices){const s=e.vertices;for(const e in s){const a=s[e];a.allDirty?this._uploadVertices(r,t,e):null!=a.from&&null!=a.count&&this._uploadVertices(r,t,e,a.from,a.count)}}}_uploadVertices(e,t,r,s,a){const f=this.geometryMap[t];if(!f)return;const o=e.geometries[t].vertexBuffer[r];if(!o)return;const i=o.stride,n=o.data.buffer;f.buffers[r]&&n.byteLength>0&&(null!=s&&null!=a?f.buffers[r].data.vertexBuffer.setSubData(n,s*i,s*i,(s+a)*i):f.buffers[r].data.vertexBuffer.setData(n))}_uploadIndices(e,t,r,s){const a=this.geometryMap[t];if(!a)return;const f=4,o=e.geometries[t].indexBuffer.buffer;a.data.indexBuffer&&o.byteLength>0&&(null!=r&&null!=s?a.data.indexBuffer.setSubData(o,r*f,r*f,(r+s)*f):a.data.indexBuffer.setData(o))}}export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}