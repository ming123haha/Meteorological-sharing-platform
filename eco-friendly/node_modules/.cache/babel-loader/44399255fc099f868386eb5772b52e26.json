{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { difference as e } from \"../../core/arrayUtils.js\";\nimport t from \"../../core/Error.js\";\nimport r from \"../../core/Logger.js\";\nimport { isNone as a, isSome as o } from \"../../core/maybe.js\";\nimport { debounce as s, eachAlways as l } from \"../../core/promiseUtils.js\";\nimport { updateOrigins as i } from \"../../core/accessorSupport/originUtils.js\";\nimport n from \"../FeatureLayer.js\";\nimport { parse as u } from \"../support/arcgisLayerUrl.js\";\nimport { fetchFeatureService as p } from \"../support/fetchService.js\";\nimport { isFeatureCollectionLayer as c, isFeatureServiceLayer as y } from \"../support/layerUtils.js\";\nimport d from \"../../portal/Portal.js\";\nimport m from \"../../portal/PortalItem.js\";\nimport { createForItemWrite as f } from \"../../portal/support/jsonContext.js\";\nimport { addTypeKeyword as w, TypeKeyword as h, getWGS84ExtentForItem as v, removeTypeKeyword as b } from \"../../portal/support/portalItemUtils.js\";\nconst I = r.getLogger(\"esri.layers.FeatureLayer\"),\n      S = \"Feature Service\";\n\nfunction g(e, t) {\n  return `Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`;\n}\n\nfunction j(e, r) {\n  if (r.type !== S) throw new t(\"feature-layer:portal-item-wrong-type\", g(e, `should have portal item of type \"${S}\"`));\n}\n\nasync function L(e) {\n  if (await e.load(), c(e)) throw new t(\"feature-layer:save\", g(e, \"using an in-memory source cannot be saved to a portal item\"));\n}\n\nfunction P(e, r) {\n  let a = (e.messages ?? []).filter(({\n    type: e\n  }) => \"error\" === e).map(({\n    name: e,\n    message: r,\n    details: a\n  }) => new t(e, r, a));\n  if (r?.ignoreUnsupported && (a = a.filter(({\n    name: e\n  }) => \"layer:unsupported\" !== e && \"symbol:unsupported\" !== e && \"symbol-layer:unsupported\" !== e && \"property:unsupported\" !== e && \"url:unsupported\" !== e)), a.length > 0) throw new t(\"feature-layer:save\", \"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\", {\n    errors: a\n  });\n}\n\nasync function J(e, t, r) {\n  \"beforeSave\" in e && \"function\" == typeof e.beforeSave && (await e.beforeSave());\n  const a = e.write({}, t);\n  return P(t, r), a;\n}\n\nfunction N(e) {\n  const {\n    layer: t,\n    layerJSON: r\n  } = e;\n  return t.isTable ? {\n    layers: [],\n    tables: [r]\n  } : {\n    layers: [r],\n    tables: []\n  };\n}\n\nfunction O(e) {\n  w(e, h.JSAPI), e.typeKeywords && (e.typeKeywords = e.typeKeywords.filter((e, t, r) => r.indexOf(e) === t));\n}\n\nfunction E(e) {\n  const r = e.portalItem;\n  if (!r) throw I.error(\"save: requires the portalItem property to be set\"), new t(\"feature-layer:portal-item-not-set\", g(e, \"requires the portalItem property to be set\"));\n  if (!r.loaded) throw new t(\"feature-layer:portal-item-not-loaded\", g(e, \"cannot be saved to a portal item that does not exist or is inaccessible\"));\n  j(e, r);\n}\n\nasync function T(e, t) {\n  return /\\/\\d+\\/?$/.test(e.url ?? \"\") ? N(t[0]) : $(e, t);\n}\n\nasync function $(e, t) {\n  const {\n    layer: {\n      url: r,\n      customParameters: a,\n      apiKey: o\n    }\n  } = t[0];\n  let s = await e.fetchData(\"json\");\n  s && null != s.layers && null != s.tables || (s = await x(s, {\n    url: r ?? \"\",\n    customParameters: a,\n    apiKey: o\n  }, t.map(e => e.layer.layerId)));\n\n  for (const l of t) K(l.layer, l.layerJSON, s);\n\n  return s;\n}\n\nasync function x(e, t, r) {\n  var a, o;\n  e || (e = {}), (a = e).layers || (a.layers = []), (o = e).tables || (o.tables = []);\n  const {\n    url: s,\n    customParameters: l,\n    apiKey: i\n  } = t,\n        {\n    serviceJSON: n,\n    layersJSON: u\n  } = await p(s, {\n    customParameters: l,\n    apiKey: i\n  }),\n        c = A(e.layers, n.layers, r),\n        y = A(e.tables, n.tables, r);\n  e.layers = c.itemResources, e.tables = y.itemResources;\n  const d = [...c.added, ...y.added],\n        m = u ? [...u.layers, ...u.tables] : [];\n  return await U(e, d, s, m), e;\n}\n\nfunction A(t, r, a) {\n  const o = e(t, r, (e, t) => e.id === t.id);\n  t = t.filter(e => !o.removed.some(t => t.id === e.id));\n  const s = o.added.map(({\n    id: e\n  }) => ({\n    id: e\n  }));\n  return s.forEach(({\n    id: e\n  }) => {\n    t.push({\n      id: e\n    });\n  }), {\n    itemResources: t,\n    added: s.filter(({\n      id: e\n    }) => !a.includes(e))\n  };\n}\n\nasync function U(e, t, r, o) {\n  const s = t.map(({\n    id: e\n  }) => new n({\n    url: r,\n    layerId: e,\n    sourceJSON: o.find(({\n      id: t\n    }) => t === e)\n  }));\n  await l(s.map(e => e.load())), s.forEach(t => {\n    const {\n      layerId: r,\n      loaded: o,\n      defaultPopupTemplate: s\n    } = t;\n    if (!o || a(s)) return;\n    K(t, {\n      id: r,\n      popupInfo: s.toJSON()\n    }, e);\n  });\n}\n\nfunction K(e, t, r) {\n  e.isTable ? F(r.tables, t) : F(r.layers, t);\n}\n\nfunction F(e, t) {\n  if (!e) return;\n  const r = e.findIndex(({\n    id: e\n  }) => e === t.id);\n  -1 === r ? e.push(t) : e[r] = t;\n}\n\nfunction R(e) {\n  const {\n    portalItem: t\n  } = e;\n  return y(e) && !e.dynamicDataSource && !!t?.loaded && t.type === S;\n}\n\nasync function D(e) {\n  if (!e?.length) throw new t(\"feature-layer-utils-saveall:missing-parameters\", \"'layers' array should contain at least one feature layer\");\n  await Promise.all(e.map(e => e.load()));\n\n  for (const o of e) if (!R(o)) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", `'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o, \"does not conform\")}`, {\n    layer: o\n  });\n\n  const r = e.map(e => e.portalItem.id);\n  if (new Set(r).size > 1) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", \"All layers in the 'layers' array should be loaded from the same portal item\");\n  const a = e.map(e => e.layerId);\n  if (new Set(a).size !== a.length) throw new t(\"feature-layer-utils-saveall:invalid-parameters\", \"'layers' array should contain only one instance each of layer or table in a feature service\");\n}\n\nfunction _(e, t) {\n  var r, a;\n  let o = m.from(t);\n  return o.id && (o = o.clone(), o.id = null), (r = o).type ?? (r.type = S), (a = o).portal ?? (a.portal = d.getDefault()), j(e, o), o;\n}\n\nasync function q(e, t) {\n  const {\n    url: r,\n    layerId: a,\n    title: s,\n    fullExtent: l,\n    isTable: i\n  } = e,\n        n = u(r),\n        p = o(n) && \"FeatureServer\" === n.serverType;\n  t.url = p ? r : `${r}/${a}`, t.title || (t.title = s), t.extent = null, !i && o(l) && (t.extent = await v(l)), b(t, h.METADATA), b(t, h.MULTI_LAYER), w(t, h.SINGLE_LAYER), i && w(t, h.TABLE), O(t);\n}\n\nasync function z(e, t, r) {\n  const a = e.portal;\n  await a?._signIn(), await a?.user?.addItem({\n    item: e,\n    data: t,\n    folder: r?.folder\n  });\n}\n\nconst C = s(M);\n\nasync function M(e, t) {\n  await L(e), E(e);\n  const r = e.portalItem,\n        a = f(r),\n        o = await J(e, a, t),\n        s = await T(r, [{\n    layer: e,\n    layerJSON: o\n  }]);\n  return O(r), await r.update({\n    data: s\n  }), i(a), r;\n}\n\nconst Y = s(async (e, t) => {\n  await D(e);\n  const r = e[0].portalItem,\n        a = f(r),\n        o = await Promise.all(e.map(e => J(e, a, t))),\n        s = await T(r, e.map((e, t) => ({\n    layer: e,\n    layerJSON: o[t]\n  })));\n  return O(r), await r.update({\n    data: s\n  }), await Promise.all(e.slice(1).map(e => e.portalItem.reload())), i(a), r.clone();\n}),\n      B = s(G);\n\nasync function G(e, t, r) {\n  await L(e);\n\n  const a = _(e, t),\n        o = f(a),\n        s = N({\n    layer: e,\n    layerJSON: await J(e, o, r)\n  });\n\n  return await q(e, a), await z(a, s, r), e.portalItem = a, i(o), a;\n}\n\nexport { C as save, Y as saveAll, B as saveAs };","map":{"version":3,"names":["difference","e","t","r","isNone","a","isSome","o","debounce","s","eachAlways","l","updateOrigins","i","n","parse","u","fetchFeatureService","p","isFeatureCollectionLayer","c","isFeatureServiceLayer","y","d","m","createForItemWrite","f","addTypeKeyword","w","TypeKeyword","h","getWGS84ExtentForItem","v","removeTypeKeyword","b","I","getLogger","S","g","title","id","declaredClass","j","type","L","load","P","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","J","beforeSave","write","N","layer","layerJSON","isTable","layers","tables","O","JSAPI","typeKeywords","indexOf","E","portalItem","error","loaded","T","test","url","$","customParameters","apiKey","fetchData","x","layerId","K","serviceJSON","layersJSON","A","itemResources","added","U","removed","some","forEach","push","includes","sourceJSON","find","defaultPopupTemplate","popupInfo","toJSON","F","findIndex","R","dynamicDataSource","D","Promise","all","Set","size","_","from","clone","portal","getDefault","q","fullExtent","serverType","extent","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE","z","_signIn","user","addItem","item","data","folder","C","M","update","Y","slice","reload","B","G","save","saveAll","saveAs"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/layers/save/featureLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{parse as u}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as p}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=r.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,r){if(r.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function J(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return P(t,r),a}function N(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function E(e){const r=e.portalItem;if(!r)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,r)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,r){var a,o;e||(e={}),(a=e).layers||(a.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:u}=await p(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,r),y=A(e.tables,n.tables,r);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=u?[...u.layers,...u.tables]:[];return await U(e,d,s,m),e}function A(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!a.includes(e)))}}async function U(e,t,r,o){const s=t.map((({id:e})=>new n({url:r,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:r,loaded:o,defaultPopupTemplate:s}=t;if(!o||a(s))return;K(t,{id:r,popupInfo:s.toJSON()},e)}))}function K(e,t,r){e.isTable?F(r.tables,t):F(r.layers,t)}function F(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function _(e,t){var r,a;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(r=o).type??(r.type=S),(a=o).portal??(a.portal=d.getDefault()),j(e,o),o}async function q(e,t){const{url:r,layerId:a,title:s,fullExtent:l,isTable:i}=e,n=u(r),p=o(n)&&\"FeatureServer\"===n.serverType;t.url=p?r:`${r}/${a}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function z(e,t,r){const a=e.portal;await(a?._signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const C=s(M);async function M(e,t){await L(e),E(e);const r=e.portalItem,a=f(r),o=await J(e,a,t),s=await T(r,[{layer:e,layerJSON:o}]);return O(r),await r.update({data:s}),i(a),r}const Y=s((async(e,t)=>{await D(e);const r=e[0].portalItem,a=f(r),o=await Promise.all(e.map((e=>J(e,a,t)))),s=await T(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(a),r.clone()})),B=s(G);async function G(e,t,r){await L(e);const a=_(e,t),o=f(a),s=N({layer:e,layerJSON:await J(e,o,r)});return await q(e,a),await z(a,s,r),e.portalItem=a,i(o),a}export{C as save,Y as saveAll,B as saveAs};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}