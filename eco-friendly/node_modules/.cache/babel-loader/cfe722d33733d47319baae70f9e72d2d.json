{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport { bidiText as t } from \"../../../../../../core/BidiText.js\";\nimport { pt2px as e, toPt as i } from \"../../../../../../core/screenUtils.js\";\nimport { Alignment as o } from \"../../../../../../symbols/cim/enums.js\";\nimport { getJustification as s, getXAnchorDirection as n, getYAnchorDirection as r } from \"../../alignmentUtils.js\";\nimport { premultiplyAlphaRGBAArray as a, premultiplyAlphaRGBA as l } from \"../../color.js\";\nimport { GLYPH_SIZE as m, MIN_MAX_ZOOM_PRECISION_FACTOR as h } from \"../../definitions.js\";\nimport { i1616to32 as f } from \"../../number.js\";\nimport { MaterialKeyBase as c } from \"../../materialKey/MaterialKey.js\";\nimport { DEFAULT_MIN_ZOOM as _, DEFAULT_MAX_ZOOM as d, getMinMaxZoom as x } from \"./util.js\";\nimport z from \"./WGLBaseTextTemplate.js\";\nimport u from \"./WGLMeshTemplate.js\";\nconst M = 5;\n\nclass p extends z(u) {\n  constructor(t, a, l, _, d, x, z, u, p, g, j, S, y, b, T, V, A, C, I = !1, K, R) {\n    super(), this._xOffset = e(y), this._yOffset = e(b), this._decoration = g || \"none\", this._color = d, this._haloColor = x, this._haloSize = Math.min(Math.floor(M * e(i(l))), 127), this._size = Math.min(Math.round(e(a)), 127);\n    const v = Math.min(Math.round(e(_ || a)), 127);\n    this._referenceSize = Math.round(Math.sqrt(256 * v)), this._scale = this._size / m, this._angle = S, this._justify = s(z || \"center\"), this._xAlignD = n(z || \"center\"), this._yAlignD = r(u || \"baseline\"), this._baseline = \"baseline\" === (u || \"baseline\"), this._bitset = (p === o.MAP ? 1 : 0) | (j ? 1 : 0) << 1;\n    const B = c.load(t);\n    B.sdf = !0, this._materialKey = B.data, this._lineWidth = e(T) || 512, this._lineHeight = V || 1, this._textPlacement = A, this._effects = C, this._isCIM = I, this._minMaxZoom = f(Math.round(K * h), Math.round(R * h));\n  }\n\n  static fromText(e, i) {\n    const s = new p(e.materialKey, e.font.size, e.haloSize || 0, e.font.size, e.color && a(e.color) || 0, e.haloColor && a(e.haloColor) || 0, e.horizontalAlignment, e.verticalAlignment, o.SCREEN, e.font.decoration, !1, e.angle || 0, e.xoffset, e.yoffset, e.lineWidth, e.lineHeight, null, null, !1, _, d),\n          [, n] = t(e.text);\n    return s.bindTextInfo(i, n), s._vertexBoundsScale = e.maxVVSize ? e.maxVVSize / e.font.size : 1, s;\n  }\n\n  static fromCIMText(e, i, o) {\n    const s = e.scaleFactor || 1,\n          n = e.size * e.sizeRatio * s,\n          [r, a] = x(e.scaleInfo, o),\n          m = new p(e.materialKey, n, e.outlineSize * e.sizeRatio, e.referenceSize, l(e.color), l(e.outlineColor), e.horizontalAlignment, e.verticalAlignment, e.alignment, e.decoration, e.colorLocked, e.angle, e.offsetX * e.sizeRatio * s, e.offsetY * e.sizeRatio * s, 512, 1, e.markerPlacement, e.effects, !0, r, a),\n          [, h] = t(e.text);\n    return m.bindTextInfo(i, h), m._vertexBoundsScale = e.maxVVSize ? e.maxVVSize / n : 1, m;\n  }\n\n}\n\nexport { p as default };","map":{"version":3,"names":["bidiText","t","pt2px","e","toPt","i","Alignment","o","getJustification","s","getXAnchorDirection","n","getYAnchorDirection","r","premultiplyAlphaRGBAArray","a","premultiplyAlphaRGBA","l","GLYPH_SIZE","m","MIN_MAX_ZOOM_PRECISION_FACTOR","h","i1616to32","f","MaterialKeyBase","c","DEFAULT_MIN_ZOOM","_","DEFAULT_MAX_ZOOM","d","getMinMaxZoom","x","z","u","M","p","constructor","g","j","S","y","b","T","V","A","C","I","K","R","_xOffset","_yOffset","_decoration","_color","_haloColor","_haloSize","Math","min","floor","_size","round","v","_referenceSize","sqrt","_scale","_angle","_justify","_xAlignD","_yAlignD","_baseline","_bitset","MAP","B","load","sdf","_materialKey","data","_lineWidth","_lineHeight","_textPlacement","_effects","_isCIM","_minMaxZoom","fromText","materialKey","font","size","haloSize","color","haloColor","horizontalAlignment","verticalAlignment","SCREEN","decoration","angle","xoffset","yoffset","lineWidth","lineHeight","text","bindTextInfo","_vertexBoundsScale","maxVVSize","fromCIMText","scaleFactor","sizeRatio","scaleInfo","outlineSize","referenceSize","outlineColor","alignment","colorLocked","offsetX","offsetY","markerPlacement","effects","default"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTextTemplate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{bidiText as t}from\"../../../../../../core/BidiText.js\";import{pt2px as e,toPt as i}from\"../../../../../../core/screenUtils.js\";import{Alignment as o}from\"../../../../../../symbols/cim/enums.js\";import{getJustification as s,getXAnchorDirection as n,getYAnchorDirection as r}from\"../../alignmentUtils.js\";import{premultiplyAlphaRGBAArray as a,premultiplyAlphaRGBA as l}from\"../../color.js\";import{GLYPH_SIZE as m,MIN_MAX_ZOOM_PRECISION_FACTOR as h}from\"../../definitions.js\";import{i1616to32 as f}from\"../../number.js\";import{MaterialKeyBase as c}from\"../../materialKey/MaterialKey.js\";import{DEFAULT_MIN_ZOOM as _,DEFAULT_MAX_ZOOM as d,getMinMaxZoom as x}from\"./util.js\";import z from\"./WGLBaseTextTemplate.js\";import u from\"./WGLMeshTemplate.js\";const M=5;class p extends(z(u)){constructor(t,a,l,_,d,x,z,u,p,g,j,S,y,b,T,V,A,C,I=!1,K,R){super(),this._xOffset=e(y),this._yOffset=e(b),this._decoration=g||\"none\",this._color=d,this._haloColor=x,this._haloSize=Math.min(Math.floor(M*e(i(l))),127),this._size=Math.min(Math.round(e(a)),127);const v=Math.min(Math.round(e(_||a)),127);this._referenceSize=Math.round(Math.sqrt(256*v)),this._scale=this._size/m,this._angle=S,this._justify=s(z||\"center\"),this._xAlignD=n(z||\"center\"),this._yAlignD=r(u||\"baseline\"),this._baseline=\"baseline\"===(u||\"baseline\"),this._bitset=(p===o.MAP?1:0)|(j?1:0)<<1;const B=c.load(t);B.sdf=!0,this._materialKey=B.data,this._lineWidth=e(T)||512,this._lineHeight=V||1,this._textPlacement=A,this._effects=C,this._isCIM=I,this._minMaxZoom=f(Math.round(K*h),Math.round(R*h))}static fromText(e,i){const s=new p(e.materialKey,e.font.size,e.haloSize||0,e.font.size,e.color&&a(e.color)||0,e.haloColor&&a(e.haloColor)||0,e.horizontalAlignment,e.verticalAlignment,o.SCREEN,e.font.decoration,!1,e.angle||0,e.xoffset,e.yoffset,e.lineWidth,e.lineHeight,null,null,!1,_,d),[,n]=t(e.text);return s.bindTextInfo(i,n),s._vertexBoundsScale=e.maxVVSize?e.maxVVSize/e.font.size:1,s}static fromCIMText(e,i,o){const s=e.scaleFactor||1,n=e.size*e.sizeRatio*s,[r,a]=x(e.scaleInfo,o),m=new p(e.materialKey,n,e.outlineSize*e.sizeRatio,e.referenceSize,l(e.color),l(e.outlineColor),e.horizontalAlignment,e.verticalAlignment,e.alignment,e.decoration,e.colorLocked,e.angle,e.offsetX*e.sizeRatio*s,e.offsetY*e.sizeRatio*s,512,1,e.markerPlacement,e.effects,!0,r,a),[,h]=t(e.text);return m.bindTextInfo(i,h),m._vertexBoundsScale=e.maxVVSize?e.maxVVSize/n:1,m}}export{p as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}