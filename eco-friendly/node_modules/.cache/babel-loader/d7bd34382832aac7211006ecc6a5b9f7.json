{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../Graphic.js\";\nimport { clone as i } from \"../../../core/lang.js\";\nimport s from \"../../../core/Logger.js\";\nimport { isNone as r } from \"../../../core/maybe.js\";\nimport { isAbortError as a } from \"../../../core/promiseUtils.js\";\nimport { watch as l, initial as n } from \"../../../core/reactiveUtils.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as h } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { diff as u, hasDiff as y } from \"../../../core/accessorSupport/diffUtils.js\";\nimport { create as c } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { equals as p } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { StyleUpdateType as d } from \"../engine/vectorTiles/enums.js\";\nimport { TileHandler as _ } from \"../engine/vectorTiles/TileHandler.js\";\nimport { TileManager as f } from \"../engine/vectorTiles/TileManager.js\";\nimport { VectorTile as g } from \"../engine/vectorTiles/VectorTile.js\";\nimport { VectorTileContainer as m } from \"../engine/vectorTiles/VectorTileContainer.js\";\nimport { drawColliders as C } from \"../engine/vectorTiles/decluttering/debugging.js\";\nimport { StyleLayerType as T } from \"../engine/vectorTiles/style/StyleDefinition.js\";\nimport v from \"../engine/vectorTiles/style/StyleRepository.js\";\nimport { LayerView2DMixin as R } from \"./LayerView2D.js\";\nimport { Display as D } from \"./support/Display.js\";\nimport H from \"../tiling/TileInfoViewPOT.js\";\nimport w from \"../tiling/TileQueue.js\";\nimport S from \"../../layers/LayerView.js\";\nconst Q = s.getLogger(\"esri.views.2d.layers.VectorTileLayerView2D\");\nlet L = class extends R(S) {\n  constructor() {\n    super(...arguments), this._styleChanges = [], this._fetchQueue = null, this._parseQueue = null, this._isTileHandlerReady = !1, this.fading = !1;\n  }\n\n  async hitTest(e, i) {\n    if (!this._tileHandlerPromise) return null;\n    await this._tileHandlerPromise;\n    const s = await this._vectorTileContainer.hitTest(i);\n    if (!s || 0 === s.length) return null;\n    const r = s[0] - 1,\n          a = this._styleRepository,\n          l = a.getStyleLayerByUID(r);\n    if (!l) return null;\n    const n = a.getStyleLayerIndex(l.id);\n    return [{\n      type: \"graphic\",\n      mapPoint: e,\n      layer: this.layer,\n      graphic: new t({\n        attributes: {\n          layerId: n,\n          layerName: l.id,\n          layerUID: r\n        },\n        layer: this.layer,\n        sourceLayer: this.layer\n      })\n    }];\n  }\n\n  update(e) {\n    if (this._tileHandlerPromise && this._isTileHandlerReady) return e.pixelRatio !== this._tileHandler.devicePixelRatio ? (this._start(), void (this._tileHandler.devicePixelRatio = e.pixelRatio)) : void (this._styleChanges.length > 0 ? this._tileHandlerPromise = this._applyStyleChanges() : (this._fetchQueue.pause(), this._parseQueue.pause(), this._fetchQueue.state = e.state, this._parseQueue.state = e.state, this._tileManager.update(e) || this.requestUpdate(), this._parseQueue.resume(), this._fetchQueue.resume()));\n  }\n\n  attach() {\n    const {\n      style: e\n    } = this.layer.currentStyleInfo;\n    this._styleRepository = new v(e), this._tileInfoView = new H(this.layer.tileInfo, this.layer.fullExtent), this._vectorTileContainer = new m(this._tileInfoView), this._tileHandler = new _(this.layer, this._styleRepository, window.devicePixelRatio || 1), this.container.addChild(this._vectorTileContainer), this._start(), this.handles.add([this._vectorTileContainer.on(\"fade-start\", () => {\n      this.fading = !0, this.notifyChange(\"updating\"), this.requestUpdate();\n    }), this._vectorTileContainer.on(\"fade-complete\", () => {\n      this._collisionBoxesDisplay?.requestRender(), this.fading = !1, this.notifyChange(\"updating\"), this.requestUpdate();\n    }), l(() => this.layer.symbolCollisionBoxesVisible, e => {\n      e ? (this._collisionBoxesDisplay = new D({\n        render: e => this._renderCollisionBoxes(e.context)\n      }), this.container.addChild(this._collisionBoxesDisplay)) : (this.container.removeChild(this._collisionBoxesDisplay), this._collisionBoxesDisplay = null);\n    }, n), this.layer.on(\"paint-change\", e => {\n      if (e.isDataDriven) this._styleChanges.push({\n        type: d.PAINTER_CHANGED,\n        data: e\n      }), this.notifyChange(\"updating\"), this.requestUpdate();else {\n        const t = this._styleRepository,\n              i = t.getLayerById(e.layer);\n        if (!i) return;\n        const s = i.type === T.SYMBOL;\n        t.setPaintProperties(e.layer, e.paint), s && this._vectorTileContainer.restartDeclutter(), this._vectorTileContainer.requestRender();\n      }\n    }), this.layer.on(\"layout-change\", e => {\n      const t = this._styleRepository,\n            i = t.getLayerById(e.layer);\n      if (!i) return;\n      const s = u(i.layout, e.layout);\n\n      if (!r(s)) {\n        if (y(s, \"visibility\") && 1 === b(s)) return t.setLayoutProperties(e.layer, e.layout), i.type === T.SYMBOL && this._vectorTileContainer.restartDeclutter(), void this._vectorTileContainer.requestRender();\n        this._styleChanges.push({\n          type: d.LAYOUT_CHANGED,\n          data: e\n        }), this.notifyChange(\"updating\"), this.requestUpdate();\n      }\n    }), this.layer.on(\"style-layer-visibility-change\", e => {\n      const t = this._styleRepository,\n            i = t.getLayerById(e.layer);\n      i && (t.setStyleLayerVisibility(e.layer, e.visibility), i.type === T.SYMBOL && this._vectorTileContainer.restartDeclutter(), this._vectorTileContainer.requestRender());\n    }), this.layer.on(\"style-layer-change\", e => {\n      this._styleChanges.push({\n        type: d.LAYER_CHANGED,\n        data: e\n      }), this.notifyChange(\"updating\"), this.requestUpdate();\n    }), this.layer.on(\"delete-style-layer\", e => {\n      this._styleChanges.push({\n        type: d.LAYER_REMOVED,\n        data: e\n      }), this.notifyChange(\"updating\"), this.requestUpdate();\n    }), this.layer.on(\"load-style\", () => this._loadStyle()), this.layer.on(\"spriteSource-change\", e => {\n      this._newSpriteSource = e.spriteSource, this._styleChanges.push({\n        type: d.SPRITES_CHANGED,\n        data: null\n      });\n      const t = this._styleRepository.layers;\n\n      for (const i of t) switch (i.type) {\n        case T.SYMBOL:\n          i.getLayoutProperty(\"icon-image\") && this._styleChanges.push({\n            type: d.LAYOUT_CHANGED,\n            data: {\n              layer: i.id,\n              layout: i.layout\n            }\n          });\n          break;\n\n        case T.LINE:\n          i.getPaintProperty(\"line-pattern\") && this._styleChanges.push({\n            type: d.PAINTER_CHANGED,\n            data: {\n              layer: i.id,\n              paint: i.paint,\n              isDataDriven: i.isPainterDataDriven()\n            }\n          });\n          break;\n\n        case T.FILL:\n          i.getLayoutProperty(\"fill-pattern\") && this._styleChanges.push({\n            type: d.PAINTER_CHANGED,\n            data: {\n              layer: i.id,\n              paint: i.paint,\n              isDataDriven: i.isPainterDataDriven()\n            }\n          });\n      }\n\n      this.notifyChange(\"updating\"), this.requestUpdate();\n    })], this.declaredClass);\n  }\n\n  detach() {\n    this._stop(), this.container.removeAllChildren(), this._vectorTileContainer?.destroy(), this._vectorTileContainer = null, this._tileHandler?.destroy(), this._tileHandler = null, this.handles.remove(this.declaredClass);\n  }\n\n  moveStart() {\n    this.requestUpdate();\n  }\n\n  viewChange() {\n    this.requestUpdate();\n  }\n\n  moveEnd() {\n    this._collisionBoxesDisplay && this._vectorTileContainer.restartDeclutter(), this.requestUpdate();\n  }\n\n  supportsSpatialReference(e) {\n    return p(this.layer.tileInfo?.spatialReference, e);\n  }\n\n  canResume() {\n    let e = super.canResume();\n    const {\n      currentStyleInfo: t\n    } = this.layer;\n\n    if (e && t?.layerDefinition) {\n      const i = this.view.scale,\n            {\n        minScale: s,\n        maxScale: r\n      } = t.layerDefinition;\n      t && t.layerDefinition && (s && s < i && (e = !1), r && r > i && (e = !1));\n    }\n\n    return e;\n  }\n\n  isUpdating() {\n    const e = this._vectorTileContainer.children;\n    return !this._isTileHandlerReady || !this._fetchQueue || !this._parseQueue || this._fetchQueue.updating || this._parseQueue.updating || e.length > 0 && e.some(e => e.invalidating) || this.fading;\n  }\n\n  acquireTile(e) {\n    const t = this._createVectorTile(e);\n\n    return this._tileHandlerPromise.then(() => {\n      this._fetchQueue.push(t.key).then(e => this._parseQueue.push({\n        key: t.key,\n        data: e\n      })).then(e => {\n        t.once(\"attach\", () => this.requestUpdate()), t.setData(e), this.requestUpdate(), this.notifyChange(\"updating\");\n      }).catch(e => {\n        this.notifyChange(\"updating\"), a(e) || Q.error(e);\n      });\n    }), t;\n  }\n\n  releaseTile(e) {\n    const t = e.key.id;\n    this._fetchQueue.abort(t), this._parseQueue.abort(t), this.requestUpdate();\n  }\n\n  _start() {\n    if (this._stop(), this._tileManager = new f({\n      acquireTile: e => this.acquireTile(e),\n      releaseTile: e => this.releaseTile(e),\n      tileInfoView: this._tileInfoView\n    }, this._vectorTileContainer), !this.layer.currentStyleInfo) return;\n\n    const e = new AbortController(),\n          t = this._tileHandler.start({\n      signal: e.signal\n    }).then(() => {\n      this._fetchQueue = new w({\n        tileInfoView: this._tileInfoView,\n        process: (e, t) => this._getTileData(e, t),\n        concurrency: 15\n      }), this._parseQueue = new w({\n        tileInfoView: this._tileInfoView,\n        process: (e, t) => this._parseTileData(e, t),\n        concurrency: 8\n      }), this.requestUpdate(), this._isTileHandlerReady = !0;\n    });\n\n    this._tileHandler.spriteMosaic.then(e => {\n      this._vectorTileContainer.setStyleResources(e, this._tileHandler.glyphMosaic, this._styleRepository), this.requestUpdate();\n    }), this._tileHandlerAbortController = e, this._tileHandlerPromise = t;\n  }\n\n  _stop() {\n    if (!this._tileHandlerAbortController || !this._vectorTileContainer) return;\n    const e = this._tileHandlerAbortController;\n    e && e.abort(), this._tileHandlerPromise = null, this._isTileHandlerReady = !1, this._fetchQueue && (this._fetchQueue.destroy(), this._fetchQueue = null), this._parseQueue && (this._parseQueue.destroy(), this._parseQueue = null), this._tileManager && (this._tileManager.destroy(), this._tileManager = null), this._vectorTileContainer.removeAllChildren();\n  }\n\n  async _getTileData(e, t) {\n    const i = await this._tileHandler.fetchTileData(e, t);\n    return this.notifyChange(\"updating\"), i;\n  }\n\n  async _parseTileData(e, t) {\n    return this._tileHandler.parseTileData(e, t);\n  }\n\n  async _applyStyleChanges() {\n    this._isTileHandlerReady = !1, this._fetchQueue.pause(), this._parseQueue.pause(), this._fetchQueue.clear(), this._parseQueue.clear(), this._tileManager.clearCache();\n    const e = this._styleChanges;\n\n    try {\n      await this._tileHandler.updateStyle(e);\n    } catch (l) {\n      Q.error(\"error applying vector-tiles style update\", l.message), this._fetchQueue.resume(), this._parseQueue.resume(), this._isTileHandlerReady = !0;\n    }\n\n    const t = this._styleRepository,\n          i = [];\n    e.forEach(e => {\n      if (e.type !== d.LAYER_REMOVED) return;\n      const s = e.data,\n            r = t.getLayerById(s.layer);\n      r && i.push(r.uid);\n    });\n    const s = [];\n    let r;\n    e.forEach(e => {\n      const i = e.type,\n            a = e.data;\n\n      switch (i) {\n        case d.PAINTER_CHANGED:\n          t.setPaintProperties(a.layer, a.paint), r = a.layer;\n          break;\n\n        case d.LAYOUT_CHANGED:\n          t.setLayoutProperties(a.layer, a.layout), r = a.layer;\n          break;\n\n        case d.LAYER_REMOVED:\n          return void t.deleteStyleLayer(a.layer);\n\n        case d.LAYER_CHANGED:\n          t.setStyleLayer(a.layer, a.index), r = a.layer.id;\n          break;\n\n        case d.SPRITES_CHANGED:\n          this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(this._newSpriteSource)), this._newSpriteSource = null, r = null;\n      }\n\n      const l = t.getLayerById(r);\n      l && s.push(l.uid);\n    });\n    const a = this._vectorTileContainer.children;\n\n    if (i.length > 0) {\n      this._vectorTileContainer.deleteStyleLayers(i);\n\n      for (const e of a) e.deleteLayerData(i);\n    }\n\n    if (this._fetchQueue.resume(), this._parseQueue.resume(), s.length > 0) {\n      const e = [];\n\n      for (const t of a) {\n        const i = this._fetchQueue.push(t.key).then(e => this._parseQueue.push({\n          key: t.key,\n          data: e,\n          styleLayerUIDs: s\n        })).then(e => t.setData(e));\n\n        e.push(i);\n      }\n\n      await Promise.all(e);\n    }\n\n    this._styleChanges = [], this._isTileHandlerReady = !0, this.notifyChange(\"updating\"), this.requestUpdate();\n  }\n\n  async _loadStyle() {\n    const {\n      style: e\n    } = this.layer.currentStyleInfo,\n          t = i(e);\n    this._isTileHandlerReady = !1, this._fetchQueue.pause(), this._parseQueue.pause(), this._fetchQueue.clear(), this._parseQueue.clear(), this.notifyChange(\"updating\"), this._styleRepository = new v(t), this._vectorTileContainer.destroy(), this._tileManager.clear(), this._tileHandlerAbortController.abort(), this._tileHandlerAbortController = new AbortController();\n    const {\n      signal: s\n    } = this._tileHandlerAbortController;\n\n    try {\n      this._tileHandlerPromise = this._tileHandler.setStyle(this._styleRepository, t), await this._tileHandlerPromise;\n    } catch (l) {\n      if (!a(l)) throw l;\n    }\n\n    if (s.aborted) return this._fetchQueue.resume(), this._parseQueue.resume(), this._isTileHandlerReady = !0, this.notifyChange(\"updating\"), void this.requestUpdate();\n    const r = await this._tileHandler.spriteMosaic;\n    this._vectorTileContainer.setStyleResources(r, this._tileHandler.glyphMosaic, this._styleRepository), this._fetchQueue.resume(), this._parseQueue.resume(), this._isTileHandlerReady = !0, this.notifyChange(\"updating\"), this.requestUpdate();\n  }\n\n  _createVectorTile(e) {\n    const t = this._tileInfoView.getTileBounds(c(), e);\n\n    return new g(e, t[0], t[3], 512, 512, this._styleRepository);\n  }\n\n  _renderCollisionBoxes(e) {\n    for (const t of this._vectorTileContainer.children) if (t.symbols) {\n      const i = [];\n\n      for (const [e, s] of t.symbols) i.push(...s);\n\n      C(e, i);\n    }\n  }\n\n};\n\nfunction b(e) {\n  if (r(e)) return 0;\n\n  switch (e.type) {\n    case \"partial\":\n      return Object.keys(e.diff).length;\n\n    case \"complete\":\n      return Math.max(Object.keys(e.oldValue).length, Object.keys(e.newValue).length);\n\n    case \"collection\":\n      return Object.keys(e.added).length + Object.keys(e.changed).length + Object.keys(e.removed).length;\n  }\n}\n\ne([o()], L.prototype, \"_fetchQueue\", void 0), e([o()], L.prototype, \"_parseQueue\", void 0), e([o()], L.prototype, \"_isTileHandlerReady\", void 0), e([o()], L.prototype, \"fading\", void 0), L = e([h(\"esri.views.2d.layers.VectorTileLayerView2D\")], L);\nconst I = L;\nexport { I as default };","map":{"version":3,"names":["_","e","t","clone","i","s","isNone","r","isAbortError","a","watch","l","initial","n","property","o","subclass","h","diff","u","hasDiff","y","create","c","equals","p","StyleUpdateType","d","TileHandler","TileManager","f","VectorTile","g","VectorTileContainer","m","drawColliders","C","StyleLayerType","T","v","LayerView2DMixin","R","Display","D","H","w","S","Q","getLogger","L","constructor","arguments","_styleChanges","_fetchQueue","_parseQueue","_isTileHandlerReady","fading","hitTest","_tileHandlerPromise","_vectorTileContainer","length","_styleRepository","getStyleLayerByUID","getStyleLayerIndex","id","type","mapPoint","layer","graphic","attributes","layerId","layerName","layerUID","sourceLayer","update","pixelRatio","_tileHandler","devicePixelRatio","_start","_applyStyleChanges","pause","state","_tileManager","requestUpdate","resume","attach","style","currentStyleInfo","_tileInfoView","tileInfo","fullExtent","window","container","addChild","handles","add","on","notifyChange","_collisionBoxesDisplay","requestRender","symbolCollisionBoxesVisible","render","_renderCollisionBoxes","context","removeChild","isDataDriven","push","PAINTER_CHANGED","data","getLayerById","SYMBOL","setPaintProperties","paint","restartDeclutter","layout","b","setLayoutProperties","LAYOUT_CHANGED","setStyleLayerVisibility","visibility","LAYER_CHANGED","LAYER_REMOVED","_loadStyle","_newSpriteSource","spriteSource","SPRITES_CHANGED","layers","getLayoutProperty","LINE","getPaintProperty","isPainterDataDriven","FILL","declaredClass","detach","_stop","removeAllChildren","destroy","remove","moveStart","viewChange","moveEnd","supportsSpatialReference","spatialReference","canResume","layerDefinition","view","scale","minScale","maxScale","isUpdating","children","updating","some","invalidating","acquireTile","_createVectorTile","then","key","once","setData","catch","error","releaseTile","abort","tileInfoView","AbortController","start","signal","process","_getTileData","concurrency","_parseTileData","spriteMosaic","setStyleResources","glyphMosaic","_tileHandlerAbortController","fetchTileData","parseTileData","clear","clearCache","updateStyle","message","forEach","uid","deleteStyleLayer","setStyleLayer","index","setSpriteMosaic","setSpriteSource","deleteStyleLayers","deleteLayerData","styleLayerUIDs","Promise","all","setStyle","aborted","getTileBounds","symbols","Object","keys","Math","max","oldValue","newValue","added","changed","removed","prototype","I","default"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{clone as i}from\"../../../core/lang.js\";import s from\"../../../core/Logger.js\";import{isNone as r}from\"../../../core/maybe.js\";import{isAbortError as a}from\"../../../core/promiseUtils.js\";import{watch as l,initial as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{diff as u,hasDiff as y}from\"../../../core/accessorSupport/diffUtils.js\";import{create as c}from\"../../../geometry/support/aaBoundingRect.js\";import{equals as p}from\"../../../geometry/support/spatialReferenceUtils.js\";import{StyleUpdateType as d}from\"../engine/vectorTiles/enums.js\";import{TileHandler as _}from\"../engine/vectorTiles/TileHandler.js\";import{TileManager as f}from\"../engine/vectorTiles/TileManager.js\";import{VectorTile as g}from\"../engine/vectorTiles/VectorTile.js\";import{VectorTileContainer as m}from\"../engine/vectorTiles/VectorTileContainer.js\";import{drawColliders as C}from\"../engine/vectorTiles/decluttering/debugging.js\";import{StyleLayerType as T}from\"../engine/vectorTiles/style/StyleDefinition.js\";import v from\"../engine/vectorTiles/style/StyleRepository.js\";import{LayerView2DMixin as R}from\"./LayerView2D.js\";import{Display as D}from\"./support/Display.js\";import H from\"../tiling/TileInfoViewPOT.js\";import w from\"../tiling/TileQueue.js\";import S from\"../../layers/LayerView.js\";const Q=s.getLogger(\"esri.views.2d.layers.VectorTileLayerView2D\");let L=class extends(R(S)){constructor(){super(...arguments),this._styleChanges=[],this._fetchQueue=null,this._parseQueue=null,this._isTileHandlerReady=!1,this.fading=!1}async hitTest(e,i){if(!this._tileHandlerPromise)return null;await this._tileHandlerPromise;const s=await this._vectorTileContainer.hitTest(i);if(!s||0===s.length)return null;const r=s[0]-1,a=this._styleRepository,l=a.getStyleLayerByUID(r);if(!l)return null;const n=a.getStyleLayerIndex(l.id);return[{type:\"graphic\",mapPoint:e,layer:this.layer,graphic:new t({attributes:{layerId:n,layerName:l.id,layerUID:r},layer:this.layer,sourceLayer:this.layer})}]}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){const{style:e}=this.layer.currentStyleInfo;this._styleRepository=new v(e),this._tileInfoView=new H(this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new m(this._tileInfoView),this._tileHandler=new _(this.layer,this._styleRepository,window.devicePixelRatio||1),this.container.addChild(this._vectorTileContainer),this._start(),this.handles.add([this._vectorTileContainer.on(\"fade-start\",(()=>{this.fading=!0,this.notifyChange(\"updating\"),this.requestUpdate()})),this._vectorTileContainer.on(\"fade-complete\",(()=>{this._collisionBoxesDisplay?.requestRender(),this.fading=!1,this.notifyChange(\"updating\"),this.requestUpdate()})),l((()=>this.layer.symbolCollisionBoxesVisible),(e=>{e?(this._collisionBoxesDisplay=new D({render:e=>this._renderCollisionBoxes(e.context)}),this.container.addChild(this._collisionBoxesDisplay)):(this.container.removeChild(this._collisionBoxesDisplay),this._collisionBoxesDisplay=null)}),n),this.layer.on(\"paint-change\",(e=>{if(e.isDataDriven)this._styleChanges.push({type:d.PAINTER_CHANGED,data:e}),this.notifyChange(\"updating\"),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=i.type===T.SYMBOL;t.setPaintProperties(e.layer,e.paint),s&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()}})),this.layer.on(\"layout-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=u(i.layout,e.layout);if(!r(s)){if(y(s,\"visibility\")&&1===b(s))return t.setLayoutProperties(e.layer,e.layout),i.type===T.SYMBOL&&this._vectorTileContainer.restartDeclutter(),void this._vectorTileContainer.requestRender();this._styleChanges.push({type:d.LAYOUT_CHANGED,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()}})),this.layer.on(\"style-layer-visibility-change\",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(t.setStyleLayerVisibility(e.layer,e.visibility),i.type===T.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())})),this.layer.on(\"style-layer-change\",(e=>{this._styleChanges.push({type:d.LAYER_CHANGED,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()})),this.layer.on(\"delete-style-layer\",(e=>{this._styleChanges.push({type:d.LAYER_REMOVED,data:e}),this.notifyChange(\"updating\"),this.requestUpdate()})),this.layer.on(\"load-style\",(()=>this._loadStyle())),this.layer.on(\"spriteSource-change\",(e=>{this._newSpriteSource=e.spriteSource,this._styleChanges.push({type:d.SPRITES_CHANGED,data:null});const t=this._styleRepository.layers;for(const i of t)switch(i.type){case T.SYMBOL:i.getLayoutProperty(\"icon-image\")&&this._styleChanges.push({type:d.LAYOUT_CHANGED,data:{layer:i.id,layout:i.layout}});break;case T.LINE:i.getPaintProperty(\"line-pattern\")&&this._styleChanges.push({type:d.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}});break;case T.FILL:i.getLayoutProperty(\"fill-pattern\")&&this._styleChanges.push({type:d.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}})}this.notifyChange(\"updating\"),this.requestUpdate()}))],this.declaredClass)}detach(){this._stop(),this.container.removeAllChildren(),this._vectorTileContainer?.destroy(),this._vectorTileContainer=null,this._tileHandler?.destroy(),this._tileHandler=null,this.handles.remove(this.declaredClass)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this._collisionBoxesDisplay&&this._vectorTileContainer.restartDeclutter(),this.requestUpdate()}supportsSpatialReference(e){return p(this.layer.tileInfo?.spatialReference,e)}canResume(){let e=super.canResume();const{currentStyleInfo:t}=this.layer;if(e&&t?.layerDefinition){const i=this.view.scale,{minScale:s,maxScale:r}=t.layerDefinition;t&&t.layerDefinition&&(s&&s<i&&(e=!1),r&&r>i&&(e=!1))}return e}isUpdating(){const e=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||e.length>0&&e.some((e=>e.invalidating))||this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._tileHandlerPromise.then((()=>{this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once(\"attach\",(()=>this.requestUpdate())),t.setData(e),this.requestUpdate(),this.notifyChange(\"updating\")})).catch((e=>{this.notifyChange(\"updating\"),a(e)||Q.error(e)}))})),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new f({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new w({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15}),this._parseQueue=new w({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue&&(this._fetchQueue.destroy(),this._fetchQueue=null),this._parseQueue&&(this._parseQueue.destroy(),this._parseQueue=null),this._tileManager&&(this._tileManager.destroy(),this._tileManager=null),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){const i=await this._tileHandler.fetchTileData(e,t);return this.notifyChange(\"updating\"),i}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){Q.error(\"error applying vector-tiles style update\",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const t=this._styleRepository,i=[];e.forEach((e=>{if(e.type!==d.LAYER_REMOVED)return;const s=e.data,r=t.getLayerById(s.layer);r&&i.push(r.uid)}));const s=[];let r;e.forEach((e=>{const i=e.type,a=e.data;switch(i){case d.PAINTER_CHANGED:t.setPaintProperties(a.layer,a.paint),r=a.layer;break;case d.LAYOUT_CHANGED:t.setLayoutProperties(a.layer,a.layout),r=a.layer;break;case d.LAYER_REMOVED:return void t.deleteStyleLayer(a.layer);case d.LAYER_CHANGED:t.setStyleLayer(a.layer,a.index),r=a.layer.id;break;case d.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(this._newSpriteSource)),this._newSpriteSource=null,r=null}const l=t.getLayerById(r);l&&s.push(l.uid)}));const a=this._vectorTileContainer.children;if(i.length>0){this._vectorTileContainer.deleteStyleLayers(i);for(const e of a)e.deleteLayerData(i)}if(this._fetchQueue.resume(),this._parseQueue.resume(),s.length>0){const e=[];for(const t of a){const i=this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e,styleLayerUIDs:s}))).then((e=>t.setData(e)));e.push(i)}await Promise.all(e)}this._styleChanges=[],this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),this.requestUpdate()}async _loadStyle(){const{style:e}=this.layer.currentStyleInfo,t=i(e);this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this.notifyChange(\"updating\"),this._styleRepository=new v(t),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=new AbortController;const{signal:s}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,t),await this._tileHandlerPromise}catch(l){if(!a(l))throw l}if(s.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),void this.requestUpdate();const r=await this._tileHandler.spriteMosaic;this._vectorTileContainer.setStyleResources(r,this._tileHandler.glyphMosaic,this._styleRepository),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.notifyChange(\"updating\"),this.requestUpdate()}_createVectorTile(e){const t=this._tileInfoView.getTileBounds(c(),e);return new g(e,t[0],t[3],512,512,this._styleRepository)}_renderCollisionBoxes(e){for(const t of this._vectorTileContainer.children)if(t.symbols){const i=[];for(const[e,s]of t.symbols)i.push(...s);C(e,i)}}};function b(e){if(r(e))return 0;switch(e.type){case\"partial\":return Object.keys(e.diff).length;case\"complete\":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case\"collection\":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}e([o()],L.prototype,\"_fetchQueue\",void 0),e([o()],L.prototype,\"_parseQueue\",void 0),e([o()],L.prototype,\"_isTileHandlerReady\",void 0),e([o()],L.prototype,\"fading\",void 0),L=e([h(\"esri.views.2d.layers.VectorTileLayerView2D\")],L);const I=L;export{I as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}