{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport \"../../../core/has.js\";\nimport s from \"../../../core/Handles.js\";\nimport { lerp as i } from \"../../../core/mathUtils.js\";\nimport { destroyMaybe as r, isSome as n, isNone as o } from \"../../../core/maybe.js\";\nimport { when as h, syncAndInitial as a, watch as p, initial as d } from \"../../../core/reactiveUtils.js\";\nimport { property as l } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as _ } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { l as m } from \"../../../chunks/vec3.js\";\nimport { getReferenceEllipsoid as c } from \"../../../geometry/projectionEllipsoid.js\";\nimport { isMoon as u, isEarth as g } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { ChapmanAtmosphere as w } from \"./ChapmanAtmosphere.js\";\nimport { CloudsComposition as y } from \"./CloudsComposition.js\";\nimport { isReadyCloudsData as v } from \"./CloudsData.js\";\nimport { CloudsGenerator as f } from \"./CloudsGenerator.js\";\nimport { cloudPresets as A } from \"./CloudsPresets.js\";\nimport { Fog as R } from \"./Fog.js\";\nimport { PanoramicAtmosphere as b } from \"./PanoramicAtmosphere.js\";\nimport { Precipitation as E } from \"./Precipitation.js\";\nimport N from \"./SimpleAtmosphere.js\";\nimport { Stars as T } from \"./Stars.js\";\nimport { weatherHeightLimit as j } from \"./weather.js\";\nimport { RenderPass as x } from \"../webgl-engine/lib/RenderPass.js\";\nimport { RenderSlot as C } from \"../webgl-engine/lib/RenderSlot.js\";\nvar P;\nconst O = [C.POSTPROCESSING_ENVIRONMENT_OPAQUE, C.POSTPROCESSING_ENVIRONMENT_TRANSPARENT];\nlet S,\n    M = P = class extends t {\n  constructor(e) {\n    super(e), this._handles = new s(), this._context = null, this._pendingAtmosphere = null, this._atmosphere = null;\n  }\n\n  initialize() {\n    this.view._stage.addRenderPlugin(O, this);\n  }\n\n  destroy() {\n    this._pendingAtmosphere = r(this._pendingAtmosphere), null != this.view?._stage && this.view._stage.removeRenderPlugin(this), this._handles = r(this._handles), this._set(\"view\", null);\n  }\n\n  get atmosphereType() {\n    return n(this._pendingAtmosphere) ? this._pendingAtmosphere.type : n(this._atmosphere) ? this._atmosphere.type : \"none\";\n  }\n\n  get canRender() {\n    return !!this.view.basemapTerrain?.renderer.canRender || \"global\" !== this.view.viewingMode;\n  }\n\n  get needsLinearDepth() {\n    return \"realistic\" === this._selectAtmosphereType();\n  }\n\n  updateAnimation(e) {\n    return !!n(this._precipitation) && this._precipitation.update(e);\n  }\n\n  get updating() {\n    return n(this._pendingAtmosphere) || n(this._stars) && this._stars.updating || n(this._clouds) && this._clouds.running;\n  }\n\n  get weatherVisible() {\n    return m(this.view.state.camera.eye) - c(this.view.spatialReference).radius <= j;\n  }\n\n  get _stars() {\n    const e = this.view,\n          t = e.environment?.starsEnabled ?? !1,\n          s = this._get(\"_stars\");\n\n    return !t || o(this._context) ? (r(s), null) : n(s) ? s : new T({\n      view: e,\n      requestRender: () => this._setNeedsRender()\n    });\n  }\n\n  get _precipitation() {\n    const e = this._get(\"_precipitation\");\n\n    if (!this._precipitationEnabled || o(this._context)) return r(e), null;\n    const t = this.view,\n          s = this._context;\n    return n(e) && e.context === s ? e : (r(e), new E({\n      context: s,\n      view: t\n    }));\n  }\n\n  get _clouds() {\n    const e = this._get(\"_clouds\");\n\n    if (!this.weatherEnabled || o(this._context)) return r(e), null;\n    if (n(e)) return e;\n    const t = this.view,\n          s = this._context;\n    return r(e), new f({\n      context: s,\n      view: t,\n      requestRender: () => this._setNeedsRender()\n    });\n  }\n\n  get _cloudsComposition() {\n    const e = this._get(\"_cloudsComposition\");\n\n    if (!this.weatherEnabled || o(this._context)) return r(e), null;\n    const t = this.view.state.viewingMode,\n          s = this._context.renderContext.rctx,\n          i = c(this.view.spatialReference).radius;\n    return n(e) && e.viewingMode === t && e.planetRadius === i ? e : (r(e), new y({\n      rctx: s,\n      viewingMode: t,\n      planetRadius: i,\n      requestRender: () => this._setNeedsRender()\n    }));\n  }\n\n  get _fog() {\n    const e = this._get(\"_fog\");\n\n    if (!this.weatherEnabled || o(this._context)) return r(e), null;\n    if (n(e)) return e;\n    const t = this.view,\n          s = this._context;\n    return r(e), new R({\n      context: s,\n      view: t\n    });\n  }\n\n  get weatherEnabled() {\n    return !!this.view?.environmentManager?.weatherEnabled;\n  }\n\n  get _precipitationEnabled() {\n    return this.weatherEnabled && (\"rainy\" === this.view.environment.weather.type || \"snowy\" === this.view.environment.weather.type);\n  }\n\n  initializeRenderContext(e = null) {\n    this._context = e, this._handles.add([h(() => this.view?.basemapTerrain, () => this._updateBasemapTerrain(), a), p(() => ({\n      viewingMode: this.view.viewingMode,\n      atmosphereEnabled: this.view.environment.atmosphereEnabled,\n      atmosphereQuality: this.view.environment.atmosphere.quality\n    }), () => this._updateAtmosphere(), a), p(() => this._stars, () => this._setNeedsRender()), p(() => this._clouds, () => this._updateWeather(this._weatherUpdateParameters), d), p(() => this._precipitation, () => this._setNeedsRender()), p(() => this._fog, () => this._updateFog(this._weatherUpdateParameters), d), p(() => this._weatherUpdateParameters, e => {\n      this._updateWeather(e), this._updateFog(e);\n    }, a)]);\n  }\n\n  uninitializeRenderContext() {\n    this._context = null, this._atmosphere = r(this._atmosphere), this._set(\"_stars\", r(this._stars)), this._set(\"_precipitation\", r(this._precipitation)), this._set(\"_clouds\", r(this._clouds)), this._set(\"_cloudsComposition\", r(this._cloudsComposition)), this._set(\"_fog\", r(this._fog));\n  }\n\n  prepareRender(e) {\n    e.bindParameters.clouds.data = v(this._clouds) ? this._clouds : null;\n  }\n\n  render(e) {\n    if (e.pass === x.MATERIAL) switch (e.bindParameters.slot) {\n      case C.POSTPROCESSING_ENVIRONMENT_OPAQUE:\n        n(this._stars) && this._stars.render(e), n(this._atmosphere) && this._atmosphere.canRender && (this._atmosphere.render(e), n(this._cloudsComposition) && n(e.bindParameters.clouds.data) && (this.weatherVisible && n(this._clouds) && this._clouds.ensureWeatherTile(), this._cloudsComposition.render(e, n(this.view.animation))));\n        break;\n\n      case C.POSTPROCESSING_ENVIRONMENT_TRANSPARENT:\n        if (n(this._atmosphere) && this._atmosphere.canRender) {\n          const t = this.weatherEnabled ? this.view.environment.weather.type : \"disabled\";\n\n          if (this._atmosphere.renderHaze(e, \"rainy\" === t), n(this._fog)) {\n            const s = \"foggy\" === t || \"rainy\" === t || \"snowy\" === t;\n            (s || \"realistic\" !== this._selectAtmosphereType()) && this._fog.render(e, s, \"rainy\" === t);\n          }\n\n          if (n(this._precipitation)) {\n            const t = this.view.environment.weather;\n            \"rainy\" !== t.type && \"snowy\" !== t.type || this._precipitation.render(e, t.precipitation, t.type);\n          }\n        }\n\n    }\n  }\n\n  get _weatherUpdateParameters() {\n    const e = this.weatherEnabled ? this.view.environment.weather : null;\n    return o(e) ? null : \"rainy\" === e.type || \"snowy\" === e.type ? {\n      type: e.type,\n      weatherAdjustment: e.cloudCover,\n      effect: e.precipitation\n    } : {\n      type: e.type,\n      weatherAdjustment: \"foggy\" === e.type ? e.fogStrength : e.cloudCover\n    };\n  }\n\n  _updateWeather(e) {\n    o(e) || o(this._clouds) || (this._clouds.applyPreset(A[e.type], e.weatherAdjustment), this._setNeedsRender());\n  }\n\n  _setNeedsRender() {\n    n(this._context) && this._context.requestRender();\n  }\n\n  _updateFog(e) {\n    if (!o(this._fog) && !o(e)) switch (e.type) {\n      case \"foggy\":\n        this._fog.strength = i(3e-5, .005, e.weatherAdjustment ** 3), this._setNeedsRender();\n        break;\n\n      case \"rainy\":\n      case \"snowy\":\n        this._fog.strength = i(4e-6, 2e-4, e.effect ** 3), this._setNeedsRender();\n        break;\n\n      default:\n        this._fog.strength = 4e-6, this._setNeedsRender();\n    }\n  }\n\n  _updateAtmosphere() {\n    const e = this._selectAtmosphereType();\n\n    if (this.atmosphereType === e) return;\n    n(this._pendingAtmosphere) && (this._pendingAtmosphere !== this._atmosphere && this._pendingAtmosphere.destroy(), this._pendingAtmosphere = null);\n\n    const t = this._getAtmosphereClass();\n\n    if (!t) return n(this._atmosphere) && (this._atmosphere.destroy(), this._atmosphere = null, this._setNeedsRender()), void this._updateBasemapTerrain();\n    const s = new t(this.view);\n    n(this._context) && s.initializeRenderContext(this._context), o(this._atmosphere) && (this._atmosphere = s, this._setNeedsRender()), this._pendingAtmosphere = s, s.when().then(() => {\n      n(this._atmosphere) && this._pendingAtmosphere && this._pendingAtmosphere !== this._atmosphere && (this._atmosphere.destroy(), this._atmosphere = this._pendingAtmosphere), this._pendingAtmosphere = null, this._setNeedsRender(), this._updateBasemapTerrain();\n    }).catch(() => {\n      this._pendingAtmosphere === s && (this._pendingAtmosphere = null);\n    });\n  }\n\n  _getAtmosphereClass() {\n    switch (this._selectAtmosphereType()) {\n      case \"none\":\n        return null;\n\n      case \"realistic\":\n        return w;\n\n      case \"panoramic\":\n        return b;\n\n      case \"simple\":\n        return N;\n\n      default:\n        return;\n    }\n  }\n\n  _selectAtmosphereType() {\n    const e = this.view.get(\"environment.atmosphereEnabled\"),\n          t = this.view.get(\"environment.atmosphere.quality\"),\n          s = this.view.viewingMode;\n    return !e || null == t || u(this.view.spatialReference) ? \"none\" : \"local\" === s ? \"panoramic\" : \"high\" === t && n(this._context) && w.isSupported(this._context) && g(this.view.spatialReference) ? \"realistic\" : \"simple\";\n  }\n\n  _updateBasemapTerrain() {\n    this.view.basemapTerrain && (this.view.basemapTerrain.velvetOverground = n(this._atmosphere) && \"simple\" === this.atmosphereType);\n  }\n\n  get test() {\n    return {\n      atmosphere: this._atmosphere,\n      clouds: this._clouds,\n      selectAtmosphereType: () => this._selectAtmosphereType(),\n      stubGetAtmosphereClass: e => {\n        S = P.prototype._getAtmosphereClass, P.prototype._getAtmosphereClass = e;\n      },\n      restoreGetAtmosphereClass: () => {\n        P.prototype._getAtmosphereClass = S;\n      }\n    };\n  }\n\n};\ne([l({\n  constructOnly: !0\n})], M.prototype, \"view\", void 0), e([l({\n  type: Boolean,\n  readOnly: !0\n})], M.prototype, \"updating\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"weatherVisible\", null), e([l()], M.prototype, \"_context\", void 0), e([l()], M.prototype, \"_pendingAtmosphere\", void 0), e([l({\n  readOnly: !0\n})], M.prototype, \"_stars\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_precipitation\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_clouds\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_cloudsComposition\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_fog\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"weatherEnabled\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_precipitationEnabled\", null), e([l({\n  readOnly: !0\n})], M.prototype, \"_weatherUpdateParameters\", null), M = P = e([_(\"esri.views.3d.environment.EnvironmentRenderer\")], M);\nexport { M as EnvironmentRenderer };","map":{"version":3,"names":["_","e","t","s","lerp","i","destroyMaybe","r","isSome","n","isNone","o","when","h","syncAndInitial","a","watch","p","initial","d","property","l","subclass","m","getReferenceEllipsoid","c","isMoon","u","isEarth","g","ChapmanAtmosphere","w","CloudsComposition","y","isReadyCloudsData","v","CloudsGenerator","f","cloudPresets","A","Fog","R","PanoramicAtmosphere","b","Precipitation","E","N","Stars","T","weatherHeightLimit","j","RenderPass","x","RenderSlot","C","P","O","POSTPROCESSING_ENVIRONMENT_OPAQUE","POSTPROCESSING_ENVIRONMENT_TRANSPARENT","S","M","constructor","_handles","_context","_pendingAtmosphere","_atmosphere","initialize","view","_stage","addRenderPlugin","destroy","removeRenderPlugin","_set","atmosphereType","type","canRender","basemapTerrain","renderer","viewingMode","needsLinearDepth","_selectAtmosphereType","updateAnimation","_precipitation","update","updating","_stars","_clouds","running","weatherVisible","state","camera","eye","spatialReference","radius","environment","starsEnabled","_get","requestRender","_setNeedsRender","_precipitationEnabled","context","weatherEnabled","_cloudsComposition","renderContext","rctx","planetRadius","_fog","environmentManager","weather","initializeRenderContext","add","_updateBasemapTerrain","atmosphereEnabled","atmosphereQuality","atmosphere","quality","_updateAtmosphere","_updateWeather","_weatherUpdateParameters","_updateFog","uninitializeRenderContext","prepareRender","bindParameters","clouds","data","render","pass","MATERIAL","slot","ensureWeatherTile","animation","renderHaze","precipitation","weatherAdjustment","cloudCover","effect","fogStrength","applyPreset","strength","_getAtmosphereClass","then","catch","get","isSupported","velvetOverground","test","selectAtmosphereType","stubGetAtmosphereClass","prototype","restoreGetAtmosphereClass","constructOnly","Boolean","readOnly","EnvironmentRenderer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/views/3d/environment/EnvironmentRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import\"../../../core/has.js\";import s from\"../../../core/Handles.js\";import{lerp as i}from\"../../../core/mathUtils.js\";import{destroyMaybe as r,isSome as n,isNone as o}from\"../../../core/maybe.js\";import{when as h,syncAndInitial as a,watch as p,initial as d}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as _}from\"../../../core/accessorSupport/decorators/subclass.js\";import{l as m}from\"../../../chunks/vec3.js\";import{getReferenceEllipsoid as c}from\"../../../geometry/projectionEllipsoid.js\";import{isMoon as u,isEarth as g}from\"../../../geometry/support/spatialReferenceUtils.js\";import{ChapmanAtmosphere as w}from\"./ChapmanAtmosphere.js\";import{CloudsComposition as y}from\"./CloudsComposition.js\";import{isReadyCloudsData as v}from\"./CloudsData.js\";import{CloudsGenerator as f}from\"./CloudsGenerator.js\";import{cloudPresets as A}from\"./CloudsPresets.js\";import{Fog as R}from\"./Fog.js\";import{PanoramicAtmosphere as b}from\"./PanoramicAtmosphere.js\";import{Precipitation as E}from\"./Precipitation.js\";import N from\"./SimpleAtmosphere.js\";import{Stars as T}from\"./Stars.js\";import{weatherHeightLimit as j}from\"./weather.js\";import{RenderPass as x}from\"../webgl-engine/lib/RenderPass.js\";import{RenderSlot as C}from\"../webgl-engine/lib/RenderSlot.js\";var P;const O=[C.POSTPROCESSING_ENVIRONMENT_OPAQUE,C.POSTPROCESSING_ENVIRONMENT_TRANSPARENT];let S,M=P=class extends t{constructor(e){super(e),this._handles=new s,this._context=null,this._pendingAtmosphere=null,this._atmosphere=null}initialize(){this.view._stage.addRenderPlugin(O,this)}destroy(){this._pendingAtmosphere=r(this._pendingAtmosphere),null!=this.view?._stage&&this.view._stage.removeRenderPlugin(this),this._handles=r(this._handles),this._set(\"view\",null)}get atmosphereType(){return n(this._pendingAtmosphere)?this._pendingAtmosphere.type:n(this._atmosphere)?this._atmosphere.type:\"none\"}get canRender(){return!!this.view.basemapTerrain?.renderer.canRender||\"global\"!==this.view.viewingMode}get needsLinearDepth(){return\"realistic\"===this._selectAtmosphereType()}updateAnimation(e){return!!n(this._precipitation)&&this._precipitation.update(e)}get updating(){return n(this._pendingAtmosphere)||n(this._stars)&&this._stars.updating||n(this._clouds)&&this._clouds.running}get weatherVisible(){return m(this.view.state.camera.eye)-c(this.view.spatialReference).radius<=j}get _stars(){const e=this.view,t=e.environment?.starsEnabled??!1,s=this._get(\"_stars\");return!t||o(this._context)?(r(s),null):n(s)?s:new T({view:e,requestRender:()=>this._setNeedsRender()})}get _precipitation(){const e=this._get(\"_precipitation\");if(!this._precipitationEnabled||o(this._context))return r(e),null;const t=this.view,s=this._context;return n(e)&&e.context===s?e:(r(e),new E({context:s,view:t}))}get _clouds(){const e=this._get(\"_clouds\");if(!this.weatherEnabled||o(this._context))return r(e),null;if(n(e))return e;const t=this.view,s=this._context;return r(e),new f({context:s,view:t,requestRender:()=>this._setNeedsRender()})}get _cloudsComposition(){const e=this._get(\"_cloudsComposition\");if(!this.weatherEnabled||o(this._context))return r(e),null;const t=this.view.state.viewingMode,s=this._context.renderContext.rctx,i=c(this.view.spatialReference).radius;return n(e)&&e.viewingMode===t&&e.planetRadius===i?e:(r(e),new y({rctx:s,viewingMode:t,planetRadius:i,requestRender:()=>this._setNeedsRender()}))}get _fog(){const e=this._get(\"_fog\");if(!this.weatherEnabled||o(this._context))return r(e),null;if(n(e))return e;const t=this.view,s=this._context;return r(e),new R({context:s,view:t})}get weatherEnabled(){return!!this.view?.environmentManager?.weatherEnabled}get _precipitationEnabled(){return this.weatherEnabled&&(\"rainy\"===this.view.environment.weather.type||\"snowy\"===this.view.environment.weather.type)}initializeRenderContext(e=null){this._context=e,this._handles.add([h((()=>this.view?.basemapTerrain),(()=>this._updateBasemapTerrain()),a),p((()=>({viewingMode:this.view.viewingMode,atmosphereEnabled:this.view.environment.atmosphereEnabled,atmosphereQuality:this.view.environment.atmosphere.quality})),(()=>this._updateAtmosphere()),a),p((()=>this._stars),(()=>this._setNeedsRender())),p((()=>this._clouds),(()=>this._updateWeather(this._weatherUpdateParameters)),d),p((()=>this._precipitation),(()=>this._setNeedsRender())),p((()=>this._fog),(()=>this._updateFog(this._weatherUpdateParameters)),d),p((()=>this._weatherUpdateParameters),(e=>{this._updateWeather(e),this._updateFog(e)}),a)])}uninitializeRenderContext(){this._context=null,this._atmosphere=r(this._atmosphere),this._set(\"_stars\",r(this._stars)),this._set(\"_precipitation\",r(this._precipitation)),this._set(\"_clouds\",r(this._clouds)),this._set(\"_cloudsComposition\",r(this._cloudsComposition)),this._set(\"_fog\",r(this._fog))}prepareRender(e){e.bindParameters.clouds.data=v(this._clouds)?this._clouds:null}render(e){if(e.pass===x.MATERIAL)switch(e.bindParameters.slot){case C.POSTPROCESSING_ENVIRONMENT_OPAQUE:n(this._stars)&&this._stars.render(e),n(this._atmosphere)&&this._atmosphere.canRender&&(this._atmosphere.render(e),n(this._cloudsComposition)&&n(e.bindParameters.clouds.data)&&(this.weatherVisible&&n(this._clouds)&&this._clouds.ensureWeatherTile(),this._cloudsComposition.render(e,n(this.view.animation))));break;case C.POSTPROCESSING_ENVIRONMENT_TRANSPARENT:if(n(this._atmosphere)&&this._atmosphere.canRender){const t=this.weatherEnabled?this.view.environment.weather.type:\"disabled\";if(this._atmosphere.renderHaze(e,\"rainy\"===t),n(this._fog)){const s=\"foggy\"===t||\"rainy\"===t||\"snowy\"===t;(s||\"realistic\"!==this._selectAtmosphereType())&&this._fog.render(e,s,\"rainy\"===t)}if(n(this._precipitation)){const t=this.view.environment.weather;\"rainy\"!==t.type&&\"snowy\"!==t.type||this._precipitation.render(e,t.precipitation,t.type)}}}}get _weatherUpdateParameters(){const e=this.weatherEnabled?this.view.environment.weather:null;return o(e)?null:\"rainy\"===e.type||\"snowy\"===e.type?{type:e.type,weatherAdjustment:e.cloudCover,effect:e.precipitation}:{type:e.type,weatherAdjustment:\"foggy\"===e.type?e.fogStrength:e.cloudCover}}_updateWeather(e){o(e)||o(this._clouds)||(this._clouds.applyPreset(A[e.type],e.weatherAdjustment),this._setNeedsRender())}_setNeedsRender(){n(this._context)&&this._context.requestRender()}_updateFog(e){if(!o(this._fog)&&!o(e))switch(e.type){case\"foggy\":this._fog.strength=i(3e-5,.005,e.weatherAdjustment**3),this._setNeedsRender();break;case\"rainy\":case\"snowy\":this._fog.strength=i(4e-6,2e-4,e.effect**3),this._setNeedsRender();break;default:this._fog.strength=4e-6,this._setNeedsRender()}}_updateAtmosphere(){const e=this._selectAtmosphereType();if(this.atmosphereType===e)return;n(this._pendingAtmosphere)&&(this._pendingAtmosphere!==this._atmosphere&&this._pendingAtmosphere.destroy(),this._pendingAtmosphere=null);const t=this._getAtmosphereClass();if(!t)return n(this._atmosphere)&&(this._atmosphere.destroy(),this._atmosphere=null,this._setNeedsRender()),void this._updateBasemapTerrain();const s=new t(this.view);n(this._context)&&s.initializeRenderContext(this._context),o(this._atmosphere)&&(this._atmosphere=s,this._setNeedsRender()),this._pendingAtmosphere=s,s.when().then((()=>{n(this._atmosphere)&&this._pendingAtmosphere&&this._pendingAtmosphere!==this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=this._pendingAtmosphere),this._pendingAtmosphere=null,this._setNeedsRender(),this._updateBasemapTerrain()})).catch((()=>{this._pendingAtmosphere===s&&(this._pendingAtmosphere=null)}))}_getAtmosphereClass(){switch(this._selectAtmosphereType()){case\"none\":return null;case\"realistic\":return w;case\"panoramic\":return b;case\"simple\":return N;default:return}}_selectAtmosphereType(){const e=this.view.get(\"environment.atmosphereEnabled\"),t=this.view.get(\"environment.atmosphere.quality\"),s=this.view.viewingMode;return!e||null==t||u(this.view.spatialReference)?\"none\":\"local\"===s?\"panoramic\":\"high\"===t&&n(this._context)&&w.isSupported(this._context)&&g(this.view.spatialReference)?\"realistic\":\"simple\"}_updateBasemapTerrain(){this.view.basemapTerrain&&(this.view.basemapTerrain.velvetOverground=n(this._atmosphere)&&\"simple\"===this.atmosphereType)}get test(){return{atmosphere:this._atmosphere,clouds:this._clouds,selectAtmosphereType:()=>this._selectAtmosphereType(),stubGetAtmosphereClass:e=>{S=P.prototype._getAtmosphereClass,P.prototype._getAtmosphereClass=e},restoreGetAtmosphereClass:()=>{P.prototype._getAtmosphereClass=S}}}};e([l({constructOnly:!0})],M.prototype,\"view\",void 0),e([l({type:Boolean,readOnly:!0})],M.prototype,\"updating\",null),e([l({readOnly:!0})],M.prototype,\"weatherVisible\",null),e([l()],M.prototype,\"_context\",void 0),e([l()],M.prototype,\"_pendingAtmosphere\",void 0),e([l({readOnly:!0})],M.prototype,\"_stars\",null),e([l({readOnly:!0})],M.prototype,\"_precipitation\",null),e([l({readOnly:!0})],M.prototype,\"_clouds\",null),e([l({readOnly:!0})],M.prototype,\"_cloudsComposition\",null),e([l({readOnly:!0})],M.prototype,\"_fog\",null),e([l({readOnly:!0})],M.prototype,\"weatherEnabled\",null),e([l({readOnly:!0})],M.prototype,\"_precipitationEnabled\",null),e([l({readOnly:!0})],M.prototype,\"_weatherUpdateParameters\",null),M=P=e([_(\"esri.views.3d.environment.EnvironmentRenderer\")],M);export{M as EnvironmentRenderer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}