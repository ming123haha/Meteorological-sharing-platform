{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport { eachAlways as e } from \"../../../../../core/promiseUtils.js\";\nimport { BufferView as i } from \"./bufferview.js\";\n\nclass r {\n  constructor(e) {\n    this.gltf = e, this.bufferViews = [], this.isFinalized = !1, e.buffers || (e.buffers = []), this.index = e.buffers.length;\n    const i = {\n      byteLength: -1\n    };\n    e.buffers.push(i), this.buffer = i;\n  }\n\n  addBufferView(e, r, t) {\n    if (this.finalizePromise) throw new Error(\"Cannot add buffer view after fiinalizing buffer\");\n    const f = new i(this, this.gltf, e, r, t);\n    return this.bufferViews.push(f), f;\n  }\n\n  getByteOffset(e) {\n    let i = 0;\n\n    for (const r of this.bufferViews) {\n      if (r === e) return i;\n      i += r.byteSize;\n    }\n\n    throw new Error(\"Given bufferView was not present in this buffer\");\n  }\n\n  getViewFinalizePromises(e) {\n    const i = [];\n\n    for (const r of this.bufferViews) {\n      if (e && r === e) return i;\n      i.push(r.finalized);\n    }\n\n    return i;\n  }\n\n  getArrayBuffer() {\n    if (!this.isFinalized) throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");\n\n    const e = this._getTotalSize(),\n          i = new ArrayBuffer(e);\n\n    let r = 0;\n\n    for (const t of this.bufferViews) t.writeOutToBuffer(i, r), r += t.byteSize;\n\n    return i;\n  }\n\n  finalize() {\n    if (this.finalizePromise) throw new Error(`Buffer ${this.index} was already finalized`);\n    return this.finalizePromise = new Promise(i => {\n      i(e(this.getViewFinalizePromises()));\n    }).then(() => {\n      this.isFinalized = !0;\n      const e = this.getArrayBuffer();\n      this.buffer.byteLength = e.byteLength, this.buffer.uri = e;\n    }), this.gltf.extras.promises.push(this.finalizePromise), this.finalizePromise;\n  }\n\n  _getTotalSize() {\n    let e = 0;\n\n    for (const i of this.bufferViews) e += i.byteSize;\n\n    return e;\n  }\n\n}\n\nexport { r as Buffer };","map":{"version":3,"names":["eachAlways","e","BufferView","i","r","constructor","gltf","bufferViews","isFinalized","buffers","index","length","byteLength","push","buffer","addBufferView","t","finalizePromise","Error","f","getByteOffset","byteSize","getViewFinalizePromises","finalized","getArrayBuffer","_getTotalSize","ArrayBuffer","writeOutToBuffer","finalize","Promise","then","uri","extras","promises","Buffer"],"sources":["C:/Users/hp/Desktop/eco-friendly atmosphere/Atmosphere/eco-friendly/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/buffer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{eachAlways as e}from\"../../../../../core/promiseUtils.js\";import{BufferView as i}from\"./bufferview.js\";class r{constructor(e){this.gltf=e,this.bufferViews=[],this.isFinalized=!1,e.buffers||(e.buffers=[]),this.index=e.buffers.length;const i={byteLength:-1};e.buffers.push(i),this.buffer=i}addBufferView(e,r,t){if(this.finalizePromise)throw new Error(\"Cannot add buffer view after fiinalizing buffer\");const f=new i(this,this.gltf,e,r,t);return this.bufferViews.push(f),f}getByteOffset(e){let i=0;for(const r of this.bufferViews){if(r===e)return i;i+=r.byteSize}throw new Error(\"Given bufferView was not present in this buffer\")}getViewFinalizePromises(e){const i=[];for(const r of this.bufferViews){if(e&&r===e)return i;i.push(r.finalized)}return i}getArrayBuffer(){if(!this.isFinalized)throw new Error(\"Cannot get ArrayBuffer from Buffer before it is finalized\");const e=this._getTotalSize(),i=new ArrayBuffer(e);let r=0;for(const t of this.bufferViews)t.writeOutToBuffer(i,r),r+=t.byteSize;return i}finalize(){if(this.finalizePromise)throw new Error(`Buffer ${this.index} was already finalized`);return this.finalizePromise=new Promise((i=>{i(e(this.getViewFinalizePromises()))})).then((()=>{this.isFinalized=!0;const e=this.getArrayBuffer();this.buffer.byteLength=e.byteLength,this.buffer.uri=e})),this.gltf.extras.promises.push(this.finalizePromise),this.finalizePromise}_getTotalSize(){let e=0;for(const i of this.bufferViews)e+=i.byteSize;return e}}export{r as Buffer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}