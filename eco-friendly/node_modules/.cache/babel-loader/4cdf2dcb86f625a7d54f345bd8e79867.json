{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport r from \"../Error.js\";\nimport has from \"../has.js\";\nimport { throwIfAborted as t } from \"../promiseUtils.js\";\nimport e from \"./Connection.js\";\nexport { default as Connection } from \"./Connection.js\";\nimport o from \"./RemoteClient.js\";\nexport { default as RemoteClient } from \"./RemoteClient.js\";\nimport n from \"./WorkerOwner.js\";\nlet i = has(\"esri-workers-debug\") ? 1 : has(\"esri-mobile\") ? Math.min(navigator.hardwareConcurrency - 1, 3) : has(\"host-browser\") ? navigator.hardwareConcurrency - 1 : 0;\ni || (i = has(\"safari\") && has(\"mac\") || has(\"trident\") ? 7 : 2);\nlet a = 0;\nconst s = [];\n\nfunction l() {\n  d();\n}\n\nfunction c(r, t) {\n  return m(r, {\n    client: t\n  });\n}\n\nasync function m(r, t) {\n  const o = new e();\n  return await o.open(r, t), o;\n}\n\nasync function u(e, n = {}) {\n  if (\"string\" != typeof e) throw new r(\"workers:undefined-module\", \"modulePath is missing\");\n  let l = n.strategy || \"distributed\";\n\n  if (has(\"host-webworker\") && !has(\"esri-workers\") && (l = \"local\"), \"local\" === l) {\n    let r = await o.loadWorker(e);\n    r || (r = await import(\n    /* @vite-ignore */\n\n    /* webpackIgnore: true */\n    e)), t(n.signal);\n    const i = n.client || r;\n    return m([o.connect(r)], { ...n,\n      client: i\n    });\n  }\n\n  if (await d(), t(n.signal), \"dedicated\" === l) {\n    const r = a++ % i;\n    return m([await s[r].open(e, n)], n);\n  }\n\n  if (n.maxNumWorkers && n.maxNumWorkers > 0) {\n    const r = Math.min(n.maxNumWorkers, i);\n\n    if (r < i) {\n      const t = new Array(r);\n\n      for (let o = 0; o < r; ++o) {\n        const r = a++ % i;\n        t[o] = s[r].open(e, n);\n      }\n\n      return m(t, n);\n    }\n  }\n\n  return m(s.map(r => r.open(e, n)), n);\n}\n\nfunction f() {\n  p && (w.abort(), p = null);\n\n  for (let r = 0; r < s.length; r++) s[r] && s[r].terminate();\n\n  s.length = 0;\n}\n\nlet w,\n    p = null;\n\nasync function d() {\n  if (p) return p;\n  w = new AbortController();\n  const r = [];\n\n  for (let t = 0; t < i; t++) {\n    const e = n.create(t).then(r => (s[t] = r, r));\n    r.push(e);\n  }\n\n  return p = Promise.all(r), p;\n}\n\nexport { l as initialize, u as open, c as openWithPorts, f as terminate };","map":{"version":3,"names":["r","has","throwIfAborted","t","e","default","Connection","o","RemoteClient","n","i","Math","min","navigator","hardwareConcurrency","a","s","l","d","c","m","client","open","u","strategy","loadWorker","signal","connect","maxNumWorkers","Array","map","f","p","w","abort","length","terminate","AbortController","create","then","push","Promise","all","initialize","openWithPorts"],"sources":["E:/各个学科/论文/毕业论文/Atmosphere/eco-friendly/node_modules/@arcgis/core/core/workers/workers.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport r from\"../Error.js\";import has from\"../has.js\";import{throwIfAborted as t}from\"../promiseUtils.js\";import e from\"./Connection.js\";export{default as Connection}from\"./Connection.js\";import o from\"./RemoteClient.js\";export{default as RemoteClient}from\"./RemoteClient.js\";import n from\"./WorkerOwner.js\";let i=has(\"esri-workers-debug\")?1:has(\"esri-mobile\")?Math.min(navigator.hardwareConcurrency-1,3):has(\"host-browser\")?navigator.hardwareConcurrency-1:0;i||(i=has(\"safari\")&&has(\"mac\")||has(\"trident\")?7:2);let a=0;const s=[];function l(){d()}function c(r,t){return m(r,{client:t})}async function m(r,t){const o=new e;return await o.open(r,t),o}async function u(e,n={}){if(\"string\"!=typeof e)throw new r(\"workers:undefined-module\",\"modulePath is missing\");let l=n.strategy||\"distributed\";if(has(\"host-webworker\")&&!has(\"esri-workers\")&&(l=\"local\"),\"local\"===l){let r=await o.loadWorker(e);r||(r=await import(/* @vite-ignore */ /* webpackIgnore: true */e)),t(n.signal);const i=n.client||r;return m([o.connect(r)],{...n,client:i})}if(await d(),t(n.signal),\"dedicated\"===l){const r=a++%i;return m([await s[r].open(e,n)],n)}if(n.maxNumWorkers&&n.maxNumWorkers>0){const r=Math.min(n.maxNumWorkers,i);if(r<i){const t=new Array(r);for(let o=0;o<r;++o){const r=a++%i;t[o]=s[r].open(e,n)}return m(t,n)}}return m(s.map((r=>r.open(e,n))),n)}function f(){p&&(w.abort(),p=null);for(let r=0;r<s.length;r++)s[r]&&s[r].terminate();s.length=0}let w,p=null;async function d(){if(p)return p;w=new AbortController;const r=[];for(let t=0;t<i;t++){const e=n.create(t).then((r=>(s[t]=r,r)));r.push(e)}return p=Promise.all(r),p}export{l as initialize,u as open,c as openWithPorts,f as terminate};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,aAAb;AAA2B,OAAOC,GAAP,MAAe,WAAf;AAA2B,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,oBAA/B;AAAoD,OAAOC,CAAP,MAAa,iBAAb;AAA+B,SAAOC,OAAO,IAAIC,UAAlB,QAAiC,iBAAjC;AAAmD,OAAOC,CAAP,MAAa,mBAAb;AAAiC,SAAOF,OAAO,IAAIG,YAAlB,QAAmC,mBAAnC;AAAuD,OAAOC,CAAP,MAAa,kBAAb;AAAgC,IAAIC,CAAC,GAACT,GAAG,CAAC,oBAAD,CAAH,GAA0B,CAA1B,GAA4BA,GAAG,CAAC,aAAD,CAAH,GAAmBU,IAAI,CAACC,GAAL,CAASC,SAAS,CAACC,mBAAV,GAA8B,CAAvC,EAAyC,CAAzC,CAAnB,GAA+Db,GAAG,CAAC,cAAD,CAAH,GAAoBY,SAAS,CAACC,mBAAV,GAA8B,CAAlD,GAAoD,CAArJ;AAAuJJ,CAAC,KAAGA,CAAC,GAACT,GAAG,CAAC,QAAD,CAAH,IAAeA,GAAG,CAAC,KAAD,CAAlB,IAA2BA,GAAG,CAAC,SAAD,CAA9B,GAA0C,CAA1C,GAA4C,CAAjD,CAAD;AAAqD,IAAIc,CAAC,GAAC,CAAN;AAAQ,MAAMC,CAAC,GAAC,EAAR;;AAAW,SAASC,CAAT,GAAY;EAACC,CAAC;AAAG;;AAAA,SAASC,CAAT,CAAWnB,CAAX,EAAaG,CAAb,EAAe;EAAC,OAAOiB,CAAC,CAACpB,CAAD,EAAG;IAACqB,MAAM,EAAClB;EAAR,CAAH,CAAR;AAAuB;;AAAA,eAAeiB,CAAf,CAAiBpB,CAAjB,EAAmBG,CAAnB,EAAqB;EAAC,MAAMI,CAAC,GAAC,IAAIH,CAAJ,EAAR;EAAc,OAAO,MAAMG,CAAC,CAACe,IAAF,CAAOtB,CAAP,EAASG,CAAT,CAAN,EAAkBI,CAAzB;AAA2B;;AAAA,eAAegB,CAAf,CAAiBnB,CAAjB,EAAmBK,CAAC,GAAC,EAArB,EAAwB;EAAC,IAAG,YAAU,OAAOL,CAApB,EAAsB,MAAM,IAAIJ,CAAJ,CAAM,0BAAN,EAAiC,uBAAjC,CAAN;EAAgE,IAAIiB,CAAC,GAACR,CAAC,CAACe,QAAF,IAAY,aAAlB;;EAAgC,IAAGvB,GAAG,CAAC,gBAAD,CAAH,IAAuB,CAACA,GAAG,CAAC,cAAD,CAA3B,KAA8CgB,CAAC,GAAC,OAAhD,GAAyD,YAAUA,CAAtE,EAAwE;IAAC,IAAIjB,CAAC,GAAC,MAAMO,CAAC,CAACkB,UAAF,CAAarB,CAAb,CAAZ;IAA4BJ,CAAC,KAAGA,CAAC,GAAC,MAAM;IAAO;;IAAmB;IAAyBI,CAAnD,CAAX,CAAD,EAAmED,CAAC,CAACM,CAAC,CAACiB,MAAH,CAApE;IAA+E,MAAMhB,CAAC,GAACD,CAAC,CAACY,MAAF,IAAUrB,CAAlB;IAAoB,OAAOoB,CAAC,CAAC,CAACb,CAAC,CAACoB,OAAF,CAAU3B,CAAV,CAAD,CAAD,EAAgB,EAAC,GAAGS,CAAJ;MAAMY,MAAM,EAACX;IAAb,CAAhB,CAAR;EAAyC;;EAAA,IAAG,MAAMQ,CAAC,EAAP,EAAUf,CAAC,CAACM,CAAC,CAACiB,MAAH,CAAX,EAAsB,gBAAcT,CAAvC,EAAyC;IAAC,MAAMjB,CAAC,GAACe,CAAC,KAAGL,CAAZ;IAAc,OAAOU,CAAC,CAAC,CAAC,MAAMJ,CAAC,CAAChB,CAAD,CAAD,CAAKsB,IAAL,CAAUlB,CAAV,EAAYK,CAAZ,CAAP,CAAD,EAAwBA,CAAxB,CAAR;EAAmC;;EAAA,IAAGA,CAAC,CAACmB,aAAF,IAAiBnB,CAAC,CAACmB,aAAF,GAAgB,CAApC,EAAsC;IAAC,MAAM5B,CAAC,GAACW,IAAI,CAACC,GAAL,CAASH,CAAC,CAACmB,aAAX,EAAyBlB,CAAzB,CAAR;;IAAoC,IAAGV,CAAC,GAACU,CAAL,EAAO;MAAC,MAAMP,CAAC,GAAC,IAAI0B,KAAJ,CAAU7B,CAAV,CAAR;;MAAqB,KAAI,IAAIO,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACP,CAAd,EAAgB,EAAEO,CAAlB,EAAoB;QAAC,MAAMP,CAAC,GAACe,CAAC,KAAGL,CAAZ;QAAcP,CAAC,CAACI,CAAD,CAAD,GAAKS,CAAC,CAAChB,CAAD,CAAD,CAAKsB,IAAL,CAAUlB,CAAV,EAAYK,CAAZ,CAAL;MAAoB;;MAAA,OAAOW,CAAC,CAACjB,CAAD,EAAGM,CAAH,CAAR;IAAc;EAAC;;EAAA,OAAOW,CAAC,CAACJ,CAAC,CAACc,GAAF,CAAO9B,CAAC,IAAEA,CAAC,CAACsB,IAAF,CAAOlB,CAAP,EAASK,CAAT,CAAV,CAAD,EAAyBA,CAAzB,CAAR;AAAoC;;AAAA,SAASsB,CAAT,GAAY;EAACC,CAAC,KAAGC,CAAC,CAACC,KAAF,IAAUF,CAAC,GAAC,IAAf,CAAD;;EAAsB,KAAI,IAAIhC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgB,CAAC,CAACmB,MAAhB,EAAuBnC,CAAC,EAAxB,EAA2BgB,CAAC,CAAChB,CAAD,CAAD,IAAMgB,CAAC,CAAChB,CAAD,CAAD,CAAKoC,SAAL,EAAN;;EAAuBpB,CAAC,CAACmB,MAAF,GAAS,CAAT;AAAW;;AAAA,IAAIF,CAAJ;AAAA,IAAMD,CAAC,GAAC,IAAR;;AAAa,eAAed,CAAf,GAAkB;EAAC,IAAGc,CAAH,EAAK,OAAOA,CAAP;EAASC,CAAC,GAAC,IAAII,eAAJ,EAAF;EAAsB,MAAMrC,CAAC,GAAC,EAAR;;EAAW,KAAI,IAAIG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACO,CAAd,EAAgBP,CAAC,EAAjB,EAAoB;IAAC,MAAMC,CAAC,GAACK,CAAC,CAAC6B,MAAF,CAASnC,CAAT,EAAYoC,IAAZ,CAAkBvC,CAAC,KAAGgB,CAAC,CAACb,CAAD,CAAD,GAAKH,CAAL,EAAOA,CAAV,CAAnB,CAAR;IAA0CA,CAAC,CAACwC,IAAF,CAAOpC,CAAP;EAAU;;EAAA,OAAO4B,CAAC,GAACS,OAAO,CAACC,GAAR,CAAY1C,CAAZ,CAAF,EAAiBgC,CAAxB;AAA0B;;AAAA,SAAOf,CAAC,IAAI0B,UAAZ,EAAuBpB,CAAC,IAAID,IAA5B,EAAiCH,CAAC,IAAIyB,aAAtC,EAAoDb,CAAC,IAAIK,SAAzD"},"metadata":{},"sourceType":"module"}