{"version":3,"file":"static/js/6738.99732bc6.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import{PositionHint as r,indexOf as i}from\"../../../../core/arrayUtils.js\";import s from\"../../../../core/Logger.js\";import{clamp as o}from\"../../../../core/mathUtils.js\";import{isNone as n,isSome as a,unwrap as l}from\"../../../../core/maybe.js\";import{whenOnce as c}from\"../../../../core/reactiveUtils.js\";import{getUnitString as p}from\"../../../../core/unitUtils.js\";import{property as u}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as g}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{t as d,a as f,s as y}from\"../../../../chunks/vec3.js\";import{WhereClause as h}from\"../../../../core/sql/WhereClause.js\";import{projectBoundingSphere as m,load as S,project as j,projectVectorToVector as w}from\"../../../../geometry/projection.js\";import{create as E}from\"../../../../geometry/support/aaBoundingBox.js\";import{fromValues as b,expandWithNestedArray as R,expand as F}from\"../../../../geometry/support/aaBoundingRect.js\";import{earth as v}from\"../../../../geometry/support/Ellipsoid.js\";import{project as _}from\"../../../../geometry/support/webMercatorUtils.js\";import I from\"../../../../layers/support/FeatureFilter.js\";import{objectIdFilter as M,filterInPlace as k}from\"./I3SUtil.js\";import T from\"../../../../geometry/SpatialReference.js\";const D=s.getLogger(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\");let C=class extends t{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){c((()=>l(this.viewFilter)?.geometry||a(this.layerFilter))).then((()=>this.loadAsyncModule(import(\"../../../../geometry/geometryEngine.js\").then((e=>{this.destroyed||(this._geometryEngine=e,this.applyFilters())})))))}get sortedObjectIds(){if(n(this.viewFilter)||n(this.viewFilter.objectIds))return null;const e=new Float64Array(this.viewFilter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=a(this.viewFilter)?this.viewFilter.where:null;if(n(e)||!e)return null;try{return h.create(e,this.layerFieldsIndex)}catch(t){D.error(`Failed to parse filter where clause: ${t}`)}return null}addFilters(e,t,r,i){const s=this.sortedObjectIds;a(s)&&e.push((e=>M(s,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const o=this._layerMaskGeometries,n=this._geometryEngine;if(a(o)&&a(this.layerFilter)&&a(n)){const s=this.layerFilter.spatialRelationship;e.push(((e,a)=>L(n,e,a,i,t,r,o,s)))}const l=this._viewMaskGeometries;if(a(l)&&a(this.viewFilter)&&a(n)){const s=this.viewFilter.spatialRelationship;e.push(((e,o)=>L(n,e,o,i,t,r,l,s)))}}isMBSGeometryVisible(e,t,r){const i=this._layerMaskGeometries,s=this._geometryEngine;if(a(i)&&a(this.layerFilter)&&a(s)){const o=this.layerFilter.spatialRelationship,n=i[0].spatialReference||t;if(!m(e,r,W,n))return D.warnOnce(\"SceneLayer.mask geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return B(s,W,i,n,o)}const o=this._viewMaskGeometries;if(a(o)&&a(this.viewFilter)&&a(s)){const i=this.viewFilter.spatialRelationship,n=o[0].spatialReference||t;if(!m(e,r,W,n))return D.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return B(s,W,o,n,i)}return!0}get parsedGeometry(){const e=this._viewMaskGeometries,t=this._layerMaskGeometries;return n(e)||n(t)?e||t:t.concat(e)}get _layerMaskGeometries(){const e=this.layerFilter;return n(e)||n(this._geometryEngine)?null:O(this._geometryEngine,e.geometry,e.spatialRelationship)}get _viewMaskGeometries(){if(n(this.viewFilter)||n(this._geometryEngine))return null;const{geometry:e}=this.viewFilter;if(n(e))return null;const{distance:t,units:r}=this.viewFilter,i=this.viewFilter.spatialRelationship,s=\"mesh\"===e.type?e.extent:e;if(n(t)||0===t)return O(this._geometryEngine,s,i);const o=r||p(s.spatialReference);if(s.spatialReference.isWGS84){const e=this._geometryEngine.geodesicBuffer(s,t,o);return O(this._geometryEngine,e,i)}const l=_(s,T.WGS84);if(a(l)){const e=_(this._geometryEngine.geodesicBuffer(l,t,o),s.spatialReference);return O(this._geometryEngine,e,i)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule(S().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let c=null;try{c=j(s,T.WGS84)}catch(u){}if(c)try{c=j(this._geometryEngine.geodesicBuffer(c,t,o),s.spatialReference)}catch(u){c=null}return c||D.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${s.spatialReference.wkid}) to WGS84.`),O(this._geometryEngine,c,i)}static checkSupport(e){return!n(e)&&(e.timeExtent?(D.warn(\"Filters with a timeExtent are not supported for mesh scene layers\"),!1):!!A(e.spatialRelationship)||(D.warn(`Filters with spatialRelationship other than ${G.join(\", \")} are not supported for mesh scene layers`),!1))}};e([u()],C.prototype,\"layerFilter\",void 0),e([u({type:I})],C.prototype,\"viewFilter\",void 0),e([u()],C.prototype,\"layerFieldsIndex\",void 0),e([u()],C.prototype,\"loadAsyncModule\",void 0),e([u()],C.prototype,\"applyFilters\",void 0),e([u()],C.prototype,\"addSqlFilter\",void 0),e([u({readOnly:!0})],C.prototype,\"sortedObjectIds\",null),e([u({readOnly:!0})],C.prototype,\"parsedWhereClause\",null),e([u({readOnly:!0})],C.prototype,\"parsedGeometry\",null),e([u({readOnly:!0})],C.prototype,\"_layerMaskGeometries\",null),e([u({readOnly:!0})],C.prototype,\"_viewMaskGeometries\",null),e([u()],C.prototype,\"_projectionEngineLoaded\",void 0),e([u()],C.prototype,\"_geometryEngine\",void 0),C=e([g(\"esri.views.3d.layers.i3s.I3SMeshViewFilter\")],C);const G=(e=>e)([\"contains\",\"intersects\",\"disjoint\"]);function A(e){return null!=e&&G.includes(e)}var x;function O(e,t,s){if(n(t))return null;if(\"disjoint\"===s&&\"polygon\"===t.type){const s=new Array(t.rings.length);for(let e=0;e<t.rings.length;++e){const r=b(1/0,1/0,-1/0,-1/0);R(r,t.rings[e]),s[e]={type:\"polygon\",rings:[t.rings[e]],spatialReference:t.spatialReference,aabr:r}}s.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const o=new Set,n=new r;for(let t=0;t<s.length;++t){const r=s[t];for(let e=t+1;e<s.length;++e){const t=s[e];if(t.aabr[0]>=r.aabr[2])break;o.add(t)}o.forEach((t=>{if(r!==t)if(t.aabr[2]<=r.aabr[0])o.delete(t);else if(e.intersects(r,t)){r.rings=r.rings.concat(t.rings),F(r.aabr,t.aabr,r.aabr),delete r._geVersion,o.delete(t);const e=i(s,t,s.length,n);s.splice(e,1)}})),o.add(r)}for(const e of s)delete e.aabr;return s}return[t]}function B(e,t,r,i,s){const o=K(e,t,i);return r.every((t=>V(e,t,o,s)!==x.DISCARD))}function L(e,t,r,i,s,o,n,a){const l=n[0].spatialReference||s.spatialReference;if(!m(r.node.mbs,o,W,l))return void D.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter\");const c=K(e,W,l),p=P(a,s,l,i,r.objectHandle);for(const u of n){if(0===t.length)return;switch(V(e,u,c,a)){case x.DISCARD:return void(t.length=0);case x.KEEP:continue}k(t,r.featureIds,(t=>Z(e,u,t,p)))}}!function(e){e[e.KEEP=0]=\"KEEP\",e[e.DISCARD=1]=\"DISCARD\",e[e.TEST=2]=\"TEST\"}(x||(x={}));const W=[0,0,0,0];function P(e,t,r,i,s){const o=t.renderSpatialReference,n=new Map,a={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:r};a.rings[0][3]=a.rings[0][0];const l={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let c,p;switch(e){case\"intersects\":c=(e,t,r)=>e.intersects(t,r)?x.KEEP:x.TEST,p=U;break;case\"contains\":c=(e,t,r)=>e.contains(t,r)?x.TEST:x.DISCARD,p=U;break;default:c=(e,t,r)=>e.disjoint(t,r)?x.TEST:x.DISCARD,p=q}return{collection:i,object:s,type:e,maskSR:r,renderSR:o,aabbCache:n,triangle:a,positions:l,triangleTest:c,geometryTest:p}}function K(e,t,r){const i={x:t[0],y:t[1],hasZ:!1,hasM:!1,type:\"point\",spatialReference:r},s=!r.isWGS84&&!r.isWebMercator,n=Number.isNaN(t[3])?0:o(t[3],0,2*v.radius),a=s?e.buffer(i,n,1):e.geodesicBuffer(i,n,1);return a.type=\"polygon\",a}function V(e,t,r,i){switch(i){case\"intersects\":case\"contains\":return U(e,t,r);case\"disjoint\":return q(e,t,r)}}function U(e,t,r){return e.intersects(t,r)?e.contains(t,r)?x.KEEP:x.TEST:x.DISCARD}function q(e,t,r){return e.intersects(t,r)?e.contains(t,r)?x.DISCARD:x.TEST:x.KEEP}const N=2**-32;function Z(e,t,r,i){const{collection:s,object:o,renderSR:n,maskSR:a,geometryTest:l,aabbCache:c}=i;let p=c.get(r);if(!p){const e=s.getObjectTransform(o);s.getComponentAabb(o,r,$);const t=[[$[0],$[1],0],[$[0],$[4],0],[$[3],$[4],0],[$[3],$[1],0]];for(let r=0;r<4;++r)d(t[r],t[r],e.rotationScale),f(t[r],t[r],e.position),w(t[r],n,t[r],a);p={rings:[t],hasZ:!1,hasM:!1,type:\"polygon\",spatialReference:a},p.rings[0][4]=p.rings[0][0],c.set(r,p)}switch(l(e,t,p)){case x.DISCARD:return!1;case x.KEEP:return!0}const{triangle:u,triangleTest:g,positions:h}=i,m=u.rings[0][0],S=u.rings[0][1],j=u.rings[0][2],E=s.getObjectTransform(o);s.getComponentPositions(o,r,h);const{indices:b,data:R,stride:F,startIndex:v,endIndex:_}=h;for(let I=v;I<_;I+=3){const r=F*b[I+0],i=F*b[I+1],s=F*b[I+2];y(m,R[r+0],R[r+1],R[r+2]),y(S,R[i+0],R[i+1],R[i+2]),y(j,R[s+0],R[s+1],R[s+2]),d(m,m,E.rotationScale),d(S,S,E.rotationScale),d(j,j,E.rotationScale),f(m,m,E.position),f(S,S,E.position),f(j,j,E.position),w(m,n,m,a),w(S,n,S,a),w(j,n,j,a);const o=S[0]-m[0],l=S[1]-m[1],c=j[0]-m[0],p=j[1]-m[1];if(!(Math.abs(o*p-l*c)<N))switch(delete u._geVersion,g(e,t,u)){case x.DISCARD:return!1;case x.KEEP:return!0}}return\"intersects\"!==i.type}const $=E();export{C as I3SMeshViewFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{isNone as n}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/Extent.js\";import{QueryEngine as u}from\"../../../../layers/graphics/data/QueryEngine.js\";import y from\"../../../../rest/support/FeatureSet.js\";import c from\"../../../../rest/support/Query.js\";const l=u;let p=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null,this._handles=new s}get defaultQueryJSON(){return new c({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this._ensureDataQueryEngine()}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null),this._handles&&(this._handles.destroy(),this._handles=null),this._set(\"layerView\",null)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:a.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new t(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(s.returnCentroid)throw new t(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const n=await this.dataQueryEngine.executeQuery(s,r),o=y.fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){return n(e)?this.defaultQueryJSON:e.toJSON()}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||\"OBJECTID\",r=\"esriGeometryPolygon\",t=this.layer.fields.map((e=>e.toJSON())),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,i=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:r,fields:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:i,scheduler:s,priority:o}),this._dataQueryEngineInstance}};e([o({constructOnly:!0})],p.prototype,\"layerView\",void 0),e([o({constructOnly:!0})],p.prototype,\"priority\",void 0),e([o({constructOnly:!0})],p.prototype,\"spatialIndex\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],p.prototype,\"spatialReference\",void 0),e([o({readOnly:!0,aliasOf:\"layerView.i3slayer\"})],p.prototype,\"layer\",void 0),e([o({readOnly:!0})],p.prototype,\"defaultQueryJSON\",null),p=e([i(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],p);export{p as I3SQueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{create as e}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this.objectIdField=t.objectIdField,this.getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this.objectIdField&&(n[this.objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this.objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,r,i,n,a]=this.getFeatureExtent(t,s);return new o([5],[e,r,i,n,r,i,n,a,i,e,a,i,e,r,i])}getCentroid(t,e){if(t.geometry)return r(new o,t.geometry,e.hasZ,e.hasM);const[i,n,a,m,u,d]=this.getFeatureExtent(t,s);return new o([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=e();export{n as I3SQueryFeatureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import e from\"../../../../core/Evented.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec4f64.js\";import{projectBoundingSphere as a}from\"../../../../geometry/projection.js\";import{create as n,toRect as p}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as i,intersects as u}from\"../../../../geometry/support/aaBoundingRect.js\";import{ForAllFeaturesReturnType as m}from\"../II3SMeshView3D.js\";let f=class extends t{constructor(r){super(r),this.events=new e}forEach(r){this.forAllFeatures((t=>(r(t),m.CONTINUE)))}forEachBounds(r,t,e){const o=this.getFeatureExtent;for(const s of r)t(o(s,e))}forEachInBounds(r,t){this.forAllFeatures((e=>{const o=this.getFeatureExtent(e,y);return u(r,p(o,h))&&t(e),m.CONTINUE}),(t=>{if(a(t.node.mbs,this.sourceSpatialReference,l,this.viewSpatialReference),l[0]>=r[0]&&l[2]<=r[2]&&l[1]>=r[1]&&l[3]<=r[3])return m.CONTINUE;const e=Math.max(r[0],Math.min(l[0],r[2])),o=Math.max(r[1],Math.min(l[1],r[3])),s=l[0]-e,c=l[1]-o;return s*s+c*c<=l[3]*l[3]?m.CONTINUE:m.SKIP}))}};r([o({constructOnly:!0})],f.prototype,\"featureAdapter\",void 0),r([o({constructOnly:!0})],f.prototype,\"toArray\",void 0),r([o({constructOnly:!0})],f.prototype,\"forAllFeatures\",void 0),r([o({constructOnly:!0})],f.prototype,\"getFeatureExtent\",void 0),r([o({constructOnly:!0})],f.prototype,\"sourceSpatialReference\",void 0),r([o({constructOnly:!0})],f.prototype,\"viewSpatialReference\",void 0),f=r([s(\"esri.views.3d.layers.i3s.I3SQueryFeatureStore\")],f);const l=c(),y=n(),h=i();export{f as I3SQueryFeatureStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as l}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as t}from\"../../../layers/support/fieldUtils.js\";async function d(l,d=l.popupTemplate){if(e(d))return[];const s=await d.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:i}=d,{objectIdField:n,typeIdField:u,globalIdField:a,relationships:o}=l;if(s.includes(\"*\"))return[\"*\"];const r=i?await p(l):[],f=t(l.fieldsIndex,[...s,...r]);return u&&f.push(u),f&&n&&l.fieldsIndex.has(n)&&!f.includes(n)&&f.push(n),f&&a&&l.fieldsIndex.has(a)&&!f.includes(a)&&f.push(a),o&&o.forEach((e=>{const{keyField:p}=e;f&&p&&l.fieldsIndex.has(p)&&!f.includes(p)&&f.push(p)})),f}function s(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{s as getFetchPopupTemplate,d as getRequiredFields};\n"],"names":["D","s","C","t","constructor","e","super","this","_projectionEngineLoaded","initialize","c","l","viewFilter","geometry","a","layerFilter","then","loadAsyncModule","destroyed","_geometryEngine","applyFilters","sortedObjectIds","n","objectIds","Float64Array","sort","parsedWhereClause","where","h","layerFieldsIndex","error","addFilters","r","i","push","M","addSqlFilter","o","_layerMaskGeometries","spatialRelationship","L","_viewMaskGeometries","isMBSGeometryVisible","spatialReference","m","W","B","warnOnce","parsedGeometry","concat","O","distance","units","type","extent","p","isWGS84","geodesicBuffer","_","T","S","j","u","wkid","timeExtent","warn","A","G","join","prototype","I","readOnly","g","includes","x","Array","rings","length","b","R","aabr","Set","add","forEach","delete","intersects","F","_geVersion","splice","K","every","V","DISCARD","node","mbs","P","objectHandle","KEEP","k","featureIds","Z","TEST","renderSpatialReference","Map","hasZ","hasM","indices","data","stride","startIndex","endIndex","U","contains","disjoint","q","collection","object","maskSR","renderSR","aabbCache","triangle","positions","triangleTest","geometryTest","y","isWebMercator","Number","isNaN","v","buffer","N","get","getObjectTransform","getComponentAabb","$","d","rotationScale","f","position","w","set","E","getComponentPositions","Math","abs","_dataQueryEngineInstance","_handles","defaultQueryJSON","outSpatialReference","toJSON","dataQueryEngine","_ensureDataQueryEngine","layerView","on","spatialIndex","events","emit","destroy","_set","executeQueryForCount","_ensureQueryJSON","count","executeQueryForExtent","executeQueryForIds","returnGeometry","returnCentroid","executeQuery","features","layer","objectIdField","fields","map","view","resourceController","scheduler","priority","geometryType","timeInfo","featureStore","constructOnly","aliasOf","getFeatureExtent","getObjectId","id","getAttributes","meta","index","attributeInfo","attributeData","Object","keys","getAttribute","getGeometry","getCentroid","cloneWithGeometry","forAllFeatures","forEachBounds","forEachInBounds","sourceSpatialReference","viewSpatialReference","max","min","arguments","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","parsedDefinitionExpression","i3slayer","definitionExpression","fieldsIndex","isStandardized","fieldNames","missingFields","definitionExpressionFields","_evaluateClause","testFeature","_addDefinitionExpressionToQuery","clone","async","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","has","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}