"use strict";(self["webpackChunkeco_friendly"]=self["webpackChunkeco_friendly"]||[]).push([[2427],{6640:function(e,t,o){o.d(t,{Fp:function(){return l},RL:function(){return u},UV:function(){return m},bk:function(){return f}});o(48675),o(3462),o(37380),o(1118);var i=o(16509),n=o(90421),r=o(11633);function l(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?l(t[0]):null}case"CIMVectorMarker":{const t=e.markerGraphics;if(!t||1!==t.length)return null;const o=t[0];if(!o)return null;const i=o.geometry;if(!i)return null;const n=o.symbol;return!n||"CIMPolygonSymbol"!==n.type&&"CIMLineSymbol"!==n.type||n.symbolLayers?.some((e=>!!e.effects))?null:{geom:i,asFill:"CIMPolygonSymbol"===n.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function a(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}function s(e){let t=1/0,o=-1/0,i=1/0,n=-1/0;for(const r of e)for(const e of r)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>n&&(n=e[1]);return new r.Z(t,i,o-t,n-i)}function c(e){let t=1/0,o=-1/0,i=1/0,n=-1/0;for(const r of e)for(const e of r)e[0]<t&&(t=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>n&&(n=e[1]);return[t,i,o,n]}function f(e){return e?e.rings?c(e.rings):e.paths?c(e.paths):(0,n.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function m(e,t,o,i,n){const[r,l,a,s]=e;if(a<r||s<l)return[0,0,0];const c=a-r,f=s-l,m=128,u=1,p=Math.floor(.5*(.5*m-u)),h=(m-2*(p+u))/Math.max(c,f),y=Math.round(c*h)+2*p,g=Math.round(f*h)+2*p;let d=1;t&&(d=g/h/(t.ymax-t.ymin));let N=0,S=0;if(i)if(n){if(t&&o&&t.ymax-t.ymin>0){const e=(t.xmax-t.xmin)/(t.ymax-t.ymin);N=i.x/(o*e),S=i.y/o}}else N=i.x,S=i.y;return N=.5*(t.xmax+t.xmin)+N*(t.xmax-t.xmin),S=.5*(t.ymax+t.ymin)+S*(t.ymax-t.ymin),N-=r,S-=l,N*=h,S*=h,N+=p,S+=p,[d,N/y-.5,-(S/g-.5)]}function u(e){const t=a(e.geom),o=s(t),i=128,n=1,r=Math.floor(.5*(.5*i-n)),l=(i-2*(r+n))/Math.max(o.width,o.height),c=Math.round(o.width*l)+2*r,f=Math.round(o.height*l)+2*r,m=[];for(const a of t)if(a&&a.length>1){const t=[];for(const i of a){let[n,a]=i;n-=o.x,a-=o.y,n*=l,a*=l,n+=r-.5,a+=r-.5,e.asFill?t.push([n,a]):t.push([Math.round(n),Math.round(a)])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}m.push(t)}const u=p(m,c,f,r);return e.asFill&&h(m,c,f,r,u),[y(u,r),c,f]}function p(e,t,o,i){const n=t*o,r=new Array(n),l=i*i+1;for(let a=0;a<n;++a)r[a]=l;for(const a of e){const e=a.length;for(let n=1;n<e;++n){const e=a[n-1],l=a[n];let s,c,f,m;e[0]<l[0]?(s=e[0],c=l[0]):(s=l[0],c=e[0]),e[1]<l[1]?(f=e[1],m=l[1]):(f=l[1],m=e[1]);let u=Math.floor(s)-i,p=Math.floor(c)+i,h=Math.floor(f)-i,y=Math.floor(m)+i;u<0&&(u=0),p>t&&(p=t),h<0&&(h=0),y>o&&(y=o);const g=l[0]-e[0],d=l[1]-e[1],N=g*g+d*d;for(let i=u;i<p;i++)for(let n=h;n<y;n++){let a,s,c=(i-e[0])*g+(n-e[1])*d;c<0?(a=e[0],s=e[1]):c>N?(a=l[0],s=l[1]):(c/=N,a=e[0]+c*g,s=e[1]+c*d);const f=(i-a)*(i-a)+(n-s)*(n-s),m=(o-n-1)*t+i;f<r[m]&&(r[m]=f)}}}for(let a=0;a<n;++a)r[a]=Math.sqrt(r[a]);return r}function h(e,t,o,i,n){for(const r of e){const e=r.length;for(let l=1;l<e;++l){const e=r[l-1],a=r[l];let s,c,f,m;e[0]<a[0]?(s=e[0],c=a[0]):(s=a[0],c=e[0]),e[1]<a[1]?(f=e[1],m=a[1]):(f=a[1],m=e[1]);let u=Math.floor(s),p=Math.floor(c)+1,h=Math.floor(f),y=Math.floor(m)+1;u<i&&(u=i),p>t-i&&(p=t-i),h<i&&(h=i),y>o-i&&(y=o-i);for(let r=h;r<y;++r){if(e[1]>r==a[1]>r)continue;const l=(o-r-1)*t;for(let t=u;t<p;++t)t<(a[0]-e[0])*(r-e[1])/(a[1]-e[1])+e[0]&&(n[l+t]=-n[l+t]);for(let e=i;e<u;++e)n[l+e]=-n[l+e]}}}}function y(e,t){const o=2*t,n=e.length,r=new Uint8Array(4*n);for(let l=0;l<n;++l){const t=.5-e[l]/o;(0,i.I)(t,r,4*l)}return r}},32427:function(e,t,o){o.d(t,{S:function(){return K},c:function(){return A}});o(26699);var i=o(36945),n=o(86232),r=o(93622),l=o(8693),a=o(30524),s=o(14201),c=o(21361),f=o(21),m=o(80742),u=o(6640),p=o(79913),h=o(73347),y=o(67167),g=o(19440),d=o(54781),N=o(40741);const S=r.Z.getLogger("esri.symbols.cim.cimAnalyzer");function v(e){switch(e){case"Butt":return m.RL.BUTT;case"Square":return m.RL.SQUARE;default:return m.RL.ROUND}}function b(e){switch(e){case"Bevel":return m.AH.BEVEL;case"Miter":return m.AH.MITER;default:return m.AH.ROUND}}function C(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return S.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),"center"}}function O(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function k(e){let t="",o="";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?o="bold":i.includes("light")&&(o="lighter")}return{style:t,weight:o}}function P(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function M(e,t,o,i){let n;e[t]?n=e[t]:(n={},e[t]=n),n[o]=i}function x(e){const t=e.markerPlacement;return t&&t.angleToLine?m.v2.MAP:m.v2.SCREEN}async function A(e,t,o,i,n){const r=i??[];if(!e)return r;let l,a;const s={};if("CIMSymbolReference"!==e.type)return S.error("Expect cim type to be 'CIMSymbolReference'"),r;if(l=e.symbol,a=e.primitiveOverrides,a){const e=[];for(const o of a){const i=o.valueExpressionInfo;if(i&&t){const n=i.expression,r=(0,c.Yi)(n,t.spatialReference,t.fields).then((e=>{e&&M(s,o.primitiveName,o.propertyName,e)}));e.push(r)}else null!=o.value&&M(s,o.primitiveName,o.propertyName,o.value)}e.length>0&&await Promise.all(e)}const f=[];switch(te(l,o,f),f.length>0&&await Promise.all(f),l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":w(l,a,s,t,r,o,n)}return r}function w(e,t,o,i,n,r,l){if(!e)return;const a=e.symbolLayers;if(!a)return;const s=e.effects;let c;const u=f.B$.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(c=m.v2.MAP);let p=a.length;for(;p--;){const m=a[p];if(!m||!1===m.enable)continue;let h;s&&s.length&&(h=[...s]);const y=m.effects;y&&y.length&&(s?h.push(...y):h=[...y]);const g=[];let d;f.E0.findEffectOverrides(h,t,g),d=g.length>0?V(h,g,o,i):h;const N=[];switch(f.E0.findApplicableOverrides(m,t,N),m.type){case"CIMSolidFill":L(m,d,o,N,i,n);break;case"CIMPictureFill":I(m,d,o,N,i,r,n);break;case"CIMHatchFill":z(m,d,o,N,i,n);break;case"CIMGradientFill":R(m,d,o,N,i,n);break;case"CIMSolidStroke":X(m,d,o,N,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMPictureStroke":$(m,d,o,N,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMGradientStroke":J(m,d,o,N,i,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMCharacterMarker":if(H(m,d,o,N,i,n))break;break;case"CIMPictureMarker":if(H(m,d,o,N,i,n))break;"CIMLineSymbol"===e.type&&(c=x(m)),Y(m,d,o,N,i,r,n,c,u);break;case"CIMVectorMarker":if(H(m,d,o,N,i,n))break;"CIMLineSymbol"===e.type&&(c=x(m)),E(m,d,o,N,i,n,r,c,u,l);break;default:S.error("Cannot analyze CIM layer",m.type)}}}function L(e,t,o,i,n,r){const l=e.primitiveName,a=(0,p.NO)(e.color),[c,f]=ee(i,l,t,null,null),m=(0,s.hP)(JSON.stringify(e)+f).toString();r.push({type:"fill",templateHash:m,materialHash:c?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:j(l,o,"Color",n,a,D),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t,applyRandomOffset:!1,sampleAlphaOnly:!0})}function I(e,t,o,i,n,r,a){const c=e.primitiveName,f=e.tintColor?(0,p.NO)(e.tintColor):{r:255,g:255,b:255,a:1},[m,u]=ee(i,c,t,null,null),h=(0,s.hP)(JSON.stringify(e)+u).toString(),y=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let g=(0,p.NA)(e.scaleX);if("width"in e){const t=e.width;let o=1;const i=r.getResource(e.url);(0,l.pC)(i)&&(o=i.width/i.height),g/=o*(e.height/t)}a.push({type:"fill",templateHash:h,materialHash:m?()=>y:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:j(c,o,"TintColor",n,f,D),height:j(c,o,"Height",n,e.height),scaleX:j(c,o,"ScaleX",n,g),angle:j(c,o,"Rotation",n,(0,p.NA)(e.rotation)),offsetX:j(c,o,"OffsetX",n,(0,p.NA)(e.offsetX)),offsetY:j(c,o,"OffsetY",n,(0,p.NA)(e.offsetY)),url:e.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}function z(e,t,o,i,n,r){const l=["Rotation","OffsetX","OffsetY"],a=i.filter((t=>t.primitiveName!==e.primitiveName&&!l.includes(t.propertyName))),c=e.primitiveName,[f,m]=ee(i,c,t,null,null),u=(0,s.hP)(JSON.stringify(e)+m).toString(),h=(0,s.hP)(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();let y={r:255,g:255,b:255,a:1};if(e.lineSymbol){const t=e.lineSymbol?.symbolLayers.find((e=>"CIMSolidStroke"===e.type));t&&(y=(0,p.NO)(t.color))}r.push({type:"fill",templateHash:u,materialHash:f?Q(h,o,a,n):h,cim:e,materialOverrides:a,colorLocked:e.colorLocked,effects:t,color:y,height:j(c,o,"Separation",n,e.separation),scaleX:1,angle:j(c,o,"Rotation",n,(0,p.NA)(e.rotation)),offsetX:j(c,o,"OffsetX",n,(0,p.NA)(e.offsetX)),offsetY:j(c,o,"OffsetY",n,(0,p.NA)(e.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0})}function R(e,t,o,i,n,r){const l=e.primitiveName,[a,c]=ee(i,l,t,null,null),f=(0,s.hP)(JSON.stringify(e)+c).toString();r.push({type:"fill",templateHash:f,materialHash:a?Q(f,o,i,n):f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}function X(e,t,o,i,n,r,l,a){const c=e.primitiveName,f=(0,p.NO)(e.color),m=void 0!==e.width?e.width:4,u=v(e.capStyle),h=b(e.joinStyle),y=e.miterLimit,[g,d]=ee(i,c,t,null,null),N=(0,s.hP)(JSON.stringify(e)+d).toString();let S,C;if(t&&t instanceof Array&&t.length>0){const e=t[t.length-1];if("CIMGeometricEffectDashes"===e.type&&"NoConstraint"===e.lineDashEnding&&null===e.offsetAlongLine){const e=(t=[...t]).pop();S=e.dashTemplate,C=e.scaleDash}}r.push({type:"line",templateHash:N,materialHash:g?()=>N:N,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:j(c,o,"Color",n,f,D),width:j(c,o,"Width",n,m),cap:j(c,o,"CapStyle",n,u),join:j(c,o,"JoinStyle",n,h),miterLimit:j(c,o,"MiterLimit",n,y),referenceWidth:a,zOrder:G(e.name),dashTemplate:S,scaleDash:C,sampleAlphaOnly:!0})}function $(e,t,o,i,n,r,l,a){const c=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,m=(0,p.NO)(e.tintColor),u=void 0!==e.width?e.width:4,h=v(e.capStyle),y=b(e.joinStyle),g=e.miterLimit,[d,N]=ee(i,f,t,null,null),S=(0,s.hP)(JSON.stringify(e)+N).toString();r.push({type:"line",templateHash:S,materialHash:d?()=>c:c,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:j(f,o,"TintColor",n,m,D),width:j(f,o,"Width",n,u),cap:j(f,o,"CapStyle",n,h),join:j(f,o,"JoinStyle",n,y),miterLimit:j(f,o,"MiterLimit",n,g),referenceWidth:a,zOrder:G(e.name),dashTemplate:null,scaleDash:!1,url:e.url,sampleAlphaOnly:!1})}function J(e,t,o,i,n,r,l,a){const c=e.primitiveName,f=void 0!==e.width?e.width:4,m=v(e.capStyle),u=b(e.joinStyle),p=e.miterLimit,[h,y]=ee(i,c,t,null,null),g=(0,s.hP)(JSON.stringify(e)+y).toString();r.push({type:"line",templateHash:g,materialHash:h?Q(g,o,i,n):g,cim:e,materialOverrides:null,isOutline:l,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:j(c,o,"Width",n,f),cap:j(c,o,"CapStyle",n,m),join:j(c,o,"JoinStyle",n,u),miterLimit:j(c,o,"MiterLimit",n,p),referenceWidth:a,zOrder:G(e.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}function H(e,t,o,i,n,r){const l=e.markerPlacement;if(!l||"CIMMarkerPlacementInsidePolygon"!==l.type)return!1;const c=l,f=Math.abs(c.stepX),m=Math.abs(c.stepY);if(0===f||0===m)return!0;const u=["Rotation","OffsetX","OffsetY"],h=i.filter((t=>t.primitiveName!==e.primitiveName&&!u.includes(t.propertyName))),y="url"in e?e.url:null,[d,N]=ee(i,c.primitiveName,t,null,null),S=(0,s.hP)(JSON.stringify(e)+N).toString();let v,b,C=null;if("Random"===l.gridType){const e=(0,a.Wz)(g.C1),t=Math.max(Math.floor(e/f),1),o=Math.max(Math.floor(e/m),1);v=m*o,C=e=>e?e*o:0,b=t*f/v}else l.shiftOddRows?(v=2*m,C=e=>e?2*e:0,b=f/m*.5):(v=m,C=null,b=f/m);let O={r:255,g:255,b:255,a:1};return"tintColor"in e&&(O=(0,p.NO)(e.tintColor)),r.push({type:"fill",templateHash:S,materialHash:d?Q(S,o,h,n):S,cim:e,materialOverrides:h,colorLocked:e.colorLocked,effects:t,color:j(c.primitiveName,o,"TintColor",n,O,D),height:j(c.primitiveName,o,"StepY",n,v,C),scaleX:b,angle:j(c.primitiveName,o,"GridAngle",n,c.gridAngle),offsetX:j(c.primitiveName,o,"OffsetX",n,(0,p.NA)(c.offsetX)),offsetY:j(c.primitiveName,o,"OffsetY",n,(0,p.NA)(c.offsetY)),url:y,applyRandomOffset:"Random"===l.gridType,sampleAlphaOnly:!y}),!0}function Y(e,t,o,i,n,r,a,c,f){const m=e.primitiveName,u=(0,p.NA)(e.size);let h=(0,p.NA)(e.scaleX);const y=(0,p.NA)(e.rotation),g=(0,p.NA)(e.offsetX),d=(0,p.NA)(e.offsetY),S=e.tintColor?(0,p.NO)(e.tintColor):{r:255,g:255,b:255,a:1},v=(0,s.hP)(`${e.url}${JSON.stringify(e.colorSubstitutions)}${JSON.stringify(e.animatedSymbolProperties)}`).toString(),b=q(e.markerPlacement,i,o,n),C=_(e.animatedSymbolProperties,i,o,n),[O,k]=ee(i,m,t,b,C),P=(0,s.hP)(JSON.stringify(e)+k).toString(),M=e.anchorPoint??{x:0,y:0};if("width"in e){const t=e.width;let o=1;const i=r.getResource(e.url);(0,l.pC)(i)&&(o=i.width/i.height),h/=o*(u/t)}function x(e,t){return(0,p.hf)(C,e,t)}const A=e.animatedSymbolProperties&&!0===e.animatedSymbolProperties.randomizeStartTime?(e,t,o,i)=>{const n=(0,N.$)(i),r=x(e,t);return v+`-MATERIALGROUP(${n})`+`-ASP(${JSON.stringify(r)})`}:O?(e,t)=>{const o=x(e,t);return v+`-ASP(${JSON.stringify(o)})`}:v;a.push({type:"marker",templateHash:P,materialHash:A,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:j(m,o,"Size",n,u),scaleX:j(m,o,"ScaleX",n,h),rotation:j(m,o,"Rotation",n,y),offsetX:j(m,o,"OffsetX",n,g),offsetY:j(m,o,"OffsetY",n,d),color:j(m,o,"TintColor",n,S,D),anchorPoint:{x:M.x,y:-M.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:b,url:e.url,animatedSymbolProperties:C})}function E(e,t,o,i,n,r,l,a,s,c){const f=e.markerGraphics;if(!f)return;let m=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(m=t.ymax-t.ymin)}const u=q(e.markerPlacement,i,o,n);for(const p of f)if(p){const f=p.symbol;if(!f)continue;switch(f.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":T(e,t,u,null,p,i,o,n,r,l,a,s,m,c);break;case"CIMTextSymbol":F(e,t,u,p,o,i,n,r,a,s,m)}}}function F(e,t,o,i,n,r,l,a,c,m,u){const h=[];f.E0.findApplicableOverrides(i,r,h);const y=i.geometry;if(!("x"in y)||!("y"in y))return;const g=i.symbol,N=P(g),S=k(g.fontStyleName),v=(0,d.BN)(g.fontFamilyName);g.font={family:v,decoration:N,...S};const b=e.frame,M=y.x-.5*(b.xmin+b.xmax),x=y.y-.5*(b.ymin+b.ymax),A=e.size/u,w=e.primitiveName,L=(0,p.NA)(g.height)*A,I=(0,p.NA)(g.angle),z=(0,p.NA)(e.offsetX)+((0,p.NA)(g.offsetX)+M)*A,R=(0,p.NA)(e.offsetY)+((0,p.NA)(g.offsetY)+x)*A,X=(0,p.NO)(f.B$.getFillColor(g));let $=(0,p.NO)(f.B$.getStrokeColor(g)),J=f.B$.getStrokeWidth(g);J||($=(0,p.NO)(f.B$.getFillColor(g.haloSymbol)),J=g.haloSize*A);const[H,Y]=ee(r,w,t,o,null),E=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),F=(0,s.hP)(JSON.stringify(i)+E+Y).toString();let T=j(i.primitiveName,n,"TextString",l,i.textString,p.X3,g.textCase);if(null==T)return;const{fontStyleName:B}=g,U=v+(B?"-"+B.toLowerCase():"-regular"),W=U;"string"==typeof T&&T.includes("[")&&g.fieldMap&&(T=(0,p.Qs)(g.fieldMap,T,g.textCase)),a.push({type:"text",templateHash:F,materialHash:H||"function"==typeof T||T.match(/\[(.*?)\]/)?(e,t,o)=>W+"-"+(0,p.hf)(T,e,t,o):W+"-"+(0,s.hP)(T),cim:g,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:c,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:U,decoration:N,weight:j(w,n,"Weight",l,S.weight),style:j(w,n,"Size",l,S.style),size:j(w,n,"Size",l,L),angle:j(w,n,"Rotation",l,I),offsetX:j(w,n,"OffsetX",l,z),offsetY:j(w,n,"OffsetY",l,R),horizontalAlignment:C(g.horizontalAlignment),verticalAlignment:O(g.verticalAlignment),text:T,color:X,outlineColor:$,outlineSize:J,referenceSize:m,sizeRatio:1,markerPlacement:o})}function T(e,t,o,i,n,r,a,c,m,y,g,d,N,S){const v=n.symbol,b=v.symbolLayers;if(!b)return;if(S)return void U(e,t,o,i,n,a,r,c,m,y,g,d,N);let C=b.length;if(oe(b))return void B(e,t,o,i,n,b,r,a,c,m,g,d,N);const O=h.j.applyEffects(v.effects,n.geometry,y.geometryEngine);if(O)for(;C--;){const S=b[C];if(S&&!1!==S.enable)switch(S.type){case"CIMSolidFill":case"CIMSolidStroke":{const v=h.j.applyEffects(S.effects,O,y.geometryEngine),b=(0,u.bk)(v);if(!b)continue;const[C,k,P]=(0,u.UV)(b,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),M="CIMSolidFill"===S.type,x={type:"sdf",geom:v,asFill:M},A=e.primitiveName,w=(0,p.NA)(e.size)??10,L=(0,p.NA)(e.rotation),I=(0,p.NA)(e.offsetX),z=(0,p.NA)(e.offsetY),R=S.path,X=S.primitiveName,$=(0,p.NO)(M?f.B$.getFillColor(S):f.B$.getStrokeColor(S)),J=M?{r:0,g:0,b:0,a:0}:(0,p.NO)(f.B$.getStrokeColor(S)),H=f.B$.getStrokeWidth(S);if(!M&&!H)break;let Y=!1,E="";for(const e of r)e.primitiveName!==X&&e.primitiveName!==A||(void 0!==e.value?E+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(Y=!0));(0,l.pC)(t)&&"function"==typeof t&&(Y=!0);const F=JSON.stringify({...e,markerGraphics:null}),T=(0,s.hP)(JSON.stringify(x)+R).toString(),B={type:"marker",templateHash:(0,s.hP)(JSON.stringify(n)+JSON.stringify(S)+F+E).toString(),materialHash:Y?()=>T:T,cim:x,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:g,anchorPoint:{x:k,y:P},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,a,"Size",c,w),rotation:j(e.primitiveName,a,"Rotation",c,L),offsetX:j(e.primitiveName,a,"OffsetX",c,I),offsetY:j(e.primitiveName,a,"OffsetY",c,z),scaleX:1,frameHeight:N,rotateClockwise:e.rotateClockwise,referenceSize:d,sizeRatio:C,color:j(X,a,"Color",c,$,D),outlineColor:j(X,a,"Color",c,J,D),outlineWidth:j(X,a,"Width",c,H),markerPlacement:o,animatedSymbolProperties:i,path:R};m.push(B);break}default:U(e,t,o,i,n,a,r,c,m,y,g,d,N)}}}function B(e,t,o,i,n,r,l,a,c,m,h,y,g){const d=n.geometry,N=r[0],S=r[1],v=(0,u.bk)(d);if(!v)return;const[b,C,O]=(0,u.UV)(v,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),k={type:"sdf",geom:d,asFill:!0},P=e.primitiveName,M=(0,p.NA)(e.size),x=(0,p.NA)(e.rotation),A=(0,p.NA)(e.offsetX),w=(0,p.NA)(e.offsetY),L=S.path,I=S.primitiveName,z=N.primitiveName,R=(0,p.NO)(f.B$.getFillColor(S)),X=(0,p.NO)(f.B$.getStrokeColor(N)),$=f.B$.getStrokeWidth(N);let J=!1,H="";for(const s of l)s.primitiveName!==I&&s.primitiveName!==z&&s.primitiveName!==P||(void 0!==s.value?H+=`-${s.primitiveName}-${s.propertyName}-${JSON.stringify(s.value)}`:s.valueExpressionInfo&&(J=!0));const Y=JSON.stringify({...e,markerGraphics:null}),E=(0,s.hP)(JSON.stringify(k)+L).toString(),F={type:"marker",templateHash:(0,s.hP)(JSON.stringify(n)+JSON.stringify(S)+JSON.stringify(N)+Y+H).toString(),materialHash:J?()=>E:E,cim:k,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:C,y:O},isAbsoluteAnchorPoint:!1,size:j(e.primitiveName,a,"Size",c,M),rotation:j(e.primitiveName,a,"Rotation",c,x),offsetX:j(e.primitiveName,a,"OffsetX",c,A),offsetY:j(e.primitiveName,a,"OffsetY",c,w),scaleX:1,frameHeight:g,rotateClockwise:e.rotateClockwise,referenceSize:y,sizeRatio:b,color:j(I,a,"Color",c,R,D),outlineColor:j(z,a,"Color",c,X,D),outlineWidth:j(z,a,"Width",c,$),markerPlacement:o,path:L,animatedSymbolProperties:i};m.push(F)}function U(e,t,o,i,n,r,c,m,u,h,y,g,d){const N=W(e,n);let S=[];const v=["Rotation","OffsetX","OffsetY"];S=c.filter((t=>t.primitiveName!==e.primitiveName||!v.includes(t.propertyName)));let b="";for(const l of c)void 0!==l.value&&(b+=`-${l.primitiveName}-${l.propertyName}-${JSON.stringify(l.value)}`);const[C,O,k]=f.B$.getTextureAnchor(N,h),P=e.primitiveName,M=(0,p.NA)(e.rotation),x=(0,p.NA)(e.offsetX),A=(0,p.NA)(e.offsetY),w=(0,s.hP)(JSON.stringify(N)+b).toString(),L={type:"marker",templateHash:w,materialHash:S.length>0||(0,l.pC)(t)&&"function"==typeof t?Q(w,r,S,m):w,cim:N,materialOverrides:S,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:y,anchorPoint:{x:C,y:O},isAbsoluteAnchorPoint:!1,size:e.size,rotation:j(P,r,"Rotation",m,M),offsetX:j(P,r,"OffsetX",m,x),offsetY:j(P,r,"OffsetY",m,A),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:g,sizeRatio:k/(0,a.F2)(e.size),markerPlacement:o,animatedSymbolProperties:i};u.push(L)}function W(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function G(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function D(e){if(!e||0===e.length)return null;const t=new i.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function j(e,t,o,i,n,r,l){const a=t[e];if(a){const e=a[o];if("string"==typeof e||"number"==typeof e||e instanceof Array)return r?r.call(null,e,l):e;if(null!=e&&e instanceof c.mz)return(t,o,a)=>{let s=(0,y.Z)(e,t,{$view:a},i.geometryType,o);return null!==s&&r&&(s=r.call(null,s,l)),null!==s?s:n}}return n}function Z(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e}function V(e,t,o,i){for(const n of t)if(n.valueExpressionInfo){const e=o[n.primitiveName]&&o[n.primitiveName][n.propertyName];e instanceof c.mz&&(n.fn=(t,o,n)=>(0,y.Z)(e,t,{$view:n},i.geometryType,o))}return(o,i,r)=>{for(const e of t)e.fn&&(e.value=e.fn(o,i,r));const l=[];for(let a of e){const e=a?.primitiveName;if(e){let o=!1;for(const i of t)if(i.primitiveName===e){const e=Z(i.propertyName);null!=i.value&&i.value!==a[e]&&(o||(a=(0,n.d9)(a),o=!0),a[e]=i.value)}}l.push(a)}return l}}function q(e,t,o,i){const r=[];if(f.E0.findApplicableOverrides(e,t,r),0===r.length)return e;for(const n of r)if(n.valueExpressionInfo){const e=o[n.primitiveName]&&o[n.primitiveName][n.propertyName];e instanceof c.mz&&(n.fn=(t,o,n)=>(0,y.Z)(e,t,{$view:n},i.geometryType,o))}return(t,o,i)=>{for(const e of r)e.fn&&(e.value=e.fn(t,o,i));const l=(0,n.d9)(e),a=e.primitiveName;for(const e of r)if(e.primitiveName===a){const t=Z(e.propertyName);null!=e.value&&e.value!==l[t]&&(l[t]=e.value)}return l}}function _(e,t,o,i){const r=[];if(f.E0.findApplicableOverrides(e,t,r),0===r.length)return e;for(const n of r)if(n.valueExpressionInfo){const e=o[n.primitiveName]&&o[n.primitiveName][n.propertyName];e instanceof c.mz&&(n.fn=(t,o,n)=>(0,y.Z)(e,t,{$view:n},i.geometryType,o))}return(t,o,i)=>{for(const e of r)e.fn&&(e.value=e.fn(t,o,i));const l=(0,n.d9)(e),a=e.primitiveName;for(const e of r)if(e.primitiveName===a){const t=Z(e.propertyName);null!=e.value&&e.value!==l[t]&&(l[t]=e.value)}return l}}function Q(e,t,o,i){for(const n of o)if(n.valueExpressionInfo){const e=t[n.primitiveName]&&t[n.primitiveName][n.propertyName];e instanceof c.mz&&(n.fn=(t,o,n)=>(0,y.Z)(e,t,{$view:n},i.geometryType,o))}return(t,i,n)=>{for(const e of o)e.fn&&(e.value=e.fn(t,i,n));return(0,s.hP)(e+f.E0.buildOverrideKey(o)).toString()}}function K(e,t){if(!t||0===t.length)return e;const o=JSON.parse(JSON.stringify(e));return f.E0.applyOverrides(o,t),o}function ee(e,t,o,i,n){let r=!1,a="";for(const l of e)l.primitiveName===t&&(void 0!==l.value?a+=`-${l.primitiveName}-${l.propertyName}-${JSON.stringify(l.value)}`:l.valueExpressionInfo&&(r=!0));return(0,l.pC)(o)&&"function"==typeof o&&(r=!0),(0,l.pC)(i)&&"function"==typeof i&&(r=!0),(0,l.pC)(n)&&"function"==typeof n&&(r=!0),[r,a]}function te(e,t,o){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=e.symbolLayers;if(!i)return;for(const e of i)switch(ne(e,t,o),e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&o.push(t.fetchResource(e.url,null));break;case"CIMVectorMarker":{const i=e.markerGraphics;if(!i)continue;for(const e of i)if(e){const i=e.symbol;i&&te(i,t,o)}}}}}}const oe=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects;let ie;function ne(e,t,o){e.effects&&!(0,l.pC)(t.geometryEngine)&&(ie?o.push(ie):(0,p.Cc)(e.effects)&&(ie=(0,p.RI)(),o.push(ie),ie.then((e=>t.geometryEngine=e))))}},73347:function(e,t,o){o.d(t,{j:function(){return s}});var i=o(90421),n=o(49442),r=o(26492),l=o(20058);const a=96/72;class s{static executeEffects(e,t,o){const i=(0,n.GP)(t),s=a;let c=new r.M(i);for(const n of e){const e=(0,l.h)(n);e&&(c=e.execute(c,n,s,o))}return c}static next(e){const t=e.next();return(0,n.wp)(t),t}static applyEffects(e,t,o){if(!e)return t;let n=new r.M(t);for(const i of e){const e=(0,l.h)(i);e&&(n=e.execute(n,i,1,o))}let a,s=null;for(;a=n.next();)s?(0,i.l9)(s)?(0,i.l9)(a)&&s.paths.push(...a.paths):(0,i.oU)(s)&&(0,i.oU)(a)&&s.rings.push(...a.rings):s=a;return s}}},54781:function(e,t,o){o.d(t,{BN:function(){return i},Yc:function(){return n}});function i(e){const t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function n(e){const t=r(e)+l(e);return i(e.family)+(t.length>0?t:"-regular")}function r(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function l(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}},40741:function(e,t,o){o.d(t,{$:function(){return r},f:function(){return n}});var i=o(14201);function n(e,t){let o;if("string"==typeof e)o=(0,i.hP)(e+`-seed(${t})`);else{let i=12;o=e^t;do{o=107*(o>>8^o)+i|0}while(0!=--i)}return(1+o/(1<<31))/2}function r(e){return Math.floor(n(e,l)*a)}const l=53290320,a=10}}]);
//# sourceMappingURL=2427.f788754c.js.map