"use strict";(self["webpackChunkeco_friendly"]=self["webpackChunkeco_friendly"]||[]).push([[380],{6884:function(t,e,r){r.d(e,{Y:function(){return o}});var n=r(8693);function i(t,e){return t?e?4:3:e?3:2}function o(t,e,r,o,l){if((0,n.Wi)(e)||!e.lengths.length)return null;const c="upperLeft"===l?.originPosition?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const u=t.coords,d=[],h=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:f}=e,g=i(r,o);let p=0;for(const n of I){const t=s(h,f,p,n,r,o,c);t&&d.push(t),p+=n*g}if(d.sort(((t,e)=>{let n=c*t[2]-c*e[2];return 0===n&&r&&(n=t[4]-e[4]),n})),d.length){let t=6*d[0][2];u[0]=d[0][0]/t,u[1]=d[0][1]/t,r&&(t=6*d[0][4],u[2]=0!==t?d[0][3]/t:0),(u[0]<h[0]||u[0]>h[1]||u[1]<h[2]||u[1]>h[3]||r&&(u[2]<h[4]||u[2]>h[5]))&&(u.length=0)}if(!u.length){const t=e.lengths[0]?a(f,0,I[0],r,o):null;if(!t)return null;u[0]=t[0],u[1]=t[1],r&&t.length>2&&(u[2]=t[2])}return t}function s(t,e,r,n,o,s,a=1){const l=i(o,s);let c=r,u=r+l,d=0,h=0,I=0,f=0,g=0;for(let i=0,N=n-1;i<N;i++,c+=l,u+=l){const r=e[c],n=e[c+1],i=e[c+2],s=e[u],a=e[u+1],l=e[u+2];let p=r*a-s*n;f+=p,d+=(r+s)*p,h+=(n+a)*p,o&&(p=r*l-s*i,I+=(i+l)*p,g+=p),r<t[0]&&(t[0]=r),r>t[1]&&(t[1]=r),n<t[2]&&(t[2]=n),n>t[3]&&(t[3]=n),o&&(i<t[4]&&(t[4]=i),i>t[5]&&(t[5]=i))}if(f*a>0&&(f*=-1),g*a>0&&(g*=-1),!f)return null;const p=[d,h,.5*f];return o&&(p[3]=I,p[4]=.5*g),p}function a(t,e,r,n,o){const s=i(n,o);let a=e,h=e+s,I=0,f=0,g=0,p=0;for(let i=0,N=r-1;i<N;i++,a+=s,h+=s){const e=t[a],r=t[a+1],i=t[a+2],o=t[h],s=t[h+1],N=t[h+2],y=n?c(e,r,i,o,s,N):l(e,r,o,s);if(y)if(I+=y,n){const t=d(e,r,i,o,s,N);f+=y*t[0],g+=y*t[1],p+=y*t[2]}else{const t=u(e,r,o,s);f+=y*t[0],g+=y*t[1]}}return I>0?n?[f/I,g/I,p/I]:[f/I,g/I]:r>0?n?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function l(t,e,r,n){const i=r-t,o=n-e;return Math.sqrt(i*i+o*o)}function c(t,e,r,n,i,o){const s=n-t,a=i-e,l=o-r;return Math.sqrt(s*s+a*a+l*l)}function u(t,e,r,n){return[t+.5*(r-t),e+.5*(n-e)]}function d(t,e,r,n,i,o){return[t+.5*(n-t),e+.5*(i-e),r+.5*(o-r)]}},17771:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var n=r(61445),i=r(39264),o=r(8693),s=r(18105),a=r(58006),l=(r(15055),r(81653),r(94315),r(77623)),c=r(65057),u=r(82327),d=r(19134),h=r(4343),I=r(31698);const f=.2;let g=class extends((0,c.N)((0,d.A)(I.Z))){constructor(){super(...arguments),this.type="integrated-mesh-3d",this.lodFactor=1,this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=u.a.WithoutRasterImage}get progressiveLoadFactor(){return this.lodFactor>=1?f:1}initialize(){this.updatingHandles.add((()=>this.layer.modifications),(()=>this._loadModifications()),s.nn),this.view.basemapTerrain.overlayManager.registerDrapeTarget(this)}destroy(){this.view.basemapTerrain.overlayManager.unregisterDrapeTarget(this)}_createLayerGraphic(){const t=new i.Z;return t.layer=this.layer,t.sourceLayer=this.layer,t}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),(0,o.Wi)(this.layer.modifications))return void(this._modifications=[]);const t=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange((()=>t),(()=>this._modifications=t.toArray()),s.nn),"modifications")}};(0,n._)([(0,a.Cb)()],g.prototype,"layer",void 0),(0,n._)([(0,a.Cb)({aliasOf:"layer"})],g.prototype,"i3slayer",void 0),(0,n._)([(0,a.Cb)(h.q)],g.prototype,"updatingProgress",void 0),(0,n._)([(0,a.Cb)({readOnly:!0,aliasOf:"_controller.updatingProgress"})],g.prototype,"updatingProgressValue",void 0),(0,n._)([(0,a.Cb)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],g.prototype,"lodFactor",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],g.prototype,"progressiveLoadFactor",null),g=(0,n._)([(0,l.j)("esri.views.3d.layers.SceneLayerView3D")],g);const p=g}}]);
//# sourceMappingURL=380.d68a6ca3.js.map