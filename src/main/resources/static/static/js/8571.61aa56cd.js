"use strict";(self["webpackChunkeco_friendly"]=self["webpackChunkeco_friendly"]||[]).push([[8571],{98571:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var s=i(61445),r=i(8693),n=i(18105),a=i(58006),l=(i(15055),i(81653),i(94315),i(77623)),o=i(19134),d=i(83108),p=i(26466),u=i(81789),c=i(31698);let h=class extends((0,o.A)(c.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new d.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.setup()),this.handles.add(this.layer.on("graphic-update",(e=>this.processor.graphicsCore.graphicUpdateHandler(e)))),this.addResolvingPromise((0,p.E)(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,n.gx)((()=>this.view?.basemapTerrain?.ready),(()=>()=>this.notifyChange("updating")),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,r.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const e=super.getSuspendInfo();return e.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,e.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,e}async fetchPopupFeatures(e,t){return(0,r.pC)(t)?t.clientGraphics:null}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor?.computeAttachmentOrigin(e,t)}getSymbolLayerSize(e,t){return this.processor.getSymbolLayerSize(e,t)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return this.processor.highlight(e)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||u.jq.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&(this.layer.internal||this.view?.basemapTerrain?.ready))}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended??!1}}};(0,s._)([(0,a.Cb)()],h.prototype,"loadedGraphics",null),(0,s._)([(0,a.Cb)({readOnly:!0})],h.prototype,"legendEnabled",null),(0,s._)([(0,a.Cb)()],h.prototype,"layer",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],h.prototype,"processor",void 0),(0,s._)([(0,a.Cb)({type:Boolean})],h.prototype,"slicePlaneEnabled",void 0),h=(0,s._)([(0,l.j)("esri.views.3d.layers.GraphicsLayerView3D")],h);const y=h},19134:function(e,t,i){i.d(t,{A:function(){return p}});var s=i(61445),r=i(2323),n=i(92454),a=i(18105),l=i(58006),o=(i(15055),i(81653),i(94315),i(77623)),d=i(73228);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,d.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.handles.add((0,r.kB)((()=>e.abort()))),await(0,a.N1)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,n.k_)(t);const i=(0,d.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return(0,s._)([(0,l.Cb)()],t.prototype,"view",void 0),(0,s._)([(0,l.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,s._)([(0,o.j)("esri.views.3d.layers.LayerView3D")],t),t}},26466:function(e,t,i){i.d(t,{E:function(){return a}});var s=i(8693),r=i(31957),n=i(84178);function a(e){const t=e.view.spatialReference,i=e.layer.fullExtent,a=(0,s.pC)(i)&&i.spatialReference;if((0,s.Wi)(i)||!a)return Promise.resolve(null);if(a.equals(t))return Promise.resolve(i.clone());const l=(0,r.iV)(i,t);return(0,s.pC)(l)?Promise.resolve(l):e.view.state.isLocal?(0,n.projectGeometry)(i,t,e.layer.portalItem).then((t=>!e.destroyed&&t?t:void 0)).catch((()=>null)):Promise.resolve(null)}},31698:function(e,t,i){i.d(t,{Z:function(){return y}});var s=i(61445),r=i(92698),n=i(96545),a=i(30374),l=i(68650),o=i(93622),d=i(8693),p=i(66144),u=i(58006),c=(i(15055),i(81653),i(94315),i(77623));let h=class extends((0,a.p)((0,l.IG)((0,p.v)(n.Z.EventedMixin(r.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";o.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}}))}get fullOpacity(){return(0,d.Pt)(this.get("layer.opacity"),1)*(0,d.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,s._)([(0,u.Cb)()],h.prototype,"fullOpacity",null),(0,s._)([(0,u.Cb)()],h.prototype,"layer",void 0),(0,s._)([(0,u.Cb)()],h.prototype,"parent",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],h.prototype,"suspended",null),(0,s._)([(0,u.Cb)({readOnly:!0})],h.prototype,"suspendInfo",null),(0,s._)([(0,u.Cb)({readOnly:!0})],h.prototype,"legendEnabled",null),(0,s._)([(0,u.Cb)({type:Boolean,readOnly:!0})],h.prototype,"updating",null),(0,s._)([(0,u.Cb)({readOnly:!0})],h.prototype,"updatingProgress",null),(0,s._)([(0,u.Cb)()],h.prototype,"visible",null),(0,s._)([(0,u.Cb)()],h.prototype,"view",void 0),h=(0,s._)([(0,c.j)("esri.views.layers.LayerView")],h);const y=h}}]);
//# sourceMappingURL=8571.61aa56cd.js.map