"use strict";(self["webpackChunkeco_friendly"]=self["webpackChunkeco_friendly"]||[]).push([[4954],{17950:function(e,t,i){i.d(t,{I:function(){return v},b:function(){return x}});var n=i(8693),s=i(12686),r=i(15626),a=i(36315),o=i(26616),l=i(97195),h=i(50213),u=i(56606),d=i(70516),p=i(8953),c=i(73893),m=i(65982),y=i(63914),_=i(84970),f=i(81789),g=i(30150);function x(e){const t=new y.kG;(0,d.S)(t,e),t.include(o.w),t.attributes.add(g.T.POSITION,"vec3"),t.attributes.add(g.T.UV0,"vec2"),t.varyings.add("vpos","vec3"),e.hasMultipassTerrain&&t.varyings.add("depth","float");const{vertex:i,fragment:x}=t;return i.uniforms.add(new p.A("textureCoordinateScaleFactor",(e=>(0,n.pC)(e.texture)&&(0,n.pC)(e.texture.descriptor.textureCoordinateScaleFactor)?e.texture.descriptor.textureCoordinateScaleFactor:s.O))),i.code.add(m.H`
    void main(void) {
      vpos = position;
      ${e.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0 * textureCoordinateScaleFactor;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `),t.include(a.f5,e),t.include(l.l,e),x.uniforms.add([new _.A("tex",(e=>e.texture)),new c.p("opacity",(e=>e.opacity))]),t.varyings.add("vTexCoord","vec2"),e.output===r.H.Alpha?x.code.add(m.H`
    void main() {
      discardBySlice(vpos);
      ${e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture2D(tex, vTexCoord).a * opacity;
      if (alpha  < ${m.H.float(h.F)}) {
        discard;
      }

      gl_FragColor = vec4(alpha);
    }
    `):(x.include(u.Y),x.code.add(m.H`
    void main() {
      discardBySlice(vpos);
      ${e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      gl_FragColor = texture2D(tex, vTexCoord) * opacity;

      if (gl_FragColor.a < ${m.H.float(h.F)}) {
        discard;
      }

      gl_FragColor = highlightSlice(gl_FragColor, vpos);
      ${e.transparencyPassType===f.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
    `)),t}const v=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}))},37995:function(e,t,i){i.d(t,{SR:function(){return d},Ui:function(){return u}});var n=i(8693),s=i(74440),r=i(43392),a=i(58611),o=i(90421),l=i(87327),h=i(54597);function u(e){return p(e,!0)}function d(e){return p(e,!1)}function p(e,t){if((0,n.Wi)(e))return null;const i=e.spatialReference,s=(0,h.C5)(i),a="toJSON"in e?e.toJSON():e;if(!s)return a;const u=(0,h.sS)(i)?102100:4326,d=l.UZ[u].maxX,p=l.UZ[u].minX;if((0,o.wp)(a))return m(a,d,p);if((0,o.aW)(a))return a.points=a.points.map((e=>m(e,d,p))),a;if((0,o.YX)(a))return c(a,s);if((0,o.oU)(a)||(0,o.l9)(a)){const e=(0,r.$P)(C,a),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},n=(0,l.XZ)(i.xmin,p)*(2*d),s=0===n?a:(0,l.Sy)(a,n);return i.xmin+=n,i.xmax+=n,i.xmax>d?x(s,d,t):i.xmin<p?x(s,p,t):s}return a}function c(e,t){if(!t)return e;const i=y(e,t).map((e=>e.extent));return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}}function m(e,t,i){if(Array.isArray(e)){const n=e[0];if(n>t){const i=(0,l.XZ)(n,t);e[0]=n+i*(-2*t)}else if(n<i){const t=(0,l.XZ)(n,i);e[0]=n+t*(-2*i)}}else{const n=e.x;if(n>t){const i=(0,l.XZ)(n,t);e.x+=i*(-2*t)}else if(n<i){const t=(0,l.XZ)(n,i);e.x+=t*(-2*i)}}return e}function y(e,t){const i=[],{ymin:n,ymax:s,xmin:r,xmax:a}=e,o=e.xmax-e.xmin,[l,h]=t.valid,{x:u,frameId:d}=_(e.xmin,t),{x:p,frameId:c}=_(e.xmax,t),m=u===p&&o>0;if(o>2*h){const e={xmin:r<a?u:p,ymin:n,xmax:h,ymax:s},t={xmin:l,ymin:n,xmax:r<a?p:u,ymax:s},o={xmin:0,ymin:n,xmax:h,ymax:s},m={xmin:l,ymin:n,xmax:0,ymax:s},y=[],_=[];f(e,o)&&y.push(d),f(e,m)&&_.push(d),f(t,o)&&y.push(c),f(t,m)&&_.push(c);for(let i=d+1;i<c;i++)y.push(i),_.push(i);i.push(new v(e,[d]),new v(t,[c]),new v(o,y),new v(m,_))}else u>p||m?i.push(new v({xmin:u,ymin:n,xmax:h,ymax:s},[d]),new v({xmin:l,ymin:n,xmax:p,ymax:s},[c])):i.push(new v({xmin:u,ymin:n,xmax:p,ymax:s},[d]));return i}function _(e,t){const[i,n]=t.valid,s=2*n;let r,a=0;return e>n?(r=Math.ceil(Math.abs(e-n)/s),e-=r*s,a=r):e<i&&(r=Math.ceil(Math.abs(e-i)/s),e+=r*s,a=-r),{x:e,frameId:a}}function f(e,t){const{xmin:i,ymin:n,xmax:s,ymax:r}=t;return g(e,i,n)&&g(e,i,r)&&g(e,s,r)&&g(e,s,n)}function g(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function x(e,t,i=!0){const n=!(0,o.l9)(e);if(n&&(0,a.Zy)(e),i)return(new T).cut(e,t);const s=n?e.rings:e.paths,r=n?4:2,l=s.length,h=-2*t;for(let a=0;a<l;a++){const e=s[a];if(e&&e.length>=r){const t=[];for(const i of e)t.push([i[0]+h,i[1]]);s.push(t)}}return n?e.rings=s:e.paths=s,e}class v{constructor(e,t){this.extent=e,this.frameIds=t}}const C=(0,s.Ue)();class T{constructor(){this.linesIn=[],this.linesOut=[]}cut(e,t){let i;if(this.xCut=t,e.rings)this.closed=!0,i=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,i=e.paths,this.minPts=2}for(const s of i){if(!s||s.length<this.minPts)continue;let e=!0;for(const t of s)e?(this.moveTo(t),e=!1):this.lineTo(t);this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),i=[];for(const s of this.linesIn)s&&s.length>=this.minPts&&i.push(s);const n=-2*this.xCut;for(const s of this.linesOut)if(s&&s.length>=this.minPts){for(const e of s)e[0]+=n;i.push(s)}return this.closed?e.rings=i:e.paths=i,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){const t=this._side(e[0]);if(t*this._prevSide==-1){const i=this._intersect(this._prevPt,e);this._lineTo(this.xCut,i,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){const e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)}_moveTo(e,t,i){this.closed?(this.lineIn.push([i<=0?e:this.xCut,t]),this.lineOut.push([i>=0?e:this.xCut,t])):(i<=0&&this.lineIn.push([e,t]),i>=0&&this.lineOut.push([e,t]))}_lineTo(e,t,i){this.closed?(this._addPolyVertex(this.lineIn,i<=0?e:this.xCut,t),this._addPolyVertex(this.lineOut,i>=0?e:this.xCut,t)):i<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([e,t])):i>0?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([e,t])):this._prevSide<0?(this.lineIn.push([e,t]),this.lineOut.push([e,t])):this._prevSide>0&&(this.lineOut.push([e,t]),this.lineIn.push([e,t]))}_addPolyVertex(e,t,i){const n=e.length;n>1&&e[n-1][0]===t&&e[n-2][0]===t?e[n-1][1]=i:e.push([t,i])}_checkClosingPt(e){const t=e.length;t>3&&e[0][0]===this.xCut&&e[t-2][0]===this.xCut&&e[1][0]===this.xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this.xCut?-1:e>this.xCut?1:0}_intersect(e,t){const i=(this.xCut-e[0])/(t[0]-e[0]);return e[1]+i*(t[1]-e[1])}_pushLineIn(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]}_pushLineOut(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]}}},48791:function(e,t,i){i.d(t,{L:function(){return p}});var n=i(61445),s=i(92698),r=i(8693),a=i(58006),o=(i(15055),i(81653),i(94315),i(77623)),l=i(91407),h=i(47608),u=i(74440),d=i(37995);let p=class extends s.Z{constructor(e){super(e)}get bounds(){const e=this.coords;return(0,r.Wi)(e)?null:(0,u.oJ)(e.extent)}get coords(){const e=(0,r.Wg)(this.element.georeference)?.coords;return(0,h.dz)(e,this.spatialReference).geometry}get normalizedCoords(){return l.Z.fromJSON((0,d.Ui)(this.coords))}get normalizedBounds(){return(0,r.pC)(this.normalizedCoords)?(0,u.oJ)(this.normalizedCoords.extent):null}};(0,n._)([(0,a.Cb)()],p.prototype,"spatialReference",void 0),(0,n._)([(0,a.Cb)()],p.prototype,"element",void 0),(0,n._)([(0,a.Cb)()],p.prototype,"bounds",null),(0,n._)([(0,a.Cb)()],p.prototype,"coords",null),(0,n._)([(0,a.Cb)()],p.prototype,"normalizedCoords",null),(0,n._)([(0,a.Cb)()],p.prototype,"normalizedBounds",null),p=(0,n._)([(0,o.j)("esri.layers.support.media.MediaElementView")],p)},19134:function(e,t,i){i.d(t,{A:function(){return u}});var n=i(61445),s=i(2323),r=i(92454),a=i(18105),o=i(58006),l=(i(15055),i(81653),i(94315),i(77623)),h=i(73228);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,h.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.handles.add((0,s.kB)((()=>e.abort()))),await(0,a.N1)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,r.k_)(t);const i=(0,h.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return(0,n._)([(0,o.Cb)()],t.prototype,"view",void 0),(0,n._)([(0,o.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,n._)([(0,l.j)("esri.views.3d.layers.LayerView3D")],t),t}},64954:function(e,t,i){i.r(t),i.d(t,{default:function(){return P}});i(48675),i(3462),i(37380),i(1118);var n=i(61445),s=i(2323),r=i(8693),a=i(92454),o=i(18105),l=i(58006),h=(i(15055),i(81653),i(94315),i(77623)),u=i(74440),d=i(48791),p=i(82327),c=i(19134),m=i(94201),y=i(81789),_=i(23168),f=i(90322),g=i(55959),x=i(49162),v=i(30150),C=i(21151),T=i(31698),w=i(17923);let S=class extends((0,c.A)(T.Z)){constructor(){super(...arguments),this.type="media-3d",this.drapeSourceType=p.L.RasterImage,this.updatePolicy=y.jq.ASYNC,this._uidToElement=new Map,this._renderedElements=new Map,this._lastDrapingExtent=null,this._update=(0,a.Ds)((async(e,t,i)=>{const n=await this._collectMediaElements(e,t,i);this._synchronizeRenderElements(n)}),0)}initialize(){this._renderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.handles.add([(0,s.kB)((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this))),(0,o.on)((()=>this.layer.source),"refresh",(()=>this._updateWithLastDrapingExtent()))]),this.updatingHandles.add((()=>this.suspended),(()=>this._updateWithLastDrapingExtent()))}setDrapingExtent(e,t){this._lastDrapingExtent={overlays:e,spatialReference:t},this._updateWithLastDrapingExtent()}getHit(e){const t=this._uidToElement.get(e);return t?{type:"media",element:t,layer:this.layer}:null}_updateWithLastDrapingExtent(){if((0,r.Wi)(this._lastDrapingExtent)||this.suspended)return void(this._renderer&&this._synchronizeRenderElements(new Set));const{overlays:e,spatialReference:t}=this._lastDrapingExtent;this.updatingHandles.addPromise(this._update(e,t).catch((()=>{})))}async _collectMediaElements(e,t,i){const n=this.layer.source;return(0,r.Wi)(n)?new Set:new Set((await Promise.all(e.map((e=>n.queryElements((0,u.HH)(e.extent,t),{signal:i}))))).flat())}_synchronizeRenderElements(e){this._synchronizeRenderElementsRemove(e),this._synchronizeRenderElementsAdd(e)}_synchronizeRenderElementsRemove(e){const t=new Set,i=[];this._renderedElements.forEach(((n,s)=>{e.has(s)||(t.add(s),(0,r.pC)(n.renderData)&&i.push(n.renderData.renderGeometry),this._removeElement(s,n))})),this._renderer.removeGeometries(i,f.$.Geometry.REMOVE)}_synchronizeRenderElementsAdd(e){for(const t of e)this._renderedElements.has(t)||this._createRenderElement(t)}_removeElement(e,{renderData:t,handle:i}){this._destroyRenderData(t),this._renderedElements.delete(e),this._uidToElement.delete(e.uid),i.remove()}async _createRenderElement(e){const t=new d.L({spatialReference:this.view.spatialReference,element:e}),i={renderData:null,handle:(0,s.AL)([this.updatingHandles.add((()=>e.opacity),(e=>{(0,r.pC)(i.renderData)&&i.renderData.material.setParameters({opacity:e})})),this.updatingHandles.add((()=>t.coords),(e=>{(0,r.pC)(i.renderData)?this._updateGeometry(i,i.renderData,e):this._initializeRenderData(t,i)})),this.updatingHandles.add((()=>e.content),(()=>this._initializeRenderData(t,i))),(0,s.ed)(t)])};this._renderedElements.set(e,i),this._uidToElement.set(e.uid,e),this.updatingHandles.addPromise(e.load().catch((()=>{}))),this._initializeRenderData(t,i)}_initializeRenderData(e,t){const{coords:i,element:n}=e;if((0,r.Wi)(i)||(0,r.Wi)(n.content))return void(t.renderData=this._destroyRenderData(t.renderData));if((0,r.pC)(t.renderData))return;const s=this._createTexture(n.content);this.view._stage.add(s);const o=this.view._stage.loadImmediate(s);(0,a.y8)(o)&&this.updatingHandles.addPromise(o);const l=new C.j({initTextureTransparent:!0,textureId:s.id,opacity:n.opacity,transparent:!0}),h=this._positionVertexBufferFromCoordinates(i),u=[0,0,1,0,1,1,0,1],d=new Uint16Array([0,1,2,0,2,3]),p=new _.Z([[v.T.POSITION,{data:h,size:3,exclusive:!0}],[v.T.UV0,{data:u,size:2,exclusive:!0}]],[[v.T.POSITION,d],[v.T.UV0,d]]),c=new g.z(p,l,{layerUid:this.layer.uid,graphicUid:n.uid});this._renderer.addGeometries([c],f.$.Geometry.ADD),t.renderData={renderGeometry:c,texture:s,material:l}}_updateGeometry(e,t,i){if((0,r.Wi)(i))return void(e.renderData=this._destroyRenderData(e.renderData));const n=this._positionVertexBufferFromCoordinates(i);t.renderGeometry.vertexAttributes.get(v.T.POSITION).data=n,this._renderer.modifyGeometries([t.renderGeometry],f.$.State.VERTEXATTRS)}_positionVertexBufferFromCoordinates(e){const[t,i,n,s]=e.rings[0];return new Float64Array([t[0],t[1],m.Rn,s[0],s[1],m.Rn,n[0],n[1],m.Rn,i[0],i[1],m.Rn])}_destroyRenderData(e){return(0,r.Wi)(e)||(this.view._stage.remove(e.texture),this._renderer.removeGeometries([e.renderGeometry],f.$.Geometry.REMOVE),e.material.dispose()),null}_createTexture(e){const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,i=e instanceof HTMLImageElement?e.naturalHeight:e.height;return new x.x(e,{wrap:{s:w.e8.CLAMP_TO_EDGE,t:w.e8.CLAMP_TO_EDGE},preMultiplyAlpha:!0,width:t,height:i,mipmap:!0,powerOfTwoResizeMode:y.CE.STRETCH,updateCallback:()=>this.view.basemapTerrain.overlayManager.setDrawTexturesDirty()})}get test(){const e=this;return{get numberOfElements(){return e._renderedElements.size}}}};(0,n._)([(0,l.Cb)({readOnly:!0})],S.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],S.prototype,"layer",void 0),S=(0,n._)([(0,h.j)("esri.views.3d.layers.MediaLayerView3D")],S);const P=S},21151:function(e,t,i){i.d(t,{j:function(){return E}});var n=i(15626),s=i(81789),r=i(22677),a=i(59753),o=i(31728),l=i(25749),h=i(75633),u=i(38306),d=i(34590),p=i(61445),c=(i(65982),i(68205)),m=i(20572),y=i(33274),_=i(85018),f=i(7436),g=i(96350),x=i(79326),v=i(17950),C=i(17923),T=i(9408);class w extends m.A{initializeProgram(e){const t=w.shader.get().build(this.configuration);return new f.$(e.rctx,t,_.i)}_setPipelineState(e,t){const i=this.configuration,r=e===s.Am.NONE,a=e===s.Am.FrontFace;return(0,T.sm)({blending:i.output!==n.H.Color&&i.output!==n.H.Alpha||!i.transparent?null:r?S:(0,l.j7)(e),culling:(0,T.zp)(i.cullFace),depthTest:{func:(0,l.Bh)(e)},depthWrite:r?i.writeDepth&&T.LZ:(0,l.K5)(e),colorWrite:T.BK,stencilWrite:i.hasOccludees?g.s3:null,stencilTest:i.hasOccludees?t?g.eD:g.RY:null,polygonOffset:r||a?null:(0,l.je)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}w.shader=new c.J(v.I,(()=>i.e(3334).then(i.bind(i,23334))));const S=(0,T["if"])(C.zi.ONE,C.zi.ONE_MINUS_SRC_ALPHA);class P extends x.W{constructor(){super(...arguments),this.output=n.H.Color,this.cullFace=s.Vr.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=s.Am.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,p._)([(0,y.o)({count:n.H.COUNT})],P.prototype,"output",void 0),(0,p._)([(0,y.o)({count:s.Vr.COUNT})],P.prototype,"cullFace",void 0),(0,p._)([(0,y.o)()],P.prototype,"hasSlicePlane",void 0),(0,p._)([(0,y.o)()],P.prototype,"transparent",void 0),(0,p._)([(0,y.o)()],P.prototype,"enableOffset",void 0),(0,p._)([(0,y.o)()],P.prototype,"writeDepth",void 0),(0,p._)([(0,y.o)()],P.prototype,"hasOccludees",void 0),(0,p._)([(0,y.o)({count:s.Am.COUNT})],P.prototype,"transparencyPassType",void 0),(0,p._)([(0,y.o)()],P.prototype,"hasMultipassTerrain",void 0),(0,p._)([(0,y.o)()],P.prototype,"cullAboveGround",void 0);class E extends o.F5{constructor(e){super(e,new b),this.supportsEdges=!0,this.techniqueConfig=new P}getConfiguration(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<l.ve,this.techniqueConfig.hasMultipassTerrain=t.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=t.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(e,t,i,n,s,r,a){(0,d.Bw)(e,t,n,s,r,void 0,a)}requiresSlot(e,t){return e===h.r.DRAPED_MATERIAL||((0,r.S)(t)===n.H.Highlight?e===h.r.OPAQUE_MATERIAL:e===(this.parameters.transparent?this.parameters.writeDepth?h.r.TRANSPARENT_MATERIAL:h.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:h.r.OPAQUE_MATERIAL))}createGLMaterial(e){return e.output===n.H.Color||e.output===n.H.Alpha||e.output===n.H.Highlight?new O(e):void 0}createBufferWriter(){return new u.G_(u.W1)}}class O extends a.F{constructor(e){super({...e,...e.material.parameters})}_updateParameters(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(w,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}beginSlot(e){return this._output!==n.H.Color&&this._output!==n.H.Alpha||this._updateOccludeeState(e),this._updateParameters(e)}}class b extends o.Mt{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=s.Vr.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0}}},31698:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(61445),s=i(92698),r=i(96545),a=i(30374),o=i(68650),l=i(93622),h=i(8693),u=i(66144),d=i(58006),p=(i(15055),i(81653),i(94315),i(77623));let c=class extends((0,a.p)((0,o.IG)((0,u.v)(r.Z.EventedMixin(s.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";l.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}}))}get fullOpacity(){return(0,h.Pt)(this.get("layer.opacity"),1)*(0,h.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,n._)([(0,d.Cb)()],c.prototype,"fullOpacity",null),(0,n._)([(0,d.Cb)()],c.prototype,"layer",void 0),(0,n._)([(0,d.Cb)()],c.prototype,"parent",void 0),(0,n._)([(0,d.Cb)({readOnly:!0})],c.prototype,"suspended",null),(0,n._)([(0,d.Cb)({readOnly:!0})],c.prototype,"suspendInfo",null),(0,n._)([(0,d.Cb)({readOnly:!0})],c.prototype,"legendEnabled",null),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],c.prototype,"updating",null),(0,n._)([(0,d.Cb)({readOnly:!0})],c.prototype,"updatingProgress",null),(0,n._)([(0,d.Cb)()],c.prototype,"visible",null),(0,n._)([(0,d.Cb)()],c.prototype,"view",void 0),c=(0,n._)([(0,p.j)("esri.views.layers.LayerView")],c);const m=c}}]);
//# sourceMappingURL=4954.3a4d3dc7.js.map