{"version":3,"file":"static/js/4231.6c5cb96c.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/TileLayerView.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return\"dot-density\"===n.type||n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{createBlankImage as n,resampleImage as c}from\"./support/imageUtils.js\";import p from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import y from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import g from\"../../layers/TileLayerView.js\";import{createQueryGeometry as w}from\"../../support/drapedUtils.js\";const _=[0,0];let I=class extends(g(d(o(h(y))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new p(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new f({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(s((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return a(this.layer.tileInfo?.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return w(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))))}isUpdating(){return this._fetchQueue?.updating??!1}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:l=0}=t;if(!s)try{return await this._fetchImage(e,r)}catch(h){if(!i(h)&&!this.resampling)return n(this._tileInfoView.tileInfo.size);if(l<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:l+1});return c(this._tileInfoView,r,s,e)}}throw h}const a=new u(0,0,0,0);let o;try{if(await s.fetchAvailabilityUpsample(e.level,e.row,e.col,a,{signal:r}),a.level!==e.level&&!this.resampling)return n(this._tileInfoView.tileInfo.size);o=await this._fetchImage(a,r)}catch(h){if(i(h))throw h;o=await this._fetchImage(e,r)}return this.resampling?c(this._tileInfoView,o,a,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"_fetchQueue\",void 0),e([r()],I.prototype,\"resampling\",null),I=e([l(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;export{V as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});if(\"tile\"!==a.type)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type});const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"names":["t","e","xoffset","Math","max","abs","yoffset","n","r","length","s","size","stops","filter","type","map","maxSize","minSize","o","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","_","I","g","d","h","y","constructor","super","arguments","this","_tileStrategy","_fetchQueue","layer","resampling","update","pause","state","resume","attach","tileServers","_tileInfoView","p","tileInfo","fullExtent","tileInfoView","concurrency","process","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","doRefresh","detach","destroy","clear","container","removeAllChildren","moveStart","viewChange","moveEnd","supportsSpatialReference","a","spatialReference","createFetchPopupFeaturesQueryGeometry","w","view","updateRequested","suspended","reset","tiles","_enqueueTileFetch","isUpdating","updating","_bitmapView","createTile","i","bitmap","x","getTileCoords","key","resolution","getTileResolution","width","height","addChild","abort","id","removeChild","once","tilemapCache","signal","resamplingLevel","l","_fetchImage","getTileParentId","u","c","fetchAvailabilityUpsample","level","row","col","has","push","source","declaredClass","error","prototype","V","get","allSublayers","toArray","minScale","maxScale","popupTemplate","popupEnabled","visible","async","createQuery","geometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax"],"sourceRoot":""}