{"version":3,"file":"static/js/8770.40ea1007.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/layers/graphics/controllers/StreamController.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/StreamLayerView.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/StreamLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Accessor.js\";import{HandleOwnerMixin as o}from\"../../../core/HandleOwner.js\";import{isSome as s}from\"../../../core/maybe.js\";import{EsriPromiseMixin as i}from\"../../../core/Promise.js\";import{watch as a}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamFeatureManager as p}from\"../data/StreamFeatureManager.js\";import{createConnection as h}from\"../sources/connections/createConnection.js\";import{EventedSet as l}from\"../../../views/3d/support/EventedSet.js\";import{featureGeometryTypeKebabDictionary as d}from\"../../../geometry/support/typeUtils.js\";const m=2500;let u=class extends t{getObjectId(){return this.objectId}};e([n({type:Number,json:{read:!0}})],u.prototype,\"objectId\",void 0),u=e([c(\"esri.layers.graphics.controllers.StreamGraphic\")],u);class y{constructor(e){this.onUpdate=e,this._idToGraphic=new Map}destroy(){this._idToGraphic.clear()}add(e){this._idToGraphic.set(e.objectId,e)}get(e){return this._idToGraphic.get(e)}forEach(e){this._idToGraphic.forEach(e)}removeById(e){const t=this._idToGraphic.get(e);return t?(t.sourceLayer=t.layer=null,this._idToGraphic.delete(e),t):null}update(e,t){this.onUpdate(e,t)}get size(){return this._idToGraphic.size}}let f=class extends(o(i(r))){constructor(){super(...arguments),this._updateInfo={websocket:0,client:0},this.graphics=new l}initialize(){this.addResolvingPromise(this.layer.when((()=>this._startup())))}destroy(){this.clear()}_clearInterval(){this._updateIntervalId&&(clearInterval(this._updateIntervalId),this._updateIntervalId=0)}clear(){this._clearInterval(),this.connection&&(this.connection.destroy(),this.connection=null),this.store&&(this.store.destroy(),this.store=null),this.graphics.clear(),this.handles.removeAll()}get updating(){return!this.connection||\"connected\"===this.connection.connectionStatus}_startup(){const{layer:e,layerView:t}=this,{parsedUrl:r,spatialReference:o,definitionExpression:s,geometryDefinition:i,objectIdField:n,timeInfo:c,purgeOptions:l,maxReconnectionAttempts:m,maxReconnectionInterval:u,customParameters:f}=e,_=d.toJSON(e.geometryType),g=o,I=t.view.spatialReference,v={geometry:i,where:s};this.clear(),this._set(\"connection\",h(r,g,I,_,v,m,u,f)),this._outSpatialReference=I.toJSON(),this.store=new y(this._onUpdate.bind(this)),this.featuresManager=new p(this.store,n,c.toJSON(),l);const j=\"startup-watches\";this.handles.remove(j),this.handles.add([this.connection.on(\"feature\",(e=>this._onFeature(e))),a((()=>[e.definitionExpression,e.geometryDefinition,e.purgeOptions]),(()=>this._startup()))],j),this._initUpdateInterval()}_onFeature(e){this._updateInfo.websocket++,this.layerView.hasEventListener(\"data-received\")&&this.layerView.emit(\"data-received\",{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry});try{s(e.geometry)&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._outSpatialReference);const t=u.fromJSON(e);t.sourceLayer=t.layer=this.layer,this.featuresManager.add(t)}catch{}}_onUpdate(e,t){s(t)&&this.graphics.removeMany(t),s(e)&&(this._updateInfo.client+=e.length,this.graphics.addMany(e))}_initUpdateInterval(){this._clearInterval();const{updateInterval:e}=this.layer;let t=performance.now();this._updateIntervalId=setInterval((()=>{const e=performance.now(),r=e-t;if(r>m){t=e;const o=Math.round(this._updateInfo.client/(r/1e3)),s=Math.round(this._updateInfo.websocket/(r/1e3));this._updateInfo.client=0,this._updateInfo.websocket=0,this.layerView.emit(\"update-rate\",{client:o,websocket:s})}this.featuresManager.checkForUpdates()}),e)}pauseStream(){this._clearInterval()}resumeStream(){this._initUpdateInterval()}};e([n()],f.prototype,\"connection\",void 0),e([n()],f.prototype,\"layer\",void 0),e([n()],f.prototype,\"layerView\",void 0),e([n({readOnly:!0})],f.prototype,\"updating\",null),f=e([c(\"esri.layers.graphics.controllers.StreamController\")],f);export{f as StreamController,u as StreamGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import e from\"../../layers/support/FeatureFilter.js\";const s=s=>{let c=class extends s{constructor(...r){super(...r),this.connectionError=null,this.connectionStatus=\"disconnected\",this.filter=null}};return r([o({readOnly:!0})],c.prototype,\"connectionError\",void 0),r([o({aliasOf:\"controller.connection.connectionStatus\",readOnly:!0})],c.prototype,\"connectionStatus\",void 0),r([o({type:e})],c.prototype,\"filter\",void 0),c=r([t(\"esri.layers.mixins.StreamLayerView\")],c),c};export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Error.js\";import{watch as t}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{StreamController as i}from\"../../../layers/graphics/controllers/StreamController.js\";import a from\"../../../rest/support/Query.js\";import{FeatureLikeLayerView3D as n}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{UpdatePolicy as c}from\"../webgl-engine/lib/basicInterfaces.js\";import p from\"../../layers/LayerView.js\";import m from\"../../layers/StreamLayerView.js\";let y=class extends(m(n(l(p)))){constructor(){super(...arguments),this.type=\"stream-3d\",this.updatePolicy=c.ASYNC,this.hasZ=!0,this.hasM=!1}initialize(){this.handles.add(t((()=>this.suspended),(r=>{this.controller&&(r?this.controller.pauseStream():this.controller.resumeStream())})))}get connectionError(){const r=this.get(\"controller.connection.errorString\");if(r)return new e(\"stream-controller\",r)}createQuery(){return new a({outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryLatestObservations(r,e){return this.queryEngine.executeQueryForLatestObservations(this._ensureQuery(r),e?.signal)}createController(){return new i({layer:this.layer,layerView:this})}beforeSetController(){}};r([o({readOnly:!0})],y.prototype,\"updatePolicy\",void 0),r([o({readOnly:!0})],y.prototype,\"connectionError\",null),r([o()],y.prototype,\"controller\",void 0),r([o({readOnly:!0})],y.prototype,\"hasZ\",void 0),r([o({readOnly:!0})],y.prototype,\"hasM\",void 0),y=r([s(\"esri.views.3d.layers.StreamLayerView3D\")],y);const u=y;export{u as default};\n"],"names":["m","u","t","getObjectId","this","objectId","e","n","type","Number","json","read","prototype","c","y","constructor","onUpdate","_idToGraphic","Map","destroy","clear","add","set","get","forEach","removeById","sourceLayer","layer","delete","update","size","f","o","i","r","super","arguments","_updateInfo","websocket","client","graphics","l","initialize","addResolvingPromise","when","_startup","_clearInterval","_updateIntervalId","clearInterval","connection","store","handles","removeAll","updating","connectionStatus","layerView","parsedUrl","spatialReference","definitionExpression","s","geometryDefinition","objectIdField","timeInfo","purgeOptions","maxReconnectionAttempts","maxReconnectionInterval","customParameters","_","d","geometryType","g","I","view","v","geometry","where","_set","h","_outSpatialReference","toJSON","_onUpdate","bind","featuresManager","p","j","remove","on","_onFeature","a","_initUpdateInterval","hasEventListener","emit","attributes","centroid","fromJSON","removeMany","length","addMany","updateInterval","performance","now","setInterval","Math","round","checkForUpdates","pauseStream","resumeStream","readOnly","connectionError","filter","aliasOf","updatePolicy","hasZ","hasM","suspended","controller","createQuery","outFields","returnGeometry","outSpatialReference","queryLatestObservations","queryEngine","executeQueryForLatestObservations","_ensureQuery","signal","createController","beforeSetController"],"sourceRoot":""}