{"version":3,"file":"static/js/6004.2dffac8b.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/ImageryLayerView3D.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/ImageryLayerView.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{isNone as t}from\"../../../core/maybe.js\";import{debounce as a}from\"../../../core/promiseUtils.js\";import{when as i}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./DynamicLayerView3D.js\";import o from\"../../layers/ImageryLayerView.js\";let n=class extends(o(s)){constructor(){super(...arguments),this.type=\"imagery-3d\",this.redrawDebounced=a((async e=>{this.redraw(((e,t)=>this._redrawImage(e,t)),e)}),2e3)}initialize(){this.handles.add([i((()=>this.view.basemapTerrain.ready),(()=>this._initializeMaximumDataResolution()),{once:!0,initial:!0}),this.layer.on(\"redraw\",(()=>this.updatingHandles.addPromise(this.redrawDebounced())))]),this.updatingHandles.add((()=>this.layer?.exportImageServiceParameters?.version),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())})),this.updatingHandles.add((()=>this.timeExtent),(()=>this.updatingHandles.addPromise(this.refreshDebounced())))}_initializeMaximumDataResolution(){const e=this.view.basemapTerrain.spatialReference,t=this.layer.fullExtent;!t||e.equals(t.spatialReference),this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}getFetchOptions(){return{timeExtent:this.timeExtent}}async processResult(e,t,a){t.imageElement?e.image=t.imageElement:(e.image=document.createElement(\"canvas\"),e.pixelData=t.pixelData,await this._redrawImage(e,a))}async _redrawImage(e,a){if(!(e.image instanceof HTMLCanvasElement)||t(e.pixelData))throw new Error;const i=e.image,r=i.getContext(\"2d\"),s=await this.layer.applyRenderer(e.pixelData,{signal:a}),o=this.layer.applyFilter(s).pixelBlock;if(t(o))throw new Error;i.width=o.width,i.height=o.height;const n=r.createImageData(o.width,o.height);n.data.set(o.getAsRGBA()),r.putImageData(n,0,0)}};n=e([r(\"esri.views.3d.layers.ImageryLayerView3D\")],n);const m=n;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isNone as t,isSome as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as a}from\"../../layers/support/commonProperties.js\";import n from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const m=m=>{let c=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,s){const{layer:p}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:p});const{popupEnabled:a}=p,m=u(p,s);if(!a||t(m))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:m});const c=await m.getRequiredFields(),l=new n;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=c,l.outSpatialReference=e.spatialReference;const y=this.view.resolution,h=\"2d\"===this.view.type?new i(y,y,this.view.spatialReference):new i(.5*y,.5*y,this.view.spatialReference),{returnTopmostRaster:w,showNoDataRecords:d}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:w,pixelSize:h,showNoDataRecords:d,signal:o(s)?s.signal:null};return p.queryVisibleRasters(l,f).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([s()],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"suspended\",void 0),e([s(a)],c.prototype,\"timeExtent\",void 0),e([s()],c.prototype,\"view\",void 0),c=e([p(\"esri.views.layers.ImageryLayerView\")],c),c};export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as l}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as t}from\"../../../layers/support/fieldUtils.js\";async function d(l,d=l.popupTemplate){if(e(d))return[];const s=await d.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:i}=d,{objectIdField:n,typeIdField:u,globalIdField:a,relationships:o}=l;if(s.includes(\"*\"))return[\"*\"];const r=i?await p(l):[],f=t(l.fieldsIndex,[...s,...r]);return u&&f.push(u),f&&n&&l.fieldsIndex.has(n)&&!f.includes(n)&&f.push(n),f&&a&&l.fieldsIndex.has(a)&&!f.includes(a)&&f.push(a),o&&o.forEach((e=>{const{keyField:p}=e;f&&p&&l.fieldsIndex.has(p)&&!f.includes(p)&&f.push(p)})),f}function s(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{s as getFetchPopupTemplate,d as getRequiredFields};\n"],"names":["n","o","s","constructor","super","arguments","this","type","redrawDebounced","a","async","redraw","e","t","_redrawImage","initialize","handles","add","i","view","basemapTerrain","ready","_initializeMaximumDataResolution","once","initial","layer","on","updatingHandles","addPromise","exportImageServiceParameters","version","refreshDebounced","timeExtent","spatialReference","fullExtent","equals","maximumDataResolution","x","pixelSizeX","y","pixelSizeY","getFetchOptions","imageElement","image","document","createElement","pixelData","HTMLCanvasElement","Error","r","getContext","applyRenderer","signal","applyFilter","pixelBlock","width","height","createImageData","data","set","getAsRGBA","putImageData","m","c","p","popupEnabled","u","popupTemplate","getRequiredFields","l","geometry","outFields","outSpatialReference","resolution","h","returnTopmostRaster","w","showNoDataRecords","d","layerOptions","f","returnDomainValues","pixelSize","queryVisibleRasters","then","canResume","isEmpty","prototype","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","push","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}