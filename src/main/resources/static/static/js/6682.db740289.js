"use strict";(self["webpackChunkeco_friendly"]=self["webpackChunkeco_friendly"]||[]).push([[6682],{85854:function(t,e,n){n.d(e,{Z:function(){return h}});var r=n(61445),i=n(6633),o=n(92698),s=n(26589),l=n(60931),a=n(8693),u=n(58006),p=(n(15055),n(81653),n(94315),n(77623)),c=n(78553),y=n(49304),d=n(54514);let f=class extends((0,l.eC)((0,s.J)(o.Z))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a._W)(this.position,t.position)&&(0,a._W)(this.elevationInfo,t.elevationInfo)&&(0,i.kk)(this.feature,t.feature)}};(0,r._)([(0,u.Cb)({type:y.Z}),(0,c.B)()],f.prototype,"position",void 0),(0,r._)([(0,u.Cb)({type:d.ZP}),(0,c.B)()],f.prototype,"elevationInfo",void 0),(0,r._)([(0,u.Cb)(i.rX)],f.prototype,"feature",void 0),f=(0,r._)([(0,p.j)("esri.analysis.LineOfSightAnalysisObserver")],f);const h=f},61168:function(t,e,n){n.d(e,{Z:function(){return f}});var r=n(61445),i=n(6633),o=n(26589),s=n(60931),l=n(8693),a=n(58006),u=(n(15055),n(81653),n(94315),n(77623)),p=n(78553),c=n(49304),y=n(54514);let d=class extends((0,s.eC)(o.j)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,l._W)(this.position,t.position)&&(0,l._W)(this.elevationInfo,t.elevationInfo)&&(0,i.kk)(this.feature,t.feature)}};(0,r._)([(0,a.Cb)({type:c.Z}),(0,p.B)()],d.prototype,"position",void 0),(0,r._)([(0,a.Cb)({type:y.ZP}),(0,p.B)()],d.prototype,"elevationInfo",void 0),(0,r._)([(0,a.Cb)(i.rX)],d.prototype,"feature",void 0),d=(0,r._)([(0,u.j)("esri.analysis.LineOfSightAnalysisTarget")],d);const f=d},6633:function(t,e,n){n.d(e,{kk:function(){return i},pD:function(){return o},rX:function(){return s}});var r=n(8693);function i(t,e){return o(t)===o(e)}function o(t){if((0,r.Wi)(t))return null;const e=null!=t.layer?t.layer.id:"";let n=null;return n=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==n?null:`o-${e}-${n}`}const s={json:{write:{writer:l,target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:a}}}};function l(t,e){(0,r.Wi)(t)||null==t.layer?.objectIdField||null==t.attributes||(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})}function a(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}},78553:function(t,e,n){n.d(e,{B:function(){return b}});var r=n(8693),i=n(47604),o=n(99659),s=n(72158),l=n(39177),a=n(60549),u=n(58006);function p(t){return d[c(t)]||h}function c(t){return t instanceof Blob?t.type:y(t.url)}function y(t){const e=(0,o.Ml)(t);return g[e]||f}const d={},f="text/plain",h=d[f],g={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const E in g)d[g[E]]=E;var v=n(36067);function b(t){const e=(0,r.pC)(t)&&t.origins?t.origins:[void 0];return(n,r)=>{const i=C(t,n,r);for(const t of e){const e=(0,u.CJ)(n,t,r);for(const t in i)e[t]=i[t]}}}function C(t,e,n){if((0,r.pC)(t)&&"resource"===t.type)return m(t,e,n);switch((0,r.pC)(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:e}=v.p;return{read:t,write:e}}}}function m(t,e,n){const s=(0,l.VZ)(e,n);return{type:String,read:(t,e,n)=>{const r=(0,v.r)(t,e,n);return s.type===String?r:"function"==typeof s.type?new s.type({url:r}):void 0},write:{writer(e,l,u,p){if(!p||!p.resources)return"string"==typeof e?void(l[u]=(0,v.t)(e,p)):void(l[u]=e.write({},p));const c=P(e),y=c?(0,v.t)(c,{...p,verifyItemRelativeUrls:p&&p.verifyItemRelativeUrls?{writtenUrls:p.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},v.M.NO):null,d=s.type!==String&&(!(0,i.l)(this)||p&&p.origin&&this.originIdOf(n)>(0,a.M9)(p.origin));p&&p.portalItem&&(0,r.pC)(y)&&!(0,o.YP)(y)?d?w(this,n,e,y,l,u,p,t):I(y,l,u,p):p&&p.portalItem&&((0,r.Wi)(y)||(0,r.pC)((0,v.i)(y))||(0,o.jc)(y)||d)?_(this,n,e,y,l,u,p,t):l[u]=y}}}}function _(t,e,n,i,l,a,u,c){const y=(0,s.D)(),d=x(n,i,u),f=(0,o.v_)((0,r.U2)(c,"prefix"),y),h=`${f}.${p(d)}`,g=u.portalItem.resourceFromPath(h);(0,o.jc)(i)&&u.resources.pendingOperations.push(O(i).then((t=>{g.path=`${f}.${p(t)}`,l[a]=g.itemRelativeUrl})).catch((()=>{}))),j(t,e,g,d,u.resources.toAdd),l[a]=g.itemRelativeUrl}function w(t,e,n,r,i,s,l,a){const u=l.portalItem.resourceFromPath(r),c=x(n,r,l);p(c)===(0,o.Ml)(u.path)?(j(t,e,u,c,l.resources.toUpdate),i[s]=r):_(t,e,n,r,i,s,l,a)}function I(t,e,n,r){r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(t)}),e[n]=t}function j(t,e,n,r,i){i.push({resource:n,content:r,finish:n=>{Z(t,e,n)}})}function x(t,e,n){return"string"==typeof t?{url:e}:new Blob([JSON.stringify(t.toJSON(n))],{type:"application/json"})}async function O(t){const e=(await Promise.resolve().then(n.bind(n,94848))).default,{data:r}=await e(t,{responseType:"blob"});return r}function P(t){return(0,r.Wi)(t)?null:"string"==typeof t?t:t.url}function Z(t,e,n){"string"==typeof t[e]?t[e]=n.url:t[e].url=n.url}},47604:function(t,e,n){function r(t){return t&&"getAtOrigin"in t&&"originOf"in t}n.d(e,{l:function(){return r}})},36682:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});var r=n(61445),i=(n(26699),n(92698)),o=n(26589),s=n(68650),l=n(60931),a=n(8693),u=n(58006),p=(n(15055),n(81653),n(94315),n(77623));let c=0,y=class extends((0,l.eC)((0,o.J)((0,s.IG)(i.Z)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${c++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if((0,a.pC)(e))switch(e.type){case"line-of-sight":e.removeAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(a.pC)}};(0,r._)([(0,u.Cb)({type:String,constructOnly:!0,clonable:!1})],y.prototype,"id",void 0),(0,r._)([(0,u.Cb)({type:String})],y.prototype,"title",void 0),(0,r._)([(0,u.Cb)({constructOnly:!0})],y.prototype,"type",void 0),(0,r._)([(0,u.Cb)({clonable:!1,value:null})],y.prototype,"parent",null),(0,r._)([(0,u.Cb)({readOnly:!0})],y.prototype,"extent",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],y.prototype,"isEditable",null),(0,r._)([(0,u.Cb)({readOnly:!0})],y.prototype,"requiredPropertiesForEditing",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],y.prototype,"nonEditableMessage",void 0),y=(0,r._)([(0,p.j)("esri.analysis.Analysis")],y);const d=y;var f=n(85854),h=n(61168),g=n(86662),v=n(95822),b=n(18105),C=n(47608),m=n(37740),_=n(88141);const w=g.Z.ofType(h.Z);let I=class extends d{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}initialize(){this.own((0,b.YP)((()=>this._computeExtent()),(t=>{((0,a.Wi)(t)||(0,a.Wi)(t.pending))&&this._set("extent",(0,a.pC)(t)?t.extent:null)}),b.tX))}get targets(){return this._get("targets")||new w}set targets(t){this._set("targets",(0,v.Z)(t,this.targets,w))}get spatialReference(){return(0,a.pC)(this.observer)&&(0,a.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,a.yw)(this.observer,(t=>t.position))]}async waitComputeExtent(){const t=this._computeExtent();return(0,a.pC)(t)?(0,a.Wg)(t.pending):null}_computeExtent(){const t=this.spatialReference;if((0,a.Wi)(this.observer)||(0,a.Wi)(this.observer.position)||(0,a.Wi)(t))return null;const e=t=>"absolute-height"===(0,_.VW)(t.position,t.elevationInfo),n=this.observer.position,r=(0,m.al)(n.x,n.y,n.z,n.x,n.y,n.z);for(const o of this.targets)if((0,a.pC)(o.position)){const e=(0,C.dz)(o.position,t);if((0,a.pC)(e.pending))return{pending:e.pending,extent:null};if((0,a.pC)(e.geometry)){const{x:t,y:n,z:i}=e.geometry;(0,m.pp)(r,[t,n,i])}}const i=(0,m.HH)(r,t);return e(this.observer)&&this.targets.every(e)||(i.zmin=null,i.zmax=null),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}};(0,r._)([(0,u.Cb)({type:["line-of-sight"]})],I.prototype,"type",void 0),(0,r._)([(0,u.Cb)({type:f.Z,json:{read:!0,write:!0}})],I.prototype,"observer",void 0),(0,r._)([(0,u.Cb)({cast:v.R,type:w,nonNullable:!0,json:{read:!0,write:!0}})],I.prototype,"targets",null),(0,r._)([(0,u.Cb)({value:null,readOnly:!0})],I.prototype,"extent",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],I.prototype,"spatialReference",null),(0,r._)([(0,u.Cb)({readOnly:!0})],I.prototype,"requiredPropertiesForEditing",null),(0,r._)([(0,u.Cb)({readOnly:!0})],I.prototype,"nonEditableMessage",void 0),I=(0,r._)([(0,p.j)("esri.analysis.LineOfSightAnalysis")],I);const j=I;var x=n(74823),O=n(36421),P=n(35894);const Z=g.Z.ofType(h.Z);let E=class extends((0,P.q)((0,x.R)(O.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new j,this.opacity=1}initialize(){this.own((0,b.YP)((()=>this.analysis),((t,e)=>{(0,a.pC)(e)&&e.parent===this&&(e.parent=null),(0,a.pC)(t)&&(t.parent=this)}),b.tX))}async load(){return(0,a.pC)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,a.yw)(this.analysis,(t=>t.observer))}set observer(t){(0,a.yw)(this.analysis,(e=>e.observer=t))}get targets(){return(0,a.pC)(this.analysis)?this.analysis.targets:null}set targets(t){(0,a.yw)(this.analysis,(e=>e.targets=t))}get fullExtent(){return(0,a.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,a.pC)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(t){this.analysis===t&&(this.analysis=new j)}};(0,r._)([(0,u.Cb)({json:{read:!1},readOnly:!0})],E.prototype,"type",void 0),(0,r._)([(0,u.Cb)({type:["LineOfSightLayer"]})],E.prototype,"operationalLayerType",void 0),(0,r._)([(0,u.Cb)({type:f.Z,json:{read:!0,write:{ignoreOrigin:!0}}})],E.prototype,"observer",null),(0,r._)([(0,u.Cb)({type:Z,json:{read:!0,write:{ignoreOrigin:!0}}})],E.prototype,"targets",null),(0,r._)([(0,u.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],E.prototype,"analysis",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],E.prototype,"fullExtent",null),(0,r._)([(0,u.Cb)({readOnly:!0})],E.prototype,"spatialReference",null),(0,r._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],E.prototype,"opacity",void 0),(0,r._)([(0,u.Cb)({type:["show","hide"]})],E.prototype,"listMode",void 0),E=(0,r._)([(0,p.j)("esri.layers.LineOfSightLayer")],E);const W=E},88141:function(t,e,n){n.d(e,{RL:function(){return l},VW:function(){return s},jG:function(){return f},tq:function(){return y},vQ:function(){return u},zx:function(){return p}});var r=n(8693),i=n(79211);function o(t,e){return(0,r.Wi)(e)||!e.mode?t?"absolute-height":"on-the-ground":e.mode}function s(t,e){return o(!!(0,r.pC)(t)&&t.hasZ,e)}function l(t){const e=a(t),n=s(t.geometry,e);return{mode:n,offset:(0,r.pC)(e)&&"on-the-ground"!==n?(0,r.Pt)(e.offset,0)*(0,i.Z7)((0,r.Pt)(e.unit,"meters")):0}}function a(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function u(t,e,n,r=null){return c(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,n,r)}function p(t,e,n,r,i=null){return c(t,e[0],e[1],e.length>2?e[2]:0,n,r,i)}function c(t,e,n,i,o,s,l=null){if((0,r.Wi)(s))return;const a=(0,r.pC)(l)?l.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:u}=y(e,n,i,o,t,s);return d(u,e,n,i,o,t,l,a)}function y(t,e,n,i,o,s){const l=(0,r.pC)(s.offset)?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:n+l,elevation:0};case"on-the-ground":{const n=(0,r.Pt)(o.elevationProvider.getElevation(t,e,0,i,"ground"),0);return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const s=(0,r.Pt)(o.elevationProvider.getElevation(t,e,n,i,"ground"),0);return{absoluteZ:n+s+l,elevation:s}}case"relative-to-scene":{const s=(0,r.Pt)(o.elevationProvider.getElevation(t,e,n,i,"scene"),0);return{absoluteZ:n+s+l,elevation:s}}}}function d(t,e,n,i,o,s,l,a){const u=(0,r.pC)(l)&&(0,r.pC)(l.offset)?l.offset:0;switch(a){case"absolute-height":return t-u;case"relative-to-ground":return t-((0,r.Pt)(s.elevationProvider.getElevation(e,n,i,o,"ground"),0)+u);case"relative-to-scene":return t-((0,r.Pt)(s.elevationProvider.getElevation(e,n,i,o,"scene"),0)+u)}}const f={mode:"absolute-height",offset:0}}}]);
//# sourceMappingURL=6682.db740289.js.map