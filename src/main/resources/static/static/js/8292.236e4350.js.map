{"version":3,"file":"static/js/8292.236e4350.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/3d/layers/VoxelLayerView3D.js","webpack://eco-friendly/./node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as t}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as a,rejectLayerError as l}from\"../../../geometry/support/heightModelInfoUtils.js\";const n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),a(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.handles.add(s((()=>e.abort()))),await r((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),t(o);const i=l(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return e([o()],c.prototype,\"view\",void 0),e([o()],c.prototype,\"slicePlaneEnabled\",void 0),c=e([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{n as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Error.js\";import t from\"../../../core/Handles.js\";import r from\"../../../core/Logger.js\";import{isSome as i,destroyMaybe as a,isNone as o}from\"../../../core/maybe.js\";import{watch as l,initial as n}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{LayerView3D as c}from\"./LayerView3D.js\";import u from\"../../layers/LayerView.js\";import{ContextType as p}from\"../../webgl/context-util.js\";var y;!function(e){e[e.API=1]=\"API\",e[e.VerboseAPI=2]=\"VerboseAPI\",e[e.Error=3]=\"Error\"}(y||(y={}));const g=r.getLogger(\" esri.views.3d.layers.VoxelLayerView3D\");let V=class extends(c(u)){constructor(){super(...arguments),this._usedMemory=0,this._futureMemory=0,this.type=\"voxel-3d\",this._wasmLayerId=-1,this._handles=new t,this._dbgFlags=new Set}get wasmLayerId(){return this._wasmLayerId}initialize(){if(\"local\"!==this.view.viewingMode)throw new s(\"voxel:unsupported-viewingMode\",\"Voxel layers support local viewingMode only.\",{});if(this.view._stage.renderView.renderingContext.type!==p.WEBGL2)throw new s(\"voxel:unsupported-context\",\"Voxel layers are supported in WebGL2 rendering contexts only.\",{});if(!!!this.view._stage.renderView.renderingContext.capabilities.colorBufferFloat?.textureFloat)throw new s(\"voxel:missing-color-buffer-float\",\"Voxel layers require the WebGL2 extension EXT_color_buffer_float\",{});const e=this.layer.spatialReference;if(!m(e,this.view.spatialReference))throw new s(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this scene layer is incompatible with the spatial reference of the view\",{});const t=this.layer.currentVariableId,r=this.layer.getVolume(t),a=this.layer.getVariable(t);if(i(r)&&i(a)){const e=r.dimensions[0],s=r.dimensions[1],t=r.getZDimension();if(t>1){const i=r.dimensions[t],o=e.size*s.size*i.size;let l=1;switch(a.renderingFormat.type){case\"Int16\":case\"UInt16\":l=2;break;case\"Int32\":case\"UInt32\":case\"Float32\":l=4}this._futureMemory=l*o}}const o=this.view.addVoxelLayerViewToWasm(this).then((e=>{this._wasmLayerId=e,this._suspendedHandle=l((()=>this.suspended),(e=>{const s=this.view.voxelWasm;i(s)&&s.setEnabled(this,!e)}),n),this._handles.add([l((()=>this.layer.renderMode),(e=>this._pushRenderModeToWasm(e))),l((()=>this.layer.currentVariableId),(e=>this._pushCurrentVariableIdToWasm(e))),l((()=>this.layer.getDynamicSections()),(e=>this._pushDynamicSectionsToWasm(e))),l((()=>this.layer.getSlices()),(e=>this._pushSlicesToWasm(e))),l((()=>this.layer.getSections()),(e=>this._pushSectionsToWasm(e))),l((()=>this.layer.getVerticalExaggeration()),(e=>this._pushVerticalExaggerationToWasm(e))),l((()=>this.layer.getVerticalOffset()),(e=>this._pushVerticalOffsetToWasm(e)))])})).catch((e=>{if(this.view.removeVoxelLayerViewFromWasm(this),this._wasmLayerId=-1,-1===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer description was invalid.\",{});if(-2===e)throw new s(\"voxel:addLayer-failure\",\"The voxel layer web assembly module failed to download.\",{})}));this.addResolvingPromise(o)}destroy(){this.view.removeVoxelLayerViewFromWasm(this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null),this._handles=a(this._handles)}isUpdating(){const e=this.view.voxelWasm;return!(this._wasmLayerId<0||!i(e))&&e.isUpdating(this._wasmLayerId)}updatingFlagChanged(){this.notifyChange(\"updating\")}getUsedMemory(){return this._usedMemory}getUnloadedMemory(){return this._futureMemory}ignoresMemoryFactor(){return!0}get performanceInfo(){return{nodes:0,displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null}}setUsedMemory(e){this._usedMemory=e,this._futureMemory=0}captureFrustum(){const e=this.view.voxelWasm;i(e)&&e.captureFrustum()}toggleFullVolumeExtentDraw(){const e=this.view.voxelWasm;i(e)&&e.toggleFullVolumeExtentDraw(this)}_pushRenderModeToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushRenderModeToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setRenderMode(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushRenderModeToWasm() failed!\")}_pushSlicesToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushSlicesToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setSlices(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushSlicesToWasm() failed!\")}_pushSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushSectionsToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setStaticSections(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushSectionsToWasm() failed!\")}_pushDynamicSectionsToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushDynamicSectionsToWasm() called, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setDynamicSections(this,e)||this._dbg(y.Error,\"VoxelLayer._updateDynamicSections() failed!\")}_pushCurrentVariableIdToWasm(e){const s=this.view.voxelWasm;this._dbg(y.VerboseAPI,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() called!, \"+(i(s)?\"have WASM\":\"don't have WASM!!!\"));!!i(s)&&s.setCurrentVariable(this,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushCurrentVariableIdToWasm() failed!\")}_pushVerticalExaggerationToWasm(e){const s=this.layer.getVolumeStyle(null),t=this.view.voxelWasm;if(this._dbg(y.VerboseAPI,`VoxelLayerView3D._pushVerticalExaggerationToWasm() called, ${i(t)?\"have WASM\":\"don't have WASM!!!\"}, ${i(s)?\"have style\":\"don't have style!!!\"}`),o(s))return;!!i(t)&&t.setVerticalExaggerationAndOffset(this,s.volumeId,e,s.verticalOffset)||this._dbg(y.Error,\"VoxelLayerView3D._pushVerticalExaggerationToWasm() failed!\")}_pushVerticalOffsetToWasm(e){const s=this.layer.getVolumeStyle(null),t=this.view.voxelWasm;if(this._dbg(y.VerboseAPI,`VoxelLayerView3D._pushVerticalOffsetToWasm() called, ${i(t)?\"have WASM\":\"don't have WASM!!!\"}, ${i(s)?\"have style\":\"don't have style!!!\"}`),o(s))return;!!i(t)&&t.setVerticalExaggerationAndOffset(this,s.volumeId,s.verticalExaggeration,e)||this._dbg(y.Error,\"VoxelLayerView3D._pushVerticalOffsetToWasm() failed!\")}_dbg(e,s){this._dbgFlags.has(e)&&(e===y.Error?g.error(s):g.warn(s))}};e([h()],V.prototype,\"layer\",void 0),e([h({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],V.prototype,\"baseUrl\",void 0),V=e([d(\"esri.views.3d.layers.VoxelLayerView3D\")],V);const f=V;export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import t from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{unwrapOr as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let d=class extends(s(i(n(t.EventedMixin(r))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",t=this.layer&&this.layer.title||\"no title\";o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${t}', id: '${r}')`,e)}}))}get fullOpacity(){return l(this.get(\"layer.opacity\"),1)*l(this.get(\"parent.fullOpacity\"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},r=this;return r.view&&r.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([a()],d.prototype,\"fullOpacity\",null),e([a()],d.prototype,\"layer\",void 0),e([a()],d.prototype,\"parent\",void 0),e([a({readOnly:!0})],d.prototype,\"suspended\",null),e([a({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([a({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([a({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([a({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([a()],d.prototype,\"visible\",null),e([a()],d.prototype,\"view\",void 0),d=e([p(\"esri.views.layers.LayerView\")],d);const u=d;export{u as default};\n"],"names":["n","c","constructor","super","arguments","this","slicePlaneEnabled","supportsHeightUnitConversion","postscript","e","a","layer","addResolvingPromise","_validateHeightModelInfo","AbortController","o","signal","handles","add","s","abort","r","view","defaultsFromMap","heightModelInfoReady","t","i","l","heightModelInfo","canResume","effectiveScaleRange","minScale","maxScale","getSuspendInfo","outsideScaleRange","prototype","y","API","VerboseAPI","Error","g","V","u","_usedMemory","_futureMemory","type","_wasmLayerId","_handles","_dbgFlags","Set","wasmLayerId","initialize","viewingMode","_stage","renderView","renderingContext","p","capabilities","colorBufferFloat","textureFloat","spatialReference","m","currentVariableId","getVolume","getVariable","dimensions","getZDimension","size","renderingFormat","addVoxelLayerViewToWasm","then","_suspendedHandle","suspended","voxelWasm","setEnabled","renderMode","_pushRenderModeToWasm","_pushCurrentVariableIdToWasm","getDynamicSections","_pushDynamicSectionsToWasm","getSlices","_pushSlicesToWasm","getSections","_pushSectionsToWasm","getVerticalExaggeration","_pushVerticalExaggerationToWasm","getVerticalOffset","_pushVerticalOffsetToWasm","catch","removeVoxelLayerViewFromWasm","destroy","remove","isUpdating","updatingFlagChanged","notifyChange","getUsedMemory","getUnloadedMemory","ignoresMemoryFactor","performanceInfo","nodes","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","core","setUsedMemory","captureFrustum","toggleFullVolumeExtentDraw","_dbg","setRenderMode","setSlices","setStaticSections","setDynamicSections","setCurrentVariable","getVolumeStyle","setVerticalExaggerationAndOffset","volumeId","verticalOffset","verticalExaggeration","has","error","warn","h","readOnly","aliasOf","d","f","parent","when","name","id","title","declaredClass","fullOpacity","get","suspendInfo","legendEnabled","updating","updatingHandles","updatingProgress","visible","_override","_clearOverride","loaded","ready","viewNotReady","layerNotLoaded","layerInvisible","Boolean"],"sourceRoot":""}