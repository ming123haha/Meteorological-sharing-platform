{"version":3,"file":"static/js/2489.72b8c3a5.js","mappings":"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","sources":["webpack://eco-friendly/./node_modules/@arcgis/core/layers/support/ElevationTile.js","webpack://eco-friendly/./node_modules/@arcgis/core/layers/support/ElevationQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as a}from\"../../core/maybe.js\";class i{constructor(a,i=null){if(this.tile=a,this.zmin=0,this.zmax=0,t(i)){const t=a.extent;this.samplerData={pixelData:i.values,width:i.width,height:i.height,safeWidth:.99999999*(i.width-1),noDataValue:i.noDataValue,dx:(i.width-1)/(t[2]-t[0]),dy:(i.width-1)/(t[3]-t[1]),x0:t[0],y1:t[3]},this.zmin=i.minValue,this.zmax=i.maxValue}}sample(t,i){if(a(this.samplerData))return;const{safeWidth:h,width:s,pixelData:l,noDataValue:n,dx:o,dy:r,y1:m,x0:d}=this.samplerData,u=e(r*(m-i),0,h),x=e(o*(t-d),0,h),f=Math.floor(u),c=Math.floor(x),p=f*s+c,D=p+s,w=l[p],y=l[D],V=l[p+1],z=l[D+1];if(w!==n&&y!==n&&V!==n&&z!==n){const t=x-c,a=w+(V-w)*t;return a+(y+(z-y)*t-a)*(u-f)}}}function e(t,a,i){return t<a?a:t>i?i:t}export{i as ElevationTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{result as e}from\"../../core/asyncUtils.js\";import t from\"../../core/Error.js\";import{isNone as i,isSome as o}from\"../../core/maybe.js\";import{whenOrAbort as s,throwIfAbortError as l,eachAlways as n}from\"../../core/promiseUtils.js\";import{getMetersPerUnitForSR as a}from\"../../core/unitUtils.js\";import r from\"../../geometry/Multipoint.js\";import c from\"../../geometry/Point.js\";import u from\"../../geometry/Polyline.js\";import{initializeProjection as h,project as p}from\"../../geometry/projection.js\";import{fromExtent as m,create as f,contains as d}from\"../../geometry/support/aaBoundingRect.js\";import{MultiTileElevationSampler as y}from\"./ElevationSampler.js\";import{ElevationTile as T}from\"./ElevationTile.js\";class v{async queryAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");const s=x.fromGeometry(i);let l=!1;o&&o.returnSampleInfo||(l=!0);const n={...R,...o,returnSampleInfo:!0},a=await this.query(e[e.length-1],s,n),r=await this._queryAllContinue(e,a,n);return r.geometry=r.geometry.export(),l&&delete r.sampleInfo,r}async query(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||!(i instanceof x)&&\"point\"!==i.type&&\"multipoint\"!==i.type&&\"polyline\"!==i.type)throw new t(\"elevation-query:invalid-geometry\",\"Only point, polyline and multipoint geometries can be used to query elevation\");const s={...R,...o},l=new w(e,i.spatialReference,s),n=s.signal;return await e.load({signal:n}),await this._createGeometryDescriptor(l,i,n),await this._selectTiles(l,n),await this._populateElevationTiles(l,n),this._sampleGeometryWithElevation(l),this._createQueryResult(l,n)}async createSampler(e,i,o){if(!e)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o};return this._createSampler(e,i,s)}async createSamplerAll(e,i,o){if(!(e=o&&o.ignoreInvisibleLayers?e.filter((e=>e.visible)):e.slice()).length)throw new t(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\");if(!i||\"extent\"!==i.type)throw new t(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\");const s={...R,...o,returnSampleInfo:!0},l=await this._createSampler(e[e.length-1],i,s);return this._createSamplerAllContinue(e,i,l,s)}async _createSampler(e,t,i,o){const s=i.signal;await e.load({signal:s});const l=t.spatialReference,n=e.tileInfo.spatialReference;l.equals(n)||(await h([{source:l,dest:n}],{signal:s}),t=p(t,n));const a=new _(e,t,i,o);return await this._selectTiles(a,s),await this._populateElevationTiles(a,s),new y(a.elevationTiles,a.layer.tileInfo,a.options.noDataValue)}async _createSamplerAllContinue(e,t,i,o){if(e.pop(),!e.length)return i;const s=i.samplers.map((e=>m(e.extent))),l=await this._createSampler(e[e.length-1],t,o,s);if(0===l.samplers.length)return i;const n=i.samplers.concat(l.samplers),a=new y(n,o.noDataValue);return this._createSamplerAllContinue(e,t,a,o)}async _queryAllContinue(e,t,i){const o=e.pop(),s=t.geometry.coordinates,l=[],n=[];for(let c=0;c<s.length;c++){const i=t.sampleInfo[c];i.demResolution>=0?i.source||(i.source=o):e.length&&(l.push(s[c]),n.push(c))}if(!e.length||0===l.length)return t;const a=t.geometry.clone(l),r=await this.query(e[e.length-1],a,i);return n.forEach(((e,i)=>{s[e].z=r.geometry.coordinates[i].z,t.sampleInfo[e].demResolution=r.sampleInfo[i].demResolution})),this._queryAllContinue(e,t,i)}async _createQueryResult(e,t){const i={geometry:(await e.geometry.project(e.outSpatialReference,t)).export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(i.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach((e=>{e.tile=null,e.elevationTile=null})),i}async _createGeometryDescriptor(e,i,o){let s;const l=e.layer.tileInfo.spatialReference;if(i instanceof x?s=await i.project(l,o):(await h([{source:i.spatialReference,dest:l}],{signal:o}),s=p(i,l)),!s)throw new t(\"elevation-query:spatial-reference-mismatch\",`Cannot query elevation in '${i.spatialReference.wkid}' on an elevation service in '${l.wkid}'`);e.geometry=x.fromGeometry(s)}async _selectTiles(e,i){const o=e.options.demResolution;if(\"geometry\"===e.type&&this._preselectOutsideLayerExtent(e),\"number\"==typeof o)this._selectTilesClosestResolution(e);else if(\"finest-contiguous\"===o)await this._selectTilesFinestContiguous(e,i);else{if(\"auto\"!==o)throw new t(\"elevation-query:invalid-dem-resolution\",`Invalid dem resolution value '${o}', expected a number, \"finest-contiguous\" or \"auto\"`);await this._selectTilesAuto(e,i)}}_preselectOutsideLayerExtent(e){if(i(e.layer.fullExtent))return;const t=new T(null);t.sample=()=>e.options.noDataValue,e.outsideExtentTile=t;const o=e.layer.fullExtent;e.geometry.coordinates.forEach((e=>{const i=e.x,s=e.y;(i<o.xmin||i>o.xmax||s<o.ymin||s>o.ymax)&&(e.elevationTile=t)}))}_selectTilesClosestResolution(e){const t=e.layer.tileInfo,i=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(i)}_findNearestDemResolutionLODIndex(e,t){const i=t/a(e.spatialReference);let o=e.lods[0],s=0;for(let l=1;l<e.lods.length;l++){const t=e.lods[l];Math.abs(t.resolution-i)<Math.abs(o.resolution-i)&&(o=t,s=l)}return s}async _selectTilesFinestContiguous(e,t){const i=E(e.layer.tileInfo,e.options.minDemResolution);await this._selectTilesFinestContiguousAt(e,i,t)}async _selectTilesFinestContiguousAt(e,i,o){const n=e.layer;if(e.selectTilesAtLOD(i),i<0)return;const a=n.tilemapCache,r=e.getTilesToFetch();try{if(a)await s(Promise.all(r.map((e=>a.fetchAvailability(e.level,e.row,e.col,{signal:o})))),o);else if(await this._populateElevationTiles(e,o),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new t(\"elevation-query:has-unavailable-tiles\")}catch(c){l(c),await this._selectTilesFinestContiguousAt(e,i-1,o)}}async _populateElevationTiles(e,t){const i=e.getTilesToFetch(),l={},a=e.options.cache,r=e.options.noDataValue,c=i.map((async i=>{const s=`${e.layer.uid}:${i.id}:${r}`,n=o(a)?a.get(s):null,c=o(n)?n:await e.layer.fetchTile(i.level,i.row,i.col,{noDataValue:r,signal:t});o(a)&&a.put(s,c),l[i.id]=new T(i,c)}));await s(n(c),t),e.populateElevationTiles(l)}async _selectTilesAuto(t,i){this._selectTilesAutoFinest(t),this._reduceTilesForMaximumRequests(t);const o=t.layer.tilemapCache;if(!o)return this._selectTilesAutoPrefetchUpsample(t,i);const n=t.getTilesToFetch(),a={},r=n.map((async t=>{const s={id:null,level:0,row:0,col:0,extent:f()},n=await e(o.fetchAvailabilityUpsample(t.level,t.row,t.col,s,{signal:i}));!1===n.ok?l(n.error):a[t.id]=s}));await s(Promise.all(r),i),t.remapTiles(a)}_reduceTilesForMaximumRequests(e){const t=e.layer.tileInfo;let i=0;const o={},s=e=>{e.id in o?o[e.id]++:(o[e.id]=1,i++)},l=e=>{const t=o[e.id];1===t?(delete o[e.id],i--):o[e.id]=t-1};e.forEachTileToFetch(s,l);let n=!0;for(;n&&(n=!1,e.forEachTileToFetch((o=>{i<=e.options.maximumAutoTileRequests||(l(o),t.upsampleTile(o)&&(n=!0),s(o))}),l),n););}_selectTilesAutoFinest(e){const t=E(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests)}async _selectTilesAutoPrefetchUpsample(e,t){const i=e.layer.tileInfo;await this._populateElevationTiles(e,t);let o=!1;e.forEachTileToFetch(((e,t)=>{i.upsampleTile(e)?o=!0:t()})),o&&await this._selectTilesAutoPrefetchUpsample(e,t)}_sampleGeometryWithElevation(e){e.geometry.coordinates.forEach((t=>{const i=t.elevationTile;let s=e.options.noDataValue;if(i){const e=i.sample(t.x,t.y);o(e)?s=e:t.elevationTile=null}t.z=s}))}_extractSampleInfo(e){const t=e.layer.tileInfo,i=a(t.spatialReference);return e.geometry.coordinates.map((o=>{let s=-1;if(o.elevationTile&&o.elevationTile!==e.outsideExtentTile){s=t.lodAt(o.elevationTile.tile.level).resolution*i}return{demResolution:s}}))}}class x{export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){const t=new x;return t.geometry=this.geometry,t.spatialReference=this.spatialReference,t.coordinates=e||this.coordinates.map((e=>this._cloneCoordinate(e))),t._exporter=this._exporter,t}async project(e,t){if(this.spatialReference.equals(e))return this.clone();await h([{source:this.spatialReference,dest:e}],{signal:t});const i=new r({spatialReference:this.spatialReference,points:this.coordinates.map((e=>[e.x,e.y]))}),o=p(i,e);if(!o)return null;const s=this.coordinates.map(((e,t)=>{const i=this._cloneCoordinate(e),s=o.points[t];return i.x=s[0],i.y=s[1],i})),l=this.clone(s);return l.spatialReference=e,l}_cloneCoordinate(e){return{x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}}static fromGeometry(e){const t=new x;if(t.geometry=e,t.spatialReference=e.spatialReference,e instanceof x)t.coordinates=e.coordinates.map((e=>t._cloneCoordinate(e))),t._exporter=(t,i)=>{const o=e.clone(t);return o.spatialReference=i,o};else switch(e.type){case\"point\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?[{x:i.x,y:i.y,z:i.z,m:i.m}]:o?[{x:i.x,y:i.y,z:i.z}]:s?[{x:i.x,y:i.y,m:i.m}]:[{x:i.x,y:i.y}],t._exporter=(t,i)=>e.hasM?new c(t[0].x,t[0].y,t[0].z,t[0].m,i):new c(t[0].x,t[0].y,t[0].z,i);break}case\"multipoint\":{const i=e,{hasZ:o,hasM:s}=i;t.coordinates=o&&s?i.points.map((e=>({x:e[0],y:e[1],z:e[2],m:e[3]}))):o?i.points.map((e=>({x:e[0],y:e[1],z:e[2]}))):s?i.points.map((e=>({x:e[0],y:e[1],m:e[2]}))):i.points.map((e=>({x:e[0],y:e[1]}))),t._exporter=(t,i)=>e.hasM?new r({points:t.map((e=>[e.x,e.y,e.z,e.m])),hasZ:!0,hasM:!0,spatiaReference:i}):new r(t.map((e=>[e.x,e.y,e.z])),i);break}case\"polyline\":{const i=e,o=[],s=[],{hasZ:l,hasM:n}=e;let a=0;for(const e of i.paths)if(s.push([a,a+e.length]),a+=e.length,l&&n)for(const t of e)o.push({x:t[0],y:t[1],z:t[2],m:t[3]});else if(l)for(const t of e)o.push({x:t[0],y:t[1],z:t[2]});else if(n)for(const t of e)o.push({x:t[0],y:t[1],m:t[2]});else for(const t of e)o.push({x:t[0],y:t[1]});t.coordinates=o,t._exporter=(t,i)=>{const o=e.hasM?t.map((e=>[e.x,e.y,e.z,e.m])):t.map((e=>[e.x,e.y,e.z])),l=s.map((e=>o.slice(e[0],e[1])));return new u({paths:l,hasM:e.hasM,hasZ:!0,spatialReference:i})};break}}return t}}class g{constructor(e,t){this.layer=e,this.options=t}}class w extends g{constructor(e,t,i){super(e,i),this.outSpatialReference=t,this.type=\"geometry\"}selectTilesAtLOD(e){if(e<0)this.geometry.coordinates.forEach((e=>e.tile=null));else{const t=this.layer.tileInfo,i=t.lods[e].level;this.geometry.coordinates.forEach((e=>{e.tile=t.tileAt(i,e.x,e.y)}))}}allElevationTilesFetched(){return!this.geometry.coordinates.some((e=>!e.elevationTile))}clearElevationTiles(){for(const e of this.geometry.coordinates)e.elevationTile!==this.outsideExtentTile&&(e.elevationTile=null)}populateElevationTiles(e){for(const t of this.geometry.coordinates)!t.elevationTile&&t.tile&&(t.elevationTile=e[t.tile.id])}remapTiles(e){for(const t of this.geometry.coordinates)t.tile=e[t.tile.id]}getTilesToFetch(){const e={},t=[];for(const i of this.geometry.coordinates){const o=i.tile;i.elevationTile||!i.tile||e[o.id]||(e[o.id]=o,t.push(o))}return t}forEachTileToFetch(e){for(const t of this.geometry.coordinates)t.tile&&!t.elevationTile&&e(t.tile,(()=>t.tile=null))}}class _ extends g{constructor(e,t,i,o){super(e,i),this.type=\"extent\",this.elevationTiles=[],this.candidateTiles=[],this.fetchedCandidates=new Set,this.extent=t.intersection(e.fullExtent),this.maskExtents=o}selectTilesAtLOD(e,t){const i=this._maximumLodForRequests(t),o=Math.min(i,e);o<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(o)}_maximumLodForRequests(e){const t=this.layer.tileInfo;if(!e)return t.lods.length-1;const o=this.extent;if(i(o))return-1;for(let i=t.lods.length-1;i>=0;i--){const s=t.lods[i],l=s.resolution*t.size[0],n=s.resolution*t.size[1];if(Math.ceil(o.width/l)*Math.ceil(o.height/n)<=e)return i}return-1}allElevationTilesFetched(){return this.candidateTiles.length===this.elevationTiles.length}clearElevationTiles(){this.elevationTiles.length=0,this.fetchedCandidates.clear()}populateElevationTiles(e){for(const t of this.candidateTiles){const i=e[t.id];i&&(this.fetchedCandidates.add(t),this.elevationTiles.push(i))}}remapTiles(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map((t=>e[t.id])))}getTilesToFetch(){return this.candidateTiles}forEachTileToFetch(e,t){const i=this.candidateTiles;this.candidateTiles=[],i.forEach((i=>{if(this.fetchedCandidates.has(i))return void(t&&t(i));let o=!1;e(i,(()=>o=!0)),o?t&&t(i):this.candidateTiles.push(i)})),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t)}_uniqueNonOverlappingTiles(e,t){const i={},o=[];for(const l of e)i[l.id]?t&&t(l):(i[l.id]=l,o.push(l));const s=o.sort(((e,t)=>e.level-t.level));return s.filter(((e,i)=>{for(let o=0;o<i;o++)if(d(s[o].extent,e.extent))return t&&t(e),!1;return!0}))}_selectCandidateTilesCoveringExtentAt(e){this.candidateTiles.length=0;const t=this.extent;if(i(t))return;const o=this.layer.tileInfo,s=o.lods[e],l=o.tileAt(s.level,t.xmin,t.ymin),n=s.resolution*o.size[0],a=s.resolution*o.size[1],r=Math.ceil((t.xmax-l.extent[0])/n),c=Math.ceil((t.ymax-l.extent[1])/a);for(let i=0;i<c;i++)for(let e=0;e<r;e++){const t={id:null,level:l.level,row:l.row-i,col:l.col+e};o.updateTileInfo(t),this._tileIsMasked(t)||this.candidateTiles.push(t)}}_tileIsMasked(e){return!!this.maskExtents&&this.maskExtents.some((t=>d(t,e.extent)))}}function E(e,t){let i=e.lods.length-1;if(t>0){const o=e.lods.findIndex((e=>e.resolution<t));0===o?i=0:o>0&&(i=o-1)}return i}const R={maximumAutoTileRequests:20,noDataValue:0,returnSampleInfo:!1,demResolution:\"auto\",minDemResolution:0};export{v as ElevationQuery,x as GeometryDescriptor,E as getFinestLodIndex};\n"],"names":["i","constructor","a","this","tile","zmin","zmax","t","extent","samplerData","pixelData","values","width","height","safeWidth","noDataValue","dx","dy","x0","y1","minValue","maxValue","sample","h","s","l","n","o","r","m","d","u","e","x","f","Math","floor","c","p","D","w","y","V","z","v","ignoreInvisibleLayers","filter","visible","slice","length","fromGeometry","returnSampleInfo","R","query","_queryAllContinue","geometry","export","sampleInfo","type","spatialReference","signal","load","_createGeometryDescriptor","_selectTiles","_populateElevationTiles","_sampleGeometryWithElevation","_createQueryResult","_createSampler","_createSamplerAllContinue","tileInfo","equals","source","dest","_","elevationTiles","layer","options","pop","samplers","map","concat","coordinates","demResolution","push","clone","forEach","project","outSpatialReference","_extractSampleInfo","elevationTile","wkid","_preselectOutsideLayerExtent","_selectTilesClosestResolution","_selectTilesFinestContiguous","_selectTilesAuto","fullExtent","T","outsideExtentTile","xmin","xmax","ymin","ymax","_findNearestDemResolutionLODIndex","selectTilesAtLOD","lods","abs","resolution","E","minDemResolution","_selectTilesFinestContiguousAt","tilemapCache","getTilesToFetch","Promise","all","fetchAvailability","level","row","col","allElevationTilesFetched","clearElevationTiles","cache","async","uid","id","get","fetchTile","put","populateElevationTiles","_selectTilesAutoFinest","_reduceTilesForMaximumRequests","_selectTilesAutoPrefetchUpsample","fetchAvailabilityUpsample","ok","error","remapTiles","forEachTileToFetch","maximumAutoTileRequests","upsampleTile","lodAt","_exporter","_cloneCoordinate","points","hasZ","hasM","spatiaReference","paths","g","super","tileAt","some","candidateTiles","fetchedCandidates","Set","intersection","maskExtents","_maximumLodForRequests","min","_selectCandidateTilesCoveringExtentAt","size","ceil","clear","add","_uniqueNonOverlappingTiles","has","sort","updateTileInfo","_tileIsMasked","findIndex"],"sourceRoot":""}